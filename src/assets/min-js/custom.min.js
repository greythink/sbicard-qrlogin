/*! SBI - v1.0.0
* Sapient Nitro (http://www.sapient.com)
* Author: Sapient Nitro
* Date: 2024-08-07 18:04:03
* (http://www.sapient.com) Copyright (c) 2024 -  */
function isNumberKey(evt){var charCode=evt.which?evt.which:evt.keyCode;return charCode>31&&(48>charCode||charCode>57)?!1:!0}function validateContactForm(){$("#contact-update-form").validate({submitHandler:function(){makeAjaxWithLoader({url:$("#contact-update-form").attr("action"),type:"post",data:$("#contact-update-form").serialize(),success:function(data){$("#quick-contact-tab").html(data),""!==quickJsonObj.email&&""!==quickJsonObj.mobile&&($(".user-info").find(".content-wrap #email-address").html(quickJsonObj.email),$(".user-info").find(".content-wrap #mobile-number").html(quickJsonObj.mobile)),validateContactForm(),$("#contact-update-form").find("#submit-contact-details").show(),$("#quick-contact-tab").find("#generate-otp-tab").hide(),$("#quick-contact-tab").find("#otp-AttemptExceeded").length>0?($("#quick-contact-tab").find("#generate-otp-tab").show(),$("#contact-update-form").find("#resend-otp-tab").hide(),$("#quick-contact-tab").find("#generate-otp-quick-contact").attr("disabled","disabled"),$("#quick-contact-tab").find("#generate-otp-quick-contact").addClass("secondary"),$("#contact-update-form").find("#emailAddress").attr("disabled","disabled"),$("#contact-update-form").find("#mobileNumber").attr("disabled","disabled")):($("#quick-contact-tab").find("#generate-otp-quick-contact").removeAttr("disabled"),$("#contact-update-form").find("#emailAddress").removeAttr("disabled"),$("#contact-update-form").find("#mobileNumber").removeAttr("disabled"),$("#quick-contact-tab").find("#generate-otp-quick-contact").removeClass("secondary"))}})}})}function addressChange(){$(document).delegate(".noSpecial-noInteger","keydown",function(e){if(e.ctrlKey||e.altKey)e.preventDefault();else{var key=e.keyCode?e.keyCode:e.which;8==key||9==key||13==key||32==key||46==key||key>=35&&40>=key||key>=65&&90>=key||e.preventDefault()}})}function addressValidator(event){var regex=new RegExp("^[a-zA-Zd0-9-,/&_.@ ]+$"),key=String.fromCharCode(event.charCode?event.which:event.charCode);return 8==event.keyCode||9==event.keyCode||46==event.keyCode||regex.test(key)?void 0:(event.preventDefault(),!1)}function referAFriendValidator(event){var regex=new RegExp("[a-zA-Z ]"),key=String.fromCharCode(event.charCode?event.which:event.charCode);return 8==event.keyCode||9==event.keyCode||46==event.keyCode||regex.test(key)?void 0:(event.preventDefault(),!1)}function emailValidator(event){var regex=new RegExp("^[a-zA-Zd0-9._@ ]+$"),key=String.fromCharCode(event.charCode?event.which:event.charCode);return 8==event.keyCode||9==event.keyCode||46==event.keyCode||regex.test(key)?void 0:(event.preventDefault(),!1)}function useridValidation_Reg(){var userid_regex="^[a-zA-Zd0-9._@ ]+$",username=$("#userid").val(),regexsymbol="[^\\x00-\\x7F]";return username.match(userid_regex)?username.match(regexsymbol)?!1:!0:!1}function designationValidator(event){var regex=new RegExp("^[a-zA-Zd0-9 ]+$"),key=String.fromCharCode(event.charCode?event.which:event.charCode);return 8==event.keyCode||9==event.keyCode||46==event.keyCode||regex.test(key)?void 0:(event.preventDefault(),!1)}function srNumberValidator(event){var regex=new RegExp("[0-9-]"),key=String.fromCharCode(event.charCode?event.which:event.charCode);return 8==event.keyCode||46==event.keyCode||9==event.keyCode||regex.test(key)?void 0:(event.preventDefault(),!1)}function socialValidator(event){var regex=new RegExp("[a-zA-Zd0-9-._]"),key=String.fromCharCode(event.charCode?event.which:event.charCode);return 8==event.keyCode||46==event.keyCode||9==event.keyCode||regex.test(key)?void 0:(event.preventDefault(),!1)}function changeDateIntlNumber(){$(".my-profile #international-tab .field-wrap input#intlNumber").on("focusout",function(){var value=$("#intlNumber-hdn").val(),currentValue=$(this).val();currentValue!==value&&($(".datepicker input#validTo").datepicker("option","maxDate","+90d"),$("#intlNumber-hdn").val($("#intlNumber").val()))})}function getSelectionStart(o){if(o.createTextRange){var r=document.selection.createRange().duplicate();return r.moveEnd("character",o.value.length),""===r.text?o.value.length:o.value.lastIndexOf(r.text)}return o.selectionStart}function _test_populateCard(creditCardNum){$("#card-number-1").val(creditCardNum.substring(0,4)),$("#card-number-2").val(creditCardNum.substring(4,8)),$("#card-number-3").val(creditCardNum.substring(8,12)),$("#card-number-4").val(creditCardNum.substring(12))}function checkDecimals(fieldName,fieldValue){var decallowed=1;if(-1==fieldValue.indexOf("."))fieldValue+=".";else if(fieldValue.split(".").length>1)return!1;return dectext=fieldValue.substring(fieldValue.indexOf(".")+1,fieldValue.length),dectext.length>decallowed?!1:!0}function relativeFieldValidation(){$(".refer .name").each(function(){$(this).rules("add",{required:!0,minlength:1,messages:{required:" ",minlength:" "}})}),$(".refer .city").each(function(){$(this).rules("add",{required:!0,messages:{required:" "}})}),$(".refer .emailAdd").each(function(){$(this).rules("add",{required:!0,emailFormat:!0,messages:{required:" ",emailFormat:" "}})}),$(".refer .mobile").each(function(){$(this).rules("add",{required:!0,minlength:10,noStartWith9or8or7:!0,messages:{required:" ",noStartWith9or8or7:"",minlength:" "}})}),applyValidationOnInter(),applyValidationOnChangeAdd()}function applyValidationOnInter(){$("#intl-number-update-form").validate({onkeyup:!1,rules:{intlNumber:{required:!0,minlength:8,maxlength:15,noStartWith0:!0},validTo:{required:!0},otpNumber:{required:!0,minlength:6}},messages:{intlNumber:{required:" ",minlength:" ",maxlength:" ",noStartWith0:" "},validTo:{required:" "},otpNumber:{required:" ",minlength:" "}},success:function(){validClass="valid"},highlight:function(element,errorClass,validClass){$(element).addClass(errorClass).removeClass(validClass)},unhighlight:function(element,errorClass,validClass){$(element).removeClass(errorClass).addClass(validClass),$(element).next("label").addClass(validClass)},submitHandler:function(){makeAjaxWithLoader({url:$("#intl-number-update-form").attr("action"),type:"post",data:$("#intl-number-update-form").serialize(),success:function(data){$("#international-tab").html(data),$("#intl-number-update-form #generate-otp-tab").hide(),$("#international-tab").find("#opt-fiveTimeFail").length>0?($("#international-tab").find("#generate-otp-tab").show(),$("#intl-number-update-form").find("#resend-otp-tab").hide(),$("#intl-number-update-form").find("#generate-otp-tab").children("#generate-otp-intl").attr("disabled","disabled"),$("#intl-number-update-form").find("#generate-otp-tab").children("#generate-otp-intl").addClass("secondary"),$("#intl-number-update-form input").prop("disabled",!0)):($("#intl-number-update-form").find("#generate-otp-tab").children("#generate-otp-intl").removeAttr("disabled"),$("#intl-number-update-form").find("#generate-otp-tab").children("#generate-otp-intl").removeClass("secondary")),applyValidationOnInter(),changeDateIntlNumber();var currDate=$(".international .datepicker input#validTo").attr("data-currDate"),maxD=parseInt($(".international .datepicker input#validTo").attr("data-validDate"));$(".datepicker input#validTo").datepicker({dateFormat:"dd-M-yy",changeMonth:!0,changeYear:!0,maxDate:"+"+maxD+"d",minDate:new Date(currDate)}).click(function(){$(this).blur().focus()})}})}})}function applyValidationOnChangeAdd(){var addressConfig={required:!0,rangelength:[3,40]};$("#change-address-form").validate({onkeyup:function(element){$(element).valid()},rules:{residenceAddress:addressConfig,residenceAddressContd:addressConfig,companyAddressContd:addressConfig,companyAddress:addressConfig,residenceState:"required",residenceCity:"required",residenceZipCode:"required",companyState:"required",companyCity:"required",companyZipCode:"required",companyName:"required",country_code:"required",officePinCode:"required",landlinePhone:{minlength:11},companylandlinePhone:{minlength:11}},groups:{},messages:{residenceAddress:" ",residenceState:" ",residenceCity:" ",companyState:" ",companyCity:" ",residenceZipCode:" ",companyZipCode:" ",country_code:" ",residenceAddressContd:" ",companyAddressContd:" ",companyAddress:" ",officePinCode:{required:" "},landlinePhone:{integer:" ",minlength:" "},companylandlinePhone:{minlength:" "}},errorPlacement:function($error,$element){var elementName=$element.attr("name"),lastInGroup=$.map(this.groups,function(fields){var fieldsArr;return fields.indexOf(elementName)>=0?(fieldsArr=fields.split(" "),fieldsArr[fieldsArr.length-1]):null})[0];lastInGroup?$error.insertAfter($("input[name='"+lastInGroup+"']")):"otpNumberResi"!=elementName&&$error.insertAfter($element)},success:function(element){"addrKycOtp"!=$(element).attr("id")&&(validClass="valid")},highlight:function(element,errorClass,validClass){"addrKycOtp"!=$(element).attr("id")&&$(element).addClass(errorClass).removeClass(validClass)},unhighlight:function(element,errorClass,validClass){"residenceLandmark"==$(element).attr("id")&&0===$(element).val().length||"companyLandmark"==$(element).attr("id")&&0===$(element).val().length||"companyName"==$(element).attr("id")&&0===$(element).val().length||"designation"==$(element).attr("id")&&0===$(element).val().length||"landlinePhone"==$(element).attr("id")&&0===$(element).val().length||"companylandlinePhone"==$(element).attr("id")&&0===$(element).val().length?($(element).next("label").remove(),("landlinePhone"==$(element).attr("id")&&0===$(element).val().length||"companylandlinePhone"==$(element).attr("id")&&0===$(element).val().length)&&$(element).removeClass("error")):"addrKycOtp"!=$(element).attr("id")&&($(element).removeClass(errorClass).addClass(validClass),$(element).next("label").addClass(validClass))},submitHandler:function(){$(window).scrollTop(0);var strCode=$("#change-address-form #country_code option:selected").text(),number=$("#change-address-form #landlinePhone").val(),combinedNo=strCode+""+number;$("#change-address-form #residenceLandline").val(combinedNo),$("#change-address-form #companyLandline").val($("#change-address-form #companyCountry_code option:selected").text()+""+$("#change-address-form #companylandlinePhone").val()),makeAjaxWithLoader({url:$("#change-address-form").attr("action"),type:"post",data:$("#change-address-form").serialize(),success:function(data){if($("#address-tab").html(data),$("#change-address-form #generate-otp-tab").hide(),$("#address-tab").find("#opt-fiveTimeFail").length>0?($("#change-address-form").find("#generate-otp-tab").show(),$("#change-address-form").find("#resend-otp-tab").hide(),$("#change-address-form input").prop("disabled",!0),$("#change-address-form select").prop("disabled",!0),$("#change-address-form").find("#generate-otp-tab").children("#generate-otp-intl").addClass("secondary")):$("#change-address-form").find("#generate-otp-tab").children("#generate-otp-intl").removeClass("secondary"),$("#change-address-form #country_code").val(),$("select.dynCity").fancySelect(),$("select.dynPin").fancySelect(),$("select.dynState").renderStateDropDown(),""!=$("#residenceState").attr("data-selected")&&null!=$("#residenceState").attr("data-selected")){var hiddenVal=$("#residenceState").attr("data-selected").toUpperCase();$("#residenceState  option[value='"+hiddenVal+"']").prop("selected",!0).change()}if(""!=$("#companyState").attr("data-selected")&&null!=$("#companyState").attr("data-selected")){var hiddenVal=$("#companyState").attr("data-selected").toUpperCase();$("#companyState  option[value='"+hiddenVal+"']").prop("selected",!0).change()}if(""!=$("#residenceCity").attr("data-selected")&&null!=$("#residenceCity").attr("data-selected")){var hiddenVal=$("#residenceCity").attr("data-selected").toUpperCase();$("#residenceCity  option[value='"+hiddenVal+"']").prop("selected",!0).change()}if(""!=$("#companyCity").attr("data-selected")&&null!=$("#companyCity").attr("data-selected")){var hiddenVal=$("#companyCity").attr("data-selected").toUpperCase();$("#companyCity  option[value='"+hiddenVal+"']").prop("selected",!0).change()}""!=$("#residenceZipCode").attr("data-selected")&&null!=$("#residenceZipCode").attr("data-selected")&&$(".dynPin.resi .trigger").text($("#residenceZipCode").attr("data-selected")),""!=$("#companyZipCode").attr("data-selected")&&null!=$("#companyZipCode").attr("data-selected")&&$(".dynPin.office .trigger").text($("#companyZipCode").attr("data-selected"));$("#residenceCity :selected").attr("data-id"),$("#residenceCitySpan").text(),$("#companyCity :selected").attr("data-id"),$("#companyCitySpan").text(),$("#residenceZipCodeSpan").text(),$("#comapnyZipCodeSpan").text(),$("#residenceState :selected").attr("data-id"),$("#residenceStateSpan").text(),$("#companyState :selected").attr("data-id"),$("#companyStateSpan").text();applyValidationOnChangeAdd()}})}})}function populatePinSelect(cityId,name,dataFor,selectedPin){$.ajax({type:"POST",data:{cityId:cityId,name:name},url:"/creditcards/app/myprofile/pinStdList",success:function(data){try{var selectedPinArray=data[0].pin,htmlPin="<option value=''>Select a Pin</option>";for(i=0;i<selectedPinArray.length;i++)htmlPin+=void 0!==selectedPin&&""!==selectedPin&&$.trim(selectedPin)==$.trim(selectedPinArray[i])?"<option value="+selectedPinArray[i]+" selected>"+selectedPinArray[i]+"</option>":"<option value="+selectedPinArray[i]+">"+selectedPinArray[i]+"</option>";"residence"==dataFor?($("#residenceZipCode").html(htmlPin),$("html").hasClass("desktop")&&($("#residenceZipCode").fancySelect(),$("#residenceZipCode").trigger("update.fs"))):"company"==dataFor&&($("#companyZipCode").html(htmlPin),$("html").hasClass("desktop")&&($("#companyZipCode").fancySelect(),$("#companyZipCode").trigger("update.fs"))),isiOS&&$("#residenceCity, #residenceZipCode, #country_code, #companyCity, #companyZipCode, #companyCountry_code").fancySelect({forceiOS:!0})}catch(e){}}})}function validateTridentPrimeCard(){$("#tridentMembership").validate({onfocusout:function(element){$(element).valid()},onkeyup:!1,rules:{salutation:"required",firstName:{required:!0},lastName:{checkDependencies:{depends:function(){return viewport.width>1e3}}},isExistingMember:"required",membershipNumber:{required:function(){return"Yes"==$("#isExistingMember").val()},integer:!0,maxlength:6,minlength:6},emailId:{required:!0,emailFormat:{depends:function(){return"Yes"==$("#isExistingMember").val()}}},membershipTier:{required:function(){return"Yes"==$("#isExistingMember").val()}},mobileNo:{required:!0},terms:{required:!0}},groups:{},messages:{firstName:" ",lastName:" ",isExistingMember:" ",emailId:" ",mobileNo:" ",terms:" ",membershipTier:" ",membershipNumber:" "},errorPlacement:function($error,$element){var elementName=$element.attr("name"),lastInGroup=$.map(this.groups,function(fields){var fieldsArr;return fields.indexOf(elementName)>=0?(fieldsArr=fields.split(" "),fieldsArr[fieldsArr.length-1]):null})[0];$error.insertAfter(lastInGroup?$("input[name='"+lastInGroup+"']"):$element),"emailId"==$($element).attr("id")&&$($element).next("label").addClass("dynamicEmailLabel1")},success:function(){validClass="valid"},highlight:function(element,errorClass,validClass){"terms"==$(element).attr("id")&&($(element).next("label").next().css("border","1px solid red"),$("#lastName").next("label").addClass(errorClass).removeClass(validClass)),"lastName"==$(element).attr("id")&&viewport.width>1e3?(""==$("#lastName").val()&&$(element).addClass(validClass).removeClass(errorClass),""==$("#firstName").val()?$("#firstName").addClass(errorClass).removeClass(validClass):""==$("#salutation option:selected").val()&&$("#salutation").addClass(errorClass).removeClass(validClass)):$(element).addClass(errorClass).removeClass(validClass)},unhighlight:function(element,errorClass,validClass){"terms"==$(element).attr("id")&&$(element).next("label").next().css("border",""),("lastName"==$(element).attr("id")||"salutation"==$(element).attr("id")||"firstName"==$(element).attr("id"))&&viewport.width>1e3?"lastName"==$(element).attr("id")?(""!=$("#lastName").val()&&($(element).removeClass(errorClass).addClass(validClass),$("#lastName").next("label").addClass(validClass)),""==$("#firstName").val()?$("#firstName").addClass(errorClass).removeClass(validClass):""==$("#salutation option:selected").val()&&$("#salutation").addClass(errorClass).removeClass(validClass),$("#firstName").hasClass(validClass)&&$("#lastName").hasClass(validClass)&&$("#salutation").hasClass(validClass)&&$("#lastName").next("label").addClass(validClass)):"salutation"==$(element).attr("id")?($(element).removeClass(errorClass).addClass(validClass),$(element).next("label").addClass(validClass),""!=$("#firstName").val()&&$("#salutation option:selected").val()&&$("#lastName").removeClass(errorClass).addClass(validClass),$("#firstName").hasClass(validClass)&&$("#lastName").hasClass(validClass)&&$("#salutation").hasClass(validClass)&&$("#lastName").next("label").addClass(validClass)):($(element).removeClass(errorClass).addClass(validClass),$(element).next("label").addClass(validClass),""!=$("#firstName").val()&&$("#salutation option:selected").val()&&$("#lastName").removeClass(errorClass).addClass(validClass),$("#firstName").hasClass(validClass)&&$("#lastName").hasClass(validClass)&&$("#salutation").hasClass(validClass)&&$("#lastName").next("label").addClass(validClass)):($(element).removeClass(errorClass).addClass(validClass),$(element).next("label").addClass(validClass))},submitHandler:function(form){var loaderHtml='<div class="overlay-loader"></div>';$("body").append(loaderHtml),form.submit()}})}function validateVistaraPrimeCard(){$("#vistaraMemebershipSubscriptionForm").validate({onfocusout:function(element){$(element).valid()},onkeyup:!1,rules:{salutation:"required",firstName:{required:!0},lastName:{required:!0,checkFullName:{depends:function(){return viewport.width>1e3}}},isExistingMember:{required:!0},membershipNumber:{required:function(){return"Yes"==$("#isExistingMember").val()},integer:!0,maxlength:9,minlength:9,mod7Logic:!0},emailId:{required:!0,emailFormat:{depends:function(){return"Yes"==$("#isExistingMember").val()}}},membershipTier:{required:function(){return"Yes"==$("#isExistingMember").val()},lowTier:!0},mobileNo:{required:!0},terms:{required:!0},city:{required:!0},stateProv:{required:!0,notEqual:"select"}},groups:{},messages:{firstName:" ",lastName:" ",isExistingMember:" ",emailId:" ",mobileNo:" ",terms:" ",stateProv:" ",membershipTier:" ",membershipNumber:" "},errorPlacement:function($error,$element){var elementName=$element.attr("name"),lastInGroup=$.map(this.groups,function(fields){var fieldsArr;return fields.indexOf(elementName)>=0?(fieldsArr=fields.split(" "),fieldsArr[fieldsArr.length-1]):null})[0];$error.insertAfter(lastInGroup?$("input[name='"+lastInGroup+"']"):$element),"emailId"==$($element).attr("id")&&$($element).next("label").addClass("dynamicEmailLabel1")},success:function(){validClass="valid"},highlight:function(element,errorClass,validClass){"terms"==$(element).attr("id")&&$("label[for=terms]").next().css("border","1px solid red"),"lastName"==$(element).attr("id")&&viewport.width>1e3?(""==$("#lastName").val()&&($(element).addClass(errorClass).removeClass(validClass),$("#lastName").next("label").addClass(errorClass).removeClass(validClass)),""==$("#firstName").val()?$("#firstName").addClass(errorClass).removeClass(validClass):""==$("#salutation option:selected").val()&&$("#salutation").addClass(errorClass).removeClass(validClass)):$(element).addClass(errorClass).removeClass(validClass)},unhighlight:function(element,errorClass,validClass){"terms"==$(element).attr("id")&&$("label[for=terms]").next().css("border",""),("lastName"==$(element).attr("id")||"salutation"==$(element).attr("id")||"firstName"==$(element).attr("id"))&&viewport.width>1e3?"lastName"==$(element).attr("id")?(""!=$("#lastName").val()&&($(element).removeClass(errorClass).addClass(validClass),$("#lastName").next("label").addClass(validClass)),""==$("#firstName").val()?$("#firstName").addClass(errorClass).removeClass(validClass):""==$("#salutation option:selected").val()&&$("#salutation").addClass(errorClass).removeClass(validClass),$("#firstName").hasClass(validClass)&&$("#lastName").hasClass(validClass)&&$("#salutation").hasClass(validClass)&&$("#lastName").next("label").addClass(validClass)):"salutation"==$(element).attr("id")?($(element).removeClass(errorClass).addClass(validClass),$(element).next("label").addClass(validClass),""!=$("#firstName").val()&&""!=$("#lastName").val()&&$("#salutation option:selected").val()&&$("#lastName").removeClass(errorClass).addClass(validClass),$("#firstName").hasClass(validClass)&&$("#lastName").hasClass(validClass)&&$("#salutation").hasClass(validClass)&&$("#lastName").next("label").addClass(validClass)):($(element).removeClass(errorClass).addClass(validClass),$(element).next("label").addClass(validClass),""!=$("#firstName").val()&&""!=$("#lastName").val()&&$("#salutation option:selected").val()&&$("#lastName").removeClass(errorClass).addClass(validClass),$("#firstName").hasClass(validClass)&&$("#lastName").hasClass(validClass)&&$("#salutation").hasClass(validClass)&&$("#lastName").next("label").addClass(validClass)):($(element).removeClass(errorClass).addClass(validClass),$(element).next("label").addClass(validClass))},submitHandler:function(form){var loaderHtml='<div class="overlay-loader"></div>';$("body").append(loaderHtml),form.submit()}})}function isNavigaionKeys(keycodes){return 8!=keycodes&&35!=keycodes&&36!=keycodes&&37!=keycodes&&39!=keycodes?!0:!1}function formatNonAmexWhileDelete(cardNumberIP){4==cardNumberIP.length?(cardNumberIP=cardNumberIP.slice(0,3),$("#card-number-single").val(cardNumberIP)):9==cardNumberIP.length?(cardNumberIP=cardNumberIP.slice(0,8),$("#card-number-single").val(cardNumberIP)):14==cardNumberIP.length&&(cardNumberIP=cardNumberIP.slice(0,13),$("#card-number-single").val(cardNumberIP))}function formatAmexWhileDelete(cardNumberIP){4==cardNumberIP.length?(cardNumberIP=cardNumberIP.slice(0,3),$("#card-number-single").val(cardNumberIP)):11==cardNumberIP.length&&(cardNumberIP=cardNumberIP.slice(0,10),$("#card-number-single").val(cardNumberIP))}function formatAndVerifyNonAmex(cardNumberIP){cardNumberIP.length<20?((4==cardNumberIP.length||9==cardNumberIP.length||14==cardNumberIP.length)&&(cardNumberIP+="-",$("#card-number-single").val(cardNumberIP)),19==cardNumberIP.length&&($(".validate-form #card-number-1").focus(),cardNumberIP=cardNumberIP.slice(0,19),$("#card-number-single").val(cardNumberIP),validateCardNumbers(cardNumberIP,!1))):cardNumberIP.length>19&&($("#cvv-number").focus(),cardNumberIP=cardNumberIP.slice(0,19),$("#card-number-single").val(cardNumberIP))}function formatAndVerifyAmex(cardNumberIP){cardNumberIP.length<18?((4==cardNumberIP.length||11==cardNumberIP.length)&&(cardNumberIP+="-",$("#card-number-single").val(cardNumberIP)),17==cardNumberIP.length&&(cardNumberIP=cardNumberIP.slice(0,17),$("#card-number-single").val(cardNumberIP),validateCardNumbers(cardNumberIP,!0))):cardNumberIP.length>17&&($("#cvv-number").focus(),cardNumberIP=cardNumberIP.slice(0,17),$("#card-number-single").val(cardNumberIP))}function validateCardNumbers(cardNumberIP,isAmex){if(isAmex){var cardNumber1=cardNumberIP.slice(0,4),cardNumber2=cardNumberIP.slice(5,11),cardNumber3=cardNumberIP.slice(12,17),cardNumber4="";$("#cvv-number").focus(),$(".validate-form #card-number-1").val(cardNumber1),$(".validate-form #card-number-2").val(cardNumber2),$(".validate-form #card-number-3").val(cardNumber3),$(".validate-form #card-number-4").val(cardNumber4);var cardNumber=cardNumber1.concat(cardNumber2,cardNumber3),isValid=creditCardValidate(cardNumber);isValid?($(".button-wrap input#preloginAadharRegBtn").attr("disabled",!1),setStyleValid()):($(".button-wrap input#preloginAadharRegBtn").attr("disabled",!0),setStyleError())}else{var cardNumber1=cardNumberIP.slice(0,4),cardNumber2=cardNumberIP.slice(5,9),cardNumber3=cardNumberIP.slice(10,14),cardNumber4=cardNumberIP.slice(15,19);$("#cvv-number").focus(),$(".validate-form #card-number-1").val(cardNumber1),$(".validate-form #card-number-2").val(cardNumber2),$(".validate-form #card-number-3").val(cardNumber3),$(".validate-form #card-number-4").val(cardNumber4);var cardNumber=cardNumber1.concat(cardNumber2,cardNumber3,cardNumber4),isValid=creditCardValidate(cardNumber);isValid?($(".button-wrap input#preloginAadharRegBtn").attr("disabled",!1),setStyleValid()):($(".button-wrap input#preloginAadharRegBtn").attr("disabled",!0),setStyleError())}}function setStyleError(){resetCardFieldStyle(),$(".validate-form #card-number-single").addClass("error"),$(".validate-form #card-number-single").removeClass("valid");var card5Error='<label id="card5_invalid" for="card-number-single" class="error"></label>';$("#card-number-single").after(card5Error)}function setStyleValid(){resetCardFieldStyle(),$(".validate-form #card-number-single").addClass("valid");var card5Valid='<label id="card5_valid" for="card-number-single" class="valid"></label>';$("#card-number-single").after(card5Valid)}function resetCardFieldStyle(){$(".validate-form #card-number-single").hasClass("error")&&$(".validate-form #card-number-single").removeClass("error"),$("#card-number-single").siblings("label").hasClass("valid")&&$(".validate-form #card-number-single").siblings("label.valid").remove(),$("#card-number-single").siblings("label").hasClass("error")&&$(".validate-form #card-number-single").siblings("label.error").remove()}function checkAuthFormValidity(){$(".validate-form #card-number-single").hasClass("error")||$(".validate-form #cvv-number").hasClass("error")||$(".validate-form #dob").hasClass("error")?$("#validate-card-button").prop("disabled",!0):$("#validate-card-button").prop("disabled",!1)}function checkAmexCvvFormat(){var amexCvv=$(".validate-form #cvv-number").val();isAmexCard?amexCvv.length<4?setAmexCvvError():(amexCvv.length=4)&&setAmexCvvValid():amexCvv.length<3?setAmexCvvError():(amexCvv.length=3)&&setAmexCvvValid()}function setAmexCvvError(){resetAmexCvvStyle(),$(".validate-form #cvv-number").addClass("error"),$(".validate-form #cvv-number").removeClass("valid");var cvvError='<label id="cvv_invalid" for="cvv-number" class="error"></label>';$(".validate-form #cvv-number").after(cvvError)}function setAmexCvvValid(){resetAmexCvvStyle(),$(".validate-form #cvv-number").addClass("valid");var cvvValid='<label id="cvv_valid" for="cvv-number" class="valid"></label>';$(".validate-form #cvv-number").after(cvvValid)}function resetAmexCvvStyle(){$(".validate-form #cvv-number").hasClass("error")&&$(".validate-form #cvv-number").removeClass("error"),$(".validate-form #cvv-number").siblings("label").hasClass("valid")&&$(".validate-form form #cvv-number").siblings("label.valid").remove(),$(".validate-form #cvv-number").siblings("label").hasClass("error")&&$(".validate-form #cvv-number").siblings("label.error").remove()}function callDncOTPverifyEncash(data){console.log(data);var data=data;setTimeout(function(){dncOTPverifyEncash(data)},5e3)}function dncOTPverifyEncash(data){if(window.analytics){{({session_id:$("#encash-form #encashAnalyticsSessionId").val(),journey_name:$("#encash-form #encashJourneyName").val(),journey_id:$("#encash-form #encashJourneyId").val(),inbound_channel:"Website",account_no:$("#encash-form #encashRegisteredAccountNumber").val(),source_page_url:window.location.href,status:1==data.success?"success":"failure",error_code:0==data.success?data.statusCode:"",error_description:0==data.success?data.message:"",customer_ip_address:$("#encash-form #encashFromIpAddress").val(),page_name:"Encash Booking",referer:$("#encash-form #encashReferer").val()?$("#encash-form #encashReferer").val():window.location.href})}analytics.track("avail_offer_otp_verification",{session_id:$("#encash-form #encashAnalyticsSessionId").val(),journey_name:$("#encash-form #encashJourneyName").val(),journey_id:$("#encash-form #encashJourneyId").val(),inbound_channel:"Website",account_no:$("#encash-form #encashRegisteredAccountNumber").val(),source_page_url:window.location.href,status:1==data.success?"success":"failure",error_code:0==data.success?data.statusCode:"",error_description:0==data.success?data.message:"",customer_ip_address:$("#encash-form #encashFromIpAddress").val(),page_name:"Encash Booking",referer:$("#encash-form #encashReferer").val()?$("#encash-form #encashReferer").val():window.location.href})}}function checkStrength(password){var strength=0;if(password.length<12){$("#new-cred-pwd-strength-status").removeClass(),$("#new-cred-pwd-strength-status:first-child").addClass("short"),$("#pro-pwd-check-valid").remove(),isPasswordStrong=!1;var atleastThreeAlphabetsRegExp="(?:[a-zA-Z].*){3}";password.length>11&&new RegExp(atleastThreeAlphabetsRegExp).test(password)&&(strength+=1),password.match(/([a-z].*[A-Z])|([A-Z].*[a-z])/)&&(strength+=1),password.match(/([a-zA-Z])/)&&password.match(/([0-9])/)&&password.match(/([!,%,&,@,#,$,^,*,?,_,~])/)&&(strength+=1);var browserurl=location.href,substring="expirepassword-page";if(-1!==browserurl.indexOf(substring)&&handleTickCrossMarkForMainJourney(password.length),isPasswordsMatch=!1,2>strength){if($("#new-cred-pwd-strength-status").removeClass(),$("#pro-pwd-check-valid").remove(),$("#new-cred-pwd-strength-status:first-child").addClass("proActPwdWeak"),$("#new-cred-pwd-strength-status:nth-child(2)").addClass("proActPwdWeak"),$("#pro-pwd-check-valid").remove(),isPasswordStrong=!1,password.length>0){var unameError='<label id="pro-pwd-check-valid" for="pro-new-password" class="error" style="top:6px;margin-left: 32px;"></label>',browserurl=location.href,substringfp="forgotpassword",substringreg="register",substringunl="unlock",substringpin="pin",substringExpPwd="expirepassword";-1!==browserurl.indexOf(substringfp)||-1!==browserurl.indexOf(substringreg)||-1!==browserurl.indexOf(substringunl)||-1!==browserurl.indexOf(substringpin)?($('label[for="pro-new-password"]').parent().find("label.valid").remove(),$('label[for="pro-new-password"]').parent().find("label.error").remove()):$("#pro-password-icon1").after(unameError)}}else if(2==strength){if($("#new-cred-pwd-strength-status").removeClass(),$("#pro-pwd-check-valid").remove(),$("#new-cred-pwd-strength-status:first-child").addClass("proActPwdGood"),$("#new-cred-pwd-strength-status:nth-child(2)").addClass("proActPwdGood"),$("#new-cred-pwd-strength-status:nth-child(3)").addClass("proActPwdGood"),$('label[for="pro-new-password"]').parent().find("label.valid").remove(),$('label[for="pro-pwd-check-valid"]').parent().find("label.valid").remove(),$("#pro-pwd-check-valid").length);else{var unameError='<label id="pro-pwd-check-valid" for="pro-new-password" class="error" style="top:6px;margin-left: 32px;"></label>',browserurl=location.href,substringfp="forgotpassword",substringreg="register",substringunl="unlock",substringpin="pin",substringExpPwd="expirepassword",unameError='<label id="pro-pwd-check-valid" for="pro-new-password" class="error" style="top:6px;margin-left: 32px;"></label>';-1!==browserurl.indexOf(substringfp)||-1!==browserurl.indexOf(substringreg)||-1!==browserurl.indexOf(substringunl)||-1!==browserurl.indexOf(substringpin)?($('label[for="pro-new-password"]').parent().find("label.valid").remove(),$('label[for="pro-pwd-check-valid"]').parent().find("label.valid").remove(),$('label[for="pro-new-password"]').parent().find("label.error").remove()):$("#pro-password-icon1").after(unameError)}isPasswordStrong=!1}else{if($("#new-cred-pwd-strength-status").removeClass().addClass("proActPwdStrong"),$("#new-cred-pwd-strength-status:first-child").addClass("proActPwdStrong"),$("#new-cred-pwd-strength-status:nth-child(2)").addClass("proActPwdStrong"),$("#new-cred-pwd-strength-status:nth-child(3)").addClass("proActPwdStrong"),$("#pro-pwd-check-valid").length);else if($('label[for="password"]')){var browserurl=location.href,substring="forgotpassword-authotp-page",substring1="register-update-credentials-page",substring2="forgotpassword-set-credentials-page",substring3="register-authotp-page",substring4="register-set-credentials-page",substring5="password-tab",substring6="unlock-set-credentials-page",substringfp="forgotpassword",substringreg="register",substringunl="unlock",substringpin="pin",substringExpPwd="expirepassword";
-1!==browserurl.indexOf(substring)||-1!==browserurl.indexOf(substring1)||-1!==browserurl.indexOf(substring2)||-1!==browserurl.indexOf(substring3)||-1!==browserurl.indexOf(substring4)||-1!==browserurl.indexOf(substring5)||-1!==browserurl.indexOf(substring6)||(-1!==browserurl.indexOf(substringfp)||-1!==browserurl.indexOf(substringreg)||-1!==browserurl.indexOf(substringunl)||-1!==browserurl.indexOf(substringpin)||-1!==browserurl.indexOf(substringExpPwd))&&($('label[for="pro-new-password"]').parent().find("label.error").remove(),$('label[for="pro-pwd-check-valid"]').parent().find("label.error").remove())}isPasswordStrong=!0}var unameValid='<label id="pro-pwd-check-valid" for="pro-new-password" class="valid" style="top:6px;margin-left: 32px;"></label>';if(1==isPasswordStrong){$('label[for="pro-new-password"]').parent().find("label.error").remove(),$("#pro-pwd-check-valid").remove();var browserurl=location.href,substring="contact-details-page",substringfp="forgotpassword",substringreg="register",substringunl="unlock",substringpin="pin",substringExpPwd="expirepassword";-1!==browserurl.indexOf(substring)||-1!==browserurl.indexOf(substringfp)||-1!==browserurl.indexOf(substringreg)||-1!==browserurl.indexOf(substringunl)||-1!==browserurl.indexOf(substringpin)?($('label[for="pro-new-password"]').parent().find("label.error").remove(),$('label[for="pro-pwd-check-valid"]').parent().find("label.error").remove()):$("#pro-password-icon1").after(unameValid)}}}function handleTickCrossMarkForMainJourney(){$("#password").attr("style","border: 1px solid #cdcbcb;"),isPasswordStrong=!1,$("#confirmPassword").val(""),$('label[for="confirm-password"]').parent().find("label.error").remove(),$('label[for="confirm-password"]').parent().find("label.valid").remove(),$("#proPwdMismatchMessage").html("")}function getIsPasswordMatchStatus(){var pwd=$("#password").val(),confPwd=$("#confirmPassword").val(),isPasswordsMatch=!1;return isPasswordsMatch=confPwd.length>0&&pwd!=confPwd?!1:pwd==confPwd&&""!=confPwd&&null!=confPwd?!0:!1}function applyValidationOnAddressChangeKycForm(){var addressConfig={required:!0,rangelength:[3,40]};$("#digiLockAddrChangeForm").validate({onkeyup:function(element){$(element).valid()},rules:{salutation:"required",residenceAddress:addressConfig,residenceAddressContd:addressConfig,companyAddressContd:addressConfig,companyAddress:addressConfig,residenceState:"required",residenceCity:"required",residenceZipCode:"required",companyState:"required",companyCity:"required",companyZipCode:"required",companyName:"required",country_code:"required",officePinCode:"required",landlinePhone:{minlength:11},companylandlinePhone:{minlength:11}},groups:{},messages:{residenceAddress:" ",residenceState:" ",residenceCity:" ",companyState:" ",companyCity:" ",residenceZipCode:" ",companyZipCode:" ",country_code:" ",residenceAddressContd:" ",companyAddressContd:" ",companyAddress:" ",officePinCode:{required:" "},landlinePhone:{integer:" ",minlength:" "},companylandlinePhone:{minlength:" "}},errorPlacement:function($error,$element){var elementName=$element.attr("name"),lastInGroup=$.map(this.groups,function(fields){var fieldsArr;return fields.indexOf(elementName)>=0?(fieldsArr=fields.split(" "),fieldsArr[fieldsArr.length-1]):null})[0];lastInGroup?$error.insertAfter($("input[name='"+lastInGroup+"']")):"otpNumber"!=elementName&&$error.insertAfter($element)},success:function(element){"otpNumber"!=$(element).attr("name")&&(validClass="valid")},highlight:function(element,errorClass,validClass){"otpNumber"!=$(element).attr("name")&&$(element).addClass(errorClass).removeClass(validClass)},unhighlight:function(element,errorClass,validClass){"residenceLandmark"==$(element).attr("id")&&0===$(element).val().length||"companyLandmark"==$(element).attr("id")&&0===$(element).val().length||"companyName"==$(element).attr("id")&&0===$(element).val().length||"designation"==$(element).attr("id")&&0===$(element).val().length||"landlinePhone"==$(element).attr("id")&&0===$(element).val().length||"companylandlinePhone"==$(element).attr("id")&&0===$(element).val().length?($(element).next("label").remove(),("landlinePhone"==$(element).attr("id")&&0===$(element).val().length||"companylandlinePhone"==$(element).attr("id")&&0===$(element).val().length)&&$(element).removeClass("error")):"otpNumber"!=$(element).attr("name")&&($(element).removeClass(errorClass).addClass(validClass),$(element).next("label").addClass(validClass))},submitHandler:function(){}})}function initCalulator(){var orientation="horizontal";expenditureSlider("expenditure-others",orientation,"year"),expenditureSlider("expenditure-dining",orientation,"year"),expenditureSlider("expenditure-grocery",orientation,"year"),expenditureSlider("expenditure-International",orientation,"year"),updateBenifits()}function expenditureSlider(element,orientation,type){var initialVal=$("."+element).attr("data-initial-exp");if("month"==type)var Min=sbi.config.cardUpgrade.SliderMinM,Max=sbi.config.cardUpgrade.SliderMaxM,Step=sbi.config.cardUpgrade.SliderStepM,Value=initialVal;if("year"==type)var Min=sbi.config.cardUpgrade.SliderMinY,Max=sbi.config.cardUpgrade.SliderMaxY,Step=sbi.config.cardUpgrade.SliderStepY,Value=initialVal;$("."+element).slider({orientation:orientation,range:"min",min:Min,max:Max,step:Step,value:Value,slide:function(event,ui){var thisObj=$(this);thisObj.find(".ui-slider-handle").html('<div class="tooltip top slider-tip"><div class="tooltip-arrow"></div><div class="tooltip-inner"><em class="WebRupee">Rs.</em><span class="card-upgrade-field"></span>'+ui.value+"</div></div>"),$("html").hasClass("mobile")&&thisObj.parent().find(".slider-value").text("â‚¹"+ui.value)},change:function(event,ui){var thisObj=$(this);updateRewardsValue(thisObj,ui.value),updateBenifits()}}),updateRewardsValue($("."+element),initialVal),$("."+element).find(".ui-slider-handle").html('<div class="tooltip top slider-tip"><div class="tooltip-arrow"></div><div class="tooltip-inner"><em class="WebRupee">Rs.</em><span class="card-upgrade-field"></span>'+$("."+element).slider("option","value")+"</div></div>")}function getIncomeValue(){var income=$(".simplifier.income").slider("option","value");return income}function numberToWord(number,digit){var numStr;return numStr=number.toString(),numStr.substr(0,numStr.length-digit)}function cRewardsTotal(){var total=0;return $("table.benefit-table .c-rp").each(function(){total+=parseInt($(this).text())}),total}function rRewardsTotal(){var total=0;return $("table.benefit-table .r-rp").each(function(){total+=parseInt($(this).text())}),total}function getExpenditure(){var diningVal,othersVal,groceryVal,internationalVal,totalExp;diningVal=$(".expenditure-dining").slider("option","value"),groceryVal=$(".expenditure-grocery").slider("option","value"),othersVal=$(".expenditure-others").slider("option","value"),internationalVal=$(".expenditure-International").slider("option","value"),diningVal="undefined"==typeof diningVal?0:diningVal,groceryVal="undefined"==typeof groceryVal?0:groceryVal,othersVal="undefined"==typeof othersVal?0:othersVal,internationalVal="undefined"==typeof internationalVal?0:internationalVal,totalExp=parseInt(diningVal)+parseInt(groceryVal)+parseInt(othersVal)+parseInt(internationalVal);var obj={};return obj.grocery=groceryVal,obj.dining=diningVal,obj.others=othersVal,obj.internationalVal=internationalVal,obj.totalExp=totalExp,obj}function numberToWord(number,digit){var numStr;return numStr=number.toString(),numStr.substr(0,numStr.length-digit)}function updateBenifits(){var objExp=getExpenditure(),totalExpenditure=objExp.totalExp;totalExpenditure=Number(totalExpenditure),isNaN(totalExpenditure)&&(totalExpenditure=0),totalExpenditure=totalExpenditure.toFixed(2),$(".card-upgrade .total-exp").text(totalExpenditure);var currTotalBenefits=cRewardsTotal(),recoTotalBenefits=rRewardsTotal(),currBenefits=cRewardsTotal()/4,recoBenefits=rRewardsTotal()/4;$(".currentCard  .info-text .total-benefit").text(currTotalBenefits),$(".recommendedCard  .info-text .total-benefit").text(recoTotalBenefits),$(".currentCard  .info-text .card-benefit").text(parseInt(currBenefits)),$(".recommendedCard  .info-text .card-benefit").text(parseInt(recoBenefits)),$(".card-upgrade  .net-benefit").text(parseInt(recoBenefits)-parseInt(currBenefits))}function updateRewardsValue(curr,value){var currObj=curr,parentTr=$(currObj).parents("tr"),firstTd=$(parentTr).find("td").eq(0),cRp=firstTd.attr("data-c-rp"),lastTd=$(parentTr).find("td").eq(2),rRp=lastTd.attr("data-r-rp"),cRpFinal=Number(cRp*value).toFixed(2),rRpFinal=Number(rRp*value).toFixed(2);firstTd.find(".c-rp").text(cRpFinal),lastTd.find(".r-rp").text(rRpFinal)}function submitFormMulticarding(action,isAnchor){try{if(isAnchor){var loaderHtml='<div class="overlay-loader"></div>',$target=$("body");$target.append(loaderHtml)}var token=$("#multicard-synchronizerToken").val();$("#multicardform").append('<form style="position:absolute; left:-1000px;top:-1000px;"action="'+action+'" method="POST" class="multicardform">'),$("#multicardform form").append('<input type="hidden" name="synchronizerToken" id="synchronizerToken" value="'+token+'"/>'),$("#multicardform form").append('<br><input type="submit" id="savebutton" value="" />'),$("#multicardform form").submit()}catch(e){console.log("error while submitting aurum form!")}}function addOverlay(){var loaderHtml='<div class="overlay-loader"></div>',$target=$("body");$target.append(loaderHtml)}function mswOtpSubmitHandler(){var otpFieldValLength;return"block"==$(".lotus-normal-view-otp").css("display")?otpFieldValLength=$(".lotus-normal-view-otp #mswOTP").val().length:"block"==$(".lotus-mobile-container").css("display")?otpFieldValLength=$(".lotus-mobile-container #mswOTP").val().length:"block"==$(".lotus-desktop-container").css("display")&&(otpFieldValLength=$(".lotus-desktop-container #mswOTP").val().length),6>otpFieldValLength?$(".lotus-registration-otp-page").exists()?($(".msw-login-conatiner #mswOTP").addClass("error"),$(".msw-login-conatiner #mswOTP").css("border-bottom","1px solid red"),$(".lotus-registration-otp-page .lotus-otp-error-msg").css("display","block"),$(".lotus-registration-otp-page #msw-otp-resend-not-allowed-msg").css("display","none"),$(".lotus-registration-otp-page #otp-msg-failure").css("display","none"),!1):($(".msw-login-conatiner #mswOTP").css("border","1px solid red"),!1):$(".lotus-registration-otp-page").exists()?($(".lotus-registration-otp-page .lotus-otp-error-msg").css("display","none"),"block"==$(".lotus-normal-view-otp").css("display")?($(".lotus-normal-view-otp #mswOTP").removeClass("error"),$(".lotus-normal-view-otp #mswOTP").css("border-bottom","1px solid #bcbebf")):"block"==$(".lotus-mobile-container").css("display")?($(".lotus-mobile-container #mswOTP").removeClass("error"),$(".lotus-mobile-container #mswOTP").css("border-bottom","1px solid #bcbebf")):"block"==$(".lotus-desktop-container").css("display")&&($(".lotus-desktop-container #mswOTP").removeClass("error"),$(".lotus-desktop-container #mswOTP").css("border-bottom","1px solid #bcbebf")),!0):($(".msw-login-conatiner #mswOTP").css("border","1px solid #bcbebf"),!0)}function resendMswOTP(ctxPath){if($("#msw-otp-form #channel").exists())var resendURL=ctxPath+"/app/msw/resend-otp?hs_token="+$('#msw-otp-form input:hidden[name="hs_token"]').val()+"&channel="+$('#msw-otp-form input:hidden[name="channel"]').val();else var resendURL=ctxPath+"/app/msw/resend-otp?hs_token="+$('#msw-otp-form input:hidden[name="hs_token"]').val();$(".msw-otp-msg").hide(),$("#resend-msw-otp").addClass("inactive-link"),$(".lotus-registration-otp-page").exists()&&("block"==$(".lotus-normal-view-otp").css("display")?$(".lotus-normal-view-otp #resend-msw-otp").addClass("inactive-link"):"block"==$(".lotus-mobile-container").css("display")?$(".lotus-mobile-container #resend-msw-otp").addClass("inactive-link"):"block"==$(".lotus-desktop-container").css("display")&&$(".lotus-mobile-container #resend-msw-otp").addClass("inactive-link")),$.ajax({type:"GET",url:resendURL,beforeSend:function(){if($(".msw-login-conatiner.cards_container").exists()){var mswLoader='<div class="msw-jrny-overlay-loader"><div class="loader"></div></div>';$("body").append(mswLoader)}else{var loaderHtml='<div class="overlay-loader"></div>';$("body").append(loaderHtml)}},complete:function(){$(".msw-login-conatiner.cards_container").exists()?$("body").find("div.msw-jrny-overlay-loader").remove():$("body").find("div.overlay-loader").remove()},success:function(response){if(response){var message=$("#resend-msw-otp-msg-failure").html();"success"===response.split("|")[0]?(setTimeout(function(){$("#resend-msw-otp").removeClass("inactive-link"),$(".lotus-registration-otp-page").exists()&&("block"==$(".lotus-normal-view-otp").css("display")?$(".lotus-normal-view-otp #resend-msw-otp").removeClass("inactive-link"):"block"==$(".lotus-mobile-container").css("display")?$(".lotus-mobile-container #resend-msw-otp").removeClass("inactive-link"):"block"==$(".lotus-desktop-container").css("display")&&$(".lotus-desktop-container #resend-msw-otp").removeClass("inactive-link"))},3e3),$("#resend-msw-otp-msg").show()):"resendNotAllowed"===response.split("|")[0]?(void 0!=response.split("|")[1]&&""!=response.split("|")[1]&&response.split("|")[1]?message=response.split("|")[1]:!0,$("#resend-msw-otp").addClass("inactive-resend-link"),$("#msw-otp-resend-not-allowed-msg").html(message).show(),$(".lotus-registration-otp-page").exists()&&("block"==$(".lotus-normal-view-otp").css("display")?($(".lotus-normal-view-otp #resend-msw-otp").addClass("inactive-resend-link"),$(".lotus-normal-view-otp .inactive-resend-link").attr("disabled","disabled"),$(".lotus-normal-view-otp #msw-otp-resend-not-allowed-msg").html(message).show(),$(".lotus-normal-view-otp #otp-msg-failure").css("display","none")):"block"==$(".lotus-mobile-container").css("display")?($(".lotus-mobile-container #resend-msw-otp").addClass("inactive-resend-link"),$(".lotus-mobile-container .inactive-resend-link").attr("disabled","disabled"),$(".lotus-mobile-container #msw-otp-resend-not-allowed-msg").html(message).show(),$(".lotus-mobile-container #otp-msg-failure").css("display","none")):"block"==$(".lotus-desktop-container").css("display")&&($(".lotus-desktop-container #resend-msw-otp").addClass("inactive-resend-link"),$(".lotus-desktop-container .inactive-resend-link").attr("disabled","disabled"),$(".lotus-desktop-container #msw-otp-resend-not-allowed-msg").html(message).show(),$(".lotus-desktop-container #otp-msg-failure").css("display","none")))):($("#resend-msw-otp").removeClass("inactive-link"),$("#resend-msw-otp-msg-failure").show(),$(".lotus-registration-otp-page").exists()&&("block"==$(".lotus-normal-view-otp").css("display")?($(".lotus-normal-view-otp #resend-msw-otp").removeClass("inactive-link"),$(".lotus-normal-view-otp #resend-msw-otp-msg-failure").show()):"block"==$(".lotus-mobile-container").css("display")?($(".lotus-mobile-container #resend-msw-otp").removeClass("inactive-link"),$(".lotus-mobile-container #resend-msw-otp-msg-failure").show()):"block"==$(".lotus-desktop-container").css("display")&&($(".lotus-desktop-container #resend-msw-otp").removeClass("inactive-link"),$(".lotus-desktop-container #resend-msw-otp-msg-failure").show()))),$(".lotus-registration-otp-page").exists()&&($(".lotus-registration-otp-page .lotus-otp-error-msg").css("display","none"),"block"==$(".lotus-normal-view-otp").css("display")?($(".lotus-normal-view-otp #mswOTP").removeClass("error"),$(".lotus-normal-view-otp #mswOTP").css("border-bottom","1px solid #bcbebf"),$(".lotus-normal-view-otp #otp-msg-failure").hide()):"block"==$(".lotus-mobile-container").css("display")?($(".lotus-mobile-container #mswOTP").removeClass("error"),$(".lotus-mobile-container #mswOTP").css("border-bottom","1px solid #bcbebf"),$(".lotus-mobile-container #otp-msg-failure").hide()):"block"==$(".lotus-desktop-container").css("display")&&($(".lotus-desktop-container #mswOTP").removeClass("error"),$(".lotus-desktop-container #mswOTP").css("border-bottom","1px solid #bcbebf"),$(".lotus-desktop-container #otp-msg-failure").hide()))}else $("#resend-msw-otp").removeClass("inactive-link"),$("#resend-msw-otp-msg-failure").show(),$(".lotus-registration-otp-page").exists()&&($(".lotus-registration-otp-page .lotus-otp-error-msg").css("display","none"),"block"==$(".lotus-normal-view-otp").css("display")?($(".lotus-normal-view-otp #mswOTP").removeClass("error"),$(".lotus-normal-view-otp #mswOTP").css("border-bottom","1px solid #bcbebf"),$(".lotus-normal-view-otp #otp-msg-failure").hide(),$(".lotus-normal-view-otp #resend-msw-otp").removeClass("inactive-link"),$(".lotus-normal-view-otp #resend-msw-otp-msg-failure").show()):"block"==$(".lotus-mobile-container").css("display")?($(".lotus-mobile-container #mswOTP").removeClass("error"),$(".lotus-mobile-container #mswOTP").css("border-bottom","1px solid #bcbebf"),$(".lotus-mobile-container #otp-msg-failure").hide(),$(".lotus-mobile-container #resend-msw-otp").removeClass("inactive-link"),$(".lotus-mobile-container #resend-msw-otp-msg-failure").show()):"block"==$(".lotus-desktop-container").css("display")&&($(".lotus-desktop-container #mswOTP").removeClass("error"),$(".lotus-desktop-container #mswOTP").css("border-bottom","1px solid #bcbebf"),$(".lotus-desktop-container #otp-msg-failure").hide(),$(".lotus-desktop-container #resend-msw-otp").removeClass("inactive-link"),$(".lotus-desktop-container #resend-msw-otp-msg-failure").show()))},error:function(){$("#resend-msw-otp").removeClass("inactive-link"),$("#resend-msw-otp-msg-failure").show(),$(".lotus-registration-otp-page").exists()&&($(".lotus-registration-otp-page .lotus-otp-error-msg").css("display","none"),"block"==$(".lotus-normal-view-otp").css("display")?($(".lotus-normal-view-otp #mswOTP").removeClass("error"),$(".lotus-normal-view-otp #mswOTP").css("border-bottom","1px solid #bcbebf"),$(".lotus-normal-view-otp #otp-msg-failure").hide(),$(".lotus-normal-view-otp #resend-msw-otp").removeClass("inactive-link"),$(".lotus-normal-view-otp #resend-msw-otp-msg-failure").show()):"block"==$(".lotus-mobile-container").css("display")?($(".lotus-mobile-container #mswOTP").removeClass("error"),$(".lotus-mobile-container #mswOTP").css("border-bottom","1px solid #bcbebf"),$(".lotus-mobile-container #otp-msg-failure").hide(),$(".lotus-mobile-container #resend-msw-otp").removeClass("inactive-link"),$(".lotus-mobile-container #resend-msw-otp-msg-failure").show()):"block"==$(".lotus-desktop-container").css("display")&&($(".lotus-desktop-container #mswOTP").removeClass("error"),$(".lotus-desktop-container #mswOTP").css("border-bottom","1px solid #bcbebf"),$(".lotus-desktop-container #otp-msg-failure").hide(),$(".lotus-desktop-container #resend-msw-otp").removeClass("inactive-link"),$(".lotus-desktop-container #resend-msw-otp-msg-failure").show()))}})}function resendPoshvineOTP(ctxPath){if($("#msw-otp-form #channel").exists())var resendURL=ctxPath+"/app/msw/resend-otp-poshvine?hs_token="+$('#msw-otp-form input:hidden[name="hs_token"]').val()+"&channel="+$('#msw-otp-form input:hidden[name="channel"]').val();else var resendURL=ctxPath+"/app/msw/resend-otp-poshvine?hs_token="+$('#msw-otp-form input:hidden[name="hs_token"]').val();$(".msw-otp-msg").hide(),$("#resend-msw-otp").addClass("inactive-link");var journeyName=$('#msw-otp-form input:hidden[name="journeyName"]').val(),userId=$('#msw-otp-form input:hidden[name="userId"]').val();console.log("jounetney name"+journeyName),console.log("userId"+userId),$(".lotus-registration-otp-page").exists()&&("block"==$(".lotus-normal-view-otp").css("display")?$(".lotus-normal-view-otp #resend-msw-otp").addClass("inactive-link"):"block"==$(".lotus-mobile-container").css("display")?$(".lotus-mobile-container #resend-msw-otp").addClass("inactive-link"):"block"==$(".lotus-desktop-container").css("display")&&$(".lotus-mobile-container #resend-msw-otp").addClass("inactive-link")),$.ajax({type:"POST",url:resendURL,data:{journeyName:journeyName,userId:userId},beforeSend:function(){if($(".msw-login-conatiner.cards_container").exists()){var mswLoader='<div class="msw-jrny-overlay-loader"><div class="loader"></div></div>';$("body").append(mswLoader)}else{var loaderHtml='<div class="overlay-loader"></div>';$("body").append(loaderHtml)}},complete:function(){$(".msw-login-conatiner.cards_container").exists()?$("body").find("div.msw-jrny-overlay-loader").remove():$("body").find("div.overlay-loader").remove()},success:function(response){if(response){var message=$("#resend-msw-otp-msg-failure").html();"success"===response.split("|")[0]?(setTimeout(function(){$("#resend-msw-otp").removeClass("inactive-link"),$(".lotus-registration-otp-page").exists()&&("block"==$(".lotus-normal-view-otp").css("display")?$(".lotus-normal-view-otp #resend-msw-otp").removeClass("inactive-link"):"block"==$(".lotus-mobile-container").css("display")?$(".lotus-mobile-container #resend-msw-otp").removeClass("inactive-link"):"block"==$(".lotus-desktop-container").css("display")&&$(".lotus-desktop-container #resend-msw-otp").removeClass("inactive-link"))},3e3),$("#resend-msw-otp-msg").show()):"resendNotAllowed"===response.split("|")[0]?(void 0!=response.split("|")[1]&&""!=response.split("|")[1]&&response.split("|")[1]?message=response.split("|")[1]:!0,$("#resend-msw-otp").addClass("inactive-resend-link"),$("#msw-otp-resend-not-allowed-msg").html(message).show(),$(".lotus-registration-otp-page").exists()&&("block"==$(".lotus-normal-view-otp").css("display")?($(".lotus-normal-view-otp #resend-msw-otp").addClass("inactive-resend-link"),$(".lotus-normal-view-otp .inactive-resend-link").attr("disabled","disabled"),$(".lotus-normal-view-otp #msw-otp-resend-not-allowed-msg").html(message).show(),$(".lotus-normal-view-otp #otp-msg-failure").css("display","none")):"block"==$(".lotus-mobile-container").css("display")?($(".lotus-mobile-container #resend-msw-otp").addClass("inactive-resend-link"),$(".lotus-mobile-container .inactive-resend-link").attr("disabled","disabled"),$(".lotus-mobile-container #msw-otp-resend-not-allowed-msg").html(message).show(),$(".lotus-mobile-container #otp-msg-failure").css("display","none")):"block"==$(".lotus-desktop-container").css("display")&&($(".lotus-desktop-container #resend-msw-otp").addClass("inactive-resend-link"),$(".lotus-desktop-container .inactive-resend-link").attr("disabled","disabled"),$(".lotus-desktop-container #msw-otp-resend-not-allowed-msg").html(message).show(),$(".lotus-desktop-container #otp-msg-failure").css("display","none")))):($("#resend-msw-otp").removeClass("inactive-link"),$("#resend-msw-otp-msg-failure").show(),$(".lotus-registration-otp-page").exists()&&("block"==$(".lotus-normal-view-otp").css("display")?($(".lotus-normal-view-otp #resend-msw-otp").removeClass("inactive-link"),$(".lotus-normal-view-otp #resend-msw-otp-msg-failure").show()):"block"==$(".lotus-mobile-container").css("display")?($(".lotus-mobile-container #resend-msw-otp").removeClass("inactive-link"),$(".lotus-mobile-container #resend-msw-otp-msg-failure").show()):"block"==$(".lotus-desktop-container").css("display")&&($(".lotus-desktop-container #resend-msw-otp").removeClass("inactive-link"),$(".lotus-desktop-container #resend-msw-otp-msg-failure").show()))),$(".lotus-registration-otp-page").exists()&&($(".lotus-registration-otp-page .lotus-otp-error-msg").css("display","none"),"block"==$(".lotus-normal-view-otp").css("display")?($(".lotus-normal-view-otp #mswOTP").removeClass("error"),$(".lotus-normal-view-otp #mswOTP").css("border-bottom","1px solid #bcbebf"),$(".lotus-normal-view-otp #otp-msg-failure").hide()):"block"==$(".lotus-mobile-container").css("display")?($(".lotus-mobile-container #mswOTP").removeClass("error"),$(".lotus-mobile-container #mswOTP").css("border-bottom","1px solid #bcbebf"),$(".lotus-mobile-container #otp-msg-failure").hide()):"block"==$(".lotus-desktop-container").css("display")&&($(".lotus-desktop-container #mswOTP").removeClass("error"),$(".lotus-desktop-container #mswOTP").css("border-bottom","1px solid #bcbebf"),$(".lotus-desktop-container #otp-msg-failure").hide()))}else $("#resend-msw-otp").removeClass("inactive-link"),$("#resend-msw-otp-msg-failure").show(),$(".lotus-registration-otp-page").exists()&&($(".lotus-registration-otp-page .lotus-otp-error-msg").css("display","none"),"block"==$(".lotus-normal-view-otp").css("display")?($(".lotus-normal-view-otp #mswOTP").removeClass("error"),$(".lotus-normal-view-otp #mswOTP").css("border-bottom","1px solid #bcbebf"),$(".lotus-normal-view-otp #otp-msg-failure").hide(),$(".lotus-normal-view-otp #resend-msw-otp").removeClass("inactive-link"),$(".lotus-normal-view-otp #resend-msw-otp-msg-failure").show()):"block"==$(".lotus-mobile-container").css("display")?($(".lotus-mobile-container #mswOTP").removeClass("error"),$(".lotus-mobile-container #mswOTP").css("border-bottom","1px solid #bcbebf"),$(".lotus-mobile-container #otp-msg-failure").hide(),$(".lotus-mobile-container #resend-msw-otp").removeClass("inactive-link"),$(".lotus-mobile-container #resend-msw-otp-msg-failure").show()):"block"==$(".lotus-desktop-container").css("display")&&($(".lotus-desktop-container #mswOTP").removeClass("error"),$(".lotus-desktop-container #mswOTP").css("border-bottom","1px solid #bcbebf"),$(".lotus-desktop-container #otp-msg-failure").hide(),$(".lotus-desktop-container #resend-msw-otp").removeClass("inactive-link"),$(".lotus-desktop-container #resend-msw-otp-msg-failure").show()))},error:function(){$("#resend-msw-otp").removeClass("inactive-link"),$("#resend-msw-otp-msg-failure").show(),$(".lotus-registration-otp-page").exists()&&($(".lotus-registration-otp-page .lotus-otp-error-msg").css("display","none"),"block"==$(".lotus-normal-view-otp").css("display")?($(".lotus-normal-view-otp #mswOTP").removeClass("error"),$(".lotus-normal-view-otp #mswOTP").css("border-bottom","1px solid #bcbebf"),$(".lotus-normal-view-otp #otp-msg-failure").hide(),$(".lotus-normal-view-otp #resend-msw-otp").removeClass("inactive-link"),$(".lotus-normal-view-otp #resend-msw-otp-msg-failure").show()):"block"==$(".lotus-mobile-container").css("display")?($(".lotus-mobile-container #mswOTP").removeClass("error"),$(".lotus-mobile-container #mswOTP").css("border-bottom","1px solid #bcbebf"),$(".lotus-mobile-container #otp-msg-failure").hide(),$(".lotus-mobile-container #resend-msw-otp").removeClass("inactive-link"),$(".lotus-mobile-container #resend-msw-otp-msg-failure").show()):"block"==$(".lotus-desktop-container").css("display")&&($(".lotus-desktop-container #mswOTP").removeClass("error"),$(".lotus-desktop-container #mswOTP").css("border-bottom","1px solid #bcbebf"),$(".lotus-desktop-container #otp-msg-failure").hide(),$(".lotus-desktop-container #resend-msw-otp").removeClass("inactive-link"),$(".lotus-desktop-container #resend-msw-otp-msg-failure").show()))}})}function ResetFileSizeError(){$("#kyc-upload-form :input[type=file]").each(function(){"block"===$(this).closest(".kyc-upload-block").siblings(".kyc-file-error").find(".kyc-fileSize-error").css("display")&&($(this).closest(".kyc-upload-block").removeClass("invalid-kyc-field"),$(this).closest(".kyc-upload-block").siblings(".kyc-field-error").css("display","none"),$(this).closest(".kyc-upload-block").siblings(".kyc-file-error").css("visibility","hidden").find(".kyc-fileSize-error").css("display","none"))})}function isKYCSubmitAllowed(){var $fields=$("#kyc-upload-form :input[type=file]"),$emptyFields=$fields.filter(function(){return""===$.trim(this.value)});return!$emptyFields.length&&$(".invalid-kyc-field").length<=0}function kycSubmitHandler(){var maxTimeOut=$("#kyc-upload-form input:hidden[name='kyc_upload_max_timeout']").prop("value"),loaderHtml='<div class="overlay-loader"></div>',$target=$("body");return isKYCSubmitAllowed()?($target.append(loaderHtml),keepUserActive(maxTimeOut),!0):(event.preventDefault(),!1)}function byteConversion(amount,type){return"KB"===type.toUpperCase()?1024*amount:"MB"===type.toUpperCase()?1024*amount*1024:void 0}function fileSizeLimitation(){var fileSize=parseInt($("#kycFileSizeInfo").text().trim().match(/-?\d+\.?\d*/).toString()),fileSizeUnit=$("#kycFileSizeInfo").text().trim().match("[a-zA-Z]*$").toString();return byteConversion(fileSize,fileSizeUnit)}function AcceptableFileUpload(){var totalsize=0;return $("#kyc-upload-form :input[type=file]").each(function(){$(this).val().length>0&&-1!=$.inArray($(this).val().split(".").pop().toLowerCase(),kycAcceptableFileFormats)&&(totalsize+=$(this)[0].files[0].size)}),totalsize>fileSizeLimitation()?!1:!0}function ResetWebformFileSizeError(){$(".webform-file-container .file-upload :input[type=file]").each(function(){"block"===$(this).closest(".file-upload").next(".webform-file-error").find(".webform-fileSize-error").css("display")&&($(this).closest(".file-upload").addClass("file-size-error-webform-remove"),$(this).closest(".file-upload").removeClass("upload-error-webform"),$(this).closest(".file-upload").next(".webform-file-error").css("visibility","hidden").find(".webform-fileSize-error").css("display","none").siblings(".webform-format-error").css("display","none"),$(this).closest(".file-upload").removeClass("file-size-error-webform"))})}function ResetWebformEscalateFileSizeError(){$(".webform-file-container .upload-block :input[type=file]").each(function(){"block"===$(this).closest(".upload-block").next(".webform-file-error").find(".webform-fileSize-error").css("display")&&($(this).closest(".upload-block").addClass("file-size-error-webform-remove"),$(this).closest(".upload-block").removeClass("upload-error-webform"),$(this).closest(".upload-block").next(".webform-file-error").css("visibility","hidden").find(".webform-fileSize-error").css("display","none").siblings(".webform-format-error").css("display","none"),$(this).closest(".upload-block").removeClass("file-size-error-webform"))})}function isFileUploadAcceptable($ele,maxfileSize){var totalsize=0,isUploadAllowed=!0;return $ele.find(":input[type=file]").each(function(){$(this).val().length>0&&-1!=$.inArray($(this).val().split(".").pop().toLowerCase(),webformAcceptableFileFormats)&&(totalsize+=$(this)[0].files[0].size)}),totalsize>maxfileSize&&(isUploadAllowed=!1),isUploadAllowed}function webformSubmitHandler(){var isSubmitAllowed=!0;if($("#webform-dynmic-formfield").is(":empty"))$(".webform-reply-box").is(":visible")&&$("#interactionText").val().trim().length<=0?($(".webform-reply-box #interactionText").addClass("upload-error-webform"),isSubmitAllowed=!1):($(".webform-reply-box #interactionText").removeClass("upload-error-webform"),isSubmitAllowed=!0);else{var noFieldCount=0,dynamicFieldLength=$(".webform-dynamic-fieldInput").length;$(".webform-reply-fieldBox").each(function(){"Y"==$(this).find(".webform-dynamic-fieldInput").attr("ismandate")?($(".webform-reply-box #interactionText").removeClass("upload-error-webform"),""==$(this).find(".webform-dynamic-fieldInput").val()?isSubmitAllowed=!1:isDynamicFieldEmpty=!1):noFieldCount++}),noFieldCount==dynamicFieldLength&&($("#webform-write-section").find(".webform-reply-box").find("#interactionText").attr("placeholder","Please explain your query/complaint in detail"),$(".webform-reply-box").is(":visible")&&$("#interactionText").val().trim().length<=0?($(".webform-reply-box #interactionText").addClass("upload-error-webform"),isSubmitAllowed=!1):($(".webform-reply-box #interactionText").removeClass("upload-error-webform"),isSubmitAllowed=!0))}$(".reply-interaction-block .reply-block").is(":visible")&&$("#interactionText").val().trim().length<=0?(isSubmitAllowed=!1,$(".reply-interaction-block .reply-block").addClass("upload-error-webform")):$(".reply-interaction-block .reply-block").removeClass("upload-error-webform"),$("#webform-upload-form :input[type=file]").each(function(){$(this).val().length<=0?($(this).closest(".webform-upload-block").find(".webform-attach-btn").css("display","block"),$(this).remove()):-1==$.inArray($(this).val().split(".").pop().toLowerCase(),webformAcceptableFileFormats)&&(isSubmitAllowed=!1)
}),($(".webform-file-container").find(".upload-error-webform").hasClass("upload-error-webform")||$(".webform-file-container").find(".file-size-error-webform").hasClass("file-size-error-webform")||$("#webform-dynmic-formfield .webform-reply-fieldBox").find("span").hasClass("errorTxt")||""==$("#level1").val()||""==$("#level2").val())&&(isSubmitAllowed=!1);var loaderHtml='<div class="overlay-loader"></div>',$target=$("body");if(isSubmitAllowed?$target.append(loaderHtml):!0,isSubmitAllowed)if("compose"==$("#webform-upload-form input[name=messageFlag]").val())if($(".webform-upload-form").find(".webform-file-container").find(".file-upload").exists())$(".webform-upload-form").find(".webform-file-container").find(".file-upload").find(".webform-file-name").each(function(){if(""==$(this).val()){$(".webform-interaction-container").find("#webform-upload-form").removeAttr("enctype");var syncToken=$('input:hidden[name="synchronizerToken"]').val(),authToken=$('input:hidden[name="auth_token"]').val(),ucToken=$('input:hidden[name="uc_token"]').val();$("#webform-upload-form").attr("action","/creditcards/app/webform/submit-form?status_code=200&synchronizerToken="+syncToken+"&auth_token="+authToken+"&uc_token="+ucToken)}else""!=$(this).val()&&($(".webform-interaction-container").find("#webform-upload-form").attr("enctype","multipart/form-data"),$("#webform-upload-form").attr("action","/safe/uploadfile.do"))});else{$(".webform-interaction-container").find("#webform-upload-form").removeAttr("enctype");var syncToken=$('input:hidden[name="synchronizerToken"]').val(),authToken=$('input:hidden[name="auth_token"]').val(),ucToken=$('input:hidden[name="uc_token"]').val();$("#webform-upload-form").attr("action","/creditcards/app/webform/submit-form?status_code=200&synchronizerToken="+syncToken+"&auth_token="+authToken+"&uc_token="+ucToken)}else if("reply"==$("#webform-upload-form input[name=messageFlag]").val())if($(".reply-interaction-block").find(".webform-file-container").find(".file-upload").exists())$(".reply-interaction-block").find(".webform-file-container").find(".file-upload").find(".webform-file-name").each(function(){if(""!=$(this).val())$(".webform-interaction-reply").find("#webform-upload-form").attr("enctype","multipart/form-data"),$(".reply-interaction-block").attr("action","/safe/uploadfile.do");else if(""==$(this).val()){$(".webform-interaction-reply").find("#webform-upload-form").removeAttr("enctype");var syncToken=$('input:hidden[name="synchronizerToken"]').val(),authToken=$('input:hidden[name="auth_token"]').val(),ucToken=$('input:hidden[name="uc_token"]').val();$(".reply-interaction-block").attr("action","/creditcards/app/webform/submit-form?status_code=200&synchronizerToken="+syncToken+"&auth_token="+authToken+"&uc_token="+ucToken)}});else{$(".webform-interaction-reply").find("#webform-upload-form").removeAttr("enctype");var syncToken=$('input:hidden[name="synchronizerToken"]').val(),authToken=$('input:hidden[name="auth_token"]').val(),ucToken=$('input:hidden[name="uc_token"]').val();$(".reply-interaction-block").attr("action","/creditcards/app/webform/submit-form?status_code=200&synchronizerToken="+syncToken+"&auth_token="+authToken+"&uc_token="+ucToken)}return isSubmitAllowed}function webformEscalateHandler(){var isSubmitAllowed=!0;$(".webform-escalate-form .reply-block").is(":visible")&&$("#escalationText").val().trim().length<=0?(isSubmitAllowed=!1,$(".webform-escalate-form .reply-block").addClass("upload-error-webform")):$(".webform-escalate-form .reply-block").removeClass("upload-error-webform"),$("#webform-escalate-form :input[type=file]").each(function(){$(this).val().length<=0?($(this).closest(".webform-upload-block").find(".webform-attach-btn").css("display","block"),$(this).remove()):$("#webform-escalate-form").find(".upload-block").hasClass("invalid-input-field")&&(isSubmitAllowed=!1)}),($(".webform-file-container").find(".upload-error-webform").hasClass("upload-error-webform")||$(".webform-file-container").find(".file-size-error-webform").hasClass("file-size-error-webform"))&&(isSubmitAllowed=!1);var loaderHtml='<div class="overlay-loader"></div>',$target=$("body");if(isSubmitAllowed?$target.append(loaderHtml):!0,isSubmitAllowed)if($(".webform-escalate-form").find(".webform-file-container").find(".upload-block").exists())$(".webform-escalate-form").find(".webform-file-container").find(".upload-block").find(".webform-file-name").each(function(){if(""!=$(this).val())$(".webform-escalate-container").find("#webform-escalate-form").attr("enctype","multipart/form-data"),$(".webform-escalate-form").attr("action","/safe/uploadfile.do");else if(""==$(this).val()){$("#webform-escalate-form").removeAttr("enctype");var syncToken=$(".webform-escalate-form").find('input:hidden[name="synchronizerToken"]').val(),authToken=$(".webform-escalate-form").find('input:hidden[name="auth_token"]').val(),ucToken=$(".webform-escalate-form").find('input:hidden[name="uc_token"]').val();$(".webform-escalate-form").attr("action","/creditcards/app/webform/submit-form?status_code=200&synchronizerToken="+syncToken+"&auth_token="+authToken+"&uc_token="+ucToken)}});else{$("#webform-escalate-form").removeAttr("enctype");var syncToken=$(".webform-escalate-form").find('input:hidden[name="synchronizerToken"]').val(),authToken=$(".webform-escalate-form").find('input:hidden[name="auth_token"]').val(),ucToken=$(".webform-escalate-form").find('input:hidden[name="uc_token"]').val();$(".webform-escalate-form").attr("action","/creditcards/app/webform/submit-form?status_code=200&synchronizerToken="+syncToken+"&auth_token="+authToken+"&uc_token="+ucToken)}return isSubmitAllowed}function adhocCliSubmitHandler(){var isSubmitAllowed=!0;$("#cli-upload-form :input[type=file]").each(function(){$(this).val().length<=0||-1==$.inArray($(this).val().split(".").pop().toLowerCase(),webformAcceptableFileFormats)&&(isSubmitAllowed=!1)}),null==$("#cli-level2-dropbox").val()?($(".cli-field-error").css("display","inline-block"),$(".cli-l2-dropbox .fancy-select").css("border","1px solid red")):$(".cli-l2-dropbox .fancy-select").css("border","1px solid #ccc"),validate()?($(".validation-message1").hide(),$("#cli-upload-button").hasClass("v-error")?$("#cli-removeFile1Error").css("display","inline-block"):$("#cli-upload-addmore2").hasClass("v-error")?$("#cli-removeFile2Error").css("display","inline-block"):$("#cli-upload-addmore3").hasClass("v-error")?$("#cli-removeFile3Error").css("display","inline-block"):$(".cli-field-error").css("display","none")):($(".cli-field-error").css("display","inline-block"),$("#cli-upload-button").closest(".main-upload-button").addClass("v-error"),$("#cli-upload-addmore2").addClass("v-error"),$("#cli-upload-addmore3").addClass("v-error"),$(".validation-message1").show(),$(".validation-message").hide(),isSubmitAllowed=!1),(null==$("#cli-level2-dropbox").val()||$(".main-upload-doc").find(".main-upload-button").hasClass("v-error")||""==$("#salary").val()||""==$("#employment").val())&&(isSubmitAllowed=!1);var loaderHtml='<div class="overlay-loader"></div>',$target=$("body");return isSubmitAllowed?$target.append(loaderHtml):!0,isSubmitAllowed}function validate(){var a=!1,inp=document.getElementById("file1"),inp1=document.getElementById("file2"),inp2=document.getElementById("file3");return a=null!=inp&&0!=inp.files.length||null!=inp1&&0!=inp1.files.length||null!=inp2&&0!=inp2.files.length?!0:!1}function keepUserActive(logoutTime){$(document).idleTimeout({inactivity:parseInt(logoutTime),noconfirm:45e3,sessionAlive:3e4,dialogClass:"session-timeOut",dialogTitle:"Session Expiration",dialogText:"Because you have been inactive, your session is about to expire.",dialogDisplayLimit:45e3})}function AddOverlayLoader(){var loaderHtml='<div class="overlay-loader"></div>',$target=$("body");$target.append(loaderHtml)}function submitCampaignOTP(){return $("#campaign-otp").val()&&0!==$("#campaign-otp").val().length?(AddOverlayLoader(),!0):(event.preventDefault(),$("#campaign-otp").addClass("error"),!1)}function resendCampaignOTP(resendURL){"Encash"==$("#featureNameForEncash").val()||"Encash Inline"==$("#featureNameForEncash").val()?dncOTPGenEventEncash("c2b","C2B Landing Page","","Y"):"encash"==$("#featureNameForEncash").val()&&dncOTPGenEventEncash("c2s","C2S OTP Page","","Y"),$(".campaign-otp-msg").hide(),$("#resend-campaign-otp").addClass("inactive-link"),$.ajax({type:"GET",url:resendURL,success:function(response){if(response){var message=$("#resend-otp-msg-failure").html();"success"===response.split("|")[0]?($("#resend-campaign-otp").removeClass("inactive-link"),$("#resend-otp-msg").show()):"resendNotAllowed"===response.split("|")[0]?(void 0!=response.split("|")[1]&&""!=response.split("|")[1]&&response.split("|")[1]?message=response.split("|")[1]:!0,$("#resend-campaign-otp").addClass("inactive-link"),$("#campaign-otp-resend-not-allowed").html(message).show()):($("#resend-campaign-otp").removeClass("inactive-link"),$("#resend-otp-msg-failure").show())}else $("#resend-campaign-otp").removeClass("inactive-link"),$("#resend-otp-msg-failure").show();callC2bOtpResend(response)},error:function(){$("#resend-campaign-otp").removeClass("inactive-link"),$("#resend-otp-msg-failure").show()}})}function keepC2BSessionActive(){if($(".campaign-page").exists()&&!$("#campaign-loggedout").exists()){var logoutURL=$(".campaign-page").data("url")+"/app/campaign/session-timeout",sessionAliveURL=$(".campaign-page").data("url")+"/app/user/keepalive",sessionLogoutTime=parseInt($(".campaign-page").data("timer"));clearInterval(keppSessionActive),keppSessionActive=null,keppSessionActive=setInterval(function(){$.get(sessionAliveURL)},3e4),console.log("campaign user session alive"),clearTimeout(campaignLogOutTimer),campaignLogOutTimer=null,campaignLogOutTimer=setTimeout(function(){clearInterval(keppSessionActive),keppSessionActive=null,submitForm(logoutURL,!0)},sessionLogoutTime)}}function submitForm(action,isAnchor){sessionStorage.removeItem("SessionUser"),sessionStorage.removeItem("SessionUserError");try{if(isAnchor){var loaderHtml='<div class="overlay-loader"></div>',$target=$("body");$target.append(loaderHtml),$("#dynaform").append('<form style="position:absolute; left:-1000px;top:-1000px;"action="'+action+'" method="POST" class="dynaForm">'),$("#dynaform form").append('<input type="hidden" name="synchronizerToken" id="synchronizerToken" value="'+token+'"/>'),$("#dynaform form").append('<br><input type="submit" id="savebutton" value="" />'),$("#dynaform form").submit()}}catch(e){}}function logoutOnBackOrRefresh(){logoutOnRefresh()}function deleteCookie(name){var d=new Date;d.setDate(d.getDate()-1),d=d.toGMTString(),document.cookie=name+"=;expires="+d+"; path=/"}function logoutUser(){if(deleteCookie("jsession-id"),sessionStorage.removeItem("jwt"),$('form[name="logoutForm"]').exists()){var sessionData=[];sessionData.push(sessionStorage.getItem("AANCtaTokenList"));var JsonSessionData=JSON.parse("["+sessionData+"]");$.ajax({url:"/creditcards/app/alertsnotifications/updateActionedAlerts",type:"POST",data:{toBeUpdatedAlerts:JSON.stringify(JsonSessionData)}}),$('form[name="logoutForm"]').submit()}}function blockExecution(e){return e.preventDefault(),logoutUser(),!1}function logoutOnBack(){window.history&&window.history.pushState&&(window.history.pushState("forward",null,""),$(window).on("popstate",function(e){blockExecution(e)}))}function logoutOnRefresh(){function disableMouseRefresh(e){blockExecution(e)}function disableKeyboardRefresh(e){var isCtrl,forbiddenKeysCodes=[82,116],keyCode=e.keyCode?e.keyCode:e.which;if(isCtrl=window.event?window.event.ctrlKey?!0:!1:e.ctrlKey?!0:!1,116==keyCode&&blockExecution(e),isCtrl)for(i=0;i<forbiddenKeysCodes.length;i++)forbiddenKeysCodes[i]==keyCode&&blockExecution(e)}$(document).bind("keydown",disableKeyboardRefresh),$(document).bind("contextmenu",disableMouseRefresh)}function getParameterByName(name){name=name.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var regex=new RegExp("[\\?&]"+name+"=([^&#]*)"),results=regex.exec(location.search);return null==results?"":decodeURIComponent(results[1].replace(/\+/g," "))}function submitFraudOTP(){return!$("#fraud-otp").val()||$("#fraud-otp").val().length<=5?(event.preventDefault(),$("#fraud-otp").addClass("error"),!1):(AddOverlayLoader(),setAnalyticsVerifyFraud(),!0)}function setAnalyticsVerifyFraud(){s.linkTrackVars="events,prop4,prop6,eVar9",s.prop4="sbi-card:postlogin: validate-authotp-verified",s.prop6="verify",s.prop14="postlogin: validate-authotp-verified",s.tl(this,"o","sbi:"+s.prop4+":"+s.prop6,null)}function resendFraudOTP(resendURL){$(".fraud-otp-msg").hide(),$.ajax({type:"GET",url:resendURL,beforeSend:function(){var loaderHtml='<div class="overlay-loader"></div>';$("body").append(loaderHtml)},complete:function(){$("body").find("div.overlay-loader").remove()},success:function(response){if(response){{response.split("++")[1]}response=response.split("++")[0];var message=$("#resend-otp-msg-failure").html();"success"===response.split("|")[0]?($("#resend-fraud-otp").removeClass("inactive-link"),$("#resend-otp-msg").show(),$("#otp-msg-failure").hide(),sessionStorage.setItem("tempOtpkey",response.otpKey)):"resendNotAllowed"===response.split("|")[0]?(void 0!=response.split("|")[1]&&""!=response.split("|")[1]&&response.split("|")[1]?message=response.split("|")[1]:!0,$("#resend-fraud-otp").addClass("inactive-link"),$("#fraud-otp-resend-not-allowed").html(message).show()):($("#resend-fraud-otp").removeClass("inactive-link"),$("#resend-otp-msg-failure").show())}else $("#resend-fraud-otp").removeClass("inactive-link"),$("#resend-otp-msg-failure").show()},error:function(){$("#resend-fraud-otp").removeClass("inactive-link"),$("#resend-otp-msg-failure").show()}})}function availOtherPaymentOpt(url){var syncToken=$("#synchronizerTokenMicroDashboard").val();$.ajax({type:"GET",url:url,dataType:"json",headers:{synchronizerToken:syncToken},beforeSend:function(){var loaderHtml='<div class="overlay-loader"></div>';$("body").append(loaderHtml)},complete:function(){$("body").find("div.overlay-loader").remove()},success:function(response){if(response)if("true"==response.success||1==response.success){if(response.data.toolDetailsList){for(i=0;i<response.data.toolDetailsList.length;i++)"Reinstatement"==response.data.toolDetailsList[i].toolName&&(reinstatementEligibility=response.data.toolDetailsList[i].toolEligibleFlag,"Y"==reinstatementEligibility?$("#micro-other-reisnt-block").css("display","block"):$("#micro-other-reisnt-block").css("display","none")),"Balance Conversion"==response.data.toolDetailsList[i].toolName&&(balconEligibility=response.data.toolDetailsList[i].toolEligibleFlag,"Y"==balconEligibility?$("#micro-other-balcon-block").css("display","block"):$("#micro-other-balcon-block").css("display","none")),"Restructure"==response.data.toolDetailsList[i].toolName&&(console.log("enter  in restructure block"),restructEligibility=response.data.toolDetailsList[i].toolEligibleFlag,"Y"==restructEligibility?(console.log("enter here"),$("#micro-other-restruct-block").find("#micro-restruct-acc").find(".input-field a").attr("onclick","restrucDueSettlement('Restructure')"),$("#micro-other-restruct-block").css("display","block")):$("#micro-other-restruct-block").css("display","none")),"RBI Restructure"==response.data.toolDetailsList[i].toolName&&(rbiRestructEligibility=response.data.toolDetailsList[i].toolEligibleFlag,"Y"==rbiRestructEligibility?($("#micro-other-restruct-block").css("display","block"),$("#micro-restruct-acc h5").html("Restructuring Plan"),$("#micro-restruct-acc p").html("Build your credit score by clearing your Credit Card outstanding in EMIs at low interest rate."),$("#micro-other-restruct-block").find("#micro-restruct-acc").find(".input-field a").attr("onclick","restrucDueSettlement('RBI Restructure')"),$("#micro-restruct-acc .input-field a").html("Explore Restructure")):$("#micro-other-restruct-block").css("display","none")),"Settlement"==response.data.toolDetailsList[i].toolName&&(settlementEligibility=response.data.toolDetailsList[i].toolEligibleFlag,"Y"==settlementEligibility?($("#micro-other-settlement-block").css("display","block"),$("#micro-other-settlement-block").find("#micro-settle-acc").find(".input-field a").attr("onclick","callDigitalSettlement('Settlement')"),$("#micro-other-settlement-block").find("#micro-settle-acc").find(".input-field a").html("Explore Offer")):"B"==settlementEligibility?($("#micro-other-settlement-block").css("display","block"),$("#micro-other-settlement-block").find("#micro-settle-acc").find(".input-field a").attr("onclick","callCheckOtherPaySatus()"),$("#micro-other-settlement-block").find("#micro-settle-acc").find(".input-field a").html("Check Status")):$("#micro-other-settlement-block").css("display","none"));("Y"==rbiRestructEligibility||"N"==restructEligibility)&&($("#micro-other-restruct-block").find("#micro-restruct-acc").find(".input-field a").attr("onclick","restrucDueSettlement('RBI Restructure')"),$("#micro-other-restruct-block").css("display","block")),"Y"==rbiRestructEligibility&&"Y"==restructEligibility?($("#micro-other-restruct-block").css("display","block"),$("#micro-restruct-acc h5").html("Restructuring Plan"),$("#micro-restruct-acc p").html("As per RBI Policy, this is a one-time opportunity to settle your dues at low rate of interest."),$("#micro-other-restruct-block").find("#micro-restruct-acc").find(".input-field a").attr("onclick","restrucDueSettlement('RBI Restructure')"),$("#micro-restruct-acc .input-field a").html("Explore Restructure")):$("#micro-other-restruct-block").css("display","block"),("Y"==rbiRestructEligibility||"N"==restructEligibility)&&($("#micro-other-restruct-block").find("#micro-restruct-acc").find(".input-field a").attr("onclick","restrucDueSettlement('RBI Restructure')"),$("#micro-other-restruct-block").css("display","block")),"N"==rbiRestructEligibility&&"N"==restructEligibility&&$("#micro-other-restruct-block").css("display","none"),"Y"==settlementEligibility||"Y"==restructEligibility||"Y"==rbiRestructEligibility||"B"==settlementEligibility?$("#micro-paypart-block").css("display","block"):$("#micro-paypart-block").css("display","none"),"Y"==reinstatementEligibility||"Y"==balconEligibility?$("#micro-payfull-complete-block").css("display","block"):$("#micro-payfull-complete-block").css("display","none"),"N"==reinstatementEligibility&&"N"==balconEligibility&&"N"==restructEligibility&&"N"==settlementEligibility&&"N"==rbiRestructEligibility?($("#micro-colap-other-pay-body #no-offer-avl-error").css("display","block"),$("#other-payment-opt-section .tab2-vertical-line").css("height","85%")):$("#micro-colap-other-pay-body #no-offer-avl-error").css("display","none"),$("#micro-collap-ver-acc-body").css("display","none"),$("#micro-colap-other-pay-body").css("display","block"),$("#micro-colap-other-pay").removeClass("grey"),$("#micro-collap-ver-acc").addClass("grey"),$(".pay-footer #micro-pay-aero").removeClass("pay-aero-rotate"),$(".pay-footer #micro-pay-text").removeClass("hide-pay-text"),$(".pay-footer #footer-pay").removeClass("pay-data-show"),$(window).scrollTop($(".microportal-collapsible .other-opt").offset().top),$("#verify-acc-line-divide").css("display","block"),$("#other-payment-opt-section").css("display","block"),calHeightMicro(),highlightOtherPayTab()}}else("false"==response.success||0==response.success)&&($(".balcon-error-block").html(response.message),$(".top-error.balcon-error-block").show());else $(".balcon-error-block").html(response.message),$(".top-error.balcon-error-block").show();calHeightMicro()},error:function(){$(".balcon-error-block").html(response.message),$(".top-error.balcon-error-block").show()}})}function availOtherPaymentOptRev(){var url="/creditcards/micro/cleardues/get-hardship-tool-eligibility",syncToken=$("#synchronizerTokenMicroDashboard").val();$.ajax({type:"GET",url:url,dataType:"json",headers:{synchronizerToken:syncToken},beforeSend:function(){var loaderHtml='<div class="overlay-loader"></div>';$("body").append(loaderHtml)},complete:function(){$("body").find("div.overlay-loader").remove()},success:function(response){if(response)if("true"==response.success||1==response.success){if(response.data.toolDetailsList){for(i=0;i<response.data.toolDetailsList.length;i++)"Reinstatement"==response.data.toolDetailsList[i].toolName&&(reinstatementEligibility=response.data.toolDetailsList[i].toolEligibleFlag,"Y"==reinstatementEligibility?$("#micro-other-reisnt-block").css("display","block"):$("#micro-other-reisnt-block").css("display","none")),"Balance Conversion"==response.data.toolDetailsList[i].toolName&&(balconEligibility=response.data.toolDetailsList[i].toolEligibleFlag,"Y"==balconEligibility?$("#micro-other-balcon-block").css("display","block"):$("#micro-other-balcon-block").css("display","none")),"Restructure"==response.data.toolDetailsList[i].toolName&&(console.log("enter  in restructure block"),restructEligibility=response.data.toolDetailsList[i].toolEligibleFlag,"Y"==restructEligibility?(console.log("enter here"),$("#micro-other-restruct-block").find("#micro-restruct-acc").find(".input-field a").attr("onclick","restrucDueSettlement('Restructure')"),$("#micro-other-restruct-block").css("display","block")):$("#micro-other-restruct-block").css("display","none")),"RBI Restructure"==response.data.toolDetailsList[i].toolName&&(rbiRestructEligibility=response.data.toolDetailsList[i].toolEligibleFlag,"Y"==rbiRestructEligibility?($("#micro-other-restruct-block").css("display","block"),$("#micro-restruct-acc h5").html("Restructuring Plan"),$("#micro-restruct-acc p").html("As per RBI Policy, this is a one-time opportunity to settle your dues at low rate of interest."),$("#micro-other-restruct-block").find("#micro-restruct-acc").find(".input-field a").attr("onclick","restrucDueSettlement('RBI Restructure')"),$("#micro-restruct-acc .input-field a").html("Explore Restructure")):$("#micro-other-restruct-block").css("display","none")),"Settlement"==response.data.toolDetailsList[i].toolName&&(settlementEligibility=response.data.toolDetailsList[i].toolEligibleFlag,"Y"==settlementEligibility?($("#micro-other-settlement-block").css("display","block"),$("#micro-other-settlement-block").find("#micro-settle-acc").find(".input-field a").attr("onclick","callDigitalSettlement('Settlement')"),$("#micro-other-settlement-block").find("#micro-settle-acc").find(".input-field a").html("Explore Offer")):"B"==settlementEligibility?($("#micro-other-settlement-block").css("display","block"),$("#micro-other-settlement-block").find("#micro-settle-acc").find(".input-field a").attr("onclick","callCheckOtherPaySatus()"),$("#micro-other-settlement-block").find("#micro-settle-acc").find(".input-field a").html("Check Status")):$("#micro-other-settlement-block").css("display","none"));("Y"==rbiRestructEligibility||"N"==restructEligibility)&&($("#micro-other-restruct-block").find("#micro-restruct-acc").find(".input-field a").attr("onclick","restrucDueSettlement('RBI Restructure')"),$("#micro-other-restruct-block").css("display","block")),"Y"==rbiRestructEligibility&&"Y"==restructEligibility?($("#micro-other-restruct-block").css("display","block"),$("#micro-restruct-acc h5").html("Restructuring Plan"),$("#micro-restruct-acc p").html("As per RBI Policy, this is a one-time opportunity to settle your dues at low rate of interest."),$("#micro-other-restruct-block").find("#micro-restruct-acc").find(".input-field a").attr("onclick","restrucDueSettlement('RBI Restructure')"),$("#micro-restruct-acc .input-field a").html("Explore Restructure")):$("#micro-other-restruct-block").css("display","block"),("Y"==rbiRestructEligibility||"N"==restructEligibility)&&($("#micro-other-restruct-block").find("#micro-restruct-acc").find(".input-field a").attr("onclick","restrucDueSettlement('RBI Restructure')"),$("#micro-other-restruct-block").css("display","block")),"N"==rbiRestructEligibility&&"N"==restructEligibility&&$("#micro-other-restruct-block").css("display","none"),"Y"==settlementEligibility||"Y"==restructEligibility||"Y"==rbiRestructEligibility||"B"==settlementEligibility?$("#micro-paypart-block").css("display","block"):$("#micro-paypart-block").css("display","none"),"Y"==reinstatementEligibility||"Y"==balconEligibility?$("#micro-payfull-complete-block").css("display","block"):$("#micro-payfull-complete-block").css("display","none"),"N"==reinstatementEligibility&&"N"==balconEligibility&&"N"==restructEligibility&&"N"==settlementEligibility&&"N"==rbiRestructEligibility?($("#micro-colap-other-pay-body #no-offer-avl-error").css("display","block"),$("#other-payment-opt-section .tab2-vertical-line").css("height","85%")):$("#micro-colap-other-pay-body #no-offer-avl-error").css("display","none"),$("#micro-collap-ver-acc-body").css("display","none"),$("#micro-colap-other-pay-body").css("display","block"),$("#micro-colap-other-pay").removeClass("grey"),$("#micro-collap-ver-acc").addClass("grey"),$(".pay-footer #micro-pay-aero").removeClass("pay-aero-rotate"),$(".pay-footer #micro-pay-text").removeClass("hide-pay-text"),$(".pay-footer #footer-pay").removeClass("pay-data-show"),$(window).scrollTop($(".microportal-collapsible .other-opt").offset().top),$("#verify-acc-line-divide").css("display","block"),$("#other-payment-opt-section").css("display","block"),calHeightMicro(),highlightOtherPayTab()}}else("false"==response.success||0==response.success)&&($(".balcon-error-block").html(response.message),$(".top-error.balcon-error-block").show());else $(".balcon-error-block").html(response.message),$(".top-error.balcon-error-block").show();calHeightMicro()},error:function(){$(".balcon-error-block").html(response.message),$(".top-error.balcon-error-block").show()}})}function availMicroBalcon(hardshipToolname){var balConEnablement=$("#micro-balcon-journey-enable").val();if("balcon"==hardshipToolname&&$("#micro-toolname").val("Balance Conversion"),1==balConEnablement||"true"==balConEnablement){var loaderHtml='<div class="overlay-loader"></div>';$("body").append(loaderHtml),$("#micro-portal-dashboard-form").submit();var balconFlag="true";"true"===balconFlag&&($("#micro-other-balcon-block .error-wrap").css("display","block"),$(".top-error.optinbalconblock").show())}else{var href="/creditcards/micro/user/paymentConsent",productType=$(this).attr("data-name");makeAjaxWithLoader({url:href,type:"POST",data:{productType:productType},overlayTarget:$(".overlay-opened"),success:function(data){1==data.success&&($("#micropopup .alert-msz-text").html(data.message),$("#micropopup .modal-dialog").addClass("open"),$(".menu-overlay").addClass("open"),setTimeout(function(){$("#micropopup .modal-dialog").removeClass("open"),$(".menu-overlay").removeClass("open")},5e3))},error:function(){removeAjaxLoader()}})}}function highlightOtherPayTab(){$(".tab1-verify-acntInfo").addClass("active-clear-dues-tab"),$(".offer-vertical-line").show(),$(".tab2-vertical-line").show(),$(".tab1-vertical-line").css({"border-color":"#0095d9",height:"92%"}),$("#bookOfferHeader .tab2-other-payopt").css({"background-color":"#ffffff",border:"2px solid #0095d9"})}function highlightBookOfferSection(){$(".tab1-verify-acntInfo").addClass("active-clear-dues-tab"),$(".tab2-other-payopt").addClass("active-clear-dues-tab"),$(".tab3-success-offer").addClass("active-clear-dues-tab"),$(".offer-vertical-line").css({"border-color":"#0095d9",height:"92%"}),$(".tab1-vertical-line").css({"border-color":"#0095d9",height:"101%"}),$("#bookOfferHeader .tab2-other-payopt").css({"background-color":"",border:""}),$("#sucsessBalConHeader .tab3-success-offer").css({"background-color":"#0095d9",border:"2px solid #0095d9"})}function calHeightMicro(){var contentHeight=$(".microportal-content-wrapper").outerHeight(),navHeight=$(".microportal-nav-menu").outerHeight(),sideBardHeight=$(".microportal-side-bar-menu").outerHeight(),heightAdjusted=0;heightAdjusted=contentHeight>=sideBardHeight?contentHeight:sideBardHeight;var totalHeight=heightAdjusted+navHeight;$(".microportal-main").css("height",totalHeight)}function callBalConConfirmOffer(tenure,rateOfInterest){var syncToken=$("#synchronizerTokenMicroDashboard").val(),href="/creditcards/micro/cleardues/balCon/confirmOffer",balConBookingAmount=$(".balCoverse-price-range").val(),tenure=tenure,rateOfInterest=rateOfInterest;$.ajax({url:href,type:"POST",dataType:"json",data:{balConBookingAmount:balConBookingAmount,tenure:tenure,rateOfInterest:rateOfInterest},headers:{synchronizerToken:syncToken},overlayTarget:$(".main"),beforeSend:function(){var loaderHtml='<div class="overlay-loader"></div>';$("body").append(loaderHtml)},complete:function(){$("body").find("div.overlay-loader").remove()},success:function(data){if("true"==data.success||1==data.success){$("#showBookOfferSection").show();var balAmount=parseFloat(balConBookingAmount);balAmount=balAmount.toLocaleString("en");var monthlyEmi=parseFloat(data.monthlyEMI),balConProcFee=parseFloat(data.balConProcFee);monthlyEmi=monthlyEmi.toLocaleString("en"),$("#showBookOfferSection #bookOfferAmt").html("&#8377; "+balAmount),$("#showBookOfferSection #bookOfferTenure").html(tenure+" Months"),$("#showBookOfferSection #bookOfferIntRt").html(rateOfInterest+"%"),$("#showBookOfferSection #bookOfferProcFee").html("&#8377; "+balConProcFee),$("#showBookOfferSection #bookOfferMonthlyEMI").html("&#8377; "+monthlyEmi),$("#bookBalConSection").hide(),$(".btn-gap.show-in-desktop").hide(),$(".idea-section-mobile").hide(),highlightOtherPayTab(),calHeightMicro()}else $(".balcon-error-block").html(data.errMsg),$(".top-error.balcon-error-block").show(),$("#offerConfirmBtnMob, #offerConfirmBtn").css({"background-color":"#00b1f2!important","pointer-events":"auto"})},error:function(){}})}function showThankYouPopup(){$("#thankYoubookedOffer .modal-dialog").addClass("open"),$(".menu-overlay").addClass("open"),$(".menu-overlay.open").css("z-index","999"),$("#microprtal-restructure-section").exists()?($("#bal-con-main-content-box #thankYoubookedOffer .modal-dialog").css("margin-top","40%"),$("html, body").animate({scrollTop:$("#restruc-cong-sec").offset().top},"fast")):$("#thankYoubookedOffer .modal-dialog").css("margin-top","0"),$(".other-opt.filled.balcon-success-tab .offer-vertical-line").css("height","94%"),callTimeoutThankyouPopup()}function callTimeoutThankyouPopup(){setTimeout(function(){$("#thankYoubookedOffer .modal-dialog").removeClass("open"),$(".menu-overlay").removeClass("open")},5e3),$("#bookBalConSection").hide(),$("#offerConfirmBtn").hide(),$("#showBookOfferSection").hide(),$("#successBalConSection").show(),$("#payToActivateOffer").hide(),$("#payToActivateOfferMob").hide(),$("#showBookOfferSectionHeader").addClass("grey"),$("#showBookOfferSection").css("display","none"),$("#bookOfferHeader").css("pointer-events","none"),$("#bookBalConHeader").css("pointer-events","none"),$("#bal-con-ver-acc").addClass("grey")}function callBalConBookOffer(tenure,rateOfInterest){$("#showBookOfferSection #book-offer").css({"background-color":"#dadada!important","pointer-events":"none"});var balConBookingAmount=$(".balCoverse-price-range").val(),tenure=tenure,rateOfInterest=rateOfInterest,syncToken=$("#synchronizerTokenMicroDashboard").val(),href="/creditcards/micro/cleardues/balCon/bookOffer";$.ajax({url:href,type:"POST",dataType:"json",headers:{synchronizerToken:syncToken},data:{balConBookingAmount:balConBookingAmount,tenure:tenure,rateOfInterest:rateOfInterest},overlayTarget:$(".main"),beforeSend:function(){var loaderHtml='<div class="overlay-loader"></div>';$("body").append(loaderHtml)},complete:function(){$("body").find("div.overlay-loader").remove()},success:function(data){if("true"==data.success||1==data.success){$("#successBalConSection").show(),$("#showBookOfferSection").hide(),$("#bookBalConSection").hide();var balAmount=parseFloat(data.balConBookingAmount);balAmount=balAmount.toLocaleString("en");var monthlyEmi=parseFloat(data.emi);monthlyEmi=monthlyEmi.toLocaleString("en");{var tenure=data.tenure;data.rateOfInterest,data.SrNumber}$("#successBookAmt").html(balAmount),$("#successEmiAmt").html(monthlyEmi),$("#successTenure").html(tenure),$("#successSrNo").html(data.SrNumber),1==data.srAlreadyExist||"true"==data.srAlreadyExist?$("#bookOfferSrTxt").show():$("#bookOfferSrTxt").hide(),showThankYouPopup(),highlightBookOfferSection()
}else $(".balcon-error-block").html(data.errMsg),$(".top-error.balcon-error-block").show(),$("#showBookOfferSection #book-offer").css({"background-color":"#00b1f2!important","pointer-events":"auto"})},error:function(){$("body").find("div.overlay-loader").remove()}})}function logActivity(MICRO_PORTAL_PAY_CANNOT_PAY_FULL_CLICK){var moduleName=MICRO_PORTAL_PAY_CANNOT_PAY_FULL_CLICK,syncToken=$("#synchronizerTokenMicroDashboard").val(),href="/creditcards/micro/user/logActivity";$.ajax({url:href,type:"POST",dataType:"json",headers:{synchronizerToken:syncToken},data:{moduleName:moduleName},overlayTarget:$(".main"),beforeSend:function(){var loaderHtml='<div class="overlay-loader"></div>';$("body").append(loaderHtml)},complete:function(){$("body").find("div.overlay-loader").remove()},success:function(){},error:function(){$("body").find("div.overlay-loader").remove()}})}function submitconsent(){var syncToken=$("#synchronizerTokenMicroDashboard").val(),href="/creditcards/micro/user/click-to-call-dashboard",productType="Whatsapp",channel="Website";$.ajax({url:href,data:{productType:productType,channelcall:channel},type:"POST",headers:{synchronizerToken:syncToken},overlayTarget:$(".overlay-opened"),success:function(data){$("#sticky-popup-dash .modal-wrap").html(data.message),$("#sticky-popup-dash").addClass("open"),$(".menu-overlay").addClass("open"),"true"==data.status||1==data.status?($("#microportal-fancy-checkbox").css("pointer-events","none"),$("#microportal-fancy-checkbox").addClass("checked")):$("#microportal-fancy-checkbox").css("pointer-events","auto")},error:function(){removeAjaxLoader()}})}function redirectToBalcon(){$("#micro-portal-dashboard-form").submit()}function restrucDueSettlement(hardshipToolname){if("RBI Restructure"==hardshipToolname){$("#micro-toolname").val("RBI Restructure"),$("#micro-portal-dashboard-form").attr("action","/creditcards/micro/cleardues/restructure");var loaderHtml='<div class="overlay-loader"></div>';$("body").append(loaderHtml),$("#micro-portal-dashboard-form").submit()}else{var href="/creditcards/micro/user/paymentConsent",productType=$("#micro-other-restruct-block").find("#micro-restruct-acc").find(".input-field a").attr("data-name");makeAjaxWithLoader({url:href,type:"POST",data:{productType:productType},overlayTarget:$(".overlay-opened"),success:function(data){1==data.success&&($("#micropopup .alert-msz-text").html(data.message),$("#micropopup .modal-dialog").addClass("open"),$(".menu-overlay").addClass("open"),setTimeout(function(){$("#micropopup .modal-dialog").removeClass("open"),$(".menu-overlay").removeClass("open")},5e3))},error:function(){removeAjaxLoader()}})}}function callRestructureOffer(tenure,rateOfInterest){var syncToken=$("#synchronizerTokenMicroDashboard").val(),href="/creditcards/micro/cleardues/restructure/confirmOffer",balConBookingAmount=$("#eligiblePrincipleAmt").html(),tenure=tenure,rateOfInterest=rateOfInterest;calHeightMicro(),$.ajax({url:href,type:"POST",dataType:"json",data:{balConBookingAmount:balConBookingAmount,tenure:tenure,rateOfInterest:rateOfInterest},headers:{synchronizerToken:syncToken},overlayTarget:$(".main"),beforeSend:function(){var loaderHtml='<div class="overlay-loader"></div>';$("body").append(loaderHtml)},complete:function(){$("body").find("div.overlay-loader").remove()},success:function(data){if("true"==data.success||1==data.success){$("#showBookOfferSection").show();var balAmount=parseFloat(balConBookingAmount);balAmount=balAmount.toLocaleString("en");var monthlyEmi=parseFloat(data.monthlyEMI);monthlyEmi=monthlyEmi.toLocaleString("en"),$("#showBookOfferSection #bookOfferAmt").html("&#8377; "+balAmount),$("#showBookOfferSection #bookOfferTenure").html(tenure+" Months"),$("#showBookOfferSection #bookOfferIntRt").html(rateOfInterest+"%"),$("#showBookOfferSection #bookOfferMonthlyEMI").html("&#8377; "+monthlyEmi),$("#installmentEmi").val(monthlyEmi),$("#bookBalConSection").hide(),$(".btn-gap.show-in-desktop").hide(),$(".idea-section-mobile").hide(),highlightOtherPayTab()}else $(".balcon-error-block").html(data.errMsg),$(".top-error.balcon-error-block").show(),$("#offerConfirmBtnMob, #offerConfirmBtn").css({"background-color":"#00b1f2!important","pointer-events":"auto"}),calHeightMicro();calHeightMicro()},error:function(){}})}function callrequestRestructureOffer(tenure,rateOfInterest){calHeightMicro(),$("#showBookOfferSection #book-restructure-offer").css({"background-color":"#a5a4a4","pointer-events":"none"});var restructureBookingAmount=$("#eligiblePrincipleAmt").html(),tenure=tenure,rateOfInterest=rateOfInterest,syncToken=$("#synchronizerTokenMicroDashboard").val(),href="/creditcards/micro/cleardues/restructure/bookOffer";$.ajax({url:href,type:"POST",dataType:"json",headers:{synchronizerToken:syncToken},data:{restructureBookingAmount:restructureBookingAmount,tenure:tenure,rateOfInterest:rateOfInterest},overlayTarget:$(".main"),beforeSend:function(){var loaderHtml='<div class="overlay-loader"></div>';$("body").append(loaderHtml)},complete:function(){$("body").find("div.overlay-loader").remove()},success:function(data){if("true"==data.success||1==data.success){$("#successBalConSection").show(),$("#showBookOfferSection").hide(),$("#bookBalConSection").hide();var balAmount=parseFloat(data.restructureBookingAmount);balAmount=balAmount.toLocaleString("en");var monthlyEmi=parseFloat(data.emi);monthlyEmi=monthlyEmi.toLocaleString("en");{data.tenure,data.rateOfInterest,data.SrNumber}$("#restructureBookingAmount").html(monthlyEmi),$("#restructureSuccessSr").html(data.SrNumber),1==data.srAlreadyExist||"true"==data.srAlreadyExist?$("#bookOfferSrTxt").show():$("#bookOfferSrTxt").hide(),showThankYouPopup(),highlightBookOfferSection()}else $(".balcon-error-block").html(data.errMsg),$(".top-error.balcon-error-block").show(),$("#showBookOfferSection #book-restructure-offer").css({"background-color":"#00b1f2!important","pointer-events":"auto"}),calHeightMicro();calHeightMicro()},error:function(){$("body").find("div.overlay-loader").remove()}})}function showTnC(){$(".elite-prime .modal.custom-modal").css("display","block")}function hideTnC(){$(".elite-prime .modal.custom-modal").css("display","none")}function enachCancelCompose(){var syncToken=$("input[name=synchronizerToken]").val(),formAdd='<form id = "composeRedirect" action="/creditcards/app/webform/webform-interaction/enachCancellation" method="POST" name="composeRedirect"><input type="hidden" name="synchronizerToken" value = "'+syncToken+'"/></form>';$("body").append(formAdd),document.getElementById("composeRedirect").submit()}function showAddEmailPopup(){$("#addEmailPopup").addClass("open"),$(".other-opt.filled.balcon-success-tab .offer-vertical-line").css("height","94%"),$("#settlement-email-submit-btn-anchor").css("background","#d0cfcf")}function closeAddEmailPopup(){$("#addEmailPopup .modal-dialog").removeClass("open"),$(".menu-overlay").removeClass("open"),$("#addEmailPopup").removeClass("open")}function submitAddEmailPopup(){var popupInpChk=popupInputFieldCheck();if(1==popupInpChk){$("#addEmailPopup").removeClass("open"),$("#addEmailPopup .modal-dialog").removeClass("open"),$(".menu-overlay").removeClass("open"),$("#regEmailDoesntExist").hide(),$("#showAddEmailBtn").hide(),$("#new-email-added").show();var enteredEmail=$(".line-input").val(),UppercaseEmail=enteredEmail.toUpperCase();$("#new-email-added").find(".labRes").html(UppercaseEmail),$("#new-email-added").find(".labRes").css("font-size","14px"),$("#settlement-email-submit-btn-anchor").css("cursor","pointer")}else 0==popupInpChk&&($("#settlement-email-submit-btn-anchor").css("background","#d0cfcf"),$("#settlement-email-submit-btn-anchor").css("pointer-events","none"),$("#settlement-email-submit-btn-anchor").css("cursor","auto"),$("#settlement-email-submit-btn-div").css("pointer-events","none"),$("#settlement-email-submit-btn-div").css({"pointer-events":"none",background:"#d0cfcf ",cursor:"auto"}))}function popupInputFieldCheck(){var emailField=$("#email-li").val(),lowerfirstfield=emailField.toLowerCase(),emailFieldConfirm=$("#confirm-email-li").val(),lowercaseemail=emailFieldConfirm.toLowerCase(),emailInpVal=$(".line-input").val(),smallcaselineinput=emailInpVal.toLowerCase(),emailRegEx=/^([a-zA-Z0-9\.-]+)@([a-zA-Z0-9-]+).([a-z]+)(.[a-z]+)?$/;return $(".line-input").val()&&lowerfirstfield==lowercaseemail&&emailRegEx.test(smallcaselineinput)?!0:!1}function editEmailPopup(){showAddEmailPopup(),$("#addEmailHeader").html("Edit Email ID");var submittedEmailId=$("#new-email-added .registerOpt p .labRes").html();$("#email-li").val(submittedEmailId),$("#confirm-email-li").val(submittedEmailId);var popupInpChk=popupInputFieldCheck();1==popupInpChk?($("#settlement-email-submit-btn-anchor").css("pointer-events","auto"),$("#settlement-email-submit-btn-anchor").css("background","#00b1f2 "),$("#settlement-email-submit-btn-anchor").css("cursor","pointer"),$("#settlement-email-submit-btn-div").css({"pointer-events":"auto",background:"#00b1f2",cursor:"pointer"})):($("#settlement-email-submit-btn-anchor").css("pointer-events","none"),$("#settlement-email-submit-btn-anchor").css("background","#d0cfcf"),$("#settlement-email-submit-btn-anchor").css("cursor","auto"),$("#settlement-email-submit-btn-div").css({"pointer-events":"none",background:"#d0cfcf ",cursor:"auto"})),$(document).on("keydown",function(e){var kc=e.which||e.keyCode;"13"==kc&&(e.preventDefault(),submitAddEmailPopup())})}function callBookOffer(tenMon,emiAmt,totSettAmt,wavAmt,wavPerc,regEmailID,altEmailID,emailChosen){console.log("click book offers"),$("#showSettlementOfferSection #book-digiSettlement-offer").css({"background-color":"#a5a4a4","pointer-events":"none"});var clBkOfftenMon=tenMon,clBkOffemiAmt=emiAmt,clBkOfftotSettAmt=totSettAmt,clBkOffwavAmt=wavAmt,clBkOffwavPerc=wavPerc,clBkOffregEmailID=regEmailID,clBkOffaltEmailID=altEmailID,clBkOffemailChosen=emailChosen,syncToken=$("#synchronizerTokenMicroDashboard").val(),href="/creditcards/micro/cleardues/settlement/bookOffer";$.ajax({url:href,type:"POST",dataType:"json",headers:{synchronizerToken:syncToken},data:{tenure:clBkOfftenMon,emiAmt:clBkOffemiAmt,settlementAmount:clBkOfftotSettAmt,waiverAmount:clBkOffwavAmt,waiverPercentage:clBkOffwavPerc,regEmailId:clBkOffregEmailID,altEmailId:clBkOffaltEmailID,emailChosenFlag:clBkOffemailChosen},overlayTarget:$(".main"),beforeSend:function(){var loaderHtml='<div class="overlay-loader"></div>';$("body").append(loaderHtml)},complete:function(){$("body").find("div.overlay-loader").remove()},success:function(data){if("true"==data.success||1==data.success){console.log("click book offer success"),$("#showSettlementOfferSection").hide();var ReqNumber=data.requestNumber;$("#settlementSrBooked #settlementSuccessSr").html(ReqNumber),$("#settlementSrBooked #SettlementAmountBooked").html(clBkOfftotSettAmt),$("#settlementSrBooked #EmiAmountbooked").html(clBkOffemiAmt),$("#settlementSrBooked #BookedMonths").html(clBkOfftenMon),1==data.srAlreadyExist||"true"==data.srAlreadyExist?$("#bookOfferSrTxt").show():$("#bookOfferSrTxt").hide(),showsettlementThankYouPopup(),highlightBookOfferSection()}else console.log("click book offer failure"),$("#successSettlementSection").hide(),$("#showSettlementOfferSection").show(),$(".balcon-error-block").html(data.errMsg),$(".top-error.balcon-error-block").show(),$("#callClearDuesOnErr").on("click",function(){$(this).css({"background-color":"#dadada","pointer-events":"none"})}),$("#settlement-btn-box #book-digiSettlement-offer").css({"background-color":"#00b1f2","pointer-events":"auto"}),$("#showBookOfferSection #book-digiSettlement-offer").css({"background-color":"#00b1f2!important","pointer-events":"auto"}),calHeightMicro();calHeightMicro()},error:function(){$("body").find("div.overlay-loader").remove()}})}function callDigitalSettlement(hardshipToolname){if("Settlement"==hardshipToolname){$("#micro-toolname").val("Settlement"),$("#micro-portal-dashboard-form").attr("action","/creditcards/micro/cleardues/settlement");var loaderHtml='<div class="overlay-loader"></div>';$("body").append(loaderHtml),$("#micro-portal-dashboard-form").submit()}else{var href="/creditcards/micro/user/paymentConsent",productType=$("#micro-other-restruct-block").find("#micro-restruct-acc").find(".input-field a").attr("data-name");makeAjaxWithLoader({url:href,type:"POST",data:{productType:productType},overlayTarget:$(".overlay-opened"),success:function(data){1==data.success&&($("#micropopup .alert-msz-text").html(data.message),$("#micropopup .modal-dialog").addClass("open"),$(".menu-overlay").addClass("open"),setTimeout(function(){$("#micropopup .modal-dialog").removeClass("open"),$(".menu-overlay").removeClass("open")},5e3))},error:function(){removeAjaxLoader()}})}}function callBillDeskMethod(monthlyEmi,payFlag){var href="/creditcards/micro/cleardues/settlement/paynow",syncToken=$("#synchronizerTokenMicroDashboard").val(),monthlyEmi=monthlyEmi;$.ajax({url:href,type:"GET",data:{payAmt:monthlyEmi,payFlag:payFlag},headers:{synchronizerToken:syncToken},success:function(data){var processDiv="";if(null!=data&&""!=data)var processDiv='<form action="'+data[0].paynetUrl+'" target="_blank" method="POST" name="payNetForm" style="margin-bottom:0px;"><input type="hidden" name="msg" id="msg" value="'+data[0].message+'"/><a href="#" class="button primary button-clickToProceed" onClick="payNetForm.submit();setAnalyticsPost(\'Proceed\');closeModalPopup($(this));">Proceed</a><a href="javascript:void(0);" class="button primary button-cancel" onClick="setAnalyticsPost(\'Cancel\');closeModalPopup($(this));">Cancel</a></form>';0==$(".button-clickToProceed").length&&$("#appendPayNowForm").append(processDiv),$(".button-clickToProceed").css("margin-right","5px"),viewport.width>=1024?$("#appendPayNowForm").parents().find(".open").children(".modal").css("margin-top","-267.5px"):viewport.width<767&&$("#appendPayNowForm").parents().find(".open").children(".modal").css("margin-top","0px"),$(".button.primary.button-clickToProceed").on("click",function(){console.log("click to proceed"),$("#appendPayNowForm form").remove(),$("#settlement-fancy-checkbox").css("pointer-events","none"),$("#settlement-btn-box #booksettle-paynet-integration").css({"background-color":"#dadada","pointer-events":"none"}),$("#settlement-btn-box #settlement-check-status").css({"background-color":"rgb(0, 177, 242)","pointer-events":"auto"})}),$(".button.primary.button-cancel").on("click",function(){console.log("click to cancle"),$("#appendPayNowForm form").remove(),$("#settlement-btn-box #booksettle-paynet-integration").css({"background-color":"rgb(0, 177, 242)","pointer-events":"auto"}),$("#settlement-btn-box #settlement-check-status").css({"background-color":"#dadada","pointer-events":"none"})})},error:function(){}})}function callsettlementOffer(tenure,waiveramount,totalSettlementAmount,monthlyEmi,oneshot,Percentage,otherSavedAmt){var settlementTenure=tenure,settlementTotalSettlementAmount=totalSettlementAmount,settlementWaiveramount=waiveramount,settlementemiamount=monthlyEmi,SettlementPercentage=Percentage;$("#showSettlementOfferSection #settlementBookOfferAmt").html(+settlementTotalSettlementAmount),$("#showSettlementOfferSection #settlementBookOfferTenure").html(+settlementTenure),$("#showSettlementOfferSection #settlementBookOfferWaiverAmt").html(+settlementWaiveramount),$("#showSettlementOfferSection #settlementBookOfferEMI").html(+settlementemiamount),$("#showSettlementOfferSection #settlementPerc").html(+SettlementPercentage),$("#default").hide(),$("#PartialPayment").hide(),1==settlementTenure?(console.log(settlementTenure),console.log("inside tenure 1"),$("#emiOtherSlotTxt").hide(),$("#emiFirstSlotTxt").show(),$("#emiFirstSlotTxt").find("#savedamount").html(settlementWaiveramount),$("#oneshotpaymentverb").show(),$("#multiInstalmentpayment").hide()):($("#emiOtherSlotTxt").show(),$("#emiFirstSlotTxt").hide(),$("#oneshotpaymentverb").hide(),$("#multiInstalmentpayment").show(),$("#emiOtherSlotTxt").find("#tenureSelected").html(settlementTenure),$("#emiOtherSlotTxt").find("#savedamount2").html(settlementWaiveramount)),1==settlementTenure?($("#thankYoubookedsettlementOffer #Oneshotverbiage").show(),$("#thankYoubookedsettlementOffer #MultipleEmis").hide()):($("#thankYoubookedsettlementOffer #Oneshotverbiage").hide(),$("#thankYoubookedsettlementOffer #MultipleEmis").show())}function showsettlementThankYouPopup(){$("#thankYoubookedsettlementOffer .modal-dialog").addClass("open"),$(".menu-overlay").addClass("open"),$(".menu-overlay.open").css("z-index","999"),$("#microprtal-settlement-section").exists()?$("#thankYoubookedsettlementOffer .modal-dialog").css("margin-top","10%"):$("#thankYoubookedsettlementOffer .modal-dialog").css("margin-top","0"),$(".other-opt.filled.balcon-success-tab .offer-vertical-line").css("height","94%"),callsettlementTimeoutThankyouPopup()}function callsettlementTimeoutThankyouPopup(){setTimeout(function(){$("#thankYoubookedsettlementOffer .modal-dialog").removeClass("open"),$(".menu-overlay").removeClass("open"),$("#successSettlementSection").show(),$("#showSettlementOfferSection").hide(),$("#settle-bookOffer-list-section #sucsessBalConHeaderLabel").css({"font-weight":"600",color:"#2d2d2d"}),$("#settlementOfferHeader #showBookOfferSectionHeader, #settlement-main-content-box #bookSettlementHeader #settlement-heading-tab1").css({"font-weight":"normal",color:"#8a8a96"}),calHeightMicro()},5e3),$("#digiSettleSection").hide(),$("#offerConfirmBtn").hide(),$("#showSettlementOfferSection").hide(),$("#payToActivateOffer").hide(),$("#payToActivateOfferMob").hide(),$("#showBookOfferSectionHeader").addClass("grey"),$("#showSettlementOfferSection").css("display","none"),$("#settlementOfferHeader").css("pointer-events","none"),$("#bookSettlementHeader").css("pointer-events","none"),$("#settlement-heading-tab1").addClass("grey")}function callTrackSettlementAcnt(){$("#micro-portal-dashboard-form").attr("action","/creditcards/micro/cleardues/settlement-hyperlink"),$("#micro-toolname").val("Settlement");var loaderHtml='<div class="overlay-loader"></div>';$("body").append(loaderHtml),$("#micro-portal-dashboard-form").submit()}function callTrackSettlementPage(){console.log("track Page called"),$("#micro-portal-dashboard-form").attr("action","/creditcards/micro/cleardues/settlement/trackBooking"),$("#micro-toolname").val("Settlement");var loaderHtml='<div class="overlay-loader"></div>';$("body").append(loaderHtml),$("#micro-portal-dashboard-form").submit()}function checkSettleBookingStatus(url){var settlementEligibilityCheck="",syncToken=$("#synchronizerTokenMicroDashboard").val();$.ajax({type:"GET",url:url,dataType:"json",headers:{synchronizerToken:syncToken},beforeSend:function(){var loaderHtml='<div class="overlay-loader"></div>';$("body").append(loaderHtml)},complete:function(){$("body").find("div.overlay-loader").remove()},success:function(response){if(response&&("true"==response.success||1==response.success)&&response.data.toolDetailsList)for(i=0;i<response.data.toolDetailsList.length;i++)"Settlement"==response.data.toolDetailsList[i].toolName&&(settlementEligibilityCheck=response.data.toolDetailsList[i].toolEligibleFlag,"B"==settlementEligibilityCheck?(console.log("redirect to track settlement account"),callTrackSettlementAcnt()):"Y"==settlementEligibilityCheck?(console.log("redirect to settlement page"),callDigitalSettlement("Settlement")):"REV"==$("#VPLUSsettlement").val()?(console.log("Inside REV+N"),availOtherPaymentOptRev()):(console.log("redirect to track page"),callTrackSettlementPage()))},error:function(){$(".balcon-error-block").html(response.message),$(".top-error.balcon-error-block").show()}})}function callSettlementBooking(tenMon,emiAmt,totSettAmt,wavAmt,wavPerc,regEmailID,altEmailID,emailChosen){console.log("click book offers"),$("#showSettlementOfferSection #booksettle-paynet-integration").css({"background-color":"#dadada","pointer-events":"none"});var clBkOfftenMon=tenMon,clBkOffemiAmt=emiAmt,clBkOfftotSettAmt=totSettAmt,clBkOffwavAmt=wavAmt,clBkOffwavPerc=wavPerc,clBkOffregEmailID=regEmailID,clBkOffaltEmailID=altEmailID,clBkOffemailChosen=emailChosen,syncToken=$("#synchronizerTokenMicroDashboard").val(),href="/creditcards/micro/cleardues/settlement/bookOffer";$.ajax({url:href,type:"POST",dataType:"json",headers:{synchronizerToken:syncToken},data:{tenure:clBkOfftenMon,emiAmt:clBkOffemiAmt,settlementAmount:clBkOfftotSettAmt,waiverAmount:clBkOffwavAmt,waiverPercentage:clBkOffwavPerc,regEmailId:clBkOffregEmailID,altEmailId:clBkOffaltEmailID,emailChosenFlag:clBkOffemailChosen},overlayTarget:$(".main"),beforeSend:function(){var loaderHtml='<div class="overlay-loader"></div>';$("body").append(loaderHtml)},complete:function(){$("body").find("div.overlay-loader").remove()},success:function(data){if("true"==data.success||1==data.success){console.log("click book offer success");var ReqNumber=data.requestNumber;$("#settlementSrBooked #settlementSuccessSr").html(ReqNumber),$("#settlementSrBooked #SettlementAmountBooked").html(clBkOfftotSettAmt),$("#settlementSrBooked #EmiAmountbooked").html(clBkOffemiAmt),$("#settlementSrBooked #BookedMonths").html(clBkOfftenMon),$("#settlement-error-block").hide(),1==data.srAlreadyExist||"true"==data.srAlreadyExist?$("#bookOfferSrTxt").show():$("#bookOfferSrTxt").hide(),$(".edit-newly-added-email").hide(),callDisclaimerPopup();var monthlyEmi=$("#settlementPendingAmt").html(),payFlag="S";callBillDeskMethod(monthlyEmi,payFlag)}else console.log("click book offer failure"),$("#settlement-error-block").show(),$("#successSettlementSection").hide(),$("#showSettlementOfferSection").show(),$(".balcon-error-block").html(data.errMsg),$(".top-error.balcon-error-block").show(),$("#callClearDuesOnErr").on("click",function(){$(this).css({"background-color":"#dadada","pointer-events":"none"})}),$("#settlement-btn-box #booksettle-paynet-integration").css({"background-color":"#00b1f2","pointer-events":"auto"}),$("#showBookOfferSection #booksettle-paynet-integration").css({"background-color":"#00b1f2","pointer-events":"auto"}),calHeightMicro();calHeightMicro()},error:function(){$("body").find("div.overlay-loader").remove()}})}function callDisclaimerPopup(){var paynowTxt='<div class="static-txt">Your payment is being processed, and will reflect as Last Payment Amount and Last Payment Date shortly.</div><div class="static-info"><span>Note: Total Amount Due will still be the same as it is as per the last statement date. Adjustments will reflect post generation of next statement.</span></div>';if($("a.crossDomain").length>0&&$(this).attr("target","_blank"),$(".modal-overlay.disclaimer-popup").addClass("open"),viewport.width<=1024&&($(".disclaimer-popup").css("margin-top","0px"),$(".disclaimer-popup .modal").css("margin-top","0px"),$(".disclaimer-popup .modal").css("margin-left","0px"),$(".disclaimer-popup .modal").scrollTop(0)),!$(".disclaimer-popup-open").exists()&&!$("#paynow-disclaimer-cardStatement").exists()&&$("a.button-clickToProceed").length>0){var url=$(this).attr("href"),target=$(this).attr("target");$("a.button-clickToProceed").attr("href",url),""!=target&&"undefined"!=target&&$("a.button-clickToProceed").attr("target",target)}$("#microportal-customer-level-section").html(""),$("#microportal-customer-level-section").html(paynowTxt)}function settlementSelectOfferCall(tenure,waiveramount,totalSettlementAmount,monthlyEmi,oneshot,Percentage){var syncToken=$("#synchronizerTokenMicroDashboard").val(),href="/creditcards/micro/cleardues/settlement/select-offer";$.ajax({url:href,type:"POST",dataType:"json",headers:{synchronizerToken:syncToken},data:{tenure:tenure,waiverAmount:waiveramount,emiAmt:monthlyEmi,waiverPercentage:Percentage,settlementAmount:totalSettlementAmount},overlayTarget:$(".main"),beforeSend:function(){var loaderHtml='<div class="overlay-loader"></div>';$("body").append(loaderHtml)},complete:function(){$("body").find("div.overlay-loader").remove()},success:function(){},error:function(){}})}function settleConditionalLanding(){console.log("enter sectional landing function"),$("#bookSettlementHeader").css("pointer-events","none"),$("#digiSettleSection").hide(),$("#settle-offerdata-section #showSettlementOfferSection").show(),calHeightMicro(),highlightOtherPayTab();var settlementTSA=$("#checkOfferAmt").val(),settlementCheckTenure=$("#checkTenure").val(),settlementWaiverAmt=$("#checkWaiveramount").val(),settlementEmiAmt=$("#checkOfferEmi").val(),pendingEmiAmt=$("#pendingEmiAmt").val(),regEmailService=$("#regemail").val(),ALTEmail=$("#sectionlandingemail").val(),AmountPaid=$("#AmtPaid").val(),AmountPending=$("#AmtPending").val(),tenMon=$("#checkTenure").val(),emiAmt=$("#checkOfferEmi").val(),totSettAmt=$("#checkOfferAmt").val();$("#digital-settlement-check #settlement-fancy-checkbox").addClass("checked"),$("#booksettle-paynet-integration").css("pointer-events","auto"),$("#booksettle-paynet-integration").css("background","#00b1f2 "),$("#digital-settlement-check #settlement-fancy-checkbox").css("pointer-events","none"),$("#settlementPendingAmt").html(pendingEmiAmt),$("#booksettle-paynet-integration span").html(pendingEmiAmt),$("#showSettlementOfferSection #settlementBookOfferAmt").html(+settlementTSA),$("#showSettlementOfferSection #settlementBookOfferTenure").html(+settlementCheckTenure),$("#showSettlementOfferSection #settlementBookOfferWaiverAmt").html(+settlementWaiverAmt),$("#showSettlementOfferSection #settlementBookOfferEMI").html(+settlementEmiAmt),$("#bookSettlementHeader").css("pointer-events","none"),$("#showSettlementOfferSection #settlement-email-box").hide(),$("#showSettlementOfferSection #post-statusCheck-box").show(),$("#settlement-section1").hide(),$("#showBookOfferSectionHeader").css({"font-weight":"600",color:"#2d2d2d"}),$("settlement-heading-tab1").css({"font-weight":"400",color:"#8a8a96"}),$("#default").hide(),1==tenMon?(console.log("Inside IF in section func"),$("#forMultipleemis").css("display","none"),$("#forOneShotPopup").css("display","block"),"REG"==$("#checkChoosenId").val()?($("#emailIDregistered").html(regEmailService),console.log(regEmailService)):(console.log(ALTEmail),$("#emailIDregistered").html(ALTEmail)),$("#emiOtherSlotTxt").hide(),$("#emiFirstSlotTxt").show(),$("#emiFirstSlotTxt").find("#savedamount").html(settlementWaiverAmt),$("#SettlementAmountBooked1").html(+totSettAmt),$("#monthlyEMI1").html(+emiAmt),$("#Oneshotverbiage").show(),$("#MultipleEmis").hide()):(console.log("Inside IF in section func"),$("#forMultipleemis").css("display","block"),$("#forOneShotPopup").css("display","none"),"REG"==$("#checkChoosenId").val()?($("#emailIDregisteredmulti").html(regEmailService),console.log(regEmailService)):(console.log(ALTEmail),$("#emailIDregisteredmulti").html(ALTEmail)),console.log(+totSettAmt),$("#emiOtherSlotTxt").show(),$("#emiFirstSlotTxt").hide(),$("#emiOtherSlotTxt").find("#tenureSelected").html(tenMon),$("#emiOtherSlotTxt").find("#savedamount2").html(settlementWaiverAmt),$("#settlementSrBooked #SettlementAmountBooked2").html(+totSettAmt),$("#settlementSrBooked #monthlyEMI2").html(+tenMon),$("#Oneshotverbiage").hide(),$("#MultipleEmis").show()),1==$("#PaymentStatus").val()||"true"==$("#PaymentStatus").val()?(console.log("paystatus>trueblock section landing"),$("#multiInstalmentpayment").hide(),$("#oneshotpaymentverb").hide(),$("#PartialPayment #AmtPaid").html(AmountPaid),$("#PartialPayment #AmtPending").html(AmountPending),$("#PartialPayment").show()):(console.log("paystatus>false block"),1==tenMon?($("#oneshotpaymentverb #settlementPendingAmt").html(emiAmt),$("#oneshotpaymentverb").show(),$("#multiInstalmentpayment").hide(),$("#PartialPayment").hide()):($("#multiInstalmentpayment #settlementPendingAmt").html(emiAmt),$("#oneshotpaymentverb").hide(),$("#multiInstalmentpayment").show(),$("#PartialPayment").hide()))}function callCheckOtherPaySatus(){$("#micro-portal-dashboard-form").attr("action","/creditcards/micro/cleardues/settlement/check-same-day-status"),$("#micro-toolname").val("Settlement");var loaderHtml='<div class="overlay-loader"></div>';$("body").append(loaderHtml),$("#micro-portal-dashboard-form").submit()}function dynamicMsg(path){"address"==path?($("#adr-msg").show(),$("#mob-msg").hide(),$("#reinst-modal-condirm").on("click",function(){console.log("adress clicked"),changeAddress(),$("#reinst-modal-condirm").css({"pointer-events":"none"})})):($("#adr-msg").hide(),$("#mob-msg").show(),$("#reinst-modal-condirm").on("click",function(){console.log("mob clicked"),changeMob(),$("#reinst-modal-condirm").css({"pointer-events":"none"})}))}function changeAddress(){console.log("chng addr clicked"),$("#AddressChangeform").submit()}function changeMob(){console.log("chng mob clicked"),localStorage.setItem("myprofile-details",!0),$("#MobileChangeform").submit()}function sendOtpSubmission(){$("#reinstGenErrBlk").hide(),console.log("submit send otp clicked");var href="/creditcards/app/requests/send-otp-reinstatement";$.ajax({url:href,type:"POST",dataType:"json",data:{Journey:"Reinstatement"},beforeSend:function(){var loaderHtml='<div class="overlay-loader"></div>';$("body").append(loaderHtml)},complete:function(){$("body").find("div.overlay-loader").remove()},success:function(data){"true"==data.success||1==data.success?($("#reinstGenErrBlk").hide(),$("#SubmitSendOtp").hide(),$("#OTPBlock").show()):($("#reinstGenErrBlk").hide(),$("#reinstGenErrBlk").show(),$("#reinstGenErrBlk .top-error").html(data.message))},error:function(){$("body").find("div.overlay-loader").remove()}})}function authOTPSubmission(){$("#reinstGenErrBlk").hide(),$("#OTPBlock #reinst-otp-form").submit();var loaderHtml='<div class="overlay-loader"></div>';$("body").append(loaderHtml),$("#authOTPSub").css({"pointer-events":"none"})}function submitSIhubForm(e){$(".modal-overlay").removeClass("open"),$("#sihub_proceedbtn_form").submit(),e.preventDefault(),e.stopPropagation()}function displayTransactionList(indexVal,transacData){console.log("inside list block",indexVal+"=="+transacData);var tansacList="",indexVal=0,dataLength=0;for(dataLength=transacData.length<5?transacData.length:5,indexVal;dataLength>indexVal;indexVal++)tansacList+='<tr class="transRow">							<td class="transCol-1" transacId="'+transacData[indexVal].transactionId+'">							<div class="field-wrap"><label class="fancy-radio"> <input name="AddonKycAddrSelection" class="styled-radio" type="radio" id="req-reversal-radio" value="${col.index}"/>									<span class="radio-toggle"></span>									</label>								</div></td>							<td class="transCol-2">'+transacData[indexVal].effectiveDate+'</td>						   	<td class="transCol-3">'+transacData[indexVal].transactionDescription+'</td>						   	<td class="transCol-4">'+transacData[indexVal].transactiontType+'</td>						  	<td class="transCol-5"><span>&#8377;</span> '+transacData[indexVal].amount+"</td></tr>";$("#transacDataRow").append(tansacList),$("#transacDataRow tbody tr").show(),$("#transacDataRow").css("display","table"),$(".table-pagination-box").show(),$("#reversal-from-sec2").show(),$("#table-size").html(transacData.length),$("#transacDataRow .transRow .transCol-1 .fancy-radio").on("click",function(){$("#transacDataRow tbody .transRow .transCol-1 .field-wrap label").removeClass("checked"),$("#fee-waiver-submit-btn").css({background:"#0095d9","pointer-events":"auto"});var transacVal=$(this).parent().parent().attr("transacid");$("#submit-transaction").val($(this).parent().parent().attr("transacid"));for(var i=0;i<transacData.length;i++)(1==transacData[i].transactionSelected||"true"==transacData[i].transactionSelected)&&delete transacData[i].transactionSelected,transacVal==transacData[i].transactionId&&(console.log("matched"+transacData[i].transactionId),transacData[i].transactionSelected=!0,console.log("transacData >>:",transacData),$("#transactionListData").val(JSON.stringify(transacData)))}),$("#table-size").html()<=5?(console.log("previous view"),$(".fw-paginate-right").css("pointer-events","none")):(console.log("next view"),$(".fw-paginate-right").css("pointer-events","auto"))}function encryptData(data){var passphrase=$("#passphrase").val();
if(passphrase){var salt=CryptoJS.lib.WordArray.random(16);iv=CryptoJS.lib.WordArray.random(16),key=CryptoJS.PBKDF2(passphrase,salt,{keySize:4,iterations:100}),encryptedData=CryptoJS.AES.encrypt(data,key,{iv:iv,mode:CryptoJS.mode.CBC,padding:CryptoJS.pad.Pkcs7}),dataPassed=salt+iv+encryptedData}else var dataPassed=data;return dataPassed}function mobilenomasking(value){var value=value.toString(),maskedSection=value.slice(0,-4),visibleSection=value.slice(-4),mobilemasked=maskedSection.replace(/./g,"X")+visibleSection;$(".multicard-process.manage-card-section #mobilemaskedvalue").empty(),$(".multicard-process.manage-card-section #mobilemaskedvalue").append(mobilemasked)}function emailmasking(value){const maskedTextLastPos=value.lastIndexOf("@"),emailIdLength=value.length;var value=value.toString(),visibleSection1=value.slice(0,2),maskedSection=value.slice(2,maskedTextLastPos),visibleSection2=value.slice(maskedTextLastPos,emailIdLength),emailmasked=visibleSection1+maskedSection.replace(/./g,"X")+visibleSection2;$(".multicard-process.manage-card-section #emailmaskedvalue").empty(),$(".multicard-process.manage-card-section #emailmaskedvalue").append(emailmasked)}function reissueConfirmGenOtp(otpGenURL){if(reissueResendOTPCount>5)return $(".reissue-manage-section .error-div").css("display","block"),$(".reissue-manage-section .error-section").empty(),void $(".reissue-manage-section .error-section").append("You have exhausted the number of times you can ask for One Time Password (OTP) to be resent. Please re-start your journey by clicking on the Re-issue/Replace Card.");var selectedCardId=$("input[type=radio][name=cardToBlock]:checked").attr("id");console.log("1 selectedCardId"+selectedCardId.length);var selectedCard="";selectedCard=selectedCardId.slice(selectedCardId.length>50?-44:-19),console.log("1 selectedCard length:"+selectedCard.length);var selectedCardPassed=encryptData(selectedCard),passphrase=$("#passphrase").val();$.ajax({type:"POST",data:JSON.stringify({selEncyptedCardNum:selectedCardPassed}),url:otpGenURL,contentType:"application/json; charset=utf-8",dataType:"json",headers:{passphrase:passphrase},beforeSend:function(){$("body").append(loaderHtml)},complete:function(){$("body").find("div.overlay-loader").remove()},success:function(response){response&&(response.success?($(".reissue-manage-section .gray-otp-wrapp").show(),$(".reissue-manage-section .button-group").hide(),$("#manageCardCheckbox #check_box_1").prop("disabled",!0),$("#manageCardCheckbox #check_box_2").prop("disabled",!0),$("#manageCardCheckbox #check_box_3").prop("disabled",!0),$(".reissue-manage-section .error-div").css("display","none"),$(".reissue-manage-section #otp-msg").css("display","none")):5===response.errorCode?($(".reissue-manage-section .button-group").hide(),$(".reissue-manage-section .gray-otp-wrapp").show(),$("#manageCardCheckbox #check_box_1").prop("disabled",!0),$("#manageCardCheckbox #check_box_2").prop("disabled",!0),$("#manageCardCheckbox #check_box_3").prop("disabled",!0),$(".reissue-manage-section .error-div").css("display","none"),$(".reissue-manage-section #otp-msg").css("display","none")):($(".reissue-manage-section .error-div").css("display","block"),$(".reissue-manage-section .error-section").empty(),$(".reissue-manage-section .error-section").append(response.message)))},error:function(){$("body").find("div.overlay-loader").remove()}})}function reissueReGenOtp(otpGenURL){reissueResendOTPCount>5||$.ajax({type:"GET",url:otpGenURL,beforeSend:function(){$(".reissue-manage-section #reissue-otp-err").css("display","none"),$(".reissue-manage-section #reissueOtp").css("border","1px solid #dddddd"),$("body").append(loaderHtml)},complete:function(){$("body").find("div.overlay-loader").remove()},success:function(response){response&&(response.success?0===response.errorCode&&($(".reissue-manage-section .error-div").css("display","none"),$(".reissue-manage-section #otp-msg").css("display","block"),$(".reissue-manage-section #otp-msg").empty(),$(".reissue-manage-section #otp-msg").append(response.message),reissueResendOTPCount+=1):507===response.errorCode||512===response.errorCode?($(".reissue-manage-section #otp-msg").css("display","none"),$(".reissue-manage-section .error-div").css("display","block"),$(".reissue-manage-section .error-section").empty(),$(".reissue-manage-section .error-section").append(response.message),$(".reissue-manage-section #reissue-otp-submit").css("color","#fff"),$(".reissue-manage-section #reissue-otp-submit").css("background-color","#ddd"),$(".reissue-manage-section #reissue-otp-submit").css("cursor","default"),$(".reissue-manage-section #reissue-resendotp").css("color","grey"),$(".reissue-manage-section #reissue-resendotp").css("pointer-events","none"),$(".reissue-manage-section #reissueOtp").prop("readonly",!0),reissueResendOTPCount+=1):($(".reissue-manage-section .error-section").empty(),$(".reissue-manage-section .error-section").append(response.message),$(".reissue-manage-section .error-div").css("display","block"),$(".reissue-manage-section #otp-msg").css("display","none")))},error:function(){$("body").find("div.overlay-loader").remove()}})}function reissueOtpSubmission(){if(!(reissueResendOTPCount>5)){var otpValue=$(".manage-card-section #reissueOtp").val();otpValue&&otpValue.length>0?($("#manageCardCheckbox #check_box_1").prop("disabled",!1),$("#manageCardCheckbox #check_box_2").prop("disabled",!1),$("#manageCardCheckbox #check_box_3").prop("disabled",!1),setAnalyticsReissueSubmit(),$("body").append(loaderHtml),otpPassed=encryptData(otpValue),$(".reissue-manage-section #reissueOtp").val(otpPassed),$("#reissue-replace-form").submit(),$(".reissue-manage-section #reissueOtp").val(otpValue)):$(".reissue-manage-section #reissueOtp").css("border","1px solid red")}}function setAnalyticsReissueSubmit(){s.linkTrackVars="events,prop6,eVar9",s.linkTrackEvents="event12",s.prop4="sbi-card:postlogin:requests:reissue-replace-page",s.prop6="sbi-card:postlogin:requests:reissue-replace-page:submit-Otp",s.tl(this,"o","sbi:"+s.prop4+":"+s.prop6,null)}function reportConfirmGenOtp(otpGenURL){if(reportResendOTPCount>5)return $(".report-manage-section .error-div").css("display","block"),$(".report-manage-section .error-section").empty(),void $(".report-manage-section .error-section").append("You have exhausted the number of times you can ask for One Time Password (OTP) to be resent. Please re-start your journey by clicking on the Report a Lost/Stolen Card.");var selectedCardId=$("input[type=radio][name=cardToBlock]:checked").attr("data-value");console.log("2 selectedCardId"+selectedCardId.length);var selectedCard="";selectedCard=selectedCardId.slice(selectedCardId.length>50?-44:-19),console.log("2 selectedCard length:"+selectedCard.length);var selectedCardPassed=encryptData(selectedCard),passphrase=$("#passphrase").val();$.ajax({type:"POST",data:JSON.stringify({selEncyptedCardNum:selectedCardPassed}),url:otpGenURL,contentType:"application/json; charset=utf-8",dataType:"json",headers:{passphrase:passphrase},beforeSend:function(){$("body").append(loaderHtml)},complete:function(){console.log("Step 2"),$("body").find("div.overlay-loader").remove()},success:function(response){response&&(response.success?($(".report-manage-section .gray-otp-wrapp").show(),$(".report-manage-section .button-group").hide(),$("#manageCardCheckbox #check_box_1").prop("disabled",!0),$("#manageCardCheckbox #check_box_2").prop("disabled",!0),$("#manageCardCheckbox #check_box_3").prop("disabled",!0),$(".report-manage-section .error-div").css("display","none"),$(".report-manage-section #otp-msg").css("display","none"),$("#report-stolen-form .styled-checkbox.reissuecheck").prop("disabled",!0)):5===response.errorCode?($(".report-manage-section .button-group").hide(),$(".report-manage-section .gray-otp-wrapp").show(),$("#manageCardCheckbox #check_box_1").prop("disabled",!0),$("#manageCardCheckbox #check_box_2").prop("disabled",!0),$("#manageCardCheckbox #check_box_3").prop("disabled",!0),$(".report-manage-section .error-div").css("display","none"),$(".report-manage-section #otp-msg").css("display","none"),$("#report-stolen-form .styled-checkbox.reissuecheck").prop("disabled",!0)):($(".report-manage-section .error-div").css("display","block"),$(".report-manage-section .error-section").empty(),$(".report-manage-section .error-section").append(response.message),$("#report-stolen-form .styled-checkbox.reissuecheck").prop("disabled",!0)))},error:function(){$("body").find("div.overlay-loader").remove()}})}function reportReGenOtp(otpGenURL){reportResendOTPCount>5||$.ajax({type:"GET",url:otpGenURL,beforeSend:function(){$(".report-manage-section #report-otp-err").css("display","none"),$(".report-manage-section #reportOtp").css("border","1px solid #dddddd"),$("body").append(loaderHtml)},complete:function(){$("body").find("div.overlay-loader").remove()},success:function(response){response&&(response.success?0===response.errorCode&&($(".report-manage-section .error-div").css("display","none"),$(".report-manage-section #otp-msg").css("display","block"),$(".report-manage-section #otp-msg").empty(),$(".report-manage-section #otp-msg").append(response.message),$("#report-stolen-form .styled-checkbox.reissuecheck").prop("disabled",!0),reportResendOTPCount+=1):507===response.errorCode||512===response.errorCode?($(".report-manage-section #otp-msg").css("display","none"),$(".report-manage-section .error-div").css("display","block"),$(".report-manage-section .error-section").empty(),$(".report-manage-section .error-section").append(response.message),$(".report-manage-section #report-otp-submit").css("color","#fff"),$(".report-manage-section #report-otp-submit").css("background-color","#ddd"),$(".report-manage-section #report-otp-submit").css("cursor","default"),$(".report-manage-section #report-resendotp").css("color","grey"),$(".report-manage-section #report-resendotp").css("pointer-events","none"),$(".report-manage-section #reportOtp").prop("readonly",!0),$("#report-stolen-form .styled-checkbox.reissuecheck").prop("disabled",!0),reportResendOTPCount+=1):($(".report-manage-section .error-section").empty(),$(".report-manage-section .error-section").append(response.message),$(".report-manage-section .error-div").css("display","block"),$(".report-manage-section #otp-msg").css("display","none"),$("#report-stolen-form .styled-checkbox.reissuecheck").prop("disabled",!0)))},error:function(){$("body").find("div.overlay-loader").remove()}})}function reportOtpSubmission(){if(!(reportResendOTPCount>5)){var otpValue=$(".manage-card-section #reportOtp").val();otpValue&&otpValue.length>0?($("#manageCardCheckbox #check_box_1").prop("disabled",!1),$("#manageCardCheckbox #check_box_2").prop("disabled",!1),$("#manageCardCheckbox #check_box_3").prop("disabled",!1),$("#report-stolen-form .styled-checkbox.reissuecheck").prop("disabled",!1),setAnalyticsReportSubmit(),$("body").append(loaderHtml),otpPassed=encryptData(otpValue),$(".report-manage-section #reportOtp").val(otpPassed),$("#report-stolen-form").submit(),$(".report-manage-section #reportOtp").val(otpValue)):$(".report-manage-section #reportOtp").css("border","1px solid red")}}function setAnalyticsReportSubmit(){s.linkTrackVars="events,prop6,eVar9",s.linkTrackEvents="event12",s.prop4="sbi:sbi-card:postlogin:requests:report-stolen-page",s.prop6="sbi:sbi-card:postlogin:requests:report-stolen-page:submit-Otp",s.tl(this,"o","sbi:"+s.prop4+":"+s.prop6,null)}function cardupgradeConfirmGenOtp(otpGenURL){return cardupgradeResendOTPCount>5?($(".card-upgrade-section .error-div").css("display","block"),$(".card-upgrade-section .error-section").empty(),void $(".card-upgrade-section .error-section").append("You have exhausted the number of times you can ask for One Time Password (OTP) to be resent. Please re-start your journey by clicking on the Card Upgrade.")):(setAnalyticsCardUpgrade(),void $.ajax({type:"GET",url:otpGenURL,beforeSend:function(){$("body").append(loaderHtml)},complete:function(){$("body").find("div.overlay-loader").remove()},success:function(response){response&&(response.success?($(".card-upgrade-section .gray-otp-wrapp").show(),$(".card-upgrade-section .button-group").hide(),$("#manageCardCheckbox #check_box_1").prop("disabled",!0),$("#manageCardCheckbox #check_box_2").prop("disabled",!0),$("#manageCardCheckbox #check_box_3").prop("disabled",!0),$(".card-upgrade-section .error-div").css("display","none"),$(".card-upgrade-section #otp-msg").css("display","none"),$(".card-upgrade-section .cond-check #check_box_4").prop("disabled",!0)):5===response.errorCode?($(".card-upgrade-section .button-group").hide(),$(".card-upgrade-section .gray-otp-wrapp").show(),$("#manageCardCheckbox #check_box_1").prop("disabled",!0),$("#manageCardCheckbox #check_box_2").prop("disabled",!0),$("#manageCardCheckbox #check_box_3").prop("disabled",!0),$(".card-upgrade-section .error-div").css("display","none"),$(".card-upgrade-section #otp-msg").css("display","none"),$(".card-upgrade-section .cond-check #check_box_4").prop("disabled",!0)):($(".card-upgrade-section .error-div").css("display","block"),$(".card-upgrade-section .error-section").empty(),$(".card-upgrade-section .error-section").append(response.message)))},error:function(){$("body").find("div.overlay-loader").remove()}}))}function setAnalyticsCardUpgrade(){s.linkTrackVars="events,prop6,eVar9",s.linkTrackEvents="event12",s.prop4=" sbi-card:postlogin:benefits:flip-page",s.prop6=" sbi-card:postlogin:benefits:flip-page:upgrade",s.tl(this,"o","sbi:"+s.prop4+":"+s.prop6,null)}function cardupgradeReGenOtp(otpGenURL){cardupgradeResendOTPCount>5||$.ajax({type:"GET",url:otpGenURL,beforeSend:function(){$(".card-upgrade-section #cardupgrade-otp-err").css("display","none"),$(".card-upgrade-section #cardUpgradeOtp").css("border","1px solid #dddddd"),$("#upgrade-now-tab #upgrade-now-section-1").hide(),$("#upgrade-now-tab #num-1").css("display","none"),$("#upgrade-now-tab #tick-img").css("display","block"),$("body").append(loaderHtml)},complete:function(){$("body").find("div.overlay-loader").remove()},success:function(response){response&&(response.success?0===response.errorCode&&($(".card-upgrade-section .error-div").css("display","none"),$(".card-upgrade-section #otp-msg").css("display","block"),$(".card-upgrade-section #otp-msg").empty(),$(".card-upgrade-section #otp-msg").append(response.message),cardupgradeResendOTPCount+=1):507===response.errorCode||512===response.errorCode?($(".card-upgrade-section #otp-msg").css("display","none"),$(".card-upgrade-section .error-div").css("display","block"),$(".card-upgrade-section .error-section").empty(),$(".card-upgrade-section .error-section").append(response.message),$(".card-upgrade-section #cardUpgrade-otp-submit").css("color","#fff"),$(".card-upgrade-section #cardUpgrade-otp-submit").css("background-color","#ddd"),$(".card-upgrade-section #cardUpgrade-otp-submit").css("cursor","default"),$(".card-upgrade-section #cardUpgrade-resendotp").css("color","grey"),$(".card-upgrade-section #cardUpgrade-resendotp").css("pointer-events","none"),$(".card-upgrade-section #cardUpgradeOtp").prop("readonly",!0),$(".padding-Zero.manage-card-section .mumer-heading").css("pointer-events","none"),cardupgradeResendOTPCount+=1):($(".card-upgrade-section .error-section").empty(),$(".card-upgrade-section .error-section").append(response.message),$(".card-upgrade-section .error-div").css("display","block"),$(".card-upgrade-section #otp-msg").css("display","none")))},error:function(){$("body").find("div.overlay-loader").remove()}})}function cardUpgradeOtpSubmission(){if(!(cardupgradeResendOTPCount>5)){var otpValue=$(".manage-card-section #cardUpgradeOtp").val();otpValue&&otpValue.length>0?($("#manageCardCheckbox #check_box_1").prop("disabled",!1),$("#manageCardCheckbox #check_box_2").prop("disabled",!1),$("#manageCardCheckbox #check_box_3").prop("disabled",!1),setAnalyticsCardupgradeSubmit(),$("body").append(loaderHtml),otpPassed=encryptData(otpValue),$(".card-upgrade-section #cardUpgradeOtp").val(otpPassed),document.getElementById("card-upgrade-form").submit(),$(".card-upgrade-section #cardUpgradeOtp").val(otpValue)):$(".card-upgrade-section #cardUpgradeOtp").css("border","1px solid red")}}function setAnalyticsCardupgradeSubmit(){s.linkTrackVars="events,prop6,eVar9",s.linkTrackEvents="event12",s.prop4=" sbi-card:postlogin:benefits:flip-page",s.prop6=" sbi-card:postlogin:benefits:flip-page:Otp-submit",s.tl(this,"o","sbi:"+s.prop4+":"+s.prop6,null)}function switchstatus(tog,switch_val){"1"==switch_val?$(tog).prop("checked",!0):$(tog).prop("checked",!1)}function checkToggleStatus(togg){var togStatus=$(togg).is(":checked");return togStatus?!0:void 0}function corpCase(toggg){$(toggg).prop("disabled",!0),$("#step2-travel-iti .shift-right.switch .slider").css({"background-color":"#ccc",cursor:"default"})}function nextToMITrans(){var href="/creditcards/app/requests/manage-international-transactions";$.ajax({url:href,type:"POST",dataType:"json",beforeSend:function(){var loaderHtml='<div class="overlay-loader"></div>';$("body").append(loaderHtml)},complete:function(){$("body").find("div.overlay-loader").remove()},success:function(data){$("#step1-travel-iti .numeric").hide(),$("#CheckImage").show(),$("#subHeading").hide(),$("#Step1UTP").hide(),$("#travelmcu").show(),$("#step2-travel-iti .sub-heading").show(),$("#step1-travel-iti .mumer-heading").css({cursor:"default"}),$("#step2-travel-iti .mumer-heading").css({cursor:"pointer"}),$("html,body").animate({scrollTop:$("#travelmcu").offset().top-110},"slow");var switch1=data.InternationalTransactionControl.onlineTransactionFlag,switch2=data.InternationalTransactionControl.posFlag,switch3=data.InternationalTransactionControl.contactLessFlag,switch4=data.InternationalTransactionControl.atmFlag;sw1status=switch1,sw2status=switch2,sw3status=switch3,sw4status=switch4,switchstatus("#travel-online #check_box_1",switch1),switchstatus("#travel-pos #check_box_2",switch2),switchstatus("#travel-cntl #check_box_3",switch3),switchstatus("#travel-atm #check_box_4",switch4),1==data.InternationalTransactionControl.editableFormFLag?($("#travel-online #check_box_1").on("change",function(){sw1modified="Y";var changed1=checkToggleStatus("#travel-online #check_box_1");changed1?(sw1status="1",console.log("1 on,sw1status=",sw1status)):(sw1status="0",console.log("1 off,sw1status=",sw1status))}),$("#travel-pos #check_box_2").on("change",function(){sw2modified="Y";var changed2=checkToggleStatus("#travel-pos #check_box_2");changed2?(sw2status="1",console.log("2 on,sw2status=",sw2status)):(sw2status="0",console.log("2 off,sw2status=",sw2status))}),$("#travel-cntl #check_box_3").on("change",function(){sw3modified="Y";var changed3=checkToggleStatus("#travel-cntl #check_box_3");changed3?(sw3status="1",console.log("3 on,sw3status=",sw3status)):(sw3status="0",console.log("3 off,sw3status=",sw3status))}),$("#travel-atm #check_box_4").on("change",function(){sw4modified="Y";var changed4=checkToggleStatus("#travel-atm #check_box_4");changed4?(sw4status="1",console.log("4 on,sw4status=",sw4status)):(sw4status="0",console.log("4 off,sw4status=",sw4status))})):(corpCase("#travel-online #check_box_1"),corpCase("#travel-pos #check_box_2"),corpCase("#travel-cntl #check_box_3"),corpCase("#travel-atm #check_box_4"))},error:function(){$("body").find("div.overlay-loader").remove()}})}function generateTravelOtp(){var href="/creditcards/app/requests/send-otp-travel-update";$.ajax({url:href,type:"POST",dataType:"json",data:{requestType:reqType},beforeSend:function(){var loaderHtml='<div class="overlay-loader"></div>';$("body").append(loaderHtml)},complete:function(){$("body").find("div.overlay-loader").remove(),editPlanModal.removeClass("show"),editPlanModal.addClass("hide"),$("#edit-travel-plan .buttn-block").hide()},success:function(data){data&&($("#step2-travel-iti .numeric").hide(),$("#travel-check-img-2").show(),$("#travelmcu").hide(),$("#step2-travel-iti .sub-heading").hide(),$("#travel-gen-otp").hide(),$("#Travel-OTPBlock").show(),$("#step1-travel-iti .mumer-heading").css({cursor:"default"}),$("#step2-travel-iti .mumer-heading").css({cursor:"default"}),$("html,body").animate({scrollTop:$("#Travel-OTPBlock").offset().top-110},"slow"),"true"==data.success||1==data.success?0==data.errorCode:5==data.errorCode?($("#travelResendBlk").css("display","block"),$("#travelResendBlk .travelResendLabel").html(data.message)):107==data.errorCode?($("#travelResendOTP").addClass("disabled"),$("#travelResendOTP").css("pointer-events","none"),$("#travelauthOTPSub").css({"pointer-events":"none",background:"#dadada"}),$("#travel-otp-inp").prop("disabled",!0),$("#travelauthOTPCancel").addClass("disabled"),$("#travelauthOTPCancel").css("pointer-events","none"),$("#travelErrBlk").show(),$("#travelErrBlk .top-error").html(data.message)):($("#travelErrBlk").show(),$("#travelErrBlk .top-error").html(data.message),$("#edit-travel-plan .buttn-block").show()))},error:function(){$("body").find("div.overlay-loader").remove(),$("#edit-travel-plan .buttn-block").show()}})}function regenerateTravelOtp(){var href="/creditcards/app/requests/resend-otp-travel-update";$.ajax({url:href,type:"POST",dataType:"json",beforeSend:function(){var loaderHtml='<div class="overlay-loader"></div>';$("body").append(loaderHtml)},complete:function(){$("body").find("div.overlay-loader").remove()},success:function(data){data&&(travelresendCount+=1,"true"==data.success||1==data.success?0==data.errorCode&&($("#travelResendBlk").css("display","block"),$("#travelResendBlk .travelResendLabel").html(data.message)):507==data.errorCode?($("#travelErrBlk").show(),$("#travelErrBlk .top-error").html(data.message),$("#travelResendOTP").addClass("disabled"),$("#travelResendOTP").css("pointer-events","none"),$("#travelauthOTPSub").css({"pointer-events":"none",background:"#dadada"}),$("#travel-otp-inp").prop("disabled",!0),$("#travelResendBlk").hide()):107==data.errorCode?($("#travelResendOTP").addClass("disabled"),$("#travelResendOTP").css("pointer-events","none"),$("#travelauthOTPSub").css({"pointer-events":"none",background:"#dadada"}),$("#travel-otp-inp").prop("disabled",!0),$("#travelauthOTPCancel").addClass("disabled"),$("#travelauthOTPCancel").css("pointer-events","none"),$("#travelErrBlk").show(),$("#travelErrBlk .top-error").html(data.message)):($("#travelErrBlk").show(),$("#travelErrBlk .top-error").html(data.message)))},error:function(){$("body").find("div.overlay-loader").remove()}})}function postCancelActions(){$("#travelResendOTP").removeClass("disabled"),$("#travelResendOTP").css("pointer-events","auto"),$("#travelauthOTPSub").css({"pointer-events":"auto",background:"#0095da"}),$("#travel-otp-inp").val(""),$("#travel-otp-inp").prop("disabled",!1)}function postAuthScenario(){$("#step1-travel-iti .numeric").hide(),$("#CheckImage").show(),$("#Step1UTP").hide(),$("#step2-travel-iti .numeric").hide(),$("#travel-check-img-2").show(),$("#travelmcu").hide(),$("#step2-travel-iti .sub-heading").hide(),$("#travel-gen-otp").hide(),$("#Travel-OTPBlock").show(),$("#step1-travel-iti .mumer-heading").css({cursor:"default"}),$("#step2-travel-iti .mumer-heading").css({cursor:"default"}),$("html,body").animate({scrollTop:$("#Travel-OTPBlock").offset().top-110},"slow")}function convertDate(date){var newDate=date.getFullYear()+"-"+("0"+(date.getMonth()+1)).slice(-2)+"-"+("0"+date.getDate()).slice(-2);return newDate}function formatDate(date){if(date){var parts=date.split("-"),mydate=new Date(parts[0],parts[1]-1,parts[2]);return mydate}}function loadForm(){var countryText=$("#TravelUpdate .fancy-select ul li[data-raw-value="+travelCountryCode+"]").text();$("#fromDate").datepicker("setDate",formatDate(formDataset.fromDate)),$("#toDate").datepicker("setDate",formatDate(formDataset.toDate)),$("#NumberDate").datepicker("setDate",formatDate(formDataset.NumberDate)),$("#TravelUpdate #dropdownSelect option[value="+travelCountryCode+"]").attr("selected","selected"),$("#TravelUpdate .fancy-select .trigger").text(countryText),$("#TravelUpdate .fancy-select ul li[data-raw-value="+travelCountryCode+"]").addClass("selected"),$("#TravelUpdate .fancy-select ul li[data-raw-value="+travelCountryCode+"]").siblings().removeClass("selected"),CheckNextValidity()}function mobilenomasked(value){var value=value.toString(),maskedSection=value.slice(0,-4),visibleSection=value.slice(-4),mobilemasked=maskedSection.replace(/./g,"X")+visibleSection;$(".offer-postlogin.card-activate #mobilemaskedvalue").empty(),$(".offer-postlogin.card-activate #mobilemaskedvalue").append(mobilemasked)}function emailmasked(value){const maskedTextLastPos=value.lastIndexOf("@"),emailIdLength=value.length;var value=value.toString(),visibleSection1=value.slice(0,2),maskedSection=value.slice(2,maskedTextLastPos),visibleSection2=value.slice(maskedTextLastPos,emailIdLength),emailmasked=visibleSection1+maskedSection.replace(/./g,"X")+visibleSection2;$(".offer-postlogin.card-activate #emailmaskedvalue").empty(),$(".offer-postlogin.card-activate #emailmaskedvalue").append(emailmasked)}function cardActivationReGenOtp(otpGenURL){cardActivationResendOTPCount>5||$.ajax({type:"GET",url:otpGenURL,beforeSend:function(){$(".card-activate #card-activate-otp-err").css("display","none"),$(".card-activate #cardactivateOtp").css("border","1px solid #dddddd"),$("body").append(loaderHtml)},complete:function(){$("body").find("div.overlay-loader").remove()},success:function(response){response&&(response.success&&0===response.errorCode?($(".card-activate .error-div").css("display","none"),$(".card-activate #otp-msg").css("display","block"),$(".card-activate #otp-msg").empty(),$(".card-activate #otp-msg").append(response.message),cardActivationResendOTPCount+=1):507===response.errorCode||512===response.errorCode?($(".card-activate #otp-msg").css("display","none"),$(".card-activate .error-div").css("display","block"),$(".card-activate .error-section").empty(),$(".card-activate .error-section").append(response.message),$(".card-activate #card-activate-otp-submit").css("color","#fff"),$(".card-activate #card-activate-otp-submit").css("background-color","#ddd"),$(".card-activate #card-activate-otp-submit").css("pointer-events","none"),$(".card-activate #cardactivate-resendotp").css("color","grey"),$(".card-activate #cardactivate-resendotp").css("pointer-events","none"),$(".card-activate #cardactivateOtp").prop("readonly",!0),cardActivationResendOTPCount+=1):1010==response.errorCode?($(".card-activate #otp-msg").css("display","none"),$(".card-activate .error-div").css("display","block"),$(".card-activate .error-section").empty(),$(".card-activate .error-section").append(response.message),$(".card-activate #cardactivate-resendotp").css("color","grey"),$(".card-activate #cardactivate-resendotp").css("pointer-events","none")):($(".card-activate .error-section").empty(),$(".card-activate .error-section").append(response.message),$(".card-activate .error-div").css("display","block"),$(".card-activate #otp-msg").css("display","none")))},error:function(){$("body").find("div.overlay-loader").remove()}})}function cardActivationOtpSubmission(){if(!(cardActivationResendOTPCount>5)){var otpValue=$(".card-activate #cardactivateOtp").val();otpValue&&otpValue.length>0?($("body").append(loaderHtml),otpPassed=encryptData(otpValue),$(".card-activate #cardactivateOtp").val(otpPassed),$("#card-activation-form").submit(),$(".card-activate #cardactivateOtp").val(otpValue)):$(".card-activate #cardactivateOtp").css("border","1px solid red")}}function acknowledgeButtonToggle(){1==$("#rbi-consent-checkbox").prop("checked")?$("#rbi-consent-submit").addClass("rbi-consent-submit").removeClass("rbi-consent-cancel disable-submit").attr("disabled",!1):$("#rbi-consent-submit").removeClass("rbi-consent-submit").addClass("rbi-consent-cancel disable-submit").attr("disabled",!0)}function submitRBIMandateForm(action){var loaderHtml='<div class="overlay-loader"></div>',$target=$("body");$target.append(loaderHtml);var token=$("input[name=synchronizerToken]").val();$target.append('<form action="'+action+'" method="POST" class="dynaFormTNC"><input type="hidden" name="synchronizerToken" id="synchronizerToken" value="'+token+'"/></form>'),$("form.dynaFormTNC").submit()}function addBeneficiaryDetails(){$.ajax({url:"/creditcards/app/benefits/easy-money-beneficiary-details",type:"POST",beforeSend:function(){$("body").append('<div class="overlay-loader beneficiary"></div>')},complete:function(){$("body").find("div.overlay-loader").remove(),openStep2CloseStep1()},success:function(response){if(beneficiaryDetailsUpdated=!0,response.length<=0)$(".emd-emi-benificiary-list").remove();else{var option=$("#neft-beneficiaryAcnt-emd-emi"),str="",str2="";for(i=0;i<response.length;i++)str+='<option data-bankname="'+response[i].bankName+", "+response[i].branchName+", "+response[i].address+'"data-fullBankName="'+response[i].bankName+'"data-ifsc="'+response[i].ifsccode+'">'+response[i].bankAccountNumber+"</option>",str2+='<li data-id="undefined" data-raw-value="'+response[i].bankAccountNumber+'">'+response[i].bankAccountNumber+"</li>";option.empty().html(str);var actualOptions=$("#neftInputFields");actualOptions.find(".trigger").text("Select"),actualOptions.find("ul.options").empty().html(str2)}},error:function(){$("body").find("div.overlay-loader").remove(),$(".emd-emi-benificiary-list").remove(),openStep2CloseStep1()}})}function openStep2CloseStep1(){$(".step-2-hidden").removeClass("hide"),$(".step-1-hidden").addClass("hide"),$(".step-1 .number-count-emd.emd-emi-tick").removeClass("hidden"),$(".step-1 .number-count-emd.emd-emi-number").addClass("hidden")}function validateBookingAmountEmdEMI(bookingAmnt,minAmount,maxEligibleAmount){if(parseFloat(bookingAmnt)<parseFloat(minAmount))$("#bookingAmnt-emd-emi").addClass("error"),$("label[for=bookingAmnt-emd-emi]").removeClass("valid").addClass("error"),$(".error-help-block.emd-emi").removeClass("v-hide").empty().html("Requested amount is less than minimum amount"),$("#bookingAmnt-emd-emi").parent().parent().addClass("width-95-emd-emi");else if(parseFloat(bookingAmnt)>parseFloat(maxEligibleAmount))$("#bookingAmnt-emd-emi").addClass("error"),$("label[for=bookingAmnt-emd-emi]").removeClass("valid").addClass("error"),$(".error-help-block.emd-emi").removeClass("v-hide").empty().html("Requested amount is more than maximum amount"),$("#bookingAmnt-emd-emi").parent().parent().addClass("width-95-emd-emi");else{if(void 0!=bookingAmnt&&""!=bookingAmnt)return $("#bookingAmnt-emd-emi").removeClass("error"),$("label[for=bookingAmnt-emd-emi]").addClass("valid").removeClass("error"),$(".error-help-block.emd-emi").addClass("v-hide"),$("#bookingAmnt-emd-emi").parent().parent().addClass("width-95-emd-emi"),!0;$("#bookingAmnt-emd-emi").addClass("error"),$("label[for=bookingAmnt-emd-emi]").removeClass("valid").addClass("error"),$(".error-help-block.emd-emi").addClass("v-hide"),$("#bookingAmnt-emd-emi").parent().parent().addClass("width-95-emd-emi")}return!1}function validateOfferEmdEMI(offerIndex){return parseInt(offerIndex)>=0?($("#offers").removeClass("error"),$("label[for=emd-dropdown]").addClass("valid").removeClass("error"),$("#offers").parent().parent().addClass("width-95-emd-emi"),!0):($("#offers").addClass("error"),$("label[for=emd-dropdown]").removeClass("valid").addClass("error"),$("#offers").parent().parent().addClass("width-95-emd-emi"),!1)}function validateBookingAmountAndOfferEmdEMI(frm){var offerIndex=$(frm).find("#offers").find(".selected-option").attr("data-index"),bookingAmnt=$(frm).find("#bookingAmnt-emd-emi").val(),minAmount=$(frm).find("#offers").find(".selected-option").attr("data-min"),maxEligibleAmount=$(frm).find("#maxAmount").val(),offerSelected=validateOfferEmdEMI(offerIndex),amountEntered=validateBookingAmountEmdEMI(bookingAmnt,minAmount,maxEligibleAmount);return amountEntered&&offerSelected}function EasyMoneyOnEMIOmniture(item,stepNumber){s.linkTrackVars="events,prop6,eVar9",s.linkTrackEvents="event12",s.prop4="sbi-card:postlogin:benefits:easy-money",s.prop6=" sbi-card:postlogin:benefits:easy-money-next-Step-"+stepNumber,s.tl(item,"o","sbi:"+s.prop4+":"+s.prop6,null),console.log("item : "+item+", stepNumber : "+stepNumber)
}function EasyMoneyOmniture(item,localProp6){s.linkTrackVars="events,prop6,eVar9",s.linkTrackEvents="event12",s.prop4="sbi-card:postloginbenefits:easy-money",s.prop6=localProp6,s.tl(item,"o","sbi:"+s.prop4+":"+s.prop6,null),console.log("item : "+item+", localProp6 : "+localProp6)}function callC2bOtpResend(data){console.log(data);var data=data;setTimeout(function(){c2bOtpResend(data)},5e3)}function c2bOtpResend(response){if(window.analytics){{({session_id:$("#campaign-form #analyticsSessionId").val(),journey_name:$("#campaign-form #featureName").val(),journey_id:$("#campaign-form #journeyId").val(),inbound_channel:"Website",source_page_url:window.location.href,status:response.split("|")[0],error_code:"",error_description:"resendNotAllowed"==response.split("|")[0]?response.split("|")[1]:"",customer_ip_address:$("#campaign-form #fromIpAddress").val(),page_name:"C2B Landing Page",referer:$("#campaign-form #referer").val()?$("#campaign-form #referer").val():window.location.href})}analytics.track("C2B_otp_gen",{session_id:$("#campaign-form #analyticsSessionId").val(),journey_name:$("#campaign-form #featureName").val(),journey_id:$("#campaign-form #journeyId").val(),inbound_channel:"Website",source_page_url:window.location.href,status:response.split("|")[0],error_code:"",error_description:"resendNotAllowed"==response.split("|")[0]?response.split("|")[1]:"",customer_ip_address:$("#campaign-form #fromIpAddress").val(),page_name:"C2B Landing Page",referer:$("#campaign-form #referer").val()?$("#campaign-form #referer").val():window.location.href})}}function viewEditDetails(){var isEmailVerified=$("#emailVerified").val(),_OtpgenUrl="send-otp-contact-change-revamp";$.ajax({type:"GET",url:_OtpgenUrl,beforeSend:function(){$(".error-div").hide();var loaderHtml='<div class="overlay-loader"></div>';$("body").append(loaderHtml)},success:function(res){0==res.errorCode||5==res.errorCode?($("body").find("div.overlay-loader").remove(),$(".fancy.addOn-dropbox.fancified").parent().find(".trigger").css("pointer-events","none"),$(".updateVerifyJourney .view-edit-details").addClass("hide-section"),$(".updateVerifyJourney .gray-otp-wrapp.unmaskingOtpSection").css("display","block"),""!=isEmailVerified&&("Y"==isEmailVerified?($(".updateVerifyJourney .gray-otp-wrapp.unmaskingOtpSection .unverifiedEmail").css("display","none"),$(".updateVerifyJourney .gray-otp-wrapp.unmaskingOtpSection .verifiedEmail").css("display","block")):"N"==isEmailVerified&&($(".updateVerifyJourney .gray-otp-wrapp.unmaskingOtpSection .unverifiedEmail").css("display","block"),$(".updateVerifyJourney .gray-otp-wrapp.unmaskingOtpSection .verifiedEmail").css("display","none")))):201==res.errorCode?($(".error-div .error-section").empty().text(res.message),$(".error-div").show()):($(".error-div").show(),$(".error-div .error-section").empty().text(res.message))},error:function(){$("body").find("div.overlay-loader").remove()}})}function unmaskingOtpRegen(){var _unmaskingOtpRegenUrl="resend-otp-contact-change-revamp";$.ajax({type:"GET",url:_unmaskingOtpRegenUrl,beforeSend:function(){$(".error-div").hide(),$(".unmaskingOtpSection #unmaskingOtp").css("border","1px solid #ddd"),$(".unmaskingOtpSection #unmasking-otp-err").hide();var loaderHtml='<div class="overlay-loader"></div>';$("body").append(loaderHtml)},success:function(res){$("body").find("div.overlay-loader").remove(),0==res.errorCode?$(".unmaskingOtpSection #otp-msg").show().text(res.message):507==res.errorCode||107==res.errorCode?($(".error-div .error-section").empty().text(res.message),$(".error-div").show(),$(".unmaskingOtpSection #otp-msg").hide().text(""),$(".unmaskingOtpSection #unmaskingOtp").prop("disabled",!0),$(".unmaskingOtpSection #unmusk-otp-resend-btn").css("pointer-events","none"),$(".unmaskingOtpSection #cancelOTP").css("pointer-events","none")):($(".error-div").show(),$(".error-div .error-section").empty().text(res.message))},error:function(){$("body").find("div.overlay-loader").remove()}})}function unmaskingOtpSubmit(){var passphrase=document.getElementById("passphrase").value,_OtpgenUrl="auth-otp-contact-change-revamp",OTPencr=encryptData($("#unmaskingOtp").val());$.ajax({type:"POST",data:{encryptedOtp:OTPencr},url:_OtpgenUrl,headers:{passphrase:passphrase},beforeSend:function(){$(".error-div").hide(),$(".unmaskingOtpSection #otp-msg").hide();var loaderHtml='<div class="overlay-loader"></div>';$("body").append(loaderHtml)},complete:function(){$("body").find("div.overlay-loader").remove()},success:function(res){if(res=decryptResponse(res,passphrase),0==res.statusCode){console.log("update otp"),$(".updateVerifyJourney .readonly-email-block .masked").css("display","none"),$(".updateVerifyJourney .readonly-email-block .unmasked").css("display","block"),$(".updateVerifyJourney .readonly-mobile-block .masked").css("display","none"),$(".updateVerifyJourney .readonly-mobile-block .unmasked").css("display","block"),$(".updateVerifyJourney .update-email-block").removeClass("hide-section"),$(".updateVerifyJourney .update-phone-number-block").removeClass("hide-section"),$(".updateVerifyJourney .gray-otp-wrapp.unmaskingOtpSection").css("display","none");var mobileValue=$("#unmaskedMobileNo").val(),emailValue=$("#unmaskedEmailId").val();$(".updateVerifyJourney .readonly-email-block .unmasked").empty(),$(".updateVerifyJourney .readonly-email-block .unmasked").append(emailValue),$(".updateVerifyJourney .readonly-mobile-block .unmasked").empty(),$(".updateVerifyJourney .readonly-mobile-block .unmasked").append("+91"+mobileValue),"SBICARD"==$("#isSBICheck").html()&&"USER"==$("#userRole").val()?$(".ccr-sbi-update-detail-steps").show():$(".ccr-sbi-update-detail-steps").hide(),$("#email-verification-link").removeClass("link-hidden"),$("#email-verification-link").show(),$(".updateVerifyJourney .verify-block").removeClass("hide-section")}else 4==res.statusCode?($(".unmaskingOtpSection #unmaskingOtp").css("border-color","red"),$(".unmaskingOtpSection #unmaskingOtp").val(""),$(".unmaskingOtpSection #unmasking-otp-err").show().empty().text(res.message),$(".updateVerifyJourney .unmaskingOtpSection .rmv").addClass("disabled"),$("#updateSbiDetailStep").hide()):1==res.statusCode||2==res.statusCode?($(".error-div .error-section").empty().text(res.message),$(".error-div").show(),$(".unmaskingOtpSection #unmaskingOtp").val(""),$(".unmaskingOtpSection #unmaskingOtp").prop("disabled",!0),$(".unmaskingOtpSection #unmusk-otp-resend-btn").css("pointer-events","none"),$(".unmaskingOtpSection #cancelOTP").css("pointer-events","none"),$(".updateVerifyJourney .unmaskingOtpSection .rmv").addClass("disabled"),$("#updateSbiDetailStep").hide()):($(".error-div").show(),$(".error-div .error-section").empty().text(res.message),$("#updateSbiDetailStep").hide())},error:function(){$("body").find("div.overlay-loader").remove()}})}function updateEmailId(){var oldValue=$("#unmaskedEmailId").val(),newValue=$("#_newEmail").val(),unverifiedKYC=$("#unverifiedCustomerKyc").val();if("true"==$("#proceedToKYCJourney").val()&&$("#kycLinkClicked").val("Y"),"Y"!=unverifiedKYC&&oldValue.toLowerCase()==newValue.toLowerCase())return void $("#nochangeEmail").show();$("#nochangeEmail").hide();var _OtpgenUrl="send-otp-contact-change-revamp-update",passphrase=document.getElementById("passphrase").value,mobileNumber=null,email=$(".updateVerifyJourney .editable-email-block input").val(),encryptedEmail=encryptData(email);$("#kycEmailJourney").val(!0),$("#kycMobileJourney").val(!1),$.ajax({type:"POST",data:{mobileNumber:mobileNumber,emailId:encryptedEmail},url:_OtpgenUrl,headers:{passphrase:passphrase},beforeSend:function(){$(".error-div").hide();var loaderHtml='<div class="overlay-loader"></div>';$("body").append(loaderHtml)},complete:function(){$("body").find("div.overlay-loader").remove()},success:function(res){if(0==res.errorCode||5==res.errorCode){var newEmail=$(".updateVerifyJourney .editable-email-block input").val();$(".updateVerifyJourney .editable-email-block span.unmasked").empty(),$(".updateVerifyJourney .editable-email-block span.unmasked").append(newEmail),$(".updateVerifyJourney .email-submit-div").css("display","none"),$(".updateVerifyJourney .editable-email-block input").css("display","none"),$(".updateVerifyJourney .editable-email-block span.unmasked").css("display","block"),"Y"==$("#kycLinkClicked").val()?($(".updateVerifyJourney .gray-otp-wrapp.kycOtpSection").css("display","block"),$(".updateVerifyJourney .gray-otp-wrapp.kycOtpSection .mobileOtpVerbiage").css("display","none"),$(".updateVerifyJourney .gray-otp-wrapp.kycOtpSection .emailOtpVerbiage").css("display","block"),$(".updateVerifyJourney .gray-otp-wrapp.kycOtpSection .emailOtpVerbiage span").empty().append(res.emailIdMasked)):($(".updateVerifyJourney .gray-otp-wrapp.updateOtpSection").css("display","block"),$(".updateVerifyJourney .gray-otp-wrapp.updateOtpSection .mobileOtpVerbiage").css("display","none"),$(".updateVerifyJourney .gray-otp-wrapp.updateOtpSection .emailOtpVerbiage").css("display","block"),$(".updateVerifyJourney .gray-otp-wrapp.updateOtpSection .emailOtpVerbiage span").empty().append(res.emailIdMasked))}else 1==res.errorCode?($(".error-div .error-section").empty().text(res.message),$(".error-div").show()):($(".error-div").show(),$(".error-div .error-section").empty().text(res.message))},error:function(){$("body").find("div.overlay-loader").remove()}})}function updateMobileNumber(){var oldValue=$("#primary-MobileNumber").val(),newValue=$("#_newMobile").val(),unverifiedKYC=$("#unverifiedCustomerKyc").val();if("Y"!=unverifiedKYC&&newValue===oldValue)return void $("#nochangeMobile").show();$("#nochangeMobile").hide(),"true"==$("#proceedToKYCJourney").val()&&$("#kycLinkClicked").val("Y");var _OtpgenUrl="send-otp-contact-change-revamp-update",passphrase=document.getElementById("passphrase").value,mobileNumber=$(".updateVerifyJourney .editable-mobile-block input").val(),encryptedMobile=encryptData(mobileNumber),email=null;$("#kycEmailJourney").val(!1),$("#kycMobileJourney").val(!0),$.ajax({type:"POST",data:{mobileNumber:encryptedMobile,emailId:email},url:_OtpgenUrl,headers:{passphrase:passphrase},beforeSend:function(){$(".error-div").hide();var loaderHtml='<div class="overlay-loader"></div>';$("body").append(loaderHtml)},complete:function(){$("body").find("div.overlay-loader").remove()},success:function(res){if(0==res.errorCode||5==res.errorCode){var mobileNumber=$(".updateVerifyJourney .editable-mobile-block input").val();$(".updateVerifyJourney .editable-mobile-block span.unmasked").empty(),$(".updateVerifyJourney .editable-mobile-block span.unmasked").append("+91"+mobileNumber),$(".updateVerifyJourney .mobile-submit-div").css("display","none"),$(".updateVerifyJourney .editable-mobile-block .mobile-input-group").css("display","none"),$(".updateVerifyJourney .editable-mobile-block span.unmasked").css("display","block"),"Y"==$("#kycLinkClicked").val()?($(".updateVerifyJourney .gray-otp-wrapp.kycOtpSection").css("display","block"),$(".updateVerifyJourney .gray-otp-wrapp.kycOtpSection .emailOtpVerbiage").css("display","none"),$(".updateVerifyJourney .gray-otp-wrapp.kycOtpSection .mobileOtpVerbiage").css("display","block"),$(".updateVerifyJourney .gray-otp-wrapp.kycOtpSection .mobileOtpVerbiage span").empty().append(res.mobileNumberMasked)):($(".updateVerifyJourney .gray-otp-wrapp.updateOtpSection").css("display","block"),$(".updateVerifyJourney .gray-otp-wrapp.updateOtpSection .emailOtpVerbiage").css("display","none"),$(".updateVerifyJourney .gray-otp-wrapp.updateOtpSection .mobileOtpVerbiage").css("display","block"),$(".updateVerifyJourney .gray-otp-wrapp.updateOtpSection .mobileOtpVerbiage span").empty().append(res.mobileNumberMasked))}else 1==res.errorCode?($(".error-div .error-section").empty().text(res.message),$(".error-div").show()):($(".error-div").show(),$(".error-div .error-section").empty().text(res.message))},error:function(){$("body").find("div.overlay-loader").remove()}})}function verifyEmail(){var verifyOtpgenUrl="send-otp-contact-change-revamp-email-verify";$.ajax({type:"GET",url:verifyOtpgenUrl,beforeSend:function(){$(".error-div").hide();var loaderHtml='<div class="overlay-loader"></div>';$("body").append(loaderHtml)},success:function(res){0==res.errorCode||5==res.errorCode?($("body").find("div.overlay-loader").remove(),$(".fancy.addOn-dropbox.fancified").parent().find(".trigger").css("pointer-events","none"),$(".updateVerifyJourney .view-edit-details").addClass("hide-section"),$(".updateVerifyJourney .verify-block").removeClass("hide-section"),$(".updateVerifyJourney .gray-otp-wrapp.verifyOtpSection").css("display","block")):201==res.errorCode?($(".error-div .error-section").empty().text(res.message),$(".error-div").show()):($(".error-div").show(),$(".error-div .error-section").empty().text(res.message))},error:function(){$("body").find("div.overlay-loader").remove()}})}function verifyOtpRegen(){var verifyOtpRegenUrl="resend-otp-contact-change-revamp-email-verify";$.ajax({type:"GET",url:verifyOtpRegenUrl,beforeSend:function(){$(".error-div").hide(),$(".verifyOtpSection #verifyOtp").css("border","1px solid #ddd"),$(".verifyOtpSection #verify-otp-err").hide();var loaderHtml='<div class="overlay-loader"></div>';$("body").append(loaderHtml)},success:function(res){$("body").find("div.overlay-loader").remove(),0==res.errorCode?$(".verifyOtpSection #otp-msg").show().text(res.message):507==res.errorCode||107==res.errorCode?($(".error-div .error-section").empty().text(res.message),$(".error-div").show(),$(".verifyOtpSection #otp-msg").hide().text(""),$(".verifyOtpSection #verifyOtp").prop("disabled",!0),$(".verifyOtpSection #verify-otp-resend-btn").css("pointer-events","none"),$(".verifyOtpSection #cancelOTP").css("pointer-events","none")):($(".error-div").show(),$(".error-div .error-section").empty().text(res.message))},error:function(){$("body").find("div.overlay-loader").remove()}})}function verifyOtpSubmit(){var passphrase=document.getElementById("passphrase").value,verifySubmitUrl="auth-otp-contact-change-revamp-email-verify",OTPencr=encryptData($("#verifyOtp").val());$.ajax({type:"POST",data:{encryptedOtp:OTPencr},url:verifySubmitUrl,headers:{passphrase:passphrase},beforeSend:function(){$(".verifyOtpSection #otp-msg").hide();var loaderHtml='<div class="overlay-loader"></div>';$("body").append(loaderHtml)},success:function(res){if(res=decryptResponse(res,passphrase),$("body").find("div.overlay-loader").remove(),0==res.statusCode){$(".updateVerifyJourney .gray-otp-wrapp.verifyOtpSection").css("display","none"),$(".updateVerifyJourney .readonly-mobile-block").addClass("hide-section"),$(".updateVerifyJourney .verify-email-submit-div").removeClass("hide-section");var emailValue=$("#unmaskedEmailId").val();$(".updateVerifyJourney .readonly-email-block .unmasked").empty(),$(".updateVerifyJourney .readonly-email-block .unmasked").append(emailValue),$(".updateVerifyJourney .readonly-email-block .unmasked").css("display","block"),$(".updateVerifyJourney .readonly-email-block .masked").css("display","none"),emailVerifySubmit()}else 4==res.statusCode?($(".verifyOtpSection #verifyOtp").css("border-color","red"),$(".verifyOtpSection #verifyOtp").val(""),$(".verifyOtpSection #verify-otp-err").show().empty().text(res.message),$(".updateVerifyJourney .verifyOtpSection .rmv").addClass("disabled")):1==res.statusCode||2==res.statusCode?($(".error-div .error-section").empty().text(res.message),$(".error-div").show(),$(".verifyOtpSection #verifyOtp").val(""),$(".verifyOtpSection #verifyOtp").prop("disabled",!0),$(".verifyOtpSection #verify-otp-resend-btn").css("pointer-events","none"),$(".verifyOtpSection #cancelOTP").css("pointer-events","none"),$(".updateVerifyJourney .verifyOtpSection .rmv").addClass("disabled")):($(".error-div").show(),$(".error-div .error-section").empty().text(res.message))},error:function(){$("body").find("div.overlay-loader").remove()}})}function emailVerifySubmit(){$("body").append(loaderHtml),$("#contact-update-form-retail").submit()}function emailVerifyCancel(){$(".updateVerifyJourney .view-edit-details").removeClass("hide-section"),$(".updateVerifyJourney .verify-block").removeClass("hide-section"),$(".updateVerifyJourney .readonly-mobile-block").removeClass("hide-section"),$(".updateVerifyJourney .verify-email-submit-div").addClass("hide-section"),$(".updateVerifyJourney .readonly-email-block .unmasked").css("display","none"),$(".updateVerifyJourney .readonly-email-block .masked").css("display","block"),$(".verifyOtpSection #verifyOtp").val("")}function updateEmailPhoneSubmit(){var contactUpdateForm=$("#contact-update-form-retail"),verifyOtpSubmit="auth-update-otp-contact-change-revamp",passphrase=document.getElementById("passphrase").value,OTPencr=encryptData($("#updateOtp").val());contactUpdateForm.removeAttr("action"),contactUpdateForm.attr("action","/creditcards/app/myprofile/contact-change-revamp-submission"),$.ajax({type:"POST",url:verifyOtpSubmit,data:{docReferenceId:null,docType:null,updateEncryptedOtp:OTPencr},headers:{passphrase:passphrase},beforeSend:function(){var loaderHtml='<div class="overlay-loader"></div>';$("body").append(loaderHtml),$(".updateOtpSection #otp-msg").hide()},success:function(res){res=decryptResponse(res,passphrase),"000"==res.statusCode?contactUpdateForm.submit():"004"==res.statusCode?($("body").find("div.overlay-loader").remove(),$(".updateOtpSection #updateOtp").css("border-color","red"),$(".updateOtpSection #updateOtp").val(""),$(".updateOtpSection #update-otp-err").show().empty().text(res.message),$(".updateVerifyJourney .updateOtpSection .rmv").addClass("disabled")):("001"==res.statusCode||"002"==res.statusCode)&&($("body").find("div.overlay-loader").remove(),$(".error-div .error-section").empty().text(res.message),$(".error-div").show(),$(".updateOtpSection #update-otp-err").hide().text(""),$(".updateOtpSection #updateOtp").prop("disabled",!0),$(".updateOtpSection #update-otp-resend-btn").css("pointer-events","none"),$(".updateOtpSection #cancelOTP").css("pointer-events","none"),$(".updateVerifyJourney .updateOtpSection .rmv").addClass("disabled"))},error:function(){$("body").find("div.overlay-loader").remove()}})}function updatingReGenOtp(){var _updatingOtpRegenUrl="resend-otp-contact-change-revamp-update";$.ajax({type:"GET",url:_updatingOtpRegenUrl,beforeSend:function(){$(".error-div").hide(),$(".updateOtpSection #updateOtp").css("border","1px solid #ddd"),$(".updateOtpSection #update-otp-err").hide();var loaderHtml='<div class="overlay-loader"></div>';$("body").append(loaderHtml)},success:function(res){$("body").find("div.overlay-loader").remove(),0==res.errorCode?$(".updateOtpSection #otp-msg").show().text(res.message):507==res.errorCode||107==res.errorCode?($(".error-div .error-section").empty().text(res.message),$(".error-div").show(),$(".updateOtpSection #otp-msg").hide().text(""),$(".updateOtpSection #updateOtp").prop("disabled",!0),$(".updateOtpSection #update-otp-resend-btn").css("pointer-events","none"),$(".updateOtpSection #cancelOTP").css("pointer-events","none")):($(".error-div").show(),$(".error-div .error-section").empty().text(res.message))},error:function(){$("body").find("div.overlay-loader").remove()}})}function kycJourneyInitiation(){$("#unverifiedCustomerKyc").val("Y"),$("#kycLinkClicked").val("Y"),$(".updateVerifyJourney .readonly-email-block .masked").css("display","none"),$(".updateVerifyJourney .readonly-email-block .unmasked").css("display","block"),$(".updateVerifyJourney .readonly-mobile-block .masked").css("display","none"),$(".updateVerifyJourney .readonly-mobile-block .unmasked").css("display","block"),$(".updateVerifyJourney .update-email-block").removeClass("hide-section"),$(".updateVerifyJourney .update-phone-number-block").removeClass("hide-section"),$(".updateVerifyJourney .gray-otp-wrapp.unmaskingOtpSection").css("display","none"),$(".updateVerifyJourney .verify-block").css("display","none"),$(".fancy.addOn-dropbox.fancified").parent().find(".trigger").css("pointer-events","none"),$(".updateVerifyJourney .view-edit-details").addClass("hide-section");var mobileValue=$("#maskedMobileNo").val(),emailValue=$("#maskedEmailId").val();$(".updateVerifyJourney .readonly-email-block .unmasked").empty(),$(".updateVerifyJourney .readonly-email-block .unmasked").append(emailValue),$(".updateVerifyJourney .readonly-mobile-block .unmasked").empty(),$(".updateVerifyJourney .readonly-mobile-block .unmasked").append("+91"+mobileValue)}function kycReGenOtp(){var kycOtpRegenUrl="resend-otp-contact-change-revamp-update";$.ajax({type:"GET",url:kycOtpRegenUrl,beforeSend:function(){$(".error-div").hide(),$(".kycOtpSection #kycOtp").css("border","1px solid #ddd"),$(".kycOtpSection #kyc-otp-err").hide();var loaderHtml='<div class="overlay-loader"></div>';$("body").append(loaderHtml)},success:function(res){$("body").find("div.overlay-loader").remove(),0==res.errorCode?$(".kycOtpSection #otp-msg").show().text(res.message):507==res.errorCode||107==res.errorCode?($(".error-div .error-section").empty().text(res.message),$(".error-div").show(),$(".kycOtpSection #otp-msg").hide().text(""),$(".kycOtpSection #kycOtp").prop("disabled",!0),$(".kycOtpSection #kyc-otp-resend-btn").css("pointer-events","none"),$(".kycOtpSection #cancelOTP").css("pointer-events","none")):($(".error-div").show(),$(".error-div .error-section").empty().text(res.message))},error:function(){$("body").find("div.overlay-loader").remove()}})}function kycOtpSubmit(){var passphrase=document.getElementById("passphrase").value,kycSubmitUrl="kyc-auth-update-otp-contact-change-revamp",otpEncrtpted=encryptData($("#kycOtp").val());$.ajax({type:"POST",data:{updateKYCEncryptedOtp:otpEncrtpted},url:kycSubmitUrl,headers:{passphrase:passphrase},beforeSend:function(){$(".kycOtpSection #otp-msg").hide();var loaderHtml='<div class="overlay-loader"></div>';$("body").append(loaderHtml)},success:function(res){if(res=decryptResponse(res,passphrase),console.log("res ==>>>> ",res),$("body").find("div.overlay-loader").remove(),setRetryItemsValues(res),0==res.statusCode)$(".field-wrap.addon-card.dropbox-Block").css("display","none"),$(".email-update-form .updateVerifyJourney").css("display","none"),$(".email-update-form .digi-locker-verification").removeClass("hide-section");else if(111==res.statusCode)$(".quick-contact-page-header").css("display","none"),$(".email-update-form").css("margin-bottom","0px"),$(".field-wrap.addon-card.dropbox-Block").css("display","none"),$(".email-update-form .updateVerifyJourney").css("display","none"),$(".email-update-form .sr-closed-positive-less-30").removeClass("hide-section");else if(114==res.statusCode){$(".quick-contact-page-header").css("display","none"),$(".email-update-form").css("margin-bottom","0px"),$(".field-wrap.addon-card.dropbox-Block").css("display","none"),$(".email-update-form .updateVerifyJourney").css("display","none"),$(".email-update-form .sr-inprogress").removeClass("hide-section");var isEmail=$("#kycEmailJourney").val(),isMobile=$("#kycMobileJourney").val();1==isEmail||"true"==isEmail?$(".email-update-form .sr-inprogress-is-email").removeClass("hide-section"):$(".email-update-form .sr-inprogress-is-mobile").removeClass("hide-section")}else if(4==res.statusCode)$(".kycOtpSection #kycOtp").css("border-color","red"),$(".kycOtpSection #kycOtp").val(""),$(".kycOtpSection #kyc-otp-err").show().empty().text(res.message),$(".updateVerifyJourney .kycOtpSection .rmv").addClass("disabled");else if(1==res.statusCode||2==res.statusCode)$(".error-div .error-section").empty().text(res.message),$(".error-div").show(),$(".kycOtpSection #kycOtp").val(""),$(".kycOtpSection #kycOtp").prop("disabled",!0),$(".kycOtpSection #kyc-otp-resend-btn").css("pointer-events","none"),$(".kycOtpSection #cancelOTP").css("pointer-events","none"),$(".updateVerifyJourney .kycOtpSection .rmv").addClass("disabled");else if(112==res.statusCode)$(".quick-contact-page-header").css("display","none"),$(".field-wrap.addon-card.dropbox-Block").css("display","none"),$(".email-update-form .updateVerifyJourney").css("display","none"),$(".email-update-form .retry-screen-digi-locker-with-docupload").removeClass("hide-section");else if(115==res.statusCode)$(".quick-contact-page-header").css("display","none"),$(".field-wrap.addon-card.dropbox-Block").css("display","none"),$(".email-update-form .updateVerifyJourney").css("display","none"),$(".email-update-form .retry-screen-digi-locker-without-docupload").removeClass("hide-section");else if(113==res.statusCode){$(".quick-contact-page-header").css("display","none"),$(".field-wrap.addon-card.dropbox-Block").css("display","none"),$(".email-update-form .updateVerifyJourney").css("display","none"),$(".email-update-form .kyc-success-verbiage-statuscode113-screen").removeClass("hide-section");var isEmail=$("#kycEmailJourney").val(),isMobile=$("#kycMobileJourney").val();$("#_srPcd").text(res.srPCD),$("#_srNumber").text(res.srNumber),$("#_srNumber1").text(res.srNumber),$("#_srNumber2").text(res.srNumber),$("#_srNumber3").text(res.srNumber),$("#_srPcd1").text(res.srPCD),$("#_srPcd2").text(res.srPCD),$("#_srPcd3").text(res.srPCD),console.log("isEmail",isEmail,"isMobile",isMobile,"isAddonJourney",res.isAddonJourney),1!=isMobile&&"true"!=isMobile||1!=res.isAddonJourney?1!=isEmail&&"true"!=isEmail||1!=res.isAddonJourney?1!=isMobile&&"true"!=isMobile||0!=res.isAddonJourney?1!=isEmail&&"true"!=isEmail||0!=res.isAddonJourney||$(".email-update-form .statuscode113-screen-isEmailJourney").removeClass("hide-section"):$(".email-update-form .statuscode113-screen-isMobileJourney").removeClass("hide-section"):$(".email-update-form .statuscode113-screen-isAddOnJourney-isEmailJourney").removeClass("hide-section"):$(".email-update-form .statuscode113-screen-isAddOnJourney-isMobileJourney").removeClass("hide-section")}else 7==res.statusCode?($(".quick-contact-page-header").css("display","none"),$(".field-wrap.addon-card.dropbox-Block").css("display","none"),$(".email-update-form .updateVerifyJourney").css("display","none"),$(".email-update-form .kyc-retry-button-request-decline-screen").removeClass("hide-section")):116==res.statusCode?($(".quick-contact-page-header").css("display","none"),$(".field-wrap.addon-card.dropbox-Block").css("display","none"),$(".email-update-form .updateVerifyJourney").css("display","none"),$(".email-update-form .request-decline-screen-exception-handling").removeClass("hide-section")):($(".error-div").show(),$(".error-div .error-section").empty().text(res.message))},error:function(){console.log("service fail from kyc....."),$("body").find("div.overlay-loader").remove()}})}function submitKycManually(){$(".email-update-form .kycWorkflowJourney").removeClass("hide-section"),$(".email-update-form .digi-locker-verification").addClass("hide-section")}function submitKYCdoc(docRefId,docType){var contactUpdateForm=$("#contact-update-form-retail");$("<input>").attr({name:"docReferenceId",id:"docReferenceId",type:"hidden",value:docRefId}).appendTo(contactUpdateForm),$("<input>").attr({name:"docType",id:"docType",type:"hidden",value:docType}).appendTo(contactUpdateForm),contactUpdateForm.attr("action","/creditcards/app/myprofile/contact-change-revamp-submission"),contactUpdateForm.submit()}function enableGenerateOtpbtn(id){$("#"+id).is(":checked")?($("#generate-otp-intl").removeAttr("disabled"),$(".address-change-submit").removeAttr("disabled")):($("#generate-otp-intl").prop("disabled",!0),$(".address-change-submit").prop("disabled",!0))}function ucicViewMorecards(id){$(".ucic-moretext-2").slideToggle(),$("#"+id).text("View more"==$("#"+id).text()?"View less":"View more")}function addressValidatorSelectbox(event){$('#change-address-form:has(".ucic-check-block")').length>0&&($(".ucic-check-block").removeClass("hidden"),$("#address_ucicCheck").is(":checked")||$("#address_ucicCheck2").is(":checked")?$("#generate-otp-intl").removeAttr("disabled"):$("#multiAccDataFlag").exists()&&$("#generate-otp-intl").prop("disabled",!0)),console.log("addressValidatorSelectbox");var mannualnewzipcode=$("#residenceZipCode").parent().find(".trigger").html().trim(),mannualoldzipcode=$("#residenceZipCodeSpan").html().trim();if($("#multiAccDataFlag").exists()&&($(".ucic-check-block").removeClass("hidden"),$("#address_ucicCheck").is(":checked")||$("#address_ucicCheck2").is(":checked")?$("#generate-otp-intl").removeAttr("disabled"):$("#generate-otp-intl").prop("disabled",!0)),("residenceState"==event.target.id||"residenceCity"==event.target.id)&&($(".newVerbiage1").addClass("activeModifiedFlag"),$("#addressChange_Check").removeClass("onlyPinChangeAddr"),$("#addressChange_Check").addClass("removeOnlyPinChangeAddr")),"residenceZipCode"==event.target.id){var addressSwapFlag=$("#change-address-form #addressSwapFlag").val();0==addressSwapFlag||"false"==addressSwapFlag?($("#addressChange_Check").prop("checked",!1),$(".newVerbiage1, .nochangErrMsg").addClass("hidden"),$(".nochangErrMsg").addClass("hidden"),$("#AddressChangeProceedBtn .AddchangeProceedbtn").addClass("gray-btn e-sign-button"),console.log("outside mannualzipcode"),$("#addressChange_Check").addClass("errAddrConsentCheck"),mannualoldzipcode!=mannualnewzipcode&&(console.log("inside mannualzipcode"),$("#residenceAddressNonEdit").text().toLowerCase()===$("#residenceAddress").val().toLowerCase()&&$("#residenceAddressContdNonEdit").text().toLowerCase()===$("#residenceAddressContd").val().toLowerCase()&&($("#addressChange_Check").removeClass("errAddrConsentCheck"),$(".newVerbiage1").removeClass("activeModifiedFlag")),$("#addressChange_Check").hasClass("removeOnlyPinChangeAddr")?($("#addressChange_Check").removeClass("onlyPinChangeAddr"),$(".newVerbiage1").addClass("activeModifiedFlag")):$("#addressChange_Check").addClass("onlyPinChangeAddr"))):$(".newVerbiage1").addClass("hidden")}if("residenceState"==event.target.id||"residenceCity"==event.target.id||"residenceZipCode"==event.target.id){var addressSwapFlag=$("#change-address-form #addressSwapFlag").val();$("#addressChange_Check").prop("checked",!1),$("#AddressChangeProceedBtn .AddchangeProceedbtn").addClass("gray-btn e-sign-button"),$(".newVerbiage1, .nochangErrMsg").addClass("hidden"),(0==addressSwapFlag||"false"==addressSwapFlag)&&mannualoldzipcode!=mannualnewzipcode&&($("#addressChange_Check").removeClass("errAddrConsentCheck"),$(".nochangErrMsg").addClass("hidden"),$("#AddressChangeProceedBtn .AddchangeProceedbtn").addClass("gray-btn e-sign-button"))}}function addressValidatorOptionalbox(event){$('#change-address-form:has(".ucic-check-block")').length>0&&($(".ucic-check-block").removeClass("hidden"),$("#address_ucicCheck").is(":checked")||$("#address_ucicCheck2").is(":checked")?$("#generate-otp-intl").removeAttr("disabled"):$("#multiAccDataFlag").exists()&&$("#generate-otp-intl").prop("disabled",!0)),console.log("addressValidatorOptionalbox"),$("#multiAccDataFlag").exists()&&($(".ucic-check-block").removeClass("hidden"),$("#address_ucicCheck").is(":checked")||$("#address_ucicCheck2").is(":checked")?$("#generate-otp-intl").removeAttr("disabled"):$("#generate-otp-intl").prop("disabled",!0));var addressSwapFlag=($("#change-address-form #residenceAddress").val(),$("#change-address-form #residenceAddressContd").val(),$("#change-address-form #oldResidenceAddress").val(),$("#change-address-form #oldResidenceAddressContd").val(),$("#change-address-form #addressSwapFlag").val());("residenceAddress"==event.target.id||"residenceAddressContd"==event.target.id)&&($(".newVerbiage1").addClass("activeModifiedFlag").addClass("hidden"),0==addressSwapFlag||"false"==addressSwapFlag?$("#residenceAddressNonEdit").text().toLowerCase()===$("#residenceAddress").val().toLowerCase()&&$("#residenceAddressContdNonEdit").text().toLowerCase()===$("#residenceAddressContd").val().toLowerCase()?$("#addressChange_Check").hasClass("onlyPinChangeAddr")?($("#addressChange_Check").removeClass("errAddrConsentCheck"),$(".newVerbiage1").removeClass("activeModifiedFlag")):$("#addressChange_Check").addClass("errAddrConsentCheck"):$("#addressChange_Check").removeClass("errAddrConsentCheck"):$("#residenceAddressNonEdit").text().toLowerCase()===$("#residenceAddress").val().toLowerCase()&&$("#residenceAddressContdNonEdit").text().toLowerCase()===$("#residenceAddressContd").val().toLowerCase()&&$(".newVerbiage1").removeClass("activeModifiedFlag"),$("#addressChange_Check").prop("checked",!1),$(".nochangErrMsg").addClass("hidden"),$("#AddressChangeProceedBtn .AddchangeProceedbtn").addClass("gray-btn e-sign-button"))
}function OpenAddressUpdateSection(id){console.log("-----address update section id ",id),"personal-add-upd-link"==id&&(console.log("personal addr update link"),$("#personal-addess-edit").addClass("hidden"),$("#change-address-form").addClass("hidden"),$(".AddressChangeOptSec").removeClass("hidden"),$(".officialAddrGenOTPJrny1, .officialAddrGenOTPJrny2").addClass("hidden"),$("#AddressChangeProceedBtn").removeClass("hidden"),$(".newVerbiageforAddressChangeJourney").removeClass("hidden")),"office-add-upd-link"==id&&(console.log("official addr update link"),$("#official-addess-edit").removeClass("hidden"),$("#officialAddressOnSubmit").val(!0),$("#addressCTA").hide(),$(".officialAddrGenOTPJrny1, .officialAddrGenOTPJrny2").removeClass("hidden"),$(".AddressChangeOptSec").addClass("hidden"),$("#AddressChangeProceedBtn").addClass("hidden"),$(".newVerbiageforAddressChangeJourney").addClass("hidden")),"personal-address-lanline-update"==id&&(console.log("landline update link"),$("#addressCTA").css("display","none"),$("#AddressChangeProceedBtn").css("display","none"),$("#personal-addess-edit").addClass("hidden"),$("#official-addess-edit").addClass("hidden"),$("#officialAddressOnSubmit").val(!1),$(".officialAddrGenOTPJrny1, .officialAddrGenOTPJrny2").addClass("hidden"),$(".personalDetails").removeClass("hidden"),$("#AddressChangeProceedBtn").removeClass("hidden"),$(".newVerbiageforAddressChangeJourney").addClass("hidden"))}function emailValidatorOptionalbox(){$('#contact-update-form-retail:has(".ucic-email-check-block")').length>0&&0==$(".addon-card #addon-card").val()&&($(".ucic-email-check-block").removeClass("hidden"),$("#email_ucicCheck").is(":checked")&&"none"==$(".email-field-error").css("display")?$("#email-update-btn").removeClass("disabled"):$("#email-update-btn").addClass("disabled"))}function enablePrceedConatctChangebtn(id,proceedBtnId){$("#"+id).is(":checked")?("mobile-update-btn"==proceedBtnId&&"none"==$(".mobile-field-error").css("display")||"email-update-btn"==proceedBtnId&&"none"==$(".email-field-error").css("display"))&&$("#"+proceedBtnId).removeClass("disabled"):$("#"+proceedBtnId).addClass("disabled")}function mobileValidatorOptionalbox(){$('#contact-update-form-retail:has(".ucic-mobile-check-block")').length>0&&0==$(".addon-card #addon-card").val()&&($(".ucic-mobile-check-block").removeClass("hidden"),$("#mobile_ucicCheck").is(":checked")&&"none"==$(".mobile-field-error").css("display")?$("#mobile-update-btn").removeClass("disabled"):$("#mobile-update-btn").addClass("disabled"))}function mobilenomaskingCardClosure(value){var value=value.toString(),maskedSection=value.slice(0,-4),visibleSection=value.slice(-4),mobilemasked=maskedSection.replace(/./g,"X")+visibleSection;$(".credit-card-closure-section #mobilemaskedvalue").empty(),$(".credit-card-closure-section #mobilemaskedvalue").append(mobilemasked)}function emailmaskingCardClosure(value){const maskedTextLastPos=value.lastIndexOf("@"),emailIdLength=value.length;var value=value.toString(),visibleSection1=value.slice(0,2),maskedSection=value.slice(2,maskedTextLastPos),visibleSection2=value.slice(maskedTextLastPos,emailIdLength),emailmasked=visibleSection1+maskedSection.replace(/./g,"X")+visibleSection2;$(".credit-card-closure-section #emailmaskedvalue").empty(),$(".credit-card-closure-section #emailmaskedvalue").append(emailmasked)}function cardClosureGenOtp(otpGenURL){var selectedReason=$(".credit-card-closure-section .reason-closure .select-selected").text();$(".credit-card-closure-section #selectedReason").val(selectedReason);var url=window.location.href;if(setAnalyticsReasonandSR(url,selectedReason,"Confirm"),cardClosureResendOTPCount>5)return $(".credit-card-closure-section .error-div").css("display","block"),$(".credit-card-closure-section .error-section").empty(),void $(".credit-card-closure-section .error-section").append("You have exhausted the number of times you can ask for One Time Password (OTP) to be resent. Please re-start your journey by clicking on the Credit Card Closure.");var selectedCard=$("#selectedCardNo").val(),passphrase=$("#passphrase").val();$.ajax({type:"POST",data:JSON.stringify({selectedCardNo:selectedCard}),url:otpGenURL,contentType:"application/json; charset=utf-8",dataType:"json",headers:{passphrase:passphrase},beforeSend:function(){$("body").append(loaderHtml)},complete:function(){$("body").find("div.overlay-loader").remove()},success:function(response){response&&(response.success?($("#otpStep").css("display","block"),$(".credit-card-closure-section .gray-otp-wrapp").show(),$(".credit-card-closure-section .button-group").hide(),$(".credit-card-closure-section .error-div").css("display","none"),$(".credit-card-closure-section #otp-msg").css("display","none"),$(".credit-card-closure-section #terms_conditions").prop("disabled",!0)):response.alreadyExisting?($("#otpStep").css("display","block"),$(".credit-card-closure-section .button-group").hide(),$(".credit-card-closure-section .gray-otp-wrapp").show(),$(".credit-card-closure-section .error-div").css("display","none"),$(".credit-card-closure-section #otp-msg").css("display","none"),$(".credit-card-closure-section #terms_conditions").prop("disabled",!0)):($(".credit-card-closure-section .error-div").css("display","block"),$(".credit-card-closure-section .error-section").empty(),$(".credit-card-closure-section .error-section").append(response.message)))},error:function(){$("body").find("div.overlay-loader").remove()}})}function cardClosureReGenOtp(otpGenURL){window.location.href;if(setAnalyticsButton("Resend OTP"),!(cardClosureResendOTPCount>5)){var selectedCard=$("#selectedCardNo").val(),passphrase=$("#passphrase").val();$.ajax({type:"POST",data:JSON.stringify({selectedCardNo:selectedCard}),url:otpGenURL,contentType:"application/json; charset=utf-8",dataType:"json",headers:{passphrase:passphrase},beforeSend:function(){$(".credit-card-closure-section #card-closure-otp-err").css("display","none"),$(".credit-card-closure-section #cardClosureOtp").css("border","1px solid #dddddd"),$("body").append(loaderHtml)},complete:function(){$("body").find("div.overlay-loader").remove()},success:function(response){response&&(response.success?response.success&&($(".credit-card-closure-section .error-div").css("display","none"),$(".credit-card-closure-section #otp-msg").css("display","block"),$(".credit-card-closure-section #otp-msg").empty(),$(".credit-card-closure-section #otp-msg").append(response.message),cardClosureResendOTPCount+=1,0==response.resendEnabled&&($(".credit-card-closure-section #otp-msg").css("display","none"),$(".credit-card-closure-section .error-div").css("display","block"),$(".credit-card-closure-section .error-section").empty(),$(".credit-card-closure-section .error-section").append(response.message),$(".credit-card-closure-section #card-closure-otp-submit").css("color","#fff"),$(".credit-card-closure-section #card-closure-otp-submit").css("background-color","#ddd"),$(".credit-card-closure-section #card-closure-otp-submit").css("cursor","default"),$(".credit-card-closure-section #card-closure-resendotp").css("color","grey"),$(".credit-card-closure-section #card-closure-resendotp").css("pointer-events","none"),$(".credit-card-closure-section #cardClosureOtp").prop("readonly",!0),cardClosureResendOTPCount+=1)):($(".credit-card-closure-section .error-section").empty(),$(".credit-card-closure-section .error-section").append(response.message),$(".credit-card-closure-section .error-div").css("display","block"),$(".credit-card-closure-section #otp-msg").css("display","none")))},error:function(){$("body").find("div.overlay-loader").remove()}})}}function proceed(){if(setAnalyticsReasonAndButton("personalised_offer_credit_card_closure_Avail_Now_",$("#cardClosureReason").val().replace(/ /gi,"_"),window.location.href),$("#cardClosureReason").val()==reasonList[0]){var html='<div id="redirect-modal" class="card-closure-modal custom-card-closure-modal" style="display: block;"><div class="modal-content"><div class="modal-header"><h2 class="modal-title">You will be redirected to the Credit Limit Increase offer page.</h2></div><div class="button-block spaced mt-15"><a href="#" onClick="redirectToCli()" class="blue-btn small-width mb-0 mt-0" id="multicard-process-show">Okay</a><a href="javascript:void(0);" class="blue-btn small-width  gray-btn" onClick="cardClosureClosePopup3()">Cancel</a></div></div></div>';$("body").append(html)}else if("Billing Cycle Issues"==$("#cardClosureReason").val())$("#personalised-offer .number-count.numeric").hide(),$("#personalised-offer .number-count.check-img").show(),$(".offer-section").css("display","none"),$(".avail-offer-block").css("display","block"),$(".avail-offer-div").css("display","block"),$("#heading").html("Change Billing Cycle"),$("html, body").animate({scrollTop:$("#avail-offer-section").offset().top},1e3);else if($("#cardClosureReason").val()==reasonList[3])$("#personalised-offer .number-count.numeric").hide(),$("#personalised-offer .number-count.check-img").show(),$(".offer-section").css("display","none"),$(".avail-offer-block").css("display","block"),$(".other-fees-charges").css("display","block"),$("#heading").html("Request for Waiver of Fees or Charges"),$("html, body").animate({scrollTop:$("#personalised-offer").offset().top},1e3);else if($("#cardClosureReason").val()==reasonList[2]){$("body").append(loaderHtml);var selectedReason=$(".credit-card-closure-section .reason-closure .select-selected").text();$(".credit-card-closure-section #selectedReason").val("Annual Fee Related"),$("#credit-card-closure-form").attr("action","reason-selected"),$("#credit-card-closure-form").submit()}else if("Reward Points Related"==$("#cardClosureReason").val()){$("body").append(loaderHtml);var selectedReason=$(".credit-card-closure-section .reason-closure .select-selected").text();$(".credit-card-closure-section #selectedReason").val(selectedReason),$("#credit-card-closure-form").attr("action","reason-selected"),$("#credit-card-closure-form").submit()}else $("#cardClosureReason").val()==reasonList[5]&&($("body").append(loaderHtml),$(".credit-card-closure-section #selectedReason").val("Low Usage/Card Not Required"),$("#credit-card-closure-form").attr("action","reason-selected"),$("#credit-card-closure-form").submit())}function proceedOther(){if(setAnalyticsReasonAndButton("other_offer_credit_card_closure_Avail_Now_",$("#more-radio").val().trim().replace(/ /gi,"_"),window.location.href),$("#more-radio").val()==moreOffersMap[0]){var html='<div id="redirect-modal" class="card-closure-modal custom-card-closure-modal" style="display: block;"><div class="modal-content"><div class="modal-header"><h2 class="modal-title">You will be redirected to the Credit Limit Increase journey.</h2></div><div class="button-block spaced mt-15"><a href="#" onClick="redirectToCli()" class="blue-btn small-width mb-0 mt-0" id="multicard-process-show">Okay</a><a href="javascript:void(0);" class="blue-btn small-width  gray-btn" onClick="cardClosureClosePopup3()">Cancel</a></div></div></div>';$("body").append(html);{$(".credit-card-closure-section .reason-closure .select-selected").text()}$(".credit-card-closure-section #selectedReason").val("Low Credit Limit"),$("#retentionTool").val(retentionToolMap[0])}else if($("#more-radio").val()==moreOffersMap[1]){$("#retentionTool").val(retentionToolMap[1]),$("#other-offers .number-count.numeric").hide(),$("#other-offers .number-count.check-img").show(),$(".other-offers-section").css("display","none"),$(".avail-offer-block").css("display","block"),$(".avail-offer-div").css("display","block"),$("#heading").html("Change Billing Cycle"),"4"==$("#other-offers .number-count.numeric").html()&&$("#avail-offer-section  .number-count.numeric").html("5"),$("#personalised-offer").is(":visible")?$("html, body").animate({scrollTop:$("#personalised-offer").offset().top},1e3):$("html, body").animate({scrollTop:$("#other-offers").offset().top},1e3);{$(".credit-card-closure-section .reason-closure .select-selected").text()}$(".credit-card-closure-section #selectedReason").val("Billing Cycle Issues")}else if($("#more-radio").val()==moreOffersMap[3])$("#retentionTool").val(retentionToolMap[3]),$("#other-offers .number-count.numeric").hide(),$("#other-offers .number-count.check-img").show(),$(".other-offers-section").css("display","none"),$(".avail-offer-block").css("display","block"),$(".other-fees-charges").css("display","block"),$("#heading").html("Request for Waiver of Fees or Charges"),"4"==$("#other-offers .number-count.numeric").html()&&$("#avail-offer-section  .number-count.numeric").html("5"),$("#personalised-offer").is(":visible")?$("html, body").animate({scrollTop:$("#personalised-offer").offset().top},1e3):$("html, body").animate({scrollTop:$("#other-offers").offset().top},1e3);else if($("#more-radio").val()==moreOffersMap[2]||$("#more-radio").val()==moreOffersMap[4]){$("body").append(loaderHtml);{$(".credit-card-closure-section .reason-closure .select-selected").text()}"Annual Fee Waiver"==$("#more-radio").val()?($("#retentionTool").val(retentionToolMap[2]),$(".credit-card-closure-section #selectedReason").val("Annual Fee Related")):($("#retentionTool").val(retentionToolMap[4]),$(".credit-card-closure-section #selectedReason").val("Reward Points Related")),$("#credit-card-closure-form").attr("action","reason-selected"),$("#credit-card-closure-form").submit()}else"Card Features &amp; Offers"==$("#more-radio").val()&&($("#retentionTool").val(retentionToolMap[5]),$("body").append(loaderHtml),$(".credit-card-closure-section #selectedReason").val("Low Usage/Card Not Required"),$("#credit-card-closure-form").attr("action","reason-selected"),$("#credit-card-closure-form").submit())}function addonRedirect(){$("#retentionTool").val("Card Features & Offers"),$("#retentionTool").val("add-on"),$("body").append(loaderHtml);var selectedReason=$(".credit-card-closure-section .reason-closure .select-selected").text();$(".credit-card-closure-section #selectedReason").val(selectedReason),$("#credit-card-closure-form").attr("action","reason-selected"),$("#credit-card-closure-form").submit()}function redirectToCli(){setAnalyticsReasonAndButton("credit_card_closure_Okay_",$("#cardClosureReason").val().replace(/ /gi,"_"),window.location.href),$("body").append(loaderHtml);$(".credit-card-closure-section .reason-closure .select-selected").text();$(".credit-card-closure-section #selectedReason").val("Low Credit Limit"),$("#credit-card-closure-form").attr("action","reason-selected"),$("#credit-card-closure-form").submit()}function cardClosureClosePopup1(){$("#card-clsr-tab1").css("pointer-events","none"),$(".select-reason-wrapp .mumer-heading").css("pointer-events","none"),$("#personalised-offer .mumer-heading").css("pointer-events","none"),$("#other-offers .mumer-heading").css("pointer-events","none"),$("#addon-card-section .mumer-heading").css("pointer-events","none"),$("#selectedContactDate").val($("#contact-modal #contact-date").val()),$("#selectedContactTime").val($("#contact-modal #time-select-select").val()),$("#selectedContactLanguage").val($("#contact-modal #language-select-select").val());var date=$("#contact-date").val();date=date.split("-"),date=date[2]+"/"+date[1]+"/"+date[0],$("#callBackDate").val(date+" "+$("#actualTimeToReport").val());var errorHTML=[];if(""==$("#selectedContactDate").val()||""==$("#selectedContactTime").val()||""==$("#selectedContactLanguage").val()){""==$("#selectedContactDate").val()&&($("#contact-modal #contact-date").css("border","1px solid red"),errorHTML.push("Select Date")),""==$("#selectedContactTime").val()&&($("#contact-modal #time-select").css("border","1px solid red"),errorHTML.push(" Select Time")),""==$("#selectedContactLanguage").val()&&($("#contact-modal #language-select").css("border","1px solid red"),errorHTML.push(" Select Language"));var error=errorHTML.toString();return $("#error-verbiage-popup").html(error),void $("#error-verbiage-popup").css("display","block")}$("body").find("div.card-closure-modal").remove();var ctxPath=$("#ctxPath").val(),url=ctxPath+"/app/requests/send-otp-card-closure";cardClosureGenOtp(url)}function cardClosureClosePopup2(){$("#card-clsr-tab1").css("pointer-events","none"),$(".select-reason-wrapp .mumer-heading").css("pointer-events","none"),$("#personalised-offer .mumer-heading").css("pointer-events","none"),$("#other-offers .mumer-heading").css("pointer-events","none"),$("#addon-card-section .mumer-heading").css("pointer-events","none"),$("body").find("div.card-closure-modal").remove();var ctxPath=$("#ctxPath").val(),url=ctxPath+"/app/requests/send-otp-card-closure";cardClosureGenOtp(url)}function cardClosureClosePopup3(){setAnalyticsReasonAndButton("credit_card_closure_Cancel_",$("#cardClosureReason").val().replace(/ /gi,"_"),window.location.href),$("body").find("div.card-closure-modal").remove()}function cardClosureOtpSubmission(){if(setAnalyticsReasonAndButton("otp_confirm_credit_card_closure_Submit_",$("#cardClosureReason").val().replace(/ /gi,"_"),window.location.href),submit=!0,!(cardClosureResendOTPCount>5)){sessionStorage.setItem("maskedCard",$("#clsr-show-val").html().slice($("#clsr-show-val").html().indexOf("X"),$("#clsr-show-val").html().length+1)),$(".credit-card-closure-section #terms_conditions").prop("disabled",!1);var otpValue=$(".credit-card-closure-section #cardClosureOtp").val();otpValue&&otpValue.length>0?($("body").append(loaderHtml),otpPassed=encryptData(otpValue),$(".credit-card-closure-section #cardClosureOtp").val(otpPassed),$("#credit-card-closure-form").submit(),$(".credit-card-closure-section #cardClosureOtp").val(otpValue)):$(".credit-card-closure-section #cardClosureOtp").css("border","1px solid red")}}function redirect(){window.location.href.indexOf("tata")>-1?window.open("https://www.tatacard.com/tata-en/personal/offers.page","_blank"):window.open("https://www.sbicard.com/offers.page","_blank")}function sendAnalytics(value){"addon"==value?setAnalyticsReasonAndButton("benefits_of_add_oncards_credit_card_closure_Continue_using_card_",$("#cardClosureReason").val().replace(/ /gi,"_"),window.location.href):setAnalyticsReasonAndButton("benefits_of_add_oncards_credit_card_closure_Cancel_"+$("#cardClosureReason").val().replace(/ /gi,"_"),window.location.href)}function cancelAnalytics(){setAnalyticsReasonAndButton("confirm_credit_card_closure_Cancel_",$("#cardClosureReason").val().replace(/ /gi,"_"),window.location.href)}function contactPopup(){setAnalyticsReasonAndButton("confirm_credit_card_closure_Confirm_",$("#cardClosureReason").val().replace(/ /gi,"_"),window.location.href);var popupHtml='<div id="contact-modal" class="card-closure-modal custom-card-closure-modal" style="display: block;" onclick="closeDropdowns(event)"><div class="modal-content-connect"><div class="modal-header"><h2 class="modal-title">We would like to connect with you</h2><p>Please share your preferred time and language for us to connect with you.</p></div><div class="close" onclick="cardClosureClosePopup2()"></div><section class="content text-center"><form class="connect-modal-form"><div class="form-group align-items-center mt-0"><div class="col-md-12"><div class="form-control mb-10"><input type="date" placeholder="dd/mm/yyyy" id="contact-date" autocomplete="off" class="form-control connect-form-input datepickclosure" onClick="setMinMax()" onChange="changeDateDivText()" value=""><div class="overlay-text-date">dd/mm/yyyy</div></div></div><div class="col-md-12"><div class="form-control mb-10"><div class="form-control custom-select custom-select-reusable" id="time-select"><input type="hidden" id="time-select-select" name="time-select-select" value=""/><div class="select-selected" id="open-close-time-list" onClick="hideUnhideOptions()">Select Time Slot<span class="up-arrow-time"></span></div><div class="select-items-time" id="time-select-list"><div data-value="8amto10am" data-actual="08:00:00 AM" onClick="selectTime(this)">8:00AM - 10:00AM</div><div data-value="10amto12pm" data-actual="10:00:00 AM" onClick="selectTime(this)">10:00AM - 12:00PM</div><div data-value="12pmto2pm" data-actual="12:00:00 PM" onClick="selectTime(this)">12:00PM - 02:00PM</div><div data-value="2pmto4pm" data-actual="14:00:00 PM" onClick="selectTime(this)">02:00PM - 04:00PM</div><div data-value="4pmto6:30pm" data-actual="16:00:00 PM" onClick="selectTime(this)">04:00PM - 06:30PM</div></div></div></div></div><div class="col-md-12"><div class="form-control mb-10"><div class="form-control custom-select custom-select-reusable" id="language-select"><input type="hidden" id="language-select-select" name="language-select-select" value=""/><div class="select-selected" id="open-close-language-list" onClick="hideUnhideOptionsLanguage()">Select Language<span class="up-arrow-language"></span></div><ul class="select-items-language" id="language-select-list"><li data-value="hindi" class="select-items-language-option" onClick="selectLanguage(this)">Hindi</li><li data-value="english" class="select-items-language-option" onClick="selectLanguage(this)">English</li><li data-value="tamil" class="select-items-language-option" onClick="selectLanguage(this)">Tamil</li><li data-value="telugu" class="select-items-language-option" onClick="selectLanguage(this)">Telugu</li><li data-value="kannada" class="select-items-language-option" onClick="selectLanguage(this)">Kannada</li><li data-value="malayalam" class="select-items-language-option" onClick="selectLanguage(this)">Malayalam</li><li data-value="gujrati" class="select-items-language-option" onClick="selectLanguage(this)">Gujrati</li><li data-value="marathi" class="select-items-language-option" onClick="selectLanguage(this)">Marathi</li><li data-value="bengali" class="select-items-language-option" onClick="selectLanguage(this)">Bengali</li></ul></div></div></div><div class="error-verbiage-popup" id="error-verbiage-popup"></div><div class="button-block spaced mt-15" style="margin-top:30px"><a href="#" onclick="cardClosureClosePopup1()" class="blue-btn small-width mb-0 mt-0" id="multicard-process-show">Confirm</a></div><div class="blue-box-contact-popup-cr" style="padding: 10px 10px"><p style="font-size: 10px"><span style="font-weight: 600">Note:</span> We will try to reach you on your preferred time or at most within 7 working days</p></div></form></section></div></div>';$("body").append(popupHtml)}function setMinMax(){var minDate=new Date,endHour=new Date;if(endHour.setHours(18,30,0),minDate>=endHour){var newDate=minDate.getDate()+1;minDate.setDate(newDate)}minDate=minDate.toISOString().slice(0,10);var maxDate=new Date,newDate=maxDate.getDate()+2;maxDate.setDate(newDate),maxDate=maxDate.toISOString().slice(0,10),$("#contact-date").attr("min",minDate),$("#contact-date").attr("max",maxDate),$("#contact-modal #contact-date").css("border","1px solid #cdcbcb"),$("#error-verbiage-popup").html(""),$("#error-verbiage-popup").css("display","none")}function changeDateDivText(){if($("#contact-date").val()){var date=$("#contact-date").val();date=date.split("-"),date=date[2]+"/"+date[1]+"/"+date[0],$(".overlay-text-date").html(date);var span='<span class="up-arrow-language"></span>';$("#open-close-time-list").html("Select Time Slot"+span),$("#time-select-select").val("")}else $(".overlay-text-date").html("dd/mm/yyyy")}function closeDropdowns(e){"contact-date"!=e.target.id&&""==$("#contact-date").val()&&($("#contact-date").attr("min",""),$("#contact-date").attr("max",""));var container1=$("div.card-closure-modal #time-select");container1.is(e.target)||0!==container1.has(e.target).length||($("div.card-closure-modal .select-items-time").css("display","none"),$("div.card-closure-modal #time-select .up-arrow-time").css("border-color","#666 transparent transparent transparent"),$("div.card-closure-modal #time-select .up-arrow-time").css("margin-top","7px"),timeopen=!1);var container2=$("div.card-closure-modal #language-select");container2.is(e.target)||0!==container2.has(e.target).length||($("div.card-closure-modal .select-items-language").css("display","none"),$("div.card-closure-modal #language-select .up-arrow-language").css("border-color","#666 transparent transparent transparent"),$("div.card-closure-modal #language-select .up-arrow-language").css("margin-top","7px"),languageopen=!1)}function selectTime(item){var span='<span class="up-arrow-time"></span>';$("div.card-closure-modal #open-close-time-list").html($(item).html()+span),$("div.card-closure-modal #time-select-select").val($(item).data("value")),$("#actualTimeToReport").val($(item).data("actual")),$("div.card-closure-modal .select-items-time").css("display","none"),$("div.card-closure-modal #time-select .select-selected").removeClass("select-arrow-active"),$("div.card-closure-modal #time-select .up-arrow-time").css("border-color","#666 transparent transparent transparent"),$("div.card-closure-modal #time-select .up-arrow-time").css("margin-top","7px"),$("div.card-closure-modal .select-items-language").css("display","none"),languageopen=!1,timeopen=!1}function hideUnhideOptions(){if($("#error-verbiage-popup").html(""),$("#error-verbiage-popup").css("display","none"),$("#contact-modal #time-select").css("border","1px solid #cdcbcb"),timeopen)$("div.card-closure-modal #time-select .up-arrow-time").css("border-color","#666 transparent transparent transparent"),$("div.card-closure-modal #time-select .up-arrow-time").css("margin-top","7px"),$("div.card-closure-modal #time-select .select-selected").removeClass("select-arrow-active"),$("div.card-closure-modal .select-items-time").css("display","none"),timeopen=!1;else{if($("#contact-date").val()){var today=new Date,date=$("#contact-date").val();date=date.split("-");var todayDate=today.toISOString().slice(8,10);if(date[2]==todayDate){$("#time-select-list").html("");var timeList=["8,0,0","10,0,0","12,0,0","14,0,0","16,0,0","18,30,0"],timeListHTML=['<div data-value="8amto10am" data-actual="08:00:00 AM" onClick="selectTime(this)">8:00AM - 10:00AM</div>','<div data-value="10amto12pm" data-actual="10:00:00 AM" onClick="selectTime(this)">10:00AM - 12:00PM</div>','<div data-value="12pmto2pm" data-actual="12:00:00 PM" onClick="selectTime(this)">12:00PM - 02:00PM</div>','<div data-value="2pmto4pm" data-actual="14:00:00 PM" onClick="selectTime(this)">02:00PM - 04:00PM</div>','<div data-value="4pmto6:30pm" data-actual="16:00:00 PM" onClick="selectTime(this)">04:00PM - 06:30PM</div>'],listHTML="",i=1;for(i;i<timeList.length;i++){var endHour=new Date,time=timeList[i].split(",");if(endHour.setHours(Number(time[0]),Number(time[1]),Number(time[2])),endHour>today){console.log("conditon matched");break}}for(i-=1;i<timeListHTML.length;i++)listHTML+=timeListHTML[i];$("#time-select-list").html(listHTML)}else $("#time-select-list").html('<div data-value="8amto10am" data-actual="08:00:00 AM" onClick="selectTime(this)">8:00AM - 10:00AM</div><div data-value="10amto12pm" data-actual="10:00:00 AM" onClick="selectTime(this)">10:00AM - 12:00PM</div><div data-value="12pmto2pm" data-actual="12:00:00 PM" onClick="selectTime(this)">12:00PM - 02:00PM</div><div data-value="2pmto4pm" data-actual="14:00:00 PM" onClick="selectTime(this)">02:00PM - 04:00PM</div><div data-value="4pmto6:30pm" data-actual="16:00:00 PM" onClick="selectTime(this)">04:00PM - 06:30PM</div>')}$("div.card-closure-modal .select-items-time").css("display","block"),$("div.card-closure-modal .select-items-language").css("display","none"),$("div.card-closure-modal #time-select .up-arrow-time").css("border-color","transparent transparent #666 transparent"),$("div.card-closure-modal #time-select .up-arrow-time").css("margin-top","0px"),languageopen=!1,timeopen=!0}}function selectLanguage(item){var span='<span class="up-arrow-language"></span>';$("div.card-closure-modal #open-close-language-list").html($(item).html()+span),$("div.card-closure-modal #language-select-select").val($(item).data("value")),$("div.card-closure-modal .select-items-language").css("display","none"),$("div.card-closure-modal #language-select .select-selected").removeClass("select-arrow-active"),$("div.card-closure-modal #language-select .up-arrow-language").css("border-color","#666 transparent transparent transparent"),$("div.card-closure-modal #language-select .up-arrow-language").css("margin-top","7px"),languageopen=!1}function hideUnhideOptionsLanguage(){$("#error-verbiage-popup").html(""),$("#error-verbiage-popup").css("display","none"),$("#contact-modal #language-select").css("border","1px solid #cdcbcb"),languageopen?($("div.card-closure-modal #language-select .up-arrow-language").css("border-color","#666 transparent transparent transparent"),$("div.card-closure-modal #language-select .up-arrow-language").css("margin-top","7px"),$("div.card-closure-modal #language-select .select-selected").removeClass("select-arrow-active"),$("div.card-closure-modal .select-items-language").css("display","none"),languageopen=!1):($("div.card-closure-modal #language-select .up-arrow-language").css("border-color","transparent transparent #666 transparent"),$("div.card-closure-modal #language-select .up-arrow-language").css("margin-top","0px"),$("div.card-closure-modal .select-items-language").css("display","block"),languageopen=!0)}function toNextSection(){setAnalyticsReasonAndButton("personalised_offer_credit_card_closure_Skip_",$("#cardClosureReason").val().replace(/ /gi,"_"),window.location.href),$(".offer-section").css("display","none"),$("#personalised-offer .number-count.numeric").hide(),$("#personalised-offer .number-count.check-img").show(),$(".other-offers-wrapp").css("display","block"),$(".other-offers-section").css("display","block"),$("#usage-card-section .number-count.numeric").hide(),$("#usage-card-section .number-count.check-img").show(),$(".addon-benefit-section").css("display","none"),$(".low-card-usage-section").css("display","none"),$("html, body").animate({scrollTop:$("#other-offers").offset().top},1e3)}function toConfirm(){setAnalyticsReasonAndButton("other_offer_credit_card_closure_Skip_",$("#cardClosureReason").val().replace(/ /gi,"_"),window.location.href),$("#submit-section .number-count.numeric").html($("#personalised-offer").is(":visible")?"5":"4"),"p-type"!=$("#isRadioSelected").val()?$("#addon-note").css("display","none"):$("#addon-note").css("display","block"),$("#other-offers .number-count.numeric").hide(),$("#other-offers .number-count.check-img").show(),$(".consent-wrapp").css("display","block"),$(".other-offers-section").hide(),$("#submit-section .collapse-content.reinstatement-content-wrapp.reason-closure").show(),$(".select-reson-cnt.terms-and-condition-section").show(),$("#confirm-card-number").html($("#clsr-show-val").val()),$("#confirm-card-number").html($("#clsr-show-val").html().slice($("#clsr-show-val").html().indexOf("X"),$("#clsr-show-val").html().length+1)),$("#confirm-closure-reason").html($("#cardClosureReason").val()),"No Offers"==$("#cardClosureReason").val()&&$("#submit-section .number-count.numeric").html("4"),$("html, body").animate({scrollTop:$("#submit-section").offset().top},1e3)}function toConfirmSection(){setAnalyticsReasonAndButton("credit_card_closure_Skip_",$("#cardClosureReason").val().trim().replace(/ /gi,"_"),window.location.href),"p-type"!=$("#isRadioSelected").val()?$("#addon-note").css("display","none"):$("#addon-note").css("display","block"),$("#addon-card-section .number-count.numeric").hide(),$("#addon-card-section .number-count.check-img").show(),$(".consent-wrapp").css("display","block"),$(".addon-benefit-section").hide(),$("#submit-section .collapse-content.reinstatement-content-wrapp.reason-closure").show(),$(".select-reson-cnt.terms-and-condition-section").show(),$("#confirm-card-number").html($("#clsr-show-val").html().slice($("#clsr-show-val").html().indexOf("X"),$("#clsr-show-val").html().length+1)),$("#confirm-closure-reason").html($("#cardClosureReason").val()),$("#submit-section .number-count.numeric").html("4"),$("html, body").animate({scrollTop:$("#submit-section").offset().top},1e3)}function uncheckPrevious(count){count!=previousCount&&($("#offers-radio-button-"+previousCount).css("display","none"),$("#card-label-"+previousCount).removeClass("card-label-checked")),"Card Features &amp; Offers"==$("#offer-head-text-"+previousCount).html()&&$("#details-block").css("display","none"),previousCount=count
}function alpha(e){var k;return k=e.keyCode,k>64&&91>k||k>96&&123>k||8==k||32==k||k>=48&&57>=k}function checkOffersRadio(count){$("#avail-offer-others").removeClass("disabled"),$("#more-radio").val($("#offer-head-text-"+count).html()),count!=previousCount&&($("#card-label-"+count).addClass("card-label-checked"),$("#offers-radio-button-"+count).css("display","block")),"Card Features &amp; Offers"==$("#more-radio").val()&&cardFeaturesCall("others")}function submitForBillingCycle(){setAnalyticsReasonAndButton("change_billing_cycle_credit_card_closure_Confirm_",$("#billing-cycle-date").val().replace(" ","_"),window.location.href),$("body").append(loaderHtml);$(".credit-card-closure-section .reason-closure .select-selected").text();$(".credit-card-closure-section #selectedReason").val("Billing Cycle Issues"),$("#credit-card-closure-form").attr("action","reason-selected"),$("#credit-card-closure-form").submit()}function submitForFeeReversal(){setAnalyticsReasonAndButton("request_for_fee_waiver_credit_card_closure_Submit_",$("#otherfeesdropdown").val().replace(" ","_"),window.location.href),$("body").append(loaderHtml);$(".credit-card-closure-section .reason-closure .select-selected").text();$(".credit-card-closure-section #selectedReason").val("Other Fees & Charges"),$("#credit-card-closure-form").attr("action","reason-selected"),$("#credit-card-closure-form").submit()}function decryptForCardClosure(encryptedText){var passphrase="BAgtAGHLCb",salt1=CryptoJS.enc.Hex.parse(encryptedText.substr(0,32)),iv1=CryptoJS.enc.Hex.parse(encryptedText.substr(32,32)),encrypted1=encryptedText.substring(64),key1=CryptoJS.PBKDF2(passphrase,salt1,{keySize:4,iterations:100}),decrypted=CryptoJS.AES.decrypt(encrypted1,key1,{iv:iv1,padding:CryptoJS.pad.Pkcs7,mode:CryptoJS.mode.CBC}),decryptedDataPassed=decrypted.toString(CryptoJS.enc.Utf8);return decryptedDataPassed}function callForFees(name){var context=$("#ctxPath").val(),feeReversalUrl=context+"/app/requests/fee-waiver-selected";$.ajax({type:"POST",url:feeReversalUrl,data:JSON.stringify({feename:name}),dataType:"json",contentType:"application/json; charset=utf-8",beforeSend:function(){$("body").append(loaderHtml)},complete:function(){$("body").find("div.overlay-loader").remove()},success:function(response){if(response)if(response.success){var feesList=response.data;"0"!=feesList.amount?($("#fees-text").html("A fee of <em class='WebRupee'>Rs.</em>"+feesList.amount+" was levied on your account on "+feesList.leviedDate),$("#other-fees-charges-confirm").removeClass("disabled"),$("#fees-text").css("color","#666")):($("#fees-text").html("This fee has not been levied on your card."),$("#fees-text").css("color","red"),$("#other-fees-charges-confirm").addClass("disabled")),$("#fees-text").removeClass("hidden")}else $("#fees-text").html("This fee has not been levied on your card."),$("#fees-text").css("color","red"),$("#other-fees-charges-confirm").addClass("disabled"),$("#fees-text").removeClass("hidden");else $("#fees-text").html("This fee has not been levied on your card."),$("#fees-text").css("color","red"),$("#other-fees-charges-confirm").addClass("disabled"),$("#fees-text").removeClass("hidden")},error:function(){$("body").find("div.overlay-loader").remove(),$("#fees-text").html("This fee has not been levied on your card."),$("#fees-text").css("color","red"),$("#other-fees-charges-confirm").addClass("disabled"),$("#fees-text").removeClass("hidden")}})}function cardFeaturesCall(source){var context=$("#ctxPath").val(),cardNumberToSend=$("#selectedCardNo").val(),featuresUrl=context+"/app/requests/card-features-selected";$.ajax({type:"POST",url:featuresUrl,dataType:"json",contentType:"application/json; charset=utf-8",data:JSON.stringify({cardNumber:cardNumberToSend}),beforeSend:function(){$("body").append(loaderHtml)},complete:function(){$("body").find("div.overlay-loader").remove()},success:function(response){if(response){if(response.success){for(var featuresList=response.data,html="",i=0;i<featuresList.description.length;i++)html+=featuresList.description[i];"others"==source?($("#details").html(html),$("#details-block").css("display","block"),$("#cardDisplayNameDetails").html(featuresList.cardDisplayName)):($("#cardDisplayName").html(featuresList.cardDisplayName),$(".usage-card-section").css("display","block"),$(".low-card-usage-section").css("display","block"),$("#features-detail-list").html(html))}}else $(".usage-card-section").css("display","block"),$(".low-card-usage-section").css("display","block")},error:function(){$("body").find("div.overlay-loader").remove(),$(".usage-card-section").css("display","block")}})}function redirectToOffers(){window.location.href.indexOf("tata")>-1?window.open("https://www.tatacard.com/tata-en/personal/offers.page","_blank"):window.open("https://www.sbicard.com/offers.page","_blank")}function activateNow(){return AddOverlayLoader(),!0}function submitActivationOTP(){return $(".campaign-otp").val()&&0!==$(".campaign-otp").val().length?(AddOverlayLoader(),!0):(event.preventDefault(),$("#activation-otp").addClass("error"),!1)}function resendActivationOTP(resendURL){$(".campaign-otp-msg").hide(),$("#resend-campaign-otp").addClass("inactive-link"),$.ajax({type:"GET",url:resendURL,success:function(response){if(console.log("Response ====>",response),response){console.log("Response ====>",response);var message=$("#resend-otp-msg-failure").html();"success"===response.split("|")[0]?($("#resend-campaign-otp").removeClass("inactive-link"),$("#resend-otp-msg").show()):"resendNotAllowed"===response.split("|")[0]?(void 0!=response.split("|")[1]&&""!=response.split("|")[1]&&response.split("|")[1]?message=response.split("|")[1]:!0,$("#resend-campaign-otp").addClass("inactive-link"),$("#campaign-otp-resend-not-allowed").html(message).show()):($("#resend-campaign-otp").removeClass("inactive-link"),$("#resend-otp-msg-failure").show())}else $("#resend-campaign-otp").removeClass("inactive-link"),$("#resend-otp-msg-failure").show()},error:function(){$("#resend-campaign-otp").removeClass("inactive-link"),$("#resend-otp-msg-failure").show()}})}function openDigiLockerJourney(){console.log("%c Digi locker journey open from try again journey...","color:red");var clientId=$("#digilockerClientId").val();console.log("clientId",clientId);var URL="https://api.digitallocker.gov.in/public/oauth2/1/authorize?response_type=code&client_id="+clientId+"&rediect_uri=1&state=1";redirectToDigilocker(URL)}function setRetryItemsValues(res){res.itemId&&($("#retryItemID").val(res.itemId),$("#proceed_to_digilocker #retryItemIDForm").val(res.itemId),sessionStorage.setItem("retryItemIDForm",res.itemId)),res.itemKey&&($("#retryItemKey").val(res.itemKey),$("#proceed_to_digilocker #retryItemKeyForm").val(res.itemKey),sessionStorage.setItem("retryItemKeyForm",res.itemKey)),res.itemSeq&&($("#retryItemSeq").val(res.itemSeq),$("#proceed_to_digilocker #retryItemSeqForm").val(res.itemSeq),sessionStorage.setItem("retryItemSeqForm",res.itemSeq)),res.orderId&&($("#retryOrderId").val(res.orderId),$("#proceed_to_digilocker #retryOrderIdForm").val(res.orderId),sessionStorage.setItem("retryOrderIdForm",res.orderId)),res.srPCD&&($("#srPCD").val(res.srPCD),$("#proceed_to_digilocker #srPCDForm").val(res.srPCD),sessionStorage.setItem("srPCDForm",res.srPCD)),res.srNumber&&($("#srNumber").val(res.srNumber),$("#proceed_to_digilocker #srNumberForm").val(res.srNumber),$("#tracksr_submit_form #srNumberForm").val(res.srNumber),sessionStorage.setItem("srNumberForm",res.srNumber)),res.isAddonJourney&&$(".isAddOnJourney").val(res.isAddonJourney)}function onclickRetryButton(){retryAttempCount++,console.log("%c retryAttempCount ","color:red",retryAttempCount),sessionStorage.setItem("retryAttempCount",retryAttempCount);var retryStatus=$("#RetryStatus").val(),retryItemID=null,retryItemKey=null,retryItemSeq=null,retryOrderId=null,authCode=null,submissionResponse=$("#submissionResponseForm").val(),emailSrNumber=$("#EmailSrNumber").val(),mobileSrNumber=$("#MobileSrNumber").val(),isMobileJourney=$("#isMobileJourney").val(),isEmailJourney=$("#isEmailJourney").val(),srNumber=$("#srNumberForm").val();if(console.log("retryAttempCount from session ",sessionStorage.getItem("retryAttempCount")),"Retry with DL"==retryStatus&&(authCode=sessionStorage.getItem("kycDigiLockerAuthCode")),""!=$("#retryItemID").val()&&null!=$("#retryItemID").val()&&(retryItemID=$("#retryItemID").val()),""!=$("#retryItemKey").val()&&null!=$("#retryItemKey").val()&&(retryItemKey=$("#retryItemKey").val()),""!=$("#retryItemSeq").val()&&null!=$("#retryItemSeq").val()&&(retryItemSeq=$("#retryItemSeq").val()),""!=$("#retryOrderId").val()&&null!=$("#retryOrderId").val()&&(retryOrderId=$("#retryOrderId").val()),sessionStorage.getItem("retryAttempCount")>3)$(".quick-contact-page-header").css("display","none"),$(".field-wrap.addon-card.dropbox-Block").css("display","none"),$(".email-update-form .updateVerifyJourney").css("display","none"),$(".email-update-form .retry-screen-digi-locker-with-docupload").css("display","none"),$(".email-update-form .retry-screen-digi-locker-without-docupload").css("display","none"),$(".email-update-form .retry-screen-digi-locker-with-docupload").addClass("display","none"),$(".email-update-form .retry-screen-digi-locker-without-docupload").addClass("display","none"),$(".email-update-form .kyc-retry-button-request-decline-screen").removeClass("hide-section"),sessionStorage.setItem("retryAttempCount",0);else{$("#proceed_to_digilocker #submissionResponse").val(submissionResponse),$("#proceed_to_digilocker #retryOrderIdForm").val(retryOrderId),$("#proceed_to_digilocker #retryItemIDForm").val(retryItemID),$("#proceed_to_digilocker #retryItemKeyForm").val(retryItemKey),$("#proceed_to_digilocker #retryItemSeqForm").val(retryItemSeq),$("#proceed_to_digilocker #digiRetryCodeForm").val(authCode),$("#proceed_to_digilocker #emailSrNumberForm").val(emailSrNumber),$("#proceed_to_digilocker #mobileSrNumberForm").val(mobileSrNumber),$("#proceed_to_digilocker #isMobileJourneyForm").val(isMobileJourney),$("#proceed_to_digilocker #isEmailJourneyForm").val(isEmailJourney),$("#proceed_to_digilocker #srNumberForm").val(srNumber);var emailUpdateForm=$("#contact-update-form-retail");emailUpdateForm.removeAttr("action");var digiContactUpdateForm=$("#proceed_to_digilocker");digiContactUpdateForm.removeAttr("action"),digiContactUpdateForm.attr("action","/creditcards/app/myprofile/retry-status");var loaderHtml='<div class="overlay-loader"></div>';$("body").append(loaderHtml),digiContactUpdateForm.submit()}}function onclickSubmitKyc(status){console.log("status",status),"retail"==status?($(".kyc-retry-button-request-decline-screen").addClass("hide-section"),$(".retry-screen-digi-locker-with-docupload").addClass("hide-section"),$(".retry-with-digi-locker").addClass("hide-section"),$(".email-update-form .kycWorkflowJourney").removeClass("hide-section")):"noDocument"==status?($(".retry-screen-digi-locker-with-no-document").addClass("hide-section"),$(".email-update-form .kycWorkflowJourney").removeClass("hide-section")):"manualUpload"==status&&($(".retry-screen-digi-locker-with-manual-upload").addClass("hide-section"),$(".email-update-form .kycWorkflowJourney").removeClass("hide-section"))}function onclickTryAgainButton(){sessionStorage.removeItem("tryAgainStatus"),sessionStorage.setItem("tryAgainStatus",!0),openDigiLockerJourney()}function enableAddrUploadSubmit(id){$("#"+id).is(":checked")?(console.log("checked"),$(".add-update-submit-button").removeAttr("disabled"),$(".add-update-submit-button").css({"background-color":"rgb(0, 149, 217)",color:"#ffffff","background-image":""})):(console.log("checked not"),$(".add-update-submit-button").attr("disabled"),$(".add-update-submit-button").css({"background-color":"#E0E0E0",color:"#000000","background-image":"linear-gradient(0deg, rgba(255, 255, 255, 0) 0, rgba(255, 255, 255, 0) 50%, rgba(255, 255, 255, .5) 51%)"}))}function kycAdharConsentSubmit(id){$("#"+id).is(":checked")?(console.log("check2 kyc"),$("#kyc-submit-button").removeAttr("disabled"),isKYCSubmitAllowed()&&$("#kyc-submit-button").removeClass("secondary kyc-inactive-button").addClass("primary")):(console.log("uncheck2 kyc"),$("#kyc-submit-button").prop("disabled",!0),$("#kyc-submit-button").addClass("secondary kyc-inactive-button").removeClass("primary"))}function ShowHideSec(){$("#change-address-form").removeClass("hidden"),$(".AddressChangeOptSec").addClass("hidden"),$("#generate-otp-tab").addClass("hidden"),$("#personal-addess-edit").removeClass("hidden"),$("#addressCTA").removeClass("hidden"),digiLockerJourney=!1}function closeAllSelect(elmnt){var x,y,i,xl,yl,arrNo=[];for(x=document.getElementsByClassName("select-items"),y=document.getElementsByClassName("select-selected"),xl=x.length,yl=y.length,i=0;yl>i;i++)elmnt==y[i]?arrNo.push(i):y[i].classList.remove("select-arrow-active");for(i=0;xl>i;i++)arrNo.indexOf(i)&&x[i].classList.add("select-hide")}function proceedAddressChange(){if(console.log("is change add. form valid ? ",$("#change-address-form").valid()),$("#change-address-form").valid()){$(".otp-section-block").hide(),$(".btn-group-addr-kyc").removeClass("hidden"),$(".AddchangeProceedbtn").hide(),$(".newVerbiageforAddressChangeJourney").hide(),$("#addressCTA").hide(),$("#personal-addess-edit .address").attr("readonly","readonly"),$(".dynState.resi,.dynCity.resi,.dynPin.resi").css("pointer-events","none");var changeInPin=!1,changeInAddress=!1,residenceAddressNew=$("#residenceAddress").val().toLowerCase(),residenceAddressContdNew=$("#residenceAddressContd").val().toLowerCase(),residenceAddressOld=$("#oldResidenceAddress").val().toLowerCase(),residenceAddressContdOld=$("#oldResidenceAddressContd").val().toLowerCase(),oldResidencePin=$("#oldResidencePin").val().toLocaleLowerCase(),newResidencePin=$("#residenceZipCode").val().toLocaleLowerCase(),oldResidenceCity=$("#oldResidenceCity").val().toLocaleLowerCase(),oldResidenceState=$("#oldResidenceState").val().toLocaleLowerCase(),residenceCityNew=$("#residenceCity").val().toLocaleLowerCase(),residenceStateNew=$("#residenceState").val().toLocaleLowerCase();oldResidenceCity!==residenceCityNew&&(console.log("case1 ",changeInAddress),changeInAddress=!0),oldResidenceState!==residenceStateNew&&(console.log("case2 ",changeInAddress,oldResidenceState,residenceStateNew),changeInAddress=!0),residenceAddressContdNew!==residenceAddressContdOld&&(console.log("case3 ",changeInAddress),changeInAddress=!0),residenceAddressNew!==residenceAddressOld&&(console.log("case4 ",changeInAddress),changeInAddress=!0),oldResidencePin!==newResidencePin&&(console.log("case5 ",changeInAddress),changeInPin=!0),changeInPin&&!changeInAddress?(console.log("if1 ",changeInAddress,changeInPin),console.log("open otp section"),genOTPforAddrKyc(),docuploadEnabled=!1):changeInAddress?(console.log("if2 ",changeInAddress,changeInPin),console.log("open doc upload section"),docuploadEnabled=!0,$(".validate-form .docupload-block").removeClass("hidden"),$("#personal-addess-edit .form-field-list").addClass("hidden"),$("#addressCTA").addClass("hidden"),$("#AddressChangeProceedBtn").addClass("hidden")):changeInPin||changeInAddress||(console.log("if3 ",changeInAddress,changeInPin),docuploadEnabled=!1,genOTPforAddrKyc())}}function cancelKycAddr(){$(".validate-form .docupload-block").addClass("hidden"),$("#personal-addess-edit").removeClass("hidden"),$("#addressCTA").removeClass("hidden"),$("#AddressChangeProceedBtn").removeClass("hidden"),$(".newVerbiageforAddressChangeJourney").css("display","block"),$("#AddChangeProbtnId").show(),$("#addressCTA").show(),$("#addressChange_Check").prop("checked",!1),$("#AddressChangeProceedBtn .AddchangeProceedbtn").addClass("gray-btn e-sign-button"),$(".newVerbiage1").addClass("hidden"),$("#personal-addess-edit .form-field-list").removeClass("hidden"),$("#aadhaarConsentBoxUl").addClass("hidden"),$("#kycAddrDocumentDropdown").prop("selectedIndex",0),$("#a_card").addClass("hidden"),$(".file-upload-field").val(""),$(".file-upload-wrapper").attr("data-text",""),$(".file-upload-wrapper").css("outline","none"),$(".KYC-success-upload").hide(),$(".docupload-block #KYC-Addr-Submit").addClass("gray-btn pointer-none"),$(".KYC-field-error").hide(),$(".KYC-file-error").css({visibility:"hidden",display:"none"}),isValidKYCAddrDropdown=!1,$(".if-pan").removeClass("hidden"),$(".if-addhar").addClass("hidden"),$("#a_card").addClass("hidden"),$(".docupload-block .file-upload-field").css("pointer-events","auto"),$("#personal-addess-edit .address").removeAttr("readonly","readonly"),$(".dynState.resi,.dynCity.resi,.dynPin.resi").css("pointer-events","auto"),isAadhaarCardSelected=!1,isDocUploadForAadhaarValid=!1,("undefined"!=$("#digiLockAddrChangeForm #digiLokcerAddressChange_Check")||null!=$("#digiLockAddrChangeForm #digiLokcerAddressChange_Check"))&&($("#digiLockAddrChangeForm #digiLokcerAddressChange_Check").prop("checked",!1),$("#digiLockAddrChangeForm #digiLokcerAddressChange_Check").val(!1))}function genOTPforAddrKyc(){var genOtpUrl="/creditcards/app/myprofile/send-otp-change-address";$.ajax({type:"GET",url:genOtpUrl,beforeSend:function(){var loaderHtml='<div class="overlay-loader"></div>';$("body").append(loaderHtml)},complete:function(){$("body").find("div.overlay-loader").remove()},success:function(response){response.success?($(".otp-section-block").css("display","block"),$(".btn-group-addr-kyc").addClass("hidden"),$(".AddchangeCloseBtn").addClass("hidden"),$(".docupload-block .file-upload-field").css("pointer-events","none"),$("#kycAddrDocumentDropdown").css("pointer-events","none"),$("#aadhaarConsentBoxUl").addClass("hidden")):4==res.statusCode},error:function(){$("body").find("div.overlay-loader").remove()}})}function resendOtpKycAddr(){var href="/creditcards/app/myprofile/resend-otp-address-update";$.ajax({url:href,type:"POST",dataType:"json",beforeSend:function(){var loaderHtml='<div class="overlay-loader"></div>';$("body").append(loaderHtml)},complete:function(){$("body").find("div.overlay-loader").remove()},success:function(data){data&&(addrKycresendCount+=1,"true"==data.success||1==data.success?0==data.errorCode&&$(".otp-msg").show().text(res.message):507==data.errorCode?console.log("max attempt"):107==data.errorCode)},error:function(){$("body").find("div.overlay-loader").remove()}})}function finalAddrOtpSubmission(flag){var url="";url="landline"==flag?"/creditcards/app/myprofile/auth-otp-address-change-revamp-landline":"/creditcards/app/myprofile/auth-otp-address-change-revamp";var passphrase=$("#passphrase").val(),otpNumber=$("#addrKycOtp").val();"landline"==flag&&(otpNumber=$("#otp-cli-otp-field").val());var otpPassed=encryptData(otpNumber);$.ajax({type:"POST",data:{encryptedOtp:otpPassed},url:url,headers:{passphrase:passphrase},beforeSend:function(){var loaderHtml='<div class="overlay-loader"></div>';$("body").append(loaderHtml)},complete:function(){},success:function(response){console.log(response);var decryptedData=dataDecryptionAES(response,passphrase);console.log(decryptedData),response=JSON.parse(decryptedData),console.log("auth-otp response",response),response.success?(console.log("0"),"landline"==flag?onclickSubmitOtp():finalSubmitManualAddrChange()):4==response.statusCode?($(".otp-msg").html(response.message).css("color","red"),$(".otp-error-message").html(""),$(".otp-resend-msg").addClass("hidden"),console.log("inside 004 status code for landline=>"+flag),$("body").find("div.overlay-loader").remove(),"landline"==flag&&($("#landlineOtpSec #landline-otp-invalid-error-msg").removeClass("hidden"),$("#landlineOtpSec #landline-otp-invalid-error-msg").css("display","block"),$("#landlineOtpSec #landline-otp-invalid-error-msg").html(""),$("#landlineOtpSec #landline-otp-invalid-error-msg").html(response.message),$(".incorrect-otp-message").html(""),$("#landlineOtpSec #otp-cli-otp-field").css("border","1px solid red"),$("#resendOtpManualVerbExamsg").css("display","none"),$("#landlineOtpSec .resend-otp-msg").css("display","none"),$("#landlineOtpSec .resend-otp-msg").addClass("hidden"),$("#landlineOtpSec #otp-cli-otp-field").val(""),$("#sumbitgraybtn").addClass("gray-btn"),$("#sumbitgraybtn").css("pointer-events","none")),"manual"==flag&&($("#addrKycOtp").val(""),$("#manualOtpSubmitbtn").addClass("gray-btn"),$("#manualOtpSubmitbtn").css("pointer-events","none"),$("#addrKycOtp").css("border","1px solid red"),$("#resendOtpManualVerbExamsg").hide())):2==response.statusCode&&($("body").find("div.overlay-loader").remove(),$(".otp-msg").html(""),$(".otp-resend-msg").addClass("hidden"),"manual"==flag&&($(".otp-error-message").show(),$(".manualJourney3triesOTP").html(response.message).show(),$("#addrKycOtp").val("").attr("disabled","disbled")),$("#manualOtpSubmitbtn").addClass("gray-btn").css("pointer-events","none"),$("#manualOtpCancelbtn, #resendAddrManual,.docupload-block").css("pointer-events","none"),$(".otp-submit-block a").css("pointer-events","none").addClass("gray-btn"),$("#resendAddrManual").css("color","gray"),"landline"==flag&&($("#landline-otp-invalid-error-msg").css("display","none"),$("#landlineOtpSec #landline-otp-invalid-error-msg").addClass("hidden"),$("#landline-otp-invalid-error-msg").html(""),$(".incorrect-otp-message").html($("#landLinefaultMsg").val()),$(".landline-submit-otp-btn").css("pointer-events","none"),$(".landline-submit-otp-btn").css("pointer-events","none"),$("#landLineResendBtn").css("pointer-events","none"),$("#landlineOtpCancelbtn").css("pointer-events","none"),$("#landLineResendBtn").css("color","gray"),$(".landline-submit-otp-btn").css("color","gray"),$(".landline-submit-otp-btn").addClass("gray-btn"),$(".incorrect-otp-message").attr("style","display:block"),$("#otp-cli-otp-field").css("pointer-events","none")))},error:function(){$("body").find("div.overlay-loader").remove()}})}function KycAddrDocSubmission(){console.log("inside doc upload submission-----");var fileValue=$(".docupload-block .file-upload-field:visible");if(fileValue){var file=fileValue.prop("files")[0],reader=new FileReader,selectedDocType=$("#kycAddrDocumentDropdown").val();reader.readAsDataURL(file);var encryptResult,fileNameExt=file.name.split("\\").pop();reader.onload=function(){encryptResult=btoa(reader.result),$.ajax({url:"/safe/upload-file.do",type:"POST",contentType:"application/json",data:JSON.stringify({encodedFile:encryptResult,fileType:selectedDocType,fileExt:fileNameExt,authStr:"ABCD"}),beforeSend:function(){$(".kycOtpSection #otp-msg").hide();var loaderHtml='<div class="overlay-loader"></div>';$("body").append(loaderHtml)},success:function(data){if(null!=data.docRefId&&"null"!=data.docRefId){var docrefid1=data.docRefId,docRefId2="";finalSubmitAddrKYCdoc(docrefid1,selectedDocType,docRefId2),console.log("success in doc upload=>"+data)}else null!=data.docRefId1&&"null"!=data.docRefId1?(finalSubmitAddrKYCdoc(data.docRefId1,selectedDocType,null),console.log("success in doc upload=>"+data)):($("body").find("div.overlay-loader").remove(),console.log("error in doc"))},error:function(){$("body").find("div.overlay-loader").remove(),finalSubmitAddrKYCdoc("N1BNZFhpNVUzL3JJUmliS3ZmbTFwQT09WmRRdzRHZVZZRkpCYTEyN1dGYnc3Zz09RUxFRzA4d0tyc0ZuRzAzYzVNNlJ5RUJDeVRYYXZIalR3cEQ1eTNZTVQwTT0=","PAN",null)}})}}}function finalSubmitAddrKYCdoc(docRefId1,docType1,docRefId2){var loaderHtml='<div class="overlay-loader"></div>';$("body").append(loaderHtml),console.log("Document uploaded");var addrChangeKycDocForm=$("#change-address-form");$("<input>").attr({name:"docRefId1",id:"docRefId1",type:"hidden",value:docRefId1}).appendTo(addrChangeKycDocForm),$("<input>").attr({name:"docType1",id:"docType1",type:"hidden",value:docType1}).appendTo(addrChangeKycDocForm),$("<input>").attr({name:"docRefId2",id:"docRefId2",type:"hidden",value:docRefId2}).appendTo(addrChangeKycDocForm),addrChangeKycDocForm.removeAttr("action"),addrChangeKycDocForm.attr("action","/creditcards/app/myprofile/update-address-revamp-page"),addrChangeKycDocForm.submit()}function enableProceedOtpbtn(id){$("#"+id).is(":checked")?$("#addressChange_Check").hasClass("errAddrConsentCheck")?(console.log("errAddrConsentCheck yes"),$(".activeModifiedFlag").addClass("hidden"),$(".nochangErrMsg").removeClass("hidden")):(console.log("errAddrConsentCheck no"),$("#AddChangeProbtnId").removeClass("e-sign-button gray-btn"),$(".activeModifiedFlag").removeClass("hidden"),$(".nochangErrMsg").addClass("hidden")):($("#AddChangeProbtnId").addClass("e-sign-button gray-btn"),$(".activeModifiedFlag").addClass("hidden"),$(".nochangErrMsg").addClass("hidden"))}function onClickGenOtpButton(){$("#otpColor1").hide(),$("#landlineOtpSec #otp-cli-otp-field").val(""),$(".mob-input-box #landlinePhone").css("pointer-events","none"),$("#landlineOtpSec").removeClass("hidden"),$(".otp-submit-block .blue-btn").addClass("gray-btn"),$("#sumbitgraybtn").css("pointer-events","none"),$(".landline-number").css("pointer-events","none");{var _OtpgenUrl="/creditcards/app/myprofile/send-otp-update-landline";document.getElementById("passphrase").value}$.ajax({type:"POST",data:{},url:_OtpgenUrl,beforeSend:function(){$(".error-div").hide();var loaderHtml='<div class="overlay-loader"></div>';$("body").append(loaderHtml)},complete:function(){$("body").find("div.overlay-loader").remove()},success:function(response){console.log("OTP Gen res ",response)},error:function(){$("body").find("div.overlay-loader").remove()}})}function resendAddressChangeOtp(flag){++resendOTPCount,$(".kycOtpSection .digiLockOtpField").css("border","1px solid #ddd"),$(".kycOtpSection #kyc-otp-err").css("display","none"),$(".kycOtpSection .digiLockOtpField").val(""),console.log("resendOTPCount",resendOTPCount);var href="";href="landline"==flag?"/creditcards/app/myprofile/resend-otp-address-update-landline":"/creditcards/app/myprofile/resend-otp-address-update",$.ajax({url:href,type:"POST",dataType:"json",beforeSend:function(){var loaderHtml='<div class="overlay-loader"></div>';$("body").append(loaderHtml)},complete:function(){$("body").find("div.overlay-loader").remove()},success:function(data){console.log("success enter"+data),console.log("success"+data),"true"==data.success||1==data.success?1==data.resendEnabled||"true"==data.resendEnabled?(console.log("success=true"),"digilocker"==flag?($("#digiLockAddrChangeForm .resend-otp-msg-digi").css("display","block"),$(".kycOtpSection #kyc-otp-err").css("display","none"),$(".kycOtpSection .digiLockOtpField").css("border","1px solid #ddd"),$(".kycOtpSection .digiLockOtpField").val("")):"landline"==flag&&($(".otp-error-message").hide().text(""),$("#landLineResendBtn").css("pointer-events","auto"),$("#landline-otp-invalid-error-msg").addClass("hidden"),$("#landlineOtpSec .resend-otp-msg").removeClass("hidden"),$("#landlineOtpSec .resend-otp-msg").css("display","block"),$("#landlineOtpSec #landline-otp-invalid-error-msg").css("display","none"),$("#landlineOtpSec #otp-cli-otp-field").css("border","1px solid #ddd"),$("#kyc-otp-resend-btn").css("pointer-events","auto"),$("#landlineOtpSec #otp-cli-otp-field").val(""),$("#sumbitgraybtn").addClass("gray-btn"),$("#sumbitgraybtn").css("pointer-events","none"))):(0==data.resendEnabled||"false"==data.resendEnabled)&&(console.log("max attempt"),"digilocker"==flag?(console.log("inside if"),$("#digiLockAddrChangeForm .resend-otp-msg-digi").css("display","none"),$("#digiLockAddrChangeForm #kyc-otp-resend-btn").css("pointer-events","none"),$("#digiLockAddrChangeForm #kyc-otp-resend-btn").css("color","gray"),$("#digiLockAddrChangeForm .otp-error-message-digilocker").css("display","block"),$("#digiLockAddrChangeForm .otp-error-message-digilocker").text(data.message),$(".kycOtpSection #kyc-otp-err").css("display","none"),$(".kycOtpSection .digiLockOtpField").css("border","1px solid #ddd"),$(".kycOtpSection .digiLockOtpField").val(""),$("#digiLockAddrChangeForm .cancelDigiLockOTP").css("pointer-events","none")):"landline"==flag&&($(".otp-error-message").show().text(data.message),$(".resend-otp-msg").addClass("hidden"),$("#landLineResendBtn").css("pointer-events","none"),$("#landlineOtpSec #otp-cli-otp-field").val(""),$("#landlineOtpCancelbtn").css("pointer-events","none"),$("#sumbitgraybtn").addClass("gray-btn"),$("#landLineResendBtn").css("color","gray"))):107==data.errorCode&&($(".otp-error-message").show().text(data.message),$(".otp-msg").hide().text(""))},error:function(){$("body").find("div.overlay-loader").remove()}})}function onclickSubmitOtp(){onclickOTPSumbitBtn()}function onclickOTPSumbitBtn(){console.log("submitDigilockerForm");var url="/creditcards/app/myprofile/update-landline-number",landlinePhone=$("#landlinePhone").val();$("#change-address-form #oldresidenceLandline").val(landlinePhone),makeAjaxWithLoader({url:url,type:"post",data:$("#change-address-form ").serialize(),beforeSend:function(){var loaderHtml='<div class="overlay-loader"></div>';$("body").append(loaderHtml)},complete:function(){$("body").find("div.overlay-loader").remove()},success:function(data){$("#address-tab").html(data),console.log("---------------",data),$("body").find("div.overlay-loader").remove()},error:function(){$("body").find("div.overlay-loader").remove()}})}function onclickCancelOtp(){$("#landlineOtpSec").addClass("hidden"),$(".mob-input-box #landlinePhone").css("pointer-events","auto"),$("#landlineResendOtpExaustedErrorMsg").addClass("hidden"),$("#otpColor1").show(),$("#landlineOtpSec .resend-otp-msg").css("display","none"),$("#landlineOtpSec #otp-cli-otp-field").val(""),$("#landlineOtpSec #landline-otp-invalid-error-msg").addClass("hidden"),$("#landlineOtpSec .resend-otp-msg").addClass("hidden"),$("#landlineOtpSec #otp-cli-otp-field").css("border","1px solid #ddd"),$(".landline-number").css("pointer-events","visible")}function onChangeFunction(){console.log("landline change..",$("#landlinePhone").val().length),11==$("#landlinePhone").val().length?($("#landlinePhone").css("border-color","#cdcbcb"),$("#otpColor1").css("pointer-events","visible"),$("#otpColor1").removeClass("gray-btn")):($("#landlinePhone").css("border-color","red"),$("#otpColor1").css("pointer-events","none"),$("#otpColor1").addClass("gray-btn"))}function enableDisableSuBtnforLandline(otpLength){console.log("otpValueotpValue-------",otpLength),6==otpLength?($(".landline-submit-otp-btn").removeClass("gray-btn"),$(".landline-submit-otp-btn").css("pointer-events","visible")):($(".landline-submit-otp-btn").addClass("gray-btn"),$(".landline-submit-otp-btn").css("pointer-events","none"),$("#landlineOtpSec #otp-cli-otp-field").css("border","1px solid rgb(221, 221, 221)"),$("#landline-otp-invalid-error-msg").css("display","none"))}function onChangeFunctionManualJourney(){var otpManualValue=$("#addrKycOtp").val().length;6==otpManualValue?($("#manualOtpSubmitbtn").removeClass("gray-btn"),$("#manualOtpSubmitbtn").css("pointer-events","auto"),$('label[for="addrKycOtp"]').parent().find("label.valid").remove(),$('label[for="addrKycOtp"]').parent().find("label.error").remove()):($("#manualOtpSubmitbtn").addClass("gray-btn"),$("#manualOtpSubmitbtn").css("pointer-events","none"),$(".pincodeOtpIncorrectmsg").html(""),$("#addrKycOtp").css("border","1px solid rgb(221, 221, 221)"),$('label[for="addrKycOtp"]').parent().find("label.valid").remove(),$('label[for="addrKycOtp"]').parent().find("label.error").remove())}function onChangeOtpField(){var otpValue=$("#otp-cli-otp-field").val();console.log("otpValueotpValue",otpValue.length),enableDisableSuBtnforLandline(otpValue.length)}function enableDigiLockProceedbtn(id){$("#"+id).is(":checked")?(console.log("enable proceed"),$(".digilock-add-btns .blue-btn.e-sign-button").removeClass("gray-btn")):$(".digilock-add-btns .blue-btn.e-sign-button").addClass("gray-btn")}function disclaimerPopUpForAddressChange(){sessionStorage.removeItem("addressChangetryAgainStatus"),sessionStorage.setItem("addressChange",!0),digiLockerJourney=!0;$("a.crossDomain").length>0&&$(this).attr("target","_blank");var clientId=$("#digilockerClientId").val();console.log("clientId",clientId);var URL="https://api.digitallocker.gov.in/public/oauth2/1/authorize?response_type=code&client_id="+clientId+"&rediect_uri=1&state=1",processDiv='<form action="'+URL+'" target="_blank" method="POST" name="payNetForm" style="margin-bottom:0px;"><input type="hidden" name="msg" id="msg" value=""/><a href="javascript:void(0);" class="button primary button-clickToProceed" onClick="redirectToDigilocker(`'+URL+'`);setAnalyticsPost(\'Proceed\');closeModalPopup($(this));">Proceed</a><a href="javascript:void(0);" class="button primary button-cancel" onClick="setAnalyticsPost(\'Cancel\');closeModalPopup($(this));">Cancel</a></form>';
0==$(".button-clickToProceed").length&&$("#appendPayNowForm").append(processDiv),$(".button-clickToProceed").css("margin-right","5px"),$(".modal-overlay.disclaimer-popup").addClass("open"),viewport.width>=1024?$(".modal").css("margin-top","-267.5px"):viewport.width<767&&$(".modal").css("margin-top","0px"),viewport.width<=1024&&($(".disclaimer-popup").css("margin-top","0px"),$(".disclaimer-popup .modal").css("margin-top","0px"),$(".disclaimer-popup .modal").css("margin-left","0px"),$(".disclaimer-popup .modal").scrollTop(0))}function popUpclose(){$(".manualAddrKycPopup").removeClass("open")}function callToCloseManualOtp(){$("#manualOtpSection").hide(),$("#manualOtpSection .addrKycOtp").val(""),$(".otp-msg").html(""),$(".btn-group-addr-kyc").removeClass("hidden"),$("#AddChangeProbtnId").show(),$("#resendOtpManualVerbExamsg").css("display","none"),$("#addressCTA").show(),$("#manualOtpSubmitbtn").addClass("gray-btn"),$("#manualOtpSubmitbtn").css("pointer-events","none"),$("#addrKycOtp").val(""),$("#addrKycOtp").css("border","1px solid rgb(221, 221, 221)"),$(".newVerbiageforAddressChangeJourney").show(),$(".docupload-block .file-upload-wrapper input").css("pointer-events","auto"),$("select#kycAddrDocumentDropdown").css("pointer-events","auto"),$(".newVerbiage1").addClass("hidden"),1==digiLockerJourney?$(".AddchangeCloseBtn").addClass("hidden"):$(".AddchangeCloseBtn").removeClass("hidden"),$("#personal-addess-edit .address").removeAttr("readonly","readonly"),$(".dynState.resi,.dynCity.resi,.dynPin.resi").css("pointer-events","auto"),$(".docupload-block .file-upload-field").css("pointer-events","auto"),$("#kycAddrDocumentDropdown").css("pointer-events","auto"),("Aadhaar Card"==$("#addrChangeDocFileName").val()||"Aadhar Card"==$("#addrChangeDocFileName").val()||"Aadhaar/UID"==$("#addrChangeDocFileName").val())&&$("#aadhaarConsentBoxUl").removeClass("hidden")}function callLandlineCancelOtp(){$("#landlineOtpSec").hide(),$("#landlineOtpSec #otp-cli-otp-field").val(""),$(".OtpGenBtnForLandline #otpColor1").css({display:"inline-block",margin:"15px 0px"})}function callAddrDocUploadValidation(){if(console.log("enter callAddrDocUploadValidation"),"multiDoc"==$("#addrChangeDocType").val()){console.log("enter callAddrDocUploadValidation - multidoc");var fileValue=$(".docupload-block .addr-front-doc");singleAddrDocUploadSubmit(fileValue),multiAddrDocUploadSubmit()}else{console.log("enter callAddrDocUploadValidation - single doc");var fileValue=$(".docupload-block .addr-single-doc");singleAddrDocUploadSubmit(fileValue)}}function singleAddrDocUploadSubmit(fileValue){console.log("enter singleAddrDocUploadSubmit");var fileValue=fileValue;if(fileValue){var file=fileValue.prop("files")[0],reader=new FileReader,selectedDocType=$("#kycAddrDocumentDropdown").val();reader.readAsDataURL(file);var encryptResult,fileNameExt=file.name.split("\\").pop();reader.onload=function(){encryptResult=btoa(reader.result),$.ajax({url:"/safe/upload-file.do",type:"POST",contentType:"application/json",data:JSON.stringify({encodedFile:encryptResult,fileType:selectedDocType,fileExt:fileNameExt,authStr:"ABCD"}),beforeSend:function(){$(".kycOtpSection #otp-msg").hide();var loaderHtml='<div class="overlay-loader"></div>';$("body").append(loaderHtml)},success:function(data){if(console.log("inside singleAddrDocUploadSubmit- success block"),null!=data.docRefId&&"null"!=data.docRefId){var docRefId1=data.docRefId,docType1=selectedDocType,addrChangeKycDocForm=$("#change-address-form");$("<input>").attr({name:"docRefId1",id:"docRefId1",type:"hidden",value:docRefId1}).appendTo(addrChangeKycDocForm),$("<input>").attr({name:"docType1",id:"docType1",type:"hidden",value:docType1}).appendTo(addrChangeKycDocForm),"singleDoc"==$("#addrChangeDocType").val()&&(console.log("inside singleAddrDocUploadSubmit- call gen otp"),genOTPforAddrKyc()),console.log("success in doc upload=>"+data)}else $("body").find("div.overlay-loader").remove(),console.log("error in doc")},error:function(){$("body").find("div.overlay-loader").remove(),finalSubmitAddrKYCdoc("N1BNZFhpNVUzL3JJUmliS3ZmbTFwQT09WmRRdzRHZVZZRkpCYTEyN1dGYnc3Zz09RUxFRzA4d0tyc0ZuRzAzYzVNNlJ5RUJDeVRYYXZIalR3cEQ1eTNZTVQwTT0=","PAN",null)}})}}}function multiAddrDocUploadSubmit(){console.log("enter multiAddrDocUploadSubmit");var fileValue=$(".docupload-block .addr-back-doc"),fileValue=fileValue;if(fileValue){var file=fileValue.prop("files")[0],reader=new FileReader,selectedDocType=$("#kycAddrDocumentDropdown").val();reader.readAsDataURL(file);var encryptResult,fileNameExt=file.name.split("\\").pop();reader.onload=function(){encryptResult=btoa(reader.result),$.ajax({url:"/safe/upload-file.do",type:"POST",contentType:"application/json",data:JSON.stringify({encodedFile:encryptResult,fileType:selectedDocType,fileExt:fileNameExt,authStr:"ABCD"}),beforeSend:function(){$(".kycOtpSection #otp-msg").hide();var loaderHtml='<div class="overlay-loader"></div>';$("body").append(loaderHtml)},success:function(data){if(console.log("enter multiAddrDocUploadSubmit -success block"),null!=data.docRefId&&"null"!=data.docRefId){var addrChangeKycDocForm=$("#change-address-form"),docRefId2=data.docRefId,docType2=selectedDocType;$("<input>").attr({name:"docRefId2",id:"docRefId2",type:"hidden",value:docRefId2}).appendTo(addrChangeKycDocForm),$("<input>").attr({name:"docType2",id:"docType2",type:"hidden",value:docType2}).appendTo(addrChangeKycDocForm),(""!=$("#docRefId1").val()||null!=$("#docRefId1").val()||"null"!=$("#docRefId1").val())&&(console.log("enter multiAddrDocUploadSubmit -call gen otp"),genOTPforAddrKyc()),console.log("success in back image doc upload=>"+data)}else $("body").find("div.overlay-loader").remove(),console.log("error in doc")},error:function(){$("body").find("div.overlay-loader").remove(),finalSubmitAddrKYCdoc("N1BNZFhpNVUzL3JJUmliS3ZmbTFwQT09WmRRdzRHZVZZRkpCYTEyN1dGYnc3Zz09RUxFRzA4d0tyc0ZuRzAzYzVNNlJ5RUJDeVRYYXZIalR3cEQ1eTNZTVQwTT0=","PAN",null)}})}}}function finalSubmitManualAddrChange(){console.log("finalSubmitManualAddrChange submit page");var retryStatus=$("#RetryStatus").val();if(""!=retryStatus&&null!=retryStatus){var url="/creditcards/app/myprofile/update-address-revamp-page";makeAjaxWithLoader({url:url,type:"post",data:$("#change-address-form").serialize(),beforeSend:function(){},complete:function(){$("body").find("div.overlay-loader").remove()},success:function(data){$("#address-tab").html(data),$("body").find("div.overlay-loader").remove()}})}else{console.log("finalSubmitManualAddrChange Document uploaded");var addrChangeKycDocForm=$("#change-address-form");addrChangeKycDocForm.removeAttr("action"),addrChangeKycDocForm.attr("action","/creditcards/app/myprofile/update-address-revamp-page"),addrChangeKycDocForm.submit()}}function onClickKycPopup(){$(".manualAddrKycPopup").addClass("open")}function onClickVerifyNowForKycRenewel(){sessionStorage.removeItem("kycRenewelTryAgainStatus"),sessionStorage.removeItem("addressChange"),sessionStorage.setItem("kycRenewel",!0),$(".modify-to-update").is(":visible")?setAnalyticsKYCConfirmation("Address DigiLocker","KYC Renewal"):setAnalyticsKYCRenewal("Renewal DigiLocker","KYC Renewal"),digiLockerJourney=!0;$("a.crossDomain").length>0&&$(this).attr("target","_blank");var clientId=$("#digilockerClientId").val(),URL="https://api.digitallocker.gov.in/public/oauth2/1/authorize?response_type=code&client_id="+clientId+"&rediect_uri=1&state=1",processDiv='<form action="'+URL+'" target="_blank" method="POST" name="payNetForm" style="margin-bottom:0px;"><input type="hidden" name="msg" id="msg" value=""/><a href="javascript:void(0);" class="button primary button-clickToProceed" onClick="redirectToDigilocker(`'+URL+'`);setAnalyticsPost(\'Proceed\');closeModalPopup($(this));">Proceed</a><a href="javascript:void(0);" class="button primary button-cancel" onClick="setAnalyticsPost(\'Cancel\');closeModalPopup($(this));">Cancel</a></form>';0==$(".button-clickToProceed").length&&$("#appendPayNowForm").append(processDiv),$(".button-clickToProceed").css("margin-right","5px"),$(".modal-overlay.disclaimer-popup").addClass("open"),viewport.width>=1024?$(".modal").css("margin-top","-267.5px"):viewport.width<767&&$(".modal").css("margin-top","0px"),viewport.width<=1024&&($(".disclaimer-popup").css("margin-top","0px"),$(".disclaimer-popup .modal").css("margin-top","0px"),$(".disclaimer-popup .modal").css("margin-left","0px"),$(".disclaimer-popup .modal").scrollTop(0))}function showHideKycRenewelSection(){console.log("on click submit button ",kycRenewalAddOnCardSelected),sessionStorage.setItem("isKycRenewalModifyJourney",!1);var url="/creditcards/app/requests/kyc-renewal-proceed",isModifyJourney=$("#kycRenewalDigiModifyJourney").val();console.log("showHideKycRenewelSection isModifyJourney",isModifyJourney),""==isModifyJourney||null==isModifyJourney||1!=isModifyJourney&&"true"!=isModifyJourney&&"true"!=isModifyJourney?(StateListKycRenewelModifyAddress(),makeAjaxWithLoader({url:url,type:"post",data:$("#kyc-upload-form").serialize(),beforeSend:function(){var loaderHtml='<div class="overlay-loader"></div>';$("body").append(loaderHtml)},complete:function(){$("body").find("div.overlay-loader").remove()},success:function(){$("#kyc-renewal-main .residenceAddressForm").css("display","block"),$("#kyc-renewel-main .kyc-block").css("display","none"),$("#kyc-renewel-main .kyc-block").css("display","none"),$("#kyc-renewel-main .kyc-select-card").css("display","none"),$("#kyc-renewal-main .d-line").css("display","none"),$("#kyc-renewal-main .kyc-sub-block").css("display","none"),$("#kyc-renewal-main .kyc-select-card").css("display","none"),0==kycRenewalAddOnCardSelected?$("#kyc-renewal-main .residenceAddressForm .modify-btn").css("display","inline-block"):($("#kyc-renewal-main .residenceAddressForm").hide(),$(".kyc-renewel-verify-now-screen").css("display","block"),$("#kyc-renewal-main .kyc-renewel-main-block").css("display","block"),$("#kyc-renewal-main .kyc-renewel-verify-now-screen .tabs-block .proceed-to-update").css("display","none"),$("#kyc-renewal-main .kyc-renewel-verify-now-screen .tabs-block .proceed-to-addon-card").css("display","block")),$("body").find("div.overlay-loader").remove()},error:function(){$("body").find("div.overlay-loader").remove()}})):(StateListKycRenewelModifyAddress(),$("#kyc-renewal-main .residenceAddressForm").css("display","block"),$("#kyc-renewel-main .kyc-block").css("display","none"),$("#kyc-renewel-main .kyc-block").css("display","none"),$("#kyc-renewel-main .kyc-select-card").css("display","none"),$("#kyc-renewal-main .d-line").css("display","none"),$("#kyc-renewal-main .kyc-sub-block").css("display","none"),$("#kyc-renewal-main .kyc-select-card").css("display","none"),$("#kyc-renewal-main .residenceAddressForm .check-box-modifyadress").css("display","block"))}function onClickProceedForKYCRenewel(status){var isModifyJourney=$("#kycRenewalDigiModifyJourney").val();if(console.log("ready called isModifyJourney",isModifyJourney,"status ",status,"kycRenewalProceedJourney",kycRenewalProceedJourney,"onlyAddressLineCaseChanged",onlyAddressLineCaseChanged),"udpateAddress"!=status&&($("#kyc-renewal-main .kyc-renewel-main-block").css("display","none"),$("#kyc-renewal-main .residenceAddressForm").css("display","none"),$("#kycmodifyaddressCTA .fancy-checkbox").removeClass("checked")),"modify"==status)kycRenewalProceedJourney=!1,""==isModifyJourney||null==isModifyJourney||1!=isModifyJourney&&"true"!=isModifyJourney&&"true"!=isModifyJourney?(sessionStorage.setItem("isKycRenewalModifyJourney",!0),kycRenewalProceedJourney=!1,kycRenewalModifyJourney=!0,digiModifyButtonClick=!1,$(".kyc-renewel-verify-now-screen").css("display","block"),$("#kyc-renewal-main .kyc-renewel-main-block").css("display","block"),$("#kyc-renewal-main .kyc-renewel-verify-now-screen .tabs-block .note-text-to").css("display","block"),$("#kyc-renewal-main .kyc-renewel-verify-now-screen .tabs-block .proceed-click-here-hide").css("display","none"),$("#kyc-renewal-main .kyc-renewel-verify-now-screen .tabs-block .modify-click-here-block").css("display","block"),$("#kyc-renewal-main .kyc-renewel-verify-now-screen .tabs-block .proceed-to-update").css("display","none"),$("#kyc-renewal-main .kyc-renewel-verify-now-screen .tabs-block .modify-to-update").css("display","block"),$("#kyc-renewal-main .kyc-renewel-verify-now-screen .tabs-block .proceed-to-addon-card").css("display","none")):($("#kyc-renewal-main .residenceAddressForm .modify-address-block").css("display","block"),$("#kyc-renewal-main .residenceAddressForm .readonly-input").css("display","none"),$("#kyc-renewal-main .residenceAddressForm .lap-kycrenewal-ml .modify-modify-btn").css("display","none"),$("#kyc-renewal-main .residenceAddressForm").css("display","block"),$("#kyc-renewal-main .residenceAddressForm .check-box-modifyadress").css("display","block"),$("#modifyaddressChange_Check").prop("checked",!1),$("#proceedModifyAdrsBtn").addClass("kyc-signbtn gray-btn"),digiModifyButtonClick=!0,$("#spaceBWheadreAndResi").css("padding","0px"),$("#kyc-upload-form #kycRenewalDigilockerAddressEditFlag").val("Y"));else if("udpateAddress"===status)genOTPforRewewalKyc();else if("back"==status)kycRenewalProceedJourney=!1,$(".kyc-renewel-verify-now-screen").css("display","block"),$("#kyc-renewal-main .document-upload-section").css("display","none"),$("#kyc-renewal-main .residenceAddressForm").css("display","none"),$("#kyc-renewal-main .kyc-renewel-verify-now-screen .note-text").css("display","block"),$("#kyc-renewal-main .kyc-renewel-verify-now-screen .tabs-block").css("display","block"),$("#kyc-renewal-main .residenceAddressForm .modify-modify-btn").css("display","none"),$("#kyc-renewal-main .kyc-renewel-verify-now-screen .tabs-block .proceed-click-here-hide").css("display","none"),$("#kyc-renewal-main .kyc-renewel-verify-now-screen .tabs-block .modify-click-here-block").css("display","block"),$("#kyc-renewal-main .kyc-renewel-verify-now-screen .tabs-block .proceed-to-update").css("display","none"),$("#kyc-renewal-main .kyc-renewel-verify-now-screen .tabs-block .modify-to-update").css("display","block"),$("#kyc-renewal-main .kyc-renewel-verify-now-screen .tabs-block .proceed-to-addon-card").css("display","none"),$("#modifyaddressChange_Check").prop("checked",!1),$("#kycmodifyaddressCTA .fancy-checkbox").removeClass("checked"),$("#proceedModifyAdrsBtn").addClass("kyc-signbtn kyc-sign-button"),$(".kycrenewalProceedbtn").removeClass("gray-btn disabled"),$(".kycnewVerbiage").addClass("hidden"),$(".newVerbiageforAddressChangeJourney .kycnochangErrMsg").addClass("hidden"),$("#kyc-renewal-main .kycPincodeChangeErrMsg").addClass("hidden"),$("#kyc-renewal-main .residenceAddressForm .lap-kycrenewal-ml .modify-modify-btn").css("display","inline-block"),$("#kyc-renewal-main .otp-section-block").css("display","none");else{kycRenewalProceedJourney=!0,digiModifyButtonClick=!1;var retryStat=$("#retryStatus").val(),onlyPinCodeChangeUdateFlag=$("#kyc-upload-form #kycRenewalOnlyDigilockerPincodeUpdateFlag").val();if(console.log("kycRenewalModifyJourney",kycRenewalModifyJourney,"isModifyJourney",isModifyJourney,"onlyPinCodeChangeUdateFlag",onlyPinCodeChangeUdateFlag),0==kycRenewalModifyJourney)console.log("16549"),sessionStorage.setItem("isKycRenewalModifyJourney",!1),""==isModifyJourney||null==isModifyJourney||1!=isModifyJourney&&"true"!=isModifyJourney&&"true"!=isModifyJourney?"Y"==onlyPinCodeChangeUdateFlag&&0==modifyOtherFields&&0==onlyAddressLineCaseChanged?(console.log("5--------"),onClickDocUploadSubmitButton(),console.log("inside modify proceed journey"),$("#kyc-upload-form #kycRenewalDocUploadFlag").val("N"),$("#kyc-renewal-main .residenceAddressForm .check-box-modifyadress").css("display","none"),$("#kyc-renewal-main .residenceAddressForm .lap-kycrenewal-ml").css("display","none"),$("#kyc-renewal-main .residenceAddressForm").css("display","block"),$("#kyc-renewal-main .residenceAddressForm .modify-address-block").css("pointer-events","none"),$("#kyc-renewal-main .residenceAddressForm .verbg-kyc-renewal").css("display","none")):"N"==onlyPinCodeChangeUdateFlag&&1==modifyOtherFields&&0==onlyAddressLineCaseChanged?(console.log("6--------"),$("#kyc-renewal-main .residenceAddressForm").css("display","none"),$("#kyc-renewal-main .document-upload-section").css("display","block"),$("#kyc-renewal-main .doc-upload-proceed-btn").addClass("gray-btn pointer-none"),$("#kyc-renewal-main .document-upload-section .kyc-renewal-doc-upload").css("display","block"),$("#kyc-renewal-main .document-upload-section .doc-upload-buttons-group").css("display","block"),$("#kyc-renewal-main .kyc-renewel-verify-now-screen .tabs-block .note-text-to").css("display","none"),$("#kyc-renewal-main .kyc-renewel-verify-now-screen .tabs-block .proceed-click-here-hide").css("display","block"),$("#kyc-renewal-main .kyc-renewel-verify-now-screen .tabs-block .modify-click-here-block").css("display","none"),$("#kyc-renewal-main .kyc-renewel-verify-now-screen .tabs-block .proceed-to-update").css("display","block"),$("#kyc-renewal-main .kyc-renewel-verify-now-screen .tabs-block .modify-to-update").css("display","none")):"N"==onlyPinCodeChangeUdateFlag&&0==modifyOtherFields&&1==onlyAddressLineCaseChanged?(console.log("7--------"),onClickDocUploadSubmitButton(),console.log("inside modify proceed journey"),$("#kyc-upload-form #kycRenewalDocUploadFlag").val("N"),$("#kyc-renewal-main .residenceAddressForm .check-box-modifyadress").css("display","none"),$("#kyc-renewal-main .residenceAddressForm .lap-kycrenewal-ml").css("display","none"),$("#kyc-renewal-main .residenceAddressForm").css("display","block"),$("#kyc-renewal-main .residenceAddressForm .modify-address-block").css("pointer-events","none"),$("#kyc-renewal-main .residenceAddressForm .verbg-kyc-renewal").css("display","none")):(console.log("8--------"),$(".kyc-renewel-verify-now-screen").css("display","block")):($("#kyc-renewal-main .residenceAddressForm .check-box-modifyadress").css("display","none"),$("#kyc-renewal-main .residenceAddressForm .lap-kycrenewal-ml").css("display","none"),$("#kyc-renewal-main .residenceAddressForm").css("display","block"),$("#kyc-renewal-main .residenceAddressForm .modify-address-block").css("pointer-events","none"),console.log("16557"),"Y"==onlyPinCodeChangeUdateFlag&&0==modifyOtherFields&&0==onlyAddressLineCaseChanged?(console.log("1--------"),onClickDocUploadSubmitButton(),console.log("inside modify proceed journey"),$("#kyc-upload-form #kycRenewalDocUploadFlag").val("N"),$("#kyc-renewal-main .residenceAddressForm .check-box-modifyadress").css("display","none"),$("#kyc-renewal-main .residenceAddressForm .lap-kycrenewal-ml").css("display","none"),$("#kyc-renewal-main .residenceAddressForm").css("display","block"),$("#kyc-renewal-main .residenceAddressForm .modify-address-block").css("pointer-events","none"),$("#kyc-renewal-main .residenceAddressForm .verbg-kyc-renewal").css("display","none")):"N"==onlyPinCodeChangeUdateFlag&&1==modifyOtherFields&&0==onlyAddressLineCaseChanged?(console.log("2--------"),$("#kyc-renewal-main .residenceAddressForm").css("display","none"),$("#kyc-renewal-main .document-upload-section").css("display","block"),$("#kyc-renewal-main .doc-upload-proceed-btn").addClass("gray-btn pointer-none"),$("#kyc-renewal-main .document-upload-section .kyc-renewal-doc-upload").css("display","block"),$("#kyc-renewal-main .document-upload-section .doc-upload-buttons-group").css("display","block"),$("#kyc-renewal-main .kyc-renewel-verify-now-screen .tabs-block .note-text-to").css("display","none"),$("#kyc-renewal-main .kyc-renewel-verify-now-screen .tabs-block .proceed-click-here-hide").css("display","block"),$("#kyc-renewal-main .kyc-renewel-verify-now-screen .tabs-block .modify-click-here-block").css("display","none"),$("#kyc-renewal-main .kyc-renewel-verify-now-screen .tabs-block .proceed-to-update").css("display","block"),$("#kyc-renewal-main .kyc-renewel-verify-now-screen .tabs-block .modify-to-update").css("display","none")):"N"==onlyPinCodeChangeUdateFlag&&0==modifyOtherFields&&1==onlyAddressLineCaseChanged?(console.log("3--------"),onClickDocUploadSubmitButton(),console.log("inside modify proceed journey"),$("#kyc-upload-form #kycRenewalDocUploadFlag").val("N"),$("#kyc-renewal-main .residenceAddressForm .check-box-modifyadress").css("display","none"),$("#kyc-renewal-main .residenceAddressForm .lap-kycrenewal-ml").css("display","none"),$("#kyc-renewal-main .residenceAddressForm").css("display","block"),$("#kyc-renewal-main .residenceAddressForm .modify-address-block").css("pointer-events","none"),$("#kyc-renewal-main .residenceAddressForm .verbg-kyc-renewal").css("display","none")):(console.log("4--------"),onClickDocUploadSubmitButton(),console.log("inside modify proceed journey"),$("#kyc-upload-form #kycRenewalDocUploadFlag").val("N"),$("#kyc-renewal-main .residenceAddressForm .check-box-modifyadress").css("display","none"),$("#kyc-renewal-main .residenceAddressForm .lap-kycrenewal-ml").css("display","none"),$("#kyc-renewal-main .residenceAddressForm").css("display","block"),$("#kyc-renewal-main .residenceAddressForm .modify-address-block").css("pointer-events","none"),$("#kyc-renewal-main .residenceAddressForm .verbg-kyc-renewal").css("display","none")));else if(console.log("9--------"),""==isModifyJourney||null==isModifyJourney||1!=isModifyJourney&&"true"!=isModifyJourney&&"true"!=isModifyJourney){console.log("11--------");var onlyPinCodeChangeUdateFlag=$("#kyc-upload-form #kycRenewalOnlyDigilockerPincodeUpdateFlag").val();console.log("inside modify proceed journey ELSE",onlyPinCodeChangeUdateFlag,onlyAddressLineCaseChanged,modifyOtherFields),"Y"==onlyPinCodeChangeUdateFlag||1==onlyAddressLineCaseChanged&&0==modifyOtherFields?(genOTPforRewewalKyc(),$("#kyc-renewal-main .manual-upate-address-kyc").css("display","block"),console.log("inside modify proceed journey"),$("#kyc-upload-form #kycRenewalDocUploadFlag").val("N"),$("#kyc-renewal-main .residenceAddressForm .check-box-modifyadress").css("display","none"),$("#kyc-renewal-main .residenceAddressForm .lap-kycrenewal-ml").css("display","none"),$("#kyc-renewal-main .residenceAddressForm").css("display","block"),$("#kyc-renewal-main .residenceAddressForm .modify-address-block").css("pointer-events","none"),$("#kyc-renewal-main .residenceAddressForm .verbg-kyc-renewal").css("display","none")):"N"==onlyPinCodeChangeUdateFlag&&1==onlyAddressLineCaseChanged&&0==modifyOtherFields?(genOTPforRewewalKyc(),$("#kyc-renewal-main .manual-upate-address-kyc").css("display","block"),console.log("inside modify proceed journey"),$("#kyc-upload-form #kycRenewalDocUploadFlag").val("N"),$("#kyc-renewal-main .residenceAddressForm .check-box-modifyadress").css("display","none"),$("#kyc-renewal-main .residenceAddressForm .lap-kycrenewal-ml").css("display","none"),$("#kyc-renewal-main .residenceAddressForm").css("display","block"),$("#kyc-renewal-main .residenceAddressForm .modify-address-block").css("pointer-events","none"),$("#kyc-renewal-main .residenceAddressForm .verbg-kyc-renewal").css("display","none")):"Y"==onlyPinCodeChangeUdateFlag&&0==onlyAddressLineCaseChanged&&0==modifyOtherFields?(genOTPforRewewalKyc(),$("#kyc-renewal-main .manual-upate-address-kyc").css("display","block"),console.log("inside modify proceed journey"),$("#kyc-upload-form #kycRenewalDocUploadFlag").val("N"),$("#kyc-renewal-main .residenceAddressForm .check-box-modifyadress").css("display","none"),$("#kyc-renewal-main .residenceAddressForm .lap-kycrenewal-ml").css("display","none"),$("#kyc-renewal-main .residenceAddressForm").css("display","block"),$("#kyc-renewal-main .residenceAddressForm .modify-address-block").css("pointer-events","none"),$("#kyc-renewal-main .residenceAddressForm .verbg-kyc-renewal").css("display","none")):(console.log("inside modify proceed journey 16511"),$("#kyc-renewal-main .document-upload-section").css("display","block"),$("#kyc-renewal-main .doc-upload-proceed-btn").addClass("gray-btn pointer-none"),$("#kyc-renewal-main .document-upload-section .doc-upload-buttons-group").css("display","block"),$("#kyc-upload-form #kycRenewalDocUploadFlag").val("Y"),$("#kyc-renewal-main .document-upload-section .kyc-renewal-doc-upload").css("display","block"),$("#kyc-renewal-main .kyc-renewel-verify-now-screen .tabs-block .note-text-to").css("display","none"),$("#kyc-renewal-main .kyc-renewel-verify-now-screen .tabs-block .proceed-click-here-hide").css("display","block"),$("#kyc-renewal-main .kyc-renewel-verify-now-screen .tabs-block .modify-click-here-block").css("display","none"),$("#kyc-renewal-main .kyc-renewel-verify-now-screen .tabs-block .proceed-to-update").css("display","block"),$("#kyc-renewal-main .kyc-renewel-verify-now-screen .tabs-block .modify-to-update").css("display","none"))}else console.log("10--------"),""!=retryStat&&null!=retryStat?$("#kyc-renewal-main .manual-upate-address-kyc").css("display","block"):$("#kyc-renewal-main .kyc-ren-options-otp-section").css("display","block"),console.log("inside modify proceed journey"),$("#kyc-renewal-main .residenceAddressForm .verbg-kyc-renewal").css("display","none"),$("#kyc-renewal-main .residenceAddressForm .lap-kycrenewal-ml").css("display","none"),$("#kyc-renewal-main .residenceAddressForm").css("pointer-events","none")}$("#kyc-renewal-main .kyc-select-card").css("display","none"),$("#kyc-renewal-main .kyc-passPhoto-box").css("display","none"),$("#kyc-renewal-main .kyc-upload-buttons").css("display","none"),$("#kyc-renewal-main .d-line").css("display","none")}function updateKYCthroughDocUpload(){console.log("kycRenewalProceedJourney ",kycRenewalProceedJourney),$("#kycrenewalProceedid #proceedModifyAdrsBtn").html("Proceed"),1==kycRenewalProceedJourney?($(".retry-with-digi-locker").css("display","none"),$(".requests .tabs-block").css("display","none"),$("#kyc-renewal-main .kyc-renewel-verify-now-screen").css("display","none"),$("#kyc-renewal-main .document-upload-section").css("display","block"),$("#kyc-renewal-main .document-upload-section .kyc-renewal-doc-upload").css("display","block"),$("#kyc-renewal-main .kyc-ren-options-otp-section").css("display","none"),$("#kyc-renewal-main .kyc-renewel-verify-now-screen .tabs-block .proceed-click-here-hide").css("display","block"),$("#kyc-renewal-main .kyc-renewel-verify-now-screen .tabs-block .modify-click-here-block").css("display","none"),$("#kyc-renewal-main .kyc-renewel-verify-now-screen .tabs-block .proceed-to-update").css("display","block"),$("#kyc-renewal-main .kyc-renewel-verify-now-screen .tabs-block .modify-to-update").css("display","none")):($("#kyc-renewal-main .kyc-renewel-verify-now-screen").css("display","none"),$("#kyc-renewal-main .residenceAddressForm").css("display","block"),$("#kyc-renewal-main .residenceAddressForm .readonly-input").css("display","none"),$("#kyc-renewal-main .residenceAddressForm .modify-address-block").css("display","block"),$("#kyc-renewal-main .residenceAddressForm .check-box-modifyadress").css("display","block"),$("#kyc-renewal-main .residenceAddressForm .verify-address").css("display","none"),$("#kyc-renewal-main .residenceAddressForm .modify-back-btn").css("display","inline-block"),$("#kyc-renewal-main .residenceAddressForm .modify-modify-btn").css("display","none"),$("#proceedModifyAdrsBtn").addClass("gray-btn kyc-signbtn"),$("#kycmodifyaddressCTA .fancy-checkbox").removeClass("checked"))}function kycRenewalPOIDocumentSectionDropdown(status){if(console.log("kycRenewalDocumentSectionDropdown",status),"POI"==status){kycRenewalDocUploadValidation=!1,$("#checkbox_ucic-check #modifyaddressChange_Check").prop("checked",!1),$("#kycmodifyaddressCTA #modifyaddressChange_Check").prop("checked",!1),$("#kyc-renewal-main .doc-upload-proceed-btn").addClass("gray-btn pointer-none"),1==kycRenewalProceedJourney&&excludeExtraFieldsDuringDocumentSubmission("reset");var selectedPOA=$("#kycRenewalPOADocumentDropdown :selected").text();resetPOIFields("POI");var value=$("#kycRenewalPOIDocumentDropdown :selected").text();"Passport"==value?(resetPOAFields("POA"),isPreviouslyPOIIsPassport=!0,selectedPOA=$("#kycRenewalPOADocumentDropdownNotPassport  :selected").text(),$(".div_to_add2 .pOAdocumentTypes").css("display","none"),$(".div_to_add2 .poaNotPassportdocumentTypes").css("display","flex"),resetPOAFieldsForNonPassport(value)):(selectedPOA=$("#kycRenewalPOADocumentDropdown :selected").text(),$(".div_to_add2 .pOAdocumentTypes").css("display","flex"),$(".div_to_add2 .poaNotPassportdocumentTypes").css("display","none"),1==isPreviouslyPOIIsPassport&&(isPreviouslyPOIIsPassport=!1,resetPOAFieldsForNonPassport(value))),console.log("value is =>>>>",value),$("#div_to_add1 .file-upload-field").val(""),$("#div_to_add1 .file-upload-wrapper").attr("data-text",""),$("#div_to_add1 .file-upload-wrapper").css("outline","none"),$("#div_to_add1 .KYC-success-upload").hide(),$("#kycRenewalPOI_consentt_check_box").prop("checked",!1),"Select"==value?(isValidKycRenewalDropdown=!1,$("#div_to_add1 .if-pan").removeClass("hidden"),$("#div_to_add1 .if-addhar").addClass("hidden"),$("#div_to_add1 #a_card").addClass("hidden"),$("#div_to_add1 #kycAddrUploadDocBox").css("margin-bottom","14px"),$(".document-upload-section #kycRenewalAadhaarConsentBoxUl").css("display","none"),$("#div_to_add1 .docScreen").text(""),$("#kycRenewalDocFileName").val(""),$(".div_to_add2 .pOAdocumentTypes").css("display","flex"),$(".div_to_add2 .poaNotPassportdocumentTypes").css("display","none")):"Voter ID Card"==value||"Driving License"==value||"Passport"==value||"Aadhaar Card"==value||"Aadhaar/UID"==value?(console.log("value if "+value),isValidKycRenewalDropdown=!0,$("#div_to_add1 .if-pan").addClass("hidden"),$("#div_to_add1 .if-addhar").removeClass("hidden"),$("#div_to_add1 .docScreen").text(value),$("#kycRenewalDocFileName").val(value),$("#div_to_add1 #a_card").removeClass("hidden"),$("#div_to_add1 .docScreentxt").html(value),$("#kycRenewalDocType").val("multiDoc"),$(".label-contact-poi").siblings(".KYC-file-error").css("display","none").find(".KYC-format-error").css({display:"none",visibility:"hidden"}).siblings(".KYC-fileSize-error").css("display","none"),"Aadhaar Card"==value||"Aadhaar/UID"==value?($("#div_to_add1 .d-image-block").removeClass("hidden"),$("#div_to_add1 .aadhar-doc-txt").removeClass("hidden"),$("#div_to_add1 #a_card .d-cntent").css("width","67%"),$("#div_to_add1 #kycRenewalPOIUploadDocBox").css("margin-bottom","0px"),"Aadhaar Card"==selectedPOA||"Aadhaar/UID"==selectedPOA||(isAadhaarCardSelected=!0,$(".document-upload-section #kycRenewalAadhaarConsentBoxUl").css("display","block")),isModifyJourney&&$(".docupload-block .docUploadConsentCheckbox").removeClass("hidden"),$(".div_to_add2 .pOAdocumentTypes").css("display","flex"),$(".div_to_add2 .poaNotPassportdocumentTypes").css("display","none")):("Voter ID Card"==value||"Driving License"==value||"Passport"==value)&&($("#div_to_add1 .d-image-block").addClass("hidden"),$("#div_to_add1 #a_card .d-cntent").css("width","100%"),$("#div_to_add1 .aadhar-doc-txt").addClass("hidden"),$("#div_to_add1 #kycRenewalPOIUploadDocBox").css("margin-bottom","14px"),"Aadhaar Card"==selectedPOA||"Aadhaar/UID"==selectedPOA?isAadhaarCardSelected=!0:(isAadhaarCardSelected=!1,$(".document-upload-section #kycRenewalAadhaarConsentBoxUl").css("display","none")),isModifyJourney&&$(".docupload-block .docUploadConsentCheckbox").addClass("hidden"))):(console.log("value if else"+value),isValidKycRenewalDropdown=!0,$("#div_to_add1 .if-pan").removeClass("hidden"),$("#div_to_add1 .if-addhar").addClass("hidden"),$(".label-contact-poi").siblings(".KYC-file-error").css("display","none").find(".KYC-format-error").css({display:"none",visibility:"hidden"}).siblings(".KYC-fileSize-error").css("display","none"),"Aadhaar Card"==selectedPOA||"Aadhaar/UID"==selectedPOA?isAadhaarCardSelected=!0:(isAadhaarCardSelected=!1,$(".document-upload-section #kycRenewalAadhaarConsentBoxUl").css("display","none")),$("#div_to_add1 #a_card").addClass("hidden"),$("#div_to_add1 .docScreen").text(""),$("#kycRenewalDocFileName").val(value),$("#kycRenewalDocType").val("singleDoc"),$("#div_to_add1 #kycRenewalPOIUploadDocBox").css("margin-bottom","14px"),isModifyJourney&&$(".docupload-block .docUploadConsentCheckbox").addClass("hidden"))
}else{kycRenewalDocUploadValidation=!1,$("#checkbox_ucic-check #modifyaddressChange_Check").prop("checked",!1),$("#kycmodifyaddressCTA #modifyaddressChange_Check").prop("checked",!1),$("#kyc-renewal-main .doc-upload-proceed-btn").addClass("gray-btn pointer-none"),1==kycRenewalProceedJourney&&excludeExtraFieldsDuringDocumentSubmission("reset"),resetPOAFields("POA");var value=$("#kycRenewalPOADocumentDropdown :selected").text(),selectedPOI=$("#kycRenewalPOIDocumentDropdown :selected").text();value="Passport"==selectedPOI?$("#kycRenewalPOADocumentDropdownNotPassport  :selected").text():$("#kycRenewalPOADocumentDropdown :selected").text(),console.log("POA value is =>>>>",value),$("#div_to_add2 .file-upload-field").val(""),$("#div_to_add2 .file-upload-wrapper").attr("data-text",""),$("#div_to_add2 .file-upload-wrapper").css("outline","none"),$("#div_to_add2 .KYC-success-upload").hide(),$("#kycRenewalPOI_consentt_check_box").prop("checked",!1),"Select"==value?(isValidKycRenewalDropdown=!1,$("#div_to_add2 .if-pan").removeClass("hidden"),$("#div_to_add2 .if-addhar").addClass("hidden"),$("#div_to_add2 #a_card").addClass("hidden"),$("#div_to_add2 #kycAddrUploadDocBox").css("margin-bottom","14px"),$(".document-upload-section #kycRenewalAadhaarConsentBoxUl").css("display","none"),$("#div_to_add2 .docScreen").text(""),$("#kycRenewalDocFileName").val("")):"Voter ID Card"==value||"Driving License"==value||"Passport"==value||"Aadhaar Card"==value||"Aadhaar/UID"==value||"OCI Card"==value?(console.log("value if "+value),isValidKycRenewalDropdown=!0,$("#div_to_add2 .if-pan").addClass("hidden"),$("#div_to_add2 .if-addhar").removeClass("hidden"),$("#div_to_add2 .docScreen").text(value),$("#kycRenewalDocFileName").val(value),$("#div_to_add2 #a_card").removeClass("hidden"),$("#div_to_add2 .docScreentxt").html(value),$("#kycRenewalDocType").val("multiDoc"),$(".label-contact-poa").siblings(".KYC-file-error").css("display","none").find(".KYC-format-error").css({display:"none",visibility:"hidden"}).siblings(".KYC-fileSize-error").css("display","none"),"Aadhaar Card"==value||"Aadhaar/UID"==value?($("#div_to_add2 .d-image-block").removeClass("hidden"),$("#div_to_add2 .aadhar-doc-txt").removeClass("hidden"),$("#div_to_add2 #a_card .d-cntent").css("width","67%"),$("#div_to_add2 #kycRenewalPOIUploadDocBox").css("margin-bottom","0px"),"Aadhaar Card"==selectedPOI||"Aadhaar/UID"==selectedPOI||(isAadhaarCardSelected=!0,$(".document-upload-section #kycRenewalAadhaarConsentBoxUl").css("display","block")),isModifyJourney&&$(".docupload-block .docUploadConsentCheckbox").removeClass("hidden")):("Voter ID Card"==value||"Driving License"==value||"Passport"==value||"OCI Card"==value)&&($("#div_to_add2 .d-image-block").addClass("hidden"),$("#div_to_add2 #a_card .d-cntent").css("width","100%"),$("#div_to_add2 .aadhar-doc-txt").addClass("hidden"),$("#div_to_add2 #kycRenewalPOIUploadDocBox").css("margin-bottom","14px"),"Aadhaar Card"==selectedPOI||"Aadhaar/UID"==selectedPOI||(isAadhaarCardSelected=!1,$(".document-upload-section #kycRenewalAadhaarConsentBoxUl").css("display","none")),isModifyJourney&&$(".docupload-block .docUploadConsentCheckbox").addClass("hidden"))):(console.log("POA value if else"+value),isValidKycRenewalDropdown=!0,$("#div_to_add2 .if-pan").removeClass("hidden"),$("#div_to_add2 .if-addhar").addClass("hidden"),$(".label-contact-poa").siblings(".KYC-file-error").css("display","none").find(".KYC-format-error").css({display:"none",visibility:"hidden"}).siblings(".KYC-fileSize-error").css("display","none"),"Aadhaar Card"==selectedPOI||"Aadhaar/UID"==selectedPOI||(isAadhaarCardSelected=!1,$(".document-upload-section #kycRenewalAadhaarConsentBoxUl").css("display","none")),$("#div_to_add2 #a_card").addClass("hidden"),$("#div_to_add2 .docScreen").text(""),$("#kycRenewalDocFileName").val(value),$("#kycRenewalDocType").val("singleDoc"),$("#div_to_add2 #kycRenewalPOIUploadDocBox").css("margin-bottom","14px"),isModifyJourney&&$(".docupload-block .docUploadConsentCheckbox").addClass("hidden"))}}function onClickDocUploadSubmitButton(status){$("#kyc-renewal-main .document-upload-section .doc-upload-buttons-group").css("display","none"),$("#kyc-renewal-main .document-upload-section .sbi-check-box-for-upload").css("display","none"),$("#kycRenewalPOI_consentt_check_box").prop("checked",!1),excludeExtraFieldsDuringDocumentSubmission("validate"),$("#kyc-renewal-main .residenceAddressForm .check-box-modifyadress").css("display","none"),$("#kyc-renewal-main .residenceAddressForm .lap-kycrenewal-ml").css("display","none"),$("#kyc-renewal-main .kycnewVerbiage").addClass("hidden"),$("#kyc-renewal-main .kycnochangErrMsg").addClass("hidden"),$("#kyc-renewal-main .skip-section").css("display","none"),$("#kyc-renewal-main .kycPincodeChangeErrMsg").addClass("hidden"),"skip"==status&&($("#kyc-upload-form #kycRenewalDocUploadFlag").val("N"),$("#kyc-renewal-main .kycnewVerbiageDigiLocker").addClass("hidden")),$(".document-upload-section .kyc-renewal-doc-upload").css("pointer-events","none");var genOtpUrl="/creditcards/app/requests/send-otp-kyc",isModifyJourney=$("#kycRenewalDigiModifyJourney").val(),isModifyButtonClicked=sessionStorage.getItem("isKycRenewalModifyJourney");console.log("OTP SECTION isModifyJourney",isModifyJourney,"isModifyButtonClicked",isModifyButtonClicked);var retryStat=$("#retryStatus").val();""==isModifyJourney||null==isModifyJourney||1!=isModifyJourney&&"true"!=isModifyJourney&&"true"!=isModifyJourney?1==isModifyButtonClicked||"true"==isModifyButtonClicked||"true"==isModifyButtonClicked?(console.log("otp section 2"),genOtpUrl="/creditcards/app/myprofile/send-otp-change-address",$("#kyc-renewal-main .manual-upate-address-kyc").css("display","block"),$("#kyc-renewal-main .kyc-ren-options-otp-section").css("display","none")):""!=isModifyJourney&&null!=isModifyJourney||""==retryStat||null==retryStat?(console.log("otp section 4"),$("#kyc-renewal-main .kyc-ren-options-otp-section").css("display","block"),$("#kyc-renewal-main .kyc-ren-options-otp-section .otp-section-block").css("display","block"),$("#kyc-renewal-main .manual-upate-address-kyc").css("display","none")):(console.log("otp section 3"),genOtpUrl="/creditcards/app/myprofile/send-otp-change-address",$("#kyc-renewal-main .manual-upate-address-kyc").css("display","block"),$("#kyc-renewal-main .kyc-ren-options-otp-section").css("display","none")):(console.log("otp section 1"),""!=retryStat&&null!=retryStat?(genOtpUrl="/creditcards/app/myprofile/send-otp-change-address",$("#kyc-renewal-main .kyc-ren-options-otp-section").css("display","none"),$("#kyc-renewal-main .kyc-ren-options-otp-section .otp-section-block").css("display","none"),$("#kyc-renewal-main .manual-upate-address-kyc").css("display","block")):(genOtpUrl="/creditcards/app/myprofile/send-otp-change-address",$("#kyc-renewal-main .kyc-ren-options-otp-section").css("display","block"),$("#kyc-renewal-main .kyc-ren-options-otp-section .otp-section-block").css("display","block"),$("#kyc-renewal-main .manual-upate-address-kyc").css("display","none"))),$.ajax({type:"GET",url:genOtpUrl,beforeSend:function(){var loaderHtml='<div class="overlay-loader"></div>';$("body").append(loaderHtml)},complete:function(){$("body").find("div.overlay-loader").remove()},success:function(response){console.log("otp response",response),$("body").find("div.overlay-loader").remove(),response.success||4==response.statusCode},error:function(){$("body").find("div.overlay-loader").remove()}})}function onClickDocUploadCancelButton(){$(".div_to_add1 .select-selected").html("Select"),$(".div_to_add2 .select-selected").html("Select");var isModifyJourney=$("#kycRenewalDigiModifyJourney").val(),isModifyButtonClicked=sessionStorage.getItem("isKycRenewalModifyJourney"),retryStat=$("#retryStatus").val();$("#kyc-renewal-main .residenceAddressForm .lap-kycrenewal-ml").css("display","block"),console.log("isModifyJourney",isModifyJourney,"isModifyButtonClicked",isModifyButtonClicked),""==isModifyJourney||null==isModifyJourney||1!=isModifyJourney&&isModifyJourney!==!0&&"true"!=isModifyJourney&&"true"!==isModifyJourney?1==isModifyButtonClicked||isModifyButtonClicked===!0||"true"==isModifyButtonClicked||"true"===isModifyButtonClicked?(console.log("cancel 2"),$("#kyc-renewal-main .document-upload-section").css("display","none"),$("#kyc-renewal-main .residenceAddressForm").css("display","block"),$("#kyc-renewal-main .kyc-renewel-verify-now-screen").css("display","none"),$("#kyc-renewal-main .residenceAddressForm .lap-kycrenewal-ml").css("display","block"),$("#modifyaddressChange_Check").prop("checked",!1),$("#proceedModifyAdrsBtn").addClass("kyc-signbtn kyc-sign-button"),$(".kycnewVerbiage, .kycnochangErrMsg").addClass("hidden"),$(".kycnochangErrMsg").addClass("hidden"),$("#kyc-renewal-main .kycnewVerbiage").addClass("hidden"),$("#kyc-renewal-main .skip-section").css("display","none"),$("#kyc-renewal-main .kycPincodeChangeErrMsg").addClass("hidden")):""!=retryStat&&null!=retryStat?(console.log("cancel 3"),$("#kyc-renewal-main .document-upload-section").css("display","none"),$("#kyc-renewal-main .residenceAddressForm").css("display","block"),$("#kyc-renewal-main .kyc-renewel-verify-now-screen").css("display","none"),$("#kyc-renewal-main .residenceAddressForm .lap-kycrenewal-ml").css("display","block"),$("#modifyaddressChange_Check").prop("checked",!1),$("#proceedModifyAdrsBtn").addClass("kyc-signbtn kyc-sign-button"),$(".kycnewVerbiage, .kycnochangErrMsg").addClass("hidden"),$(".kycnochangErrMsg").addClass("hidden"),$("#kyc-renewal-main .kycnewVerbiage").addClass("hidden"),$("#kyc-renewal-main .skip-section").css("display","none"),$("#kyc-renewal-main .kycPincodeChangeErrMsg").addClass("hidden")):(console.log("cancel 4"),$("#kyc-renewal-main .kyc-ren-options-otp-section").css("display","none"),$("#kyc-renewal-main .document-upload-section .kyc-renewal-doc-upload").css("display","none"),$("#kyc-renewal-main .kyc-renewel-verify-now-screen").css("display","block"),$("#kyc-renewal-main .kyc-renewel-verify-now-screen .tabs-block").css("display","block")):(console.log("cancel 1"),$("#kyc-renewal-main .residenceAddressForm").css("display","block"),$("#kyc-renewal-main .kyc-renewel-verify-now-screen").css("display","none"),$("#kyc-renewal-main .kyc-renewel-verify-now-screen .tabs-block .proceed-click-here-hide").css("display","block"),$("#kyc-renewal-main .kyc-renewel-verify-now-screen .tabs-block .modify-click-here-block").css("display","none"),$("#kyc-renewal-main .residenceAddressForm .lap-kycrenewal-ml").css("display","block"),$("#kyc-renewal-main .modify-address-block").css("pointer-events","auto"),$("#kyc-renewal-main .kycnewVerbiageDigiLocker").addClass("hidden"),$("#modifyaddressChange_Check").prop("checked",!1),$("#kyc-renewal-main .kyc-renewel-verify-now-screen .tabs-block .proceed-to-update").css("display","block"),$("#kyc-renewal-main .kyc-renewel-verify-now-screen .tabs-block .modify-to-update").css("display","none"),1==isModifyButtonClicked||isModifyButtonClicked===!0||"true"==isModifyButtonClicked||"true"===isModifyButtonClicked||1==kycRenewalProceedJourney&&($("#kyc-renewal-main .document-upload-section").css("display","none"),$("#kyc-renewal-main .residenceAddressForm").css("display","block"),$("#kyc-renewal-main .modify-address-block").css("display","block"),$("#kyc-renewal-main .check-box-modifyadress").css("display","block"),$("#proceedModifyAdrsBtn").addClass("kyc-signbtn kyc-sign-button"),$("#kyc-renewal-main .kyc-renewel-verify-now-screen .tabs-block .proceed-to-update").css("display","block"),$("#kyc-renewal-main .kyc-renewel-verify-now-screen .tabs-block .modify-to-update").css("display","none")),$(".kycnochangErrMsg").addClass("hidden"),$("#kyc-renewal-main .kycnewVerbiage").addClass("hidden"),$("#kyc-renewal-main .skip-section").css("display","none"),$("#kyc-renewal-main .kycPincodeChangeErrMsg").addClass("hidden")),1==kycRenewalAddOnCardSelected&&$("#kyc-renewal-main .kyc-renewel-verify-now-screen .tabs-block .proceed-to-update").css("display","none"),$("#kyc-renewal-main .residenceAddressForm").css("pointer-events","visible"),$("#kyc-renewal-main .residenceAddressForm").css("pointer-events","visible"),$("#kycRenewalPOIDocumentDropdown").val(""),$("#div_to_add1 .file-upload-field").val(""),$("#div_to_add1 .file-upload-wrapper").attr("data-text",""),$("#div_to_add1 .file-upload-wrapper").css("outline","none"),$("#div_to_add1 .KYC-success-upload").hide(),$("#div_to_add1 .if-pan").removeClass("hidden"),$("#div_to_add1 .if-addhar").addClass("hidden"),$("#div_to_add1 #a_card").addClass("hidden"),$("#div_to_add1 #kycAddrUploadDocBox").css("margin-bottom","14px"),$("#div_to_add1 .docScreen").text(""),$("#kycRenewalPOADocumentDropdown").val(""),$("#div_to_add2 .file-upload-field").val(""),$("#div_to_add2 .file-upload-wrapper").attr("data-text",""),$("#div_to_add2 .file-upload-wrapper").css("outline","none"),$("#div_to_add2 .KYC-success-upload").hide(),$("#div_to_add2 .if-pan").removeClass("hidden"),$("#div_to_add2 .if-addhar").addClass("hidden"),$("#div_to_add2 #a_card").addClass("hidden"),$("#div_to_add2 #kycAddrUploadDocBox").css("margin-bottom","14px"),$("#div_to_add2 .docScreen").text(""),$("#kycRenewalDocFileName").val(""),$(".document-upload-section #kycRenewalAadhaarConsentBoxUl").css("display","none"),$("#kycRenewalPOI_consentt_check_box").prop("checked",!1),isValidKycRenewalDropdown=!1,resetPOAFields("Cancel"),resetPOIFields("Cancel"),excludeExtraFieldsDuringDocumentSubmission("reset")}function onClickDocUploadConsentCheckbox(id){$("#"+id).is(":checked")?1==kycRenewalDocUploadValidation?(console.log("kycRenewalDocUploadValidation",kycRenewalDocUploadValidation),$("#kyc-renewal-main .doc-upload-proceed-btn").removeClass("gray-btn pointer-none")):(console.log("kycRenewalDocUploadValidation else",kycRenewalDocUploadValidation),$("#kyc-renewal-main .doc-upload-proceed-btn").addClass("gray-btn pointer-none")):$("#kyc-renewal-main .doc-upload-proceed-btn").addClass("gray-btn pointer-none")}function onChangeKycRenewalOtpField(){var kycRenewalOtpValue=$("#kycRenewalOtp").val().length;6==kycRenewalOtpValue?($(".otp-section-block .kyc-ren-submit-otp").removeClass("gray-btn pointer-none"),$('label[for="otpNumber"]').parent().find("label.valid").remove(),$('label[for="otpNumber"]').parent().find("label.error").remove(),$(".kyc-ren-options-otp-section .otp-resend-msg").css("display","none"),$(".kyc-ren-options-otp-section .otpIncorrectMsg").css("display","none"),$(".kyc-ren-options-otp-section #kycRenewalOtp").css("border","1px solid rgb(221, 221, 221)")):6>kycRenewalOtpValue&&($(".kyc-ren-options-otp-section .kyc-ren-submit-otp").addClass("gray-btn pointer-none"),$(".kyc-ren-options-otp-section .otpIncorrectMsg").html(""),$(".kyc-ren-options-otp-section .otp-resend-msg").css("display","none"),$(".kyc-ren-options-otp-section #kycRenewalOtp").css("border","1px solid rgb(221, 221, 221)"))}function onClickResendOtpForKycRenewal(){var href="/creditcards/app/requests/resend-otp-kyc",isModifyJourney=$("#kycRenewalDigiModifyJourney").val(),isModifyButtonClicked=sessionStorage.getItem("isKycRenewalModifyJourney");console.log("isModifyJourney",isModifyJourney,"isModifyButtonClicked",isModifyButtonClicked),1==isModifyJourney||isModifyJourney===!0||"true"==isModifyJourney||"true"===isModifyJourney?href="/creditcards/app/myprofile/resend-otp-address-update":(1==isModifyButtonClicked||isModifyButtonClicked===!0||"true"==isModifyButtonClicked||"true"===isModifyButtonClicked)&&(href="/creditcards/app/myprofile/resend-otp-address-update"),$.ajax({url:href,type:"POST",data:{isKycRenewal:"Y"},dataType:"json",beforeSend:function(){var loaderHtml='<div class="overlay-loader"></div>';$("body").append(loaderHtml)},complete:function(){$("body").find("div.overlay-loader").remove()},success:function(data){console.log("success ------",data),"true"==data.success||1==data.success?($("body").find("div.overlay-loader").remove(),1==data.resendEnabled||"true"==data.resendEnabled?(console.log("success=true"),$(".otp-section-block .otpIncorrectMsg").css("display","none"),$(".otp-section-block .otpIncorrectMsg").html(""),$("#kyc-renewal-main .otpExaustVerbiageMsg").css("display","none"),$("#kyc-renewal-main .otpExaustVerbiageMsg").html(""),$(".otp-section-block .otp-resend-msg").css("display","block"),$(".otp-section-block #kycRenewalOtp").val(""),$(".otp-section-block #kycRenewalOtp").css("border","1px solid rgb(221, 221, 221)"),$(".otp-section-block .kyc-ren-submit-otp").addClass("gray-btn pointer-none"),$("#kycRenewalOtp2").val(""),$(".otp-section-block #kycRenewalOtp2").css("border","1px solid #ddd")):(0==data.resendEnabled||"false"==data.resendEnabled)&&(console.log("max attempt"),$(".otp-section-block .otpIncorrectMsg").css("display","none"),$(".otp-section-block .otpIncorrectMsg").html(""),$("#kyc-renewal-main .otpExaustVerbiageMsg").css("display","block"),$("#kyc-renewal-main .otpExaustVerbiageMsg").html(data.message),$(".otp-section-block .otp-resend-msg").css("display","none"),$(".otp-section-block #kycRenewalOtp").val(""),$(".otp-section-block .kyc-ren-submit-otp").addClass("gray-btn pointer-none"),$(".otp-section-block .kyc-ren-cancel-otp").addClass("gray-btn pointer-none"),$(".otp-section-block .resend-otp-link").css("pointer-events","none"),$(".otp-section-block #kycRenewalOtp").css("border","1px solid rgb(221, 221, 221)"),$(".otp-section-block .kyc-ren-cancel-otp").css("pointer-events","none"),$(".document-upload-section .kyc-renewal-doc-upload").css("pointer-events","none"),$("#kycRenewalOtp2").val(""))):(107==data.errorCode,$("body").find("div.overlay-loader").remove())},error:function(){$("body").find("div.overlay-loader").remove()}})}function onClickOtpSubmissionForKycRenewal(){var url="/creditcards/app/requests/authenticate-otp-kyc",passphrase=$("#passphrase").val(),otpNumber=$("#kycRenewalOtp").val(),otpPassed=encryptData(otpNumber);$.ajax({type:"POST",data:{otp:otpPassed,isKycRenewal:"Y"},url:url,headers:{passphrase:passphrase},beforeSend:function(){var loaderHtml='<div class="overlay-loader"></div>';$("body").append(loaderHtml)},complete:function(){},success:function(response){console.log("authentication res",response),response.success?(console.log("authentication success"),submitKYCRenewalDocumentUploadForm()):4==response.statusCode?(console.log("inside 004 status code for landline=>"),$("body").find("div.overlay-loader").remove(),$(".otp-section-block .otpIncorrectMsg").css("display","block"),$(".otp-section-block .otpIncorrectMsg").html(response.message).css("color","red"),$("#kyc-renewal-main .otpExaustVerbiageMsg").css("display","none"),$("#kyc-renewal-main .otpExaustVerbiageMsg").html(""),$(".otp-section-block .otp-resend-msg").css("display","none"),$(".otp-section-block #kycRenewalOtp").val(""),$(".otp-section-block .kyc-ren-submit-otp").addClass("gray-btn pointer-none"),$(".otp-section-block #kycRenewalOtp").css("border","1px solid red")):2==response.statusCode&&($("body").find("div.overlay-loader").remove(),console.log("inside 002 status code for landline=>"),$("#kyc-renewal-main .otpExaustVerbiageMsg").css("display","block"),$("#kyc-renewal-main .otpExaustVerbiageMsg").html(response.message),$(".otp-section-block #kycRenewalOtp").val(""),$(".otp-section-block .resend-otp-link").css("pointer-events","none"),$(".otp-section-block #kycRenewalOtp").css("pointer-events","none"),$(".otp-section-block .kyc-ren-cancel-otp").css("pointer-events","none"),$(".otp-section-block .kyc-ren-submit-otp").addClass("gray-btn pointer-none"),$(".document-upload-section .kyc-renewal-doc-upload").css("pointer-events","none"))},error:function(){$("body").find("div.overlay-loader").remove()}})}function submitKYCRenewalDocumentUploadForm(){var maxTimeOut=$("#kyc-upload-form input:hidden[name='kyc_upload_max_timeout']").prop("value"),passPhaseVal=($("body"),$("#passphrase").val());keepUserActive(maxTimeOut);var decPassphrase=sessionStorage.otpResponse;if(sessionStorage.removeItem("otpResponse"),passPhaseVal==decPassphrase){var kycUploadForm=$("#kyc-upload-form");kycUploadForm.submit()}else $("body").find("div.overlay-loader").remove(),console.log("error in otp validation")}function onClickOtpCancelSubmissionForKycRenewal(){$("#kyc-renewal-main .otp-section-block").css("display","none"),$("#kycRenewalPOI_consentt_check_box").prop("checked",!1),console.log("addressLineUpdateFlag on cancel",addressLineUpdateFlag),1==modifyOtherFields?(1==isAadhaarCardSelected?($("#kyc-renewal-main .document-upload-section .sbi-check-box-for-upload").css("display","block"),$("#kyc-renewal-main .doc-upload-proceed-btn").addClass("gray-btn pointer-none")):($("#kyc-renewal-main .document-upload-section .sbi-check-box-for-upload").css("display","none"),$("#kyc-renewal-main .doc-upload-proceed-btn").removeClass("gray-btn pointer-none")),$(".document-upload-section .kyc-renewal-doc-upload").css("pointer-events","visible"),$("#kyc-renewal-main .document-upload-section .doc-upload-buttons-group").css("display","block"),excludeExtraFieldsDuringDocumentSubmission("reset")):($("#kyc-renewal-main .residenceAddressForm .lap-kycrenewal-ml").css("display","block"),$(".kycnewVerbiage, .kycnochangErrMsg").addClass("hidden"),$(".kycnewVerbiage, .kycnochangErrMsg").addClass("hidden"),$("#kyc-renewal-main .kycPincodeChangeErrMsg").addClass("hidden"),$("#kycmodifyaddressCTA #modifyaddressChange_Check").prop("checked",!1),$("#checkbox_ucic-check #modifyaddressChange_Check").prop("checked",!1),$("#modifyaddressChange_Check").prop("checked",!1)),$("#kyc-renewal-main .otpExaustVerbiageMsg").css("display","none"),$("#kyc-renewal-main .otpExaustVerbiageMsg").html(""),$(".otp-section-block #kycRenewalOtp2").val(""),$(".otp-section-block .kyc-ren-submit-otp").addClass("gray-btn pointer-none"),$(".check-box-modifyadress").css("display","block"),$("#kyc-renewal-main .modify-address-block").css("pointer-events","auto"),$("#kycrenewalProceedid").css("display","block"),$("#proceedModifyAdrsBtn").addClass("kyc-signbtn kyc-sign-button"),$(".otp-section-block .otp-resend-msg").css("display","none"),$(".otp-section-block .otpIncorrectMsg").css("display","none"),$(".otp-section-block #kycRenewalOtp2").css("border","1px solid #ddd")}function validateKYCRenewalDocumentFields(file,value,fileName){console.log("inside custom function file",file),$(".document-upload-section .file-upload-field").parent(".file-upload-wrapper").hasClass("addr-single-doc")?console.log("single"):$(".document-upload-section .file-upload-field").parent(".file-upload-wrapper").hasClass("addr-front-doc")?console.log("front"):$(".document-upload-section .file-upload-field").parent(".file-upload-wrapper").hasClass("addr-back-doc")&&console.log("back"),$(this).parent(".file-upload-wrapper").attr("data-text",value.replace(/.*(\/|\\)/,"")),$(this).attr("value",fileName);var docBox=value;if(console.log("docBox-----------"+docBox),""===docBox)return console.log("file blank uploaded REN"),$(".document-upload-section .doc-upload-proceed-btn").addClass("gray-btn pointer-none"),$(this).parent().parent().parent().parent().find(".KYC-field-error").css("display","none"),$(".document-upload-section .KYC-field-valid").css("display","none"),$(this).parent().parent().parent().find(".file-upload-wrapper").css("outline","none"),$(this).parent().parent().parent().parent().find(".KYC-file-error").css("visibility","hidden"),isValidKycRenewalUploadFormat=!1,isValidKycRenewalUploadSize=!1,$(this).parent().parent().parent().parent().find(".KYC-file-error").css("display","none"),void $(this).parent().parent().parent().parent().find(".KYC-file-valid").css("display","none");console.log("file not blank uploaded REN");var MBsize=file.size/1048576,ext=file.name.split(".").pop().toLowerCase();"png"!==ext&&"jpeg"!==ext&&"pdf"!==ext&&"tiff"!==ext&&"gif"!==ext&&"jpg"!==ext?(console.log("incorrect format REN"),$(this).parent().parent().parent().parent().find(".KYC-file-error .KYC-format-error").css("display","block"),isValidKycRenewalUploadFormat=!1):(console.log(" format REN"),$(this).parent().parent().parent().parent().find(".KYC-file-error .KYC-format-error").css("display","none"),isValidKycRenewalUploadFormat=!0),5>MBsize?(console.log("format1 REN"),$(this).parent().parent().parent().parent().find(".KYC-file-error .KYC-fileSize-error").css("display","none"),isValidKycRenewalUploadSize=!0):(console.log(" incorrect format2 REN"),$(this).parent().parent().parent().parent().find(".KYC-file-error .KYC-fileSize-error").css("display","block"),isValidKycRenewalUploadSize=!1),console.log(" FLAG REN",isValidKycRenewalUploadFormat,isValidKycRenewalUploadSize),isValidKycRenewalUploadFormat&&isValidKycRenewalUploadSize?(console.log("format4 REN",$("#kycRenewalDocType").val()),$(this).parent().parent().parent().parent().find(".KYC-field-error").css("display","none"),$(this).parent().parent().parent().find(".file-upload-wrapper").css("outline","none"),$(this).parent().parent().parent().parent().find(".KYC-file-error").css("visibility","hidden"),$(this).parent().parent().parent().parent().find(".KYC-file-error").css("display","none"),"multiDoc"==$("#kycRenewalDocType").val()?$(".if-addhar .KYC-file-error").is(":visible")?(console.log("incorrect doc upload"),$("#kycRenewalCorrectDocUpload").val(!1)):(console.log("correct doc upload"),$("#kycRenewalCorrectDocUpload").val(!0)):($(".document-upload-section .KYC-field-valid").css("display","inline-block"),$(".document-upload-section .KYC-file-valid").css("visibility","visible"),$(".document-upload-section .KYC-success-upload").css("display","block"),$(".document-upload-section .KYC-file-valid").css("display","block"))):(console.log("incorrect format3 REN"),$(this).parent().parent().parent().parent().find(".KYC-field-error").css("display","inline-block"),$(".document-upload-section .KYC-field-valid").css("display","none"),$(this).parent().parent().parent().find(".file-upload-wrapper").css("outline","1px solid red"),$(this).parent().parent().parent().parent().find(".KYC-file-error").css("visibility","visible"),$(this).parent().parent().parent().parent().find(".KYC-file-error").css("display","block")),isKYCRenewalSubmitValid()}function isKYCRenewalSubmitValid(){if(isValidKycRenewalDropdown&&isValidKycRenewalUploadSize&&isValidKycRenewalUploadFormat){console.log("correct !");var poiValue=$("#kycRenewalPOIDocumentDropdown :selected").text(),poaValue=$("#kycRenewalPOADocumentDropdown :selected").text();poaValue="Passport"==poiValue?$("#kycRenewalPOADocumentDropdownNotPassport  :selected").text():$("#kycRenewalPOADocumentDropdown :selected").text(),"NREGA Card"!=poiValue&&"e-FFRO Letter"!=poiValue&&"NRI/PIO/Foreign National Documents"!=poiValue&&"Letter issued by the National Population Register containing details of name and address"!=poiValue||"NREGA Card"!=poaValue&&"e-FFRO Letter"!=poaValue&&"NRI/PIO/Foreign National Documents"!=poaValue&&"Letter issued by the National Population Register containing details of name and address"!=poaValue&&"e-FFRO Letter"!=poaValue&&"NRI/PIO/Foreign National Documents"!=poaValue?"NREGA Card"!=poiValue&&"e-FFRO Letter"!=poiValue&&"NRI/PIO/Foreign National Documents"!=poiValue&&"Letter issued by the National Population Register containing details of name and address"!=poiValue&&"NREGA Card"!=poaValue&&"e-FFRO Letter"!=poaValue&&"NRI/PIO/Foreign National Documents"!=poaValue&&"Letter issued by the National Population Register containing details of name and address"!=poaValue&&"e-FFRO Letter"!=poaValue&&"NRI/PIO/Foreign National Documents"!=poaValue?(console.log("%c DOC upload else if ","color:red"),""!=$(".div_to_add1 .addr-front-doc").val()&&""!=$(".div_to_add1 .addr-back-doc").val()&&($(".div_to_add1 .KYC-file-valid").removeClass("hidden"),$(".div_to_add1 .if-addhar .KYC-file-valid").css({visibility:"visible",display:"block"}),$(".div_to_add1 .if-addhar .KYC-success-upload").show()),""!=$(".div_to_add2 .addr-front-doc").val()&&""!=$(".div_to_add2 .addr-back-doc").val()&&($(".div_to_add2 .KYC-file-valid").removeClass("hidden"),$(".div_to_add2 .if-addhar .KYC-file-valid").css({visibility:"visible",display:"block"}),$(".div_to_add2 .if-addhar .KYC-success-upload").show()),""!=$(".div_to_add1 .addr-front-doc").val()&&""!=$(".div_to_add1 .addr-back-doc").val()&&""!=$(".div_to_add2 .addr-front-doc").val()&&""!=$(".div_to_add2 .addr-back-doc").val()?("Aadhaar Card"==poiValue||"Aadhaar/UID"==poiValue||"Aadhaar Card"==poaValue||"Aadhaar/UID"==poaValue?(console.log("aadhar selected"),$(".document-upload-section #kycRenewalAadhaarConsentBoxUl").css("display","block")):($(".document-upload-section #kycRenewalAadhaarConsentBoxUl").css("display","none"),$(".document-upload-section .doc-upload-proceed-btn").removeClass("gray-btn pointer-none")),kycRenewalDocUploadValidation=!0):kycRenewalDocUploadValidation=!1):"NREGA Card"!=poiValue&&"e-FFRO Letter"!=poiValue&&"NRI/PIO/Foreign National Documents"!=poiValue&&"Letter issued by the National Population Register containing details of name and address"!=poiValue||"NREGA Card"==poaValue||"e-FFRO Letter"==poaValue||"NRI/PIO/Foreign National Documents"==poaValue||"Letter issued by the National Population Register containing details of name and address"==poaValue||"e-FFRO Letter"==poaValue||"NRI/PIO/Foreign National Documents"==poaValue?"NREGA Card"==poiValue||"e-FFRO Letter"==poiValue||"NRI/PIO/Foreign National Documents"==poiValue||"Letter issued by the National Population Register containing details of name and address"==poiValue||"NREGA Card"!=poaValue&&"e-FFRO Letter"!=poaValue&&"NRI/PIO/Foreign National Documents"!=poaValue&&"Letter issued by the National Population Register containing details of name and address"!=poaValue?kycRenewalDocUploadValidation=!1:(console.log("%c DOC upload else if 2","color:red"),""!=$(".div_to_add1 .addr-front-doc").val()&&""!=$(".div_to_add1 .addr-back-doc").val()&&($(".div_to_add1 .KYC-file-valid").removeClass("hidden"),$(".div_to_add1 .if-addhar .KYC-file-valid").css({visibility:"visible",display:"block"}),$(".div_to_add1 .if-addhar .KYC-success-upload").show()),""!=$(".div_to_add2 .addr-single-doc").val()&&($(".div_to_add2 .KYC-file-valid").removeClass("hidden"),$(".div_to_add2 .if-addhar .KYC-file-valid").css({visibility:"visible",display:"block"}),$(".div_to_add2 .if-addhar .KYC-success-upload").show()),""!=$(".div_to_add1 .addr-front-doc").val()&&""!=$(".div_to_add1 .addr-back-doc").val()&&""!=$(".div_to_add2 .addr-single-doc").val()?("Aadhaar Card"==poiValue||"Aadhaar/UID"==poiValue||"Aadhaar Card"==poaValue||"Aadhaar/UID"==poaValue?(console.log("aadhar selected"),$(".document-upload-section #kycRenewalAadhaarConsentBoxUl").css("display","block")):($(".document-upload-section #kycRenewalAadhaarConsentBoxUl").css("display","none"),$(".document-upload-section .doc-upload-proceed-btn").removeClass("gray-btn pointer-none")),kycRenewalDocUploadValidation=!0):kycRenewalDocUploadValidation=!1):(console.log("%c DOC upload else if 1","color:red"),""!=$(".div_to_add1 .addr-single-doc").val()&&($(".div_to_add1 .KYC-file-valid").removeClass("hidden"),$(".div_to_add1 .if-addhar .KYC-file-valid").css({visibility:"visible",display:"block"}),$(".div_to_add1 .if-addhar .KYC-success-upload").show()),""!=$(".div_to_add2 .addr-front-doc").val()&&""!=$(".div_to_add2 .addr-back-doc").val()&&($(".div_to_add2 .KYC-file-valid").removeClass("hidden"),$(".div_to_add2 .if-addhar .KYC-file-valid").css({visibility:"visible",display:"block"}),$(".div_to_add2 .if-addhar .KYC-success-upload").show()),""!=$(".div_to_add1 .addr-single-doc").val()&&""!=$(".div_to_add2 .addr-front-doc").val()&&""!=$(".div_to_add2 .addr-back-doc").val()?("Aadhaar Card"==poiValue||"Aadhaar/UID"==poiValue||"Aadhaar Card"==poaValue||"Aadhaar/UID"==poaValue?(console.log("aadhar selected"),$(".document-upload-section #kycRenewalAadhaarConsentBoxUl").css("display","block")):($(".document-upload-section #kycRenewalAadhaarConsentBoxUl").css("display","none"),$(".document-upload-section .doc-upload-proceed-btn").removeClass("gray-btn pointer-none")),kycRenewalDocUploadValidation=!0):kycRenewalDocUploadValidation=!1):(console.log("%c DOC upload if ","color:red"),""!=$(".div_to_add1 .addr-single-doc").val()&&($(".div_to_add1 .KYC-file-valid").removeClass("hidden"),$(".div_to_add1 .if-addhar .KYC-file-valid").css({visibility:"visible",display:"block"}),$(".div_to_add1 .if-addhar .KYC-success-upload").show()),""!=$(".div_to_add2 .addr-single-doc").val()&&($(".div_to_add2 .KYC-file-valid").removeClass("hidden"),$(".div_to_add2 .if-addhar .KYC-file-valid").css({visibility:"visible",display:"block"}),$(".div_to_add2 .if-addhar .KYC-success-upload").show()),""!=$(".div_to_add1 .addr-single-doc").val()&&""!=$(".div_to_add2 .addr-single-doc").val()?($(".document-upload-section .doc-upload-proceed-btn").removeClass("gray-btn pointer-none"),kycRenewalDocUploadValidation=!0):kycRenewalDocUploadValidation=!1)
}else console.log("correct not !"),$(".document-upload-section .doc-upload-proceed-btn").addClass("gray-btn pointer-none"),isDocUploadForAadhaarValid=!1;($(".KYC-file-error").is(":visible")||$(".KYC-format-error").is(":visible")||$(".KYC-fileSize-error").is(":visible"))&&(console.log("correct not !"),$(".document-upload-section .doc-upload-proceed-btn").addClass("gray-btn pointer-none"),isDocUploadForAadhaarValid=!1,kycRenewalDocUploadValidation=!1)}function resetPOIFields(flag){$(".div_to_add1 .id-proof-1").val(""),$(".div_to_add1 .addr-front-doc").val(""),$(".div_to_add1 .id_proof_1").val(""),$(".div_to_add1 .id-proof-2").val(""),$(".div_to_add1 .addr-back-doc").val(""),$(".div_to_add1 .id_proof_2").val(""),$(".div_to_add1 .id-proof").val(""),$(".div_to_add1 .addr-single-doc").val(""),$(".div_to_add1 .id_proof").val(""),"cancel"!=flag&&$(".document-upload-section .doc-upload-proceed-btn").addClass("gray-btn pointer-none")}function resetPOAFields(flag){$(".div_to_add2 .addr-proof-1").val(""),$(".div_to_add2 .addr-front-doc").val(""),$(".div_to_add2 .addr_proof_1").val(""),$(".div_to_add2 .addr-proof-2").val(""),$(".div_to_add2 .addr-back-doc").val(""),$(".div_to_add2 .addr_proof_2").val(""),$(".div_to_add2 .addr-proof").val(""),$(".div_to_add2 .addr-single-doc").val(""),$(".div_to_add2 .addr_proof").val(""),"Cancel"!=flag&&$(".document-upload-section .doc-upload-proceed-btn").addClass("gray-btn pointer-none")}function excludeExtraFieldsDuringDocumentSubmission(flag){var poiValue=$("#kycRenewalPOIDocumentDropdown :selected").text(),poaValue=$("#kycRenewalPOADocumentDropdown :selected").text();poaValue="Passport"==poiValue?$("#kycRenewalPOADocumentDropdownNotPassport  :selected").text():$("#kycRenewalPOADocumentDropdown :selected").text(),console.log("flag",flag),console.log("poiValue",poiValue,"poaValue",poaValue),"validate"==flag&&""!=poiValue&&""!=poaValue?(console.log("%c inside if","color:red"),"NREGA Card"!=poiValue||"NREGA Card"!=poaValue&&"e-FFRO Letter"!=poaValue&&"NRI/PIO/Foreign National Documents"!=poaValue?"NREGA Card"!=poiValue&&"NREGA Card"!=poaValue&&"e-FFRO Letter"!=poaValue&&"NRI/PIO/Foreign National Documents"!=poaValue?(console.log("%c inside else if 1","color:red"),$('input[name="id-proof"]').prop("disabled",!0),$('input[name="PHOTO_ID_PROOF"]').prop("disabled",!0),$('input[name="id_proof"]').prop("disabled",!0),$('input[name="addr-proof"]').prop("disabled",!0),$('input[name="ADDRESS_PROOF"]').prop("disabled",!0),$('input[name="addr_proof"]').prop("disabled",!0)):"NREGA Card"==poiValue&&"NREGA Card"!=poaValue&&"e-FFRO Letter"!=poaValue&&"NRI/PIO/Foreign National Documents"!=poaValue?(console.log("%c inside else if 2","color:red"),$('input[name="id-proof-1"]').prop("disabled",!0),$('input[name="PHOTO_ID_PROOF1"]').prop("disabled",!0),$('input[name="id_proof_1"]').prop("disabled",!0),$('input[name="id-proof-2"]').prop("disabled",!0),$('input[name="PHOTO_ID_PROOF2"]').prop("disabled",!0),$('input[name="id_proof_2"]').prop("disabled",!0),$('input[name="addr-proof"]').prop("disabled",!0),$('input[name="ADDRESS_PROOF"]').prop("disabled",!0),$('input[name="addr_proof"]').prop("disabled",!0)):"NREGA Card"==poiValue||"NREGA Card"!=poaValue&&"e-FFRO Letter"!=poaValue&&"NRI/PIO/Foreign National Documents"!=poaValue||(console.log("%c inside else if 3","color:red"),$('input[name="id-proof"]').prop("disabled",!0),$('input[name="PHOTO_ID_PROOF"]').prop("disabled",!0),$('input[name="id_proof"]').prop("disabled",!0),$('input[name="addr-proof-1"]').prop("disabled",!0),$('input[name="ADDRESS_PROOF1"]').prop("disabled",!0),$('input[name="addr_proof_1"]').prop("disabled",!0),$('input[name="addr-proof-2"]').prop("disabled",!0),$('input[name="ADDRESS_PROOF2"]').prop("disabled",!0),$('input[name="addr_proof_2"]').prop("disabled",!0)):(console.log("%c inside if","color:red"),$('input[name="id-proof-1"]').prop("disabled",!0),$('input[name="PHOTO_ID_PROOF1"]').prop("disabled",!0),$('input[name="id_proof_1"]').prop("disabled",!0),$('input[name="id-proof-2"]').prop("disabled",!0),$('input[name="PHOTO_ID_PROOF2"]').prop("disabled",!0),$('input[name="id_proof_2"]').prop("disabled",!0),$('input[name="addr-proof-1"]').prop("disabled",!0),$('input[name="ADDRESS_PROOF1"]').prop("disabled",!0),$('input[name="addr_proof_1"]').prop("disabled",!0),$('input[name="addr-proof-2"]').prop("disabled",!0),$('input[name="ADDRESS_PROOF2"]').prop("disabled",!0),$('input[name="addr_proof_2"]').prop("disabled",!0))):(console.log("%c inside else","color:red"),$('input[name="id-proof"]').removeAttr("disabled"),$('input[name="PHOTO_ID_PROOF"]').removeAttr("disabled"),$('input[name="id_proof"]').removeAttr("disabled"),$('input[name="id-proof-1"]').removeAttr("disabled"),$('input[name="PHOTO_ID_PROOF1"]').removeAttr("disabled"),$('input[name="id_proof_1"]').removeAttr("disabled"),$('input[name="id-proof-2"]').removeAttr("disabled"),$('input[name="PHOTO_ID_PROOF2"]').removeAttr("disabled"),$('input[name="id_proof_2"]').removeAttr("disabled"),$('input[name="addr-proof"]').removeAttr("disabled"),$('input[name="ADDRESS_PROOF"]').removeAttr("disabled"),$('input[name="addr_proof"]').removeAttr("disabled"),$('input[name="addr-proof-1"]').removeAttr("disabled"),$('input[name="ADDRESS_PROOF1"]').removeAttr("disabled"),$('input[name="addr_proof_1"]').removeAttr("disabled"),$('input[name="addr-proof-2"]').removeAttr("disabled"),$('input[name="ADDRESS_PROOF2"]').removeAttr("disabled"),$('input[name="addr_proof_2"]').removeAttr("disabled"))}function StateListKycRenewelModifyAddress(){var hiddenState=$("input[name=userResidenceState]").val().trim().toUpperCase(),hiddenCompanyState=$("input[name=userCompanyState]").val().trim().toUpperCase();makeAjaxWithLoader({url:"/creditcards/app/myprofile/stateList",type:"POST",data:"",success:function(data){console.log("stateListdata",data),$("body").find("div.overlay-loader").remove();try{console.log("state"+data),statesDetail=data,$("select.dynPin").fancySelect(),$("select.dynCity").fancySelect(),$("select.dynState").renderStateDropDown();for(var i=0;i<=statesDetail.length;i++)void 0!=hiddenState&&""!=hiddenState&&null!=hiddenState&&statesDetail[i].CODE_MASTER_HIGH_VAL.toUpperCase()==hiddenState.toUpperCase()&&$("#residenceState  option[value='"+hiddenState+"']").prop("selected",!0).change(),void 0!=hiddenCompanyState&&""!=hiddenCompanyState&&null!=hiddenCompanyState&&statesDetail[i].CODE_MASTER_HIGH_VAL.toUpperCase()==hiddenCompanyState.toUpperCase()&&$("#companyState  option[value='"+hiddenCompanyState+"']").prop("selected",!0).change();$("#residenceState").trigger("update.fs"),$("#residenceZipCode").trigger("update.fs");var userAgent=navigator.userAgent||navigator.vendor||window.opera,isAndroid=/android/i.test(userAgent);isiOS?$("#residenceState, #residenceCity, #residenceZipCode, #country_code, #companyState, #companyCity, #companyZipCode, #companyCountry_code").fancySelect({forceiOS:!0}):isAndroid&&$("#residenceState, #residenceCity, #residenceZipCode, #country_code, #companyState, #companyCity, #companyZipCode, #companyCountry_code").fancySelect()}catch(e){}},error:function(){}})}function KycaddressValidatorSelectbox(event){console.log("kycaddressValidatorSelectbox"),$("#multiAccDataFlagkycrenewal").exists(),$("#modifyaddressChange_Check").prop("checked",!1),$("#modifyaddressChange_Check").parent(".fancy-checkbox").removeClass("checked",!1),$(".kycrenewalProceedbtn").addClass("kyc-sign-button gray-btn"),$(".newVerbiageforAddressChangeJourney .kycnochangErrMsg").addClass("hidden"),$(".newVerbiageforAddressChangeJourney .kycnewVerbiage").addClass("hidden"),$("#kyc-renewal-main .kycnewVerbiageDigiLocker").addClass("hidden"),$("#kyc-renewal-main .skip-section").css("display","none"),$("#kyc-renewal-main .kycPincodeChangeErrMsg").addClass("hidden"),("residenceState"==event.target.id||"residenceCity"==event.target.id)&&(addressLineUpdateFlag=!0,$("#kyc-upload-form #kycRenewalOnlyDigilockerPincodeUpdateFlag").val("N"),$("#kyc-upload-form #kycRenewalDocUploadFlag").val("Y"),$("#modifyaddressChange_Check").prop("checked",!1),$("#residenceAddressNonEditState").val()==$("#residenceState").val()?1==modifyOtherFields||(modifyOtherFields=!1):modifyOtherFields=!0,$("#residenceAddressNonEditCity").val()==$("#residenceCity").val()?1==modifyOtherFields||(modifyOtherFields=!1):modifyOtherFields=!0),"residenceZipCode"==event.target.id&&($("#residenceAddressContdNonEditPincode").val()==$("#residenceZipCode").val()?(console.log("if"),$("#kyc-upload-form #kycRenewalOnlyDigilockerPincodeUpdateFlag").val("N")):1==onlyAddressLineCaseChanged&&1==modifyOtherFields?(console.log("else if"),modifyOtherFields=!0,$("#kyc-upload-form #kycRenewalOnlyDigilockerPincodeUpdateFlag").val("N")):1==onlyAddressLineCaseChanged&&0==modifyOtherFields?(console.log("else if 1"),modifyOtherFields=!1,onlyAddressLineCaseChanged=!1,$("#kyc-upload-form #kycRenewalOnlyDigilockerPincodeUpdateFlag").val("Y")):0==onlyAddressLineCaseChanged&&1==modifyOtherFields?(onlyAddressLineCaseChanged=!1,$("#kyc-upload-form #kycRenewalOnlyDigilockerPincodeUpdateFlag").val("N")):(console.log("if else else"),modifyOtherFields=!1,$("#kyc-upload-form #kycRenewalOnlyDigilockerPincodeUpdateFlag").val("Y")),$("#modifyaddressChange_Check").prop("checked",!1))}function kycaddressValidatorOptionalbox(event){console.log("kycaddressValidatorOptionalbox"),$("#multiAccDataFlagkycrenewal").exists(),$("#modifyaddressChange_Check").parent(".fancy-checkbox").removeClass("checked",!1),$("#modifyaddressChange_Check").prop("checked",!1),$(".kycrenewalProceedbtn").addClass("kyc-sign-button gray-btn"),$(".newVerbiageforAddressChangeJourney .kycnewVerbiage").addClass("hidden"),$(".newVerbiageforAddressChangeJourney .kycnochangErrMsg").addClass("hidden"),$("#kyc-renewal-main .skip-section").css("display","none"),$("#kyc-renewal-main .kycnewVerbiageDigiLocker").addClass("hidden"),$("#kyc-renewal-main .kycPincodeChangeErrMsg").addClass("hidden");$("#kyc-upload-form #residenceAddress").val(),$("#kyc-upload-form #residenceAddressContd").val();$("#modifyaddressChange_Check").prop("checked",!1),$("#modifyaddressChange_Check").val(!1),("residenceAddress"==event.target.id||"residenceAddressContd"==event.target.id)&&($(".newVerbiageforAddressChangeJourney .kycnewVerbiage").addClass("hidden"),$("#residenceAddressNonEdit").val().toLowerCase()===$("#residenceAddress").val().toLowerCase()&&$("#residenceAddressContdNonEdit").val().toLowerCase()===$("#residenceAddressContd").val().toLowerCase(),$(".kycrenewalProceedbtn").addClass("kyc-sign-button gray-btn"),$(".newVerbiageforAddressChangeJourney .kycnochangErrMsg").addClass("hidden"),$("#modifyaddressChange_Check").prop("checked",!1),$("#modifyaddressChange_Check").parent(".fancy-checkbox").removeClass("checked",!1),$(".kycrenewalProceedbtn").addClass("kyc-sign-button gray-btn"),$("#kyc-upload-form #digilockerAddressEditFlag").val("Y"),$("#kyc-upload-form #kycRenewalDocUploadFlag").val("Y"),"residenceAddress"==event.target.id?addressLineOneChanged=!0:"residenceAddressContd"==event.target.id&&(addressLineTwoChanged=!0))}function kycEnableProceedOtpbtn(id){if($("#"+id).is(":checked")){var kycRenewalDigiModifyJourney=$("#kycRenewalDigiModifyJourney").val(),retryStat=$("#retryStatus").val(),onlyPindCodeChange=$("#kyc-upload-form #kycRenewalOnlyDigilockerPincodeUpdateFlag").val();console.log(kycRenewalDigiModifyJourney,"onlyPindCodeChange",onlyPindCodeChange,"modifyOtherFields",modifyOtherFields,"onlyAddressLineCaseChanged",onlyAddressLineCaseChanged,"digiModifyButtonClick",digiModifyButtonClick),checkUpperCaseLowerCaseForKycRenewal(),console.log("after-----",kycRenewalDigiModifyJourney,"onlyPindCodeChange",onlyPindCodeChange,"modifyOtherFields",modifyOtherFields,"onlyAddressLineCaseChanged",onlyAddressLineCaseChanged,"digiModifyButtonClick",digiModifyButtonClick),""==kycRenewalDigiModifyJourney||null==kycRenewalDigiModifyJourney||1!=kycRenewalDigiModifyJourney&&"true"!=kycRenewalDigiModifyJourney&&"true"!=kycRenewalDigiModifyJourney?(console.log("inside manual modify journey"),"Y"==onlyPindCodeChange||1==modifyOtherFields||1==onlyAddressLineCaseChanged?$("#change-address-form").valid()&&(console.log("inside manual modify journey-----------"),"Y"==onlyPindCodeChange&&0==modifyOtherFields&&0==onlyAddressLineCaseChanged?(console.log("%c inside if","color:red"),$("#kyc-renewal-main .kycnewVerbiage").addClass("hidden"),$("#kyc-renewal-main .kycnochangErrMsg").addClass("hidden"),$("#kyc-renewal-main .skip-section").css("display","none"),$("#kyc-renewal-main .kycPincodeChangeErrMsg").removeClass("hidden"),$(".kycrenewalProceedbtn").addClass("kyc-sign-button gray-btn")):"N"==onlyPindCodeChange&&1==modifyOtherFields&&0==onlyAddressLineCaseChanged||"Y"==onlyPindCodeChange&&1==modifyOtherFields&&0==onlyAddressLineCaseChanged?(console.log("%c inside else if","color:red",onlyAddressLineCaseChanged),$(".kycrenewalProceedbtn").removeClass("kyc-sign-button gray-btn"),$("#kyc-renewal-main .residenceAddressForm .verbg-kyc-renewal").css("display","block"),$("#kyc-renewal-main .kycnewVerbiage").removeClass("hidden"),$("#kyc-renewal-main .kycnochangErrMsg").addClass("hidden"),$("#kyc-renewal-main .skip-section").css("display","none"),$("#kyc-renewal-main .kycPincodeChangeErrMsg").addClass("hidden")):"N"==onlyPindCodeChange&&0==modifyOtherFields&&1==onlyAddressLineCaseChanged?(console.log("%c inside else if1","color:red",onlyAddressLineCaseChanged),$(".kycrenewalProceedbtn").addClass("kyc-sign-button gray-btn"),$("#kyc-renewal-main .residenceAddressForm .verbg-kyc-renewal").css("display","block"),$("#kyc-renewal-main .kycnochangErrMsg").removeClass("hidden"),$("#kyc-renewal-main .kycnewVerbiage").addClass("hidden"),$("#kyc-renewal-main .skip-section").css("display","none"),$("#kyc-renewal-main .kycPincodeChangeErrMsg").addClass("hidden")):"Y"==onlyPindCodeChange&&0==modifyOtherFields&&1==onlyAddressLineCaseChanged?(console.log("%c inside else if2","color:red",onlyAddressLineCaseChanged),$(".kycrenewalProceedbtn").removeClass("kyc-sign-button gray-btn"),$("#kyc-renewal-main .kycnochangErrMsg").addClass("hidden"),$("#kyc-renewal-main .kycnewVerbiage").addClass("hidden"),$("#kyc-renewal-main .skip-section").css("display","none"),$("#kyc-renewal-main .kycPincodeChangeErrMsg").addClass("hidden")):(console.log("%c onlyPindCodeChange -----","color:blue"),$(".kycrenewalProceedbtn").addClass("kyc-sign-button gray-btn"),$("#kyc-renewal-main .kycnewVerbiage").addClass("hidden"),$("#kyc-renewal-main .residenceAddressForm .verbg-kyc-renewal").css("display","block"),$("#kyc-renewal-main .kycnochangErrMsg").removeClass("hidden"),$("#kyc-renewal-main .skip-section").css("display","none"),$("#kyc-renewal-main .kycPincodeChangeErrMsg").addClass("hidden"))):(console.log("%c onlyPindCodeChange","color:blue"),$("#change-address-form").valid()&&($(".kycrenewalProceedbtn").addClass("kyc-sign-button gray-btn"),$("#kyc-renewal-main .kycnewVerbiage").addClass("hidden"),$("#kyc-renewal-main .residenceAddressForm .verbg-kyc-renewal").css("display","block"),$("#kyc-renewal-main .kycnochangErrMsg").removeClass("hidden"),$("#kyc-renewal-main .skip-section").css("display","none"),$("#kyc-renewal-main .kycPincodeChangeErrMsg").addClass("hidden")))):(console.log("inside modify journey"),0==digiModifyButtonClick&&"N"==onlyPindCodeChange&&0==modifyOtherFields&&0==onlyAddressLineCaseChanged?(""==retryStat||null==retryStat)&&$(".kycrenewalProceedbtn").removeClass("kyc-sign-button gray-btn"):("Y"==onlyPindCodeChange||1==modifyOtherFields||1==onlyAddressLineCaseChanged)&&$("#change-address-form").valid()&&("Y"==onlyPindCodeChange&&0==modifyOtherFields&&0==onlyAddressLineCaseChanged?(console.log("%c digi inside if","color:red"),$("#kyc-renewal-main .kycnewVerbiageDigiLocker").addClass("hidden"),$("#kyc-renewal-main .skip-section").css("display","none"),$("#kyc-upload-form #kycRenewalDigilockerAddressEditFlag").val("Y"),""!=retryStat&&null!=retryStat?($("#kyc-renewal-main .kycPincodeChangeErrMsg").removeClass("hidden"),$(".kycrenewalProceedbtn").addClass("kyc-sign-button gray-btn")):($("#kyc-renewal-main .kycPincodeChangeErrMsg").addClass("hidden"),$(".kycrenewalProceedbtn").removeClass("kyc-sign-button gray-btn"))):"N"==onlyPindCodeChange&&1==modifyOtherFields&&0==onlyAddressLineCaseChanged||"Y"==onlyPindCodeChange&&1==modifyOtherFields&&0==onlyAddressLineCaseChanged?(console.log("%c digi inside else if","color:red"),$(".kycrenewalProceedbtn").removeClass("kyc-sign-button gray-btn"),$("#kyc-renewal-main .residenceAddressForm .verbg-kyc-renewal").css("display","block"),$("#kyc-renewal-main .kycPincodeChangeErrMsg").addClass("hidden"),""!=retryStat&&null!=retryStat?($("#kyc-renewal-main .kycnewVerbiage").removeClass("hidden"),$("#kyc-renewal-main .kycnewVerbiageDigiLocker").addClass("hidden")):($("#kyc-renewal-main .kycnewVerbiageDigiLocker").removeClass("hidden"),$("#kyc-renewal-main .kycnewVerbiage").addClass("hidden"),$("#kyc-renewal-main .skip-section").css("display","block"),$("#kyc-upload-form #kycRenewalDigilockerAddressEditFlag").val("Y"))):"N"==onlyPindCodeChange&&0==modifyOtherFields&&1==onlyAddressLineCaseChanged?($(".kycrenewalProceedbtn").removeClass("kyc-sign-button gray-btn"),$("#kyc-renewal-main .skip-section").css("display","none"),$("#kyc-renewal-main .kycnewVerbiage").addClass("hidden"),$("#kyc-renewal-main .kycnochangErrMsg").addClass("hidden"),$("#kyc-upload-form #kycRenewalDigilockerAddressEditFlag").val("Y"),$("#kyc-renewal-main .kycPincodeChangeErrMsg").addClass("hidden")):"Y"==onlyPindCodeChange&&0==modifyOtherFields&&1==onlyAddressLineCaseChanged?($(".kycrenewalProceedbtn").removeClass("kyc-sign-button gray-btn"),$("#kyc-renewal-main .skip-section").css("display","none"),$("#kyc-renewal-main .kycnewVerbiage").addClass("hidden"),$("#kyc-renewal-main .kycnochangErrMsg").addClass("hidden"),$("#kyc-upload-form #kycRenewalDigilockerAddressEditFlag").val("Y"),$("#kyc-renewal-main .kycPincodeChangeErrMsg").addClass("hidden")):(console.log("%c digi locker onlyPindCodeChange else ","color:blue"),0==digiModifyButtonClick&&($(".kycrenewalProceedbtn").removeClass("kyc-sign-button gray-btn"),$("#kyc-renewal-main .kycnewVerbiageDigiLocker").addClass("hidden"),$("#kyc-renewal-main .skip-section").css("display","none"),$("#kyc-renewal-main .kycPincodeChangeErrMsg").addClass("hidden")))))}else $(".kycrenewalProceedbtn").addClass("gray-btn"),$(".kycnochangErrMsg").addClass("hidden"),$("#kyc-renewal-main .kycnewVerbiage").addClass("hidden"),$("#kyc-renewal-main .skip-section").css("display","none"),$("#kyc-renewal-main .kycnewVerbiageDigiLocker").addClass("hidden"),$("#kyc-renewal-main .kycPincodeChangeErrMsg").addClass("hidden")}function proceedAddressChangeKYC(){if(console.log("is change add. form valid ? ",$("#change-address-form").valid()),$("#change-address-form").valid()){$(".otp-section-block").hide(),$(".btn-group-addr-kyc").removeClass("hidden"),$(".AddchangeProceedbtn").hide(),$(".newVerbiageforAddressChangeJourney").hide(),$("#addressCTA").hide(),$("#personal-addess-edit .address").attr("readonly","readonly"),$(".dynState.resi,.dynCity.resi,.dynPin.resi").css("pointer-events","none");var changeInPin=!1,changeInAddress=!1,residenceAddressNew=$("#residenceAddress").val().toLowerCase(),residenceAddressContdNew=$("#residenceAddressContd").val().toLowerCase(),residenceAddressOld=$("#oldResidenceAddress").val().toLowerCase(),residenceAddressContdOld=$("#oldResidenceAddressContd").val().toLowerCase(),oldResidencePin=$("#oldResidencePin").val().toLocaleLowerCase(),newResidencePin=$("#residenceZipCode").val().toLocaleLowerCase(),oldResidenceCity=$("#oldResidenceCity").val().toLocaleLowerCase(),oldResidenceState=$("#oldResidenceState").val().toLocaleLowerCase(),residenceCityNew=$("#residenceCity").val().toLocaleLowerCase(),residenceStateNew=$("#residenceState").val().toLocaleLowerCase();oldResidenceCity!==residenceCityNew&&(changeInAddress=!0),oldResidenceState!==residenceStateNew&&(changeInAddress=!0),residenceAddressContdNew!==residenceAddressContdOld&&(changeInAddress=!0),residenceAddressNew!==residenceAddressOld&&(changeInAddress=!0),oldResidencePin!==newResidencePin&&(changeInPin=!0),changeInPin&&!changeInAddress?(genOTPforAddrKyc(),docuploadEnabled=!1):changeInAddress?(console.log("if2 ",changeInAddress,changeInPin),console.log("open doc upload section"),docuploadEnabled=!0,onClickProceedForKYCRenewel("proceed")):changeInPin||changeInAddress||(console.log("if3 ",changeInAddress,changeInPin),docuploadEnabled=!1,genOTPforRewewalKyc())}}function genOTPforRewewalKyc(){var genOtpUrl="/creditcards/app/myprofile/send-otp-change-address";$.ajax({type:"GET",url:genOtpUrl,beforeSend:function(){var loaderHtml='<div class="overlay-loader"></div>';$("body").append(loaderHtml)},complete:function(){$("body").find("div.overlay-loader").remove()},success:function(response){response.success?($(".otp-section-block.manual-upate-address-kyc").css("display","block"),$("#kycrenewalProceedid").hide()):4==response.statusCode},error:function(){$("body").find("div.overlay-loader").remove()}})}function otpSubmitManualKYC(){var url="/creditcards/app/myprofile/auth-otp-address-change-revamp",passphrase=$("#passphrase").val(),otpNumber=$("#kycRenewalOtp2").val(),otpPassed=encryptData(otpNumber);$.ajax({type:"POST",data:{encryptedOtp:otpPassed,isKycRenewal:"Y"},url:url,headers:{passphrase:passphrase},beforeSend:function(){var loaderHtml='<div class="overlay-loader"></div>';$("body").append(loaderHtml)},complete:function(){},success:function(response){var decryptedData=dataDecryptionAES(response,passphrase);response=JSON.parse(decryptedData),response.success?submitModifyManualJourneyForKycRenewal():4==response.statusCode?(console.log("inside 004 status code for landline=>"),$("body").find("div.overlay-loader").remove(),$(".otp-section-block .otpIncorrectMsg").css("display","block"),$(".otp-section-block .otpIncorrectMsg").html(response.message).css("color","red"),$("#kyc-renewal-main .otpExaustVerbiageMsg").css("display","none"),$("#kyc-renewal-main .otpExaustVerbiageMsg").html(""),$(".otp-section-block .otp-resend-msg").css("display","none"),$(".otp-section-block #kycRenewalOtp").val(""),$(".otp-section-block .kyc-ren-submit-otp").addClass("gray-btn pointer-none"),$(".otp-section-block #kycRenewalOtp2").css("border","1px solid red"),$("#kycRenewalOtp2").val("")):2==response.statusCode?($("body").find("div.overlay-loader").remove(),console.log("inside 002 status code for landline=>"),$("#kyc-renewal-main .otpExaustVerbiageMsg").css("display","block"),$("#kyc-renewal-main .otpExaustVerbiageMsg").html(response.message),$(".otp-section-block #kycRenewalOtp").val(""),$(".otp-section-block .resend-otp-link").css("pointer-events","none"),$(".otp-section-block #kycRenewalOtp").css("pointer-events","none"),$(".otp-section-block .kyc-ren-cancel-otp").css("pointer-events","none"),$(".otp-section-block .kyc-ren-submit-otp").addClass("gray-btn pointer-none"),$(".document-upload-section .kyc-renewal-doc-upload").css("pointer-events","none"),$(".otp-section-block #kycRenewalOtp2").css("border","1px solid #ddd"),$("#kycRenewalOtp2").val("")):$("body").find("div.overlay-loader").remove()},error:function(){$("body").find("div.overlay-loader").remove()}})}function onChangeKycRenewalOtpField2(){var kycRenewalOtpValue=$("#kycRenewalOtp2").val().length;6==kycRenewalOtpValue?($(".otp-section-block .kyc-ren-submit-otp").removeClass("gray-btn pointer-none"),$('label[for="otpNumber"]').parent().find("label.valid").remove(),$('label[for="otpNumber"]').parent().find("label.error").remove(),$(".otp-section-block .otp-resend-msg").css("display","none"),$(".otp-section-block .otpIncorrectMsg").css("display","none"),$(".otp-section-block #kycRenewalOtp").css("border","1px solid rgb(221, 221, 221)")):6>kycRenewalOtpValue&&($(".otp-section-block .kyc-ren-submit-otp").addClass("gray-btn pointer-none"),$(".otp-section-block .otpIncorrectMsg").html(""),$(".otp-section-block .otp-resend-msg").css("display","none"),$(".otp-section-block #kycRenewalOtp").css("border","1px solid rgb(221, 221, 221)"),$(".otp-section-block #kycRenewalOtp2").css("border","1px solid #ddd"),$(".otp-section-block #kycRenewalOtp").val(""))}function submitKYCRenewalDigiLockerModifyJourney(){{var docUploadFlag=$("#kyc-upload-form #kycRenewalDocUploadFlag").val();$("#kyc-upload-form #kycRenewalOnlyDigilockerPincodeUpdateFlag").val()}if(console.log("%c docUploadFlag on submission ","color:red",docUploadFlag),"Y"==docUploadFlag){var poiValue=$("#kycRenewalPOIDocumentDropdown :selected").text(),poaValue=$("#kycRenewalPOADocumentDropdown :selected").text();poaValue="Passport"==poiValue?$("#kycRenewalPOADocumentDropdownNotPassport  :selected").text():$("#kycRenewalPOADocumentDropdown :selected").text(),submitKYCRenewalDigilockerFormWithDocuments(poiValue,poaValue)}else submitKYCRenewalDigilockerFormWithoutDocuments()}function submitKYCRenewalDigilockerFormWithoutDocuments(){var kycRenewelDigiAddressSubmissionform=$("#kyc-upload-form"),selectedCardNumber=sessionStorage.getItem("selectedCardNumber"),addOnResideWithPrimary=sessionStorage.getItem("addOnResideWithPrimary");appendExtraFieldsToSubmitForm(),$("<input>").attr({name:"encryptedCardnumber",id:"encryptedCardnumber",type:"hidden",value:selectedCardNumber}).appendTo(kycRenewelDigiAddressSubmissionform),$("<input>").attr({name:"addOnResideWithPrimary",id:"addOnResideWithPrimary",type:"hidden",value:addOnResideWithPrimary}).appendTo(kycRenewelDigiAddressSubmissionform),kycRenewelDigiAddressSubmissionform.removeAttr("action"),kycRenewelDigiAddressSubmissionform.removeAttr("data-map"),kycRenewelDigiAddressSubmissionform.removeAttr("modelAttribute"),kycRenewelDigiAddressSubmissionform.removeAttr("enctype"),kycRenewelDigiAddressSubmissionform.attr("action","/creditcards/app/requests/digilocker-Modify-Renewal-Submission");var loaderHtml='<div class="overlay-loader"></div>';$("body").append(loaderHtml),kycRenewelDigiAddressSubmissionform.submit()}function showHideKycRenewalContentBasedOnAddressLineChange(){var onlyPinCodeChangeUdateFlag=$("#kyc-upload-form #kycRenewalOnlyDigilockerPincodeUpdateFlag").val();"Y"==onlyPinCodeChangeUdateFlag&&0==addressLineUpdateFlag?$(".kycrenewalProceedbtn").removeClass("kyc-sign-button gray-btn"):"N"==onlyPinCodeChangeUdateFlag&&1==addressLineUpdateFlag||$(".kycrenewalProceedbtn").removeClass("kyc-sign-button gray-btn")}function onChangeKycRenewalDigiModifyOtpField(){var kycRenewalOtpValue=$(".kyc-ren-options-otp-section #kycRenewalOtp").val().length;6==kycRenewalOtpValue?($(".kyc-ren-options-otp-section .kyc-ren-submit-otp").removeClass("gray-btn pointer-none"),$('label[for="otpNumber"]').parent().find("label.valid").remove(),$('label[for="otpNumber"]').parent().find("label.error").remove(),$(".kyc-ren-options-otp-section .otp-resend-msg").css("display","none"),$(".kyc-ren-options-otp-section .otpIncorrectMsg").css("display","none"),$(".kyc-ren-options-otp-section #kycRenewalOtp").css("border","1px solid rgb(221, 221, 221)")):6>kycRenewalOtpValue&&($(".kyc-ren-options-otp-section .kyc-ren-submit-otp").addClass("gray-btn pointer-none"),$(".kyc-ren-options-otp-section .otpIncorrectMsg").html(""),$(".kyc-ren-options-otp-section .otp-resend-msg").css("display","none"),$(".kyc-ren-options-otp-section #kycRenewalOtp").css("border","1px solid rgb(221, 221, 221)"))}function onClickResendOtpForKycRenewalDigiModify(){var href="/creditcards/app/requests/resend-otp-kyc",isModifyJourney=$("#kycRenewalDigiModifyJourney").val();console.log("isModifyJourney",isModifyJourney),(1==isModifyJourney||isModifyJourney===!0||"true"==isModifyJourney||"true"===isModifyJourney)&&(href="/creditcards/app/myprofile/resend-otp-address-update"),$.ajax({url:href,type:"POST",data:{isKycRenewal:"Y"},dataType:"json",beforeSend:function(){var loaderHtml='<div class="overlay-loader"></div>';$("body").append(loaderHtml)},complete:function(){$("body").find("div.overlay-loader").remove()},success:function(data){"true"==data.success||1==data.success?($("body").find("div.overlay-loader").remove(),1==data.resendEnabled||"true"==data.resendEnabled?(console.log("success=true"),$(".kyc-ren-options-otp-section .otpIncorrectMsg").css("display","none"),$(".kyc-ren-options-otp-section .otpIncorrectMsg").html(""),$("#kyc-renewal-main .otpExaustVerbiageMsg").css("display","none"),$("#kyc-renewal-main .otpExaustVerbiageMsg").html(""),$(".kyc-ren-options-otp-section .otp-resend-msg").css("display","block"),$(".kyc-ren-options-otp-section #kycRenewalOtp").val(""),$(".kyc-ren-options-otp-section #kycRenewalOtp").css("border","1px solid rgb(221, 221, 221)"),$(".kyc-ren-options-otp-section .kyc-ren-submit-otp").addClass("gray-btn pointer-none")):(0==data.resendEnabled||"false"==data.resendEnabled)&&(console.log("max attempt"),$(".kyc-ren-options-otp-section .otpIncorrectMsg").css("display","none"),$(".kyc-ren-options-otp-section .otpIncorrectMsg").html(""),$("#kyc-renewal-main .otpExaustVerbiageMsg").css("display","block"),$("#kyc-renewal-main .otpExaustVerbiageMsg").html(data.message),$(".kyc-ren-options-otp-section .otp-resend-msg").css("display","none"),$(".kyc-ren-options-otp-section #kycRenewalOtp").val(""),$(".kyc-ren-options-otp-section .kyc-ren-submit-otp").addClass("gray-btn pointer-none"),$(".kyc-ren-options-otp-section .kyc-ren-cancel-otp").addClass("gray-btn pointer-none"),$(".kyc-ren-options-otp-section .resend-otp-link").css("pointer-events","none"),$(".kyc-ren-options-otp-section #kycRenewalOtp").css("border","1px solid rgb(221, 221, 221)"),$(".kyc-ren-options-otp-section .kyc-ren-cancel-otp").css("pointer-events","none"),$(".document-upload-section .kyc-renewal-doc-upload").css("pointer-events","none"))):(107==data.errorCode,$("body").find("div.overlay-loader").remove())},error:function(){$("body").find("div.overlay-loader").remove()}})}function onClickOtpSubmissionForKycRenewalDigiModify(){var url="/creditcards/app/requests/authenticate-otp-kyc",passphrase=$("#passphrase").val(),otpNumber=$(".kyc-ren-options-otp-section #kycRenewalOtp").val(),isModifyJourney=$("#kycRenewalDigiModifyJourney").val(),digiLockerModifyJourney=!1,retryStat=$("#retryStatus").val();""==isModifyJourney||null==isModifyJourney||1!=isModifyJourney&&"true"!=isModifyJourney&&"true"!=isModifyJourney?""!=retryStat&&null!=retryStat&&(console.log("authentication else if"),digiLockerModifyJourney=!0,url="/creditcards/app/myprofile/auth-otp-address-change-revamp"):(console.log("authentication if"),url="/creditcards/app/myprofile/auth-otp-address-change-revamp",digiLockerModifyJourney=!0);var otpPassed=encryptData(otpNumber),isKycRenewalModifyJourney=sessionStorage.getItem("isKycRenewalModifyJourney");console.log("isModifyJourney",isModifyJourney,"isKycRenewalModifyJourney",isKycRenewalModifyJourney);var hidden_fields=$(":hidden");console.log("Value of hidden_fields",hidden_fields),docRefIdList=[],$.each(hidden_fields,function(index,hidden_field){("passPhoto_hdn"==hidden_field.id||hidden_field.id.endsWith("_hdn")&&""!=hidden_field.value&&$("#"+hidden_field.id.substring(0,hidden_field.id.indexOf("_"))).is(":visible"))&&(docRefIdList.push(hidden_field.value),console.log("DOCREFLIST value is ",docRefIdList))});var selectedDocType=$("#kyc-upload-form #kyc-photo-upload-file").val(),addOnResideWithPrimary=sessionStorage.getItem("addOnResideWithPrimary"),selectedCardNumber=sessionStorage.getItem("selectedCardNumber"),id_proof_1=$("#idProof1KYC").is(":visible")?$("#id_proof_1").val():"",id_proof_2=$("#idProof2KYC").is(":visible")?$("#id_proof_2").val():"",addr_proof=$("#addressProofKYC").is(":visible")?$("#addr_proof").val():"",addr_proof_1=$("#addressProof1KYC").is(":visible")?$("#addr_proof_1").val():"",addr_proof_2=$("#addressProof2KYC").is(":visible")?$("#addr_proof_2").val():"",pass_photo=$("#pass_photo").val(),id_proof=$("#idProofKYC").is(":visible")?$("#id_proof").val():"";$.ajax({type:"POST",data:{encryptedOtp:otpPassed,isKycRenewal:"Y",docRefIDList:JSON.stringify(docRefIdList),kyc_form:selectedDocType,id_proof:id_proof,id_proof_1:id_proof_1,id_proof_2:id_proof_2,addr_proof:addr_proof,addr_proof_1:addr_proof_1,addr_proof_2:addr_proof_2,pass_photo:pass_photo,kyc_address_type:"",selectedCardIndexNumber:selectedCardNumber,addOnResideWithPrimary:addOnResideWithPrimary},url:url,headers:{passphrase:passphrase},beforeSend:function(){var loaderHtml='<div class="overlay-loader"></div>';
$("body").append(loaderHtml)},complete:function(){},success:function(response){var decryptedData=dataDecryptionAES(response,passphrase);response=JSON.parse(decryptedData),response.success?(sessionStorage.setItem("otpResponse",response.passPhrase),(!digiLockerModifyJourney||1!=isKycRenewalModifyJourney&&isKycRenewalModifyJourney!==!0&&"true"!=isKycRenewalModifyJourney&&"true"!==isKycRenewalModifyJourney)&&(!digiLockerModifyJourney||0!=isKycRenewalModifyJourney&&isKycRenewalModifyJourney!==!1&&"false"!=isKycRenewalModifyJourney&&"false"!==isKycRenewalModifyJourney)?digiLockerModifyJourney&&""!=retryStat&&null!=retryStat&&submitKYCRenewalDigiLockerModifyJourney():submitKYCRenewalDigiLockerModifyJourney(),$("#success-page-scenario").css("display","block"),window.scrollTo&&window.scrollTo(0,0),$("#kyc-renewal-main").hide(),$(".kyc-result-message").hide(),200==response.finalScanStatus?($("#kyc-success-message").show(),$("#kyc-success-message-2").show()):$("#kyc-failure-message").show(),response.emailRegistrationStatus?$("#kyc-email-message").show():$("#kyc-email-message").hide(),""==$(".mobile-only #dashboard").find(".nav-trigger").first().contents().filter(function(){return 3==this.nodeType}).text().trim()&&$(".mobile-only #dashboard").find(".nav-trigger").find("span.icon.dashboard").after($(".kyc .main-section-header h1").html().toString().trim())):555==response.statusCode?($("#success-page-scenario").css("display","block"),window.scrollTo&&window.scrollTo(0,0),$("#kyc-renewal-main").hide(),$("#kyc-failure-message").show()):4==response.statusCode?(console.log("inside 004 status code for landline=>"),$("body").find("div.overlay-loader").remove(),$(".kyc-ren-options-otp-section .otpIncorrectMsg").css("display","block"),$(".kyc-ren-options-otp-section .otpIncorrectMsg").html(response.message).css("color","red"),$("#kyc-renewal-main .otpExaustVerbiageMsg").css("display","none"),$("#kyc-renewal-main .otpExaustVerbiageMsg").html(""),$(".kyc-ren-options-otp-section .otp-resend-msg").css("display","none"),$(".kyc-ren-options-otp-section #kycRenewalOtp").val(""),$(".kyc-ren-options-otp-section .kyc-ren-submit-otp").addClass("gray-btn pointer-none"),$(".kyc-ren-options-otp-section #kycRenewalOtp").css("border","1px solid red"),$("#success-page-scenario").hide()):2==response.statusCode?($("body").find("div.overlay-loader").remove(),console.log("inside 002 status code for landline=>"),$("#kyc-renewal-main .otpExaustVerbiageMsg").css("display","block"),$("#kyc-renewal-main .otpExaustVerbiageMsg").html(response.message),$(".kyc-ren-options-otp-section #kycRenewalOtp").val(""),$(".kyc-ren-options-otp-section .resend-otp-link").css("pointer-events","none"),$(".kyc-ren-options-otp-section #kycRenewalOtp").css("pointer-events","none"),$(".kyc-ren-options-otp-section .kyc-ren-cancel-otp").css("pointer-events","none"),$(".kyc-ren-options-otp-section .kyc-ren-submit-otp").addClass("gray-btn pointer-none"),$(".document-upload-section .kyc-renewal-doc-upload").css("pointer-events","none"),$("#success-page-scenario").hide()):$("body").find("div.overlay-loader").remove(),$("body").find("div.overlay-loader").remove()},error:function(){$("body").find("div.overlay-loader").remove()}})}function onClickOtpCancelSubmissionForKycRenewalDigiModify(){$("#kyc-renewal-main .kyc-ren-options-otp-section").css("display","none"),$("#kycRenewalPOI_consentt_check_box").prop("checked",!1),$("#kyc-renewal-main .residenceAddressForm .check-box-modifyadress").css("display","block"),$("#kyc-renewal-main .document-upload-section .doc-upload-buttons-group").css("display","block"),$("#kyc-renewal-main .modify-address-block").css("pointer-events","auto"),1==isAadhaarCardSelected?($("#kyc-renewal-main .document-upload-section .sbi-check-box-for-upload").css("display","block"),$("#kyc-renewal-main .doc-upload-proceed-btn").addClass("gray-btn pointer-none")):($("#kyc-renewal-main .document-upload-section .sbi-check-box-for-upload").css("display","none"),$("#kyc-renewal-main .doc-upload-proceed-btn").removeClass("gray-btn pointer-none")),$(".document-upload-section .kyc-renewal-doc-upload").css("pointer-events","visible"),$("#kyc-renewal-main .otpExaustVerbiageMsg").css("display","none"),$("#kyc-renewal-main .otpExaustVerbiageMsg").html(""),$(".kyc-ren-options-otp-section #kycRenewalOtp").val(""),$(".kyc-ren-options-otp-section .kyc-ren-submit-otp").addClass("gray-btn pointer-none"),$(".kyc-ren-options-otp-section .otp-resend-msg").css("display","none"),$(".kyc-ren-options-otp-section .otpIncorrectMsg").css("display","none"),$(".kyc-ren-options-otp-section #kycRenewalOtp").css("border","1px solid #ddd"),excludeExtraFieldsDuringDocumentSubmission("reset");var isModifyJourney=$("#kycRenewalDigiModifyJourney").val();if(""!=isModifyJourney&&null!=isModifyJourney&&(1==isModifyJourney||"true"==isModifyJourney||"true"==isModifyJourney)){$("#kyc-renewal-main .residenceAddressForm").css("pointer-events","visible");var isModifyButtonClicked=sessionStorage.getItem("isKycRenewalModifyJourney");console.log("isModifyButtonClicked",isModifyButtonClicked),1==isModifyButtonClicked||"true"==isModifyButtonClicked||"true"==isModifyButtonClicked?$("#kyc-renewal-main .residenceAddressForm .lap-kycrenewal-ml").css("display","none"):($("#kyc-renewal-main .residenceAddressForm .lap-kycrenewal-ml").css("display","block"),$(".kycnewVerbiage, .kycnochangErrMsg").addClass("hidden"),$(".kycnewVerbiage, .kycnochangErrMsg").addClass("hidden"),$("#modifyaddressChange_Check").prop("checked",!1),$("#kyc-renewal-main .skip-section").css("display","none"),$("#proceedModifyAdrsBtn").addClass("kyc-signbtn kyc-sign-button"))}$("#kyc-renewal-main .residenceAddressForm .lap-kycrenewal-ml").css("display","block"),$("#kyc-renewal-main .residenceAddressForm").css("pointer-events","visible"),$("#modifyaddressChange_Check").parent(".fancy-checkbox").removeClass("checked",!1)}function appendExtraFieldsToSubmitForm(){console.log("Enter into append extra fields submission sectionn--------------");var kycRenewelDigiAddressSubmissionform=$("#kyc-upload-form"),resAdd=($("#change-address-form"),$("#change-address-form #residenceAddress").val()),resAddContd=$("#change-address-form #residenceAddressContd").val(),resState=$("#change-address-form #residenceState").val(),resCity=$("#change-address-form #residenceCity").val(),resPinCode=$("#change-address-form #residenceZipCode").val();$("<input>").attr({name:"residenceAddress",id:"residenceAddress",type:"hidden",value:resAdd}).appendTo(kycRenewelDigiAddressSubmissionform),$("<input>").attr({name:"residenceAddressContd",id:"residenceAddressContd",type:"hidden",value:resAddContd}).appendTo(kycRenewelDigiAddressSubmissionform),$("<input>").attr({name:"residenceState",id:"residenceState",type:"hidden",value:resState}).appendTo(kycRenewelDigiAddressSubmissionform),$("<input>").attr({name:"residenceCity",id:"residenceCity",type:"hidden",value:resCity}).appendTo(kycRenewelDigiAddressSubmissionform),$("<input>").attr({name:"residenceZipCode",id:"residenceZipCode",type:"hidden",value:resPinCode}).appendTo(kycRenewelDigiAddressSubmissionform)}function submitKYCRenewalDigilockerFormWithDocuments(poiValue,poaValue){var kycRenewelDigiAddressSubmissionform=$("#kyc-upload-form"),selectedCardNumber=sessionStorage.getItem("selectedCardNumber"),addOnResideWithPrimary=sessionStorage.getItem("addOnResideWithPrimary"),kycRenewalDocRefId=$("#passPhoto_hdn").val();console.log("Enter into document upload sectionn--------------"),$("<input>").attr({name:"encryptedCardnumber",id:"encryptedCardnumber",type:"hidden",value:selectedCardNumber}).appendTo(kycRenewelDigiAddressSubmissionform),$("<input>").attr({name:"addOnResideWithPrimary",id:"addOnResideWithPrimary",type:"hidden",value:addOnResideWithPrimary}).appendTo(kycRenewelDigiAddressSubmissionform),$("<input>").attr({name:"docrefid",id:"docrefid",type:"hidden",value:kycRenewalDocRefId}).appendTo(kycRenewelDigiAddressSubmissionform),$("<input>").attr({name:"doctype",id:"doctype",type:"hidden",value:"pass_photo"}).appendTo(kycRenewelDigiAddressSubmissionform),kycRenewelDigiAddressSubmissionform.removeAttr("action"),kycRenewelDigiAddressSubmissionform.removeAttr("data-map"),kycRenewelDigiAddressSubmissionform.removeAttr("modelAttribute"),kycRenewelDigiAddressSubmissionform.removeAttr("enctype"),appendExtraFieldsToSubmitForm(),appendDocRefIdToForm(poiValue,poaValue)}function appendDocRefIdToForm(poiValue,poaValue){console.log("Enter into appendDocRefIdToForm--------------",poiValue,poaValue),"NREGA Card"!=poiValue&&"e-FFRO Letter"!=poiValue&&"NRI/PIO/Foreign National Documents"!=poiValue&&"Letter issued by the National Population Register containing details of name and address"!=poiValue||"NREGA Card"!=poaValue&&"e-FFRO Letter"!=poaValue&&"NRI/PIO/Foreign National Documents"!=poaValue&&"Letter issued by the National Population Register containing details of name and address"!=poaValue&&"e-FFRO Letter"!=poaValue&&"NRI/PIO/Foreign National Documents"!=poaValue?"NREGA Card"!=poiValue&&"e-FFRO Letter"!=poiValue&&"NRI/PIO/Foreign National Documents"!=poiValue&&"Letter issued by the National Population Register containing details of name and address"!=poiValue&&"NREGA Card"!=poaValue&&"e-FFRO Letter"!=poaValue&&"NRI/PIO/Foreign National Documents"!=poaValue&&"Letter issued by the National Population Register containing details of name and address"!=poaValue&&"e-FFRO Letter"!=poaValue&&"NRI/PIO/Foreign National Documents"!=poaValue?(console.log("Enter into appendDocRefIdToForm 2--------------"),""!=$(".div_to_add1 .addr-front-doc").val()&&""!=$(".div_to_add1 .addr-back-doc").val()&&""!=$(".div_to_add2 .addr-front-doc").val()&&""!=$(".div_to_add2 .addr-back-doc").val()&&generateDocRefIdForPOI(poiValue,poaValue,$(".div_to_add1 .addr-front-doc"),$(".div_to_add2 .addr-front-doc"))):"NREGA Card"!=poiValue&&"e-FFRO Letter"!=poiValue&&"NRI/PIO/Foreign National Documents"!=poiValue&&"Letter issued by the National Population Register containing details of name and address"!=poiValue||"NREGA Card"==poaValue||"e-FFRO Letter"==poaValue||"NRI/PIO/Foreign National Documents"==poaValue||"Letter issued by the National Population Register containing details of name and address"==poaValue||"e-FFRO Letter"==poaValue||"NRI/PIO/Foreign National Documents"==poaValue?"NREGA Card"==poiValue||"e-FFRO Letter"==poiValue||"NRI/PIO/Foreign National Documents"==poiValue||"Letter issued by the National Population Register containing details of name and address"==poiValue||"NREGA Card"!=poaValue&&"e-FFRO Letter"!=poaValue&&"NRI/PIO/Foreign National Documents"!=poaValue&&"Letter issued by the National Population Register containing details of name and address"!=poaValue&&"e-FFRO Letter"!=poaValue&&"NRI/PIO/Foreign National Documents"!=poaValue||(console.log("Enter into appendDocRefIdToForm 4--------------"),null!=$(".div_to_add1 .addr-front-doc").val()&&null!=$(".div_to_add2 .addr-single-doc").val()&&generateDocRefIdForPOI(poiValue,poaValue,$(".div_to_add1 .addr-front-doc"),$(".div_to_add2 .addr-single-doc"))):(console.log("Enter into appendDocRefIdToForm 3--------------"),null!=$(".div_to_add1 .addr-single-doc").val()&&null!=$(".div_to_add2 .addr-front-doc").val()&&generateDocRefIdForPOI(poiValue,poaValue,$(".div_to_add1 .addr-single-doc"),$(".div_to_add2 .addr-front-doc"))):(console.log("Enter into appendDocRefIdToForm 1--------------"),""!=$(".div_to_add1 .addr-single-doc").val()&&""!=$(".div_to_add2 .addr-single-doc").val()&&generateDocRefIdForPOI(poiValue,poaValue,$(".div_to_add1 .addr-single-doc"),$(".div_to_add2 .addr-single-doc")))}function generateDocRefIdForPOI(poiValue,poaValue,poifileValue){console.log("POI fileValue",poifileValue);var file=poifileValue.prop("files")[0];console.log("POI file",file);var reader=new FileReader,selectedDocType=poiValue;reader.readAsDataURL(file);var fileNameExt=file.name.split("\\").pop();console.log("POI fileNameExt",fileNameExt,"POI selectedDocType",selectedDocType);var encryptResult;reader.onload=function(){encryptResult=btoa(reader.result),$.ajax({url:"/safe/upload-file.do",type:"POST",contentType:"application/json",data:JSON.stringify({encodedFile:encryptResult,fileType:selectedDocType,fileExt:fileNameExt,authStr:"ABCD"}),beforeSend:function(){},success:function(data){if(null!=data.docRefId&&"null"!=data.docRefId){var kycRenewalDocUploadForm=$("#kyc-upload-form");"NREGA Card"==poiValue||"e-FFRO Letter"==poiValue||"NRI/PIO/Foreign National Documents"==poiValue||"Letter issued by the National Population Register containing details of name and address"==poiValue?(console.log("inside singleAddrDocUploadSubmit- call gen otp"),$("<input>").attr({name:"poidocrefid",id:"poidocrefid",type:"hidden",value:data.docRefId}).appendTo(kycRenewalDocUploadForm),$("<input>").attr({name:"poidoctype",id:"poidoctype",type:"hidden",value:poiValue}).appendTo(kycRenewalDocUploadForm),"NREGA Card"==poaValue||"e-FFRO Letter"==poaValue||"NRI/PIO/Foreign National Documents"==poaValue||"Letter issued by the National Population Register containing details of name and address"==poaValue||"e-FFRO Letter"==poaValue||"NRI/PIO/Foreign National Documents"==poaValue?generateDocRefIdForPOA(poiValue,poaValue,$(".div_to_add1 .addr-single-doc"),$(".div_to_add2 .addr-single-doc")):generateDocRefIdForPOA(poiValue,poaValue,$(".div_to_add1 .addr-single-doc"),$(".div_to_add2 .addr-front-doc"))):"NREGA Card"!=poiValue&&"e-FFRO Letter"!=poiValue&&"NRI/PIO/Foreign National Documents"!=poiValue&&"Letter issued by the National Population Register containing details of name and address"!=poiValue&&($("<input>").attr({name:"poidocrefid1",id:"poidocrefid1",type:"hidden",value:data.docRefId}).appendTo(kycRenewalDocUploadForm),$("<input>").attr({name:"poidoctype",id:"poidoctype",type:"hidden",value:poiValue}).appendTo(kycRenewalDocUploadForm),"NREGA Card"!=poaValue&&"e-FFRO Letter"!=poaValue&&"NRI/PIO/Foreign National Documents"!=poaValue&&"Letter issued by the National Population Register containing details of name and address"!=poaValue&&"e-FFRO Letter"!=poaValue&&"NRI/PIO/Foreign National Documents"!=poaValue?generateDocRefIdForPOIBackDoc(poiValue,poaValue,$(".div_to_add1 .addr-back-doc"),$(".div_to_add2 .addr-front-doc")):generateDocRefIdForPOIBackDoc(poiValue,poaValue,$(".div_to_add1 .addr-back-doc"),$(".div_to_add2 .addr-single-doc"))),console.log("success in doc upload=>"+data)}else $("body").find("div.overlay-loader").remove(),console.log("error in doc")},error:function(){$("body").find("div.overlay-loader").remove()}})}}function generateDocRefIdForPOIBackDoc(poiValue,poaValue,poiBackDoc){var file=poiBackDoc.prop("files")[0];console.log("generateDocRefIdForPOIBackDoc",file);var reader=new FileReader,selectedDocType=poiValue;reader.readAsDataURL(file);var fileNameExt=file.name.split("\\").pop();console.log("POI fileNameExt",fileNameExt,"POI selectedDocType",selectedDocType);var encryptResult;reader.onload=function(){encryptResult=btoa(reader.result),$.ajax({url:"/safe/upload-file.do",type:"POST",contentType:"application/json",data:JSON.stringify({encodedFile:encryptResult,fileType:selectedDocType,fileExt:fileNameExt,authStr:"ABCD"}),beforeSend:function(){},success:function(data){if(null!=data.docRefId&&"null"!=data.docRefId){var kycRenewalDocUploadForm=$("#kyc-upload-form");$("<input>").attr({name:"poidocrefid2",id:"poidocrefid2",type:"hidden",value:data.docRefId}).appendTo(kycRenewalDocUploadForm),"NREGA Card"!=poaValue&&"e-FFRO Letter"!=poaValue&&"NRI/PIO/Foreign National Documents"!=poaValue&&"Letter issued by the National Population Register containing details of name and address"!=poaValue&&"e-FFRO Letter"!=poaValue&&"NRI/PIO/Foreign National Documents"!=poaValue?generateDocRefIdForPOA(poiValue,poaValue,$(".div_to_add1 .addr-back-doc"),$(".div_to_add2 .addr-front-doc")):generateDocRefIdForPOA(poiValue,poaValue,$(".div_to_add1 .addr-back-doc"),$(".div_to_add2 .addr-single-doc")),console.log("success in doc upload=>"+data)}else $("body").find("div.overlay-loader").remove(),console.log("error in doc")},error:function(){$("body").find("div.overlay-loader").remove()}})}}function generateDocRefIdForPOA(poiValue,poaValue,poifileValue,poafileValue){console.log("generateDocRefIdForPOA");var file=poafileValue.prop("files")[0];console.log("POA file",file);var reader=new FileReader,selectedDocType=poaValue;reader.readAsDataURL(file);var fileNameExt=file.name.split("\\").pop();console.log("POA fileNameExt",fileNameExt,"POA selectedDocType",selectedDocType);var encryptResult;reader.onload=function(){encryptResult=btoa(reader.result),$.ajax({url:"/safe/upload-file.do",type:"POST",contentType:"application/json",data:JSON.stringify({encodedFile:encryptResult,fileType:selectedDocType,fileExt:fileNameExt,authStr:"ABCD"}),beforeSend:function(){},success:function(data){if(null!=data.docRefId&&"null"!=data.docRefId){var kycRenewalDocUploadForm=$("#kyc-upload-form");"NREGA Card"==poaValue||"e-FFRO Letter"==poaValue||"NRI/PIO/Foreign National Documents"==poaValue||"Letter issued by the National Population Register containing details of name and address"==poaValue||"e-FFRO Letter"==poaValue||"NRI/PIO/Foreign National Documents"==poaValue?($("<input>").attr({name:"poadocrefid",id:"poadocrefid",type:"hidden",value:data.docRefId}).appendTo(kycRenewalDocUploadForm),$("<input>").attr({name:"poadoctype",id:"poadoctype",type:"hidden",value:poaValue}).appendTo(kycRenewalDocUploadForm),submitKycUploadForm()):"NREGA Card"!=poaValue&&"e-FFRO Letter"!=poaValue&&"NRI/PIO/Foreign National Documents"!=poaValue&&"Letter issued by the National Population Register containing details of name and address"!=poaValue&&"e-FFRO Letter"!=poaValue&&"NRI/PIO/Foreign National Documents"!=poaValue&&($("<input>").attr({name:"poadocrefid1",id:"poadocrefid1",type:"hidden",value:data.docRefId}).appendTo(kycRenewalDocUploadForm),$("<input>").attr({name:"poadoctype",id:"poadoctype",type:"hidden",value:poaValue}).appendTo(kycRenewalDocUploadForm),generateDocRefIdForPOABackDoc(poiValue,poaValue,$(".div_to_add1 .addr-back-doc"),$(".div_to_add2 .addr-back-doc"))),console.log("success in doc upload=>")}else $("body").find("div.overlay-loader").remove(),console.log("error in doc")},error:function(){$("body").find("div.overlay-loader").remove()}})}}function generateDocRefIdForPOABackDoc(poiValue,poaValue,poiBackDoc,poaBackDoc){console.log("generateDocRefIdForPOABackDoc");var file=poaBackDoc.prop("files")[0];console.log("POa file",file);var reader=new FileReader,selectedDocType=poaValue;reader.readAsDataURL(file);var fileNameExt=file.name.split("\\").pop();console.log("POa fileNameExt",fileNameExt,"POa selectedDocType",selectedDocType);var encryptResult;reader.onload=function(){encryptResult=btoa(reader.result),$.ajax({url:"/safe/upload-file.do",type:"POST",contentType:"application/json",data:JSON.stringify({encodedFile:encryptResult,fileType:selectedDocType,fileExt:fileNameExt,authStr:"ABCD"}),beforeSend:function(){},success:function(data){if(null!=data.docRefId&&"null"!=data.docRefId){var kycRenewalDocUploadForm=$("#kyc-upload-form");$("<input>").attr({name:"poadocrefid2",id:"poadocrefid2",type:"hidden",value:data.docRefId}).appendTo(kycRenewalDocUploadForm),submitKycUploadForm(),console.log("success in doc upload=>"+data)}else $("body").find("div.overlay-loader").remove(),console.log("error in doc")},error:function(){$("body").find("div.overlay-loader").remove()}})}}function submitKycUploadForm(){var kycRenewalDocUploadForm=$("#kyc-upload-form"),isModifyJourney=$("#kycRenewalDigiModifyJourney").val();console.log("isModifyJourney before form submit ",isModifyJourney);var retryStat=$("#retryStatus").val();""==isModifyJourney||null==isModifyJourney||1!=isModifyJourney&&"true"!=isModifyJourney&&"true"!=isModifyJourney?(console.log("%c inside manual modify renewal submission ","color:green"),kycRenewalDocUploadForm.attr("action","/creditcards/app/requests/renewal_manual_modification_submission"),kycRenewalDocUploadForm.submit()):(console.log("%c inside digilocker modify renewal submission ","color:blue"),""!=retryStat&&null!=retryStat?(kycRenewalDocUploadForm.attr("action","/creditcards/app/requests/renewal_manual_modification_submission"),kycRenewalDocUploadForm.submit()):(kycRenewalDocUploadForm.attr("action","/creditcards/app/requests/digilocker-Modify-Renewal-Submission"),kycRenewalDocUploadForm.submit()))}function checkUpperCaseLowerCaseForKycRenewal(){var newresidenceAddress=$("#residenceAddress").val(),newresidenceAddressContd=$("#residenceAddressContd").val(),oldResidenceAddress=$("#residenceAddressNonEdit").val(),oldResidenceAddressContd=$("#residenceAddressContdNonEdit").val(),onlyPinCodeChange=$("#kyc-upload-form #kycRenewalOnlyDigilockerPincodeUpdateFlag").val();(newresidenceAddress.length>0||newresidenceAddressContd.length>0)&&(console.log("addressLineOneChanged",addressLineOneChanged,"addressLineTwoChanged",addressLineTwoChanged,"onlyPinCodeChange",onlyPinCodeChange),1==addressLineOneChanged&&1==addressLineTwoChanged?newresidenceAddress.toLowerCase().trim()===oldResidenceAddress.toLowerCase().trim()&&newresidenceAddressContd.toLowerCase().trim()===oldResidenceAddressContd.toLowerCase().trim()?(console.log("1"),1==modifyOtherFields?(console.log("11"),modifyOtherFields=!0,onlyAddressLineCaseChanged=!1,$("#kyc-upload-form #kycRenewalOnlyDigilockerPincodeUpdateFlag").val("N")):(console.log("12"),"Y"==onlyPinCodeChange?onlyAddressLineCaseChanged=!1:(onlyAddressLineCaseChanged=!0,$("#kyc-upload-form #kycRenewalOnlyDigilockerPincodeUpdateFlag").val("N")))):newresidenceAddress.toLowerCase().trim()===oldResidenceAddress.toLowerCase().trim()&&newresidenceAddressContd.toLowerCase().trim()!=oldResidenceAddressContd.toLowerCase().trim()?(console.log("2"),modifyOtherFields=!0,onlyAddressLineCaseChanged=!1,isModifyJourney=!0,$("#kyc-upload-form #kycRenewalOnlyDigilockerPincodeUpdateFlag").val("N")):newresidenceAddress.toLowerCase().trim()!=oldResidenceAddress.toLowerCase().trim()&&newresidenceAddressContd.toLowerCase().trim()===oldResidenceAddressContd.toLowerCase().trim()?(console.log("3"),modifyOtherFields=!0,onlyAddressLineCaseChanged=!1,isModifyJourney=!0,$("#kyc-upload-form #kycRenewalOnlyDigilockerPincodeUpdateFlag").val("N")):newresidenceAddress.toLowerCase().trim()!=oldResidenceAddress.toLowerCase().trim()&&newresidenceAddressContd.toLowerCase().trim()!=oldResidenceAddressContd.toLowerCase().trim()&&(console.log("4"),modifyOtherFields=!0,onlyAddressLineCaseChanged=!1,isModifyJourney=!0,$("#kyc-upload-form #kycRenewalOnlyDigilockerPincodeUpdateFlag").val("N")):1==addressLineOneChanged&&0==addressLineTwoChanged?(console.log("2------------"),newresidenceAddress.toLowerCase().trim()===oldResidenceAddress.toLowerCase().trim()?(console.log("2 I------------"),1==modifyOtherFields?(console.log("2 111------------"),modifyOtherFields=!0,onlyAddressLineCaseChanged=!1,$("#kyc-upload-form #kycRenewalOnlyDigilockerPincodeUpdateFlag").val("N")):(console.log("2 222------------"),"Y"==onlyPinCodeChange?onlyAddressLineCaseChanged=!1:(onlyAddressLineCaseChanged=!0,$("#kyc-upload-form #kycRenewalOnlyDigilockerPincodeUpdateFlag").val("Y")))):(modifyOtherFields=!0,onlyAddressLineCaseChanged=!1,isModifyJourney=!0,$("#kyc-upload-form #kycRenewalOnlyDigilockerPincodeUpdateFlag").val("N"))):0==addressLineOneChanged&&1==addressLineTwoChanged&&(newresidenceAddressContd.toLowerCase().trim()===oldResidenceAddressContd.toLowerCase().trim()?1==modifyOtherFields?(modifyOtherFields=!0,onlyAddressLineCaseChanged=!1,$("#kyc-upload-form #kycRenewalOnlyDigilockerPincodeUpdateFlag").val("N")):"Y"==onlyPinCodeChange?onlyAddressLineCaseChanged=!1:(onlyAddressLineCaseChanged=!0,$("#kyc-upload-form #kycRenewalOnlyDigilockerPincodeUpdateFlag").val("Y")):(onlyAddressLineCaseChanged=!1,isModifyJourney=!0,modifyOtherFields=!0,$("#kyc-upload-form #kycRenewalOnlyDigilockerPincodeUpdateFlag").val("N"))))}function submitModifyManualJourneyForKycRenewal(){var onlyPinCodeChangeUdateFlag=$("#kyc-upload-form #kycRenewalOnlyDigilockerPincodeUpdateFlag").val(),kycRenewalDocUploadForm=$("#kyc-upload-form");if(kycRenewalDocUploadForm.removeAttr("action"),kycRenewalDocUploadForm.removeAttr("data-map"),kycRenewalDocUploadForm.removeAttr("modelAttribute"),kycRenewalDocUploadForm.removeAttr("enctype"),console.log("%c Manual submission ","color:red",onlyPinCodeChangeUdateFlag,addressLineUpdateFlag,modifyOtherFields),"Y"!=onlyPinCodeChangeUdateFlag||0!=addressLineUpdateFlag&&0!=modifyOtherFields)if("N"!=onlyPinCodeChangeUdateFlag||1!=addressLineUpdateFlag&&1!=modifyOtherFields)console.log("inside else");else{console.log("inside else if");var poiValue=$("#kycRenewalPOIDocumentDropdown :selected").text(),poaValue=$("#kycRenewalPOADocumentDropdown :selected").text();poaValue="Passport"==poiValue?$("#kycRenewalPOADocumentDropdownNotPassport  :selected").text():$("#kycRenewalPOADocumentDropdown :selected").text(),submitKYCRenewalDigilockerFormWithDocuments(poiValue,poaValue)}else{console.log("inside if");var selectedCardNumber=sessionStorage.getItem("selectedCardNumber"),addOnResideWithPrimary=sessionStorage.getItem("addOnResideWithPrimary");appendExtraFieldsToSubmitForm(),$("<input>").attr({name:"encryptedCardnumber",id:"encryptedCardnumber",type:"hidden",value:selectedCardNumber}).appendTo(kycRenewalDocUploadForm),$("<input>").attr({name:"addOnResideWithPrimary",id:"addOnResideWithPrimary",type:"hidden",value:addOnResideWithPrimary}).appendTo(kycRenewalDocUploadForm),submitKycUploadForm()}}function updateAddressToKycFormForm(){$("#kyc-renewal-main #residenceAddress").val(null!=$("#kyc-renewal-main #residenceAddress").val()?$("#kyc-renewal-main #residenceAddress").val():$("#kyc-renewal-main #oldResidenceAddress").val()),$("#kyc-renewal-main #residenceAddressContd").val(null!=$("#kyc-renewal-main #kyc-renewal-main").val()?$("#kyc-renewal-main #residenceAddressContd").val():$("#kyc-renewal-main #oldResidenceAddressContd").val()),$("#kyc-renewal-main #residenceState").val(null!=$("#kyc-renewal-main #residenceState").val()?$("#kyc-renewal-main #residenceState").val():$("#kyc-renewal-main #digiLockerUserResidenceState").val()),$("#kyc-renewal-main #residenceCity").val(null!=$("#kyc-renewal-main #residenceCity").val()?$("#kyc-renewal-main #residenceCity").val():$("#kyc-renewal-main #digiLockeruserResidenceCity").val()),$("#kyc-renewal-main #residenceZipCode").val(null!=$("#kyc-renewal-main #residenceZipCode").val()?$("#kyc-renewal-main #residenceZipCode").val():$("#kyc-renewal-main #digiLockeruserResidenceZipCode").val())}function renewalDigiModifyRetryWithDL(){$("#kycRenewalDigiModifyRetryForm #digiRetryCode").val(sessionStorage.getItem("kycDigiLockerAuthCode"));var isModifyJourney=$("#kycRenewalDigiModifyJourney").val(),modifyButtonClicked=sessionStorage.getItem("isKycRenewalModifyJourney");if(console.log("isModifyJourney.........",isModifyJourney,"modifyButtonClicked",modifyButtonClicked),""==isModifyJourney||null==isModifyJourney||1!=isModifyJourney&&"true"!=isModifyJourney&&"true"!=isModifyJourney)if(""==modifyButtonClicked||null==modifyButtonClicked||1!=modifyButtonClicked&&"true"!=modifyButtonClicked&&"true"!=modifyButtonClicked){$("#kycRenewalDigiModifyRetryForm #digiRetryCode").val(sessionStorage.getItem("kycDigiLockerAuthCode")),$("#kycRenewalDigiModifyRetryForm #retryDigiModifyJourneyStatus").val(!1),$("#kycRenewalDigiModifyRetryForm #retryEncryptedCardnumber").val(sessionStorage.getItem("selectedCardNumber")),$("#kycRenewalDigiModifyRetryForm #retryAddOnResideWithPrimary").val(sessionStorage.getItem("addOnResideWithPrimary"));var loaderHtml='<div class="overlay-loader"></div>';$("body").append(loaderHtml),$("#kycRenewalDigiModifyRetryForm").submit()}else{console.log("else if"),$("#kycRenewalDigiModifyRetryForm #digiRetryCode").val(sessionStorage.getItem("kycDigiLockerAuthCode")),$("#kycRenewalDigiModifyRetryForm #retryDigiModifyJourneyStatus").val(!0),$("#kycRenewalDigiModifyRetryForm #retryEncryptedCardnumber").val(sessionStorage.getItem("selectedCardNumber")),$("#kycRenewalDigiModifyRetryForm #retryAddOnResideWithPrimary").val(sessionStorage.getItem("addOnResideWithPrimary"));var loaderHtml='<div class="overlay-loader"></div>';$("body").append(loaderHtml),$("#kycRenewalDigiModifyRetryForm").submit()}else{console.log("if"),$("#kycRenewalDigiModifyRetryForm #digiRetryCode").val(sessionStorage.getItem("kycDigiLockerAuthCode")),$("#kycRenewalDigiModifyRetryForm #retryEncryptedCardnumber").val(sessionStorage.getItem("selectedCardNumber")),$("#kycRenewalDigiModifyRetryForm #retryAddOnResideWithPrimary").val(sessionStorage.getItem("addOnResideWithPrimary"));var loaderHtml='<div class="overlay-loader"></div>';$("body").append(loaderHtml),$("#kycRenewalDigiModifyRetryForm").submit()}}function renewalDigiModifyTryAgain(){console.log("renewalDigiModifyTryAgain");var clientId=$("#digilockerClientId").val();sessionStorage.setItem("renewalTryAgainStatus",!0);var URL="https://api.digitallocker.gov.in/public/oauth2/1/authorize?response_type=code&client_id="+clientId+"&rediect_uri=1&state=1";redirectToDigilocker(URL)}function onclickSubmitKycForKycRenewal(status){if("manualUpload"==status){var retryStat=$("#retryStatus").val();""!=retryStat&&null!=retryStat&&($(".requests .tabs-block").css("display","none"),$(".retry-request-decline").css("display","none"),$(".retry-decline").css("display","none"),$(".retry-with-digi-locker").css("display","none"),$(".retry-without-digi-locker").css("display","none"),$("#kyc-renewal-main .residenceAddressForm .kycrenewalProceedbtn").addClass("gray-btn pointer-none"));var loaderHtml='<div class="overlay-loader"></div>';$("body").append(loaderHtml);var url="/creditcards/app/requests/kyc-renewal-proceed";makeAjaxWithLoader({url:url,type:"post",data:$("#kyc-upload-form").serialize(),beforeSend:function(){var loaderHtml='<div class="overlay-loader"></div>';$("body").append(loaderHtml)},complete:function(){},success:function(){$("#kyc-renewal-main .residenceAddressForm .modify-address-block").css("display","block"),$("#kyc-renewal-main .residenceAddressForm .readonly-input").css("display","none"),$("#kyc-renewal-main .residenceAddressForm .lap-kycrenewal-ml .modify-modify-btn").css("display","none"),$("#kyc-renewal-main .residenceAddressForm").css("display","block"),$("#kyc-renewal-main .residenceAddressForm .check-box-modifyadress").css("display","block"),$("#kyc-renewel-main .kyc-block").css("display","none"),$("#kyc-renewel-main .kyc-select-card").css("display","none"),$("#kyc-renewal-main .d-line").css("display","none"),$("#kyc-renewal-main .kyc-sub-block").css("display","none"),$("#kyc-renewal-main .kyc-select-card").css("display","none"),StateListKycRenewelModifyAddress(),$("#kyc-renewal-main .residenceAddressForm .modify-btn").css("display","none"),$("body").find("div.overlay-loader").remove()},error:function(){$("body").find("div.overlay-loader").remove()}})}}function resetPOAFieldsForNonPassport(){$(".div_to_add2 .select-selected").html("Select"),$("#div_to_add2 #a_card").addClass("hidden"),$("#kycRenewalPOADocumentDropdownNotPassport").val(""),$("#div_to_add2 .if-pan").removeClass("hidden"),$("#div_to_add2 .if-addhar").addClass("hidden"),$("#div_to_add2 #kycAddrUploadDocBox").css("margin-bottom","14px"),$("#div_to_add2 .docScreen").text(""),$("#div_to_add2 .file-upload-field").val(""),$("#div_to_add2 .file-upload-wrapper").attr("data-text",""),$("#div_to_add2 .file-upload-wrapper").css("outline","none"),$("#div_to_add2 .KYC-success-upload").hide(),$("#kycRenewalPOI_consentt_check_box").prop("checked",!1),$(".poaKYCrenewal .KYC-file-valid").addClass("hidden"),$(".poiKYCrenewal .KYC-file-valid").addClass("hidden"),kycRenewalDocUploadValidation=!1}function setAmountInAmountField(){var increment=1e3,ceil=Math.ceil(Number($("#amount-input").val().replace(/,/g,""))/increment)*increment;$("#amount-input").val($("#amount-input").val().replace(/,/g,"")),$("#amount-input").val(commaSeparateNumber($("#amount-input").val())),Number($("#amount-input").val().replace(/,/g,""))<minAmount?($("#amount-input").css("border-color","red"),$(".text-danger").html("Amount must be Rs."+commaSeparateNumber(minAmount)+" or more"),$(".text-danger").css("display","block"),changeSlider(minAmount,maxAmount),$("#encash-next-btn").addClass("encash-gray-button")):ceil>=minAmount&&maxAmount>=ceil||Number($("#amount-input").val().replace(/,/g,""))>=minAmount&&Number($("#amount-input").val().replace(/,/g,""))<=maxAmount?($("#amountSlider").val(ceil),$("#amount-avail").html($("#amount-input").val()),$("#amount-input").css("border-color","#2d2d2d"),$(".text-danger").css("display","none"),changeSlider(minAmount,maxAmount)):Number($("#amount-input").val().replace(/,/g,""))>maxAmount&&($("#amount-input").css("border-color","red"),$(".text-danger").html("Maximum amount must not exceed Rs. "+commaSeparateNumber(maxAmount)),$(".text-danger").css("display","block"),changeSlider(minAmount,maxAmount),$("#encash-next-btn").addClass("encash-gray-button"))
}function matchAccountAndConfirm(){$("#encashAccNoToCheck").val($("#bank-input").val()),$("#encashAccNoToCheck").val()!=$("#confirm-input").val()&&""!=$("#confirm-input").val()?($(".text-danger-confirm").css("display","block"),$("#confirm-input").addClass("confirm-account-incorrect"),$(".cross-mark-confirm").css("display","block"),$(".tick-mark-confirm").css("display","none")):$("#encashAccNoToCheck").val()==$("#confirm-input").val()&&""!=$("#confirm-input").val()?($(".text-danger-confirm").css("display","none"),$("#confirm-input").css("border-bottom","1px solid #8a8a96"),$(".cross-mark-confirm").css("display","none"),$(".tick-mark-confirm").css("display","block"),$("#confirm-input").removeClass("confirm-account-incorrect")):($(".text-danger-confirm").css("display","none"),$("#confirm-input").css("border-bottom","1px solid #8a8a96"),$(".cross-mark-confirm").css("display","none"),$("#confirm-input").removeClass("confirm-account-incorrect")),checkForAllValues()}function commaSeparateNumber(val){return Number(val.toString().replace(/,/g,"")).toLocaleString("en")}function changeSlider(minAmount,maxAmount){var increment=1e3,ceil=Math.ceil($("#amountSlider").val()/increment)*increment;$("#amountSlider").val(ceil>maxAmount?maxAmount:ceil);var percent=(ceil-minAmount)/(maxAmount-minAmount)*100;percent>100&&(percent=99),console.log("percent=======>",percent),Number($("#amount-input").val().replace(/,/g,""))<minAmount?(percent=0,$("#amountSlider").val(minAmount),$(".cross-mark").css("display","block"),$(".tick-mark").css("display","none")):Number($("#amount-input").val().replace(/,/g,""))>maxAmount&&(percent=100,$("#amountSlider").val(maxAmount),$(".cross-mark").css("display","block"),$(".tick-mark").css("display","none")),$("#amountSlider").css("background","linear-gradient(to right, #0095da 0%, #0095da "+percent+"%, #f5f5f5 "+percent+"%, #f5f5f5 100%)"),$("#amount-avail").html(commaSeparateNumber(ceil)),Number($("#amount-input").val().replace(/,/g,""))>=minAmount&&Number($("#amount-input").val().replace(/,/g,""))<=maxAmount&&($("#amount-input").css("border-color","#2d2d2d"),$(".text-danger").css("display","none"),$(".cross-mark").css("display","none"),$(".tick-mark").css("display","block"))}function clickTenureInput(){$("#dropdown").is(":visible")?($("#dropdown").css("display","none"),$(".down-arrow").css("transform","rotate(0deg)"),$(".down-arrow-block").removeClass("align-arrow")):($("#dropdown").css("display","block"),$(".down-arrow").css("transform","rotate(180deg)"),$(".down-arrow-block").addClass("align-arrow"))}function setNextValue(value){var tenureTemp=tenureArray;if(tenureTemp.sort(function(a,b){return a-b}),!tenureTemp.includes(value)&&tenureTemp[tenureArray.length-1]<value)return $("#tenureSlider").val(tenureTemp[tenureArray.length-1]),void(percent=100*tenureTemp[tenureArray.length-1]/48);for(var i=0;i<tenureArray.length;i++)if(tenureArray[i]>value)return $("#tenureSlider").val(tenureArray[i]),void(percent=100*tenureArray[i]/48);return 48==value?($("#tenureSlider").val(tenureArray[tenureArray.length-1]),void(percent=100*tenureArray[tenureArray.length-1]/48)):void 0}function changeTenureSlider(){percent=$("#tenureSlider").val()/(tenureArray.length-1)*100,$("#tenure-input").val(sortedlist[$("#tenureSlider").val()]),$("#tenureSlider").css("background","linear-gradient(to right, #0095da 0%, #0095da "+percent+"%, #f5f5f5 "+percent+"%, #f5f5f5 100%)"),$("#tenureSlider").val()>0?$("#tenure-footer-detail").html(sortedlist[$("#tenureSlider").val()]+" months"):($("#tenure-footer-detail").html("-"),$("#rateOfInterest").html("-"))}function setTenureInput(id){if(0==id)return previousTenure=0,$("#tenureSlider").val(sortedlist.indexOf(id)),$("#tenure-input").val(id),$("#encash-next-btn").addClass("encash-gray-button"),percent=0,$("#tenureSlider").css("background","linear-gradient(to right, #0095da 0%, #0095da "+percent+"%, #f5f5f5 "+percent+"%, #f5f5f5 100%)"),$("#encash-form #bookingAmnt").addClass("error").siblings("label.error").removeClass("valid"),$("#encash-next-btn").addClass("encash-gray-button"),$(".proc-fee-block .info-text").html("0"),$(".emi-amount-calculated").html("<span style='font-size:21px; font-weight:600;'><em class='WebRupee'>Rs.</em>0</span>/month*"),$(".emi-amount-calculated-mobile").html("<span style='font-size:16px; font-weight:600;'><em class='WebRupee'>Rs.</em>0/Month*</span>"),$("#mobile-footer-emi-detail").html("0"),$("#summaryProcFee").html("<em class='WebRupee'>Rs.</em>0"),$(".roi-block .info-text").html("0"),$(".rateOfInterest").html("-"),$("#intRate").val(0),$("#emi").val(0),$("#processingFee").val(0),$(".tenure-footer-detail").html("-"),$(".summaryProcFee").html("-"),void $(".procfeesthtml").html("0");$("#tenure-input").val(id),$("#tenureSlider").val(sortedlist.indexOf(id)),changeTenureSlider();var newMax=checkMaxAmountForTenure(offerObjectList,sortedlist[$("#tenureSlider").val()]);if(newMax[0]!=maxAmount||newMax[1]!=minAmount){var minAmountForDisplayInternal=newMax[1].toString().split(".");minAmount=Number(minAmountForDisplayInternal[0]);var maxAmountForDisplayInternal=newMax[0].toString().split(".");maxAmount=Number(maxAmountForDisplayInternal[0]),setNumberLine(minAmount,maxAmount),changeSlider(minAmount,maxAmount)}callForEncashAmountCheck(),tenurelist="";for(var i=1;i<sortedlist.length;i++)tenurelist=id==sortedlist[i]?tenurelist+'<div class="option option-selected" onClick="setTenureInput('+sortedlist[i]+')">'+sortedlist[i]+"</div>":tenurelist+'<div class="option" onClick="setTenureInput('+sortedlist[i]+')">'+sortedlist[i]+"</div>";$("#dropdown").html(tenurelist),$("#dropdown").css("display","none"),$(".down-arrow").css("transform","rotate(0deg)"),$(".down-arrow-block").removeClass("align-arrow"),$("#tenure-input").addClass("amount-input-filled")}function setBankDetail(id){$("#bank-input").val(id),$("#dropdown2").css("display","none"),$(".down-arrow-block2").css("transform","rotate(0deg)"),$(".down-arrow-block2").removeClass("align-arrow2"),$("#bank-input").siblings(".placeholder").addClass("placeholder-active")}function setNumberLine(minAmount,maxAmount){var number1=commaSeparateNumber(minAmount),number5=commaSeparateNumber(maxAmount),html="";html=html+'<div style="width: 100% !important;">'+number1+"</div>",html=html+"<div>"+number5+"</div>",$("#amount-number-line").html(html)}function letUserEnterAccNumber(){$("#bank-input").attr("readonly",!1),$("#bank-input").val(""),$("#bank-input").siblings(".placeholder").addClass("placeholder-active"),$("#bank-input").focus(),$("#bank-input").attr("placeholder",""),$("#bank-input").css("cursor","auto")}function openIFSCPopup(){$("#neft-ifsc-popup").addClass("encash-ifsc-modal-popup-open"),$("#neft-searchPopup").addClass("encash-ifsc-modal-inner-animate")}function closeIFSCPopup(){$("#neft-ifsc-popup").removeClass("encash-ifsc-modal-popup-open"),$("#neft-searchPopup").removeClass("encash-ifsc-modal-inner-animate"),$("body").attr("style",""),resetSearchFields()}function backToSearch(){$("#IFSC-result-block").css("display","none"),$("#IFSC-search-block").css("display","flex"),$(".IFSC-list-button-block").css("display","none"),$(".IFSC-search-button-block").css("display","flex"),$("#IFSC-searchList").html(""),resetSearchFields()}function resetSearchFields(){$("#neftBankName").val(""),$("#neftCityDetail").val(""),$("#neftBranchHint").val(""),$("#neftCityDetail").attr("disabled","disabled"),$("#neftBranchHint").attr("disabled","disabled"),$("#neftBankName").siblings(".placeholder").removeClass("placeholder-active"),$("#neftCityDetail").siblings(".placeholder").removeClass("placeholder-active"),$("#neftBranchHint").siblings(".placeholder").removeClass("placeholder-active"),$("#neftBankName").siblings(".placeholder").removeClass("placeholder-value-inactive"),$("#neftCityDetail").siblings(".placeholder").removeClass("placeholder-value-inactive"),$("#neftBranchHint").siblings(".placeholder").removeClass("placeholder-value-inactive"),$("#neft-srchBtn").addClass("IFSC-gray-btn"),$("#neftBankName").removeClass("name-input-filled"),$("#neftCityDetail").removeClass("name-input-filled"),$("#neftBranchHint").removeClass("name-input-filled"),$("#IFSC-confirm").addClass("IFSC-gray-btn")}function setBankDetails(i){$("#IFSC-list-inner-padding"+previousIFSCSelected).css("border","0.5px solid #DADADA"),$("#IFSC-Bank-Detail-radio-"+previousIFSCSelected).css("display","none"),$("#IFSC-list-inner-padding"+i).css("border","0.5px solid #0095d9"),$("#IFSC-Bank-Detail-radio-"+i).css("display","block"),previousIFSCSelected=i,selectedBankDetailIFSC=filteredBranchList[i],$("#IFSC-confirm").removeClass("IFSC-gray-btn")}function confirmAndPopulate(){$("#ifsc-input").val(selectedBankDetailIFSC.ifsccode),$("#details-input").val(selectedBankDetailIFSC.bankName+","+selectedBankDetailIFSC.branch+","+selectedBankDetailIFSC.address),$("#details-input").html(selectedBankDetailIFSC.bankName+","+selectedBankDetailIFSC.branch+","+selectedBankDetailIFSC.address),$("#ifsc-input").siblings(".placeholder").addClass("placeholder-value-inactive"),$("#details-input").siblings(".placeholder").addClass("placeholder-value-inactive"),$("#details-input").siblings(".placeholder").addClass("fix-placeholder-inactive-alignment"),$(".cross-mark-ifsc").css("display","none"),$(".tick-mark-ifsc").css("display","block"),$("#ifsc-input").addClass("name-input-filled"),$("#details-input").addClass("name-input-filled"),closeIFSCPopup(),backToSearch(),checkForAllValues()}function checkMaxAmount(list){var max=0,min=0;if("false"==$("#isInline").val()){max=list[0].ploanAmount;for(var i in list)for(var j in list[i].offers)list[i].offers[j].maxPrincipalAmount<list[i].ploanAmount?(tempMax=list[i].offers[j].maxPrincipalAmount,min=list[i].offerMinAmount):(tempMax=list[i].ploanAmount,min=list[i].offerMinAmount),max>tempMax&&(max=tempMax,min=list[i].offerMinAmount)}else{max=0,min=list[0].offerMinAmount;for(var i in list)for(var j in list[i].offers)0==max&&(max=list[i].offers[j].encashInlineMaxEligibleAmount),max>list[i].offers[j].encashInlineMaxEligibleAmount&&(max=list[i].offers[j].encashInlineMaxEligibleAmount,min=list[i].offerMinAmount)}return $("#amountSlider").attr("max",max),$("#amountSlider").attr("min",min),[max,min]}function checkMaxAmountForTenure(list,tenure){var max=0,min=0;for(var i in list)for(var j in list[i].offers)tenure==list[i].offers[j].tenure&&("false"==$("#isInline").val()?list[i].offers[tenure].maxPrincipalAmount<list[i].ploanAmount?(max=list[i].offers[tenure].maxPrincipalAmount,min=list[i].offerMinAmount):(max=list[i].ploanAmount,min=list[i].offerMinAmount):(max=list[i].offers[tenure].encashInlineMaxEligibleAmount,min=list[i].offerMinAmount));return $("#amountSlider").attr("max",max),$("#amountSlider").attr("min",min),[max,min]}function setbankdata(i){i-=1,$("#beneficiaryBankName").val(bankObjectList[i].bankName),$("#ifsc-input").val(bankObjectList[i].IFSCCode),$("#details-input").val(bankObjectList[i].bankName+","+bankObjectList[i].branchName+","+bankObjectList[i].address),$("#details-input").html(bankObjectList[i].bankName+","+bankObjectList[i].branchName+","+bankObjectList[i].address);for(var maskedAcntNo="",j=0;j<bankObjectList[i].bankAccountNumber.length;j++)maskedAcntNo+="X";$("#bank-input").val(maskedAcntNo),$("#encashAccNoToCheck").val(bankObjectList[i].bankAccountNumber),$("#confirm-input").val(bankObjectList[i].bankAccountNumber),$("#ifsc-input").siblings(".placeholder").addClass("placeholder-value-inactive"),$("#bank-input").siblings(".placeholder").addClass("placeholder-value-inactive"),$("#details-input").siblings(".placeholder").addClass("placeholder-value-inactive"),$("#details-input").siblings(".placeholder").addClass("fix-placeholder-inactive-alignment"),$("#confirm-input").siblings(".placeholder").addClass("placeholder-value-inactive"),$("#confirm-input").addClass("name-input-filled"),$("#ifsc-input").addClass("name-input-filled"),$("#bank-input").addClass("name-input-filled"),$("#details-input").addClass("name-input-filled"),$(".cross-mark-confirm").css("display","none"),$(".tick-mark-confirm").css("display","block"),$(".text-danger-confirm").css("display","none"),$("#confirm-input").removeClass("confirm-account-incorrect"),$(".cross-mark-ifsc").css("display","none"),$(".tick-mark-ifsc").css("display","block"),checkForAllValues()}function callForEncashAmountCheck(){$(".service-error-warning").css("display","none");var savingsAccountNumber=$("#encashRegisteredAccountNumber").val(),offerIndex=$("#offers").find("li.selected-option").attr("data-index"),offerTenure=$("#tenure-input").val(),bookingAmnt=Number($("#amount-input").val().replace(/,/g,"")),interest=$("#encash-form #intRate").val();for(var i in offerObjectList)for(var j in offerObjectList[i].offers)Number(offerTenure)==offerObjectList[i].offers[j].tenure&&maxAmount>=bookingAmnt&&(offerIndex=i,interest=offerObjectList[i].interestRatePercentage);if($("#offerIndex").val(offerIndex+"_"+offerTenure),Number(bookingAmnt)<Number(minAmount))return $("#amount-input").css("border-color","red"),$(".text-danger").html("Amount must be Rs."+commaSeparateNumber(minAmount)+" or more"),void $(".text-danger").css("display","block");if(Number(bookingAmnt)>Number(maxAmount))return $("#amount-input").css("border-color","red"),$(".text-danger").html("Maximum amount must not exceed Rs. "+commaSeparateNumber(maxAmount)),void $(".text-danger").css("display","block");if(0==Number(offerTenure))return previousTenure=Number(offerTenure),void(previousAmount=Number(bookingAmnt));if(previousTenure!=Number(offerTenure)||previousAmount!=Number(bookingAmnt)){var href="/creditcards/app/benefits/encash-amount-check";href&&$.ajax({type:"POST",data:{offerIndex:offerIndex,tenure:offerTenure,savingsAccountNumber:savingsAccountNumber,paymentMode:"NEFT",requestedAmount:bookingAmnt,interest:interest},url:href,beforeSend:function(){var loaderHtml='<div class="overlay-loader"></div>';$("body").append(loaderHtml),resetEncashSummary()},complete:function(){$("body").find("div.overlay-loader").remove()},success:function(data){if(data.success)fillEncashSummary(data),$(".proc-fee-block .info-text").html(data.processingFeeDisplay),$(".emi-amount-calculated").html("<span style='font-size:21px; font-weight:600;'><em class='WebRupee'>Rs.</em>"+data.emiDisplay+"</span>/month*"),$(".emi-amount-calculated-mobile").html("<span style='font-size:16px; font-weight:600;'><em class='WebRupee'>Rs.</em>"+data.emiDisplay+"/Month*</span>"),$("#mobile-footer-emi-detail").html(data.emiDisplay),$("#summaryProcFee").html("<em class='WebRupee'>Rs.</em>"+data.processingFeeDisplay),$("#encash-next-btn").removeClass("encash-gray-button"),$(".roi-block .info-text").html(data.interest),$(".rateOfInterest").html(data.interest+"% p.a."),$("#intRate").val(data.interest),$("#emi").val(data.emi),$("#processingFee").val(data.processingFee),$(".tenure-footer-detail").html(data.tenure+" Months"),$(".summaryProcFee").html("<em class='WebRupee'>Rs.</em>"+data.processingFeeDisplay),$(".amount-avail").html("<em class='WebRupee'>Rs.</em>"+commaSeparateNumber(data.totalAmount)),$("#amount-input").val(commaSeparateNumber(data.totalAmount)),$(".procfeesthtml").html(data.gstOnProcessingFee),$("#tenure-input").addClass("amount-input-filled"),$("#amount-input").addClass("amount-input-filled"),previousTenure=Number(offerTenure),previousAmount=Number(bookingAmnt),$("body").find("div.overlay-loader").remove();else{$("#encash-form #bookingAmnt").addClass("error").siblings("label.error").removeClass("valid"),$("#encash-next-btn").addClass("encash-gray-button"),$(".proc-fee-block .info-text").html("0"),$(".emi-amount-calculated").html("<span style='font-size:21px; font-weight:600;'><em class='WebRupee'>Rs.</em>0</span>/month*"),$(".emi-amount-calculated-mobile").html("<span style='font-size:16px; font-weight:600;'><em class='WebRupee'>Rs.</em>0/Month*</span>"),$("#mobile-footer-emi-detail").html("0"),$("#summaryProcFee").html("<em class='WebRupee'>Rs.</em>0"),$(".roi-block .info-text").html("0"),$(".rateOfInterest").html("-"),$("#intRate").val(0),$("#emi").val(0),$("#processingFee").val(0),$(".tenure-footer-detail").html("-"),$(".summaryProcFee").html("-"),$(".procfeesthtml").html("0"),$(".service-error-warning").css("display","block"),$(".service-error-warning").html(data.message==$("errorMEssage").val()?"Error encountered while capturing amount. Re-enter amount or adjust slider.":data.message),$("body").find("div.overlay-loader").remove(),setTenureInput(0);var errMsg=data.message;errMsg||(errMsg=DATA_FROM_PROPERTY.defaultErrorMessage,submitForm(window.location.href,!0));var h3=$("#encash-form .step-3 > .steps");if(h3.parent().find("#error.error-wrap").length>0)return void h3.parent().find("#error.error-wrap").html('<h5 class="top-error">'+errMsg+"</h5>");$("#encash-form .step-3 > .steps").after('<div id="error" class="error-wrap"><h5 class="top-error">'+errMsg+"</h5></div>")}callDncOfferEligibility(data)},error:function(xhr){$("body").find("div.overlay-loader").remove(),$("#encash-next-btn").addClass("encash-gray-button"),$("#encash-form #term-condition-id").prop("checked",!1).parent().removeClass("checked"),$("#encash-form #confirm-button").attr("disabled",!0).removeClass("primary").addClass("secondary").addClass("disabled"),"901"==xhr.status&&(window.location.href="/creditcards/app/user/login/error/invalidSession"),callDncOfferEligibility(data)}})}}function ebcashBackOtpBtn(){if(4==resendOTPCount)if($("#channelFromInfo").val()==$("#channelFromConfigC2S").val())submitFormToCampaignLogout();else{$("#encash-revamp-form").attr("action","/creditcards/app/dashboard");var loaderHtml='<div class="overlay-loader"></div>';$(".encashmodal").append(loaderHtml),$("#encash-revamp-form").submit()}else $("#encashInlinePageDisa").css("pointer-events","auto"),$("#encashGenerateOtp").css("display","none"),$("#tnc-check").prop("checked",!1),$("#encash-confirm-button").addClass("encash-gray-button"),$("#encash-confirm-button2").addClass("encash-gray-button"),$("#bullet2").css("display","block"),$("#bullet-tick2").css("opacity","0"),$("#encashGenerateOtp .encashInvalidOtpColor").css("display","none"),$("#encashGenerateOtp .encashblack-text").css("display","none"),$("#encashGenerateOtp .encashblack-text2").css("display","none"),$("#encashGenerateOtp .encashOtp-field").val(""),$("#encashGenerateOtp .encashInlineblue-btn").css("background-color","##ddd"),$("#encashGenerateOtp .encashInlineblue-btn").css("pointer-events","none"),$("#encashGenerateOtp .encashInlineblue-btn").css("color","#666")}function onClickGenOtpBtnEncash(){var list=$("#details-input").text().split(",");if(console.log(list),$("#beneficiaryBankName").val($("#details-input").text().split(",")[0]),$("#beneficiaryBranchName").val($("#details-input").text().split(",")[1]),$("#encashGenerateOtp .encashExaustedMessColor2").css("display","none"),$(".service-error-warning2").css("display","none"),$("#channelFromInfo").val()==$("#channelFromConfig").val()){$("#otphidden").val("123456");var loaderHtml='<div class="overlay-loader"></div>';1==$("#isInline").val()||"true"==$("#isInline").val()?$("#encashInlineBookedFlag").val("Y"):$("#encashBookedFlag").val("Y"),$("body").append(loaderHtml),$("#encash-revamp-form").submit()}else{1==$("#isInline").val()||"true"==$("#isInline").val()?(dncFormSubmitEncash("encash_inline_payment_details_form","Encash Inline Booking","","","","",""),dncOTPGenEventEncash("encash_inline","Encash Inline booking","","N")):(dncFormSubmitEncash("encash_payment_details_form","Encash Booking","","","","",""),dncOTPGenEventEncash("cross_sell","Encash Booking","","N"));{var _OtpgenUrl="/creditcards/app/benefits/send-otp-encash";document.getElementById("passphrase").value}$.ajax({type:"POST",data:{},url:_OtpgenUrl,beforeSend:function(){$(".error-div").hide();var loaderHtml='<div class="overlay-loader"></div>';$("body").append(loaderHtml)},complete:function(){$("body").find("div.overlay-loader").remove()},success:function(response){1==response.success?($("#encashGenerateOtp").css("display","block"),$("#encashInlinePageDisa").css("pointer-events","none"),$("#encashGenerateOtp").css("pointer-events","auto"),$(".encashOtp-field").css("pointer-events","block"),$(".encashmodal").css("display","flex"),$("#encash-otp1").focus()):1==response.alreadyExisting?($("#encashGenerateOtp .encashblack-text2").css("display","block"),$("#encashGenerateOtp").css("display","block"),$("#encashInlinePageDisa").css("pointer-events","none"),$("#encashGenerateOtp").css("pointer-events","auto"),$(".encashOtp-field").css("pointer-events","block"),$("#encash-otp1").focus(),$(".encashmodal").css("display","flex")):($(".service-error-warning2").css("display","block"),$(".service-error-warning2").html(response.message))},error:function(){$("body").find("div.overlay-loader").remove()}})}}function resendEncashOtp(){$("#encashGenerateOtp .encashExaustedMessColor2").css("display","none"),$("#encashGenerateOtp #encashInlineInvalidMsg").css("display","none"),$("#encashGenerateOtp .encashblack-text2").css("display","none");var href="/creditcards/app/benefits/resend-otp-encash";$.ajax({url:href,type:"POST",dataType:"json",beforeSend:function(){var loaderHtml='<div class="overlay-loader"></div>';$(".encashmodal").append(loaderHtml)},complete:function(){$(".encashmodal").find("div.overlay-loader").remove()},success:function(data){"true"==data.success||1==data.success?(++resendOTPCount,1==$("#isInline").val()||"true"==$("#isInline").val()?dncOTPGenEventEncash("encash_inline","Encash Inline Booking","","Y"):dncOTPGenEventEncash("cross_sell","Encash Booking","","Y"),$("#encash-otp2, #encash-otp3, #encash-otp4, #encash-otp5, #encash-otp6").attr("maxlength","1"),$("#encash-otp1").focus(),$(".otp-value").val(""),1==data.resendEnabled||"true"==data.resendEnabled?4>resendOTPCount?($("#encashGenerateOtp .encashblack-text").css("display","block"),$("#encashGenerateOtp .encashOtp-field").val(""),$("#encashGenerateOtp .encashInvalidOtpColor").css("display","none"),$("#encashGenerateOtp .encashInlineblue-btn").css("background-color","##ddd"),$("#encashGenerateOtp .encashInlineblue-btn").css("pointer-events","none"),$("#encashGenerateOtp .encashInlineblue-btn").css("color","#666")):($("#encashGenerateOtp .encashInvalidOtpColor").css("display","none"),$("#encashGenerateOtp .encashExaustedMessColor").css("display","block"),$("#encashGenerateOtp .encashblack-text").css("display","none"),$("#encashGenerateOtp .encashInlineResendBtnColor").css("display","block"),$("#encashGenerateOtp .encashInlineResendBtnColor").css("border-bottom","0"),$("#encashGenerateOtp .encashInlineResendBtnColor").css("color","#8A8A96"),$("#encashGenerateOtp .encashInlineResendBtnColor").css("pointer-events","none"),$("#encashGenerateOtp .encashOtp-field").val("")):0==data.resendEnabled||"false"==data.resendEnabled):0==data.success?5>resendOTPCount?($("#encashGenerateOtp .encashblack-text").css("display","none"),$("#encashGenerateOtp .encashExaustedMessColor2").css("display","block"),$("#encashGenerateOtp .encashExaustedMessColor2").html(data.message),$("#encashGenerateOtp .encashInvalidOtpColor").css("display","none"),$("#encashGenerateOtp .encashInlineblue-btn").css("background-color","##ddd"),$("#encashGenerateOtp .encashInlineblue-btn").css("pointer-events","none"),$("#encashGenerateOtp .encashInlineblue-btn").css("color","#666")):($("#encashGenerateOtp .encashInvalidOtpColor").css("display","none"),$("#encashGenerateOtp .encashExaustedMessColor").css("display","block"),$("#encashGenerateOtp .encashblack-text").css("display","none"),$("#encashGenerateOtp .encashInlineResendBtnColor").css("display","block"),$("#encashGenerateOtp .encashInlineResendBtnColor").css("border-bottom","0"),$("#encashGenerateOtp .encashInlineResendBtnColor").css("color","#8A8A96"),$("#encashGenerateOtp .encashInlineResendBtnColor").css("pointer-events","none"),$("#encashGenerateOtp .encashOtp-field").val("")):107==data.errorCode&&($(".otp-error-message").show().text(data.message),$(".otp-msg").hide().text(""))},error:function(){$(".encashmodal").find("div.overlay-loader").remove()}})}function encashOTPMaxlenthVerfi(){var encashMaxlenth=$("#encash-otp1").val()+$("#encash-otp2").val()+$("#encash-otp3").val()+$("#encash-otp4").val()+$("#encash-otp5").val()+$("#encash-otp6").val(),encashOtplength=encashMaxlenth.length;6==encashOtplength?($("#encashGenerateOtp .encashInlineblue-btn").css("background-color","#0095da"),$("#encashGenerateOtp .encashInlineblue-btn").css("pointer-events","auto"),$("#encashGenerateOtp .encashInlineblue-btn").css("color","#ffffff")):($("#encashGenerateOtp .encashInlineblue-btn").css("background-color","##ddd"),$("#encashGenerateOtp .encashInlineblue-btn").css("pointer-events","none"))}function encashConfirmOtpSubmission(){$("#encashGenerateOtp .encashExaustedMessColor2").css("display","none"),$("#encashGenerateOtp #encashInlineInvalidMsg").css("display","none");var url="/creditcards/app/benefits/auth-otp-encash",passphrase=$("#passphrase").val(),otpNumber=$("#encashOtpValue").val();$("#otphidden").val($("#encashOtpValue").val());encryptData(otpNumber);$.ajax({type:"POST",data:{otp:otpNumber,passPhrase:passphrase},url:url,headers:{passphrase:passphrase},beforeSend:function(){var loaderHtml='<div class="overlay-loader"></div>';$(".encashmodal").append(loaderHtml)},complete:function(){$(".encashmodal").find("div.overlay-loader").remove()},success:function(response){var decryptedData=dataDecryptionAES(response,passphrase);if(response=JSON.parse(decryptedData),response.success){$("#journeyAbandon").val("false"),1==$("#isInline").val()||"true"==$("#isInline").val()?(dncFormSubmitEncash("encash_inline_form","Encash Inline Booking","","","success","",""),dncOTPSubmitEventEncash("encash_inline","otp:valid","Encash Inline Booking","","success",response.statusCode,response.message),dncJourneyMilestoneEncash("encash_inline_application_submitted","Encash Inline Booking",""),dncFormConfirmationEncash("encash_inline_payment_details_form","Encash Inline Booking","","","success","","")):(dncFormSubmitEncash("encash_form","Encash Booking","","","success","",""),dncOTPSubmitEventEncash("cross_sell","otp:valid","Encash Booking","","success",response.statusCode,response.message),dncJourneyMilestoneEncash("encash_application_submitted","Encash Booking",""),dncFormConfirmationEncash("encash_payment_details_form","Encash Booking","","","success","","")),$("#encashGenerateOtp").css("display","none");var loaderHtml='<div class="overlay-loader"></div>';$("body").append(loaderHtml),1==$("#isInline").val()||"true"==$("#isInline").val()?$("#encashInlineBookedFlag").val("Y"):$("#encashBookedFlag").val("Y"),$("#encash-revamp-form").submit()}else if(4==response.statusCode||1==response.invalidAttemptsOver){1==$("#isInline").val()||"true"==$("#isInline").val()?(dncFormSubmitEncash("encash_inline_form","Encash Inline Booking","","","failure",response.statusCode,response.message),dncOTPSubmitEventEncash("encash_inline","otp:invalid","Encash Inline Booking","","failure",response.statusCode,response.message),dncFormConfirmationEncash("encash_inline_payment_details_form","Encash Inline Booking","","","failure",response.statusCode,response.message)):(dncFormSubmitEncash("encash_form","Encash Booking","","","failure",response.statusCode,response.message),dncOTPSubmitEventEncash("cross_sell","otp:invalid","Encash Booking","","failure",response.statusCode,response.message),dncFormConfirmationEncash("encash_payment_details_form","Encash Booking","","","failure",response.statusCode,response.message)),$("#encashGenerateOtp .encashblack-text2").css("display","none"),$(".encashmodal").find("div.overlay-loader").remove(),$("#encash-otp2, #encash-otp3, #encash-otp4, #encash-otp5, #encash-otp6").attr("maxlength","1"),$("#encash-otp1").focus(),$(".otp-value").val(""),++counter,$("#encashGenerateOtp .encashInvalidOtpColor").css("display","block");{$("#invalidOtpCount").val()}$("#invalidOtpCount").text(counter),$("#encashGenerateOtp .encashOtp-field").val(""),$("#encashGenerateOtp .encashblack-text").css("display","none"),$("#encashGenerateOtp .encashExaustedMessColor").css("display","none"),$("#encashGenerateOtp .encashInlineblue-btn").css("background-color","##ddd"),$("#encashGenerateOtp .encashInlineblue-btn").css("pointer-events","none"),$("#encashGenerateOtp .encashInlineblue-btn").css("color","#666"),5==counter&&($("#invalidOtpAttempExh").css("display","block"),$("#encashGenerateOtp").css("display","none"),$(".encashInlinemodal").css("display","flex"),$(".invalidOtpblue-btn").css("pointer-events","auto"),$(".overlay-opened").css("pointer-events","none"))}else(2==response.statusCode||1==response.statusCode)&&(1==$("#isInline").val()||"true"==$("#isInline").val()?(dncFormSubmitEncash("encash_inline_form","Encash Inline Booking","","","failure",response.statusCode,response.message),dncOTPSubmitEventEncash("encash_inline","otp:expired","Encash Inline Booking","","failure",response.statusCode,response.message),dncFormConfirmationEncash("encash_inline_payment_details_form","Encash Inline Booking","","","failure",response.statusCode,response.message)):(dncFormSubmitEncash("encash_form","Encash Booking","","","failure",response.statusCode,response.message),dncOTPSubmitEventEncash("cross_sell","otp:expired","Encash Booking","","failure",response.statusCode,response.message),dncFormConfirmationEncash("encash_payment_details_form","Encash Booking","","","failure",response.statusCode,response.message)),$("#encash-otp2, #encash-otp3, #encash-otp4, #encash-otp5, #encash-otp6").attr("maxlength","1"),$("#encash-otp1").focus(),$(".otp-value").val(""),$(".encashmodal").find("div.overlay-loader").remove(),$("#encashGenerateOtp .encashInlineResendBtnColor").css("border-bottom","0"),$("#encashGenerateOtp .encashInlineResendBtnColor").css("color","#8A8A96"),$("#encashGenerateOtp .encashInlineResendBtnColor").css("pointer-events","none"),$(".encashOtp-field").css("pointer-events","none"),$("#encashGenerateOtp .encashExaustedMessColor").css("display","none"),$("#encashGenerateOtp .encashInlineblue-btn").css("pointer-events","none"),$("#encashGenerateOtp #encashInlineInvalidMsg").html(response.message),$("#encashGenerateOtp #encashInlineInvalidMsg").css("display","block"),$("#encashGenerateOtp .encashInlineblue-btn").css("display","none"),$("#encashGenerateOtp .encashblack-text2").css("display","none"))},error:function(){$(".encashmodal").find("div.overlay-loader").remove()}})}function checkIfOnscreen(){var win=$(window),viewport={top:win.scrollTop(),left:win.scrollLeft()};viewport.right=viewport.left+win.width(),viewport.bottom=viewport.top+win.height();var bounds=$(".login-footer").offset();return bounds.right=bounds.left+$(".login-footer").outerWidth(),bounds.bottom=bounds.top+$(".login-footer").outerHeight(),!(viewport.right<bounds.left||viewport.left>bounds.right||viewport.bottom<bounds.top||viewport.top>bounds.bottom)}function checkForAllValues(){$("#encashAccNoToCheck").val()!=$("#confirm-input").val()||""==$("#encashAccNoToCheck").val()||""==$("#confirm-input").val()||""==$("#ifsc-input").val()||""==$("#details-input").html()||""==$("#name-input").val()||!$("#tnc-check").is(":checked")||$(".cross-mark-confirm").is(":visible")||$(".cross-mark-ifsc").is(":visible")?($("#encash-confirm-button").addClass("encash-gray-button"),$("#encash-confirm-button2").addClass("encash-gray-button"),$("#bullet2").css("display","block"),$("#bullet-tick2").css("opacity","0")):($("#encash-confirm-button").removeClass("encash-gray-button"),$("#encash-confirm-button2").removeClass("encash-gray-button"),$("#bullet2").css("display","none"),$("#bullet-tick2").css("opacity","1"))}function encashInlineRadioBtnSelection(flag){"encash"==flag?($("#encashInleNextBtn1").css("pointer-events","auto"),$("#encashinlineRadioid").val("encash"),$("#encashRadioBgColor1").addClass("encash-bg-color-selected"),$("#encashInleNextBtn1").removeClass("encash-gray-btn"),$("#encashRadioBgColor2").removeClass("encash-bg-color-selected"),$("#encash-inline-redirect-submit").css("display","none"),$("#encash-redirect-submit").css("display","block")):"encashInline"==flag?($("#encashInleNextBtn2").css("pointer-events","auto"),$("#encashinlineRadioid").val("encashInline"),$("#encashRadioBgColor2").addClass("encash-bg-color-selected"),$("#encashInleNextBtn2").removeClass("encash-gray-btn"),$("#encashRadioBgColor1").removeClass("encash-bg-color-selected"),$("#encash-inline-redirect-submit").css("display","block"),$("#encash-redirect-submit").css("display","none")):($("#encashInleNextBtn1").css("pointer-events","none"),$("#encashInleNextBtn1").addClass("encash-gray-btn"),$("#encashInleNextBtn2").css("pointer-events","none"),$("#encashInleNextBtn2").addClass("encash-gray-btn"),$("#encash-inline-redirect-submit").css("display","none"),$("#encash-redirect-submit").css("display","block"))
}function submitForRedirection(){if($("#journeyAbandon").val("false"),dncFormSubmitEncash("encash_offer_form","Common Page","","","","",""),"encash"==$("#encashinlineRadioid").val()){setAnalyticsEncashJourney("sbi-card:postlogin:encash_offer selection_page","sbi-card:postlogin:encash_offer selection_encash");var loaderHtml='<div class="overlay-loader"></div>';$("body").append(loaderHtml),$("#encash-landing-form").submit()}else{setAnalyticsEncashJourney("sbi-card:postlogin:encash_offer selection_page","sbi-card:postlogin:encash_offer selection_encash_inline");var loaderHtml='<div class="overlay-loader"></div>';$("body").append(loaderHtml),$("#encash-landing-form").attr("action","/creditcards/app/benefits/encash-inline"),$("#encash-landing-form").submit()}}function openFirstStep(){$("#step1").show(),$("#step2").hide(),$("#step1-down-arrow").css("transform","rotate(180deg)"),$("#step1-down-arrow").removeClass("step-arrow-top-shift1"),$("#step2-down-arrow").css("transform","rotate(0deg)"),$("#step2-down-arrow").css("opacity","0.5"),$("#step2-down-arrow").addClass("step-arrow-top-shift2"),$(".accordion-relative2 .accordion-heading").addClass("accordion-heading-inactive"),$(".accordion-relative2").css("margin-top","45px"),$(".progress-line").removeClass("height-correction-progress-encash"),$(".progress-line").addClass("correct-margin-progress-line-encash"),$(".encash-step2-summary-mobile").addClass("hide-when-step1"),$("#choose-your-plan-head").css("cursor","auto"),$(".stepper-bullet2").addClass("align-top-for-bullet"),$("#bullet-tick2").addClass("top-align-step2-tick"),firstStepOpen=!0}function proceedForNEFTStepEncash(){firstStepOpen=!1,$("#step1").hide(),$(".progress-line").css("border-color","#00b1f2"),$("#bullet1").css("display","none"),$("#bullet-tick").css("opacity","1"),$("#step2").show(),$(".progress-line").addClass("height-correction-progress-encash"),$(".progress-line").addClass("correct-margin-progress-line-encash"),$("#bullet2").removeClass("stepper-bullet2-inactive"),$("#bullet2").addClass("stepper-bullet2"),$(".stepper-bullet2").removeClass("align-top-for-bullet"),$(".accordion-heading").removeClass("accordion-heading-inactive"),$("#step1-down-arrow").css("transform","rotate(0deg)"),$("#step1-down-arrow").addClass("step-arrow-top-shift1"),$("#step2-down-arrow").css("transform","rotate(180deg)"),$("#step2-down-arrow").css("opacity","1"),$("#step2-down-arrow").removeClass("step-arrow-top-shift2"),$(".accordion-relative2").css("margin-top","15px"),$(".encash-step2-summary-mobile").removeClass("hide-when-step1"),$("#choose-your-plan-head").css("cursor","pointer"),$("#bullet-tick2").removeClass("top-align-step2-tick"),$(window).width()<767?$("html, body").animate({scrollTop:$(".encash-offer-section").offset().top},1e3):$("html, body").animate({scrollTop:$("#choose-your-plan-head").offset().top},1e3)}function submitFormToCampaignLogout(){var loaderHtml='<div class="overlay-loader"></div>';if($("body").append(loaderHtml),$(".encash-prelogin-lower").is(":visible"))$("#encash-revamp-form").attr("action","/creditcards/app/campaign/logout"),$("#encash-revamp-form").submit();else{var html="<form METHOD='POST' action='/creditcards/app/campaign/logout' id='lougouttempform'></form>";$("body").append(html);var loaderHtml='<div class="overlay-loader"></div>';$("body").append(loaderHtml),$("#lougouttempform").submit()}}function newTabpageEncash(){window.open("https://www.sbicard.com/en/contact-us/personal.page","_blank")}function redirectToOfferPage(){var isInline=$("#isInline").val();if(1==isInline||"true"==isInline){$("#encash-success-form").attr("action","/creditcards/app/benefits/encash-inline");var loaderHtml='<div class="overlay-loader"></div>';$("body").append(loaderHtml),$("#encash-success-form").submit()}else{$("#encash-success-form").attr("action","/creditcards/app/benefits/encash");var loaderHtml='<div class="overlay-loader"></div>';$("body").append(loaderHtml),$("#encash-success-form").submit()}}function redirectToOtherOfferSuccess(isEncash){if("encash-inline"==isEncash){$("#encash-success-form").attr("action","/creditcards/app/benefits/encash-inline");var loaderHtml='<div class="overlay-loader"></div>';$("body").append(loaderHtml),$("#encash-success-form").submit()}else{$("#encash-success-form").attr("action","/creditcards/app/benefits/encash");var loaderHtml='<div class="overlay-loader"></div>';$("body").append(loaderHtml),$("#encash-success-form").submit()}}function noEncashOfferLogout(){if($("#channelFromInfo").val()==$("#channelFromConfigC2S").val()||$("#channelFromInfo").val()==$("#channelFromConfig").val())submitFormToCampaignLogout();else{$("#encash-revamp-form").attr("action","/creditcards/app/dashboard");var loaderHtml='<div class="overlay-loader"></div>';$(".encashmodal").append(loaderHtml),$("#encash-revamp-form").submit()}}function invalidExhautRedDash(){if(5==counter)if($("#channelFromInfo").val()==$("#channelFromConfigC2S").val())submitFormToCampaignLogout();else{$("#encash-revamp-form").attr("action","/creditcards/app/dashboard");var loaderHtml='<div class="overlay-loader"></div>';$(".encashmodal").append(loaderHtml),$("#encash-revamp-form").submit()}}function toggleYonoUserOrCard(type){console.log("Inside YONO toggle  "+type),$("#yono-submit-ajaxerror").css("display","none"),$("#yono-submit-error").css("display","none"),"card"===type?($("#selectYonoCardSection a").addClass("active"),$("#selectYonoUserSection a").removeClass("active"),$(".yono-login-form #yono-card-linking").css("display","block"),$(".yono-login-form #yono-user-linking").css("display","none"),resetYonoUserPassSection()):"user"===type&&($("#selectYonoUserSection a").addClass("active"),$("#selectYonoCardSection a").removeClass("active"),$(".yono-login-form #yono-user-linking").css("display","block"),$(".yono-login-form #yono-card-linking").css("display","none"),resetYonoCardSection())}function checkUserLoginBtnYono(type){if("userid"===type||"password"===type){var userid=$("#yono-user-linking #yono_userid").val(),password=$("#yono-user-linking #yono_password").val();userid&&password?($("#yonoUserGenBtn").removeClass("add-disable"),$("#yonoUserGenBtn .yono_generate_btn").removeClass("disable-btn")):($("#yonoUserGenBtn").addClass("add-disable"),$("#yonoUserGenBtn .yono_generate_btn").addClass("disable-btn"))}}function checkUserSubmitBtnYono(){var userOtp=$("#yono-user-linking #yono_user_otp").val();6===userOtp.length?($("#yonoUserSubmitBtn").removeClass("add-disable"),$("#yonoUserSubmitBtn .submit_btn").removeClass("disable-btn")):($("#yonoUserSubmitBtn").addClass("add-disable"),$("#yonoUserSubmitBtn .submit_btn").addClass("disable-btn"))}function cardSubValidityYono(){$("#yono-card-linking #yono_card_no").hasClass("valid")?($("#yonoCardGenOtpContainer").removeClass("add-disable"),$("#yonoCardGenOtpContainer .submit_btn").removeClass("disable-btn")):$("#yonoCardGenOtpContainer").hasClass("add-disable")&&$("#yonoCardGenOtpContainer .submit_btn").hasClass("disable-btn")||($("#yonoCardGenOtpContainer").addClass("add-disable"),$("#yonoCardGenOtpContainer .submit_btn").addClass("disable-btn"))}function checkCardSubmitBtnYono(){var cardOtp=($("#yono-card-linking #yono_card_dob").val(),$("#yono-card-linking #yono_card_otp").val());dobotpFlagYono&&6===cardOtp.length?($("#yonoCardSubmitOtp").removeClass("add-disable"),$("#yonoCardSubmitOtp .submit_btn").removeClass("disable-btn")):($("#yonoCardSubmitOtp").addClass("add-disable"),$("#yonoCardSubmitOtp .submit_btn").addClass("disable-btn"))}function checkLoginTypeYono(){sessionStorage.removeItem("type");var dobValue=$("#yono-card-linking #yono_card_dob").val(),cnum=$("#yono-card-linking #yono_card_no").val(),userId=$("#yono-user-linking #yono_userid").val();dobValue||cnum?sessionStorage.setItem("type","card"):userId&&sessionStorage.setItem("type","userId")}function resetYonoUserPassSection(){$(".yono-login-form #yono_userid").val(""),$(".yono-login-form #yono_password").val(""),$(".yono-login-form #yono_user_otp").val(""),$(".yono-login-form .user-otp-wrapper").addClass("hide-user-wrapper"),$(".yono-login-form .user-otp-gen-wrapper").removeClass("hide-user-wrapper"),$(".yono-login-form #yonoUserOtpMsg").css("display","none"),$("#yonoUserGenBtn").addClass("add-disable"),$("#yonoUserGenBtn .yono_generate_btn").addClass("disable-btn"),$("#yonoUserSubmitBtn").addClass("add-disable"),$("#yonoUserSubmitBtn .submit_btn").addClass("disable-btn"),$("#yono-user-linking #yono_user_otp").removeClass("invalid valid"),$("#yono-user-linking #yono_user_otp_cross").css("display","none"),$("#yono-user-linking #yono_user_otp_tick").css("display","none"),$("#yono-user-linking #yono-resend-otp-user").css("cursor","pointer"),$("#yono-resend-otp-user .resend_otp").css("pointer-events","auto"),$("#yono-resend-otp-user .resend_otp").css("color","#652b80"),$("#yono-user-linking #yonoUserGenBtn").css("pointer-events","auto")}function resetYonoCardSection(){$(".yono-login-form #yono_card_no").val(""),$(".yono-login-form #yono_card_dob").val(""),$(".yono-login-form #yono_card_otp").val(""),$("#yono-card-linking #yono_card_no").css("pointer-events","auto"),$("#yono-card-linking #yonoCardGenOtpContainer").css("pointer-events","auto"),$("#yono-card-linking #yono_card_no").prop("readonly",!1),$("#yono-card-linking #yono_card_no, #yono-card-linking #yono_card_dob, #yono-card-linking #yono_card_otp").removeClass("valid"),$("#yono-card-linking #yono_card_no, #yono-card-linking #yono_card_dob, #yono-card-linking #yono_card_otp").removeClass("invalid"),$("#yono-card-linking #yono_dob_label").removeClass("active"),$(".yono-login-form .card-otp-wrapper").addClass("hide-card-wrapper"),$(".yono-login-form #yonoCardGenOtpContainer").removeClass("hide-card-wrapper"),$(".yono-login-form #yonoCardOtpMsg").css("display","none"),$("#yono-card-linking #yono_card_tick").css("display","none"),$("#yono-card-linking #yono_card_err").css("display","none"),$("#yono-card-linking #yono_card_cross").css("display","none"),$("#yono-card-linking #yono_card_dob_tick").css("display","none"),$("#yono-card-linking #yono_card_dob_cross").css("display","none"),$("#yono-card-linking #yono_card_otp_cross").css("display","none"),$("#yono-card-linking #yono_card_otp_tick").css("display","none"),$("#yonoCardGenOtpContainer").addClass("add-disable"),$("#yonoCardGenOtpContainer .submit_btn").addClass("disable-btn"),$("#yonoCardSubmitOtp").addClass("add-disable"),$("#yonoCardSubmitOtp .submit_btn").addClass("disable-btn"),$("#yono-card-linking #yono-resend-otp-card").css("cursor","poiner"),$("#yono-resend-otp-card .resend_otp").css("pointer-events","auto"),$("#yono-resend-otp-card .resend_otp").css("color","#652b80"),dobotpFlagYono=!1}function yonoUserGenOtp(){$("#yono-submit-error").css("display","none"),$("#yono-submit-ajaxerror").css("display","none");var passphrase=$("#passphrase").val(),userId=$("#yono-user-linking #yono_userid").val(),password=$("#yono-user-linking #yono_password").val();if(userIdPassed=encryptData(userId),passwordPassed=encryptData(password),$("#msw-login-form #channel").exists())var otpGenURL="/creditcards/app/msw/validate-user-new-page?hs_token="+$('#msw-login-form input:hidden[name="hs_token"]').val()+"&channel="+$('#msw-login-form input:hidden[name="channel"]').val();else var otpGenURL="/creditcards/app/msw/validate-user-new-page?hs_token="+$('#msw-login-form input:hidden[name="hs_token"]').val();$.ajax({type:"POST",data:JSON.stringify({username:userIdPassed,password:passwordPassed}),url:otpGenURL,contentType:"application/json; charset=utf-8",dataType:"json",headers:{passphrase:passphrase},beforeSend:function(){if($(".msw-login-conatiner.cards_container").exists()){var mswLoader='<div class="msw-jrny-overlay-loader"><div class="loader"></div></div>';$("body").append(mswLoader)}else{var loaderHtml='<div class="overlay-loader"></div>';$("body").append(loaderHtml)}},complete:function(){$(".msw-login-conatiner.cards_container").exists()?$("body").find("div.msw-jrny-overlay-loader").remove():$("body").find("div.overlay-loader").remove()},success:function(response){if(response)if(response.success){$(".yono-login-form .user-otp-wrapper").removeClass("hide-user-wrapper"),$(".yono-login-form .user-otp-gen-wrapper").addClass("hide-user-wrapper"),$(".yono-login-form #yonoUserOtpMsg").css("display","block");var mobileNumber=response.mobileNumberMasked.slice(-4,response.mobileNumberMasked.length+1);$("#yono-user-linking #yono-otp-msz").html("OTP has been sent to your registered Mobile number ending with "+mobileNumber)}else 506===response.errorCode?($(".yono-login-form .user-otp-wrapper").removeClass("hide-user-wrapper"),$(".yono-login-form .user-otp-gen-wrapper").addClass("hide-user-wrapper"),$(".yono-login-form #yonoUserOtpMsg").css("display","block"),$("#yono-card-linking #yono-otp-msz").html(response.message.replace(/_/g," "))):($("#yono-submit-ajaxerror").css("display","block"),$("#yono-submit-ajaxerror #yono-linking-ajaxerror").html(response.message.replace(/_/g," ")),$("#yonoUserSubmitBtn").addClass("add-disable"),$("#yonoUserSubmitBtn .submit_btn").addClass("disable-btn"))},error:function(){$("body").find("div.overlay-loader").remove()}})}function yonoCardAuthentivateOtpBtn(){console.log("yono sms auth submitted"),$("#yono-submit-error").css("display","none"),$("#yono-submit-ajaxerror").css("display","none"),sessionStorage.setItem("ifSubmitted","true"),checkLoginTypeYono(),$("#yono-card-linking #yono_card_no").css("pointer-events","auto"),$("#yono-card-linking #card-otp").focusout(),$("#yono-card-linking #yono_card_no").prop("readonly",!0);var otpValue=$("#yono-card-linking #yono_card_otp").val(),passphrase=$("#passphrase").val(),dob=$("#yono-card-linking #yono_card_dob").val(),cardNum=$("#yono-card-linking #yono_card_no").val(),hstoken=$('#msw-login-form input:hidden[name="hs_token"]').val(),channel=$('#msw-login-form input:hidden[name="channel"]').val();if(cardNumValue=deformatCardNumYono(cardNum),dob1=dob.slice(0,2),dob2=dob.slice(3,6),dob3=dob.slice(7,11),dobValue=dob1+dob2+dob3,otpValue&&dob&&6==otpValue.length&&passphrase)var salt=CryptoJS.lib.WordArray.random(16),iv=CryptoJS.lib.WordArray.random(16),key=CryptoJS.PBKDF2(passphrase,salt,{keySize:4,iterations:100}),encryptedCard=CryptoJS.AES.encrypt(cardNumValue,key,{iv:iv,mode:CryptoJS.mode.CBC,padding:CryptoJS.pad.Pkcs7}),cardPassed=salt+iv+encryptedCard,encryptedOtp=CryptoJS.AES.encrypt(otpValue,key,{iv:iv,mode:CryptoJS.mode.CBC,padding:CryptoJS.pad.Pkcs7}),otpPassed=salt+iv+encryptedOtp,encryptedDob=CryptoJS.AES.encrypt(dob,key,{iv:iv,mode:CryptoJS.mode.CBC,padding:CryptoJS.pad.Pkcs7}),dobPassed=salt+iv+encryptedDob;var authOtpURL="/creditcards/app/msw/cardreg-authenticate-otp-dob-pan";$.ajax({type:"POST",data:JSON.stringify({cardNumber:cardPassed,otp:otpPassed,dob:dobPassed,hs_token:hstoken,channel:channel}),url:authOtpURL,contentType:"application/json; charset=utf-8",dataType:"text",headers:{passphrase:passphrase},beforeSend:function(){if($("#yono-card-linking #yono_card_no").removeClass("invalid"),$("#yono-card-linking #yono_card_dob_cross").css("display","none"),$("#yono-card-linking #yono_card_otp_cross").css("display","none"),$("#yono-card-linking #yono_card_dob").removeClass("invalid"),$("#yono-card-linking #yono_card_otp").removeClass("invalid"),$(".yono-login-form #yonoCardOtpMsg").css("display","none"),$(".msw-login-conatiner.cards_container").exists()){var mswLoader='<div class="msw-jrny-overlay-loader"><div class="loader"></div></div>';$("body").append(mswLoader)}else{var loaderHtml='<div class="overlay-loader"></div>';$("body").append(loaderHtml)}},success:function(response){console.log("encrypted response",response),response=decryptUserIDYono(response,passphrase),console.log("String Response",response),response=JSON.parse(response),console.log("JSON Response",response),1==response.success?($("#msw-login-form #success-flag").val("success"),yonoCardSubmitOtpBtn1()):"504"==response.errorCode?($("#yono-card-linking #yono_card_dob").val(""),$("#yono-card-linking #yono_card_otp").val(""),$("#yono-card-linking #yono_card_no").css("pointer-events","none"),$("#yono-card-linking #yono_card_dob").addClass("invalid"),$("#yono-card-linking #yono_card_dob_cross").css("display","block"),$("#yono-card-linking #yono_card_dob_tick").css("display","none"),$("#yono-card-linking #yono_card_otp").addClass("invalid"),$("#yono-card-linking #yono_card_otp_cross").css("display","block"),$("#yono-card-linking #yono_card_otp_tick").css("display","none"),$("#yono-submit-ajaxerror").css("display","block"),$("#yono-submit-ajaxerror #yono-linking-ajaxerror").html(response.message.replace(/_/g," ")),$(".msw-login-conatiner.cards_container").exists()?$("body").find("div.msw-jrny-overlay-loader").remove():$("body").find("div.overlay-loader").remove()):"510"==response.errorCode?($("#yono-card-linking #yonoCardGenOtpContainer").css("pointer-events","none"),$("#yonoCardGenOtpContainer").addClass("add-disable"),$("#yonoCardGenOtpContainer .submit_btn").addClass("disable-btn"),$("#yono-card-linking #yono_card_no").css("pointer-events","auto"),$("#yono-submit-ajaxerror").css("display","block"),$("#yono-submit-ajaxerror #yono-linking-ajaxerror").html(response.message.replace(/_/g," ")),$(".msw-login-conatiner.cards_container").exists()?$("body").find("div.msw-jrny-overlay-loader").remove():$("body").find("div.overlay-loader").remove()):"777"==response.errorCode?($("#yono-card-linking #yono_card_dob").val(""),$("#yono-card-linking #yono_card_otp").val(""),$("#yono-card-linking #yono_card_no").css("pointer-events","none"),$("#yono-card-linking #yono_card_dob").addClass("invalid"),$("#yono-card-linking #yono_card_dob").css("pointer-events","none"),$("#yono-card-linking #yono_card_dob_cross").css("display","block"),$("#yono-card-linking #yono_card_dob_tick").css("display","none"),$("#yono-card-linking #yono_card_otp").addClass("invalid"),$("#yono-card-linking #yono_card_otp").css("pointer-events","none"),$("#yono-card-linking #yono_card_otp_cross").css("display","block"),$("#yono-card-linking #yono_card_otp_tick").css("display","none"),$("#yono-submit-ajaxerror").css("display","block"),$("#yono-submit-ajaxerror #yono-linking-ajaxerror").html(response.message.replace(/_/g," ")),$(".msw-login-conatiner.cards_container").exists()?$("body").find("div.msw-jrny-overlay-loader").remove():$("body").find("div.overlay-loader").remove()):"539"==response.errorCode?($("#msw-login-form #success-flag").val("false"),yonoCardSubmitOtpBtn1()):($("#card-login #login-card-label").addClass("active"),$("#yono-card-linking #yono_card_dob").val(""),$("#yono-card-linking #yono_card_otp").val(""),$("#yono-card-linking #yono_card_no").css("pointer-events","none"),$("#yono-card-linking #yono_card_dob").addClass("invalid"),$("#yono-card-linking #yono_card_dob_cross").css("display","block"),$("#yono-card-linking #yono_card_dob_tick").css("display","none"),$("#yono-card-linking #yono_card_otp").addClass("invalid"),$("#yono-card-linking #yono_card_otp_cross").css("display","block"),$("#yono-card-linking #yono_card_otp_tick").css("display","none"),$("#yono-submit-ajaxerror").css("display","block"),$("#yono-submit-ajaxerror #yono-linking-ajaxerror").html("Sorry! You cannot avail this service at the moment. Please try again later or call the SBI Card helpline at 39 02 02 02 (prefix the STD code of your city)."),$(".msw-login-conatiner.cards_container").exists()?$("body").find("div.msw-jrny-overlay-loader").remove():$("body").find("div.overlay-loader").remove())},error:function(){$("#yono-card-linking #yono_card_dob").val(""),$("#yono-card-linking #yono_card_otp").val(""),$("#yono-card-linking #yono_card_no").css("pointer-events","none"),$("#yono-card-linking #yono_card_dob").addClass("invalid"),$("#yono-card-linking #yono_card_dob_cross").css("display","block"),$("#yono-card-linking #yono_card_dob_tick").css("display","none"),$("#yono-card-linking #yono_card_otp").addClass("invalid"),$("#yono-card-linking #yono_card_otp_cross").css("display","block"),$("#yono-card-linking #yono_card_otp_tick").css("display","none"),$("#yono-submit-ajaxerror").css("display","block"),$("#yono-submit-ajaxerror #yono-linking-ajaxerror").html("Sorry! You cannot avail this service at the moment. Please try again later or call the SBI Card helpline at 39 02 02 02 (prefix the STD code of your city)."),$(".msw-login-conatiner.cards_container").exists()?$("body").find("div.msw-jrny-overlay-loader").remove():$("body").find("div.overlay-loader").remove()}})}function yonoCardGenOtp(){var cardNum=$("#yono-card-linking #yono_card_no").val();if($("#yono-card-linking #yono_card_no").hasClass("invalid")||cardNum.length<17)return $("#yono-card-linking #yono_card_no").addClass("invalid"),$("#yono-card-linking #yono_card_tick").css("display","none"),void $("#yono-card-linking #yono_card_cross").css("display","block");var passphrase=$("#passphrase").val();if($("#yono-submit-error").css("display","none"),$("#yono-submit-ajaxerror").css("display","none"),$(".yono-login-form #yonoCardOtpMsg").css("display","none"),cardNumPassed=encryptData(cardNum),cardNumValue=deformatCardNumYono(cardNum),console.log("Encrypetd Yono Card No::"+cardNumPassed),console.log("Decrypetd Yono Card No::"+cardNum,cardNumValue),$("#msw-login-form #channel").exists())var otpGenURL="/creditcards/app/msw/card-linking-otp-gen?hs_token="+$('#msw-login-form input:hidden[name="hs_token"]').val()+"&channel="+$('#msw-login-form input:hidden[name="channel"]').val();else var otpGenURL="/creditcards/app/msw/card-linking-otp-gen?hs_token="+$('#msw-login-form input:hidden[name="hs_token"]').val();$.ajax({type:"POST",data:JSON.stringify({cardNumber:cardNumPassed}),url:otpGenURL,contentType:"application/json; charset=utf-8",dataType:"json",headers:{passphrase:passphrase},beforeSend:function(){if($(".msw-login-conatiner.cards_container").exists()){var mswLoader='<div class="msw-jrny-overlay-loader"><div class="loader"></div></div>';$("body").append(mswLoader)}else{var loaderHtml='<div class="overlay-loader"></div>';$("body").append(loaderHtml)}},complete:function(){$(".msw-login-conatiner.cards_container").exists()?$("body").find("div.msw-jrny-overlay-loader").remove():$("body").find("div.overlay-loader").remove()},success:function(response){response&&(console.log(".First OTP."),response.success===!0?201===response.errorCode&&($("#yono-card-linking #yono_card_no").css("pointer-events","none"),$("#yono-card-linking #yono_card_no").prop("readonly",!0),$(".yono-login-form .card-otp-wrapper").removeClass("hide-card-wrapper"),$(".yono-login-form #yonoCardGenOtpContainer").addClass("hide-card-wrapper"),$("#yono-card-linking #yono_card_err").hide(),$(".yono-login-form #yonoCardOtpMsg").css("display","block"),$("#yono-card-linking #yono-otp-msz").html(response.message.replace(/_/g," "))):509===response.errorCode?($("#card_no").css("pointer-events","none"),$("#card-login #card_no").prop("readonly",!0),$(".yono-login-form .card-otp-wrapper").removeClass("hide-card-wrapper"),$(".yono-login-form #yonoCardGenOtpContainer").addClass("hide-card-wrapper"),$("#yono-card-linking #yono_card_err").hide(),$(".yono-login-form #yonoCardOtpMsg").css("display","block"),$("#yono-card-linking #yono-otp-msz").html(response.message.replace(/_/g," "))):($("#yono-card-linking #yono_card_no").addClass("invalid"),$("#yono-card-linking #yono_card_tick").css("display","none"),$("#yono-card-linking #yono_card_cross").css("display","block"),$("#yono-submit-ajaxerror").css("display","block"),$("#yono-submit-ajaxerror #yono-linking-ajaxerror").html(response.message.replace(/_/g," "))))},error:function(){console.log(".OTP send Error."),$("body").find("div.overlay-loader").remove(),$("#yono-card-linking #yono_card_no").addClass("invalid"),$("#yono-card-linking #yono_card_tick").css("display","none"),$("#yono-card-linking #yono_card_cross").css("display","block"),$("#yono-submit-ajaxerror").css("display","block"),$("#yono-submit-ajaxerror #yono-linking-ajaxerror").html("Sorry! You cannot avail this service at the moment. Please try again later or call the SBI Card helpline at 39 02 02 02 (prefix the STD code of your city).")}})}function yonoUserResendOtp(){if(!(yonoUserResendOTPCount>5)){$("#yono-submit-error").css("display","none"),$("#yono-submit-ajaxerror").css("display","none");var passphrase=$("#passphrase").val(),userId=$("#yono-user-linking #yono_userid").val(),password=$("#yono-user-linking #yono_password").val();if(userIdPassed=encryptData(userId),passwordPassed=encryptData(password),$("#msw-login-form #channel").exists())var otpGenURL="/creditcards/app/msw/resend-otp?hs_token="+$('#msw-login-form input:hidden[name="hs_token"]').val()+"&channel="+$('#msw-login-form input:hidden[name="channel"]').val();else var otpGenURL="/creditcards/app/msw/resend-otp?hs_token="+$('#msw-login-form input:hidden[name="hs_token"]').val();$.ajax({type:"POST",data:JSON.stringify({username:userIdPassed,password:passwordPassed}),url:otpGenURL,contentType:"application/json; charset=utf-8",dataType:"json",headers:{passphrase:passphrase},beforeSend:function(){if($("#yono-user-linking #yono_user_otp").removeClass("invalid"),$("#yono-user-linking #yono_user_otp_cross").css("display","none"),$(".msw-login-conatiner.cards_container").exists()){var mswLoader='<div class="msw-jrny-overlay-loader"><div class="loader"></div></div>';$("body").append(mswLoader)}else{var loaderHtml='<div class="overlay-loader"></div>';$("body").append(loaderHtml)}},complete:function(){$(".msw-login-conatiner.cards_container").exists()?$("body").find("div.msw-jrny-overlay-loader").remove():$("body").find("div.overlay-loader").remove()},success:function(response){if(response)if(console.log(".Resend OTP."),response.success){$("#yono-user-linking #yono_user_otp_err").hide(),$(".yono-login-form #yonoUserOtpMsg").css("display","block");var mobileNumber=response.mobileNumberMasked.slice(-4,response.mobileNumberMasked.length+1);$("#yono-user-linking #yono-otp-msz").html("OTP has been resent to your registered Mobile number ending with "+mobileNumber),yonoUserResendOTPCount+=1,console.log("yonoUserResendOTPCount : "+yonoUserResendOTPCount)}else 512===response.errorCode?location.href=location.origin+"/creditcards/app/user/login?endSession=true":(507===response.errorCode||1010===response.errorCode)&&($("#yono-user-linking #yono-resend-otp-user").css("cursor","not-allowed"),$("#yono-resend-otp-user .resend_otp").css("pointer-events","none"),$("#yono-resend-otp-user .resend_otp").css("color","gray"),yonoUserResendOTPCount+=1,console.log("yonoUserResendOTPCount : "+yonoUserResendOTPCount)),$("#yono-submit-ajaxerror").css("display","block"),$("#yono-submit-ajaxerror #yono-linking-ajaxerror").html(response.message.replace(/_/g," ")),$("#yonoUserSubmitBtn").addClass("add-disable"),$("#yonoUserSubmitBtn .submit_btn").addClass("disable-btn")},error:function(){$("body").find("div.overlay-loader").remove()}})}}function yonoCardResendOtp(){if(!(yonoCardResendOTPCount>5)){$("#yono-submit-error").css("display","none"),$("#yono-submit-ajaxerror").css("display","none"),cardNumVal=$("#yono-card-linking #yono_card_no").val(),cardNum=deformatCardNumYono(cardNumVal),cardNumPassed=encryptData(cardNum);var passphrase=$("#passphrase").val();if($("#msw-login-form #channel").exists())var resendCardURL="/creditcards/app/msw/card-linking-otp-resend?hs_token="+$('#msw-login-form input:hidden[name="hs_token"]').val()+"&channel="+$('#msw-login-form input:hidden[name="channel"]').val();else var resendCardURL="/creditcards/app/msw/card-linking-otp-resend?hs_token="+$('#msw-login-form input:hidden[name="hs_token"]').val();$.ajax({type:"POST",data:JSON.stringify({cardNumber:cardNumPassed}),url:resendCardURL,contentType:"application/json; charset=utf-8",dataType:"json",headers:{passphrase:passphrase},beforeSend:function(){if($("#yono-card-linking #yono_card_no").removeClass("invalid"),$("#yono-card-linking #yono_card_dob_cross").css("display","none"),$("#yono-card-linking #yono_card_otp_cross").css("display","none"),$("#yono-card-linking #yono_card_dob").removeClass("invalid"),$("#yono-card-linking #yono_card_otp").removeClass("invalid"),pressLoginCard=!1,status_code=!1,$(".msw-login-conatiner.cards_container").exists()){var mswLoader='<div class="msw-jrny-overlay-loader"><div class="loader"></div></div>';$("body").append(mswLoader)}else{var loaderHtml='<div class="overlay-loader"></div>';$("body").append(loaderHtml)}},complete:function(){$(".msw-login-conatiner.cards_container").exists()?$("body").find("div.msw-jrny-overlay-loader").remove():$("body").find("div.overlay-loader").remove()},success:function(response){response&&(console.log(".Resend OTP."),response.success?($("#yono-card-linking #yono_card_no").css("pointer-events","none"),$(".yono-login-form .card-otp-wrapper").removeClass("hide-card-wrapper"),$(".yono-login-form #yonoCardGenOtpContainer").addClass("hide-card-wrapper"),$("#yono-card-linking #yono_card_err").hide(),$(".yono-login-form #yonoCardOtpMsg").css("display","block"),$("#yono-card-linking #yono-otp-msz").html(response.message.replace(/_/g," ")),yonoCardResendOTPCount+=1,console.log("yonoCardResendOTPCount : "+yonoCardResendOTPCount)):((507===response.errorCode||1010===response.errorCode)&&($("#yono-card-linking #yono-resend-otp-card").css("cursor","not-allowed"),$("#yono-resend-otp-card .resend_otp").css("pointer-events","none"),$("#yono-resend-otp-card .resend_otp").css("color","gray"),yonoCardResendOTPCount+=1,console.log("yonoCardResendOTPCount : "+yonoCardResendOTPCount)),$("#yono-submit-ajaxerror").css("display","block"),$("#yono-submit-ajaxerror #yono-linking-ajaxerror").html(response.message.replace(/_/g," ")),$("#yonoCardSubmitOtp").addClass("add-disable"),$("#yonoCardSubmitOtp .submit_btn").addClass("disable-btn")))},error:function(){$("body").find("div.overlay-loader").remove()}})}}function decryptUserIDYono(encryptedText,passphrase){var salt1=CryptoJS.enc.Hex.parse(encryptedText.substr(0,32)),iv1=CryptoJS.enc.Hex.parse(encryptedText.substr(32,32)),encrypted1=encryptedText.substring(64),key1=CryptoJS.PBKDF2(passphrase,salt1,{keySize:4,iterations:100}),decrypted=CryptoJS.AES.decrypt(encrypted1,key1,{iv:iv1,padding:CryptoJS.pad.Pkcs7,mode:CryptoJS.mode.CBC}),decryptedDataPassed=decrypted.toString(CryptoJS.enc.Utf8);return decryptedDataPassed}function yonoUserSubmit(){var yono_otp=$("#yono-user-linking #yono_user_otp").val();console.log("YONO"+yono_otp);var userId=$("#yono-user-linking #yono_userid").val(),password=$("#yono-user-linking #yono_password").val(),userOtp=$("#yono-user-linking #yono_user_otp").val();if(userOtp){checkLoginTypeYono();var mswLoader='<div class="msw-jrny-overlay-loader"><div class="loader"></div></div>';$("body").append(mswLoader);var userOtpPassed=encryptData(userOtp),userIdPassed=encryptData(userId),passwordPassed=encryptData(password);$("#yono-user-linking #yono_user_otp").val(userOtpPassed),$("#yono-user-linking #yono_userid").val(userIdPassed),$("#yono-user-linking #yono_password").val(passwordPassed),$("#msw-login-form").attr("action","/creditcards/app/msw/msw-authenticate-otp"),document.getElementById("msw-login-form").submit(),$("#yono-user-linking #yono_user_otp").val(userOtp),$("#yono-user-linking #yono_userid").val(userId),$("#yono-user-linking #yono_password").val(password)}else $("#yono-user-linking #yono_user_otp").addClass("invalid")}function yonoCardSubmitOtpBtn1(){var otpValue=$("#yono-card-linking #yono_card_otp").val(),passphrase=$("#passphrase").val(),dob=$("#yono-card-linking #yono_card_dob").val(),cardNum=$("#yono-card-linking #yono_card_no").val();if(cardNumValue=deformatCardNumYono(cardNum),dob1=dob.slice(0,2),dob2=dob.slice(3,6),dob3=dob.slice(7,11),dobValue=dob1+dob2+dob3,passphrase){var salt=CryptoJS.lib.WordArray.random(16),iv=CryptoJS.lib.WordArray.random(16),key=CryptoJS.PBKDF2(passphrase,salt,{keySize:4,iterations:100});encryptedCard=CryptoJS.AES.encrypt(cardNumValue,key,{iv:iv,mode:CryptoJS.mode.CBC,padding:CryptoJS.pad.Pkcs7}),cardPassed=salt+iv+encryptedCard,encryptedOtp=CryptoJS.AES.encrypt(otpValue,key,{iv:iv,mode:CryptoJS.mode.CBC,padding:CryptoJS.pad.Pkcs7}),otpPassed=salt+iv+encryptedOtp,encryptedDob=CryptoJS.AES.encrypt(dob,key,{iv:iv,mode:CryptoJS.mode.CBC,padding:CryptoJS.pad.Pkcs7}),dobPassed=salt+iv+encryptedDob
}$("#yono-card-linking #yono_card_otp").val(otpPassed),$("#yono-card-linking #yono_card_dob").val(dobPassed),$("#yono-card-linking #yono_card_no").val(cardPassed),document.getElementById("msw-login-form").submit(),$("#yono-card-linking #yono_card_otp").val(otpValue),$("#yono-card-linking #yono_card_dob").val(dob),$("#yono-card-linking #yono_card_no").val(cardNum)}function yonoCardSubmitOtpBtn(){console.log("yono card submitted"),$("#yono-submit-error").css("display","none"),$("#yono-submit-ajaxerror").css("display","none"),sessionStorage.setItem("ifSubmitted","true"),checkLoginTypeYono(),$("#yono-card-linking #yono_card_no").css("pointer-events","auto"),$("#yono-card-linking #card-otp").focusout(),$("#yono-card-linking #yono_card_no").prop("readonly",!0);var otpValue=$("#yono-card-linking #yono_card_otp").val(),passphrase=$("#passphrase").val(),dob=$("#yono-card-linking #yono_card_dob").val(),cardNum=$("#yono-card-linking #yono_card_no").val();if(cardNumValue=deformatCardNumYono(cardNum),dob1=dob.slice(0,2),dob2=dob.slice(3,6),dob3=dob.slice(7,11),dobValue=dob1+dob2+dob3,otpValue&&dob&&6==otpValue.length){var mswLoader='<div class="msw-jrny-overlay-loader"><div class="loader"></div></div>';if($("body").append(mswLoader),passphrase){var salt=CryptoJS.lib.WordArray.random(16),iv=CryptoJS.lib.WordArray.random(16),key=CryptoJS.PBKDF2(passphrase,salt,{keySize:4,iterations:100});encryptedCard=CryptoJS.AES.encrypt(cardNumValue,key,{iv:iv,mode:CryptoJS.mode.CBC,padding:CryptoJS.pad.Pkcs7}),cardPassed=salt+iv+encryptedCard,encryptedOtp=CryptoJS.AES.encrypt(otpValue,key,{iv:iv,mode:CryptoJS.mode.CBC,padding:CryptoJS.pad.Pkcs7}),otpPassed=salt+iv+encryptedOtp,encryptedDob=CryptoJS.AES.encrypt(dob,key,{iv:iv,mode:CryptoJS.mode.CBC,padding:CryptoJS.pad.Pkcs7}),dobPassed=salt+iv+encryptedDob}$("#yono-card-linking #yono_card_otp").val(otpPassed),$("#yono-card-linking #yono_card_dob").val(dobPassed),$("#yono-card-linking #yono_card_no").val(cardPassed),document.getElementById("msw-login-form").submit(),$("#yono-card-linking #yono_card_otp").val(otpValue),$("#yono-card-linking #yono_card_dob").val(dob),$("#yono-card-linking #yono_card_no").val(cardNum)}}function backToHomeYono(){console.log("back to home yono => "+window.location.origin);var origin=window.location.origin,hs_token=$('.yono-success-page input:hidden[name="hs_token"]').val(),channel=$('.yono-success-page input:hidden[name="channel"]').val(),url=origin+"/creditcards/app/msw/link-card?hs_token="+hs_token+"&channel="+channel;console.log("url ====> "+url),window.location.href=url}function formatNonAmexWhileDeleteLoginYono(cardNumberIP){var formatSpd=/[ `!@#$%^&*()_+\-=\[\]{};':"\\|,.<>\/?~]/;4==cardNumberIP.length?(cardNumberIP=cardNumberIP.slice(0,3),$("#yono-card-linking #yono_card_no").val(cardNumberIP)):9==cardNumberIP.length&&formatSpd.test(cardNumberIP)?(cardNumberIP=cardNumberIP.slice(0,8),$("#yono-card-linking #yono_card_no").val(cardNumberIP)):14==cardNumberIP.length&&formatSpd.test(cardNumberIP)&&(cardNumberIP=cardNumberIP.slice(0,13),$("#yono-card-linking #yono_card_no").val(cardNumberIP))}function formatAmexWhileDeleteLoginYono(cardNumberIP){var formatSpd=/[ `!@#$%^&*()_+\-=\[\]{};':"\\|,.<>\/?~]/;4==cardNumberIP.length?(cardNumberIP=cardNumberIP.slice(0,3),$("#yono-card-linking #yono_card_no").val(cardNumberIP)):11==cardNumberIP.length&&formatSpd.test(cardNumberIP)&&(cardNumberIP=cardNumberIP.slice(0,10),$("#yono-card-linking #yono_card_no").val(cardNumberIP))}function formatAndVerifyNonAmexLoginYono(cardNumberIP){var formatSpd=/[ `!@#$%^&*()_+\-=\[\]{};':"\\|,.<>\/?~]/;cardNumberIP.length<20?((4==cardNumberIP.length||(9==cardNumberIP.length||14==cardNumberIP.length)&&formatSpd.test(cardNumberIP))&&(cardNumberIP+="-",$("#yono-card-linking #yono_card_no").val(cardNumberIP)),19==cardNumberIP.length&&(cardNumberIP=cardNumberIP.slice(0,19),$("#yono-card-linking #yono_card_no").val(cardNumberIP),validateLoginCardNumbersYono(cardNumberIP,!1))):cardNumberIP.length>19&&(cardNumberIP=cardNumberIP.slice(0,19),$("#yono-card-linking #yono_card_no").val(cardNumberIP))}function formatAndVerifyAmexLoginYono(cardNumberIP){var formatSpd=/[ `!@#$%^&*()_+\-=\[\]{};':"\\|,.<>\/?~]/;cardNumberIP.length<18?((4==cardNumberIP.length||11==cardNumberIP.length&&formatSpd.test(cardNumberIP))&&(cardNumberIP+="-",$("#yono-card-linking #yono_card_no").val(cardNumberIP)),17==cardNumberIP.length&&(cardNumberIP=cardNumberIP.slice(0,17),$("#yono-card-linking #yono_card_no").val(cardNumberIP),validateLoginCardNumbersYono(cardNumberIP,!0))):cardNumberIP.length>17&&(cardNumberIP=cardNumberIP.slice(0,17),$("#yono-card-linking #yono_card_no").val(cardNumberIP))}function validateLoginCardNumbersYono(cardNumberIP,isAmex){if(cardNumberIP=cardNumberIP.trim(),isAmex){var cardNumber1=cardNumberIP.slice(0,4),cardNumber2=cardNumberIP.slice(5,11),cardNumber3=cardNumberIP.slice(12,17),cardNumber4="";$("#cvv-number").focus(),$(".validate-form #card-number-1").val(cardNumber1),$(".validate-form #card-number-2").val(cardNumber2),$(".validate-form #card-number-3").val(cardNumber3),$(".validate-form #card-number-4").val(cardNumber4);var cnum=cardNumber1.concat(cardNumber2,cardNumber3),isValid=creditCardValidateMicroYono(cnum);isValid?setLoginCardStyleValidYono():setLoginCardStyleErrorYono()}else{var cardNumber1=cardNumberIP.slice(0,4),cardNumber2=cardNumberIP.slice(5,9),cardNumber3=cardNumberIP.slice(10,14),cardNumber4=cardNumberIP.slice(15,19);$("#cvv-number").focus(),$(".yono-login-container #card-number-1").val(cardNumber1),$(".yono-login-container #card-number-2").val(cardNumber2),$(".yono-login-container #card-number-3").val(cardNumber3),$(".yono-login-container #card-number-4").val(cardNumber4);var cnum=cardNumber1.concat(cardNumber2,cardNumber3,cardNumber4),isValid=creditCardValidateMicroYono(cnum);isValid?setLoginCardStyleValidYono():setLoginCardStyleErrorYono()}}function setLoginCardStyleErrorYono(){resetLoginCardFieldStyleYono(),$("#yono-card-linking #yono_card_no").addClass("invalid"),$("#yono-card-linking #yono_card_cross").css("display","block"),$("#yono-card-linking #yono_card_tick").css("display","none"),$("#yono-card-linking #yono_card_err").css("display","block"),$("#yono-card-linking #yono_card_err").html("Invalid card number!")}function setLoginCardStyleValidYono(){resetLoginCardFieldStyleYono(),$("#yono-card-linking #yono_card_no").addClass("valid"),$("#yono-card-linking #yono_card_cross").css("display","none"),$("#yono-card-linking #yono_card_tick").css("display","block"),$("#yono-card-linking #yono_card_err").css("display","none"),$("#yono-card-linking #yono_card_err").html("")}function resetLoginCardFieldStyleYono(){$("#yono-card-linking #yono_card_no").hasClass("invalid")&&$("#yono-card-linking #yono_card_no").removeClass("invalid"),$("#yono-card-linking #yono_card_no").hasClass("valid")&&$("#yono-card-linking #yono_card_no").removeClass("valid")}function formatCardNumYono(){var cardNum=$("#yono-card-linking #yono_card_no");if(value=cardNum.val(),firstDigit=value.charAt(0),secondDigit=value.charAt(1),15==value.length&&3==firstDigit&&7==secondDigit&&-1==value.indexOf("-")){var cardNum1=value.slice(0,4),cardNum2=value.slice(4,10),cardNum3=value.slice(10,15),cardNum1=cardNum1+"-"+cardNum2+"-"+cardNum3;cardNum.val(cardNum1)}else if(16==value.length&&-1==value.indexOf("-")){var cardNum1=value.slice(0,4),cardNum2=value.slice(4,8),cardNum3=value.slice(8,12),cardNum4=value.slice(12,16),cardNum1=cardNum1+"-"+cardNum2+"-"+cardNum3+"-"+cardNum4;cardNum.val(cardNum1)}}function formatCardNumberYono(cardNumberValue){var cardNum=$("#yono-card-linking #yono_card_no");if(value=cardNumberValue,firstDigit=value.charAt(0),secondDigit=value.charAt(1),15==value.length&&3==firstDigit&&7==secondDigit&&-1==value.indexOf("-")){var cardNum1=value.slice(0,4),cardNum2=value.slice(4,10),cardNum3=value.slice(10,15),cardNum1=cardNum1+"-"+cardNum2+"-"+cardNum3;cardNum.val(cardNum1)}else if(16==value.length&&-1==value.indexOf("-")){var cardNum1=value.slice(0,4),cardNum2=value.slice(4,8),cardNum3=value.slice(8,12),cardNum4=value.slice(12,16),cardNum1=cardNum1+"-"+cardNum2+"-"+cardNum3+"-"+cardNum4;cardNum.val(cardNum1)}}function deformatCardNumYono(cardNum){var cardNumValue="";return 19==cardNum.length?(cardNum1=cardNum.slice(0,4),cardNum2=cardNum.slice(5,9),cardNum3=cardNum.slice(10,14),cardNum4=cardNum.slice(15,19),cardNumValue=cardNum1+cardNum2+cardNum3+cardNum4):17==cardNum.length?(cardNum1=cardNum.slice(0,4),cardNum2=cardNum.slice(5,11),cardNum3=cardNum.slice(12,17),cardNumValue=cardNum1+cardNum2+cardNum3):cardNumValue=cardNum,cardNumValue}function decryptCardNumberYono(encryptedText){var passphrase=$("#prePassphase").val(),salt=CryptoJS.enc.Hex.parse(encryptedText.substr(0,32)),iv=CryptoJS.enc.Hex.parse(encryptedText.substr(32,32)),encrypted=encryptedText.substring(64),key=CryptoJS.PBKDF2(passphrase,salt,{keySize:4,iterations:100}),decrypted=CryptoJS.AES.decrypt(encrypted,key,{iv:iv,padding:CryptoJS.pad.Pkcs7,mode:CryptoJS.mode.CBC});return JSON.parse(decrypted.toString(CryptoJS.enc.Utf8))}function removeErrorcardNumYono(){$("#yono-card-linking #yono_card_err").css("display","none"),$("#yono-card-linking #yono_card_cross").css("display","none");var cardNumberIP=$("#yono-card-linking #yono_card_no").val().trim(),firstDigit=cardNumberIP.charAt(0),secondDigit=cardNumberIP.charAt(1),len=cardNumberIP.length;17==len&&3==firstDigit&&7==secondDigit||19==len||$("#yono-card-linking #yono_card_tick").css("display","none")}function validateCardNumbersNewYono(cardNumberIP){cardNumberIP=cardNumberIP.trim();var cardNumber="";cardNumber=deformatCardNumYono(cardNumberIP);var firstDigit=cardNumber.charAt(0),secondDigit=cardNumber.charAt(1),isValid=creditCardValidateRetailYono(cardNumber);!isValid&&(cardNumber.length>0&&3==firstDigit&&7==secondDigit||cardNumber.length>0)?($("#yono-card-linking #yono_card_tick").css("display","none"),$("#yono-card-linking #yono_card_err").css("display","block"),$("#yono-card-linking #yono_card_err").html("Invalid card number!"),$("#yono-card-linking #yono_card_cross").css("display","block"),$("#yono-card-linking #yono_card_no").addClass("invalid"),$("#yono-card-linking #yono_card_no").removeClass("valid")):isValid&&(cardNumber.length>0&&3==firstDigit&&7==secondDigit||cardNumber.length>0)&&($("#yono-card-linking #yono_card_tick").css("display","block"),$("#yono-card-linking #yono_card_err").css("display","none"),$("#yono-card-linking #yono_card_cross").css("display","none"),$("#yono-card-linking #yono_card_no").removeClass("invalid"),$("#yono-card-linking #yono_card_no").addClass("valid"))}function submitEnachDeregisterPageForm(){var loaderHtml='<div class="overlay-loader"></div>';$("body").append(loaderHtml),$("#proceed-deregister").submit()}function dncAnalyticsSample(){if(window.analytics){analytics.track("",{evar1:eventName,evar2:level1Detail,evar3:level2Detail,evar4:"cross_sell",evar5:$("#encashAnalyticsSessionId").val(),evar8:"Website",evar12:pageName,evar13:"null"==$("#idEncashShortcode").val()?"":$("#idEncashShortcode").val(),evar15:"null"==$("#idEncashAccountNumber").val()?"":$("#idEncashAccountNumber").val(),evar16:"null"==$("#idEncashCardNumber").val()?"":$("#idEncashCardNumber").val(),evar18:"null"==$("#idEncashMobileNumber").val()?"":$("#idEncashMobileNumber").val(),evar22:"null"==$("#idEncashEmailId").val()?"":$("#idEncashEmailId").val(),evar44:!$("#idEncashHighRiskFlag").val()||"Y"!=$("#idEncashHighRiskFlag").val()&&"y"!=$("#idEncashHighRiskFlag").val()?"":"Y",evar23:SRnumber,evar25:status,evar26:errorCode,evar27:errorDescription,evar31:otpResend,evar32:"null"==$("#idEncashFirstName").val()?"":$("#idEncashFirstName").val(),evar33:"null"==$("#idEncashLastName").val()?"":$("#idEncashLastName").val(),evar39:"null"==$("#idEncashMiddleName").val()?"":$("#idEncashMiddleName").val(),evar36:"null"==$("#idEncashMaxAmount").val()?"":$("#idEncashMaxAmount").val(),evar30:"null"==$("#idEncashInlineMaxAmount").val()?"":$("#idEncashInlineMaxAmount").val(),evar34:"null"==$("#idEncashROI").val()?"":$("#idEncashROI").val(),evar35:"null"==$("#idEncashInlineROI").val()?"":$("#idEncashInlineROI").val(),evar38:dateFormatChangeForFCU($("#idEncashExpDate").val()),evar43:dateFormatChangeForFCU($("#idEncashInlineExpDate").val()),evar14:"true"==$("#isInline").val()?"Encash Inline":"Encash",evar21:$("#amount-input").val()?$("#amount-input").val().replace(/,/g,""):"",evar17:0!=$("#tenure-input").val()&&""!=$("#tenure-input").val()&&"0"!=$("#tenure-input").val()?$("#tenure-input").val():"",evar37:$("#intRate").val(),evar6:$("#idEncashBankName").val()})}}function dncFormLoadEncash(level1Detail,pageName){if(window.analytics){{({evar1:"form_load",evar2:level1Detail,evar3:"",evar4:"cross_sell",evar5:$("#encashAnalyticsSessionId").val(),evar8:"Website",evar12:pageName,evar13:"null"==$("#idEncashShortcode").val()?"":$("#idEncashShortcode").val(),evar15:"null"==$("#idEncashAccountNumber").val()?"":$("#idEncashAccountNumber").val(),evar16:"null"==$("#idEncashCardNumber").val()?"":$("#idEncashCardNumber").val(),evar18:"null"==$("#idEncashMobileNumber").val()?"":$("#idEncashMobileNumber").val(),evar22:"null"==$("#idEncashEmailId").val()?"":$("#idEncashEmailId").val(),evar32:"null"==$("#idEncashFirstName").val()?"":$("#idEncashFirstName").val(),evar33:"null"==$("#idEncashLastName").val()?"":$("#idEncashLastName").val(),evar39:"null"==$("#idEncashMiddleName").val()?"":$("#idEncashMiddleName").val(),evar36:"null"==$("#idEncashMaxAmount").val()?"":$("#idEncashMaxAmount").val(),evar30:"null"==$("#idEncashInlineMaxAmount").val()?"":$("#idEncashInlineMaxAmount").val(),evar34:"null"==$("#idEncashROI").val()?"":$("#idEncashROI").val(),evar35:"null"==$("#idEncashInlineROI").val()?"":$("#idEncashInlineROI").val(),evar38:dateFormatChangeForFCU($("#idEncashExpDate").val()),evar43:dateFormatChangeForFCU($("#idEncashInlineExpDate").val()),evar14:$("#isInline").val()&&"null"!=$("#idEncashOfferedProducts").val()?"true"==$("#isInline").val()||1==$("#isInline").val()?"encash_inline":"encash":"",evar21:$("#amount-input").val()?$("#amount-input").val().replace(/,/g,""):"",evar17:0!=$("#tenure-input").val()&&""!=$("#tenure-input").val()&&"0"!=$("#tenure-input").val()?$("#tenure-input").val():"",evar37:$("#intRate").val(),evar42:$("#processingFee").val(),evar9:"null"==$("#idEncashOfferedProducts").val()?"":$("#idEncashOfferedProducts").val()})}analytics.track("event7",{evar1:"form_load",evar2:level1Detail,evar3:"",evar4:"cross_sell",evar5:$("#encashAnalyticsSessionId").val(),evar8:"Website",evar12:pageName,evar13:"null"==$("#idEncashShortcode").val()?"":$("#idEncashShortcode").val(),evar15:"null"==$("#idEncashAccountNumber").val()?"":$("#idEncashAccountNumber").val(),evar16:"null"==$("#idEncashCardNumber").val()?"":$("#idEncashCardNumber").val(),evar18:"null"==$("#idEncashMobileNumber").val()?"":$("#idEncashMobileNumber").val(),evar22:"null"==$("#idEncashEmailId").val()?"":$("#idEncashEmailId").val(),evar32:"null"==$("#idEncashFirstName").val()?"":$("#idEncashFirstName").val(),evar33:"null"==$("#idEncashLastName").val()?"":$("#idEncashLastName").val(),evar39:"null"==$("#idEncashMiddleName").val()?"":$("#idEncashMiddleName").val(),evar36:"null"==$("#idEncashMaxAmount").val()?"":$("#idEncashMaxAmount").val(),evar30:"null"==$("#idEncashInlineMaxAmount").val()?"":$("#idEncashInlineMaxAmount").val(),evar34:"null"==$("#idEncashROI").val()?"":$("#idEncashROI").val(),evar35:"null"==$("#idEncashInlineROI").val()?"":$("#idEncashInlineROI").val(),evar38:dateFormatChangeForFCU($("#idEncashExpDate").val()),evar43:dateFormatChangeForFCU($("#idEncashInlineExpDate").val()),evar14:$("#isInline").val()&&"null"!=$("#idEncashOfferedProducts").val()?"true"==$("#isInline").val()||1==$("#isInline").val()?"encash_inline":"encash":"",evar21:$("#amount-input").val()?$("#amount-input").val().replace(/,/g,""):"",evar17:0!=$("#tenure-input").val()&&""!=$("#tenure-input").val()&&"0"!=$("#tenure-input").val()?$("#tenure-input").val():"",evar37:$("#intRate").val(),evar42:$("#processingFee").val(),evar9:"null"==$("#idEncashOfferedProducts").val()?"":$("#idEncashOfferedProducts").val()})}}function dncOTPSubmitEventEncash(level1Detail,level2Detail,pageName,highRiskFlag,status,errorCode,errorDescription){if(window.analytics){{({evar1:"login_2f_auth",evar2:level1Detail,evar3:level2Detail,evar4:"cross_sell",evar5:$("#encashAnalyticsSessionId").val()?$("#encashAnalyticsSessionId").val():$("#campaign-form #analyticsSessionId").val(),evar8:"Website",evar12:pageName,evar13:"null"==$("#idEncashShortcode").val()?"":$("#idEncashShortcode").val(),evar15:"null"==$("#idEncashAccountNumber").val()?"":$("#idEncashAccountNumber").val(),evar16:"null"==$("#idEncashCardNumber").val()?"":$("#idEncashCardNumber").val(),evar18:"null"==$("#idEncashMobileNumber").val()?"":$("#idEncashMobileNumber").val(),evar22:"null"==$("#idEncashEmailId").val()?"":$("#idEncashEmailId").val(),evar44:!$("#idEncashHighRiskFlag").val()||"Y"!=$("#idEncashHighRiskFlag").val()&&"y"!=$("#idEncashHighRiskFlag").val()?"":"Y",evar25:status,evar26:errorCode,evar27:errorDescription,evar32:"null"==$("#idEncashFirstName").val()?"":$("#idEncashFirstName").val(),evar33:"null"==$("#idEncashLastName").val()?"":$("#idEncashLastName").val(),evar39:"null"==$("#idEncashMiddleName").val()?"":$("#idEncashMiddleName").val(),evar36:"null"==$("#idEncashMaxAmount").val()?"":$("#idEncashMaxAmount").val(),evar30:"null"==$("#idEncashInlineMaxAmount").val()?"":$("#idEncashInlineMaxAmount").val(),evar34:"null"==$("#idEncashROI").val()?"":$("#idEncashROI").val(),evar35:"null"==$("#idEncashInlineROI").val()?"":$("#idEncashInlineROI").val(),evar38:dateFormatChangeForFCU($("#idEncashExpDate").val()),evar43:dateFormatChangeForFCU($("#idEncashInlineExpDate").val()),evar14:$("#isInline").val()&&"null"!=$("#idEncashOfferedProducts").val()?"true"==$("#isInline").val()||1==$("#isInline").val()?"encash_inline":"encash":"",evar21:$("#amount-input").val()?$("#amount-input").val().replace(/,/g,""):"",evar17:0!=$("#tenure-input").val()&&""!=$("#tenure-input").val()&&"0"!=$("#tenure-input").val()?$("#tenure-input").val():"",evar37:$("#intRate").val(),evar42:$("#processingFee").val(),evar6:$("#beneficiaryBankName").val(),evar45:$("#beneficiaryBranchName").val(),evar9:"null"==$("#idEncashOfferedProducts").val()?"":$("#idEncashOfferedProducts").val()})}analytics.track("event5",{evar1:"login_2f_auth",evar2:level1Detail,evar3:level2Detail,evar4:"cross_sell",evar5:$("#encashAnalyticsSessionId").val()?$("#encashAnalyticsSessionId").val():$("#campaign-form #analyticsSessionId").val(),evar8:"Website",evar12:pageName,evar13:"null"==$("#idEncashShortcode").val()?"":$("#idEncashShortcode").val(),evar15:"null"==$("#idEncashAccountNumber").val()?"":$("#idEncashAccountNumber").val(),evar16:"null"==$("#idEncashCardNumber").val()?"":$("#idEncashCardNumber").val(),evar18:"null"==$("#idEncashMobileNumber").val()?"":$("#idEncashMobileNumber").val(),evar22:"null"==$("#idEncashEmailId").val()?"":$("#idEncashEmailId").val(),evar44:!$("#idEncashHighRiskFlag").val()||"Y"!=$("#idEncashHighRiskFlag").val()&&"y"!=$("#idEncashHighRiskFlag").val()?"":"Y",evar25:status,evar26:errorCode,evar27:errorDescription,evar32:"null"==$("#idEncashFirstName").val()?"":$("#idEncashFirstName").val(),evar33:"null"==$("#idEncashLastName").val()?"":$("#idEncashLastName").val(),evar39:"null"==$("#idEncashMiddleName").val()?"":$("#idEncashMiddleName").val(),evar36:"null"==$("#idEncashMaxAmount").val()?"":$("#idEncashMaxAmount").val(),evar30:"null"==$("#idEncashInlineMaxAmount").val()?"":$("#idEncashInlineMaxAmount").val(),evar34:"null"==$("#idEncashROI").val()?"":$("#idEncashROI").val(),evar35:"null"==$("#idEncashInlineROI").val()?"":$("#idEncashInlineROI").val(),evar38:dateFormatChangeForFCU($("#idEncashExpDate").val()),evar43:dateFormatChangeForFCU($("#idEncashInlineExpDate").val()),evar14:$("#isInline").val()&&"null"!=$("#idEncashOfferedProducts").val()?"true"==$("#isInline").val()||1==$("#isInline").val()?"encash_inline":"encash":"",evar21:$("#amount-input").val()?$("#amount-input").val().replace(/,/g,""):"",evar17:0!=$("#tenure-input").val()&&""!=$("#tenure-input").val()&&"0"!=$("#tenure-input").val()?$("#tenure-input").val():"",evar37:$("#intRate").val(),evar42:$("#processingFee").val(),evar6:$("#beneficiaryBankName").val(),evar45:$("#beneficiaryBranchName").val(),evar9:"null"==$("#idEncashOfferedProducts").val()?"":$("#idEncashOfferedProducts").val()})}}function dncOTPGenEventEncash(level1Detail,pageName,highRiskFlag,otpResend){if(window.analytics){{({evar1:"login_2f_intent",evar2:level1Detail,evar3:"otp",evar4:"cross_sell",evar5:$("#encashAnalyticsSessionId").val()?$("#encashAnalyticsSessionId").val():$("#campaign-form #analyticsSessionId").val(),evar8:"Website",evar12:pageName,evar13:"null"==$("#idEncashShortcode").val()?"":$("#idEncashShortcode").val(),evar15:"null"==$("#idEncashAccountNumber").val()?"":$("#idEncashAccountNumber").val(),evar16:"null"==$("#idEncashCardNumber").val()?"":$("#idEncashCardNumber").val(),evar18:"null"==$("#idEncashMobileNumber").val()?"":$("#idEncashMobileNumber").val(),evar22:"null"==$("#idEncashEmailId").val()?"":$("#idEncashEmailId").val(),evar44:!$("#idEncashHighRiskFlag").val()||"Y"!=$("#idEncashHighRiskFlag").val()&&"y"!=$("#idEncashHighRiskFlag").val()?"":"Y",evar31:otpResend,evar32:"null"==$("#idEncashFirstName").val()?"":$("#idEncashFirstName").val(),evar33:"null"==$("#idEncashLastName").val()?"":$("#idEncashLastName").val(),evar39:"null"==$("#idEncashMiddleName").val()?"":$("#idEncashMiddleName").val(),evar36:"null"==$("#idEncashMaxAmount").val()?"":$("#idEncashMaxAmount").val(),evar30:"null"==$("#idEncashInlineMaxAmount").val()?"":$("#idEncashInlineMaxAmount").val(),evar34:"null"==$("#idEncashROI").val()?"":$("#idEncashROI").val(),evar35:"null"==$("#idEncashInlineROI").val()?"":$("#idEncashInlineROI").val(),evar38:dateFormatChangeForFCU($("#idEncashExpDate").val()),evar43:dateFormatChangeForFCU($("#idEncashInlineExpDate").val()),evar14:$("#isInline").val()&&"null"!=$("#idEncashOfferedProducts").val()?"true"==$("#isInline").val()||1==$("#isInline").val()?"encash_inline":"encash":"",evar21:$("#amount-input").val()?$("#amount-input").val().replace(/,/g,""):"",evar17:0!=$("#tenure-input").val()&&""!=$("#tenure-input").val()&&"0"!=$("#tenure-input").val()?$("#tenure-input").val():"",evar37:$("#intRate").val(),evar42:$("#processingFee").val(),evar6:$("#beneficiaryBankName").val(),evar45:$("#beneficiaryBranchName").val(),evar9:"null"==$("#idEncashOfferedProducts").val()?"":$("#idEncashOfferedProducts").val()})}analytics.track("event4",{evar1:"login_2f_intent",evar2:level1Detail,evar3:"otp",evar4:"cross_sell",evar5:$("#encashAnalyticsSessionId").val()?$("#encashAnalyticsSessionId").val():$("#campaign-form #analyticsSessionId").val(),evar8:"Website",evar12:pageName,evar13:"null"==$("#idEncashShortcode").val()?"":$("#idEncashShortcode").val(),evar15:"null"==$("#idEncashAccountNumber").val()?"":$("#idEncashAccountNumber").val(),evar16:"null"==$("#idEncashCardNumber").val()?"":$("#idEncashCardNumber").val(),evar18:"null"==$("#idEncashMobileNumber").val()?"":$("#idEncashMobileNumber").val(),evar22:"null"==$("#idEncashEmailId").val()?"":$("#idEncashEmailId").val(),evar44:!$("#idEncashHighRiskFlag").val()||"Y"!=$("#idEncashHighRiskFlag").val()&&"y"!=$("#idEncashHighRiskFlag").val()?"":"Y",evar31:otpResend,evar32:"null"==$("#idEncashFirstName").val()?"":$("#idEncashFirstName").val(),evar33:"null"==$("#idEncashLastName").val()?"":$("#idEncashLastName").val(),evar39:"null"==$("#idEncashMiddleName").val()?"":$("#idEncashMiddleName").val(),evar36:"null"==$("#idEncashMaxAmount").val()?"":$("#idEncashMaxAmount").val(),evar30:"null"==$("#idEncashInlineMaxAmount").val()?"":$("#idEncashInlineMaxAmount").val(),evar34:"null"==$("#idEncashROI").val()?"":$("#idEncashROI").val(),evar35:"null"==$("#idEncashInlineROI").val()?"":$("#idEncashInlineROI").val(),evar38:dateFormatChangeForFCU($("#idEncashExpDate").val()),evar43:dateFormatChangeForFCU($("#idEncashInlineExpDate").val()),evar14:$("#isInline").val()&&"null"!=$("#idEncashOfferedProducts").val()?"true"==$("#isInline").val()||1==$("#isInline").val()?"encash_inline":"encash":"",evar21:$("#amount-input").val()?$("#amount-input").val().replace(/,/g,""):"",evar17:0!=$("#tenure-input").val()&&""!=$("#tenure-input").val()&&"0"!=$("#tenure-input").val()?$("#tenure-input").val():"",evar37:$("#intRate").val(),evar42:$("#processingFee").val(),evar6:$("#beneficiaryBankName").val(),evar45:$("#beneficiaryBranchName").val(),evar9:"null"==$("#idEncashOfferedProducts").val()?"":$("#idEncashOfferedProducts").val()})}}function dncJourneyAbandonEncash(pageName){if(window.analytics){{({evar1:"journey_abandon",evar2:"cross_sell",evar3:"",evar4:"cross_sell",evar5:$("#encashAnalyticsSessionId").val(),evar8:"Website",evar12:pageName,evar13:"null"==$("#idEncashShortcode").val()?"":$("#idEncashShortcode").val(),evar15:"null"==$("#idEncashAccountNumber").val()?"":$("#idEncashAccountNumber").val(),evar16:"null"==$("#idEncashCardNumber").val()?"":$("#idEncashCardNumber").val(),evar18:"null"==$("#idEncashMobileNumber").val()?"":$("#idEncashMobileNumber").val(),evar22:"null"==$("#idEncashEmailId").val()?"":$("#idEncashEmailId").val(),evar44:!$("#idEncashHighRiskFlag").val()||"Y"!=$("#idEncashHighRiskFlag").val()&&"y"!=$("#idEncashHighRiskFlag").val()?"":"Y",evar32:"null"==$("#idEncashFirstName").val()?"":$("#idEncashFirstName").val(),evar33:"null"==$("#idEncashLastName").val()?"":$("#idEncashLastName").val(),evar39:"null"==$("#idEncashMiddleName").val()?"":$("#idEncashMiddleName").val(),evar36:"null"==$("#idEncashMaxAmount").val()?"":$("#idEncashMaxAmount").val(),evar30:"null"==$("#idEncashInlineMaxAmount").val()?"":$("#idEncashInlineMaxAmount").val(),evar34:"null"==$("#idEncashROI").val()?"":$("#idEncashROI").val(),evar35:"null"==$("#idEncashInlineROI").val()?"":$("#idEncashInlineROI").val(),evar38:dateFormatChangeForFCU($("#idEncashExpDate").val()),evar43:dateFormatChangeForFCU($("#idEncashInlineExpDate").val()),evar14:$("#isInline").val()&&"null"!=$("#idEncashOfferedProducts").val()?"true"==$("#isInline").val()||1==$("#isInline").val()?"encash_inline":"encash":"",evar21:$("#amount-input").val()?$("#amount-input").val().replace(/,/g,""):"",evar17:0!=$("#tenure-input").val()&&""!=$("#tenure-input").val()&&"0"!=$("#tenure-input").val()?$("#tenure-input").val():"",evar37:$("#intRate").val(),evar42:$("#processingFee").val(),evar6:$("#beneficiaryBankName").val(),evar45:$("#beneficiaryBranchName").val(),evar9:"null"==$("#idEncashOfferedProducts").val()?"":$("#idEncashOfferedProducts").val()})}analytics.track("event35",{evar1:"journey_abandon",evar2:"cross_sell",evar3:"",evar4:"cross_sell",evar5:$("#encashAnalyticsSessionId").val(),evar8:"Website",evar12:pageName,evar13:"null"==$("#idEncashShortcode").val()?"":$("#idEncashShortcode").val(),evar15:"null"==$("#idEncashAccountNumber").val()?"":$("#idEncashAccountNumber").val(),evar16:"null"==$("#idEncashCardNumber").val()?"":$("#idEncashCardNumber").val(),evar18:"null"==$("#idEncashMobileNumber").val()?"":$("#idEncashMobileNumber").val(),evar22:"null"==$("#idEncashEmailId").val()?"":$("#idEncashEmailId").val(),evar44:!$("#idEncashHighRiskFlag").val()||"Y"!=$("#idEncashHighRiskFlag").val()&&"y"!=$("#idEncashHighRiskFlag").val()?"":"Y",evar32:"null"==$("#idEncashFirstName").val()?"":$("#idEncashFirstName").val(),evar33:"null"==$("#idEncashLastName").val()?"":$("#idEncashLastName").val(),evar39:"null"==$("#idEncashMiddleName").val()?"":$("#idEncashMiddleName").val(),evar36:"null"==$("#idEncashMaxAmount").val()?"":$("#idEncashMaxAmount").val(),evar30:"null"==$("#idEncashInlineMaxAmount").val()?"":$("#idEncashInlineMaxAmount").val(),evar34:"null"==$("#idEncashROI").val()?"":$("#idEncashROI").val(),evar35:"null"==$("#idEncashInlineROI").val()?"":$("#idEncashInlineROI").val(),evar38:dateFormatChangeForFCU($("#idEncashExpDate").val()),evar43:dateFormatChangeForFCU($("#idEncashInlineExpDate").val()),evar14:$("#isInline").val()&&"null"!=$("#idEncashOfferedProducts").val()?"true"==$("#isInline").val()||1==$("#isInline").val()?"encash_inline":"encash":"",evar21:$("#amount-input").val()?$("#amount-input").val().replace(/,/g,""):"",evar17:0!=$("#tenure-input").val()&&""!=$("#tenure-input").val()&&"0"!=$("#tenure-input").val()?$("#tenure-input").val():"",evar37:$("#intRate").val(),evar42:$("#processingFee").val(),evar6:$("#beneficiaryBankName").val(),evar45:$("#beneficiaryBranchName").val(),evar9:"null"==$("#idEncashOfferedProducts").val()?"":$("#idEncashOfferedProducts").val()})}}function dncJourneyMilestoneEncash(level2Detail,pageName){if(window.analytics){{({evar1:"journey_milestone",evar2:"cross_sell",evar3:level2Detail,evar4:"cross_sell",evar5:$("#encashAnalyticsSessionId").val(),evar8:"Website",evar12:pageName,evar13:"null"==$("#idEncashShortcode").val()?"":$("#idEncashShortcode").val(),evar15:"null"==$("#idEncashAccountNumber").val()?"":$("#idEncashAccountNumber").val(),evar16:"null"==$("#idEncashCardNumber").val()?"":$("#idEncashCardNumber").val(),evar18:"null"==$("#idEncashMobileNumber").val()?"":$("#idEncashMobileNumber").val(),evar22:"null"==$("#idEncashEmailId").val()?"":$("#idEncashEmailId").val(),evar44:!$("#idEncashHighRiskFlag").val()||"Y"!=$("#idEncashHighRiskFlag").val()&&"y"!=$("#idEncashHighRiskFlag").val()?"":"Y",evar32:"null"==$("#idEncashFirstName").val()?"":$("#idEncashFirstName").val(),evar33:"null"==$("#idEncashLastName").val()?"":$("#idEncashLastName").val(),evar39:"null"==$("#idEncashMiddleName").val()?"":$("#idEncashMiddleName").val(),evar36:"null"==$("#idEncashMaxAmount").val()?"":$("#idEncashMaxAmount").val(),evar30:"null"==$("#idEncashInlineMaxAmount").val()?"":$("#idEncashInlineMaxAmount").val(),evar34:"null"==$("#idEncashROI").val()?"":$("#idEncashROI").val(),evar35:"null"==$("#idEncashInlineROI").val()?"":$("#idEncashInlineROI").val(),evar38:dateFormatChangeForFCU($("#idEncashExpDate").val()),evar43:dateFormatChangeForFCU($("#idEncashInlineExpDate").val()),evar14:$("#isInline").val()&&"null"!=$("#idEncashOfferedProducts").val()?"true"==$("#isInline").val()||1==$("#isInline").val()?"encash_inline":"encash":"",evar21:$("#amount-input").val()?$("#amount-input").val().replace(/,/g,""):"",evar17:0!=$("#tenure-input").val()&&""!=$("#tenure-input").val()&&"0"!=$("#tenure-input").val()?$("#tenure-input").val():"",evar37:$("#intRate").val(),evar42:$("#processingFee").val(),evar6:$("#idEncashBankName").val(),evar45:$("#idEncashBranchName").val(),evar9:"null"==$("#idEncashOfferedProducts").val()?"":$("#idEncashOfferedProducts").val()})}analytics.track("event34",{evar1:"journey_milestone",evar2:"cross_sell",evar3:level2Detail,evar4:"cross_sell",evar5:$("#encashAnalyticsSessionId").val(),evar8:"Website",evar12:pageName,evar13:"null"==$("#idEncashShortcode").val()?"":$("#idEncashShortcode").val(),evar15:"null"==$("#idEncashAccountNumber").val()?"":$("#idEncashAccountNumber").val(),evar16:"null"==$("#idEncashCardNumber").val()?"":$("#idEncashCardNumber").val(),evar18:"null"==$("#idEncashMobileNumber").val()?"":$("#idEncashMobileNumber").val(),evar22:"null"==$("#idEncashEmailId").val()?"":$("#idEncashEmailId").val(),evar44:!$("#idEncashHighRiskFlag").val()||"Y"!=$("#idEncashHighRiskFlag").val()&&"y"!=$("#idEncashHighRiskFlag").val()?"":"Y",evar32:"null"==$("#idEncashFirstName").val()?"":$("#idEncashFirstName").val(),evar33:"null"==$("#idEncashLastName").val()?"":$("#idEncashLastName").val(),evar39:"null"==$("#idEncashMiddleName").val()?"":$("#idEncashMiddleName").val(),evar36:"null"==$("#idEncashMaxAmount").val()?"":$("#idEncashMaxAmount").val(),evar30:"null"==$("#idEncashInlineMaxAmount").val()?"":$("#idEncashInlineMaxAmount").val(),evar34:"null"==$("#idEncashROI").val()?"":$("#idEncashROI").val(),evar35:"null"==$("#idEncashInlineROI").val()?"":$("#idEncashInlineROI").val(),evar38:dateFormatChangeForFCU($("#idEncashExpDate").val()),evar43:dateFormatChangeForFCU($("#idEncashInlineExpDate").val()),evar14:$("#isInline").val()&&"null"!=$("#idEncashOfferedProducts").val()?"true"==$("#isInline").val()||1==$("#isInline").val()?"encash_inline":"encash":"",evar21:$("#amount-input").val()?$("#amount-input").val().replace(/,/g,""):"",evar17:0!=$("#tenure-input").val()&&""!=$("#tenure-input").val()&&"0"!=$("#tenure-input").val()?$("#tenure-input").val():"",evar37:$("#intRate").val(),evar42:$("#processingFee").val(),evar6:$("#idEncashBankName").val(),evar45:$("#idEncashBranchName").val(),evar9:"null"==$("#idEncashOfferedProducts").val()?"":$("#idEncashOfferedProducts").val()})
}}function dncCampaignLandingEncash(level1Detail,level2Detail,pageName,status,errorCode,errorDescription){var shortcodeC2B="";if("Encash"==$("#featureNameForEncash").val()||"Encash Inline"==$("#featureNameForEncash").val()){var link=window.location.href.split("/");shortcodeC2B=link[link.length-1]}if(window.analytics){{({evar1:"login_1f_auth",evar2:level1Detail,evar3:level2Detail,evar4:"cross_sell",evar5:$("#campaign-form #analyticsSessionId").val(),evar8:"Website",evar12:pageName,evar13:shortcodeC2B,evar15:"null"==$("#idEncashAccountNumber").val()?"":$("#idEncashAccountNumber").val(),evar16:"null"==$("#idEncashCardNumber").val()?"":$("#idEncashCardNumber").val(),evar25:status,evar26:errorCode,evar27:errorDescription,evar9:"null"==$("#idEncashOfferedProducts").val()?"":$("#idEncashOfferedProducts").val()})}analytics.track("event3",{evar1:"login_1f_auth",evar2:level1Detail,evar3:level2Detail,evar4:"cross_sell",evar5:$("#campaign-form #analyticsSessionId").val(),evar8:"Website",evar12:pageName,evar13:shortcodeC2B,evar15:"null"==$("#idEncashAccountNumber").val()?"":$("#idEncashAccountNumber").val(),evar16:"null"==$("#idEncashCardNumber").val()?"":$("#idEncashCardNumber").val(),evar25:status,evar26:errorCode,evar27:errorDescription,evar9:"null"==$("#idEncashOfferedProducts").val()?"":$("#idEncashOfferedProducts").val()})}}function dncEligibilityCheckEncash(level2Detail,pageName,highRiskFlag,status,errorCode,errorDescription){if(window.analytics){{({evar1:"eligibility_check",evar2:"cross_sell",evar3:level2Detail,evar4:"cross_sell",evar5:$("#encashAnalyticsSessionId").val(),evar8:"Website",evar12:pageName,evar13:"null"==$("#idEncashShortcode").val()?"":$("#idEncashShortcode").val(),evar15:"null"==$("#idEncashAccountNumber").val()?"":$("#idEncashAccountNumber").val(),evar16:"null"==$("#idEncashCardNumber").val()?"":$("#idEncashCardNumber").val(),evar18:"null"==$("#idEncashMobileNumber").val()?"":$("#idEncashMobileNumber").val(),evar22:"null"==$("#idEncashEmailId").val()?"":$("#idEncashEmailId").val(),evar44:!$("#idEncashHighRiskFlag").val()||"Y"!=$("#idEncashHighRiskFlag").val()&&"y"!=$("#idEncashHighRiskFlag").val()?"":"Y",evar25:status,evar26:errorCode,evar27:errorDescription,evar32:"null"==$("#idEncashFirstName").val()?"":$("#idEncashFirstName").val(),evar33:"null"==$("#idEncashLastName").val()?"":$("#idEncashLastName").val(),evar39:"null"==$("#idEncashMiddleName").val()?"":$("#idEncashMiddleName").val(),evar36:"null"==$("#idEncashMaxAmount").val()?"":$("#idEncashMaxAmount").val(),evar30:"null"==$("#idEncashInlineMaxAmount").val()?"":$("#idEncashInlineMaxAmount").val(),evar34:"null"==$("#idEncashROI").val()?"":$("#idEncashROI").val(),evar35:"null"==$("#idEncashInlineROI").val()?"":$("#idEncashInlineROI").val(),evar38:dateFormatChangeForFCU($("#idEncashExpDate").val()),evar43:dateFormatChangeForFCU($("#idEncashInlineExpDate").val()),evar9:"null"==$("#idEncashOfferedProducts").val()?"":$("#idEncashOfferedProducts").val()})}analytics.track("event29",{evar1:"eligibility_check",evar2:"cross_sell",evar3:level2Detail,evar4:"cross_sell",evar5:$("#encashAnalyticsSessionId").val(),evar8:"Website",evar12:pageName,evar13:"null"==$("#idEncashShortcode").val()?"":$("#idEncashShortcode").val(),evar15:"null"==$("#idEncashAccountNumber").val()?"":$("#idEncashAccountNumber").val(),evar16:"null"==$("#idEncashCardNumber").val()?"":$("#idEncashCardNumber").val(),evar18:"null"==$("#idEncashMobileNumber").val()?"":$("#idEncashMobileNumber").val(),evar22:"null"==$("#idEncashEmailId").val()?"":$("#idEncashEmailId").val(),evar44:!$("#idEncashHighRiskFlag").val()||"Y"!=$("#idEncashHighRiskFlag").val()&&"y"!=$("#idEncashHighRiskFlag").val()?"":"Y",evar25:status,evar26:errorCode,evar27:errorDescription,evar32:"null"==$("#idEncashFirstName").val()?"":$("#idEncashFirstName").val(),evar33:"null"==$("#idEncashLastName").val()?"":$("#idEncashLastName").val(),evar39:"null"==$("#idEncashMiddleName").val()?"":$("#idEncashMiddleName").val(),evar36:"null"==$("#idEncashMaxAmount").val()?"":$("#idEncashMaxAmount").val(),evar30:"null"==$("#idEncashInlineMaxAmount").val()?"":$("#idEncashInlineMaxAmount").val(),evar34:"null"==$("#idEncashROI").val()?"":$("#idEncashROI").val(),evar35:"null"==$("#idEncashInlineROI").val()?"":$("#idEncashInlineROI").val(),evar38:dateFormatChangeForFCU($("#idEncashExpDate").val()),evar43:dateFormatChangeForFCU($("#idEncashInlineExpDate").val()),evar9:"null"==$("#idEncashOfferedProducts").val()?"":$("#idEncashOfferedProducts").val()})}}function dncCommonPageEncash(pageName){if(window.analytics){{({evar1:"page_load",evar2:"cross_sell_landing",evar3:"",evar4:"cross_sell",evar5:$("#encashAnalyticsSessionId").val(),evar8:"Website",evar12:pageName,evar13:"null"==$("#idEncashShortcode").val()?"":$("#idEncashShortcode").val(),evar15:"null"==$("#idEncashAccountNumber").val()?"":$("#idEncashAccountNumber").val(),evar16:"null"==$("#idEncashCardNumber").val()?"":$("#idEncashCardNumber").val(),evar18:"null"==$("#idEncashMobileNumber").val()?"":$("#idEncashMobileNumber").val(),evar22:"null"==$("#idEncashEmailId").val()?"":$("#idEncashEmailId").val(),evar32:"null"==$("#idEncashFirstName").val()?"":$("#idEncashFirstName").val(),evar33:"null"==$("#idEncashLastName").val()?"":$("#idEncashLastName").val(),evar39:"null"==$("#idEncashMiddleName").val()?"":$("#idEncashMiddleName").val(),evar36:"null"==$("#idEncashMaxAmount").val()?"":$("#idEncashMaxAmount").val(),evar30:"null"==$("#idEncashInlineMaxAmount").val()?"":$("#idEncashInlineMaxAmount").val(),evar34:"null"==$("#idEncashROI").val()?"":$("#idEncashROI").val(),evar35:"null"==$("#idEncashInlineROI").val()?"":$("#idEncashInlineROI").val(),evar38:dateFormatChangeForFCU($("#idEncashExpDate").val()),evar43:dateFormatChangeForFCU($("#idEncashInlineExpDate").val()),evar9:"null"==$("#idEncashOfferedProducts").val()?"":$("#idEncashOfferedProducts").val()})}analytics.track("event20",{evar1:"page_load",evar2:"cross_sell_landing",evar3:"",evar4:"cross_sell",evar5:$("#encashAnalyticsSessionId").val(),evar8:"Website",evar12:pageName,evar13:"null"==$("#idEncashShortcode").val()?"":$("#idEncashShortcode").val(),evar15:"null"==$("#idEncashAccountNumber").val()?"":$("#idEncashAccountNumber").val(),evar16:"null"==$("#idEncashCardNumber").val()?"":$("#idEncashCardNumber").val(),evar18:"null"==$("#idEncashMobileNumber").val()?"":$("#idEncashMobileNumber").val(),evar22:"null"==$("#idEncashEmailId").val()?"":$("#idEncashEmailId").val(),evar32:"null"==$("#idEncashFirstName").val()?"":$("#idEncashFirstName").val(),evar33:"null"==$("#idEncashLastName").val()?"":$("#idEncashLastName").val(),evar39:"null"==$("#idEncashMiddleName").val()?"":$("#idEncashMiddleName").val(),evar36:"null"==$("#idEncashMaxAmount").val()?"":$("#idEncashMaxAmount").val(),evar30:"null"==$("#idEncashInlineMaxAmount").val()?"":$("#idEncashInlineMaxAmount").val(),evar34:"null"==$("#idEncashROI").val()?"":$("#idEncashROI").val(),evar35:"null"==$("#idEncashInlineROI").val()?"":$("#idEncashInlineROI").val(),evar38:dateFormatChangeForFCU($("#idEncashExpDate").val()),evar43:dateFormatChangeForFCU($("#idEncashInlineExpDate").val()),evar9:"null"==$("#idEncashOfferedProducts").val()?"":$("#idEncashOfferedProducts").val()})}}function dncCampaignLoginEncash(level1Detail,level2Detail,pageName){if(window.analytics){{({evar1:"login_1f_intent",evar2:level1Detail,evar3:level2Detail,evar4:"cross_sell",evar5:$("#campaign-form #analyticsSessionId").val(),evar8:"Website",evar12:pageName,evar13:"null"==$("#idEncashShortcode").val()?"":$("#idEncashShortcode").val(),evar9:"null"==$("#idEncashOfferedProducts").val()?"":$("#idEncashOfferedProducts").val()})}analytics.track("event2",{evar1:"login_1f_intent",evar2:level1Detail,evar3:level2Detail,evar4:"cross_sell",evar5:$("#campaign-form #analyticsSessionId").val(),evar8:"Website",evar12:pageName,evar13:"null"==$("#idEncashShortcode").val()?"":$("#idEncashShortcode").val(),evar9:"null"==$("#idEncashOfferedProducts").val()?"":$("#idEncashOfferedProducts").val()})}}function dncFormConfirmationEncash(level1Detail,pageName,highRiskFlag,SRnumber,status,errorCode,errorDescription){var bankName="",branchName="";if($(".encash-prelogin-lower").is(":visible")?(bankName=$("#beneficiaryBankName").val(),branchName=$("#beneficiaryBranchName").val()):$(".suc-booking-wrap").is(":visible")&&(bankName=$("#idEncashBankName").val(),branchName=$("#idEncashBranchName").val()),window.analytics){{({evar1:"form_confirmation",evar2:level1Detail,evar3:"",evar4:"cross_sell",evar5:$("#encashAnalyticsSessionId").val(),evar8:"Website",evar12:pageName,evar13:"null"==$("#idEncashShortcode").val()?"":$("#idEncashShortcode").val(),evar15:"null"==$("#idEncashAccountNumber").val()?"":$("#idEncashAccountNumber").val(),evar16:"null"==$("#idEncashCardNumber").val()?"":$("#idEncashCardNumber").val(),evar18:"null"==$("#idEncashMobileNumber").val()?"":$("#idEncashMobileNumber").val(),evar22:"null"==$("#idEncashEmailId").val()?"":$("#idEncashEmailId").val(),evar44:!$("#idEncashHighRiskFlag").val()||"Y"!=$("#idEncashHighRiskFlag").val()&&"y"!=$("#idEncashHighRiskFlag").val()?"":"Y",evar23:SRnumber,evar25:status,evar26:""==errorCode?$("#idEncashErrorCode").val():errorCode,evar27:""==errorDescription?$("#idEncashErrorDescription").val():errorDescription,evar32:"null"==$("#idEncashFirstName").val()?"":$("#idEncashFirstName").val(),evar33:"null"==$("#idEncashLastName").val()?"":$("#idEncashLastName").val(),evar39:"null"==$("#idEncashMiddleName").val()?"":$("#idEncashMiddleName").val(),evar36:"null"==$("#idEncashMaxAmount").val()?"":$("#idEncashMaxAmount").val(),evar30:"null"==$("#idEncashInlineMaxAmount").val()?"":$("#idEncashInlineMaxAmount").val(),evar34:"null"==$("#idEncashROI").val()?"":$("#idEncashROI").val(),evar35:"null"==$("#idEncashInlineROI").val()?"":$("#idEncashInlineROI").val(),evar38:dateFormatChangeForFCU($("#idEncashExpDate").val()),evar43:dateFormatChangeForFCU($("#idEncashInlineExpDate").val()),evar14:$("#isInline").val()&&"null"!=$("#idEncashOfferedProducts").val()?"true"==$("#isInline").val()||1==$("#isInline").val()?"encash_inline":"encash":"",evar21:$("#amount-input").val()?$("#amount-input").val().replace(/,/g,""):"",evar17:0!=$("#tenure-input").val()&&""!=$("#tenure-input").val()&&"0"!=$("#tenure-input").val()?$("#tenure-input").val():"",evar37:$("#intRate").val(),evar42:$("#processingFee").val(),evar6:bankName,evar45:branchName,evar9:"null"==$("#idEncashOfferedProducts").val()?"":$("#idEncashOfferedProducts").val()})}analytics.track("event19",{evar1:"form_confirmation",evar2:level1Detail,evar3:"",evar4:"cross_sell",evar5:$("#encashAnalyticsSessionId").val(),evar8:"Website",evar12:pageName,evar13:"null"==$("#idEncashShortcode").val()?"":$("#idEncashShortcode").val(),evar15:"null"==$("#idEncashAccountNumber").val()?"":$("#idEncashAccountNumber").val(),evar16:"null"==$("#idEncashCardNumber").val()?"":$("#idEncashCardNumber").val(),evar18:"null"==$("#idEncashMobileNumber").val()?"":$("#idEncashMobileNumber").val(),evar22:"null"==$("#idEncashEmailId").val()?"":$("#idEncashEmailId").val(),evar44:!$("#idEncashHighRiskFlag").val()||"Y"!=$("#idEncashHighRiskFlag").val()&&"y"!=$("#idEncashHighRiskFlag").val()?"":"Y",evar23:SRnumber,evar25:status,evar26:errorCode,evar27:errorDescription,evar32:"null"==$("#idEncashFirstName").val()?"":$("#idEncashFirstName").val(),evar33:"null"==$("#idEncashLastName").val()?"":$("#idEncashLastName").val(),evar39:"null"==$("#idEncashMiddleName").val()?"":$("#idEncashMiddleName").val(),evar36:"null"==$("#idEncashMaxAmount").val()?"":$("#idEncashMaxAmount").val(),evar30:"null"==$("#idEncashInlineMaxAmount").val()?"":$("#idEncashInlineMaxAmount").val(),evar34:"null"==$("#idEncashROI").val()?"":$("#idEncashROI").val(),evar35:"null"==$("#idEncashInlineROI").val()?"":$("#idEncashInlineROI").val(),evar38:dateFormatChangeForFCU($("#idEncashExpDate").val()),evar43:dateFormatChangeForFCU($("#idEncashInlineExpDate").val()),evar14:$("#isInline").val()&&"null"!=$("#idEncashOfferedProducts").val()?"true"==$("#isInline").val()||1==$("#isInline").val()?"encash_inline":"encash":"",evar21:$("#amount-input").val()?$("#amount-input").val().replace(/,/g,""):"",evar17:0!=$("#tenure-input").val()&&""!=$("#tenure-input").val()&&"0"!=$("#tenure-input").val()?$("#tenure-input").val():"",evar37:$("#intRate").val(),evar42:$("#processingFee").val(),evar6:bankName,evar45:branchName,evar9:"null"==$("#idEncashOfferedProducts").val()?"":$("#idEncashOfferedProducts").val()})}}function dncFormSubmitEncash(level1Detail,pageName,highRiskFlag,SRnumber,status,errorCode,errorDescription){if(window.analytics){{({evar1:"form_submit",evar2:level1Detail,evar3:"",evar4:"cross_sell",evar5:$("#encashAnalyticsSessionId").val(),evar8:"Website",evar12:pageName,evar13:"null"==$("#idEncashShortcode").val()?"":$("#idEncashShortcode").val(),evar15:"null"==$("#idEncashAccountNumber").val()?"":$("#idEncashAccountNumber").val(),evar16:"null"==$("#idEncashCardNumber").val()?"":$("#idEncashCardNumber").val(),evar18:"null"==$("#idEncashMobileNumber").val()?"":$("#idEncashMobileNumber").val(),evar22:"null"==$("#idEncashEmailId").val()?"":$("#idEncashEmailId").val(),evar44:!$("#idEncashHighRiskFlag").val()||"Y"!=$("#idEncashHighRiskFlag").val()&&"y"!=$("#idEncashHighRiskFlag").val()?"":"Y",evar23:SRnumber,evar25:status,evar26:errorCode,evar27:errorDescription,evar32:"null"==$("#idEncashFirstName").val()?"":$("#idEncashFirstName").val(),evar33:"null"==$("#idEncashLastName").val()?"":$("#idEncashLastName").val(),evar39:"null"==$("#idEncashMiddleName").val()?"":$("#idEncashMiddleName").val(),evar36:"null"==$("#idEncashMaxAmount").val()?"":$("#idEncashMaxAmount").val(),evar30:"null"==$("#idEncashInlineMaxAmount").val()?"":$("#idEncashInlineMaxAmount").val(),evar34:"null"==$("#idEncashROI").val()?"":$("#idEncashROI").val(),evar35:"null"==$("#idEncashInlineROI").val()?"":$("#idEncashInlineROI").val(),evar38:dateFormatChangeForFCU($("#idEncashExpDate").val()),evar43:dateFormatChangeForFCU($("#idEncashInlineExpDate").val()),evar14:$("#isInline").val()&&"null"!=$("#idEncashOfferedProducts").val()?"true"==$("#isInline").val()||1==$("#isInline").val()?"encash_inline":"encash":"",evar21:$("#amount-input").val()?$("#amount-input").val().replace(/,/g,""):"",evar17:0!=$("#tenure-input").val()&&""!=$("#tenure-input").val()&&"0"!=$("#tenure-input").val()?$("#tenure-input").val():"",evar37:$("#intRate").val(),evar42:$("#processingFee").val(),evar6:$("#beneficiaryBankName").val(),evar45:$("#beneficiaryBranchName").val(),evar9:"null"==$("#idEncashOfferedProducts").val()?"":$("#idEncashOfferedProducts").val()})}analytics.track("event18",{evar1:"form_submit",evar2:level1Detail,evar3:"",evar4:"cross_sell",evar5:$("#encashAnalyticsSessionId").val(),evar8:"Website",evar12:pageName,evar13:"null"==$("#idEncashShortcode").val()?"":$("#idEncashShortcode").val(),evar15:"null"==$("#idEncashAccountNumber").val()?"":$("#idEncashAccountNumber").val(),evar16:"null"==$("#idEncashCardNumber").val()?"":$("#idEncashCardNumber").val(),evar18:"null"==$("#idEncashMobileNumber").val()?"":$("#idEncashMobileNumber").val(),evar22:"null"==$("#idEncashEmailId").val()?"":$("#idEncashEmailId").val(),evar44:!$("#idEncashHighRiskFlag").val()||"Y"!=$("#idEncashHighRiskFlag").val()&&"y"!=$("#idEncashHighRiskFlag").val()?"":"Y",evar23:SRnumber,evar25:status,evar26:errorCode,evar27:errorDescription,evar32:"null"==$("#idEncashFirstName").val()?"":$("#idEncashFirstName").val(),evar33:"null"==$("#idEncashLastName").val()?"":$("#idEncashLastName").val(),evar39:"null"==$("#idEncashMiddleName").val()?"":$("#idEncashMiddleName").val(),evar36:"null"==$("#idEncashMaxAmount").val()?"":$("#idEncashMaxAmount").val(),evar30:"null"==$("#idEncashInlineMaxAmount").val()?"":$("#idEncashInlineMaxAmount").val(),evar34:"null"==$("#idEncashROI").val()?"":$("#idEncashROI").val(),evar35:"null"==$("#idEncashInlineROI").val()?"":$("#idEncashInlineROI").val(),evar38:dateFormatChangeForFCU($("#idEncashExpDate").val()),evar43:dateFormatChangeForFCU($("#idEncashInlineExpDate").val()),evar14:$("#isInline").val()&&"null"!=$("#idEncashOfferedProducts").val()?"true"==$("#isInline").val()||1==$("#isInline").val()?"encash_inline":"encash":"",evar21:$("#amount-input").val()?$("#amount-input").val().replace(/,/g,""):"",evar17:0!=$("#tenure-input").val()&&""!=$("#tenure-input").val()&&"0"!=$("#tenure-input").val()?$("#tenure-input").val():"",evar37:$("#intRate").val(),evar42:$("#processingFee").val(),evar6:$("#beneficiaryBankName").val(),evar45:$("#beneficiaryBranchName").val(),evar9:"null"==$("#idEncashOfferedProducts").val()?"":$("#idEncashOfferedProducts").val()})}}function sendDNCforMenuItem(main_menu,item){if(console.log("$('#EncashCardNumber').val() =======>",$("#EncashCardNumber").val()),console.log("main menu =====>",main_menu),console.log("item ========>",item),"EMI & More"==main_menu&&"Encash"==item&&(console.log("Inside Encash Method"),window.analytics)){{({evar1:"link_click",evar2:"emi_and_more",evar3:item,evar4:"cross_sell",evar5:$("#encashAnalyticsSessionId").val(),evar8:"Website",evar12:"Dashboard",evar13:"null"==$("#EncashShortcode").val()?"":$("#EncashShortcode").val(),evar15:"null"==$("#EncashAccountNumber").val()?"":$("#EncashAccountNumber").val(),evar16:"null"==$("#EncashCardNumber").val()?"":$("#EncashCardNumber").val().slice($("#EncashCardNumber").val().length-4,$("#EncashCardNumber").val().length),evar18:"null"==$("#EncashMobileNumber").val()?"":$("#EncashMobileNumber").val(),evar22:"null"==$("#EncashEmailId").val()?"":$("#EncashEmailId").val(),evar32:"null"==$("#EncashFirstName").val()?"":$("#EncashFirstName").val(),evar33:"null"==$("#EncashLastName").val()?"":$("#EncashLastName").val(),evar39:"null"==$("#EncashMiddleName").val()?"":$("#EncashMiddleName").val(),evar44:!$("#idEncashHighRiskFlag").val()||"Y"!=$("#idEncashHighRiskFlag").val()&&"y"!=$("#idEncashHighRiskFlag").val()?"":"Y",evar36:"null"==$("#idEncashMaxAmount").val()?"":$("#idEncashMaxAmount").val(),evar30:"null"==$("#idEncashInlineMaxAmount").val()?"":$("#idEncashInlineMaxAmount").val(),evar34:"null"==$("#idEncashROI").val()?"":$("#idEncashROI").val(),evar35:"null"==$("#idEncashInlineROI").val()?"":$("#idEncashInlineROI").val(),evar38:dateFormatChangeForFCU($("#idEncashExpDate").val()),evar43:dateFormatChangeForFCU($("#idEncashInlineExpDate").val()),evar14:$("#isInline").val()&&"null"!=$("#idEncashOfferedProducts").val()?"true"==$("#isInline").val()||1==$("#isInline").val()?"encash_inline":"encash":"",evar21:$("#amount-input").val()?$("#amount-input").val().replace(/,/g,""):"",evar17:0!=$("#tenure-input").val()&&""!=$("#tenure-input").val()&&"0"!=$("#tenure-input").val()?$("#tenure-input").val():"",evar37:$("#intRate").val(),evar42:$("#processingFee").val(),evar6:$("#beneficiaryBankName").val(),evar45:$("#beneficiaryBranchName").val(),evar9:"null"==$("#idEncashOfferedProducts").val()?"":$("#idEncashOfferedProducts").val()})}analytics.track("event23",{evar1:"link_click",evar2:"emi_and_more",evar3:item,evar4:"cross_sell",evar5:$("#encashAnalyticsSessionId").val(),evar8:"Website",evar12:"Dashboard",evar13:"null"==$("#EncashShortcode").val()?"":$("#EncashShortcode").val(),evar15:"null"==$("#EncashAccountNumber").val()?"":$("#EncashAccountNumber").val(),evar16:"null"==$("#EncashCardNumber").val()?"":$("#EncashCardNumber").val().slice($("#EncashCardNumber").val().length-4,$("#EncashCardNumber").val().length),evar18:"null"==$("#EncashMobileNumber").val()?"":$("#EncashMobileNumber").val(),evar22:"null"==$("#EncashEmailId").val()?"":$("#EncashEmailId").val(),evar32:"null"==$("#EncashFirstName").val()?"":$("#EncashFirstName").val(),evar33:"null"==$("#EncashLastName").val()?"":$("#EncashLastName").val(),evar39:"null"==$("#EncashMiddleName").val()?"":$("#EncashMiddleName").val(),evar44:!$("#idEncashHighRiskFlag").val()||"Y"!=$("#idEncashHighRiskFlag").val()&&"y"!=$("#idEncashHighRiskFlag").val()?"":"Y",evar36:"null"==$("#idEncashMaxAmount").val()?"":$("#idEncashMaxAmount").val(),evar30:"null"==$("#idEncashInlineMaxAmount").val()?"":$("#idEncashInlineMaxAmount").val(),evar34:"null"==$("#idEncashROI").val()?"":$("#idEncashROI").val(),evar35:"null"==$("#idEncashInlineROI").val()?"":$("#idEncashInlineROI").val(),evar38:dateFormatChangeForFCU($("#idEncashExpDate").val()),evar43:dateFormatChangeForFCU($("#idEncashInlineExpDate").val()),evar14:$("#isInline").val()&&"null"!=$("#idEncashOfferedProducts").val()?"true"==$("#isInline").val()||1==$("#isInline").val()?"encash_inline":"encash":"",evar21:$("#amount-input").val()?$("#amount-input").val().replace(/,/g,""):"",evar17:0!=$("#tenure-input").val()&&""!=$("#tenure-input").val()&&"0"!=$("#tenure-input").val()?$("#tenure-input").val():"",evar37:$("#intRate").val(),evar42:$("#processingFee").val(),evar6:$("#beneficiaryBankName").val(),evar45:$("#beneficiaryBranchName").val(),evar9:"null"==$("#idEncashOfferedProducts").val()?"":$("#idEncashOfferedProducts").val()})}}function dateFormatChangeForFCU(dateString){if(dateString&&"null"!=dateString){var list=dateString.split("-"),monthList=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],index=Number(list[1])-1,date=list[2]+"-"+monthList[index]+"-"+list[0];return date}return""}function btInputFillUnFill(elementNum){$("#maskNumInputFcu-"+elementNum).val($("#card-number-"+elementNum).val())}function ckycGenOtpBtn(){resendOTPCount=0,$(".ckycblue-submit-btn").css("pointer-events","none"),$(".ckyc-otp-block").css("display","block"),$("#viewCkycNoBtn").css("display","none"),$(".mask-block").css("width","35%");{var _OtpgenUrl="/creditcards/app/myprofile/send-otp-ckyc";document.getElementById("passphrase").value}$.ajax({type:"POST",data:{},url:_OtpgenUrl,beforeSend:function(){$(".error-div").hide();var loaderHtml='<div class="overlay-loader"></div>';$("body").append(loaderHtml)},complete:function(){$("body").find("div.overlay-loader").remove()},success:function(response){console.log("OTP Gen res ",response),("false"==response.success||0==response.success)&&($("#ckycresndMsgAligment").css("display","block"),$("#ckycresndMsgAligment").html(response.message),$("#ckycresenddisbtn").css("pointer-events","none"),$(".ckycblue-cancel-btn").css("pointer-events","none"),$("#ckycresenddisbtn").addClass("ckyc-gray-btn"),$("#ckycresenddisbtn").css("color","#666"))},error:function(){$("body").find("div.overlay-loader").remove()}})}function resendCkycOtp(){var href="/creditcards/app/myprofile/resend-otp-ckyc";$.ajax({url:href,type:"POST",dataType:"json",beforeSend:function(){var loaderHtml='<div class="overlay-loader"></div>';$("body").append(loaderHtml)},complete:function(){$("body").find("div.overlay-loader").remove()},success:function(data){"true"==data.success||1==data.success?(++resendOTPCount,resendOTPCount>5?($("#ckycResendOtpExaustedErrorMsg").css("display","block"),$("#ckycResendOtpExaustedErrorMsg").html(data.message),$("#ckycresenddisbtn").css("pointer-events","none"),$(".ckycblue-cancel-btn").css("pointer-events","none"),$("#ckycresenddisbtn").addClass("ckyc-gray-btn"),$("#ckycresenddisbtn").css("color","#666")):($("#ckycresndMsgAligment").css("display","block"),$("#ckyc-otp-invalid-error-msg").css("display","none"),$(".ckyc-otp-input").val(""),$(".ckycblue-submit-btn").addClass("gray-btn"),$(".ckycblue-submit-btn").css("pointer-events","none"),$(".ckyc-otp-input").css("border","1px solid #ddd"))):"false"==data.success||0==data.success?($("#ckycresndMsgAligment").css("display","block"),$("#ckycresndMsgAligment").html(data.message),$("#ckycresenddisbtn").css("pointer-events","none"),$(".ckycblue-cancel-btn").css("pointer-events","none"),$("#ckycresenddisbtn").addClass("ckyc-gray-btn"),$("#ckycresenddisbtn").css("color","#666")):0==data.resendEnabled||"false"==data.resendEnabled||107==data.errorCode&&($(".otp-error-message").show().text(data.message),$(".otp-msg").hide().text(""))},error:function(){$("body").find("div.overlay-loader").remove()}})}function cancelCkycJourney(){$(".ckyc-otp-block").css("display","none"),$(".ckycblue-btn").css("display","block"),$(".ckyc.mask-block").css("width","50%"),$(".ckycblue-submit-btn").addClass("gray-btn"),$(".ckyc-otp-input").val(""),$("#ckycresndMsgAligment").css("display","none"),$("#ckyc-otp-invalid-error-msg").css("display","none"),$(".ckyc-otp-input").css("border","1px solid #ddd")}function finalCkycOtpSubmission(){var url="/creditcards/app/myprofile/auth-otp-ckyc",passphrase=$("#passphrase").val(),otpNumber=$(".ckyc-otp-input").val(),otpPassed=encryptData(otpNumber);$.ajax({type:"POST",data:{encryptedOtp:otpPassed},url:url,headers:{passphrase:passphrase},beforeSend:function(){var loaderHtml='<div class="overlay-loader"></div>';$("body").append(loaderHtml)},complete:function(){$("body").find("div.overlay-loader").remove()},success:function(response){var decryptedData=dataDecryptionAES(response,passphrase);console.log(decryptedData),response=JSON.parse(decryptedData),console.log("auth-otp response",response),response.success?($(".ckyc-otp-block").css("display","none"),$(".ckyc-mask-value").css("display","none"),$(".ckyc-unmask-value").text(response.kinNumber),$(".ckyc-unmask-value").css("display","block"),$("#ckycresndMsgAligment").css("display","none"),$("#ckycResendOtpExaustedErrorMsg").css("display","none")):4==response.statusCode?($("#viewCkycNoBtn").css("display","none"),$(".mask-block.active").css("width","40%"),$("#ckyc-otp-invalid-error-msg").css("display","block"),$("#ckycresndMsgAligment").css("display","none"),$(".ckyc-otp-input").val(""),$(".ckycblue-submit-btn").addClass("gray-btn"),$(".ckycblue-submit-btn").css("pointer-events","none"),$(".ckyc-otp-input").css("border","1px solid red"),$("#ckycResendOtpExaustedErrorMsg").css("display","none")):2==response.statusCode&&($("#ckycResendOtpExaustedErrorMsg").css("display","none"),$(".ckyc-incorrect-otp-message").css("display","block"),$(".ckyc-otp-input").val(""),$(".ckycblue-submit-btn").css("pointer-events","none"),$(".ckycblue-submit-btn").addClass("gray-btn"),$(".ckycblue-cancel-btn").css("pointer-events","none"),$("#ckycresenddisbtn").addClass("ckyc-gray-btn"),$("#ckycresenddisbtn").css("color","#666"),$("#ckycresenddisbtn").css("pointer-events","none"),$(".ckyc-otp-input").css("pointer-events","none"))},error:function(){$("body").find("div.overlay-loader").remove()}})}function onChangeOtpCkycField(){var otpValue=$(".ckyc-otp-input").val();enableDisableSuBtnforCkyc(otpValue.length)}function enableDisableSuBtnforCkyc(otpLength){6==otpLength?($(".ckycblue-submit-btn").removeClass("gray-btn"),$(".ckycblue-submit-btn").css("pointer-events","visible")):($(".ckycblue-submit-btn").addClass("gray-btn"),$(".ckycblue-submit-btn").css("pointer-events","none"),$(".ckyc-otp-input").css("border","1px solid #ddd"),$("#ckyc-otp-invalid-error-msg").css("display","none"))}function ckycreadMoreLess(){$("#moreTextckyc").toggleClass("more-text"),$(".read-more").text("Read More"==$(".read-more").text()?"Read Less":"Read More")}function ckycChecked(checkboxElem){checkboxElem.checked?($("#proceedmodify-kyc-renewal").removeClass("gray-btn"),$("#proceedmodify-kyc-renewal").css("pointer-events","visible")):($("#proceedmodify-kyc-renewal").addClass("gray-btn"),$("#proceedmodify-kyc-renewal").css("pointer-events","none")),"uploadekycconcapture"==checkboxElem&&$(".ren-orange-block").css("display","none")}function AddressChangeChecked(checkboxElem){checkboxElem.checked?($("#proceedAddressChange").removeClass("gray-btn"),$("#proceedAddressChange").css("pointer-events","auto")):($("#proceedAddressChange").addClass("gray-btn"),$("#proceedAddressChange").css("pointer-events","none")),"uploadekycconcapture"==checkboxElem&&$(".ren-orange-block").css("display","none")}function ckycConsentCaptureDigiLoocker(){var verifyekycusing=$("input[name=radio-group-ckyc]:checked").val();"uploadekycconcapture"==verifyekycusing?($(".ren-orange-block.desktop-only").css("display","none"),$(".ren-orange-block mobile-only").css("display","none"),$("#check_2").addClass("address-active"),$("#check_1").removeClass("address-active")):($(".ren-orange-block.desktop-only").css("display",""),$(".ren-orange-block mobile-only").css("display",""),$("#check_1").addClass("address-active"),$("#check_2").removeClass("address-active"))}function addressChangeConsentCapture(){var verifyekycusing=$("input[name=radio-group-ckyc]:checked").val();"manualSubmission"==verifyekycusing?($("#check_2").addClass("address-active"),$("#check_1").removeClass("address-active"),$("#AddressChange2022").addClass("radio-checked-2"),$("#AddressChange2022").removeClass("radio-checked-1"),$("#proceedmodify").addClass("radio-checked-2"),$("#proceedmodify").removeClass("radio-checked-1"),$(".radio-checked-2 .ren-orange-block").css("display","none")):($("#check_1").addClass("address-active"),$("#check_2").removeClass("address-active"),$("#AddressChange2022").addClass("radio-checked-1"),$("#AddressChange2022").removeClass("radio-checked-2"),$("#proceedmodify").addClass("radio-checked-1"),$("#proceedmodify").removeClass("radio-checked-2"),$(".radio-checked-1 .ren-orange-block").css("display","")),document.getElementById("ren_checkbox").checked&&($("#ren_checkbox").prop("checked",1==this.value),$("#proceedmodify-kyc-renewal").exists()?($("#proceedmodify-kyc-renewal").addClass("gray-btn"),$("#proceedmodify-kyc-renewal").css("pointer-events","none")):($("#proceedAddressChange").addClass("gray-btn"),$("#proceedAddressChange").css("pointer-events","none")))}function proceedbuttonClick(){var selectedCheckbox=$("input[name=radio-group-ckyc]:checked").val();console.log(selectedCheckbox),"manualSubmission"===selectedCheckbox?ShowHideSec():disclaimerPopUpForAddressChange()}function onClickProceedCkycBtn(){var currentResidentialAddress=$("input[name=radio-group-ckyc]:checked").val();if(console.log("currentResidentialAddress : "+currentResidentialAddress),"verifyekycconcapture"==currentResidentialAddress){console.log("if currentResidentialAddress  -->"+currentResidentialAddress),sessionStorage.removeItem("kycRenewelTryAgainStatus"),sessionStorage.removeItem("addressChange"),sessionStorage.setItem("kycRenewel",!0),$(".modify-to-update").is(":visible")?setAnalyticsKYCConfirmation("Address DigiLocker","KYC Renewal"):setAnalyticsKYCRenewal("Renewal DigiLocker","KYC Renewal"),digiLockerJourney=!0;$("a.crossDomain").length>0&&$(this).attr("target","_blank");var clientId=$("#digilockerClientId").val(),URL="https://api.digitallocker.gov.in/public/oauth2/1/authorize?response_type=code&client_id="+clientId+"&rediect_uri=1&state=1",processDiv='<form action="'+URL+'" target="_blank" method="POST" name="payNetForm" style="margin-bottom:0px;"><input type="hidden" name="msg" id="msg" value=""/><a href="javascript:void(0);" class="button primary button-clickToProceed" onClick="redirectToDigilocker(`'+URL+'`);setAnalyticsPost(\'Proceed\');closeModalPopup($(this));">Proceed</a><a href="javascript:void(0);" class="button primary button-cancel" onClick="setAnalyticsPost(\'Cancel\');closeModalPopup($(this));">Cancel</a></form>';0==$(".button-clickToProceed").length&&$("#appendPayNowForm").append(processDiv),$(".button-clickToProceed").css("margin-right","5px"),$(".modal-overlay.disclaimer-popup").addClass("open"),viewport.width>=1024?$(".modal").css("margin-top","-267.5px"):viewport.width<767&&$(".modal").css("margin-top","0px"),viewport.width<=1024&&($(".disclaimer-popup").css("margin-top","0px"),$(".disclaimer-popup .modal").css("margin-top","0px"),$(".disclaimer-popup .modal").css("margin-left","0px"),$(".disclaimer-popup .modal").scrollTop(0))}else"manualSubmission"==currentResidentialAddress&&(console.log("else  currentResidentialAddress  -->"+currentResidentialAddress),console.log("kycRenewalProceedJourney ",kycRenewalProceedJourney),$("#kycrenewalProceedid #proceedModifyAdrsBtn").html("Proceed"),1==kycRenewalProceedJourney?($(".retry-with-digi-locker").css("display","none"),$(".requests .tabs-block").css("display","none"),$("#kyc-renewal-main .kyc-renewel-verify-now-screen").css("display","none"),$("#kyc-renewal-main .document-upload-section").css("display","block"),$("#kyc-renewal-main .document-upload-section .kyc-renewal-doc-upload").css("display","block"),$("#kyc-renewal-main .kyc-ren-options-otp-section").css("display","none"),$("#kyc-renewal-main .kyc-renewel-verify-now-screen .tabs-block .proceed-click-here-hide").css("display","block"),$("#kyc-renewal-main .kyc-renewel-verify-now-screen .tabs-block .modify-click-here-block").css("display","none"),$("#kyc-renewal-main .kyc-renewel-verify-now-screen .tabs-block .proceed-to-update").css("display","block"),$("#kyc-renewal-main .kyc-renewel-verify-now-screen .tabs-block .modify-to-update").css("display","none")):($("#kyc-renewal-main .kyc-renewel-verify-now-screen").css("display","none"),$("#kyc-renewal-main .residenceAddressForm").css("display","block"),$("#kyc-renewal-main .residenceAddressForm .readonly-input").css("display","none"),$("#kyc-renewal-main .residenceAddressForm .modify-address-block").css("display","block"),$("#kyc-renewal-main .residenceAddressForm .check-box-modifyadress").css("display","block"),$("#kyc-renewal-main .residenceAddressForm .verify-address").css("display","none"),$("#kyc-renewal-main .residenceAddressForm .modify-back-btn").css("display","inline-block"),$("#kyc-renewal-main .residenceAddressForm .modify-modify-btn").css("display","none"),$("#proceedModifyAdrsBtn").addClass("gray-btn kyc-signbtn"),$("#kycmodifyaddressCTA .fancy-checkbox").removeClass("checked")))
}function travelCardRedirectToVernost(object,pageName){$(".modal-overlay.disclaimer-popup").addClass("open"),$("#travelCardRewarSummaryPage").is(":visible")&&($(".disclaimer-popup .digiContactChangeJourney").removeClass("hide-section"),$(".disclaimer-popup .normalJourney").addClass("hide-section")),viewport.width<=1024&&($(".disclaimer-popup").css("margin-top","0px"),$(".disclaimer-popup .modal").css("margin-top","0px"),$(".disclaimer-popup .modal").css("margin-left","0px"),$(".disclaimer-popup .modal").scrollTop(0));var loaderHtml='<div class="overlay-loader"></div>';$(".modal-overlay").append(loaderHtml),$.ajax({url:"/creditcards/app/msw/vernost-post-redirection?pageIdentifier="+pageName,type:"POST",data:JSON.stringify({page:pageName}),contentType:"application/json; charset=utf-8",success:function(response){console.log(response);var responseData;response&&""!=response&&(responseData=JSON.parse(response));var processDiv="";if(console.log("data==success1234==>"+responseData),responseData&&""!=responseData)var processDiv='<form id = "payNetForm" name="payNetForm" style="margin-bottom:0px;"><a href="#" id="travelCardProceed" class="button primary button-clickToProceed" onClick="setAnalyticsPost(\'Proceed\');closeModalPopup($(this));">Proceed</a><a href="javascript:void(0);" class="button primary button-cancel" onClick="setAnalyticsPost(\'Cancel\');closeModalPopup($(this));">Cancel</a></form>';0==$(".button-clickToProceed").length&&($("#appendPayNowForm").append(processDiv),document.getElementById("travelCardProceed").addEventListener("click",function(){console.log("Value of message after reset");var myobj=document.getElementById("payNetForm");myobj.remove(),console.log("Logout before Ajax run");var loaderHtml='<div class="overlay-loader"></div>';$(".modal-overlay").append(loaderHtml),$.ajax({url:"/creditcards/j_spring_security_logout",type:"GET",success:function(){window.location.href=responseData.vernostUrl+"/"+object+"?auth_token="+responseData.partnerRedirectToken,console.log("Logout Ajax run")}})})),$(".modal-overlay").find("div.overlay-loader").remove(),$(".button-clickToProceed").css("margin-right","5px"),viewport.width>=1024?$("#appendPayNowForm").parents().find(".open").children(".modal").css("margin-top","-267.5px"):viewport.width<767&&$("#appendPayNowForm").parents().find(".open").children(".modal").css("margin-top","0px")},error:function(){console.log("Enter inside failure block"),$(".modal-overlay").find("div.overlay-loader").remove()}})}function hideUpdateContactDetails(){$("#updateSbiDetailStep").hide(),$(".email-verfy-and-cancel-btn-block").show(),$(".verify-block").hide()}function cancelEmailVerify(){$("#updateSbiDetailStep").show(),$(".email-verfy-and-cancel-btn-block").hide(),$(".verify-block").show(),$(".verifyOtpSection").hide()}function travelCardRedirectToVernost(object,pageName){var analyticsDataJourney="postlogin:"+object;callAnalycticsForTravelCard("Rewards",analyticsDataJourney),$(".modal-overlay.disclaimer-popup").addClass("open"),viewport.width<=1024&&($(".disclaimer-popup").css("margin-top","0px"),$(".disclaimer-popup .modal").css("margin-top","0px"),$(".disclaimer-popup .modal").css("margin-left","0px"),$(".disclaimer-popup .modal").scrollTop(0));var loaderHtml='<div class="overlay-loader"></div>';$(".modal-overlay").append(loaderHtml),$.ajax({url:"/creditcards/app/msw/vernost-post-redirection?pageIdentifier="+pageName,type:"POST",data:JSON.stringify({page:pageName}),contentType:"application/json; charset=utf-8",success:function(response){console.log(response);var responseData;response&&""!=response&&(responseData=JSON.parse(response));var processDiv="";if(console.log("data==success1234==>"+responseData),responseData&&""!=responseData)var processDiv='<form id = "payNetForm" name="payNetForm" style="margin-bottom:0px;"><a href="#" id="travelCardProceed" class="button primary button-clickToProceed" onClick="setAnalyticsPost(\'Proceed\');closeModalPopup($(this));">Proceed</a><a href="javascript:void(0);" class="button primary button-cancel" onClick="setAnalyticsPost(\'Cancel\');closeModalPopup($(this));">Cancel</a></form>';0==$(".button-clickToProceed").length&&($("#appendPayNowForm").append(processDiv),document.getElementById("travelCardProceed").addEventListener("click",function(){console.log("Value of message after reset");var myobj=document.getElementById("payNetForm");myobj.remove(),console.log("Logout before Ajax run");var loaderHtml='<div class="overlay-loader"></div>';$(".modal-overlay").append(loaderHtml),$.ajax({url:"/creditcards/j_spring_security_logout",type:"GET",success:function(){window.location.href=responseData.vernostUrl+"/"+object+"?auth_token="+responseData.partnerRedirectToken,console.log("Logout Ajax run")}})})),$(".modal-overlay").find("div.overlay-loader").remove(),$(".button-clickToProceed").css("margin-right","5px"),viewport.width>=1024?$("#appendPayNowForm").parents().find(".open").children(".modal").css("margin-top","-267.5px"):viewport.width<767&&$("#appendPayNowForm").parents().find(".open").children(".modal").css("margin-top","0px")},error:function(){console.log("Enter inside failure block"),$(".modal-overlay").find("div.overlay-loader").remove()}})}function callAnalycticsForTravelCard(var1,var2){setAnalyticsTravelCard(var1,var2)}function removeSidebarAndDash(){$(".sidebar").css("display","none"),$(".card-summary.inner").css("display","none"),$(".main").addClass("removeMarginEstore"),$(".main").css("border-left","0px")}function redirectForMultiPartner(url){$(".modal-overlay.disclaimer-popup").addClass("open"),$(".disclaimer-popup .digiContactChangeJourney").removeClass("hide-section"),$(".disclaimer-popup .normalJourney").addClass("hide-section"),viewport.width<=1024&&($(".disclaimer-popup").css("margin-top","0px"),$(".disclaimer-popup .modal").css("margin-top","0px"),$(".disclaimer-popup .modal").css("margin-left","0px"),$(".disclaimer-popup .modal").scrollTop(0));var processDiv='<form id = "payNetForm" name="payNetForm" style="margin-bottom:0px;"><a href="javascript:void(0);" id="travelCardProceed" class="button primary button-clickToProceed" onClick="setAnalyticsPost(\'Proceed\');closeModalPopup($(this));">Proceed</a><a href="javascript:void(0);" class="button primary button-cancel" onClick="setAnalyticsPost(\'Cancel\');closeModalPopup($(this));">Cancel</a></form>';$("#payNetForm").length>0&&$("#payNetForm").remove(),$("#appendPayNowForm").append(processDiv),document.getElementById("travelCardProceed").addEventListener("click",function(){console.log("URL ====> ",url),window.open(url,"_blank")}),$(".button-clickToProceed").css("margin-right","5px"),viewport.width>=1024?$("#appendPayNowForm").parents().find(".open").children(".modal").css("margin-top","-267.5px"):viewport.width<767&&$("#appendPayNowForm").parents().find(".open").children(".modal").css("margin-top","0px")}function redirectSSOHandshake(partner,ssoReq,url){$(".modal-overlay.disclaimer-popup").addClass("open"),$(".disclaimer-popup .digiContactChangeJourney").removeClass("hide-section"),$(".disclaimer-popup .normalJourney").addClass("hide-section"),viewport.width<=1024&&($(".disclaimer-popup").css("margin-top","0px"),$(".disclaimer-popup .modal").css("margin-top","0px"),$(".disclaimer-popup .modal").css("margin-left","0px"),$(".disclaimer-popup .modal").scrollTop(0));var processDiv='<form action="/creditcards/rest/estore/gen-token-redirection" target="_blank" method="POST" id="payNetForm" name="payNetForm" style="margin-bottom:0px;"><input type="hidden" id="url" name="url" value="'+url+'"/><input type="hidden" id="partnerIdentifier" name="partnerIdentifier" value="'+partner+'"/><input type="hidden" id="ssoHandshakeRequired" name="ssoHandshakeRequired" value="'+ssoReq+'"/><input type="hidden" id="channel" name="channel" value="website"/><a href="javascript:void(0);" id="travelCardProceed" class="button primary button-clickToProceed" onClick="setAnalyticsPost(\'Proceed\',\''+partner+'\');closeModalPopup($(this));">Proceed</a><a href="javascript:void(0);" class="button primary button-cancel" onClick="setAnalyticsPost(\'Proceed\',\''+partner+"');closeModalPopup($(this));\">Cancel</a></form>";console.log("paynet Form",processDiv),$("#payNetForm").length>0&&$("#payNetForm").remove(),$("#appendPayNowForm").append(processDiv),document.getElementById("travelCardProceed").addEventListener("click",function(){console.log("url ====> ",url),$("#payNetForm").submit()}),$(".button-clickToProceed").css("margin-right","5px"),viewport.width>=1024?$("#appendPayNowForm").parents().find(".open").children(".modal").css("margin-top","-267.5px"):viewport.width<767&&$("#appendPayNowForm").parents().find(".open").children(".modal").css("margin-top","0px")}function fixAllStylingC2S(){$(".main-header.campaign-header").addClass("remMarBotVouInt"),$(".campaign-wrapper").addClass("voucherIntegartionCampPadding"),$("#content-section-c2s").css("height","auto")}function readMore(text,maxLength){var ret=text;return ret.length>maxLength&&(ret=ret.substr(0,maxLength-3)+"..."),ret}function setFormVisibility(frm){var nameVal=$.trim($(frm).find("#name").val()),bankName=$.trim($(frm).find("#encashBankName").val())||$.trim($(frm).find("#emdBankName").val());restrictFormElements(""==nameVal||""==bankName?{frm:frm,disableFields:!0,step:[2,3]}:{frm:frm,disableFields:!1,step:[2,3]})}function restrictFormElements(param){if(param.step.length>0)for(var i=0;i<param.step.length;i++)1==param.step[i]||(2==param.step[i]?param.disableFields:3==param.step[i])}function fillEmdSummary(data){$("#emd-form #modeData").text(data.modeOfDelivery),$("#emd-form #amountData").text(data.totalAmountDisplay),$("#emd-form #tenureData").text(data.tenure),$("#emd-form #interestData").text(data.interest),$("#emd-form #feeData").text(data.processingFeeDisplay),$("#emd-form #processingFee").val(data.processingFee),$("#emd-form #selectedOfferInterestRate").text(data.savingsInfo.selectedOfferInterestRate),$("#emd-form #selectedOfferTenure").text(data.savingsInfo.selectedOfferTenure),$("#emd-form #selectedOfferProcFee").text(data.savingsInfo.selectedOfferProcFee),$("#emd-form #calculations-emd").removeClass("hide"),data.gstOnProcessingFee?($("#emd-form #gstOnProcFeeEmdDisplay").removeClass("hide"),$("#emd-form #gstOnProcFeeEmd").text(data.gstOnProcessingFee)):($("#emd-form #gstOnProcFeeEmdDisplay").addClass("hide"),$("#emd-form #gstOnProcFeeEmd").text("XX")),data.savingsInfo.waiverAvailable?($("#emd-form #updatedOffer").closest("tr").removeClass("hide"),null!=data.savingsInfo.waiverDisplay&&""!=data.savingsInfo.waiverDisplay&&$("#emd-form #waiverDisplayID").html(data.savingsInfo.waiverDisplay)):($("#emd-form #updatedOffer").closest("tr").addClass("hide"),$("#emd-form #waiverDisplayID").html("")),$("#emd-form #appliedRate").val(data.savingsInfo.betterOfferInterestRate);var specialBenefitsVar=data.savingsInfo.specialBenefits;null!=specialBenefitsVar&&""!=specialBenefitsVar?$("#emd-form #specialBenefitsID").html(specialBenefitsVar).closest("tr").removeClass("hide"):$("#emd-form #specialBenefitsID").html("").closest("tr").addClass("hide")}function clearEmdSummary(){$("#emd-form #calculations-emd").addClass("hide"),$("#emd-form #modeData").text(""),$("#emd-form #amountData").text(""),$("#emd-form #tenureData").text(""),$("#emd-form #interestData").text(""),$("#emd-form #feeData").text(""),$("#emd-form #processingFee").val(""),$("#emd-form #term-condition-id").prop("checked",!1).parent().removeClass("checked"),$("#emd-form #term-condition-id").removeAttr("disabled"),$("#emd-form #generate-otp-field").hide(),$("#emd-form #enter-otp-field").hide(),$("#emd-form #confirm-button").attr("disabled",!0).removeClass("primary").addClass("secondary").addClass("disabled"),$("#emd-form").find("#enter-otp-field").find("label.error").remove(),$("#emd-form").find("#enter-otp-field").find("label.valid").remove(),$("#emd-form #gstOnProcFeeEmdDisplay").addClass("hide"),$("#emd-form #gstOnProcFeeEmd").text("XX")}function setcardNumber(){var cardNumber=$("#upgrade-now-tab-id").attr("data-card").replace(/[-]/g,"").match(/.{1,4}/g),tempVal="XXXX";$(".card-no-upgrade").each(function(i){3>i?""!=cardNumber[i]&&$(this).val(tempVal):$(this).val(cardNumber[i]),3==i&&$(this).trigger("change")})}function fillEncashSummary(data){$("#encash-form #modeData").text(data.modeOfDelivery),$("#encash-form #amountData").text(data.totalAmountDisplay),$("#encash-form #tenureData").text(data.tenure),$("#encash-form #interestData").text(data.interest),$("#encash-form #feeData").text(data.processingFeeDisplay),$("#encash-form #emiData").text(data.emiDisplay),$("#encash-form #emi").val(data.emiDisplay),$("#encash-form #processingFee").val(data.processingFeeWithoutGSTDisplay),$("#encash-form #calculations-encash").removeClass("hide"),$("#encash-form #selectedOfferInterestRate").text(data.savingsInfo.selectedOfferInterestRate),$("#encash-form #selectedOfferTenure").text(data.savingsInfo.selectedOfferTenure),$("#encash-form #selectedOfferProcFee").text(data.savingsInfo.selectedOfferProcFee),$("#encash-form #procPerEnc").text(data.procFeePercentAvail?data.procFeePercentDisplay:"x"),$("#encash-form #procMinEnc").text(data.procFeeMinAmountAvail?data.procFeeMinAmountDisplay:"xxx"),$("#encash-form #procMaxEnc").text(data.procFeeMaxAmountAvail?data.procFeeMaxAmountDisplay:"yyy"),data.gstOnProcessingFee?($("#encash-form #gstOnProcFeeEncDisplay").removeClass("hide"),$("#encash-form #gstOnProcFeeEnc").text(data.gstOnProcessingFee)):($("#encash-form #gstOnProcFeeEncDisplay").addClass("hide"),$("#encash-form #gstOnProcFeeEnc").text("XX")),data.savingsInfo.waiverAvailable?($("#encash-form #updatedOffer").closest("tr").removeClass("hide"),null!=data.savingsInfo.waiverDisplay&&""!=data.savingsInfo.waiverDisplay&&$("#encash-form #waiverDisplayID").html(data.savingsInfo.waiverDisplay)):($("#encash-form #updatedOffer").closest("tr").addClass("hide"),$("#encash-form #waiverDisplayID").html("")),$("#encash-form #appliedRate").val(data.savingsInfo.betterOfferInterestRate);var specialBenefitsVar=data.savingsInfo.specialBenefits;null!=specialBenefitsVar&&""!=specialBenefitsVar?$("#encash-form #specialBenefitsID").html(specialBenefitsVar).closest("tr").removeClass("hide"):$("#encash-form #specialBenefitsID").html("").closest("tr").addClass("hide"),data.savingsInfo.savingsInfoAvailable?($("#encash-form #saveDisplay").removeClass("hide").addClass("show"),$("#encash-form #youSaveId").removeClass("hide").addClass("show"),$("#encash-form #bookAmount").text(data.totalAmount),$("#encash-form #defaultOfferInterestRate").text(data.savingsInfo.defaultOfferInterestRate),$("#encash-form #defaultOfferTotalAmount").text(data.savingsInfo.totalSavingsForDefault),$("#encash-form #defaultOfferMonthlyAmount").text(data.savingsInfo.monthlySavingsForDefault),$("#encash-form #updateOfferInterestRate").text(data.savingsInfo.betterOfferInterestRate),$("#encash-form #updateOfferTotalAmount").text(data.savingsInfo.totalSavingsForBetterOffer),$("#encash-form #youSave").text(data.savingsInfo.totalSaving)):($("#encash-form #saveDisplay").removeClass("show").addClass("hide"),$("#encash-form #youSaveId").removeClass("show").addClass("hide"),$("#encash-form #bookAmount").text(""),$("#encash-form #defaultOfferInterestRate").text(""),$("#encash-form #defaultOfferTotalAmount").text(""),$("#encash-form #defaultOfferMonthlyAmount").text(""),$("#encash-form #updateOfferInterestRate").text(""),$("#encash-form #updateOfferTotalAmount").text(""),$("#encash-form #youSave").text(""));var irrFactor=data.irrFactor,selectedROI=data.savingsInfo.selectedOfferInterestRate;null!=irrFactor&&""!=irrFactor&&selectedROI>0?($("#encash-form #encashRRIAstrisk").removeClass("hide").addClass("show"),$("#encash-form #encashROITooltipId").removeClass("hide").addClass("show"),$("#encash-form #rriInfo").removeClass("hide").addClass("show"),$("#encash-form #irrFactorId").text(data.irrFactor),$("#encash-form #encashRRIId").text(data.irrFactor)):($("#encash-form #encashRRIAstrisk").removeClass("show").addClass("hide"),$("#encash-form #encashROITooltipId").removeClass("show").addClass("hide"),$("#encash-form #rriInfo").removeClass("show").addClass("hide"),$("#encash-form #irrFactorId").text(""),$("#encash-form #encashRRIId").text("X"))}function resetEncashSummary(){$("#encash-form #calculations-encash").addClass("hide"),$("#encash-form #encashRRIAstrisk").removeClass("show").addClass("hide"),$("#encash-form #encashROITooltipId").removeClass("show").addClass("hide"),$("#encash-form #rriInfo").removeClass("show").addClass("hide"),$("#encash-form #irrFactorId").text(""),$("#encash-form #emi").val(""),$("#encash-form #processingFee").val(""),$("#encash-form #modeData").text(""),$("#encash-form #amountData").text(""),$("#encash-form #interestData").text(""),$("#encash-form #emiData").text(""),$("#encash-form #feeData").text(""),$("#encash-form #tenureData").text(""),$("#encash-form #term-condition-id").prop("checked",!1).parent().removeClass("checked"),$("#encash-form #generate-otp-field").hide(),$("#encash-form #enter-otp-field").hide(),$("#encash-form #term-condition-id").removeAttr("disabled"),$("#encash-form #confirm-button").attr("disabled",!0).removeClass("primary").addClass("secondary").addClass("disabled"),$("#encash-form #gstOnProcFeeEncDisplay").addClass("hide"),$("#encash-form #gstOnProcFeeEnc").text("XX"),$("#encash-form #encashRRIId").text("X"),$("#encash-form").find("#enter-otp-field").find("label.error").remove(),$("#encash-form").find("#enter-otp-field").find("label.valid").remove()}function resetEmdBookingAmt(){$("#bookingAmnt").siblings("label").remove(),$("#emd-form #bookingAmnt").val(""),clearEmdSummary()}function resetEncashBookingAmt(){$("#bookingAmnt").siblings("label").remove(),$("#encash-form #bookingAmnt").val(""),resetEncashSummary()}function makeAjaxWithLoader(parameters){$.ajax({type:parameters.type||"GET",data:parameters.data||"",url:parameters.url||"",dataType:parameters.dataType||"",beforeSend:function(){var loaderHtml='<div class="overlay-loader"></div>',$target=$(parameters.overlayTarget?parameters.overlayTarget:"body");$target.append(loaderHtml),$target.is("body")||($target.css("position","relative"),$target.find("div.overlay-loader").css("position","absolute"))},complete:function(){var $target=$(parameters.overlayTarget?parameters.overlayTarget:"body");$target.find("div.overlay-loader").remove()},success:function(data){"function"==typeof parameters.success&&parameters.success(data)},error:function(xhr,status,error){"function"==typeof parameters.error&&parameters.error(xhr,status,error),"901"==xhr.status&&(window.location.href="/creditcards/app/user/login/error/invalidSession")}})}function dialogify(parameters){$(parameters.dataToShowInDialog).dialog({draggable:!0,modal:parameters.modal||!0,width:parameters.width||"auto",dialogClass:parameters.dialogClass||"sbi-dialog",show:parameters.show||{effect:"fadeIn",duration:500},hide:parameters.hide||{effect:"fadeOut",duration:500},close:function(){"function"==typeof parameters.close&&parameters.close(),$(this).dialog("destroy").remove()},open:function(){"function"==typeof parameters.open&&parameters.open()},appendTo:"#bt-calc-container"});var dialog=$(".bt-calc-dialog");dialog.position({my:"center",at:"center",of:window})}function addRow(count){var htmlSelect=[];htmlSelect.push('<option value="0">Select City</option>'),$.ajax({url:"/creditcards/app/refer/cityList",type:"POST",data:"",success:function(data){if(1==count)var html='<ul class="form-field-list ">';else var html='<ul class="form-field-list relative-list">';html+='<li><div class="field-wrap"><label class="refer-lable" for="name">'+referData.NameParam+'</label><input type="text" name="name" onkeypress="return referAFriendValidator(event);" maxlength="50" class="name" id="name'+count+'"><article class="tooltip-hr tooltip-card"><p>'+referData.NameParamToolTip+"</p></article></div></li>",html+='<li><div class="field-wrap"><label class="refer-lable" for="mobile">'+referData.MobileParam+'</label><input type="text" name="mobile" class="mobile only-numeric" id="mobileNo'+count+'" value="" maxlength="10"><article class="tooltip-hr tooltip-card"><p>'+referData.MobileParamToolTip+"</p></article></div></li>",html+='<li><div class="field-wrap"><label class="refer-lable" for="mailAdd">'+referData.EmailParam+'</label><input type="text" name="email" maxlength="50" onkeypress="return emailValidator(event);" class="emailAdd" id="mailAdd'+count+'"><article class="tooltip-hr tooltip-card"><p>'+referData.EmailParamToolTip+"</p></article> </div></li>";var htmlSelect="",cityArray=data;htmlSelect='<option value="">Select City</option>';for(var i=0;i<cityArray.length;i++)htmlSelect+='<option value="'+cityArray[i].name+'">'+cityArray[i].name+"</option>";html+='<li><div class="field-wrap"><label class="refer-lable" for="city">'+referData.CityParam+'</label><div class="fancy-select-wrap">',html+='<select class="fancy city" name="city" id="city'+count+'"  autocomplete="off">'+htmlSelect+"</select></div></div></li>",count>1&&(html+='<li><a href="#" class="remove-row icon">remove</a></li>'),html+="</ul>",$(".refer .row-container").append(html),$("select.fancy").fancySelect(),resetName(),relativeFieldValidation()},error:function(){}})}function resetName(){$(".refer .form-field-list li input.name").each(function(index){var currName=$(this).attr("name"),newName=currName.split("-");$(this).attr("name",newName[0]+"-"+(index+1)),$(this).attr("id",newName[0]+"-"+(index+1)),$(this).siblings("label.error").attr("for",newName[0]+"-"+(index+1))}),$(".refer .form-field-list li input.mobile").each(function(index){var currName=$(this).attr("name"),newName=currName.split("-");$(this).attr("name",newName[0]+"-"+(index+1)),$(this).attr("id",newName[0]+"-"+(index+1)),$(this).siblings("label.error").attr("for",newName[0]+"-"+(index+1))}),$(".refer .form-field-list li input.emailAdd").each(function(index){var currName=$(this).attr("name"),newName=currName.split("-");$(this).attr("name",newName[0]+"-"+(index+1)),$(this).attr("id",newName[0]+"-"+(index+1)),$(this).siblings("label.error").attr("for",newName[0]+"-"+(index+1))}),$(".refer .form-field-list li select.city").each(function(index){var currName=$(this).attr("name"),newName=currName.split("-");$(this).attr("name",newName[0]+"-"+(index+1)),$(this).attr("id",newName[0]+"-"+(index+1)),$(this).siblings("label.error").attr("for",newName[0]+"-"+(index+1))})}function removeRow(ele){$(ele).parents(".relative-list").remove(),resetName(),relativeFieldValidation()}function openModalPopup(popupId){$("#"+popupId+".modal-overlay").addClass("open"),$("body").addClass("overlay-opened");var pageWidth=document.documentElement.clientWidth,pageHeight=document.documentElement.clientHeight;"number"!=typeof pageWidth&&("CSS1Compat"==document.compatMode?(pageWidth=document.documentElement.clientWidth,pageHeight=document.documentElement.clientHeight):(pageWidth=document.body.clientWidth,pageHeight=document.body.clientHeight));var divobj=$("#"+popupId).find(".modal"),divWidth=divobj.width(),divHeight=divobj.outerHeight(),divTop=divHeight/2;divobj.css("margin-top","-"+divTop+"px"),$("html.tablet.portrait").length&&divobj.css("margin-left",(divWidth+180)/-2)}function closeModalPopup(currentPopup){$(".rating-stars #stars li.star").removeClass("selected"),$(".csat-expanded-content").hide(),$(".question-content").html("");$(currentPopup).parents(".modal-overlay").removeClass("open"),$("body").removeClass("overlay-opened"),$(".tab-popup").exists()&&$(".single-item").unslick({arrows:!1})}function changeCodes(parentEle,index){parentEle.hasClass("resi")&&($("select#residenceZipCode").renderCode(index,"pin"),$("select#country_code").renderCode(index,"std"),$("select#residenceZipCode").trigger("update.fs")),parentEle.hasClass("office")&&($("select#companyZipCode").renderCode(index,"pin"),$("select#companyCountry_code").renderCode(index,"std"),$("select#companyZipCode").trigger("update.fs"))}function enableCalculator(container){function validateCalculatorVal($this,$initialMaxAmt){var $balance=($(container).find(".repayment.onlyMoney"),parseFloat($(container).find("input#balance").val())),$currentValue=(parseFloat($($this).attr("data-max-amt")),parseFloat($($this).val()));if(""==$initialMaxAmt){$initialMaxAmt=$balance;var $inputs=$(secondTd).find("input[type='text']:not('.disabled'):visible"),$counter=1;$($inputs).each(function(index,$ele){$($ele).attr("data-index")>1&&$($ele).val(""),$counter++})}return $currentValue>$initialMaxAmt?($($this).removeClass("visited"),$($this).val($initialMaxAmt),!1):($($this).addClass("visited"),!0)}function setValue(month){var hdnOfferArray=$(container).find("ul.dd-options").attr("data-zeroroimonth").split("-"),hdnRoI=hdnOfferArray[0],balance=(hdnOfferArray[1],$(container).find(".bt-calculator input#balance").val()),interest=$(container).find(".bt-calculator input#interest").val(),rate=$(container).find(".rate span.selected").attr("data-value"),procFee=$(container).find(".selected-option input").attr("data-procfee");if(rate&&procFee){var rateArray=rate.split("-"),totalOther=0,totalSbi=0,sbiInt=0;balance="undefined"==typeof balance||""==balance||null==balance?0:+balance,interest="undefined"==typeof interest||""==interest||null==interest?0:+interest,procFee=getProcFee(container),$(container).find("table.bt-cal .free-processing").text("").text(procFee).closest("tr").removeClass("hide"),$(container).find("table.bt-cal .total-other-interset").closest("tr").removeClass("hide");var monthlyPayArray=[],balMonthEnd=balance;$(container).find("table.bt-cal tbody tr:not('.last-tr,.hide,.only-two')").each(function(index){var secondTd=$(this).find("td:eq(1)"),value=$(secondTd).find('input[type="text"]').val();value="undefined"==typeof value||""==value||null==value?0:value,monthlyPayArray.push(value);for(var totalValue=0,i=0;index>=i;i++)totalValue+=parseFloat(monthlyPayArray[i]);var txtBoxValue=parseFloat(balance/month);try{var txtValue=txtBoxValue.toString(),isExists=txtValue.indexOf(".");if(-1!=isExists)var txtResponse=parseInt(isExists+3),repaymentVal=parseFloat(txtValue.substring(0,txtResponse));else repaymentVal=txtBoxValue}catch(e){var repaymentVal=txtBoxValue.toFixed(2)}$(this).find("td:eq(1) input").val(repaymentVal),balMonthEnd=round(parseFloat(balMonthEnd)-parseFloat(repaymentVal));var otherInterest=round(parseFloat(balMonthEnd*interest/100)),sbiInterest=round(balMonthEnd*rateArray[0]/100);if(!(0>balMonthEnd)){$(this).find("td:eq(2)").text(balMonthEnd),$(this).find("td:eq(3)").text(otherInterest);var offerRate=rateArray[0],offerMonth=rateArray[1];0==offerRate&&6==offerMonth&&(sbiInterest=2>index?0:round(balMonthEnd*hdnRoI/100)),$(this).find("td:eq(4)").text(sbiInterest),totalOther+=parseFloat($(this).find("td:eq(3)").text()),totalSbi+=parseFloat($(this).find("td:eq(4)").text())}}),sbiInt=totalSbi,totalSbi+=parseFloat($(container).find("td.free-processing").text());var $youSaveAmt=round(round(totalOther)-round(totalSbi));$youSaveAmt>0||($youSaveAmt=0),$(container).find(".sbi-interset").text(round(sbiInt)),$(container).find(".total-sbi-interset").text(round(totalSbi)),$(container).find(".total-other-interset").text(round(totalOther)),$(container).find(".save-1").text(round(totalOther)),$(container).find(".save-2").text(round(totalSbi)),$(container).find(".save-3 span.bal").text($youSaveAmt)}}function getProcFee(container){var balance=parseFloat($(container).find(".bt-calculator input#balance").val()),procFeeArr=$(container).find(".selected-option input").attr("data-procfee").split("-"),procFeePer=procFeeArr[0],procFeePerVal=+balance*+procFeePer/100,procFeeMinVal=+procFeeArr[1]+0;return procFeePerVal>=procFeeMinVal?round(parseFloat(procFeePerVal)):procFeeMinVal}function getAllowedMonths(container){var allowedMonth=$(container).find("tr.months").length,rateMonth="";if(rateMonth=$(container).find(".rate span.selected").attr("data-value"),"undefined"!=typeof rateMonth){var rateMonthArray=rateMonth.split("-");allowedMonth=Math.ceil(rateMonthArray[1])}return allowedMonth}function resetCalculator(container){try{$(".btfilter-container").find('label[for="balance"]:visible').removeAttr("class")}catch(e){}$(container).find("form").addClass("hide");var frm=$(container).find(".bt-calculator form");frm.trigger("reset"),frm.find(".bal-container").find(".save-3 .bal,.save-1,.save-2").text("0")}function round(num){return Math.round(100*num)/100}function validateBTCalculator($this){$currentValue=$(container).find("#balance:visible").val();var $label=$(".btfilter-container #balance").next("label[for='balance']");return parseFloat($currentValue)>=parseFloat(calculatorRange.minLimit)&&parseFloat($currentValue)<=parseFloat(calculatorRange.maxLimit)?($label.addClass("valid").removeClass("error"),$($this).removeClass("error"),!0):($label.addClass("error").removeClass("valid"),$($this).addClass("error"),!1)}$(container).find(".offer_list ul").hide(),resetCalculator(container),$(container).find(".fancy-dd").supportKeyboard();var parentTr=$(container).find("table.bt-cal tbody tr:not('.last-tr,.hide,.only-two')"),secondTd=$(parentTr).find("td:eq(1)");$(secondTd).find('input[type="text"]').keyup(function(e){if(keyCode=0==e.keyCode?e.charCode:e.keyCode,37!==keyCode&&39!==keyCode)try{var allowedMonth=getAllowedMonths($(container));$(this).removeClass("visited");var $dataId=parseInt($(this).attr("data-index")),$prevDataId=parseInt($dataId-1),maxAmt=$(this).parents("tr").prev("tr").find('td[data-text="'+$prevDataId+'"]:visible').text();validateCalculatorVal(this,maxAmt),setValue(allowedMonth)}catch(e){}}),$(container).find("input#balance").change(function(){resetCalculator(container),validateBTCalculator(this)?btAmountBasedOffers($(container).find("#balance").val(),!0):btAmountBasedOffersNew($(container).find("#balance").val(),!0)}),$(container).find("input#interest").change(function(){var allowedMonth=getAllowedMonths($(container));setValue(allowedMonth)}),$(container).find(".fancy-dd span.selected").click(function(e){$(this).siblings("ul.dd-options").toggleClass("open"),e.stopPropagation()}),$(container).find(".dd-options li").click(function(e){e.preventDefault(),$(this).find("input").prop("checked",!0).trigger("click")}),$(container).find(".dd-options li input").off("click").on("click",function(e){e.preventDefault(),e.stopPropagation(),$(container).find("form").removeClass("hide"),$(container).find("table.bt-cal tbody tr:not('.last-tr,.hide,.only-two'):first").find('input[type="text"]').focus(),$(container).find("table.bt-cal tbody tr:not('.last-tr,.hide,.only-two')").find('input[type="text"]').val(""),$(this).prop("checked")?($(this).closest("ul").find("li.option").removeClass("selected-option"),$(this).closest("li.option").addClass("selected-option")):$(this).parent("span").parent("label").parent("li").removeClass("selected-option"),$(this).parents("ul.dd-options").removeClass("open"),$(this).parents(".dd-options").siblings("span.selected").text($(this).attr("data-val")),$(this).parents(".dd-options").siblings("span.selected").attr("data-value",$(this).attr("data-id"));var rateMonth=$(container).find(".rate span.selected").attr("data-value"),rateMonthArray=rateMonth.split("-"),allowedMonth=(rateMonthArray[0],parseInt(rateMonthArray[1]));$(container).find("table.bt-cal tbody tr.months").find("input").removeClass("disabled").prop("disabled",!1),$(container).find("table.bt-cal tbody tr.months").removeClass("hide").each(function(index){var newIndex=index+1;if(newIndex==allowedMonth);else{if(!(newIndex>allowedMonth))return;$(this).addClass("hide")}}),setValue(allowedMonth)}),$(container).find("input[type='text']").on("keydown",function(e){var keyCode,ret,specialKeys=new Array;return specialKeys.push(8),specialKeys.push(9),specialKeys.push(13),specialKeys.push(46),specialKeys.push(36),specialKeys.push(35),specialKeys.push(37),specialKeys.push(39),specialKeys.push(190),specialKeys.push(46),specialKeys.push(110),keyCode=0==e.keyCode?e.charCode:e.keyCode,ret=keyCode>=48&&57>=keyCode||keyCode>=96&&105>=keyCode||$.inArray(e.keyCode,specialKeys)>-1&&e.charCode!=e.keyCode
}),onlyMoney($(container));try{$(".onlyInterest").autoNumeric("init")}catch(e){}}function disableMyCard(){$("#user-card").attr("disabled","disabled")}function loadMoreTxnInit(){var $target=$("#txn-display table tbody tr:not(.notification)");$target.each(function(index){index+1>txnCounter&&($(this).addClass("hide"),$(this).next().hasClass("notification")&&$(this).next().addClass("hide"))}),0==$("#txn-display table tbody tr.hide").length?$("#loadMoreTxnhistLinkId").addClass("hide"):$("#loadMoreTxnhistLinkId").removeClass("hide")}function loadMoreTxn(){var count=0,$target=$("#txn-display table tbody tr:not(.notification)");$target.each(function(){$(this).hasClass("hide")&&txnCounter>count&&($(this).removeClass("hide"),$(this).next().hasClass("notification")&&$(this).next().removeClass("hide"),count++),0==$("#txn-display table tbody tr.hide").length&&$("#loadMoreTxnhistLinkId").addClass("hide")})}function numberWithCommas(x){return x.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}function loadAddOnChange(href,selectedIndex){$.ajax({url:href,type:"POST",data:{selectedCardIndex:selectedIndex},overlayTarget:$(".main"),beforeSend:function(){var loaderHtml='<div class="overlay-loader"></div>';$("body").append(loaderHtml)},complete:function(){$("body").find("div.overlay-loader").remove()},success:function(data){data=dataDecryptionAES(data,""),data=$.parseJSON(data),changeAddonField(),$(".editable-contact-detail-container #otp").val(""),$("#quick-contact-tab").find(".error-wrap").empty(),$(".tab-content.primarycard-edit-container.show-editable").find(".form-field-list").find(".field-wrap").find("label").remove(),$(".tab-content.primarycard-edit-container.show-editable").find(".form-field-list").find(".field-wrap").find("input").removeClass("error"),$(".headercontAddonCard h3").text("Add-On "+data.cardType),$(".addon-emailId").text(data.maskedEmailAddress),$(".addon-mobileNo").text("+91"+data.maskedMobileNumber),$("#edit-addon-mobileNumber").val(data.mobileNumber),$("#edit-addon-emailAddress").val(data.emailAddress),$("#addon-cardType").val(data.cardType),$("#addon-cardNo").val(data.cardNo),$(".readonly-email-block span.masked").text(data.maskedEmailAddress),$(".readonly-mobile-block span.masked").text("+91"+data.maskedMobileNumber),$(".editable-mobile-block input").val(data.mobileNumber),$(".editable-email-block input").val(data.emailAddress),$("#unmaskedEmailId").val(data.emailAddress),$("#unmaskedMobileNo").val(data.mobileNumber),$("#maskedEmailId").val(data.maskedEmailAddress),$("#maskedMobileNo").val(data.maskedMobileNumber),"true"==$("#proceedToKYCJourney").val()&&(console.log("KYC Journey initiated"),$(".updateVerifyJourney .readonly-email-block .unmasked").empty(),$(".updateVerifyJourney .readonly-email-block .unmasked").append(data.emailAddress),$(".updateVerifyJourney .readonly-mobile-block .unmasked").empty(),$(".updateVerifyJourney .readonly-mobile-block .unmasked").append("+91"+data.mobileNumber)),"P"==data.cardType?($(".validate-btn").show(),$(".updateVerifyJourney .verify-block a").show(),$(".myprofile-addonDisText").css("display","none"),$("#primary-EmailId").val(data.emailAddress),$("#primary-MobileNumber").val(data.mobileNumber),""==data.mobileNumber?($(".addon-container .form-field-list li:nth-child(2)").hide(),$(".tab-content.hide-editable.mobile-number-main-container .mobile-number-border").hide(),$(".quickcontact-notify-subHeader").hide(),$(".hide-editable").bind("click",!1),localStorage.setItem("isEditDisabled",!0),$(".addOnCard-noMobile-msg").hide(),$(".primaryCard-noMobile-msg").show(),$(".email-edit-button").off("click"),$(".quickContactEditButton").css("background","none 0px 0px repeat scroll rgb(224, 224, 224)"),$(".quickContactEditButton").css("pointer-events","auto"),$(".headercontAddonCard").css("background","none 0px 0px repeat scroll rgb(224, 224, 224)"),""==data.emailAddress&&$(".addon-container .form-field-list li:first-child").hide()):($(".hide-editable").bind("click",!0),localStorage.setItem("isEditDisabled",!1),$(".addOnCard-noMobile-msg").hide(),$(".headercontAddonCard").css("background","none"))):"S"!=data.cardType&&"A"!=data.cardType||"true"!=localStorage.getItem("isEditDisabled")?"S"!=data.cardType&&"A"!=data.cardType||"false"!=localStorage.getItem("isEditDisabled")||($(".addon-container .form-field-list li").show(),$(".primaryCard-noMobile-msg").hide(),$(".validate-btn").hide(),$(".updateVerifyJourney .verify-block a").hide()):($(".addon-container .form-field-list li").show(),$(".primaryCard-noMobile-msg").hide(),$(".addOnCard-noMobile-msg").show(),$(".validate-btn").hide(),$(".updateVerifyJourney .verify-block a").hide()),("A"==data.cardType||"S"==data.cardType)&&($("#emailAddress ").val(""),$(".myprofile-addonDisText").css("display","block"),$("#primary-EmailId").val(data.emailAddress),$("#primary-MobileNumber").val(data.mobileNumber),$(".validate-btn").hide(),$(".updateVerifyJourney .verify-block a").hide())},error:function(){}})}function loadChangeProfileData(){var href="/creditcards/app/myprofile/add-on-quick-contact-details-page",selectedIndex=0,changedUserEmailId=$("#changedUserEmailId").val(),changedUserMobileNumber=$("#changedUserMobileNumber").val();$.ajax({url:href,type:"POST",data:{selectedCardIndex:selectedIndex},overlayTarget:$(".main"),success:function(data){data=dataDecryptionAES(data,""),data=$.parseJSON(data),$(".headercontAddonCard").css("pointer-events","auto"),$(".headercontAddonCard h3").text("Add-On "+data.cardType),$(".addon-emailId").text(data.maskedEmailAddress),$(".addon-mobileNo").text("+91"+data.maskedMobileNumber),$("#edit-addon-mobileNumber").val(null!=changedUserMobileNumber&&""!=changedUserMobileNumber?changedUserMobileNumber:data.mobileNumber),$("#edit-addon-emailAddress").val(null!=changedUserEmailId&&""!=changedUserEmailId?changedUserEmailId:data.emailAddress),$("#addon-cardType").val(data.cardType),$("#addon-cardNo").val(data.cardNo),$("#cardType").val(data.cardType),"P"==data.cardType?""==data.mobileNumber?($(".addon-container .form-field-list li:nth-child(2)").hide(),$(".tab-content.hide-editable.mobile-number-main-container .mobile-number-border").hide(),$(".quickcontact-notify-subHeader").hide(),$(".hide-editable").bind("click",!1),localStorage.setItem("isEditDisabled",!0),$(".headercontAddonCard").css("background","none 0px 0px repeat scroll rgb(224, 224, 224)"),$(".addOnCard-noMobile-msg").hide(),$(".primaryCard-noMobile-msg").show(),$(".email-edit-button").off("click"),$(".quickContactEditButton").css("background","none 0px 0px repeat scroll rgb(224, 224, 224)"),$(".quickContactEditButton").css("pointer-events","auto"),""==data.emailAddress&&$(".addon-container .form-field-list li:first-child").hide()):($(".hide-editable").bind("click",!0),localStorage.setItem("isEditDisabled",!1),$(".addOnCard-noMobile-msg").hide(),$(".headercontAddonCard").css("background","none")):"S"!=data.cardType&&"A"!=data.cardType||"true"!=localStorage.getItem("isEditDisabled")?"S"!=data.cardType&&"A"!=data.cardType||"false"!=localStorage.getItem("isEditDisabled")||($(".addon-container .form-field-list li").show(),$(".primaryCard-noMobile-msg").hide()):($(".addon-container .form-field-list li").show(),$(".primaryCard-noMobile-msg").hide(),$(".addOnCard-noMobile-msg").show())},error:function(){}})}function wrongOTPFunction(){$(".verifyNote").css("display","none");var isVisibleVerifyButton=$("#isVisibleVerifyButton").val(),isEmailVerifyElligible=$("#isEmailVerifyElligible").val(),emailField=$("#primary-EmailId").val(),cardType=$("#addon-cardType").val();"N"==isVisibleVerifyButton&&"true"==isEmailVerifyElligible&&""!=emailField&&"P"==cardType?$(".validate-btn").show():$(".validate-btn").hide(),"email"==$("#changedFieldName").val()?($(".email-edit-button").hide(),$(".mobile-edit-button").show(),$(".validate-btn").css(viewport.width<768?{"padding-top":"0px","padding-right":"10px",right:"200px",top:"-34px"}:{"padding-top":"10px","padding-right":"98px"})):"mobile"==$("#changedFieldName").val()?($(".email-edit-button").show(),$(".mobile-edit-button").hide(),$(".validate-btn").css(viewport.width<768?{"padding-top":"0px","padding-right":"10px",right:"80px",top:"8px"}:{"padding-top":"0px","padding-right":"10px"})):($(".mobile-number-main-container").show(),$(".email-edit-button").show(),$(".mobile-edit-button").show(),$(".addon-emailId").hide(),$(".mobile-number-main-container").show(),$(".email-id-main-container").hide(),$("#unmasked-primary-emailId").show()),$("select.fancy").fancySelect(),$(".fancy.addOn-dropbox.fancified").parent().find(".trigger").css("pointer-events","none"),$(".tab-content.primarycard-edit-container.show-editable").show(),$(".otp-list.generate-otp-tab").hide(),$(".my-profile #quick-contact-tab .tab-content.show-editable .form-field-list .field-wrap #submit-contact-details").css("display","block"),$(".addOn-dropbox").on("change",function(){$(".editable-contact-detail-container").find("#generate-otp-tab").hide(),$(".error-wrap").css("display","none"),$(".addon-container").css("display","block"),$(".primarycard-container").css("display","none"),$(".headercontPrimaryCard").css("display","none"),$(".addon-edit-container").hide(),$(".primarycard-edit-container").css("display","none"),$(".addon-edit-button").css("display","block"),$(".headercontAddonCard").css("display","block"),$(".headercontAddonCard .edit-button").css("display","block");var href=$(this).attr("data-href"),selectedIndex=$(this)[0].selectedIndex||0;$("input[name=selectedCardIndex]").val(selectedIndex),loadAddOnChange(href,selectedIndex),$(".editable-contact-detail-container #resend-otp-tab").hide()}),$(".headercontAddonCard").on("click",function(){editContactDetail()});var tempCardType=$("#addon-cardType").val(),tempCardNo=$("#addon-cardNo").val(),submittedCardType=$("#submittedCardType").val(),submittedCardNo=$("#submitedCardNo").val();0==tempCardType.length&&$("#addon-cardType").val(submittedCardType),0==tempCardNo.length&&$("#addon-cardNo").val(submittedCardNo),viewport.width<768?($(".tooltip-primary-mobile").hide(),$(".tooltip-primary-email").hide(),$(".tooltip-addon-mobile").hide(),$(".tooltip-addon-email").hide()):"P"==$("#addon-cardType").val()?($(".tooltip-primary-email").show(),$(".tooltip-addon-email").hide(),$(".tooltip-primary-mobile").show(),$(".tooltip-addon-mobile").hide(),$(".myprofile-addonDisText").hide()):("S"==$("#addon-cardType").val()||"A"==$("#addon-cardType").val())&&($(".tooltip-primary-email").hide(),$(".tooltip-addon-email").show(),$(".tooltip-primary-mobile").hide(),$(".tooltip-addon-mobile").show(),$(".myprofile-addonDisText").show())}function submitOtpPage(){if(""==$("#otp").val())return $("#otp").parent().find("label.valid").remove(),$("#otp").addClass("error"),$("#otp").after('<label for="otpNumber" class="error"> </label>'),!1;$("#otp").parent().find("label.error").remove(),$("#otp").removeClass("error"),$("#otp").after('<label for="otpNumber" class="valid" style="width:20px"> </label>');var addonEmail=$("#edit-addon-emailAddress").val(),addonMobile=$("#edit-addon-mobileNumber").val(),tempCardType=($("#emailAddress").val(),$("#mobileNumber").val(),$("#addon-cardType").val()),tempCardNo=$("#addon-cardNo").val(),submittedCardType=$("#submittedCardType").val(),submittedCardNo=$("#submitedCardNo").val();if(0==tempCardType.length&&$("#addon-cardType").val(submittedCardType),0==tempCardNo.length&&$("#addon-cardNo").val(submittedCardNo),null==$("#quick-contact-tab").find(".top-error").html()&&($(".tab-content.addon-edit-container.show-editable").css("display","none"),$("#emailAddress").val(addonEmail),$("#mobileNumber").val(addonMobile)),viewport.width<768?($(".tooltip-primary-mobile").hide(),$(".tooltip-primary-email").hide(),$(".tooltip-addon-mobile").hide(),$(".tooltip-addon-email").hide()):"P"==$("#addon-cardType").val()?($(".tooltip-primary-email").show(),$(".tooltip-addon-email").hide(),$(".tooltip-primary-mobile").show(),$(".tooltip-addon-mobile").hide(),$(".myprofile-addonDisText").hide()):("S"==$("#addon-cardType").val()||"A"==$("#addon-cardType").val())&&($(".tooltip-primary-email").hide(),$(".tooltip-addon-email").show(),$(".tooltip-primary-mobile").hide(),$(".tooltip-addon-mobile").show(),$(".myprofile-addonDisText").show()),"P"==$("#addon-cardType").val()){$(".myprofile-addonDisText").hide();var email_temp=$("#emailAddress").val(),mobile_temp=$("#mobileNumber").val();if(""==$("#emailAddress").val()||""==$("#mobileNumber").val()){if(""==$("#emailAddress").val()){$("#emailAddress").parent().find("label").remove(),$(".tab-content.primarycard-edit-container.show-editable").show(),$("#emailAddress").addClass("error");var errorEmailLable='<label for="emailAddress" class="error"> </label>';return $("#emailAddress").after(errorEmailLable),!1}if(""==$("#mobileNumber").val()){$("#mobileNumber").parent().find("label").remove(),$(".tab-content.primarycard-edit-container.show-editable").show(),$("#mobileNumber").addClass("error");var errorMobileLabel='<label for="mobileNumber" class="error"> </label>';return $("#mobileNumber").after(errorMobileLabel),!1}$("#emailAddress").parent().find("label").remove(),$("#mobileNumber").parent().find("label").remove(),$(".tab-content.primarycard-edit-container.show-editable").show(),$("#emailAddress").addClass("error"),$("#mobileNumber").addClass("error");var errorEmailLable='<label for="emailAddress" class="error"> </label>';$("#mobileNumber").after(errorEmailLable);var errorMobileLabel='<label for="mobileNumber" class="error"> </label>';return $("#mobileNumber").after(errorMobileLabel),!1}if(!callPrimaryEmailFormat(email_temp)||!callPrimaryMobileFormat(mobile_temp)){if(!callPrimaryEmailFormat(email_temp)){$("#emailAddress").parent().find("label").remove(),$("#emailAddress").addClass("error");var errorEmailLable='<label for="emailAddress" class="error"> </label>';$("#emailAddress").after(errorEmailLable),$(".tab-content.primarycard-edit-container.show-editable").show()}if(!callPrimaryMobileFormat(mobile_temp)){$("#mobileNumber").parent().find("label").remove();var errorMobileLabel='<label for="mobileNumber" class="error"> </label>';$("#mobileNumber").after(errorMobileLabel),$(".tab-content.primarycard-edit-container.show-editable").show()}return!1}var validEmailLable='<label for="emailAddress" class="valid"> </label>';$("#emailAddress").after(validEmailLable);var validMobileLabel='<label for="emailAddress" class="valid"> </label>';$("#mobileNumber").after(validMobileLabel),wrongOTPFunction(),$("#contact-update-form").submit()}else if("S"==$("#addon-cardType").val()||"A"==$("#addon-cardType").val()){$(".myprofile-addonDisText").show();var email_temp=$("#emailAddress").val(),mobile_temp=$("#mobileNumber").val();if(!callAddOnEmailFormat(email_temp)||!callAddOnMobileFormat(mobile_temp)){if(!callAddOnEmailFormat(email_temp)){$("#emailAddress").parent().find("label").remove(),$("#emailAddress").addClass("error");var errorEmailLable='<label for="emailAddress" class="error"> </label>';$("#emailAddress").after(errorEmailLable),$(".tab-content.primarycard-edit-container.show-editable").show()}if(!callAddOnMobileFormat(mobile_temp)){$("#mobileNumber").parent().find("label").remove();var errorMobileLabel='<label for="mobileNumber" class="error"> </label>';$("#mobileNumber").after(errorMobileLabel),$(".tab-content.primarycard-edit-container.show-editable").show()}return!1}var validEmailLable='<label for="emailAddress" class="valid"> </label>';$("#emailAddress").after(validEmailLable);var validMobileLabel='<label for="mobileNumber" class="valid"> </label>';$("#mobileNumber").after(validMobileLabel),wrongOTPFunction(),$("#contact-update-form").submit()}}function showErrorMsg(){$(".verifyNote").css("display","none"),$(".quick-contact-page-header").show(),$(".email-edit-button, .mobile-edit-button").css({"pointer-events":"auto",cursor:"pointer",background:"none"}),$(".field-wrap.addon-card.dropbox-Block").show(),$(".editable-contact-detail-container .otp-list.resend-otp-quick").show(),$(".primary-card-edit-main-containter .otp-list.resend-otp-quick").show(),"email"==$("#changedFieldName").val()?($(".email-id-expanded-body").show(),$(".mobile-number-expanded-body").hide(),$(".mobile-number-main-container").show(),$(".email-id-main-container").hide(),$("#changedFieldName").val("email"),$(".primary-card-edit-main-containter .otp-list.generate-otp-tab").show(),mobEditContactDetail()):"verify_email"==$("#changedFieldName").val()?($(".email-id-expanded-body").hide(),$(".mobile-number-expanded-body").hide(),$(".mobile-number-main-container").show(),$(".email-id-main-container").show(),$("#changedFieldName").val("verify_email"),$(".email-edit-button").show(),$(".validate-btn").hide(),$(".mobile-edit-button").show(),$(".primary-card-edit-main-containter .otp-list.generate-otp-tab").show()):""==$("#isMobUpdateEligibleChk").html()?(console.log("isMobUpdateEligible true"),$(".addon-edit-container").css("display","block"),$("#MOB-editContainer-mobile").show(),$("#isMobUpdateEligibleChk").hide(),$(".addon-container").css("display","none"),$(".email-id-expanded-body").hide(),$(".mobile-number-expanded-body").show(),$(".mobile-number-main-container").hide(),$(".email-id-main-container").show(),$("#edit-addon-mobileNumber").removeAttr("disabled"),$(".primary-card-edit-main-containter .otp-list.generate-otp-tab").show(),"P"==$("#addon-cardType").val()?($(".tooltip.tooltip-w140.tooltip-primary-mobile").show(),$(".tooltip.tooltip-w140.tooltip-addon-mobile").hide()):($(".tooltip.tooltip-w140.tooltip-primary-mobile").hide(),$(".tooltip.tooltip-w140.tooltip-addon-mobile").show()),mobEditContactDetail()):(console.log("isMobUpdateEligible false"),$(".editable-contact-detail-container.mobile-number-border.mobile-number-expanded-body").show(),$(".tab-content.hide-editable.mobile-number-main-container").hide(),$("#edit-addon-mobileNumber").attr("disabled","disabled"),$(".generate-otp-tab").hide(),$(".email-id-main-container").show(),$(".email-id-expanded-body").hide(),$("#edit-addon-mobileNumber").parent().find(".tooltip").hide())}function callMobileWrongOtpExceed(){$(".email-id-main-container").show(),$(".email-id-expanded-body").hide(),$("#edit-addon-mobileNumber").attr("disabled","dissabled"),$(".mobile-number-expanded-body").show(),$(".mobile-number-main-container").hide(),$(".email-edit-button").show(),$(".validate-btn").show(),$(".mobile-edit-button").hide(),mobEditContactDetail(),$(".primary-card-edit-main-containter .otp-list.generate-otp-tab").show()}function callEmailWrongOtpExceed(){$(".email-id-main-container").hide(),$(".email-id-expanded-body").show(),$(".mobile-number-expanded-body").hide(),$(".mobile-number-main-container").show(),$("#edit-addon-emailAddress").attr("disabled","dissabled"),$(".email-edit-button").hide(),$(".validate-btn").hide(),$(".mobile-edit-button").show(),$("#changedFieldName").val("email"),$(".primary-card-edit-main-containter .otp-list.generate-otp-tab").show(),mobEditContactDetail()}function callOTPAttempExceed(){$("#edit-addon-mobileNumber").attr("disabled","dissabled"),$("#edit-addon-emailAddress").attr("disabled","dissabled"),$(".mobile-number-expanded-body").show(),$(".email-id-expanded-body").show(),$(".email-id-main-container").hide(),$(".mobile-number-main-container").hide(),$(".email-edit-button").hide(),$(".validate-btn").hide(),$(".mobile-edit-button").hide(),$(".primary-card-edit-main-containter #generate-otp-email-edit").attr("disabled","dissabled"),"P"==$("#addon-cardType").val()?($(".primary-otp-msg").show(),$(".addon-otp-msg").hide()):("S"==$("#addon-cardType").val()||"A"==$("#addon-cardType").val())&&($(".primary-otp-msg").hide(),$(".addon-otp-msg").show())}function restartContactChangeRequest(){$(".verifyNote").css("display","none"),$(".tab-content.hide-editable.addon-container").hide();var submittedCardType=$("#submittedCardType").val();$(".primary-card-edit-main-containter .otp-list.generate-otp-tab").show(),$(".primary-card-edit-main-containter #generate-otp-email-edit").attr("disabled","disabled"),$(".email-edit-button").hide(),$(".validate-btn").hide(),$(".mobile-edit-button").hide(),$(".addon-emailId").show(),$(".mobile-number-main-container").show(),$(".email-id-main-container").show(),$("#unmasked-primary-emailId").hide(),"P"==submittedCardType?"email"==$("#changedFieldName").val()?($(".primary-otp-msg").html("If your current registered mobile no. is operational, Generate OTP to update your email ID. The One Time Password (OTP) will be sent on your registered mobile number, and will be valid for either 10-min or one successful usage."),$(".addon-otp-msg").hide()):"mobile"==$("#changedFieldName").val()?($(".primary-otp-msg").html("If your current registered mobile no. is operational, Generate OTP to update your mobile number. The One Time Password (OTP) will be sent on your registered mobile number, and will be valid for either 10-min or one successful usage."),$(".addon-otp-msg").hide()):($(".primary-otp-msg").html("If your current registered mobile no. is operational, Generate OTP to verify your email ID. The One Time Password (OTP) will be sent on your registered mobile number, and will be valid for either 10-min or one successful usage."),$(".addon-otp-msg").hide()):("S"==submittedCardType||"A"==$("#addon-cardType").val())&&($(".primary-otp-msg").hide(),$(".addon-otp-msg").show(),$(".addon-otp-msg").html("Generate OTP to change email ID for add-on card. The OTP will be sent to the primary cardholder&#39;s registered mobile number. The OTP will be valid for 10 minutes or one successful usage."))}function editContactDetail(){$(".fancy.addOn-dropbox.fancified").parent().find(".trigger").css("pointer-events","none"),$(".headercontAddonCard").hide(),$(".addon-edit-container").css("display","block"),$(".addon-container").css("display","none"),$(".otp-list.resend-otp-quick").hide(),$(".otp-list.generate-otp-tab").show(),viewport.width<768?($(".tooltip-primary-mobile").hide(),$(".tooltip-primary-email").hide(),$(".tooltip-addon-mobile").hide(),$(".tooltip-addon-email").hide()):"P"==$("#addon-cardType").val()?($(".tooltip-primary-email").show(),$(".tooltip-addon-email").hide(),$(".tooltip-primary-mobile").show(),$(".tooltip-addon-mobile").hide()):("S"==$("#addon-cardType").val()||"A"==$("#addon-cardType").val())&&($(".tooltip-primary-email").hide(),$(".tooltip-addon-email").show(),$(".tooltip-primary-mobile").hide(),$(".tooltip-addon-mobile").show()),"P"==$("#addon-cardType").val()?($(".primary-otp-msg").show(),$(".addon-otp-msg").hide()):("S"==$("#addon-cardType").val()||"A"==$("#addon-cardType").val())&&($(".primary-otp-msg").hide(),$(".addon-otp-msg").show())}function resetDropdownIndex(){$("#quick-contact-tab .fancy-select .options li").removeAttr("class");var selectedIndexValue=parseInt($("#selectedIndex").val());$("#quick-contact-tab .fancy-select .options>li:eq("+selectedIndexValue+")").attr("class","selected");var selectedIndexLabel=$("#quick-contact-tab .fancy-select .options .selected").text();$("#quick-contact-tab .fancy-select .trigger").text(selectedIndexLabel)}function hideOtpField(){$(".quick-contact-page-header").hide(),$(".field-wrap.addon-card.dropbox-Block").hide(),$(".tab-content.hide-editable.addon-container").hide(),$(".editable-contact-detail-container .otp-list.resend-otp-quick").hide(),$(".primary-card-edit-main-containter .otp-list.resend-otp-quick").hide()}function callPrimaryEmailFormat(email_temp){$("#edit-addon-emailAddress").parent().find("label").remove();var result=/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\_`{\|}]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\_`{\|}]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]{2,}|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/i.test(email_temp);if(1==result){var validEmailLable='<label for="emailAddress" class="valid"> </label>';return $("#edit-addon-emailAddress").after(validEmailLable),!0}$("#edit-addon-emailAddress").addClass("error");var errorEmailLable='<label for="emailAddress" class="error"> </label>';return $("#edit-addon-emailAddress").after(errorEmailLable),!1}function callPrimaryMobileFormat(mobile_temp){if($("#edit-addon-mobileNumber").parent().find("label").remove(),!mobile_temp.match(/^(\+\d{1,3}[- ]?)?\d{10}$/)||mobile_temp.match(/0{5,}/)||9!=mobile_temp[0]&&8!=mobile_temp[0]&&7!=mobile_temp[0]&&6!=mobile_temp[0]&&5!=mobile_temp[0]&&4!=mobile_temp[0]&&3!=mobile_temp[0]){$("#edit-addon-mobileNumber").addClass("error");var errorMobileLabel='<label for="mobileNumber" class="error"> </label>';return $("#edit-addon-mobileNumber").after(errorMobileLabel),!1}var validMobileLabel='<label for="mobileNumber" class="valid"> </label>';return $("#edit-addon-mobileNumber").after(validMobileLabel),!0}function callAddOnEmailFormat(email_temp){if($("#edit-addon-emailAddress").parent().find("label").remove(),""==email_temp){var validEmailLable='<label for="emailAddress" class="valid"> </label>';return $("#edit-addon-emailAddress").after(validEmailLable),!0}var result=/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\_`{\|}]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\_`{\|}]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]{2,}|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/i.test(email_temp);if(1==result){var validEmailLable='<label for="emailAddress" class="valid"> </label>';return $("#edit-addon-emailAddress").after(validEmailLable),!0}$("#edit-addon-emailAddress").addClass("error");var errorEmailLable='<label for="emailAddress" class="error"> </label>';return $("#edit-addon-emailAddress").after(errorEmailLable),!1}function callAddOnMobileFormat(mobile_temp){if($("#edit-addon-mobileNumber").parent().find("label").remove(),mobile_temp.match(/^(\+\d{1,3}[- ]?)?\d{10}$/)&&!mobile_temp.match(/0{5,}/)&&(9==mobile_temp[0]||8==mobile_temp[0]||7==mobile_temp[0]||6==mobile_temp[0]||5==mobile_temp[0]||4==mobile_temp[0]||3==mobile_temp[0])||""==mobile_temp){var validMobileLabel='<label for="mobileNumber" class="valid"> </label>';return $("#edit-addon-mobileNumber").after(validMobileLabel),!0}$("#edit-addon-mobileNumber").addClass("error");var errorMobileLabel='<label for="mobileNumber" class="error"> </label>';return $("#edit-addon-mobileNumber").after(errorMobileLabel),!1}function changeAddonField(){$("#edit-addon-emailAddress").on("change",function(){var val=$(this).val();$("#emailAddress").val(val)}),$("#edit-addon-mobileNumber").on("change",function(){var val=$(this).val();$("#mobileNumber").val(val)}),$("#emailAddress").on("change",function(){var val=$(this).val();$("#edit-addon-emailAddress").val(val)}),$("#mobileNumber").on("change",function(){var val=$(this).val();$("#edit-addon-mobileNumber").val(val)})}function loadMoreInteractions(){var interactionCount=$(".webform-interaction-details").find(".interaction-container").length,interaction="",interactionDetailsJson=$("#interactionDetailsJSON").data("json"),lastShownIndex=0;$.each(interactionDetailsJson,function(key,data){key>=interactionCount&&interactionCount+10>key&&!$.isEmptyObject(data)&&(interaction="<article class='interaction-container' id='"+data.interactionId+"' readFlag='"+data.markAsRead+"' data-index='"+key+"'>",interaction+="<div class='interaction-header'>										<div class='customerName'><span>From : </span>"+data.fromAddress+"</div>										<div class='interaction-date'>"+data.interactionTimeToRespond+"<span></span></div>									</div>									<div class='interaction-content'>"+data.interactionText+"</div>									<a href='javascript:void(0);' class='show-more-link'>Show More</a>",null!=data.attachment&&void 0!=data.attachment&&""!=data.attachment&&(null!=data.attachment.fileName||void 0!=data.attachment.fileName)&&(interaction+="<div class='attachment-container' data-id='"+data.attachment[i].attachmentId+"'>					<span class='attach-name' data-fname='"+data.attachment[i].fileName+"' data-ext='"+data.attachment[i].fileExtension+"'>"+data.attachment[i].fileName+"."+data.attachment[i].fileExtension+"</span>					<a href='javascript:void(0);' target='_blank' class='attach-icon'></a>					</div>"),interaction+="</article>",lastShownIndex=key+1),$(".webform-interaction-details").append(interaction),interaction=""}),$(".interaction-header").on("click",function(e){var latestDiv=$(this).parent().attr("id");if($(this).closest(".interaction-container").hasClass("expanded"))$(this).closest(".interaction-container").removeClass("expanded show-more");else{$(this).closest(".interaction-container").addClass("expanded");var cntnr=$("#"+latestDiv).find(".interaction-content"),height=cntnr.height();if(height>112?$(this).parent().find(".show-more-link").show():$(this).parent().find(".show-more-link").hide(),"N"==$(this).closest(".interaction-container").attr("readflag")){var interactionId=$(this).closest(".interaction-container").attr("id");callMarkAsRead(interactionId)}}var interactionId=$(this).closest(".interaction-container").attr("id");e.stopImmediatePropagation()}),$(".webform-interaction-details").find(".interaction-container.expanded").each(function(){if(!$(this).hasClass("show-more")){var height=($(this).find(".interaction-content"),$(this).find(".interaction-content").height());height>112?$(this).find(".show-more-link").show():$(this).find(".show-more-link").hide()}}),$(".interaction-container").on("click",".show-more-link",function(){$(this).closest(".interaction-container").addClass("expanded show-more")}),interactionDetailsJson.length==lastShownIndex?$(".load-more-list").hide():$(".load-more-list").show()}function showWebformEscalate(){var loaderHtml='<div class="overlay-loader"></div>';$("body").append(loaderHtml),$(".webform-attach-btn").removeClass("dissableAttach");var tmailBox,tSubject,cName,cEmail,interactionId=$("#interactionId").text().trim(),interactionDetailsJson=$("#interactionDetailsJSON").data("json"),eLevel="",escalationLevel=$("#escalationLevel_id_for_escalation").val(),threadMailBox=$("#mailBox_id_for_escalation").val(),threadMailBoxId=$("#mailBoxId_id_for_escalation").val();$.each(interactionDetailsJson,function(key,data){interactionId==data.interactionId&&(tmailBox=data.mailBox,tSubject=data.subject,cName=data.customerName,cEmail=data.custEmailId,eLevel=data.escalationLevel),$("#webform-escalate-form").find('input:hidden[name="mailBox"]').val(tmailBox)}),$.ajax({type:"GET",url:"/creditcards/app/webform/webform-escalation-eligibility",data:{threadID:interactionId,threadMailBox:threadMailBox,threadMailBoxId:threadMailBoxId,threadSubject:tSubject,customerName:cName,custEmailId:cEmail,escalationLevel:escalationLevel},success:function(response){var result=JSON.parse(response);$(".webform-interaction-container.webform-interaction-reply").hide(),void 0!=result.threadID?"Y"==result.priority?(callEscalationContainer(result),$("#webform-escalate-form").find('input:hidden[name="messageFlag"]').val(result.messageFlag)):"N"==result.priority?(callEscalationContainer(result),$("#webform-escalate-form").find('input:hidden[name="messageFlag"]').val(result.messageFlag)):(null==result.priority||""==result.priority)&&($(".webform-interaction-container.webform-escalate-failurMsg").show(),$("#nonEligible-ErrorMsg").show(),$("#noThread-ErrorMsg").hide()):($(".webform-interaction-container.webform-escalate-failurMsg").show(),$("#nonEligible-ErrorMsg").hide(),$("#noThread-ErrorMsg").show())
},complete:function(){$(".overlay-loader").exists()?$(".overlay-loader").remove():!0}})}function showLoadMoreBtn(){var totalInboxList=$(".inbox-interaction").length,visibleInboxLength=$(".showInteraction").length;totalInboxList>visibleInboxLength?$(".load-more-wrap.inbox-list-load").show():($(".load-more-wrap.inbox-list-load").hide(),$(".webform-inbox-content").css("margin-bottom","20px"))}function callMarkAsRead(interactionId){var href="/creditcards/app/webform/webform-update_unread_flag",interactionId=interactionId;$.ajax({url:href,type:"POST",dataType:"json",data:{interactionID:interactionId},success:function(data){1==data&&$(".interaction-container.expanded[id='"+interactionId+"']").attr("readFlag","Y")},error:function(){}})}function callEscalationContainer(result){var result=result,escalationLevel=parseInt(result.escalatedLevel)+1;$("#escalatedMailBox").html(1==escalationLevel?"Reported to "+result.escalatedMailBoxId:"Escalation to "+result.escalatedMailBox);var tooltipMessages=[["A request should be escalated to the Nodal Officer if it is not resolved by the Customer Care team within 1 days","A request should be escalated to the Nodal Officer if it is not resolved by the Customer Care team within 1 days"],["A request should be escalated to the Nodal Officer if it is not resolved by the Customer Care team within 1 days","A request should be escalated to the Principal Nodal Officer if it is not resolved by the Nodal Officer within 5 working days"],["A request should be escalated to the Principal Nodal Officer if it is not resolved by the Nodal Officer within 5 working days","A request should be escalated to the Customer Service Head if it is not resolved by the Customer Service Head within 3 working days"],["A request should be escalated to the Customer Service Head if it is not resolved by the Principal Nodal Officer within 3 working days","A request should be escalated to the Customer Service Head if it is not resolved by the Principal Nodal Officer within 2 working days"]];$("#escalationLevel1TooltipMsg").html(tooltipMessages[escalationLevel-1][0]),$("#escalationLevel2TooltipMsg").html(tooltipMessages[escalationLevel-1][1]),$(".accordian-tick").attr("src",$(".accordian-tick").attr("src")+"escalation-"+escalationLevel+".png"),$("#escalatedLevel").html("L"+escalationLevel),$("#escalatedLevel").removeClass("webform-header-span"),$("#escalatedLevel").addClass("webform-header-span-"+escalationLevel),$("#toBeEscalatedMailBox").html("Escalation to "+result.displayMailBox),$("#displayMailBox").val(result.displayMailBox),$("#wfEscThreadId").html(result.threadID),$("#wfEscCustomerName").html(result.customerName),$("#wfEscCustEmailId").html(result.custEmailId),$("#wfEscCustEmailId").prop("href","mailto:"+result.custEmailId),$("#wfEscThreadSubject").html(result.threadSubject),$("#webform-escalate-form").find('input:hidden[name="mailBox"]').val(result.toBeEscalatedMailBox),$("#webform-escalate-form").find('input:hidden[name="mailBoxId"]').val(result.toBeEscalatedMailBoxId),$("#webform-escalate-form").find('input:hidden[name="priority"]').val(result.priority),$(".webform-interaction-container.webform-escalate-container").show()}function callAttachFile(){var fileCount,count=$(".file-upload").length+1,file_format_error_msg="This file type is not valid. It should be a pdf, jpg, tiff, png or gif file only.",file_size_error_msg="The upload exceeds the minimum size limit of 1KB or the maximum size limit of 5MB.";if(3>=count)for(fileCount=1;3>=fileCount;fileCount++){var upload_blockClass=".upload-block-"+fileCount;if(!($(upload_blockClass).length>0)){var attachfield='<div class="file-upload upload-block-'+fileCount+'"><input type="text" name="attach-file'+fileCount+'" class="webform-file-name" value="" id="webform-attach-file'+fileCount+'" readonly onclick="reAttach(this.id);"><input type="file" class="webform-file-field" id="webformfield'+fileCount+'" name="Attached-File'+fileCount+'"><span class="removeAttachFile" id="edit-file'+fileCount+'">X</span></div><div class="webform-file-error" style="display:none;"><div class="webform-format-error">'+file_format_error_msg+'</div><div class="webform-fileSize-error">'+file_size_error_msg+"</div></div>";$(".webform-file-container").find(".composeAttachBtn").before(attachfield),resizeAttachField();var attachFieldId="#webformfield"+fileCount;$(attachFieldId).click();break}}3==count&&($(".webform-attach-btn").addClass("dissableAttach"),$(".icon.tooltip.webformtooltip").css("display","none"))}function reAttach(id){if(""==$("#"+id).val()){$("#"+id).parent().find(".webform-file-field").click();var maxFileSize=parseInt($("#webform-max-file-size").val()),$ele=$("#webform-upload-form");isFileUploadAcceptable($ele,maxFileSize)||(ResetWebformFileSizeError(),$(".webform-file-container").find(".file-size-error-webform-remove").addClass("file-size-error-webform").removeClass("file-size-error-webform-remove"),$(".webform-file-container").find(".file-size-error-webform").find(".webform-file-error").css("visibility","visible").find(".webform-fileSize-error").css("display","block").siblings(".webform-format-error").css("display","none"))}}function reAttachEscalate(id){if(""==$("#"+id).val()){$("#"+id).parent().find(".webform-file-field").click();var maxFileSize=parseInt($("#webform-max-file-size").val()),$ele=$("#webform-upload-form");isFileUploadAcceptable($ele,maxFileSize)||(ResetWebformEscalateFileSizeError(),$(".webform-file-container").find(".file-size-error-webform-remove").addClass("file-size-error-webform").removeClass("file-size-error-webform-remove"),$(".webform-file-container").find(".file-size-error-webform").find(".webform-file-error").css("visibility","visible").find(".webform-fileSize-error").css("display","block").siblings(".webform-format-error").css("display","none"))}}function addOnFileSizeLimit(){var fileSize=parseInt($("#addonKycFileSizeInfo").text().trim().match(/-?\d+\.?\d*/).toString()),fileSizeUnit=$("#addonKycFileSizeInfo").text().trim().match("[a-zA-Z]*$").toString();return byteConversion(fileSize,fileSizeUnit)}function ResetAddOnFileSizeError(){$("#request-addon-form").find(".Addon-kyc-container :input[type=file]").each(function(){"block"===$(this).closest(".Addon-kyc-upload-block").siblings(".Addon-kyc-file-error").find(".kyc-fileSize-error").css("display")&&($(this).closest(".Addon-kyc-upload-block").removeClass("Addon-invalid-kyc-field"),$(this).closest(".Addon-kyc-upload-block").siblings(".Addon-kyc-field-error").css("display","none"),$(this).closest(".Addon-kyc-upload-block").siblings(".Addon-kyc-file-error").css("visibility","hidden").find(".Addon-kyc-fileSize-error").css("display","none"))})}function AcceptableAddonFileUpload(){var totalsize=0;return $("#request-addon-form").find(".Addon-kyc-container :input[type=file]").each(function(){$(this).val().length>0&&-1!=$.inArray($(this).val().split(".").pop().toLowerCase(),addonKycAcceptableFileFormats)&&(totalsize+=$(this)[0].files[0].size)}),totalsize>addOnFileSizeLimit()?!1:!0}function isAddonKYCSubmitAllowed(){var $fields=$("#request-addon-form").find(".Addon-kyc-container :input[type=file]"),$emptyFields=$fields.filter(function(){return""===$.trim(this.value)});return!$emptyFields.length&&$(".Addon-invalid-kyc-field").length<=0}function fileFormatValidation(kycFieldName,kycFieldVal){if(kycFieldName.parent().css("border","1px solid #c1bfc0"),kycFieldName.next(".Addon-kyc-field-error").css("display","none"),kycFieldVal.length>0){var fileName=kycFieldVal.split("\\").pop(),fileExt=kycFieldVal.split(".").pop().toLowerCase();kycFieldName.siblings(".Addon-kyc-file-name").val(kycFieldVal),-1==$.inArray(fileExt,addonKycAcceptableFileFormats)?(kycFieldName.closest(".Addon-kyc-upload-block").addClass("Addon-invalid-kyc-field"),kycFieldName.closest(".Addon-kyc-upload-block").siblings(".Addon-kyc-field-error").css("display","inline-block"),kycFieldName.closest(".Addon-kyc-upload-block").siblings(".Addon-kyc-file-error").css("visibility","visible").find(".Addon-kyc-format-error").css("display","block").siblings(".Addon-kyc-fileSize-error").css("display","none")):AcceptableAddonFileUpload()?(ResetAddOnFileSizeError(),kycFieldName.closest(".Addon-kyc-upload-block").removeClass("Addon-invalid-kyc-field"),kycFieldName.closest(".Addon-kyc-upload-block").siblings(".Addon-kyc-field-error").css("display","none"),kycFieldName.closest(".Addon-kyc-upload-block").siblings(".Addon-kyc-file-error").css("visibility","hidden").find(".Addon-kyc-format-error").css("display","none").siblings(".Addon-kyc-fileSize-error").css("display","none")):(ResetAddOnFileSizeError(),kycFieldName.closest(".Addon-kyc-upload-block").addClass("Addon-invalid-kyc-field"),kycFieldName.closest(".Addon-kyc-upload-block").siblings(".Addon-kyc-field-error").css("display","inline-block"),kycFieldName.closest(".Addon-kyc-upload-block").siblings(".Addon-kyc-file-error").css("visibility","visible").find(".Addon-kyc-fileSize-error").css("display","block").siblings(".Addon-kyc-format-error").css("display","none")),kycFieldName.siblings(".Addon-kyc-browse-button").removeClass("Addon-kyc-btn").addClass("Addon-kyc-chng-file").text("");var fileNameWidth=kycFieldName.closest(".Addon-kyc-upload-block").width()-kycFieldName.siblings(".Addon-kyc-browse-button").width()-40;kycFieldName.siblings(".Addon-kyc-file-name").css("width",fileNameWidth),kycFieldName.siblings('input[type="hidden"]').attr("value",fileName)}else AcceptableAddonFileUpload()&&ResetAddOnFileSizeError(),kycFieldName.siblings(".Addon-kyc-file-name").val("").closest(".Addon-kyc-upload-block").removeClass("Addon-invalid-kyc-field").siblings(".Addon-kyc-field-error").css("display","none").siblings(".Addon-kyc-file-error").css("visibility","hidden").find(".Addon-kyc-format-error").css("display","none").siblings(".Addon-kyc-fileSize-error").css("display","none");$("#request-addon-form").find(".Addon-kyc-container :input[type=file]").each(function(){kycFieldVal.length>0&&kycFieldName[0].files[0].size>=addOnFileSizeLimit()&&-1!=$.inArray(kycFieldVal.split(".").pop().toLowerCase(),addonKycAcceptableFileFormats)&&(ResetAddOnFileSizeError(),kycFieldName.closest(".Addon-kyc-upload-block").addClass("Addon-invalid-kyc-field").siblings(".Addon-kyc-field-error").css("display","inline-block").siblings(".Addon-kyc-file-error").css("visibility","visible").find(".Addon-kyc-fileSize-error").css("display","block"))}),isAddonKYCSubmitAllowed()?$("#addonKyc-submit-button").removeClass("secondary addon-kyc-inactive-button").addClass("primary"):$("#addonKyc-submit-button").addClass("secondary addon-kyc-inactive-button").removeClass("primary")}function primeSubmitHandler(){$("#vistaraMemebershipSubscriptionForm").exists()&&((""==$("#firstName").val()||""==$("#lastName").val()||""==$("#mobileNo").val()||""==$("#city").val()||"No"==$("#isExistingMember").val()&&""==$("#emailId").val())&&$("#mandatoryFieldsErrorDisplay").show(),"Select a State"==$("#state").parent().find(".trigger").html().trim()?$("label[for=state]").next().css("border","1px solid red"):$("label[for=state]").next().css("border",""),"select"!=$("#state option:selected").val()||$("label[for=state]").exists()||$("#state").next().css("border","1px solid red")),$("#tridentMembership").exists()&&(""==$("#firstName").val()||""==$("#mobileNo").val()||""==$("#city").val()||"No"==$("#isExistingMember").val()&&""==$("#emailId").val())&&$("#mandatoryFieldsErrorDisplay").show(),"No"==$("#isExistingMember").val()&&""==$("#emailId").val()&&$("#mandatoryFieldsErrorDisplay").show(),"Select"==$("#salutation").parent().find(".trigger").html().trim()?$("#salutation").parent().find(".trigger").css("border","1px solid red"):$("#salutation").parent().find(".trigger").css("border",""),$(".fancy-checkbox").hasClass("checked")||$(".check-toggle").css("border","1px solid red")}function resendHBlockOTP(resendURL){$(".hblock-otp-msg").hide(),$(".error-wrap").find("h5.top-error").hide(),$(".myValidClass").hide(),$(".myErrorClass").hide(),$("#hblockOtp").val("");var passPhrase=randomStringGenerator(10,!0,!1),enchblockCardNo=dataEncryptionAES(hblockCardNo,passPhrase);$.ajax({type:"POST",url:resendURL,data:{suspiciousCardNum:enchblockCardNo,passPhrase:passPhrase},beforeSend:function(){var loaderHtml='<div class="overlay-loader"></div>';$("body").append(loaderHtml)},complete:function(){$("body").find("div.overlay-loader").remove()},success:function(response){if(response){var otpResp=JSON.parse(response);"success"===response.split("|")[0]?($("#resend-h-block-otp").removeClass("inactive-link"),$(".h-block-resend-otp-link").attr("disabled",!1),$("#hblock-otp-msg-failure").hide()):"resendNotAllowed"===response.split("|")[0]?(void 0!=response.split("|")[1]&&""!=response.split("|")[1]&&response.split("|")[1]?message=response.split("|")[1]:!0,$("#resend-h-block-otp").addClass("inactive-link"),$(".h-block-resend-otp-link").attr("disabled",!1),$("#hblock-otp-resend-not-allowed").html(otpResp.otpResponse.message).show()):0==otpResp.otpResponse.resendEnabled?($("#resend-h-block-otp").addClass("inactive-link"),$(".h-block-resend-otp-link").attr("disabled","disabled"),$("#hblock-otp-resend-not-allowed").html(otpResp.otpResponse.message).show()):($("#resend-h-block-otp").removeClass("inactive-link"),$(".h-block-resend-otp-link").attr("disabled",!1))}else $("#resend-h-block-otp").removeClass("inactive-link"),$(".h-block-resend-otp-link").attr("disabled",!1)},error:function(){removeAjaxLoader()}})}function confirmCardActivation(hblockTransactionsArray){var blockCount=0,activeCount=0;$(".text-box8").each(function(){"rgb(255, 0, 0)"==$(this).css("border-right-color")?blockCount++:"rgb(17, 139, 1)"==$(this).css("border-right-color")&&activeCount++}),$("#h-block-card-activation .selectedTransactions").siblings(".text-box16").remove(),$(".text-box8").length==blockCount?($(".inbox-box4 .text4").text("Block your Card"),$(".block-card-trans").text("All transactions have been marked as 'Not done by you'"),$(".block-card-button").val("Block Card"),$(".activate-card-line1").hide(),$(".block-card-line2, .block-card-line1").show(),$(".h-block-otp-box").css("display","none"),$("#h-block-card-activation").attr("action","/creditcards/app/hblock/blockCard"),createSelectedTransactionRows(hblockTransactionsArray,"N")):$(".text-box8").length==activeCount?($(".inbox-box4 .text4").text("Activate your Card"),$(".block-card-trans").text("All transactions have been marked as 'done by you'"),$(".block-card-line2, .block-card-line1").hide(),$(".h-block-otp-box").css("display","block"),$(".block-card-button").css("display","none"),$(".activate-card-line1").show(),$(".block-card-button").val("Activate Card"),$("#h-block-card-activation").attr("action","/creditcards/app/hblock/activateCard"),createSelectedTransactionRows(hblockTransactionsArray,"Y")):"true"==$("#otpAuthError").val()?($("html, body").animate({scrollTop:$(document).height()},"slow"),$(".inbox-box4 .text4").text("Activate your Card"),$(".block-card-trans").text("All transactions have been marked as 'done by you'"),$(".block-card-line2, .block-card-line1").hide(),$(".h-block-otp-box").css("display","none"),$(".block-card-button").css("display","block"),$(".h-block-otp-box").css("display","none"),$(".activate-card-line1").show(),$(".block-card-button").val("Activate Card"),$("#h-block-card-activation").attr("action","/creditcards/app/hblock/activateCard"),createSelectedTransactionRows(hblockTransactionsArray,"Y")):($(".inbox-box4 .text4").text("Block your Card"),$(".block-card-trans").text(blockCount+" transactions have been marked as 'Not done by you'"),$(".block-card-button").val("Block Card"),$(".activate-card-line1").hide(),$(".block-card-line2, .block-card-line1").show(),$("#h-block-card-activation").attr("action","/creditcards/app/hblock/blockCard"),createSelectedTransactionRows(hblockTransactionsArray,"N")),$(".reviewTransactionBlock").hide(),$(".inbox-box3 .text20").hide(),$(".card-activation-block").css("display","block"),$(".selecticon1").attr("src","/creditcards/resources/img/h-flow-tick.png"),$(".block-card-trans").removeClass("displayNone"),$(".downimg1").removeClass("displayNone")}function createJsonObject(hblockTransactionsArray,hblockCardNo){var jsonData=JSON.stringify([{suspiciousCardNumber:hblockCardNo,suspiciousTransactions:hblockTransactionsArray}]);$("#selectedTransactionArr").val(jsonData)}function createSelectedTransactionRows(hblockTransactionsArray,fraudFlag){var selectedtransactionField="";if(null!=hblockTransactionsArray&&void 0!=hblockTransactionsArray)for(var i=0;i<hblockTransactionsArray.length;i++)if(hblockTransactionsArray[i].fraudcontrolflag==fraudFlag){var amount=hblockTransactionsArray[i].suspiciousTransAmountSpent.toString(),amounts=[],formattedAmount=0;amount.indexOf(".")>-1?(amount=parseFloat(amount).toFixed(2),amounts=amount.toString().split("."),formattedAmount=parseInt(amounts[0]).toLocaleString("en-IN")+"."+amounts[1]):formattedAmount=parseInt(amount).toLocaleString("en-IN"),selectedtransactionField+="INR"==hblockTransactionsArray[i].currencyDescription?'<div class="text-box16"><span class="text11">'+hblockTransactionsArray[i].suspiciousTransDate+'</span> <span class="text12">'+hblockTransactionsArray[i].suspiciousTransDescription+'</span><span class="text13">'+formattedAmount+"</span></div>":'<div class="text-box16"><span class="text11">'+hblockTransactionsArray[i].suspiciousTransDate+'</span> <span class="text12">'+hblockTransactionsArray[i].suspiciousTransDescription+'</span><span class="text13">'+formattedAmount+"<b> ("+hblockTransactionsArray[i].currencyDescription+")</b></span></div>"}$("#h-block-card-activation .selectedTransactions").after(selectedtransactionField)}function cardActivationHandler(){if("/creditcards/app/hblock/blockCard"==$("#h-block-card-activation").attr("action"))HBlocksetAnalytics("Block Card");else{if(""==$("#hblockOtp").val()&&$("#hblockOtp").val().length<=6)return event.preventDefault(),$("body").find("div.overlay-loader").remove(),$(".validationOtpField").addClass("myErrorClass"),$(".validationOtpField").removeClass("myValidClass"),$("#hblockOtp").css("border","1px solid red"),!1;HBlocksetAnalytics("Activate Card")}var passphraseHblock=randomStringGenerator(10,!0,!1);return $("#selectedTransactionArr").val(dataEncryptionAES($("#selectedTransactionArr").val(),passphraseHblock)),$("#passphraseHblock").val(passphraseHblock),$("#sendCardNum").val(dataEncryptionAES($("#sendCardNum").val(),passphraseHblock)),$("#verifyJsonValue").val(dataEncryptionAES($("#verifyJsonValue").val(),passphraseHblock)),!0}function validOtp(){6==$("#hblockOtp").val().length&&null!=$("#hblockOtp").val().length&&($(".validationOtpField").addClass("myValidClass"),$("#hblockOtp").css("border","1px solid #cdcbcb"),$(".validationOtpFiled").removeClass("myErrorClass"))}function validationOtp(){($("#hblockOtp").val().length<=5||""==$("#hblockOtp").val().length)&&($(".validationOtpField").removeClass("myErrorClass"),$(".validationOtpField").removeClass("myValidClass"))}function validationOtpValue(){($("#hblockOtp").val().length<=5||""==$("#hblockOtp").val().length)&&($(".validationOtpField").removeClass("myErrorClass"),$(".validationOtpField").removeClass("myValidClass"))}function callDynamicTooltip(tooltipData,fieldId){var addTooltip='<article class="tooltip tooltip-w140 tooltip-primary-email">					<p>'+tooltipData+"</p></article>",id="#"+fieldId;$(id).find(".field-wrap").append(addTooltip),$(id).find(".field-wrap").append('<span class="webformMobileTooltip">'+tooltipData+"</span>")}function validateProactiveAmountField(el,evt){var charCode=evt.which?evt.which:event.keyCode,val=el.value.concat(String.fromCharCode(charCode)),res=val.match(/\d+\.{0,1}\d{0,2}/);return 8===charCode?!0:res!=val?!1:!0}function getSelectionStart(o){if(o.createTextRange){var r=document.selection.createRange().duplicate();return r.moveEnd("character",o.value.length),""==r.text?o.value.length:o.value.lastIndexOf(r.text)}return o.selectionStart}function resizeAttachField(){$("#webform-dynmic-formfield").is(":empty")?($("#webform-write-section .webform-file-container .upload-block-1").css({margin:"0 0 1% 2%",width:"98%"}),$("#webform-write-section "),$("#webform-write-section .webform-file-container .upload-block-2").css({margin:"0 0 1% 2%",width:"98%"}),$("#webform-write-section .webform-file-container .upload-block-3").css({margin:"0 0 1% 2%",width:"98%"}),$("#webform-write-section .webform-file-container .webform-file-error").css("margin","0 0 2% 2%")):viewport.width<768?($(".webform-reply-container .webform-interaction-text").css({width:"89%","margin-left":"0"}),$(".webform-upload-form #webform-write-section .webform-file-container").css({"margin-left":"0",width:"90%"}),$(".webform-upload-form #webform-write-section .webform-file-container .upload-block-1, .webform-upload-form #webform-write-section .webform-file-container .upload-block-2, .webform-upload-form #webform-write-section .webform-file-container .upload-block-3").css({width:"88%",margin:"0 0 2%"}),$(".webform-file-container .composeAttachBtn").css("margin-left","0%")):($("#webform-write-section .webform-file-container .upload-block-1").css({margin:"0 0 1% 4%",width:"98%"}),$("#webform-write-section .webform-file-container .upload-block-2").css({margin:"0 0 1% 4%",width:"98%"}),$("#webform-write-section .webform-file-container .upload-block-3").css({margin:"0 0 1% 4%",width:"98%"}),$("#webform-write-section .webform-file-container .webform-file-error").css("margin","0 0 2% 4%"))}function submitAadharForm(){if(!$("#userEcardPassword").is(":visible")){var cardnumber1=$("#card-auth-form #card-number-1").val();$("#card-auth-form #card-number-1").val(encryptData(cardnumber1));var cardnumber2=$("#card-auth-form #card-number-2").val();$("#card-auth-form #card-number-2").val(encryptData(cardnumber2));var cardnumber3=$("#card-auth-form #card-number-3").val();$("#card-auth-form #card-number-3").val(encryptData(cardnumber3));var cardnumber4=$("#card-auth-form #card-number-4").val();$("#card-auth-form #card-number-4").val(encryptData(cardnumber4));var cardnumber5=$("#card-auth-form #card-number-single").val();$("#card-auth-form #cardNumber5").val(encryptData(cardnumber5));var dob=$("#card-auth-form #dob").val();if($("#card-auth-form #dob").val(encryptData(dob)),$("#card-auth-form #cvv-number").val()){var cvv_number=$("#card-auth-form #cvv-number").val();$("#card-auth-form #cvv-number").val(encryptData(cvv_number))}}$("#card-auth-form").submit()}function enableChequeField(){$("#disbursementMode").val("Cheque"),$("#checkInputFields").removeClass("hide"),$("#neftInputFields").addClass("hide"),$("#neftInputFields li").each(function(){$(this).find(".neft-input-box").attr("disabled","disabled"),$(this).find(".neft-txt-box").attr("disabled","disabled")}),$("#checkInputFields li").each(function(){$(this).find("input").removeAttr("disabled")}),$("#encashBankName").attr("name","bankName"),$("#emdBankName").attr("name","bankName"),$("#beneficiaryBankName").removeAttr("name")}function enableNeftField(){$("#disbursementMode").val("NEFT"),$("#checkInputFields").addClass("hide"),$("#neftInputFields").removeClass("hide"),$("#neftInputFields li").each(function(){$(this).find(".neft-input-box").removeAttr("disabled"),$(this).find(".neft-txt-box").removeAttr("disabled")}),$("#checkInputFields li").each(function(){$(this).find("input").attr("disabled","disabled")}),$("#beneficiaryBankName").attr("name","bankName"),$("#emdBankName").removeAttr("name"),$("#encashBankName").removeAttr("name")}function addValidFields(currentEle){$(currentEle).addClass("valid"),$(currentEle).removeClass("error"),$(currentEle).after('<label class="valid"></label>')}function addErrorFields(currentEle){$(currentEle).addClass("error"),$(currentEle).removeClass("valid"),$(currentEle).after('<label class="error"></label>')}function resetNeftChequeFeild(){$("#encash-form #term-condition-id").prop("checked",!1).parent().removeClass("checked"),$("#emd-form #term-condition-id").prop("checked",!1).parent().removeClass("checked"),$("#encash-form #confirm-button").attr("disabled",!0).removeClass("primary").addClass("secondary").addClass("disabled"),$("#emd-form  #confirm-button").attr("disabled",!0).removeClass("primary").addClass("secondary").addClass("disabled")}function selectFilteredList(currElemt){$("#neft-confirmBtn").css("pointer-events","auto");var currElemtId="#"+$(currElemt).find(".NeftBranchSelection").attr("id"),ifsc=$(currElemtId).parent().parent().parent().parent().find("#branchListIfsc").html(),bankName=$(currElemtId).parent().parent().parent().parent().find("#branchListBank").html(),branchName=$(currElemtId).parent().parent().parent().parent().find("#branchListBranch").html(),Addr=$(currElemtId).parent().parent().parent().parent().find("#branchListAddr").html();$("#neft-ifsc-field").val(ifsc),$("#neft-ifsc-field").after('<label class="valid"></label>'),$("#neft-bankDetail-field").val(bankName+", "+branchName+", "+Addr),$("#beneficiaryBankName").val(bankName)}function callDisplayFilteredList(){var index=0;$("#dynamicSerachList").find(".branchListTbl").each(function(){10>index?$(this).addClass("showListNeft"):!0,index++}),showNeftLoadBtn()}function showNeftLoadBtn(){var totalInboxList=$(".branchListTbl").length,totalPageLength=Math.ceil(totalInboxList/10),totalPage=("0"+totalPageLength).slice(-2),visibleInboxLength=$(".showListNeft").length,visiblePageLength=Math.floor(visibleInboxLength/10),visiblePage=("0"+visiblePageLength).slice(-2);totalInboxList>visibleInboxLength?($(".load-more-list.bank-detail-load").show(),$("#neft-load-more-text").html("("+visiblePage+" of "+totalPage+")")):$(".load-more-list.bank-detail-load").hide()}function calculateLimit(){var occupation_selected=$("#cli-level1-dropbox").val(),income=$("#income").val();$("#message-eligible").hide(),$("#message-not-eligible").hide(),$("#cli-l2-section .increase-details").hide(),$("#cli-upload-form #employment").val(occupation_selected),$("#cli-upload-form #salary").val(income),makeAjaxWithLoader({url:"/creditcards/app/benefits/CalculateAdhocCliLimit",type:"POST",data:{employment:occupation_selected,salary:income},success:function(data){if(console.log(data),$("#cli-l2-section").css("display","block"),$("#cli-l1-section").css("display","none"),$(".selected-l1").css("display","block"),$("#accordian-l1-tick").css("display","block"),$("#header-l1-span").css("display","none"),$(".cli-expand-l1-container").css("display","block"),$(".selected-l1").html("Monthly Income: Rs."+$("#income").val()),null==data||void 0==data||$.isEmptyObject(data)||""==data)$(".validation-message2").show(),$(".validation-message3").hide(),$("#message-not-eligible").hide(),$("#cli-l2-section .increase-details").hide(),$("#cli-l2-section .next-button").hide();else if(data.error)$(".validation-message3").show(),$(".validation-message2").hide(),$("#message-not-eligible").hide(),$("#cli-l2-section .increase-details").hide(),$("#cli-l2-section .next-button").hide();else if("N"==data.eligibilityFlag)$(".validation-message2").hide(),$(".validation-message3").hide(),$("#message-not-eligible").show(),$("#cli-l2-section .increase-details").hide(),$("#cli-l2-section .next-button").hide();else if("Y"==data.eligibilityFlag){var x1=data.currentCreditLimit,x2=data.newCreditLimit,x3=data.newCreditLimit-data.currentCreditLimit;x1=x1.toString();var lastThree=x1.substring(x1.length-3),otherNumbers=x1.substring(0,x1.length-3);""!=otherNumbers&&(lastThree=","+lastThree);var res1=otherNumbers.replace(/\B(?=(\d{2})+(?!\d))/g,",")+lastThree;x2=x2.toString();var lastThree=x2.substring(x2.length-3),otherNumbers=x2.substring(0,x2.length-3);""!=otherNumbers&&(lastThree=","+lastThree);var res2=otherNumbers.replace(/\B(?=(\d{2})+(?!\d))/g,",")+lastThree;x3=x3.toString();var lastThree=x3.substring(x3.length-3),otherNumbers=x3.substring(0,x3.length-3);""!=otherNumbers&&(lastThree=","+lastThree);var res3=otherNumbers.replace(/\B(?=(\d{2})+(?!\d))/g,",")+lastThree;$(".validation-message3").hide(),$(".validation-message2").hide(),$("#message-not-eligible").hide(),$("#message-eligible").show(),$("#cli-l2-section .next-button").show(),$("#cli-l2-section .increase-details").show(),$("#currentLimit").text(res1),$("#eligibleLimit").text(res2),$("#eligibleLimitDisc").text(res2),$("#cardname").text(data.cardDisplayName),$("#increasedLimit").text(res3);for(var options="",selectOptions="",i=0;i<data.docSetList.length;i++)options+='<li data-id="'+data.docSetList[i]+'" data-raw-value="'+data.docSetList[i]+'">'+data.docSetList[i]+"</li>",selectOptions+='<option data-id="'+data.docSetList[i]+'" data-raw-value="'+data.docSetList[i]+'">'+data.docSetList[i]+"</option>";$(".cli-l2-dropbox .options").html(options),$(".cli-l2-dropbox #cli-level2-dropbox").html(selectOptions)}else $("#cli-l1-section").css("display","block"),$("#cli-l2-section").css("display","none")},error:function(xhr,status,error){console.log("Error cli=="+status+"=="+error)}})}function agreeLimit(){$("#cli-l2-section").css("display","none"),$("#cli-l1-section").css("display","none"),$("#cli-docupload-section").css("display","block"),$(".cli-l3-section-wrapper").css("display","block"),$("#accordian-l2-tick").css("display","block"),$("#header-l2-span").css("display","none"),$(".cli-expand-l2-container").css("display","block"),$(".selected-l2").css("display","block"),$(".selected-l2").html("New Credit Limit: Rs."+$("#eligibleLimit").text())}function setPlaceholderValue(inputPlaceholder){""!=inputPlaceholder&&null!=inputPlaceholder&&("Enter your 16 digit Card Number"==inputPlaceholder&&($(".employeeIDField").unbind(),$(".search-box-input").removeClass("employeeIDField").addClass("cardNumberField"),input_credit_card($(".cardNumberField").get(0))),"Enter your Employee ID"==inputPlaceholder&&($(".cardNumberField").unbind(),$(".search-box-input").removeClass("cardNumberField").addClass("employeeIDField"),validateEmpIdField()))}function input_credit_card(input){var format_and_pos=function(char,backspace){var start=0,end=0,pos=0,separator=" ",value=input.value;char!==!1&&(start=input.selectionStart,end=input.selectionEnd,backspace&&start>0&&(start--,value[start]==separator&&start--),value=value.substring(0,start)+char+value.substring(end),pos=start+char.length);for(var d=0,dd=0,gi=0,newV="",groups=/^\D*3[47]/.test(value)?[4,6,5]:[4,4,4,4],i=0;i<value.length&&(/\D/.test(value[i])?start>i&&pos--:(d===groups[gi]&&(newV+=separator,d=0,gi++,start>=i&&pos++),newV+=value[i],d++,dd++),d!==groups[gi]||groups.length!==gi+1);i++);input.value=newV,char!==!1&&input.setSelectionRange(pos,pos)};$(document).off("keypress",".cardNumberField").on("keypress",".cardNumberField",function(e){var code=e.charCode||e.keyCode||e.which;if(9!==code&&(38>=code||code>=40)&&(!e.ctrlKey||99!==code&&118!==code)){e.preventDefault();var char=String.fromCharCode(code);if(/\D/.test(char)||this.selectionStart===this.selectionEnd&&this.value.replace(/\D/g,"").length>=(/^\D*3[47]/.test(this.value)?15:16))return!1;format_and_pos(char)}}),$(document).off("keydown",".cardNumberField").on("keydown",".cardNumberField",function(e){(8===e.keyCode||46===e.keyCode)&&(e.preventDefault(),format_and_pos("",this.selectionStart===this.selectionEnd))}),$(document).off("paste",".cardNumberField").on("paste",".cardNumberField",function(){setTimeout(function(){format_and_pos("")},50)}),viewport.width<768&&$(document).off("blur",".cardNumberField").on("blur",".cardNumberField",function(){format_and_pos(this,!1)})}function validateEmpIdField(){$("#search-query").keydown(function(e){if(e.shiftKey||e.ctrlKey||e.altKey)e.preventDefault();else{var key=e.keyCode;8==key||32==key||46==key||key>=35&&40>=key||key>=65&&90>=key||key>=48&&57>=key||key>=96&&105>=key||e.preventDefault()}})}function autologout(){setTimeout(function(){alertLogoutUser(),deleteTokenOnLogout(),logoutForm.submit(),setAnalyticsPost("Log Out"),sessionStorage.clear()},5e3)}function getFeedbcakData(){var href="/creditcards/feedback/questions";$.ajax({url:href,type:"GET",success:function(data){var jsonData=data;
return sessionStorage.setItem("eligibleFeed",jsonData.feedBackJSON.status),(0!==questionDetails.length||"failure"!==jsonData.feedBackJSON.status)&&(sessionStorage.setItem("resQuestionDetails",JSON.stringify(jsonData.feedBackJSON)),sessionStorage.setItem("rating_details",JSON.stringify(jsonData.feedBackJSON.rating))),questionDetails},error:function(){}})}function deleteTokenOnLogout(){var jwt=sessionStorage.getItem("jwt");void 0!=jwt&&null!==jwt&&""!=jwt&&$.ajax({xhrFields:{withCredentials:!0},url:"/api-gateway/uaa/oauth/revoke_token",method:"DELETE",beforeSend:function(xhr){xhr.setRequestHeader("X-AUTH-TOKEN-REMOVE",jwt)},success:function(){console.log("success")},error:function(){console.log("error")}})}function responseMessage(msg){$(".success-box").fadeIn(200),$(".success-box div.text-message-csat").html("Experience: "+msg+" ")}function showFullbody(){$("body").removeAttr("style")}function byteConv(){$(".question-content textarea").each(function(){$(this).on("keydown",function(){var valus=$(this).val();console.log(valus)})})}function getAlertData(){var buf=new Uint8Array(1),href="/creditcards/app/alertsnotifications/getAlertsForUser?c="+crypto.getRandomValues(buf),jwtToken=sessionStorage.getItem("jwt");$.ajax({url:href,type:"GET",headers:{jwtToken:jwtToken},success:function(AANData){if(""!=AANData&&"NO DATA FOUND"!=AANData&&"service failure"!=AANData){sessionStorage.setItem("AANData",JSON.stringify(AANData));var isCTASisplay,immediateActionFlagCount=0,unreadFlagCount=0;alertJson=JSON.parse(AANData),displayAlertList();for(var i=0;i<alertJson.alerts.length;i++){"New"==alertJson.alerts[i].section&&newAlertCount++,sessionStorage.setItem("newAlertCount",newAlertCount);var alertIdList=[];alertIdList.push(alertIdList),setAnalyticsaAlertList(alertJson.alerts[i].alert_id),1==alertJson.alerts[i].eligible&&"New"==alertJson.alerts[i].section&&0==alertJson.alerts[i].read&&"popup"!=alertJson.alerts[i].displayType&&(unreadFlagCount++,1==alertJson.alerts[i].critical&&(immediateActionFlagCount++,$(".dashbaord-balloon-Container p").css("display","block"))),0==alertJson.alerts[i].eligible&&"Earlier"==alertJson.alerts[i].section&&(isCTASisplay=!1)}sessionStorage.setItem("unreadFlagCount",unreadFlagCount),$(".dashbaord-balloon-Container h5").html("You have "+parseInt(sessionStorage.getItem("unreadFlagCount"))+" pending notifications."),$(".dashbaord-balloon-Container p").html(immediateActionFlagCount+" Notifications need your immediate attention."),$(".alert-unreadcount").html(parseInt(sessionStorage.getItem("unreadFlagCount"))>=0?parseInt(sessionStorage.getItem("unreadFlagCount")):0),0==parseInt(sessionStorage.getItem("unreadFlagCount"))&&0==immediateActionFlagCount?$(".dashbaord-balloon-Container").hide():"false"==sessionStorage.getItem("balloonEnableFlag")&&($("#new-alert-block .alert-container").length>0||$("#earlier-alert-block .alert-container").length>0)&&"true"==$(".checkAANEligibilty").val()&&($(".dashbaord-balloon-Container").fadeIn("slow",function(){$(".dashbaord-balloon-Container").delay(1e4).fadeOut()}),sessionStorage.setItem("balloonEnableFlag",!0))}else sessionStorage.removeItem("AANData");sessionStorage.removeItem("AANMultiAccCall")},error:function(){}})}function displayAlertList(){var isCTASisplay,addNewContent="",addEarlierContent="",tempData="",immediateActionFlagCount=0,CTA1="",CTA2="",CTA3="",alertImg="";if(alertJson=JSON.parse(JSON.parse(sessionStorage.getItem("AANData"))),""!=alertJson&&null!=alertJson&&void 0!=alertJson){for(var isCTASisplay,addNewContent="",addEarlierContent="",CTA1="",CTA2="",CTA3="",i=0;i<alertJson.alerts.length;i++)if(0==alertJson.alerts[i].eligible&&"Earlier"==alertJson.alerts[i].section&&(isCTASisplay=!1),1==alertJson.alerts[i].critical&&immediateActionFlagCount++,alertDropdownCount>i){var CTA1_lable="'"+alertJson.alerts[i].cta1.cta_lable+"'",CTA2_lable="'"+alertJson.alerts[i].cta2.cta_lable+"'",CTA3_lable="'"+alertJson.alerts[i].cta3.cta_lable+"'",CTA1_action="'"+alertJson.alerts[i].cta1.cta_action+"'",CTA2_action="'"+alertJson.alerts[i].cta2.cta_action+"'",CTA3_action="'"+alertJson.alerts[i].cta3.cta_action+"'",alertId="'"+alertJson.alerts[i].alert_id+"'",alertDescription=text_truncate(alertJson.alerts[i].alert_desc,80),trimmedAlertDescription=alertDescription.replace(/<[^>]*>/g,"");if(null!=CTA1_lable&&"null"!==CTA1_lable&&"Null"!==CTA1_lable&&"null"!==CTA1_lable&&"'null'"!=CTA1_lable&&""!=CTA1_lable&&"undefined"!=CTA1_lable){var channelName="'"+alertJson.alerts[i].channel+"'";CTA1="LATER"==alertJson.alerts[i].cta1.ctaType||"CONFIRM"==alertJson.alerts[i].cta1.ctaType?1==alertJson.alerts[i].cta1.clicked?'<a data-id="'+alertJson.alerts[i].alert_id+'cta1" href="javascript:void(0);" class="button alertButton-clickToProceed alerts-later-cta disabledCTA" alertCtaType="'+alertJson.alerts[i].cta1.ctaType+'" channelName='+channelName+' onclick="setAnalyticsCTAClick('+CTA1_lable+","+alertId+',);">'+alertJson.alerts[i].cta1.cta_lable+"</a>":'<a data-id="'+alertJson.alerts[i].alert_id+'cta1" href="javascript:void(0);" class="button primary alertButton-clickToProceed alerts-later-cta" alertCtaType="'+alertJson.alerts[i].cta1.ctaType+'" channelName='+channelName+' onclick="setAnalyticsCTAClick('+CTA1_lable+","+alertId+',);">'+alertJson.alerts[i].cta1.cta_lable+"</a>":'<a data-id="'+alertJson.alerts[i].alert_id+'cta1"  href="javascript:void(0);" class="btn-cta-1 button primary alertButton-clickToProceed" alertCtaType="'+alertJson.alerts[i].cta1.ctaType+'" channelName='+channelName+' onclick="submitForm('+CTA1_action+",true);setAnalyticsCTAClick("+CTA1_lable+","+alertId+","+CTA1_action+');">'+alertJson.alerts[i].cta1.cta_lable+"</a>"}else CTA1="";CTA2=null!=CTA2_lable&&"null"!==CTA2_lable&&"Null"!==CTA2_lable&&"null"!==CTA2_lable&&"'null'"!=CTA2_lable&&""!=CTA2_lable&&"undefined"!=CTA2_lable?"LATER"==alertJson.alerts[i].cta2.ctaType||"CONFIRM"==alertJson.alerts[i].cta1.ctaType?1==alertJson.alerts[i].cta2.clicked?'<a data-id="'+alertJson.alerts[i].alert_id+'cta2" href="javascript:void(0);" class="button alertButton-clickToProceed alerts-later-cta disabledCTA" alertCtaType="'+alertJson.alerts[i].cta2.ctaType+'" channelName='+channelName+' onclick="setAnalyticsCTAClick('+CTA2_lable+","+alertId+',);">'+alertJson.alerts[i].cta2.cta_lable+"</a>":'<a data-id="'+alertJson.alerts[i].alert_id+'cta2" href="javascript:void(0);" class="button primary alertButton-clickToProceed alerts-later-cta" alertCtaType="'+alertJson.alerts[i].cta2.ctaType+'" channelName='+channelName+' onclick="setAnalyticsCTAClick('+CTA2_lable+","+alertId+',);">'+alertJson.alerts[i].cta2.cta_lable+"</a>":'<a href="javascript:void(0);" class="btn-cta-2 button primary alertButton-clickToProceed" alertCtaType="'+alertJson.alerts[i].cta2.ctaType+'" channelName='+channelName+' onclick="submitForm('+CTA2_action+",true);setAnalyticsCTAClick("+CTA2_lable+","+alertId+","+CTA2_action+');">'+alertJson.alerts[i].cta2.cta_lable+"</a>":"",CTA3=null!=CTA3_lable&&"null"!==CTA3_lable&&"Null"!==CTA3_lable&&"null"!==CTA3_lable&&"'null'"!=CTA3_lable&&""!=CTA3_lable&&""!=CTA3_lable&&"undefined"!=CTA3_lable?"LATER"==alertJson.alerts[i].cta3.ctaType||"CONFIRM"==alertJson.alerts[i].cta1.ctaType?1==alertJson.alerts[i].cta3.clicked?'<a data-id="'+alertJson.alerts[i].alert_id+'cta3" href="javascript:void(0);" class="button alertButton-clickToProceed alerts-later-cta disabledCTA" alertCtaType="'+alertJson.alerts[i].cta3.ctaType+'" channelName='+channelName+' onclick="setAnalyticsCTAClick('+CTA3_lable+","+alertId+',);">'+alertJson.alerts[i].cta3.cta_lable+"</a>":'<a data-id="'+alertJson.alerts[i].alert_id+'cta3" href="javascript:void(0);" class="button primary alertButton-clickToProceed alerts-later-cta" alertCtaType="'+alertJson.alerts[i].cta3.ctaType+'" channelName='+channelName+' onclick="setAnalyticsCTAClick('+CTA3_lable+","+alertId+',);">'+alertJson.alerts[i].cta3.cta_lable+"</a>":'<a href="javascript:void(0);" class="btn-cta-3 button primary alertButton-clickToProceed" alertCtaType="'+alertJson.alerts[i].cta3.ctaType+'" channelName='+channelName+' onclick="submitForm('+CTA3_action+",true);setAnalyticsCTAClick("+CTA3_lable+","+alertId+","+CTA3_action+');">'+alertJson.alerts[i].cta3.cta_lable+"</a>":"";var output="";if(null!=alertJson.alerts[i].image&&"null"!=alertJson.alerts[i].image&&"Null"!=alertJson.alerts[i].image&&""!=alertJson.alerts[i].image){if(viewport.width<768){var strImg=alertJson.alerts[i].image,index=strImg.lastIndexOf("/")+1,b="m-",position=index;output=[strImg.slice(0,position),b,strImg.slice(position)].join(""),alertImg='<img src="'+output+'" alt="'+alertJson.alerts[i].alertImageAltText+'">'}else{var strImg=alertJson.alerts[i].image,index=strImg.lastIndexOf("/")+1,b="d-",position=index;output=[strImg.slice(0,position),b,strImg.slice(position)].join(""),alertImg='<img src="'+output+'" alt="'+alertJson.alerts[i].alertImageAltText+'">'}alertImg='<img src="'+output+'" alt="'+alertJson.alerts[i].alertImageAltText+'">'}else alertImg="";if("popup"==alertJson.alerts[i].displayType){var stripAlertDesc=alertJson.alerts[i].alert_desc,popupTitleTxt="";"critical"==alertJson.alerts[i].priority&&(popupTitleTxt="Important message from SBICard!"),stripAlertDesc=stripAlertDesc.replace(/(<([^>]+)>)/gi,""),alertPopUpContainer+='<div class="modal-overlay aan-popup-class" data-id="'+alertJson.alerts[i].alert_id+'" isCritical= '+alertJson.alerts[i].critical+' alertSection="'+alertJson.alerts[i].section+'" isReadFlag="'+alertJson.alerts[i].read+'" channel='+alertJson.alerts[i].channel+' isCTASisplay="'+isCTASisplay+'" clickAttr="'+alertId+",'"+alertJson.alerts[i].alert_desc+"',"+tempData+","+tempData+","+alertJson.alerts[i].repeatabilityCounter+","+alertJson.alerts[i].repeatable+'">				      							<section class="modal">													<p class="aan-popup-concent">'+popupTitleTxt+'</p>													<div class="modal-wrap">				              							<header class="aan-modal-header"><h2 class="modal-title">'+alertJson.alerts[i].alert_text+'</h2></header>				              							<section class="content">				              							<p>'+alertJson.alerts[i].alert_desc+'</p>				              							</section>				              						</div>				              						<div class="modal-content clearfix" id="'+alertJson.alerts[i].alert_id+'" repeatCount='+alertJson.alerts[i].repeatabilityCounter+' alert-displayType="'+alertJson.alerts[i].displayType+'" alert-orgID="'+alertJson.alerts[i].orgId+'" >				              						<span class="alertTxtContainer"><input type="hidden" class="alert-desc" alert-data-desc="'+stripAlertDesc+'"></span>				              						<div class="button-wrap">				              							'+CTA1+"				              							"+CTA2+"				              							"+CTA3+"				              						</div>				              						</div>				              					</section>				              				</div>"}else"New"==alertJson.alerts[i].section?addNewContent+='<div class="alert-container" id="'+alertJson.alerts[i].alert_id+'" isCritical= '+alertJson.alerts[i].critical+' alertSection="'+alertJson.alerts[i].section+'" repeatCount='+alertJson.alerts[i].repeatabilityCounter+' isReadFlag="'+alertJson.alerts[i].read+'" channel='+alertJson.alerts[i].channel+' isCTASisplay="'+isCTASisplay+'" clickAttr="'+alertId+",'"+alertJson.alerts[i].alert_desc+"',"+tempData+","+tempData+","+alertJson.alerts[i].repeatabilityCounter+","+alertJson.alerts[i].repeatable+'" alert-displayType="'+alertJson.alerts[i].displayType+'" alert-orgID="'+alertJson.alerts[i].orgId+'"><span class="icon '+alertJson.alerts[i].icon+'"></span>					<span class="alertImgContainer">'+alertImg+'</span>					<span class="alertTxtContainer"><span class="alert-tittle">'+alertJson.alerts[i].alert_text+'</span>					<span class="alert-desc" alert-data-desc="'+alertJson.alerts[i].alert_desc+'">'+trimmedAlertDescription+'</span>					<span class="alert-startDate">'+alertJson.alerts[i].startdate+'</span></span>					<div class="alert-cta-block">					'+CTA1+"					"+CTA2+"					"+CTA3+"					</div>					</div>":"Earlier"==alertJson.alerts[i].section&&(addEarlierContent+='<div class="alert-container" id="'+alertJson.alerts[i].alert_id+'" isCritical='+alertJson.alerts[i].critical+' alertSection="'+alertJson.alerts[i].section+'" repeatCount='+alertJson.alerts[i].repeatabilityCounter+' isReadFlag="'+alertJson.alerts[i].read+'" channel='+alertJson.alerts[i].channel+' isCTASisplay="'+isCTASisplay+'" clickAttr="'+alertId+",'"+alertJson.alerts[i].alert_desc+"',"+tempData+",'"+tempData+"',"+alertJson.alerts[i].repeatabilityCounter+","+alertJson.alerts[i].repeatable+'" alert-displayType="'+alertJson.alerts[i].displayType+'" alert-orgID="'+alertJson.alerts[i].orgId+'"><span class="icon '+alertJson.alerts[i].icon+'"></span>					<span class="alertImgContainer">'+alertImg+'</span>					<span class="alertTxtContainer"><span class="alert-tittle">'+alertJson.alerts[i].alert_text+'</span>					<span class="alert-desc" alert-data-desc="'+alertJson.alerts[i].alert_desc+'">'+trimmedAlertDescription+'</span>					<span class="alert-startDate">'+alertJson.alerts[i].startdate+'</span></span>					<div class="alert-cta-block">					'+CTA1+"					"+CTA2+"					"+CTA3+"					</div>					</div>")}$("#new-alert-block").append(addNewContent),$("#earlier-alert-block").append(addEarlierContent),$(".content.clearfix .main").append(alertPopUpContainer),"true"==sessionStorage.getItem("AANPopupEnableFlag")?($(".aan-popup-class").addClass("open"),sessionStorage.removeItem("AANPopupEnableFlag"),$(".modal-overlay.aan-popup-class .button-wrap a").on("click",function(){$(".aan-popup-class").removeClass("open")})):$(".aan-popup-class").removeClass("open"),$(".alert-container").each(function(){"false"==$(this).attr("isReadFlag")&&$(this).addClass("unreadClass"),"false"==$(this).attr("isCTASisplay")&&$(this).find(".alert-cta-block").remove()}),$(".alert-unreadcount").html(parseInt(sessionStorage.getItem("unreadFlagCount"))),$(".alert-unreadcount").css("background","#fa1017"),$(".alert-list-menu").css("pointer-events","auto")}$(".alert-container").on("click",function(){if($(this).hasClass("unreadClass")){var id=$(this).attr("id");$(document).find($("div[id="+id+"]")).removeClass("unreadClass");var alertId=($(this).attr("clickAttr"),$(this).attr("id")),alertDesc=$(this).find(".alert-desc").attr("alert-data-desc"),repeatCount=$(this).attr("repeatCount"),channel=$(this).attr("channel"),ctaTypeRead="READ",alertDisplayType=$(this).attr("alert-displayType"),alertOrgId=$(this).attr("alert-orgID");callCtaAction(alertId,alertDesc,tempData,ctaTypeRead,repeatCount,channel,alertDisplayType,alertOrgId);for(var setAlertId=$(this).attr("id"),AANData=JSON.parse(JSON.parse(sessionStorage.AANData)),i=0;i<AANData.alerts.length;i++)if(AANData.alerts[i].alert_id==setAlertId){AANData.alerts[i].read=!0;break}sessionStorage.setItem("AANData",JSON.stringify(JSON.stringify(AANData))),"New"==$(this).attr("alertSection")&&(unreadFlagCount=$(".alert-unreadcount").html()-1,sessionStorage.setItem("unreadFlagCount",unreadFlagCount),$(".alert-unreadcount").html(parseInt(sessionStorage.getItem("unreadFlagCount"))>=0?parseInt(sessionStorage.getItem("unreadFlagCount")):0))}}),$(".alert-container .icon.hBlockIcon,.alert-container .alertImgContainer,.alert-container .alertTxtContainer").on("click",function(){submitForm("/creditcards/app/page/request/AnN/",!0)}),$(".button.primary.alertButton-clickToProceed.alerts-later-cta").on("click",function(){var btnID=$(this).attr("data-id");$('.alerts-later-cta[data-id="'+btnID+'"]').attr("disabled","true"),$('.alerts-later-cta[data-id="'+btnID+'"]').css("background","lightgray");var setAlertId=$(this).parent().parent().attr("id"),alert_desc=$(this).parent().siblings(".alertTxtContainer").find(".alert-desc").attr("alert-data-desc"),alert_label=$(this).html(),alertCtaType=$(this).attr("alertCtaType"),channelName=$(this).attr("channelName"),repeatCount=parseInt($(this).parent().parent().attr("repeatCount")),alertDisplayType=$(this).parent().parent().attr("alert-displayType"),alertOrgId=$(this).parent().parent().attr("alert-orgID");callCtaAction(setAlertId,alert_desc,alert_label,alertCtaType,repeatCount,channelName,alertDisplayType,alertOrgId);for(var AANData=JSON.parse(JSON.parse(sessionStorage.AANData)),i=0;i<AANData.alerts.length;i++)if(AANData.alerts[i].alert_id==setAlertId&&"popup"!=AANData.alerts[i].displayType){if("LATER"==AANData.alerts[i].cta1.ctaType){AANData.alerts[i].cta1.clicked=!0;break}if("LATER"==AANData.alerts[i].cta2.ctaType){AANData.alerts[i].cta2.clicked=!0;break}if("LATER"==AANData.alerts[i].cta3.ctaType){AANData.alerts[i].cta3.clicked=!0;break}}sessionStorage.setItem("AANData",JSON.stringify(JSON.stringify(AANData)))}),$(".btn-cta-1.button.primary.alertButton-clickToProceed, .btn-cta-2.button primary.alertButton-clickToProceed, .btn-cta-3.button primary.alertButton-clickToProceed").on("click",function(){var setAlertId=$(this).parent().parent().attr("id"),alert_desc=$(this).parent().siblings(".alertTxtContainer").find(".alert-desc").attr("alert-data-desc"),alert_label=$(this).html(),alertCtaType=$(this).attr("alertCtaType"),channelName=$(this).attr("channelName"),repeatCount=parseInt($(this).parent().parent().attr("repeatcount")),alertDisplayType=$(this).parent().parent().attr("alert-displayType"),alertOrgId=$(this).parent().parent().attr("alert-orgID");callCtaAction(setAlertId,alert_desc,alert_label,alertCtaType,repeatCount,channelName,alertDisplayType,alertOrgId)}),$(".alertButton-clickToProceed").on("click",function(){localStorage.setItem("myprofile-details",!0)})}function alertLogoutUser(){var sessionData=[];sessionData.push(sessionStorage.getItem("AANCtaTokenList"));var JsonSessionData=JSON.parse("["+sessionData+"]");$.ajax({url:"/creditcards/app/alertsnotifications/updateActionedAlerts",type:"POST",async:!1,data:{toBeUpdatedAlerts:JSON.stringify(JsonSessionData)},success:function(data){"success"==data&&(sessionStorage.removeItem("AANCtaTokens"),sessionStorage.removeItem("AANCtaTokenList"))},error:function(){}})}function clickCta(action,alert_id,alert_desc,CTA_lable,ctaType,repeatabilityCounter,channel,alertDisplayType,alertOrgId){submitForm(action,!0);var repeatability=parseInt(repeatabilityCounter);setAnalyticsCTAClick(CTA_lable,alert_id,action),callCtaAction(alert_id,alert_desc,CTA_lable,ctaType,repeatability,channel,alertDisplayType,alertOrgId)}function updateMyAlertLinkData(){var sessionData=[];sessionData.push(sessionStorage.getItem("AANCtaTokenList"));var JsonSessionData=JSON.parse("["+sessionData+"]");$.ajax({url:"/creditcards/app/alertsnotifications/updateActionedAlerts",type:"POST",async:!1,data:{toBeUpdatedAlerts:JSON.stringify(JsonSessionData)},success:function(data){"success"==data&&(sessionStorage.setItem("updateAlertsLinkFlag",!1),sessionStorage.removeItem("AANCtaTokens"),sessionStorage.removeItem("AANCtaTokenList"))},error:function(){}})}function updateViewAllData(){var sessionData=[];sessionData.push(sessionStorage.getItem("AANCtaTokenList"));var JsonSessionData=JSON.parse("["+sessionData+"]");$.ajax({url:"/creditcards/app/alertsnotifications/updateActionedAlerts",type:"POST",async:!1,data:{toBeUpdatedAlerts:JSON.stringify(JsonSessionData)},success:function(data){"success"==data&&(sessionStorage.setItem("updateViewAllAlertsFlag",!1),sessionStorage.removeItem("AANCtaTokens"),sessionStorage.removeItem("AANCtaTokenList"))},error:function(){}})}function callCtaAction(alert_id,alert_desc,CTA_lable,ctaType,repeatabilityCounter,channel,alertDisplayType,alertOrgId){var repeatabilityCounter=parseInt(repeatabilityCounter)+1;sessionStorage.setItem("AANCtaTokens",JSON.stringify({alert_id:alert_id,alert_desc:alert_desc,alertCTALabel:CTA_lable,alert_activity_type:ctaType,repeatabilityCounter:repeatabilityCounter,channel:channel,displayType:alertDisplayType,orgId:alertOrgId})),null==sessionStorage.getItem("AANCtaTokenList")?sessionStorage.setItem("AANCtaTokenList",sessionStorage.getItem("AANCtaTokens")):sessionStorage.setItem("AANCtaTokenList",sessionStorage.getItem("AANCtaTokenList")+","+sessionStorage.getItem("AANCtaTokens"))}function AddProActOverlayLoader(){var loaderHtml='<div class="proact-overlay-loader"><h4 Class="loadertext">Waiting For Response</h4></div>',$target=$("body");$target.append(loaderHtml)}function validateProactOtp(inputEl){6==inputEl.value.length&&($("#proact-uid-otp-form").submit(),$("#proact-uid-otp-submit").blur(),AddProActOverlayLoader())}function resendProActiveOtp(resendURL){$(".proact-resend-otp-msg").hide(),$("#proact-uid-resend-otp").addClass("inactive-link"),$.ajax({type:"GET",url:resendURL,beforeSend:function(){var loaderHtml='<div class="proact-overlay-loader"></div>';$("body").append(loaderHtml)},complete:function(){$("body").find("div.proact-overlay-loader").remove()},success:function(response){response?response.success===!0?($("body").find("div.proact-overlay-loader").remove(),$("#proact-uid-resend-otp").removeClass("inactive-link"),$("#proact-resend-otp-msg").html(response.message.replace(/_/g," ")).show()):response.success===!1?($("body").find("div.proact-overlay-loader").remove(),$("#proact-uid-resend-otp").addClass("inactive-link"),$("#proact-resend-otp-msg").html(response.message.replace(/_/g," ")).show()):($("body").find("div.proact-overlay-loader").remove(),$("#proact-uid-resend-otp").removeClass("inactive-link"),$("#proact-resend-otp-msg").html(response.message.replace(/_/g," ")).show()):($("body").find("div.proact-overlay-loader").remove(),$("#proact-uid-resend-otp").removeClass("inactive-link"))},error:function(){$("body").find("div.proact-overlay-loader").remove(),$("#proact-uid-resend-otp").removeClass("inactive-link")}})}function proactUidSubmit(){var id=$("#proTempUserID").val();sessionStorage.setItem("tempObj",id),$("#proactUidSubmitButton").attr("src","/creditcards/resources/img/active-button.svg"),$("#proact-login-form").submit(),AddProActOverlayLoader()}function proActSetNewCredFormCheck(){isUserNameValid&&isPasswordStrong&&isPasswordsMatch?($(".new-cred-submit-button").prop("disabled",!1),$(".new-cred-submit-button").css("background-color","#00b1f2")):($(".new-cred-submit-button").prop("disabled",!0),$(".new-cred-submit-button").css("background-color","#dadada"))}function proActSetNewCredSubmit(){$("#proact-set-cred-form").submit(),AddProActOverlayLoader()}function proActUserIdCheckExistance(){var $this=$("#pro-new-cred-set-uname"),value=$("#pro-new-cred-set-uname").val(),urlNew=$("#pro-new-cred-set-uname").attr("data-map");""!=value&&""!=urlNew?$.ajax({type:"POST",data:{userId:value},url:urlNew,beforeSend:function(){AddProActOverlayLoader()},complete:function(){$("body").find("div.proact-overlay-loader").remove()},success:function(data){var response;if(response="string"==typeof data?data:JSON.stringify(data),"ID already exists. Please use some other user ID."==response){var unameErrorValidation='<label id="pro-uname-existance-error" for="pro-new-cred-set-uname" class="error" style="top:6px;margin-left: 22px;"></label>';$("#pro-new-cred-set-uname").after(unameErrorValidation),$("#proact-uname-input-error").html("User ID already exists. Please use some other user ID."),isUserNameValid=!1}else if("NotRegistered"==response){var unameValid='<label id="pro-uname-check-valid" for="pro-new-cred-set-uname" class="valid" style="top:6px;margin-left: 22px;"></label>';$("#pro-new-cred-set-uname").after(unameValid),$("#proact-uname-input-error").html(""),isUserNameValid=!0}else $("#proact-uname-input-error").html(response),isUserNameValid=!0;proActSetNewCredFormCheck()},error:function(){isUserNameValid=!1,proActSetNewCredFormCheck()}}):($this.siblings(".userExists").html(""),isUserNameValid=!1)}function checkProUidValidition(){var tempId=sessionStorage.getItem("tempObj"),userid_regex="^[a-zA-Zd0-9._@ ]+$",username=$("#pro-new-cred-set-uname").val(),regexsymbol="[^\\x00-\\x7F]";if($("#pro-uname-existance-error").remove(),$("#pro-uname-check-valid").remove(),$("#pro-uname-sp-char-error").remove(),$("#pro-uname-nomatch").remove(),$("#proact-uname-input-error").html(""),""!=username&&null!=username&&username!=tempId&&null!=tempId&&""!=tempId)if(username.match(userid_regex))if(username.match(regexsymbol)){var unameErrorValidation='<label id="pro-uname-sp-char-error" for="pro-new-cred-set-uname" class="error" style="top:6px;margin-left: 22px;"></label>';$("#pro-new-cred-set-uname").after(unameErrorValidation),$("#proact-uname-input-error").html("invalid format of username"),isUserNameValid=!1,proActSetNewCredFormCheck()}else proActUserIdCheckExistance();else{var unameErrorValidation='<label id="pro-uname-nomatch" for="pro-new-cred-set-uname" class="error" style="top:6px;margin-left: 22px;"></label>';$("#pro-new-cred-set-uname").after(unameErrorValidation),$("#proact-uname-input-error").html("invalid format of username"),isUserNameValid=!1,proActSetNewCredFormCheck()}else if(""!=username&&null!=username&&username==tempId){var unameErrorValidation='<label id="pro-uname-existance-error" for="pro-new-cred-set-uname" class="error" style="top:6px;margin-left: 22px;"></label>';$("#pro-new-cred-set-uname").after(unameErrorValidation),$("#proact-uname-input-error").html("User ID already exists. Please use some other user ID."),isUserNameValid=!1,proActSetNewCredFormCheck()}else isUserNameValid=!1,proActSetNewCredFormCheck()}function checkStrength(password){var strength=0;password.length<12&&($("#new-cred-pwd-strength-status").removeClass(),$("#new-cred-pwd-strength-status:first-child").addClass("short"),$("#pro-pwd-check-valid").remove(),isPasswordStrong=!1);var atleastThreeAlphabetsRegExp="(?:[a-zA-Z].*){3}";password.length>11&&new RegExp(atleastThreeAlphabetsRegExp).test(password)&&(strength+=1),password.match(/([a-z].*[A-Z])|([A-Z].*[a-z])/)&&(strength+=1),password.match(/([a-zA-Z])/)&&password.match(/([0-9])/)&&password.match(/([!,%,&,@,#,$,^,*,?,_,~])/)&&(strength+=1);var browserurl=location.href,substringMainJourney="expirepassword-page";if(2>strength){if($("#new-cred-pwd-strength-status").removeClass(),$("#pro-pwd-check-valid").remove(),$("#new-cred-pwd-strength-status:first-child").addClass("proActPwdWeak"),$("#new-cred-pwd-strength-status:nth-child(2)").addClass("proActPwdWeak"),$("#pro-pwd-check-valid").remove(),isPasswordStrong=!1,password.length>0){var unameError='<label id="pro-pwd-check-valid" for="pro-new-password" class="error" style="top:6px;margin-left: 32px;"></label>',browserurl=location.href,substringfp="forgotpassword",substringreg="register",substringunl="unlock",substringpin="pin",substringExpPwd="expirepassword",myProfChangePwd="password-tab";-1!==browserurl.indexOf(substringfp)||-1!==browserurl.indexOf(substringreg)||-1!==browserurl.indexOf(substringunl)||-1!==browserurl.indexOf(substringpin)?($('label[for="pro-new-password"]').parent().find("label.valid").remove(),$('label[for="pro-new-password"]').parent().find("label.error").remove()):-1!==browserurl.indexOf(myProfChangePwd)?showHideCrossAndCheckMarkForMyProfChangePwdJourney(!1):-1!==browserurl.indexOf(substringMainJourney)?($('label[for="pro-new-password"]').parent().find("label.valid").remove(),$('label[for="pro-new-password"]').parent().find("label.error").remove(),handleTickCrossMarkForMainJourney(password.length,!1),$("#pro-password-icon1").after(unameError)):$("#pro-password-icon1").after(unameError)}}else if(2==strength){if($("#new-cred-pwd-strength-status").removeClass(),$("#pro-pwd-check-valid").remove(),$("#new-cred-pwd-strength-status:first-child").addClass("proActPwdGood"),$("#new-cred-pwd-strength-status:nth-child(2)").addClass("proActPwdGood"),$("#new-cred-pwd-strength-status:nth-child(3)").addClass("proActPwdGood"),$("#pro-pwd-check-valid").length);else{var browserurl=location.href,substringfp="forgotpassword",substringreg="register",substringunl="unlock",substringpin="pin",substringExpPwd="expirepassword",myProfChangePwd="password-tab",unameError='<label id="pro-pwd-check-valid" for="pro-new-password" class="error" style="top:6px;margin-left: 32px;"></label>';-1!==browserurl.indexOf(substringfp)||-1!==browserurl.indexOf(substringreg)||-1!==browserurl.indexOf(substringunl)||-1!==browserurl.indexOf(substringpin)?($('label[for="pro-new-password"]').parent().find("label.valid").remove(),$('label[for="pro-pwd-check-valid"]').parent().find("label.valid").remove(),$('label[for="pro-new-password"]').parent().find("label.error").remove()):-1!==browserurl.indexOf(myProfChangePwd)?showHideCrossAndCheckMarkForMyProfChangePwdJourney(!1):-1!==browserurl.indexOf(substringMainJourney)?($('label[for="pro-new-password"]').parent().find("label.valid").remove(),$('label[for="pro-new-password"]').parent().find("label.error").remove(),handleTickCrossMarkForMainJourney(password.length,!1),$("#pro-password-icon1").after(unameError)):$("#pro-password-icon1").after(unameError)}isPasswordStrong=!1}else{if($("#new-cred-pwd-strength-status").removeClass().addClass("proActPwdStrong"),$("#new-cred-pwd-strength-status:first-child").addClass("proActPwdStrong"),$("#new-cred-pwd-strength-status:nth-child(2)").addClass("proActPwdStrong"),$("#new-cred-pwd-strength-status:nth-child(3)").addClass("proActPwdStrong"),$("#pro-pwd-check-valid").length);else{var unameValid='<label id="pro-pwd-check-valid" for="pro-new-password" class="valid" style="top:6px;margin-left: 32px;"></label>';if($('label[for="password"]')){var browserurl=location.href,substring="forgotpassword-authotp-page",substring1="register-update-credentials-page",substring2="forgotpassword-set-credentials-page",substring3="register-authotp-page",substring4="register-set-credentials-page",substring5="password-tab",substring6="unlock-set-credentials-page",substringfp="forgotpassword",substringreg="register",substringunl="unlock",substringpin="pin",substringExpPwd="expirepassword";-1!==browserurl.indexOf(substring)||-1!==browserurl.indexOf(substring1)||-1!==browserurl.indexOf(substring2)||-1!==browserurl.indexOf(substring3)||-1!==browserurl.indexOf(substring4)||-1!==browserurl.indexOf(substring5)||-1!==browserurl.indexOf(substring6)||(-1!==browserurl.indexOf(substringfp)||-1!==browserurl.indexOf(substringreg)||-1!==browserurl.indexOf(substringunl)||-1!==browserurl.indexOf(substringpin)||-1!==browserurl.indexOf(substringExpPwd))&&($('label[for="pro-new-password"]').parent().find("label.error").remove(),$('label[for="pro-pwd-check-valid"]').parent().find("label.error").remove())}}isPasswordStrong=!0}var unameValid='<label id="pro-pwd-check-valid" for="pro-new-password" class="valid" style="top:6px;margin-left: 32px;"></label>';if(1==isPasswordStrong){$('label[for="pro-new-password"]').parent().find("label.error").remove(),$("#pro-pwd-check-valid").remove();var browserurl=location.href,substring="contact-details-page",substringfp="forgotpassword",substringreg="register",substringunl="unlock",substringpin="pin",substringExpPwd="expirepassword",myProfChangePwd="password-tab";-1!==browserurl.indexOf(substring)||-1!==browserurl.indexOf(substringfp)||-1!==browserurl.indexOf(substringreg)||-1!==browserurl.indexOf(substringunl)||-1!==browserurl.indexOf(substringpin)?($('label[for="pro-new-password"]').parent().find("label.error").remove(),$('label[for="pro-pwd-check-valid"]').parent().find("label.error").remove()):-1!==browserurl.indexOf(myProfChangePwd)?showHideCrossAndCheckMarkForMyProfChangePwdJourney(!0):-1!==browserurl.indexOf(substringMainJourney)?(handleTickCrossMarkForMainJourney(password.length,!0),$("#pro-password-icon1").after(unameValid)):$("#pro-password-icon1").after(unameValid),-1!==browserurl.indexOf(substring)&&$("#password").attr("style","border: 1px solid #cdcbcb;")}else{var browserurl=location.href,substringMyProfPwdChange="contact-details-page";-1!==browserurl.indexOf(substringMainJourney)?0==password.length?(handleTickCrossMarkForMainJourney(password.length,isPasswordStrong),$("#password").attr("style","border: 1px solid #cdcbcb;")):$("#password").attr("style","border: 1px solid red;"):-1!==browserurl.indexOf(substringMyProfPwdChange)&&(showHideCrossAndCheckMarkForMyProfChangePwdJourney(!1),0==password.length?$("#password").attr("style","border: 1px solid #cdcbcb;"):$("#password").attr("style","border: 1px solid red;"))
}}function checkProConfPassword(){$("#pro-conf-id-mismatch-error").remove(),$("#proPwdMismatchMessage").html("");var pwd=$("#password").val(),confPwd=$("#pro-confirm-password").val();if(pwd!=confPwd){$("#pro-conf-pwd-matched").length&&$("#pro-conf-pwd-matched").remove();var confPwdErrorValidation='<label id="pro-conf-id-mismatch-error" for="pro-confirm-password" class="error" style="top:6px;margin-left: 31px;"></label>';$("#pro-password-icon2").after(confPwdErrorValidation),$("#proact-user-conf-pwd-parent").siblings(".proPwdMismatch").html("Password doesn't match"),isPasswordsMatch=!1,proActSetNewCredFormCheck()}else if(pwd==confPwd&&""!=confPwd&&null!=confPwd){if($("#pro-conf-id-mismatch-error").remove(),$("#proPwdMismatchMessage").html(""),$("#pro-conf-pwd-matched").length);else{var confPwdMatched='<label id="pro-conf-pwd-matched" for="pro-confirm-password" class="valid" style="top:6px;margin-left: 31px;"></label>';$("#pro-password-icon2").after(confPwdMatched)}isPasswordsMatch=!0,proActSetNewCredFormCheck()}else $("#pro-conf-pwd-matched").length&&$("#pro-conf-pwd-matched").remove()}function unmaskNewPassword(){var element=document.getElementById("password"),currentAttribute=element.getAttribute("type");"password"==currentAttribute?($("#password").attr("type","text"),$("#pro-password-icon1").attr("src","/creditcards/resources/img/proact-open-eye.svg")):($("#password").attr("type","password"),$("#pro-password-icon1").attr("src","/creditcards/resources/img/proact-eye-closed.svg"))}function unmaskConfPassword(){var element=document.getElementById("pro-confirm-password"),currentAttribute=element.getAttribute("type");"password"==currentAttribute?($("#pro-confirm-password").attr("type","text"),$("#pro-password-icon2").attr("src","/creditcards/resources/img/proact-open-eye.svg")):($("#pro-confirm-password").attr("type","password"),$("#pro-password-icon2").attr("src","/creditcards/resources/img/proact-eye-closed.svg"))}function submitDigiOnbForm(action,isAnchor){console.log("action is----",action),console.log("isAnchor is-----",isAnchor);try{isAnchor?addDigiOnbLoaderBody():addDigiOnbLoaderModalBody(),$("#dynaform").append('<form style="position:absolute; left:-1000px;top:-1000px;"action="'+action+'" method="POST" class="dynaForm">'),$("#dynaform form").append('<input type="hidden" name="synchronizerToken" id="synchronizerToken" value="'+token+'"/>'),$("#dynaform form").append('<br><input type="submit" id="savebutton" value="" />'),$("#dynaform form").submit()}catch(e){}}function addDigiOnbLoaderBody(){var loaderHtml='<div class="digital-onb-loader"><div class="digital-onb-loader-note">Waiting for response<div></div>',$target=$("body");$target.append(loaderHtml)}function addDigiOnbLoaderModalBody(){var loaderHtml='<div class="digital-onb-loader"><div class="digital-onb-loader-note-modbody">Waiting for response<div></div>',$target=$(".modal-body");$target.append(loaderHtml)}function removeDigiOnbOverlayLoader(){$("body").find("div.digital-onb-loader").remove()}function disableTabForDigiOnb(){$(document).keydown(function(e){var keycode1=e.keyCode?e.keyCode:e.which;(0==keycode1||9==keycode1)&&(e.preventDefault(),e.stopPropagation(),console.log("Tab is disabled for Digi Onb"))})}function showFinishBox(){console.log("--------------------show finish Box called"),$("#step-do-confirmation").hasClass("active")?(console.log($("#step-do-confirmation").hasClass("active")),$("#finish-bottom-box").addClass("show")):$("#finish-bottom-box").removeClass("show")}function hangleFinishSticky(){window.innerWidth>768&&(document.querySelector("#body-do-confirmation").addEventListener("scroll",function(){this.scrollTop>this.scrollHeight-this.getBoundingClientRect().height-30&&document.querySelector("#finish-bottom-box").classList.add("show")}),(document.querySelector("#body-do-confirmation").getBoundingClientRect().height==document.querySelector("#body-do-confirmation").scrollHeight||document.querySelector("#body-do-confirmation").scrollHeight-document.querySelector("#body-do-confirmation").scrollTop==document.querySelector("#body-do-confirmation").getBoundingClientRect().height)&&document.querySelector("#finish-bottom-box").classList.add("show"),showFinishBox())}function onboardingData(){cardActivationStepStatus="",managePinStepStatus="",estatementStepStatus="",internationUsageActivationStepStatus="",cardInfoStepStatus="",cardActivationSrNumber="",estatmentSrNumber="",internationalUsageSrNumber=""}function stepStatusUpdateIndividual(){stepName="",stepStatusVal="",updateCount=localStorage.getItem("dbUpdateCount")}function stepupdatesingleFunction(data){var loadStepUrl="/creditcards/app/digitalOnboarding/loadDigitalOnboardingStep";$.ajax({url:loadStepUrl,type:"POST",data:data,beforeSend:function(){addDigiOnbLoaderBody(),$("#digi-onboard-otp-exceed").html("")},complete:function(){$("body").find("div.digital-onb-loader").remove()},success:function(data){if("false"!==data.success&&data.success!==!1){var dataParserd=JSON.parse(data.updateResponseString);void 0!==dataParserd.offerDBUpdateSuccess&&null!==dataParserd.offerDBUpdateSuccess&&1==dataParserd.offerDBUpdateSuccess&&(localStorage.removeItem("dbUpdateCount"),localStorage.setItem("dbUpdateCount",!1))}else void 0!=data.errorMsg&&null!=data.errorMsg&&""!=data.errorMsg&&($("#digi-onb-error-ribbon").addClass("show"),$("#digi-onb-error-ribbon-message").html("Sorry! due to technical error we are unable to proceed . Please try again after sometime."),$("#setps-container-parent").scrollTop(0))},failure:function(data){console.log("Faliure Data ====>",data)}})}function landUserStep(){var emailExist=$("#emailExist").val(),emailValid=$("#emailValid").val(),eligebleDaysToGenOtp=$("#eligebleDaysToGenOtp").val(),uRl="/creditcards/app/digitalOnboarding/updateAllDigitalOnboardingStepStatus",tobeUpdate=new onboardingData,stepUpdateIndividual=new stepStatusUpdateIndividual,onboardedStaus=sessionStorage.getItem("onboardingStats"),onboardedStausJSON=JSON.parse(onboardedStaus);if(onboardedStausJSON.outputFacts[0].stepId="step-card-activation",onboardedStausJSON.outputFacts[1].stepId="step-generate-pin",onboardedStausJSON.outputFacts[2].stepId="step-estate-sub",onboardedStausJSON.outputFacts[3].stepId="step-international-usage",onboardedStausJSON.outputFacts[4].stepId="step-do-confirmation",onboardedStausJSON.outputFacts.forEach(function(e){if(e.isLandingStep===!0){$("#"+e.stepId).addClass("active in-progress"),$("#landStep").val(e.stepName),document.querySelector("#"+e.stepId+" .do-step-heading-text").classList.add("clickable"),hangleFinishSticky(),stepUpdateIndividual.stepName=e.stepName,stepUpdateIndividual.stepStatusVal=e.stepStatusFlag,stepUpdateIndividual.updateCount=localStorage.getItem("dbUpdateCount");var firstTimeUser=localStorage.getItem("firstTimeOnboard");null!==firstTimeUser&&"true"===firstTimeUser&&"Not Pitched"===e.stepStatusFlag&&(e.stepStatusFlag="Pitched")}else"Not Pitched"===e.stepStatusFlag&&$("#"+e.stepId+" .do-step-heading-text").removeClass("clickable");("NA"===e.stepStatusFlag||"Not Applicable"===e.stepStatusFlag)&&(console.log(e.stepId),$("#"+e.stepId).remove(),hiddenStepCount++),("Actioned"===e.stepStatusFlag||"Pitched"===e.stepStatusFlag||"Completed Outside"===e.stepStatusFlag)&&$("#"+e.stepId).addClass("done"),"step-card-activation"!=e.stepId||"Actioned"!=e.stepStatusFlag&&0!=e.isActionAllowed?"step-card-activation"!=e.stepId||"Not Pitched"!=e.stepStatusFlag&&"Pitched"!=e.stepStatusFlag||$("#body-not-activated-1").removeClass("hidden"):($("#step-card-activation .step-link.not-activated").addClass("hide"),$("#step-card-activation .step-link.activated").removeClass("hide"),$("#body-activated-set2","#body-activated-set2").addClass("hidden"),$("#body-not-activated-set2").removeClass("hidden")),"step-generate-pin"!=e.stepId||"Actioned"!=e.stepStatusFlag&&"Completed Outside"!==e.stepStatusFlag&&0!=e.isActionAllowed?"step-generate-pin"!=e.stepId||"Pitched"!=e.stepStatusFlag&&"Not Pitched"!==e.stepStatusFlag||eligebleDaysToGenOtp>0&&($("#step-generate-pin #body-before-otp").addClass("hidden"),$("#step-generate-pin #mobile-changes-last-4-days").removeClass("hidden")):eligebleDaysToGenOtp>0?($("#step-generate-pin #body-before-otp").addClass("hidden"),$("#step-generate-pin #mobile-changes-last-4-days").removeClass("hidden")):($("#step-generate-pin #body-before-otp").addClass("hidden"),$("#step-generate-pin #body-pin-generated").removeClass("hidden"),$("#generate-pin-text").text("Pin Generated")),"step-estate-sub"==e.stepId&&(""==emailExist?($("#step-estate-sub .sets.set-3").removeClass("active"),$("#step-estate-sub .sets.set-6").addClass("active")):"false"==emailValid||emailValid===!1?($("#step-estate-sub .sets.set-3").removeClass("active"),$("#step-estate-sub .sets.set-7").addClass("active")):("Actioned"==e.stepStatusFlag||"Completed Outside"==e.stepStatusFlag||0==e.isActionAllowed)&&($("#step-estate-sub .sets.set-3").removeClass("active"),$("#step-estate-sub .sets.set-1").addClass("active"))),"step-international-usage"!=e.stepId||"Actioned"!=e.stepStatusFlag&&"Completed Outside"!=e.stepStatusFlag&&0!=e.isActionAllowed?"step-international-usage"!=e.stepId||"Pitched"!=e.stepStatusFlag&&"Not Pitched"!=e.stepStatusFlag||($("#step-international-usage .sets.set-2").removeClass("active"),$("#step-international-usage .sets.set-1").addClass("active")):($("#step-international-usage .sets.set-1").removeClass("active"),$("#step-international-usage .sets.set-2").addClass("active"),$(".intl-usage-already-active-text").show(),$(".intl-usage-activated-text").hide(),$("#step-international-usage .sets.set-2 #body-after-IUActivation").removeClass("hidden"))}),tobeUpdate.cardActivationStepStatus=onboardedStausJSON.outputFacts[0].stepStatusFlag,tobeUpdate.managePinStepStatus=onboardedStausJSON.outputFacts[1].stepStatusFlag,tobeUpdate.estatementStepStatus=onboardedStausJSON.outputFacts[2].stepStatusFlag,tobeUpdate.internationUsageActivationStepStatus=onboardedStausJSON.outputFacts[3].stepStatusFlag,tobeUpdate.cardInfoStepStatus=onboardedStausJSON.outputFacts[4].stepStatusFlag,tobeUpdate.cardActivationSrNumber="",tobeUpdate.estatmentSrNumber="",tobeUpdate.internationalUsageSrNumber="",onboardedStaus.length>0){console.log(tobeUpdate);var fisrtTimeUser=localStorage.getItem("firstTimeOnboard");null!==fisrtTimeUser&&"true"===fisrtTimeUser&&1==onboardedStausJSON.segmentationRule.updateOnEveryStep?(onboardedStausJSON.outputFacts.forEach(function(){sessionStorage.setItem("onboardingStats",JSON.stringify(onboardedStausJSON))}),$.ajax({url:uRl,type:"POST",data:tobeUpdate,success:function(data){if(localStorage.removeItem("firstTimeOnboard"),localStorage.setItem("firstTimeOnboard",!1),null!==data.updateResponseString&&void 0!==data.updateResponseString){var dataParserd=JSON.parse(data.updateResponseString);console.log("updateResponseString is not null"),console.log("data.updateResponseString.offerDBUpdateSuccess ??"+dataParserd.offerDBUpdateSuccess),void 0===dataParserd.offerDBUpdateSuccess||null===dataParserd.offerDBUpdateSuccess||1!=dataParserd.offerDBUpdateSuccess&&"true"!=dataParserd.offerDBUpdateSuccess?console.log("offerDBUpdateSuccess is false>>>"):(console.log("offerDBUpdateSuccess is true>>>"),localStorage.removeItem("dbUpdateCount"),localStorage.setItem("dbUpdateCount",!1))}},error:function(data){console.log("Faliure Data ====>",data)}})):null!==fisrtTimeUser&&"false"===fisrtTimeUser&&1==onboardedStausJSON.segmentationRule.updateOnEveryStep?(onboardedStausJSON.outputFacts.forEach(function(){sessionStorage.setItem("onboardingStats",JSON.stringify(onboardedStausJSON))}),stepupdatesingleFunction(stepUpdateIndividual)):sessionStorage.setItem("onboardingStats",JSON.stringify(onboardedStausJSON))}else console.log("exited");$(".totalStep").html($(".do-step-container").length),$(".do-step-container").each(function(index){var targetID=index;$(this).attr("data-step-count",targetID)});var onboardedStaus=sessionStorage.getItem("onboardingStats"),onboardedStausJSON=JSON.parse(onboardedStaus);onboardedStausJSON.outputFacts.forEach(function(e){e.isLandingStep===!0&&(document.querySelector("#counter-number").innerHTML=parseInt(document.getElementById(e.stepId).getAttribute("data-step-count"))+1)});$(".do-step-container").length;$(".next-button").each(function(){$(this).removeAttr("onclick")}),$(".skip-button").each(function(e){console.log(e),$(this).removeAttr("onclick")}),$(".do-step-container").find(".next-button").bind("click",function(){var tobeUpdate=new stepStatusUpdateIndividual,nextStep=$(this).closest(".step-row").next().attr("id"),currentStep=$(this).closest(".step-row").attr("id"),cardFeatureDisplay=$("#cardFeatureAvailable").val();console.log("cureent step is----",currentStep),hangleFinishSticky(),console.log(nextStep),changeStep(""+nextStep,""+currentStep);var onboardedStaus=sessionStorage.getItem("onboardingStats"),onboardedStausJSON=JSON.parse(onboardedStaus);onboardedStausJSON.outputFacts.forEach(function(e){e.stepId===nextStep&&(console.log("Got It"),"step-do-confirmation"!=e.stepId&&"step-do-confirmation"!=nextStep||"N"!=cardFeatureDisplay?"Not Pitched"===e.stepStatusFlag&&(console.log(),(1==onboardedStausJSON.segmentationRule.updateOnEveryStep||"true"==onboardedStausJSON.segmentationRule.updateOnEveryStep)&&(tobeUpdate.stepName=e.stepName,tobeUpdate.stepStatusVal=e.stepStatusFlag,tobeUpdate.updateCount=localStorage.getItem("dbUpdateCount"),stepupdatesingleFunction(tobeUpdate)),e.stepStatusFlag="Pitched"):($("#digi-onb-error-ribbon").addClass("show"),$("#digi-onb-error-ribbon-message").html("Sorry! due to technical error we are unable to proceed . Please try again after sometime."),$("#setps-container-parent").scrollTop(0)))}),sessionStorage.setItem("onboardingStats",JSON.stringify(onboardedStausJSON))})}function displayCardFueature(data){var cardData=data,parsedData=JSON.parse(data.eligibilityString);console.log(),void 0!=data.CardFeatureValue1&&$(".card-feature-List").append("<li>"+data.CardFeatureValue1+"</li>"),void 0!=data.CardFeatureValue2&&$(".card-feature-List").append("<li>"+data.CardFeatureValue2+"</li>"),void 0!=data.CardFeatureValue3&&$(".card-feature-List").append("<li>"+data.CardFeatureValue3+"</li>"),void 0!=data.CardFeatureValue4&&$(".card-feature-List").append("<li>"+data.CardFeatureValue4+"</li>"),void 0==data.CardFeatureValue1&&void 0==data.CardFeatureValue2&&void 0==data.CardFeatureValue3&&void 0==data.CardFeatureValue4&&($(".card-feature-List").append("<li>"+data.defaultCardFeatureValue1+"</li>"),$(".card-feature-List").append("<li>"+data.defaultCardFeatureValue2+"</li>"),$(".card-feature-List").append("<li>"+data.defaultCardFeatureValue3+"</li>"),$(".card-feature-List").append("<li>"+data.defaultCardFeatureValue4+"</li>")),parsedData.segmentationRule.displayWebForm?($("#help-link").show(),$(".display-finish-text").show(),$(".display-query-text").show()):($("#help-link").hide(),$(".display-finish-text").hide(),$(".display-query-text").hide()),parsedData.segmentationRule.displayMarkupFee?($("#step-international-usage .sets.set-1 #displayMarkupFee").show(),$("#step-international-usage .sets.set-2 #displayMarkupFee").show()):($("#step-international-usage .sets.set-1 #displayMarkupFee").hide(),$("#step-international-usage .sets.set-2 #displayMarkupFee").hide()),parsedData.segmentationRule.displayCardFeaturesOnly||$(".card-feat-box").append('<div class="do-card small"><h5 class="heading">Annual Fee</h5><p class="data">&#8377;'+cardData.membershipFee+"</p></div>"),$(".card-feat-box").append('<div class="do-card small"><h5 class="heading">Credit Limit</h5><p class="data">&#8377;'+creditLimit+"</p></div>"),$(".card-feat-box").append('<div class="do-card small "><h5 class="heading">Billing Cycle</h5><p class="data">'+cardData.billingCycle+' <span class="sub-text">of every month </span></p></div>'),null!==cardData.sbrAmount&&"0"!==cardData.sbrAmount&&""!==cardData.sbrAmount&&$(".card-feat-box").append('<div class="do-card small "><h5 class="heading">SBR Amount</h5><p class="data">&#8377;'+cardData.sbrAmount+"</p></div>")}function activateCard(){var cardAcrivateUrl="/creditcards/app/digitalOnboarding/activateCard",tobeUpdate=new onboardingData,cardactivationStatus={cardActivationStepStatus:""},onboardedStaus=sessionStorage.getItem("onboardingStats"),onboardedStausJSON=JSON.parse(onboardedStaus);console.log($(this)),onboardedStausJSON.outputFacts.forEach(function(e){"Card Activation"===e.stepName&&(console.log("Card Activation ===>  "+e.stepStatusFlag),cardactivationStatus.cardActivationStepStatus=e.stepStatusFlag)}),$.ajax({type:"POST",data:cardactivationStatus,url:cardAcrivateUrl,beforeSend:function(){$("#step1-activate-button").attr("disabled",!0),$("#digi-onb-error-ribbon").removeClass("show"),$("#digi-onb-error-ribbon-message").html(""),addDigiOnbLoaderBody()},success:function(data){console.log("Card Activate Resp ==> "+data),$("body").find("div.digital-onb-loader").remove(),"false"!==data.success&&data.success!==!1&&void 0!==data.success&&""!=data?(tobeUpdate.cardActivationSrNumber=data.cardActivationSrNumber,$("#body-not-activated-1").addClass("hidden"),$("#body-activated-set2").removeClass("hidden"),$("#body-not-activated-set2").addClass("hidden"),$("#step-card-activation").addClass("done"),$("#step-card-activation span.step-link.activated").removeClass("hide"),$("#step-card-activation span.step-link.not-activated").addClass("hide"),$("#body-activated-set2 .section-col-5 p").html(data.cardActivationSuccessMsg),""!==data.cardActivationSrNumber&&(updateOnFinalSetpData.cardActivationSrNumber=data.cardActivationSrNumber,$("#body-activated-set2 .section-col-5 p").html(data.cardActivationSuccessMsg+"</br>"+data.cardActivationSrNumberMsg)),("true"==data.updateResponseString.cardActivationUpdateSuccess||1==data.updateResponseString.cardActivationUpdateSuccess||0==onboardedStausJSON.segmentationRule.updateOnEveryStep)&&onboardedStausJSON.outputFacts.forEach(function(e){"Card Activation"===e.stepName&&(e.stepStatusFlag="Actioned")}),sessionStorage.setItem("onboardingStats",JSON.stringify(onboardedStausJSON))):($("#digi-onb-error-ribbon").addClass("show"),$("#digi-onb-error-ribbon-message").html(data.errorMsg),$("#setps-container-parent").scrollTop(0))},failure:function(data){console.log("Card Activate Error Resp ==> "+data)}})}function getmyOTp(){$("#onboard-otp-input").css("cursor","default"),$("#enter-card-detail-step-error").removeClass("show"),$("#onb-error-otp").html(""),$("#onboard-otp-input").prop("disabled",!1),$.ajax({url:"/creditcards/app/digitalOnboarding/send-otp-manage-pin",type:"GET",beforeSend:function(){$("#digi-onb-error-ribbon").removeClass("show"),$("#digi-onb-error-ribbon-message").html(""),addDigiOnbLoaderBody(),$("#step2-pin-button").attr("disabled",!0)},success:function(data){if($("body").find("div.digital-onb-loader").remove(),$("#resendOTP").css("color","#00b1f2"),null!=data&&void 0!=data&&""!=data){var responseData=$.parseJSON(data);responseData.otpResponse.success===!0||"true"===responseData.otpResponse.success?$("#generateOtp").addClass("opened"):($("#manage-pin-skip-step").css("pointer-events","none"),$("#manage-pin-skip-step").css("color","#8a8a96"),$("#digi-onb-error-ribbon").addClass("show"),null!=responseData.otpResponse.errorMsg&&void 0!=responseData.otpResponse.errorMsg&&""!=responseData.otpResponse.errorMsg?($("#digi-onb-error-ribbon-message").html(responseData.otpResponse.errorMsg),$("#setps-container-parent").scrollTop(0)):null!=responseData.otpResponse.message&&void 0!=responseData.otpResponse.message&&""!=responseData.otpResponse.message&&($("#digi-onb-error-ribbon-message").html(responseData.otpResponse.message),$("#setps-container-parent").scrollTop(0)))}else $("#digi-onb-error-ribbon").addClass("show"),$("#digi-onb-error-ribbon-message").html("Sorry , somethign went wrong.Please try again later"),$("#setps-container-parent").scrollTop(0)},err:function(data){$("body").find("div.digital-onb-loader").remove(),console.log("err OTP ===>"+data)}})}function generateOtp(){document.querySelector("#otp-input > input").value="",getmyOTp()}function generatePin(){document.querySelector("#body-before-otp").classList.add("hidden"),document.querySelector("#body-pin-generated").classList.remove("hidden"),document.querySelector("#generate-pin-text").innerHTML="PIN Generated",document.querySelector("#reset-pin-block").classList.contains("show")&&showResetFields()}function showResetFields(){$("#digi-ob-reset-pin-matched").remove(),$("#digi-ob-reset-pin-mismatch").remove(),$("#confirm-pin-reset").siblings(".digiOnbPinMismatch").html(""),el=document.querySelector("#reset-text"),el.innerHTML="Reset PIN"==el.innerHTML?"Cancel Reset":"Reset PIN",document.querySelector("#new-pin-reset > input").value="",document.querySelector("#confirm-pin-reset  > input").value="",document.querySelector("#step2-pin-button-reset").disabled=!0,document.querySelector("#reset-pin-block").classList.toggle("show"),document.querySelector("#reset-buttons").classList.toggle("show"),document.querySelector("#not-reset-buttons").classList.toggle("show")}function validateOtp(inputEl){var onboardedStaus=sessionStorage.getItem("onboardingStats"),onboardedStausJSON=JSON.parse(onboardedStaus);if(""!==$("#digi-onboard-new-pin").val()&&null!==$("#digi-onboard-new-pin").val()&&void 0!==$("#digi-onboard-new-pin").val())var atmPin1=$("#digi-onboard-new-pin").val();else var atmPin1=$("#digi-onb-new-pin-reset").val();if($("#digi-onb-conf-pin").val()&&null!==$("#digi-onb-conf-pin").val()&&void 0!==$("#digi-onb-conf-pin").val())var confirmPin1=$("#digi-onb-conf-pin").val();else var confirmPin1=$("#digi-onb-confirm-pin-reset").val();var data={managePinStepStatus:"",otp:inputEl.value,atmPin:atmPin1,confirmPin:confirmPin1};onboardedStausJSON.outputFacts.forEach(function(e){"Manage Pin"===e.stepName&&(console.log("Manage Pin ===>  "+e.stepStatusFlag),data.managePinStepStatus=e.stepStatusFlag)}),6==inputEl.value.length&&$.ajax({url:"/creditcards/app/digitalOnboarding/managePin",type:"POST",data:data,beforeSend:function(){$("#enter-card-detail-step-error").removeClass("show"),addDigiOnbLoaderModalBody(),$("#onb-error-otp").html("")},complete:function(){console.log("Call completed ----"),$(".modal-body").find("div.digital-onb-loader").remove()},success:function(data){if(void 0==data.success||"true"!=data.success&&1!=data.success){var invalidAttemptsOver=data.otpResponse.invalidAttemptsOver;1==invalidAttemptsOver&&($("#resendOTP").css("pointer-events","none"),$("#resendOTP").css("color","#8a8a96"),$("#onboard-otp-input").prop("disabled",!0),$("#onboard-otp-input").css("cursor","not-allowed"),$("#cancelManagePin").css("margin-bottom","3%")),$("#onboard-otp-input").val(""),data.otpResponse?($("#enter-card-detail-step-error").addClass("show"),$("#onb-error-otp").html(data.otpResponse.message)):($("#enter-card-detail-step-error").addClass("show"),$("#onb-error-otp").html(data.errorMsg))}else("true"==data.updateResponseString.managePinUpdateSuccess||1==data.updateResponseString.managePinUpdateSuccess||0==onboardedStausJSON.segmentationRule.updateOnEveryStep)&&(onboardedStausJSON.outputFacts.forEach(function(e){"Manage Pin"===e.stepName&&(e.stepStatusFlag="Actioned")}),sessionStorage.setItem("onboardingStats",JSON.stringify(onboardedStausJSON))),data.otpResponse&&($("#enter-card-detail-step-error").addClass("show"),$("#onb-error-otp").html(data.otpResponse.message)),inputEl.blur(),$("#generateOtp").removeClass("opened"),$("#digi-ob-reset-pin-matched").remove(),$("#digi-ob-pin-matched").remove(),$(".pin-gen-mesg").html(data.managePinSuccessMsg),generatePin()},failure:function(err){console.log(err+"<============= error")}})}function set3Subscribe(){var url="/creditcards/app/digitalOnboarding/opt-for-estatement",onboardedStaus=sessionStorage.getItem("onboardingStats"),onboardedStausJSON=JSON.parse(onboardedStaus);$(event.target).attr("disabled",!0);var eStateStatus={estatementStepStatus:""};onboardedStausJSON.outputFacts.forEach(function(e){"E-Statement Subscription"===e.stepName&&(console.log("E-Statement Subscription ===>  "+e.stepStatusFlag),eStateStatus.estatementStepStatus=e.stepStatusFlag)}),$.ajax({url:url,type:"POST",data:eStateStatus,beforeSend:function(){$("#digi-onb-error-ribbon").removeClass("show"),$("#digi-onb-error-ribbon-message").html(""),addDigiOnbLoaderBody()},complete:function(){$("body").find("div.digital-onb-loader").remove()},success:function(data){console.log(data+"<==================== E-Statement Subscription Success"),""!=data&&void 0!=data.success&&1==data.success?($("#step-estate-sub .sets.set-1").addClass("active"),$("#step-estate-sub .sets.set-3").removeClass("active"),""!==data.estatementSrNumber?(updateOnFinalSetpData.estatmentSrNumber=data.estatementSrNumber,$("#step-estate-sub .sets.set-1 p").html(),$("#step-estate-sub .sets.set-1 p").html(data.estatementSuccessMsg+"</br>"+data.estatementSrNumberMsg)):($("#step-estate-sub .sets.set-1 p").html(),$("#step-estate-sub .sets.set-1 p").html(data.estatementSuccessMsg)),("true"==data.updateResponseString.estatementUpdateStatus||1==data.updateResponseString.estatementUpdateStatus||0==onboardedStausJSON.segmentationRule.updateOnEveryStep)&&onboardedStausJSON.outputFacts.forEach(function(e){"E-Statement Subscription"===e.stepName&&(e.stepStatusFlag="Actioned")})):($("#digi-onb-error-ribbon").addClass("show"),$("#digi-onb-error-ribbon-message").html(data.errorMsg),$("#setps-container-parent").scrollTop(0)),sessionStorage.setItem("onboardingStats",JSON.stringify(onboardedStausJSON))},failure:function(data){console.log(data+"<==================== E-Statement Subscription failed")}})}function submitDigitalonboarding(data){var submitUrl="/creditcards/app/digitalOnboarding/submitOnboarding";$.ajax({url:submitUrl,type:"POST",data:data,beforeSend:function(){$("#digi-onb-error-ribbon").removeClass("show"),$("#digi-onb-error-ribbon-message").html(""),addDigiOnbLoaderBody()},complete:function(){$("body").find("div.digital-onb-loader").remove()},success:function(data){console.log(data),null!==data.updateResponseString&&void 0!==data.updateResponseString?($("#doConfimation").addClass("opened"),$("#finish-onboarding-done").click(function(){if("offer"===data.displayPage)if(""!==$("#noOffer").val()){$("#doConfimation").removeClass("opened"),$("#offer-screen").addClass("opened");$("#mobOnbSkipNow").hide(),$("#mobOnbSkipToDash").show()}else submitDigiOnbForm("/creditcards/app/dashboard",!0),setAnalyticsPost("My Dashboard");else submitDigiOnbForm("/creditcards/app/dashboard",!0),setAnalyticsPost("My Dashboard")})):(submitDigiOnbForm("/creditcards/app/dashboard",!0),setAnalyticsPost("My Dashboard"))},error:function(data){console.log("Faliure Data ====>",data)}})}function mobileNumbersubmitOtpPage(){if(""==$("#mobile-number-update-form #otp").val())return $("#mobile-number-update-form #otp").parent().find("label.valid").remove(),$("#mobile-number-update-form #otp").addClass("error"),$("#mobile-number-update-form #otp").after('<label for="otpNumber" class="error"> </label>'),!1;var mobile_temp=$("#mobile-number-update-form #edit-addon-mobileNumber").val();""!=$("#mobile-number-update-form #edit-addon-mobileNumber").val()&&callPrimaryMobileFormat(mobile_temp)&&$("#mobile-number-update-form").submit()}function MOBMobileUpdateCallSubmit(){var verifyClicked=$("#isverifyClicked").val();if(verifyClicked&&($("#contact-update-form").removeAttr("action"),$("#contact-update-form").attr("action","/creditcards/app/myprofile/verify-email-address")),""==$("#contact-update-form #otp").val())return $("#contact-update-form #otp").parent().find("label.valid").remove(),$("#contact-update-form #otp").addClass("error"),$("#contact-update-form #otp").after('<label for="otpNumber" class="error"> </label>'),!1;if($("#contact-update-form #otp").parent().find("label.error").remove(),$("#contact-update-form #otp").removeClass("error"),$("#contact-update-form #otp").after('<label for="otpNumber" class="valid" style="width:20px"> </label>'),"email"==$("#changedFieldName").val()||"verify_email"==$("#changedFieldName").val()){if("P"==$("#addon-cardType").val()){var email_temp=$("#contact-update-form #edit-addon-emailAddress").val(),mobile_temp=$("#contact-update-form #edit-addon-mobileNumber").val();if(""==$("#contact-update-form #edit-addon-emailAddress").val()||""==$("#contact-update-form #edit-addon-mobileNumber").val()){if(""==$("#contact-update-form #edit-addon-emailAddress").val()){$("#contact-update-form #edit-addon-emailAddress").parent().find("label").remove(),$(".tab-content.primarycard-edit-container.show-editable").show(),$("#contact-update-form #edit-addon-emailAddress").addClass("error");var errorEmailLable='<label for="emailAddress" class="error"> </label>';return $("#contact-update-form #edit-addon-emailAddress").after(errorEmailLable),!1}if(""==$("#contact-update-form #edit-addon-mobileNumber").val()){$("#contact-update-form #edit-addon-mobileNumber").parent().find("label").remove(),$(".tab-content.primarycard-edit-container.show-editable").show(),$("#contact-update-form #edit-addon-mobileNumber").addClass("error");var errorMobileLabel='<label for="mobileNumber" class="error"> </label>';return $("#contact-update-form #edit-addon-mobileNumber").after(errorMobileLabel),!1}$("#contact-update-form #edit-addon-emailAddress").parent().find("label").remove(),$("#contact-update-form #edit-addon-mobileNumber").parent().find("label").remove(),$(".tab-content.primarycard-edit-container.show-editable").show(),$("#contact-update-form #edit-addon-emailAddress").addClass("error"),$("#contact-update-form #edit-addon-mobileNumber").addClass("error");var errorEmailLable='<label for="emailAddress" class="error"> </label>';$("#contact-update-form #edit-addon-mobileNumber").after(errorEmailLable);var errorMobileLabel='<label for="mobileNumber" class="error"> </label>';return $("#contact-update-form #edit-addon-mobileNumber").after(errorMobileLabel),!1}if(callPrimaryEmailFormat(email_temp)&&callPrimaryMobileFormat(mobile_temp)){var validEmailLable='<label for="emailAddress" class="valid"> </label>';$("#contact-update-form #edit-addon-emailAddress").after(validEmailLable);var validMobileLabel='<label for="emailAddress" class="valid"> </label>';$("#contact-update-form #edit-addon-mobileNumber").after(validMobileLabel),wrongOTPFunction();var cardNo=$("#contact-update-form #addon-cardNo").val(),encryptedEmail=dataEncryptionAES(email_temp),encryptedMobile=dataEncryptionAES(mobile_temp),encryptedCardNo=dataEncryptionAES(cardNo);console.log("1.3 encryptedEmail:"+encryptedEmail+" encryptedMobile"+encryptedMobile+" cardno"+encryptedCardNo),$("#contact-update-form #edit-addon-mobileNumber").val(encryptedMobile),$("#contact-update-form #edit-addon-emailAddress").removeAttr("maxlength"),$("#contact-update-form #edit-addon-emailAddress").val(encryptedEmail),$("#contact-update-form #addon-cardNo").val(encryptedCardNo),$("#contact-update-form").submit()}else{return $(".tab-content.primarycard-edit-container.show-editable").show(),!1;var errorEmailLable,errorMobileLabel}}else if("S"==$("#addon-cardType").val()||"A"==$("#addon-cardType").val()){$(".myprofile-addonDisText").show();var email_temp=$("#contact-update-form #edit-addon-emailAddress").val(),mobile_temp=$("#contact-update-form #edit-addon-mobileNumber").val();if(!callAddOnEmailFormat(email_temp)||!callAddOnMobileFormat(mobile_temp)){if(!callAddOnEmailFormat(email_temp)){$("#contact-update-form #edit-addon-emailAddress").parent().find("label").remove(),$("#contact-update-form #edit-addon-emailAddress").addClass("error");var errorEmailLable='<label for="emailAddress" class="error"> </label>';$("#contact-update-form #edit-addon-emailAddress").after(errorEmailLable),$(".tab-content.primarycard-edit-container.show-editable").show()}if(!callAddOnMobileFormat(mobile_temp)){$("#contact-update-form #edit-addon-mobileNumber").parent().find("label").remove();var errorMobileLabel='<label for="mobileNumber" class="error"> </label>';$("#contact-update-form #edit-addon-mobileNumber").after(errorMobileLabel),$(".tab-content.primarycard-edit-container.show-editable").show()
}return!1}var validEmailLable='<label for="emailAddress" class="valid"> </label>';$("#contact-update-form #edit-addon-emailAddress").after(validEmailLable);var validMobileLabel='<label for="mobileNumber" class="valid"> </label>';$("#contact-update-form #edit-addon-mobileNumber").after(validMobileLabel),wrongOTPFunction(),$("#contact-update-form").submit()}}else if("P"==$("#addon-cardType").val()){var email_temp=$("#contact-update-form #edit-addon-emailAddress").val(),mobile_temp=$("#contact-update-form #edit-addon-mobileNumber").val();if(console.log("mobile_temp"+mobile_temp),console.log("email_temp"+email_temp),""!=$("#contact-update-form #edit-addon-mobileNumber").val()&&""!=$("#contact-update-form #edit-addon-emailAddress").val()){if(!callPrimaryEmailFormat(email_temp)||!callPrimaryMobileFormat(mobile_temp)){if($(".tab-content.primarycard-edit-container.show-editable").show(),!callPrimaryEmailFormat(email_temp)){$("#contact-update-form #edit-addon-emailAddress").parent().find("label").remove(),$("#contact-update-form #edit-addon-emailAddress").addClass("error");var errorEmailLable='<label for="emailAddress" class="error"> </label>';$("#contact-update-form #edit-addon-emailAddress").after(errorEmailLable),$(".tab-content.primarycard-edit-container.show-editable").show()}if(!callPrimaryMobileFormat(mobile_temp)){$("#contact-update-form #edit-addon-mobileNumber").parent().find("label").remove();var errorMobileLabel='<label for="mobileNumber" class="error"> </label>';$("#contact-update-form #edit-addon-mobileNumber").after(errorMobileLabel),$(".tab-content.primarycard-edit-container.show-editable").show()}return!1}var validEmailLable='<label for="emailAddress" class="valid"> </label>';$("#contact-update-form #edit-addon-emailAddress").after(validEmailLable);var validMobileLabel='<label for="emailAddress" class="valid"> </label>';$("#contact-update-form #edit-addon-mobileNumber").after(validMobileLabel),wrongOTPFunction();var cardNo=$("#contact-update-form #addon-cardNo").val(),encryptedEmail=dataEncryptionAES(email_temp),encryptedMobile=dataEncryptionAES(mobile_temp),encryptedCardNo=dataEncryptionAES(cardNo);console.log("3 encryptedEmail:"+encryptedEmail+" encryptedMobile"+encryptedMobile+" cardno"+encryptedCardNo),$("#contact-update-form #edit-addon-emailAddress").removeAttr("maxlength"),$("#contact-update-form #edit-addon-mobileNumber").removeAttr("maxlength"),$("#contact-update-form #edit-addon-mobileNumber").val(encryptedMobile),$("#contact-update-form #edit-addon-emailAddress").val(encryptedEmail),$("#contact-update-form #addon-cardNo").val(encryptedCardNo),$("#contact-update-form").submit()}else if(""!=$("#contact-update-form #edit-addon-mobileNumber").val()&&""==$("#contact-update-form #edit-addon-emailAddress").val()){if(!callPrimaryMobileFormat(mobile_temp)){$("#contact-update-form #edit-addon-mobileNumber").parent().find("label").remove();var errorMobileLabel='<label for="mobileNumber" class="error"> </label>';return $("#contact-update-form #edit-addon-mobileNumber").after(errorMobileLabel),$(".tab-content.primarycard-edit-container.show-editable").show(),!1}$("#contact-update-form").submit()}else if(""==$("#contact-update-form #edit-addon-mobileNumber").val()){$("#contact-update-form #edit-addon-mobileNumber").parent().find("label").remove(),$("#contact-update-form #edit-addon-mobileNumber").addClass("error");var errorMobileLabel='<label for="mobileNumber" class="error"> </label>';return $("#contact-update-form #edit-addon-mobileNumber").after(errorMobileLabel),$(".tab-content.primarycard-edit-container.show-editable").show(),!1}}else if("S"==$("#addon-cardType").val()||"A"==$("#addon-cardType").val()){$(".myprofile-addonDisText").show();var email_temp=$("#contact-update-form #edit-addon-emailAddress").val(),mobile_temp=$("#contact-update-form #edit-addon-mobileNumber").val();if(!callAddOnEmailFormat(email_temp)||!callAddOnMobileFormat(mobile_temp)){if(!callAddOnEmailFormat(email_temp)){$("#contact-update-form #edit-addon-emailAddress").parent().find("label").remove(),$("#contact-update-form #edit-addon-emailAddress").addClass("error");var errorEmailLable='<label for="emailAddress" class="error"> </label>';$("#contact-update-form #edit-addon-emailAddress").after(errorEmailLable),$(".tab-content.primarycard-edit-container.show-editable").show()}if(!callAddOnMobileFormat(mobile_temp)){$("#contact-update-form #edit-addon-mobileNumber").parent().find("label").remove();var errorMobileLabel='<label for="mobileNumber" class="error"> </label>';$("#contact-update-form #edit-addon-mobileNumber").after(errorMobileLabel),$(".tab-content.primarycard-edit-container.show-editable").show()}return!1}var validEmailLable='<label for="emailAddress" class="valid"> </label>';$("#contact-update-form #edit-addon-emailAddress").after(validEmailLable);var validMobileLabel='<label for="mobileNumber" class="valid"> </label>';$("#contact-update-form #edit-addon-mobileNumber").after(validMobileLabel),wrongOTPFunction(),$("#contact-update-form").submit()}}function mobEditContactDetail(){$("#submit-onedit-contact").css("display","inline-block"),viewport.width<768?($(".tooltip-primary-mobile").hide(),$(".tooltip-primary-email").hide(),$(".tooltip-addon-mobile").hide(),$(".tooltip-addon-email").hide()):"P"==$("#addon-cardType").val()?($(".tooltip-primary-email").show(),$(".tooltip-addon-email").hide(),$(".tooltip-primary-mobile").show(),$(".tooltip-addon-mobile").hide()):("S"==$("#addon-cardType").val()||"A"==$("#addon-cardType").val())&&($(".tooltip-primary-email").hide(),$(".tooltip-addon-email").show(),$(".tooltip-primary-mobile").hide(),$(".tooltip-addon-mobile").show()),"P"==$("#addon-cardType").val()?($(".primary-otp-msg").show(),$(".addon-otp-msg").hide()):("S"==$("#addon-cardType").val()||"A"==$("#addon-cardType").val())&&($(".primary-otp-msg").hide(),$(".addon-otp-msg").show())}function submitFormAurum(action,isAnchor){try{if(isAnchor){var loaderHtml='<div class="overlay-loader"></div>',$target=$("body");$target.append(loaderHtml)}var token=$("#aurum-synchronizerToken").val();$("#dynaform").append('<form style="position:absolute; left:-1000px;top:-1000px;"action="'+action+'" method="POST" class="dynaForm">'),$("#dynaform form").append('<input type="hidden" name="synchronizerToken" id="synchronizerToken" value="'+token+'"/>'),$("#dynaform form").append('<br><input type="submit" id="savebutton" value="" />'),$("#dynaform form").submit()}catch(e){console.log("error while submitting aurum form!")}}function submitFormToPoshvine(action,isAnchor){try{if(isAnchor){var loaderHtml='<div class="overlay-loader"></div>',$target=$("body");$target.append(loaderHtml)}var tokenPoshvine=$("#access_token_cookie").val();$("#dynaform").append('<form style="position:absolute; left:-1000px;top:-1000px;"action="'+action+'" method="POST" class="dynaForm">'),$("#dynaform form").append('<input type="hidden" name="token" id="poshvineToken" value="'+tokenPoshvine+'"/>'),$("#dynaform form").append('<br><input type="submit" id="savebutton" value="" />'),$("#dynaform form").submit()}catch(e){console.log("error while submitting aurum form!")}}function aurumLoginToggleContact(){window.innerWidth<1201&&document.querySelector(".aurum-login-template-container .sp-popover-wrapper").classList.toggle("active")}function aurumLogintoggleMenu(){var allMenuItems=document.querySelectorAll(".aurum-login-template-container .sp-navigation > ul > li"),reverseMenuItems=[].slice.call(allMenuItems,0).reverse();if(document.querySelector(".aurum-login-template-container .sp-navigation").classList.contains("active")){setTimeout(function(){document.querySelector(".aurum-login-template-container .sp-navigation").classList.remove("active"),setTimeout(function(){document.querySelector(".aurum-login-template-container .sp-navigation").classList.remove("in")},500)},400),document.querySelector(".aurum-login-template-container .sp-header").classList.contains("user-logged-in")&&document.querySelector(".aurum-login-template-container .user-mobile-block").classList.remove("fadein"),setTimeout(function(){document.querySelector(".aurum-login-template-container .sp-navigation .sp-header-logo").classList.remove("fade-in"),document.querySelector(".aurum-login-template-container .sp-navigation .sp-header-cross").classList.remove("fade-in")},50*allMenuItems.length-400);for(var allMenuItems=document.querySelectorAll(".aurum-login-template-container .sp-navigation > ul > li"),i=0;i<allMenuItems.length;i++)setTimeout(allMenuItems[i].classList.toggle("loaded"),50*i)}else document.querySelector(".aurum-login-template-container .sp-navigation").classList.add("in"),setTimeout(function(){document.querySelector(".aurum-login-template-container .sp-navigation").classList.add("active")},1),setTimeout(function(){console.log(50*reverseMenuItems.length+100),document.querySelector(".aurum-login-template-container .sp-navigation .sp-header-logo").classList.add("fade-in"),document.querySelector(".aurum-login-template-container .sp-navigation .sp-header-cross").classList.add("fade-in")},50*reverseMenuItems.length+300),console.log("reverseMenuItems",reverseMenuItems),setTimeout(function(){for(var j=0;j<reverseMenuItems.length;j++)setTimeout(reverseMenuItems[j].classList.toggle("loaded"),50*j)},300),document.querySelector(".aurum-login-template-container .sp-header").classList.contains("user-logged-in")&&setTimeout(function(){document.querySelector(".aurum-login-template-container .user-mobile-block").classList.add("fadein")},500)}function dragElement(elmnt){function dragMouseDown(e){e=e||window.event,e.preventDefault(),pos3=e.clientX,pos4=e.clientY,document.onmouseup=closeDragElement,document.onmousemove=elementDrag}function elementDrag(e){e=e||window.event,e.preventDefault(),pos1=pos3-e.clientX,pos2=pos4-e.clientY,pos3=e.clientX,pos4=e.clientY,elmnt.style.top=elmnt.offsetTop-pos2+"px",elmnt.style.left=elmnt.offsetLeft-pos1+"px"}function closeDragElement(){document.onmouseup=null,document.onmousemove=null}var pos1=0,pos2=0,pos3=0,pos4=0;document.getElementById(elmnt.id+"header")?document.getElementById(elmnt.id+"header").onmousedown=dragMouseDown:elmnt.onmousedown=dragMouseDown}function forgetPassRedirect(){window.location.href="https://www.sbicard.com/creditcards/app/user/forgotpassword-page"}function showInitialSwitchDetails(){showSwitchDetailsDomestic(),showSwitchDetailsInternational(),8==switchesActivatedCounter&&($(".notAllActivated").addClass("hide"),$(".allActivated").removeClass("hide"))}function showSwitchDetailsDomestic(){"1"==manageCardUsageSwitchDetailsJSONobj.getCardUsageDetailsResponse.domesticTransactionsControl.ecom.activationFlag.value&&($(".DT_ECOM #DT_ECOM + span.MCU-slider").addClass("hide"),$(".DT_ECOM #DT_ECOM ~ span.icon.hide").removeClass("hide"),switchesActivatedCounter++),"1"==manageCardUsageSwitchDetailsJSONobj.getCardUsageDetailsResponse.domesticTransactionsControl.pos.activationFlag.value&&($(".DT_POS #DT_POS").addClass("hide"),$(".DT_POS #DT_POS + span.MCU-slider").addClass("hide"),$(".DT_POS #DT_POS ~ span.icon.hide").removeClass("hide"),switchesActivatedCounter++),"1"==manageCardUsageSwitchDetailsJSONobj.getCardUsageDetailsResponse.domesticTransactionsControl.poscontactLess.activationFlag.value&&($(".DT_POSContactLess #DT_POSContactLess").addClass("hide"),$(".DT_POSContactLess #DT_POSContactLess + span.MCU-slider").addClass("hide"),$(".DT_POSContactLess #DT_POSContactLess ~ span.icon.hide").removeClass("hide"),switchesActivatedCounter++),"1"==manageCardUsageSwitchDetailsJSONobj.getCardUsageDetailsResponse.domesticTransactionsControl.atm.activationFlag.value&&($(".DT_ATM #DT_ATM").addClass("hide"),$(".DT_ATM #DT_ATM + span.MCU-slider").addClass("hide"),$(".DT_ATM #DT_ATM ~ span.icon.hide").removeClass("hide"),switchesActivatedCounter++)}function showSwitchDetailsInternational(){"1"==manageCardUsageSwitchDetailsJSONobj.getCardUsageDetailsResponse.internationalTransactionsControl.ecom.activationFlag.value&&($(".IT_ECOM #IT_ECOM").addClass("hide"),$(".IT_ECOM #IT_ECOM + span.MCU-slider").addClass("hide"),$(".IT_ECOM #IT_ECOM ~ span.icon.hide").removeClass("hide"),switchesActivatedCounter++),"1"==manageCardUsageSwitchDetailsJSONobj.getCardUsageDetailsResponse.internationalTransactionsControl.pos.activationFlag.value&&($(".IT_POS #IT_POS").addClass("hide"),$(".IT_POS #IT_POS + span.MCU-slider").addClass("hide"),$(".IT_POS #IT_POS ~ span.icon.hide").removeClass("hide"),switchesActivatedCounter++),"1"==manageCardUsageSwitchDetailsJSONobj.getCardUsageDetailsResponse.internationalTransactionsControl.poscontactLess.activationFlag.value&&($(".IT_POSContactLess #IT_POSContactLess").addClass("hide"),$(".IT_POSContactLess #IT_POSContactLess + span.MCU-slider").addClass("hide"),$(".IT_POSContactLess #IT_POSContactLess ~ span.icon.hide").removeClass("hide"),switchesActivatedCounter++),"1"==manageCardUsageSwitchDetailsJSONobj.getCardUsageDetailsResponse.internationalTransactionsControl.atm.activationFlag.value&&($(".IT_ATM #IT_ATM").addClass("hide"),$(".IT_ATM #IT_ATM + span.MCU-slider").addClass("hide"),$(".IT_ATM #IT_ATM ~ span.icon.hide").removeClass("hide"),switchesActivatedCounter++)}function MCUOTPvalidate(event){var otp=$("#generateOtpMCU #onboard-otp-input").val();if(!(event.keyCode<48||event.keyCode>57||6!=otp.length)){var encryptedOtp=dataEncryptionAES(otp),onboardedStaus=sessionStorage.getItem("onboardingStats"),onboardedStausJSON=JSON.parse(onboardedStaus),passphraseDO=randomStringGenerator(10,!0,!1),internationUsageActivationStepStatus="";onboardedStausJSON.outputFacts.forEach(function(e){"International Usage Activation"===e.stepName&&(console.log("International Usage Activation ===>  "+e.stepStatusFlag),internationUsageActivationStepStatus=e.stepStatusFlag)});var dataToSend={updatedSwitchNamesList:flagList.toString(),encryptedOtp:encryptedOtp,internationUsageActivationStepStatus:internationUsageActivationStepStatus,passphraseDO:passphraseDO};$("#generateOtpMCU #MCU-enter-card-detail-step-error").css("display","none"),$.ajax({url:"/creditcards/app/digitalOnboarding/update-manage-card-usage",type:"POST",data:dataToSend,beforeSend:function(){addDigiOnbLoaderModalBody()},complete:function(){$("#generateOtpMCU #onboard-otp-input").val(""),$("#generateOtpMCU #onboard-otp-input").focus(),$(document).find("div.digital-onb-loader").remove()},success:function(response){var responseString=dataDecryptionAES(response,passphraseDO);response=JSON.parse(responseString),response.hasOwnProperty("updateCardUsageDetailsResponse")?(response.updateCardUsageDetailsResponse=JSON.parse(response.updateCardUsageDetailsResponse),"000"===response.updateCardUsageDetailsResponse.journeyStatusCode||"999"==response.updateCardUsageDetailsResponse.journeyStatusCode?(0==onboardedStausJSON.segmentationRule.updateOnEveryStep&&onboardedStausJSON.outputFacts.forEach(function(e){"International Usage Activation"===e.stepName&&(e.stepStatusFlag="Actioned")}),$("#generateOtpMCU").removeClass("opened"),$("#step-international-usage .sets.set-1").removeClass("active"),$("#step-international-usage .sets.set-2").addClass("active"),$(".intl-usage-already-active-text").show(),$(".intl-usage-activated-text").hide(),$("#step-international-usage .sets.set-2 #body-after-IUActivation").removeClass("hidden"),$("#MCU-username").text(manageCardUsageSwitchDetailsJSONobj.getCardUsageDetailsResponse.cardEmbossedName1),"000"===response.updateCardUsageDetailsResponse.journeyStatusCode&&($("#MCU-SR-present").html('. Please note the SR. No. <span class="MCU-SR"></span> for future reference.'),$(".MCU-SR").text(response.updateCardUsageDetailsResponse.updateCardUsageDetailsResponse.srNumber))):("002"==response.updateCardUsageDetailsResponse.journeyStatusCode&&($("#generateOtpMCU #onboard-otp-input").prop("readonly","true"),$("#generateOtpMCU #onboard-otp-input").css("cursor","not-allowed"),$(".MCU-resendOTP").addClass("disable-resend-OTP")),$("#MCU-enter-card-detail-step-error").css("background-color","#f74747"),$("#generateOtpMCU #MCU-enter-card-detail-step-error span").html(response.updateCardUsageDetailsResponse.statusMesg),$("#generateOtpMCU #MCU-enter-card-detail-step-error").css("display","block"))):response.hasOwnProperty("errorCode")&&($("#generateOtpMCU #MCU-enter-card-detail-step-error").css("display","block"),$("#MCU-enter-card-detail-step-error").css("background-color","#f74747"),$("#generateOtpMCU #MCU-enter-card-detail-step-error span").html("Sorry! You cannot avail this service at the moment. Please try again later or call the SBI Card helpline at 39 02 02 02 (prefix the STD code of your city)."))},error:function(){$(document).find("div.digital-onb-loader").remove(),$("#generateOtpMCU #MCU-enter-card-detail-step-error").css("display","block"),$("#MCU-enter-card-detail-step-error").css("background-color","#f74747"),$("#generateOtpMCU #MCU-enter-card-detail-step-error span").html("Sorry! You cannot avail this service at the moment. Please try again later")}})}}function removeFlagFromFlagList(arr,value){var index=arr.indexOf(value);return index>-1&&arr.splice(index,1),arr}function randomStringGenerator(length,char,num){var result="",characters="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",numbers="0123456789",finalString="";finalString=1==char?finalString+characters:finalString,finalString=1==num?finalString+numbers:finalString;for(var finalStringLength=finalString.length,i=0;length>i;i++)result+=finalString.charAt(Math.floor(Math.random()*finalStringLength));return result}function dataDecryptionAES(encryptedText,passphrase){var passphrase=void 0==passphrase||null==passphrase||""==passphrase?"BAgtAGHLCb":passphrase,salt1=CryptoJS.enc.Hex.parse(encryptedText.substr(0,32)),iv1=CryptoJS.enc.Hex.parse(encryptedText.substr(32,32)),encrypted1=encryptedText.substring(64),key1=CryptoJS.PBKDF2(passphrase,salt1,{keySize:4,iterations:100}),decrypted=CryptoJS.AES.decrypt(encrypted1,key1,{iv:iv1,padding:CryptoJS.pad.Pkcs7,mode:CryptoJS.mode.CBC}),decryptedDataPassed=decrypted.toString(CryptoJS.enc.Utf8);return decryptedDataPassed}function changeStep(nextStep,currentStep){var cardFeatureDisplay=$("#cardFeatureAvailable").val();if(document.querySelector(".do-step-container.active")&&("step-do-confirmation"==nextStep&&"N"==cardFeatureDisplay?console.log("card feature not available"):document.querySelector(".do-step-container.active").classList.remove("active")),null!==currentStep&&void 0!==currentStep)var currentStep="#"+currentStep,currentStepHeading=currentStep+" .do-step-heading-text";else var currentStep="#"+nextStep,currentStepHeading=currentStep+" .do-step-heading-text";switch(console.log("current step is --------",currentStep),console.log("next step is --------",nextStep),currentStep!=="#"+nextStep&&document.querySelector(currentStep).classList.add("done"),document.querySelector("#counter-number").innerHTML=parseInt(document.getElementById(nextStep).getAttribute("data-step-count"))+1,nextStep){case"step-card-activation":document.querySelector("#step-card-activation").classList.contains("done")?document.querySelector("#step-card-activation").classList.add("active"):(document.querySelector("#step-card-activation").classList.add("in-progress"),document.querySelector("#step-card-activation").classList.add("active"),document.querySelector("#step-card-activation").classList.remove("done")),document.querySelector("#finish-bottom-box").classList.remove("show");break;case"step-generate-pin":document.querySelector("#step-generate-pin").classList.contains("done")?document.querySelector("#step-generate-pin").classList.add("active"):(null!==document.querySelector("#step-card-activation")&&(document.querySelector("#step-card-activation").classList.add("done"),document.querySelector("#step-card-activation").classList.remove("in-progress"),document.querySelector("#step-card-activation").classList.remove("active"),document.querySelector("#step-card-activation .do-step-heading-text").classList.add("clickable")),document.querySelector("#step-generate-pin").classList.add("in-progress"),document.querySelector("#step-generate-pin").classList.add("active"),document.querySelector("#step-generate-pin .do-step-heading-text").classList.add("clickable")),document.querySelector("#finish-bottom-box").classList.remove("show");break;case"step-estate-sub":console.log("current step inside--",currentStep),document.querySelector(currentStep).classList.remove("in-progress"),document.querySelector(currentStepHeading).classList.add("clickable"),document.querySelector("#step-estate-sub .do-step-heading-text").classList.add("clickable"),document.querySelector("#finish-bottom-box").classList.remove("show"),document.querySelector("#step-estate-sub").classList.add("active"),document.querySelector("#step-estate-sub").classList.contains("done")||document.querySelector("#step-estate-sub").classList.add("in-progress");break;case"step-international-usage":document.querySelector(currentStep).classList.remove("in-progress"),document.querySelector(currentStepHeading).classList.add("clickable"),document.querySelector("#step-international-usage .do-step-heading-text").classList.add("clickable"),document.querySelector("#finish-bottom-box").classList.remove("show"),document.querySelector("#step-international-usage").classList.add("active"),document.querySelector("#step-international-usage").classList.contains("done")||document.querySelector("#step-international-usage").classList.add("in-progress");break;case"step-do-confirmation":document.querySelector("#step-do-confirmation").classList.contains("done")&&(console.log("inside step conf done"),"N"!=cardFeatureDisplay&&document.querySelector("#step-do-confirmation").classList.add("active")),"N"!=cardFeatureDisplay&&(console.log("inside step conf not done"),document.querySelector("#step-do-confirmation").classList.add("in-progress"),document.querySelector("#step-do-confirmation").classList.add("active"),document.querySelector(currentStep).classList.add("done"),document.querySelector(currentStep).classList.remove("in-progress"),document.querySelector(currentStepHeading).classList.add("clickable"),document.querySelector("#step-do-confirmation .do-step-heading-text").classList.add("clickable"),hangleFinishSticky())}const targetEle=document.querySelector(".do-step-container.active");targetEle&&window.outerWidth<768&&(document.querySelector("html").scrollTop=targetEle.offsetTop+100)}function dataEncryptionAES(data,passphrase){var passphrase=void 0==passphrase||null==passphrase||""==passphrase?"BAgtAGHLCb":passphrase;if(passphrase)var salt=CryptoJS.lib.WordArray.random(16),iv=CryptoJS.lib.WordArray.random(16),key=CryptoJS.PBKDF2(passphrase,salt,{keySize:4,iterations:100}),encryptedData=CryptoJS.AES.encrypt(data,key,{iv:iv,mode:CryptoJS.mode.CBC,padding:CryptoJS.pad.Pkcs7}),dataPassed=salt+iv+encryptedData;else dataPassed=data;return dataPassed}function submitFraudForm(){var enableForm=($("#otpKey").val(),submitFraudOTP());if(enableForm){var val=$("#fraud-otp").val(),encryptVal=dataEncryptionAES(val);$("#fraud-otp").val(encryptVal),document.getElementById("fraudulent-form").submit(),$("#fraud-otp").val(val)}}function dataDecryptionAES(encryptedText,passphrase){var passphrase=void 0==passphrase||null==passphrase||""==passphrase?"BAgtAGHLCb":passphrase,salt1=CryptoJS.enc.Hex.parse(encryptedText.substr(0,32)),iv1=CryptoJS.enc.Hex.parse(encryptedText.substr(32,32)),encrypted1=encryptedText.substring(64),key1=CryptoJS.PBKDF2(passphrase,salt1,{keySize:4,iterations:100}),decrypted=CryptoJS.AES.decrypt(encrypted1,key1,{iv:iv1,padding:CryptoJS.pad.Pkcs7,mode:CryptoJS.mode.CBC}),decryptedDataPassed=decrypted.toString(CryptoJS.enc.Utf8);return decryptedDataPassed}function decryptResponse(encryptedText,passPhrase){var passphrase=passPhrase,salt=CryptoJS.enc.Hex.parse(encryptedText.substr(0,32)),iv=CryptoJS.enc.Hex.parse(encryptedText.substr(32,32)),encrypted=encryptedText.substring(64),key=CryptoJS.PBKDF2(passphrase,salt,{keySize:4,iterations:100}),decrypted=CryptoJS.AES.decrypt(encrypted,key,{iv:iv,padding:CryptoJS.pad.Pkcs7,mode:CryptoJS.mode.CBC});return JSON.parse(decrypted.toString(CryptoJS.enc.Utf8))}function showPasswordCardModal(){$("#card_no").addClass("otpEncrypt")}function showPasswordforgotpassModal(){var a=document.getElementById("card-number-single");"password"===a.type?(a.type="text",$(".password-icon img").attr("src","/creditcards/resources/img/open-eye.svg")):(a.type="password",$(".password-icon img").attr("src","/creditcards/resources/img/eye-closed.svg"))}function dataEncryptionAES(data,passphrase){var passphrase=void 0==passphrase||null==passphrase||""==passphrase?"BAgtAGHLCb":passphrase;if(passphrase)var salt=CryptoJS.lib.WordArray.random(16),iv=CryptoJS.lib.WordArray.random(16),key=CryptoJS.PBKDF2(passphrase,salt,{keySize:4,iterations:100}),encryptedData=CryptoJS.AES.encrypt(data,key,{iv:iv,mode:CryptoJS.mode.CBC,padding:CryptoJS.pad.Pkcs7}),dataPassed=salt+iv+encryptedData;else dataPassed=data;return dataPassed}function updateCreditLimit(){var loaderHtml='<div class="overlay-loader"></div>';$("body").append(loaderHtml);var tempAddOnVal=$("#edit-input-creditlimit").val(),maxValue=$("#creditlimit-range").attr("max"),existAddonVal=$("#creditlimit-range").attr("addonval");return $(".err-notMultipleOfThousand").hide(),parseInt(tempAddOnVal)<1e3?($("body").find("div.overlay-loader").remove(),$(".err-totalRetailLimit").css("display","none"),$(".err-sameCreditLimit").css("display","none"),$(".err-lessCreditLimit").css("display","block"),!1):parseInt(tempAddOnVal)>parseInt(maxValue)?($("body").find("div.overlay-loader").remove(),$(".err-totalRetailLimit").css("display","block"),$(".err-sameCreditLimit").css("display","none"),$(".err-lessCreditLimit").css("display","none"),!1):parseInt(tempAddOnVal)==parseInt(existAddonVal)?($("body").find("div.overlay-loader").remove(),$(".err-sameCreditLimit").css("display","block"),$(".err-totalRetailLimit").css("display","none"),$(".err-lessCreditLimit").css("display","none"),!1):($(".input-limit-container span").css("display","none"),!0)}function callDncOfferEligibility(data){console.log(data);var data=data;setTimeout(function(){dncOfferEligibility(data)},5e3)}function dncOfferEligibility(data){if(window.analytics){var dncAllowed=sessionStorage.getItem("encashEligibility");if(sessionStorage.removeItem("encashEligibility"),"true"==dncAllowed){{({session_id:$("#encash-form #encashAnalyticsSessionId").val(),journey_name:$("#encash-form #encashJourneyName").val(),journey_id:$("#encash-form #encashJourneyId").val(),inbound_channel:"Website",account_no:$("#encash-form #encashRegisteredAccountNumber").val(),source_page_url:window.location.href,status:1==data.success?"success":"failure",error_code:"",error_description:0==data.success?data.message:"",customer_ip_address:$("#encash-form #encashFromIpAddress").val(),evar1:$("#encash-form #bookingAmnt").val(),page_name:"Encash Booking",referer:$("#encash-form #encashReferer").val()?$("#encash-form #encashReferer").val():window.location.href})}analytics.track("check_offer_eligibility",{session_id:$("#encash-form #encashAnalyticsSessionId").val(),journey_name:$("#encash-form #encashJourneyName").val(),journey_id:$("#encash-form #encashJourneyId").val(),inbound_channel:"Website",account_no:$("#encash-form #encashRegisteredAccountNumber").val(),source_page_url:window.location.href,status:1==data.success?"success":"failure",error_code:"",error_description:0==data.success?data.message:"",customer_ip_address:$("#encash-form #encashFromIpAddress").val(),evar1:$("#encash-form #bookingAmnt").val(),page_name:"Encash Booking",referer:$("#encash-form #encashReferer").val()?$("#encash-form #encashReferer").val():window.location.href})}}}function callDncOTPResendEncash(data){console.log(data);var data=data;setTimeout(function(){dncOTPResendEncash(data)},5e3)}function dncOTPResendEncash(data){if(window.analytics&&$(".my-account.encash").exists()){{({session_id:$("#encash-form #encashAnalyticsSessionId").val(),journey_name:$("#encash-form #encashJourneyName").val(),journey_id:$("#encash-form #encashJourneyId").val(),inbound_channel:"Website",account_no:$("#encash-form #encashRegisteredAccountNumber").val(),source_page_url:window.location.href,status:1==data.success?"success":"failure",error_code:"",error_description:0==data.success?data.message:"",customer_ip_address:$("#encash-form #encashFromIpAddress").val(),evar1:"Y",page_name:"Encash Booking",referer:$("#encash-form #encashReferer").val()?$("#encash-form #encashReferer").val():window.location.href})}analytics.track("avail_offer_otp_gen",{session_id:$("#encash-form #encashAnalyticsSessionId").val(),journey_name:$("#encash-form #encashJourneyName").val(),journey_id:$("#encash-form #encashJourneyId").val(),inbound_channel:"Website",account_no:$("#encash-form #encashRegisteredAccountNumber").val(),source_page_url:window.location.href,status:1==data.success?"success":"failure",error_code:"",error_description:0==data.success?data.message:"",customer_ip_address:$("#encash-form #encashFromIpAddress").val(),evar1:"Y",page_name:"Encash Booking",referer:$("#encash-form #encashReferer").val()?$("#encash-form #encashReferer").val():window.location.href})}}function callDncOTPgenEncash(data){console.log(data);var data=data;setTimeout(function(){dncOTPgenEncash(data)},5e3)}function dncOTPgenEncash(data){if(window.analytics&&$(".my-account.encash").exists()){{({session_id:$("#encash-form #encashAnalyticsSessionId").val(),journey_name:$("#encash-form #encashJourneyName").val(),journey_id:$("#encash-form #encashJourneyId").val(),inbound_channel:"Website",account_no:$("#encash-form #encashRegisteredAccountNumber").val(),source_page_url:window.location.href,status:1==data.success?"success":"failure",error_code:"",error_description:0==data.success?data.message:"",customer_ip_address:$("#encash-form #encashFromIpAddress").val(),evar1:"N",page_name:"Encash Booking",referer:$("#encash-form #encashReferer").val()?$("#encash-form #encashReferer").val():window.location.href})}analytics.track("avail_offer_otp_gen",{session_id:$("#encash-form #encashAnalyticsSessionId").val(),journey_name:$("#encash-form #encashJourneyName").val(),journey_id:$("#encash-form #encashJourneyId").val(),inbound_channel:"Website",account_no:$("#encash-form #encashRegisteredAccountNumber").val(),source_page_url:window.location.href,status:1==data.success?"success":"failure",error_code:"",error_description:0==data.success?data.message:"",customer_ip_address:$("#encash-form #encashFromIpAddress").val(),evar1:"N",page_name:"Encash Booking",referer:$("#encash-form #encashReferer").val()?$("#encash-form #encashReferer").val():window.location.href})}}function callC2bOtpGen(data){console.log(data);var data=data;setTimeout(function(){c2bOtpGen(data)},3e3)}function c2bOtpGen(data){if(window.analytics){{({session_id:$("#campaign-form #analyticsSessionId").val(),journey_name:$("#campaign-form #featureName").val(),journey_id:$("#campaign-form #journeyId").val(),inbound_channel:"Website",source_page_url:window.location.href,status:1==data.success?"success":"failure",error_code:"",error_description:0==data.success?data.message:"",customer_ip_address:$("#campaign-form #fromIpAddress").val(),page_name:"C2B Landing Page",referer:$("#campaign-form #referer").val()?$("#campaign-form #referer").val():window.location.href})}analytics.track("C2B_otp_gen",{session_id:$("#campaign-form #analyticsSessionId").val(),journey_name:$("#campaign-form #featureName").val(),journey_id:$("#campaign-form #journeyId").val(),inbound_channel:"Website",source_page_url:window.location.href,status:1==data.success?"success":"failure",error_code:"",error_description:0==data.success?data.message:"",customer_ip_address:$("#campaign-form #fromIpAddress").val(),page_name:"C2B Landing Page",referer:$("#campaign-form #referer").val()?$("#campaign-form #referer").val():window.location.href})}}function dncTrackStatusEncash(){if(window.analytics&&(console.log("track_status1"),$("#encash-outbound-success").exists())){sessionStorage.setItem("abandon","false");
{({session_id:$(".main-wrap #encashAnalyticsSessionId").val(),journey_name:$(".main-wrap #encashJourneyName").val(),journey_id:$(".main-wrap #encashJourneyId").val(),inbound_channel:"Website",account_no:$(".main-wrap #encashRegisteredAccountNumber").val(),source_page_url:window.location.href,customer_ip_address:$(".main-wrap #encashFromIpAddress").val(),page_name:"Encash Confirmation",status:"Success",error_code:"",error_description:"",referer:$(".main-wrap #encashReferer").val()?$(".main-wrap #encashReferer").val():window.location.href})}analytics.track("track_status",{session_id:$(".main-wrap #encashAnalyticsSessionId").val(),journey_name:$(".main-wrap #encashJourneyName").val(),journey_id:$(".main-wrap #encashJourneyId").val(),inbound_channel:"Website",account_no:$(".main-wrap #encashRegisteredAccountNumber").val(),source_page_url:window.location.href,customer_ip_address:$(".main-wrap #encashFromIpAddress").val(),page_name:"Encash Confirmation",status:"Success",error_code:"",error_description:"",referer:$(".main-wrap #encashReferer").val()?$(".main-wrap #encashReferer").val():window.location.href})}}function c2bContinueClicked(){sessionStorage.setItem("c2bOtpVerify","false")}function encashContinueClicked(){sessionStorage.setItem("abandon","false")}function enableProceedBtn(){$(".sihub-pay-btn").css({background:"#0095d9","pointer-events":"auto",color:"#fff"})}function enableProceedBtn(){$(".sihub-pay-btn").css({background:"#0095d9","pointer-events":"auto",color:"#fff"})}function validName(element,errorClass,validClass){console.log("inside validName"),validateName()?($(element).removeClass(errorClass).addClass(validClass),$(element).next("label").addClass(validClass)):($(element).removeClass(validClass).addClass(errorClass),$(element).next("label").addClass(errorClass)),resetConsentCheckbox()}function mobileNumberFormatValidation(element,errorClass,validClass){var mobileNumber=$("#mobileNumber").val(),format=/[ `!@#$%^&*()_+\-=\[\]{};':"\\|,.<>\/?~]/;if(format.test(mobileNumber))$("#mobileNumber").val("");else if(mobileNumber.length>9&&mobileNumber.match(/^[6-9][0-9]+/)){$(element).removeClass(errorClass).addClass(validClass),$(element).next("label").addClass(validClass),console.log($("#relationship").val().length>1,1==isAddonKycNameValidate,$("#dob-request").val().length>1,1==isAddonNameOnAddoncardValidate,1==isAddonEmailValidate,$("#gender").val().length>0);var addonRetryStatus=$("#retryStat").val(),retryCount=$("retryCount").val();console.log("addonRetryStatus",addonRetryStatus),null!=addonRetryStatus&&""!=addonRetryStatus||null!=retryCount&&""!=retryCount?$("#relationship").val().length>1&&$("#request-addon-form #nameAsPerKYC").val().length>1&&$("#dob-request").val().length>1&&$("#nameOnAddOnCard").val().length>1&&$("#request-addon-form #addonEmailValidation").val().length>1&&$("#gender").val().length>0&&($(".addOn-generate-otp").css("pointer-events","visible"),$(".addOn-generate-otp").css("background-color","#0095d9"),$(".addOn-generate-otp").css("color","#ffffff")):$("#relationship").val().length>1&&1==isAddonKycNameValidate&&$("#dob-request").val().length>1&&1==isAddonNameOnAddoncardValidate&&1==isAddonEmailValidate&&$("#gender").val().length>0&&($(".addOn-generate-otp").css("pointer-events","visible"),$(".addOn-generate-otp").css("background-color","#0095d9"),$(".addOn-generate-otp").css("color","#ffffff"))}else $(element).removeClass(validClass).addClass(errorClass),$(element).next("label").addClass(errorClass),resetAddonFormValidation()}function validDateAndTime(){var date=$(".addOnSconnect .date-drop-block .select-selected"),time=$(".addOnSconnect .time-drop-block .select-selected"),dateVal=$(".addOnSconnect #appointmentDate").val(),timeVal=$(".addOnSconnect #appointmentTime").val();return""==dateVal&&date.addClass("errorClass"),""==timeVal&&time.addClass("errorClass"),!(date.hasClass("errorClass")||time.hasClass("errorClass"))}function validateName(){var regName=/^[a-zA-Z\s]+$/,addonCardNameAsPerKYC=$("#request-addon-form #nameAsPerKYC").val(),existingAddonAppliedApplicantNameList=$("#addonAppliedApplicantNameList").val(),existingPrimaryAddonApplicantName=$("#primaryAddonApplicantName").val();if(regName.test(addonCardNameAsPerKYC)){if(existingAddonAppliedApplicantNameList&&existingAddonAppliedApplicantNameList.length>0||existingPrimaryAddonApplicantName&&existingPrimaryAddonApplicantName.length>0){if(existingPrimaryAddonApplicantName.trim().toLowerCase()===addonCardNameAsPerKYC.trim().toLowerCase())return $("#request-addon-form .addoncard-primary-name-match").css("display","block"),$("#request-addon-form .addoncard-applicant-name-match").css("display","none"),console.log("%c name matched with existing primary addon applicant name","color:blue"),isAddonKycNameValidate=!1,!1;if(existingAddonAppliedApplicantNameList.length>0){var replaceDoubleQuotes=existingAddonAppliedApplicantNameList.replace(/^"|"$/g,""),replaceSquareBracket=replaceDoubleQuotes.replace(/[\[\]']+/g,"");if(existingAddonAppliedApplicantNameList.indexOf(",")>-1){var splitWithComma=replaceSquareBracket.split(","),firstElement=splitWithComma[0],secondElement=splitWithComma[1];return console.log("inside comma",firstElement,secondElement),firstElement.trim().toLowerCase()===addonCardNameAsPerKYC.trim().toLowerCase()||secondElement.trim().toLowerCase()===addonCardNameAsPerKYC.trim().toLowerCase()?($("#request-addon-form .addoncard-primary-name-match").css("display","none"),$("#request-addon-form .addoncard-applicant-name-match").css("display","block"),isAddonKycNameValidate=!1,!1):($("#request-addon-form .addoncard-applicant-name-match").css("display","none"),$("#request-addon-form .addoncard-primary-name-match").css("display","none"),isAddonKycNameValidate=!0,!0)}return console.log("inside else comma"),replaceSquareBracket.trim().toLowerCase()===addonCardNameAsPerKYC.trim().toLowerCase()?($("#request-addon-form .addoncard-primary-name-match").css("display","none"),$("#request-addon-form .addoncard-applicant-name-match").css("display","block"),isAddonKycNameValidate=!1,!1):($("#request-addon-form .addoncard-applicant-name-match").css("display","none"),$("#request-addon-form .addoncard-primary-name-match").css("display","none"),isAddonKycNameValidate=!0,!0)}return $("#request-addon-form .addoncard-applicant-name-match").css("display","none"),$("#request-addon-form .addoncard-primary-name-match").css("display","none"),console.log("name not matched----"),isAddonKycNameValidate=!0,!0}return isAddonKycNameValidate=!0,!0}return console.log("inside name else condition"),isAddonKycNameValidate=!1,!1}function removeSpecialAndNumber(event){var regName=/^[a-zA-Z\s]+$/,name=event.value;return regName.test(name)?(console.log("notsub : "+event.value),event.value):(console.log("sub : "+event.value.substring(0,event.value.length-1)),event.value.substring(0,event.value.length-1))}function onChangeCreatePassword(passwordValue){var createPwdValue=passwordValue;createPwdLength=createPwdValue.length;var atleastThreeAlphabetsRegExp="(?:[a-zA-Z].*){3}",lowerCaseRegExp="[a-z]",upperCaseRegExp="[A-Z]",numberCaseRegExp="[0-9]",specialCharCaseRegExp="[!@#$%^&*]";createPwdLength>0?(createPwdLength>=12&&new RegExp(atleastThreeAlphabetsRegExp).test(createPwdValue)?document.getElementById("passwordStrengthOptionOne").classList.add("active"):document.getElementById("passwordStrengthOptionOne").classList.remove("active"),new RegExp(lowerCaseRegExp).test(createPwdValue)&&new RegExp(upperCaseRegExp).test(createPwdValue)?document.getElementById("passwordStrengthOptionTwo").classList.add("active"):document.getElementById("passwordStrengthOptionTwo").classList.remove("active"),new RegExp(numberCaseRegExp).test(createPwdValue)?document.getElementById("passwordStrengthOptionThree").classList.add("active"):document.getElementById("passwordStrengthOptionThree").classList.remove("active"),new RegExp(specialCharCaseRegExp).test(createPwdValue)?document.getElementById("passwordStrengthOptionFour").classList.add("active"):document.getElementById("passwordStrengthOptionFour").classList.remove("active")):(document.getElementById("passwordStrengthOptionOne").classList.remove("active"),document.getElementById("passwordStrengthOptionTwo").classList.remove("active"),document.getElementById("passwordStrengthOptionThree").classList.remove("active"),document.getElementById("passwordStrengthOptionFour").classList.remove("active"))}function checkConfPassword(){$("#conf-pwd-mismatch-error").remove(),$("#proPwdMismatchMessage").html("");var pwd=$("#password").val(),confPwd=$("#confirmPassword").val();if(confPwd.length>0&&pwd!=confPwd){$("#conf-pwd-matched").length,$("#conf-pwd-matched").remove(),$("#conf-pwd-mismatch-error").remove();var confPwdErrorValidation='<label id="conf-pwd-mismatch-error" for="confirm-password" class="error" style="top:10px;margin-left: 31px;"></label>';$("#pro-password-icon2").after(confPwdErrorValidation),$("#proPwdMismatchMessage").html("Password doesn't match"),isPasswordsMatch=!1,enabledDisabledConfirmButton(),$("#confirmPassword").attr("style","border: 1px solid red;")}else if(pwd==confPwd&&""!=confPwd&&null!=confPwd){if($("#conf-pwd-mismatch-error").remove(),$("#proPwdMismatchMessage").html(""),$("#conf-pwd-matched").length);else{var confPwdMatched='<label id="conf-pwd-matched" for="confirm-password" class="valid" style="top:6px;margin-left: 28px;"></label>';$("#pro-password-icon2").after(confPwdMatched)}isPasswordsMatch=!0,enabledDisabledConfirmButton(),$("#confirmPassword").attr("style","border: 1px solid #cdcbcb;")}else $("#conf-pwd-matched").length&&$("#conf-pwd-matched").remove(),$("#confirmPassword").attr("style","border: 1px solid #cdcbcb;")}function showHideCheckCrossMarkForForgotConfirmPwd(){if(isPasswordsMatch=!1,$("#conf-pwd-matched").remove(),$("#conf-pwd-mismatch-error").remove(),$("#proPwdMismatchMessage").html(""),$("#conf-pwd-matched").length)$("#conf-pwd-matched").remove();else{var confPwdError='<label id="conf-pwd-mismatch-error" for="confirm-password" class="error" style="top:10px;margin-left: 31px;"></label>';$("#pro-password-icon2").after(confPwdError),$("#confirmPassword").attr("style","border: 1px solid red;")}}function enabledDisabledConfirmButton(){var currentPwdValue=($("#mandatory-password-update-form #currentPassword").hasClass("valid"),$("#currentPassword").val());""!=currentPwdValue&&null!=currentPwdValue&&isPasswordStrong&&isPasswordsMatch?($(".button-continue").css("pointer-events","visible"),$(".button-continue").addClass("primary").removeClass("secondary").attr("disabled",!1)):($(".button-continue").css("pointer-events","none"),$(".button-continue").addClass("secondary").removeClass("primary").attr("disabled",!0))}function unmaskConfirmPassword(){var element=document.getElementById("confirmPassword"),currentAttribute=element.getAttribute("type");"password"==currentAttribute?($("#confirmPassword").attr("type","text"),$("#pro-password-icon2").attr("src","/creditcards/resources/img/proact-open-eye.svg")):($("#confirmPassword").attr("type","password"),$("#pro-password-icon2").attr("src","/creditcards/resources/img/proact-eye-closed.svg"))}function handleTickCrossMarkForMainJourney(pwdLength,isPasswordStrong){pwdLength>0&&1==isPasswordStrong&&$("#mandatory-password-update-form #password").attr("style","border: 1px solid #cdcbcb;"),0==isPasswordStrong&&$("#mandatory-password-update-form #confirmPassword").attr("style","border: 1px solid #cdcbcb;"),$("#confirmPassword").val(""),$('label[for="confirm-password"]').parent().find("label.error").remove(),$('label[for="confirm-password"]').parent().find("label.valid").remove(),$("#proPwdMismatchMessage").html("")}function showHideCrossAndCheckMarkForMyProfChangePwdJourney(isPasswordStrong){if(0==isPasswordStrong){var pwd=$("#password").val();if(pwd.length>0);else $("#pro-pwd-check-valid").remove(),$('label[for="password"]').parent().find("label.valid").remove(),$('label[for="password"]').parent().find("label.error").remove()}else $('label[for="pro-new-password"]').parent().find("label.valid").remove(),$('label[for="pro-new-password"]').parent().find("label.error").remove(),$("#pro-pwd-check-valid").remove()}function showPasswordModal(){var a=document.getElementById("password");"password"===a.type?(a.type="text",$(".password-icon img").attr("src","/creditcards/resources/img/open-eye.svg")):(a.type="password",$(".password-icon img").attr("src","/creditcards/resources/img/eye-closed.svg"))}function validateApplicantPhoto(selectedFile){var addonKycAcceptableFileFormats=["pdf","jpg","jpeg","tiff","tif","png","gif"];if(errorMessage.innerText="",!selectedFile)return!1;var selectedFileType=selectedFile.type.split("/")[1];if(console.log("selectedFileType ======== "+selectedFileType),console.log("selectedFile.size ======== "+selectedFile.size),maxFileSize=parseInt(maxFileSize?maxFileSize.value:"5242880"),selectedFile.size>maxFileSize)errorMessage.innerText="Max allowed file size is 5 mb",fileUploadField.value="";else{if(addonKycAcceptableFileFormats.includes(selectedFileType))return documentValid=!0,errorMessage.innerText="",isDocUploadForAddonApplicant=!0,console.log("uploaded document is valid--"),!0;errorMessage.innerText="The photo uploaded is invalid. Please select a different photo.",fileUploadField.value=""}}function submitAddonWithDigilocker(response){var fileDocRefId=document.querySelector("#docRefId"),fileBase64=document.querySelector("#base64"),fileExtension=document.querySelector("#fileExtension"),addonName=$("#request-addon-form #nameOnAddOnCard").val(),addOnTryAgainStatus=sessionStorage.getItem("addOnTryAgainStatus");if(console.log("addOnTryAgainStatus-----",addOnTryAgainStatus),1==addOnTryAgainStatus||"true"==addOnTryAgainStatus)console.log("inside addOnTryAgainStatus",sessionStorage.getItem("addOnDocRefId"),sessionStorage.getItem("addonReplayFileExtension")),$("#retryForm #addonRetrydocRefId").val(sessionStorage.getItem("addOnDocRefId")),$("#retryForm #base64").val(sessionStorage.getItem("addOnDocRefId")),$("#retryForm #addonRetryFileExtension").val(sessionStorage.getItem("addonReplayFileExtension"));else{var selectedFile=fileUploadField.files[0];sessionStorage.removeItem("addOnDocRefId");var reader=new FileReader;reader.readAsDataURL(selectedFile);var fileNameExt=selectedFile.name.split("\\").pop();fileExtension.value="."+fileNameExt.split(".").pop(),sessionStorage.removeItem("addonReplayFileExtension"),sessionStorage.setItem("addonReplayFileExtension",fileExtension.value),console.log("file ext value",fileExtension.value);var encryptResult;reader.onload=function(){encryptResult=btoa(reader.result),$.ajax({url:"/safe/upload-file.do",type:"POST",contentType:"application/json",data:JSON.stringify({encodedFile:encryptResult,fileType:"Photo",fileExt:fileNameExt,authStr:"ABCD"}),beforeSend:function(){var loaderHtml='<div class="overlay-loader"></div>';$("body").append(loaderHtml)},success:function(data){if(null!=data.docRefId&&"null"!=data.docRefId){console.log("success in doc upload=>"+data);var loaderHtml='<div class="overlay-loader"></div>';$("body").append(loaderHtml),console.log("error in doc------------",fileExtension.value),fileDocRefId.value=data.docRefId,fileBase64.value=data.docRefId,sessionStorage.setItem("addOnDocRefId",data.docRefId),$("#request-addon-form #digiCode").val(response.digiCode),$("#request-addon-form #resState").val(response.resState),$("#request-addon-form #accessCode").val(response.accessCode),$("#request-addon-form #addonCardName").val(addonName),$("#request-addon-form #fileExtension").val(fileExtension.value),$("#request-addon-form").attr("action","/creditcards/app/requests/addon-card-digi-request"),$("#request-addon-form").trigger("submit",[!0])}else $("body").find("div.overlay-loader").remove(),console.log("error in doc upload")},error:function(){$("body").find("div.overlay-loader").remove(),console.log("error in doc upload")}})}}}function retryForAddonApplication(){}function replayOrderAddon(){$("#digiRetryCode").val(sessionStorage.getItem("kycDigiLockerAuthCode"));var loaderHtml='<div class="overlay-loader"></div>';$("#retryForm #addonRetrydocRefId").val(sessionStorage.getItem("addOnDocRefId")),$("#retryForm #addonRetryFileExtension").val(sessionStorage.getItem("addonReplayFileExtension")),$("body").append(loaderHtml),$("#retryForm").submit()}function addonRetryWithDL(){var clientId=$("#digilockerClientId").val();sessionStorage.setItem("addOnTryAgainStatus",!0);var URL="https://api.digitallocker.gov.in/public/oauth2/1/authorize?response_type=code&client_id="+clientId+"&rediect_uri=1&state=1";redirectToDigilocker(URL)}function disclaimerPopUpForAddon(){sessionStorage.setItem("addonKyc",!0),sessionStorage.setItem("addOnTryAgainStatus",!1);addonCardLeadUpdateOnProceed(),$("a.crossDomain").length>0&&$(this).attr("target","_blank");var clientId=$("#digilockerClientId").val();console.log("clientId",clientId);var URL="https://api.digitallocker.gov.in/public/oauth2/1/authorize?response_type=code&client_id="+clientId+"&rediect_uri=1&state=1",processDiv='<form action="'+URL+'" target="_blank" method="POST" name="payNetForm" style="margin-bottom:0px;"><input type="hidden" name="msg" id="msg" value=""/><a href="#" class="button primary button-clickToProceed" onClick="redirectToDigilocker(`'+URL+'`);setAnalyticsPost(\'Proceed\');closeModalPopup($(this));">Proceed</a><a href="javascript:void(0);" class="button primary button-cancel" onClick="setAnalyticsPost(\'Cancel\');closeModalPopup($(this));">Cancel</a></form>';0==$(".button-clickToProceed").length&&$("#appendPayNowForm").append(processDiv),$(".button-clickToProceed").css("margin-right","5px"),$(".modal-overlay.disclaimer-popup").addClass("open"),viewport.width>=1024?$(".modal").css("margin-top","-267.5px"):viewport.width<767&&$(".modal").css("margin-top","0px"),viewport.width<=1024&&($(".disclaimer-popup").css("margin-top","0px"),$(".disclaimer-popup .modal").css("margin-top","0px"),$(".disclaimer-popup .modal").css("margin-left","0px"),$(".disclaimer-popup .modal").scrollTop(0))}function disclaimerPopUpForAddressChange(){sessionStorage.removeItem("tryAgainStatus"),sessionStorage.setItem("tryAgainStatus",!1),sessionStorage.setItem("addressChange",!0);$("a.crossDomain").length>0&&$(this).attr("target","_blank");var clientId=$("#digilockerClientId").val();console.log("clientId",clientId);var URL="https://api.digitallocker.gov.in/public/oauth2/1/authorize?response_type=code&client_id="+clientId+"&rediect_uri=1&state=1",processDiv='<form action="'+URL+'" target="_blank" method="POST" name="payNetForm" style="margin-bottom:0px;"><input type="hidden" name="msg" id="msg" value=""/><a href="#" class="button primary button-clickToProceed" onClick="redirectToDigilocker(`'+URL+'`);setAnalyticsPost(\'Proceed\');closeModalPopup($(this));">Proceed</a><a href="javascript:void(0);" class="button primary button-cancel" onClick="setAnalyticsPost(\'Cancel\');closeModalPopup($(this));">Cancel</a></form>';0==$(".button-clickToProceed").length&&$("#appendPayNowForm").append(processDiv),$(".button-clickToProceed").css("margin-right","5px"),$(".modal-overlay.disclaimer-popup").addClass("open"),viewport.width>=1024?$(".modal").css("margin-top","-267.5px"):viewport.width<767&&$(".modal").css("margin-top","0px"),viewport.width<=1024&&($(".disclaimer-popup").css("margin-top","0px"),$(".disclaimer-popup .modal").css("margin-top","0px"),$(".disclaimer-popup .modal").css("margin-left","0px"),$(".disclaimer-popup .modal").scrollTop(0))}function popUpclose(){$("#addonKyc-popup").hide("hidden")}function enableDigiLockProceedbtnKyc(id){if($("#"+id).is(":checked")){isProceedCheckboxChecked=!0;var onlyDigilockerPincodeUpdateFlag=$("#onlyDigilockerPincodeUpdateFlag").val();1==isModifyJourney?(checkUpperCaseLowerCaseForAddress(),console.log("enable proceed onlyDigilockerPincodeUpdateFlag",onlyDigilockerPincodeUpdateFlag,"modifyOtherFields",modifyOtherFields,"isModifyJourney",isModifyJourney,"onlyAddressLineCaseChanged",onlyAddressLineCaseChanged),$("#digiLockAddrChangeForm").find(".digiLockOtpField").find("label.valid").remove(),(1==modifyOtherFields||"Y"==onlyDigilockerPincodeUpdateFlag||1==onlyAddressLineCaseChanged)&&(console.log("INSIDE IF...."),applyValidationOnAddressChangeKycForm(),$("#digiLockAddrChangeForm").valid()&&($("#digiLockAddrChangeForm .digilock-add-btns").css("display","block"),$(".digilock-add-btns .blue-btn.e-sign-button").removeClass("gray-btn"),$(".digilock-add-btns .blue-btn.e-sign-button").css("cursor","pointer"),updateScreenBasedOnModifyFields()))):($("#digiLockAddrChangeForm .digilock-add-btns").css("display","block"),$(".digilock-add-btns .blue-btn.e-sign-button").removeClass("gray-btn"),$(".digilock-add-btns .blue-btn.e-sign-button").css("cursor","pointer"))}else isProceedCheckboxChecked=!1,$(".digilock-add-btns .blue-btn.e-sign-button").addClass("gray-btn"),$(".digilock-add-btns .blue-btn.e-sign-button").css("cursor","none"),$(".skipSection").addClass("hidden"),$("#process-verbiage").css("display","none")}function kycDigiLockReGenOtp(){var kycOtpRegenUrl="resend-otp-contact-change-revamp-update";$.ajax({type:"GET",url:kycOtpRegenUrl,beforeSend:function(){$(".error-div").hide(),$(".kycOtpSection #kycOtp").css("border","1px solid #ddd"),$(".kycOtpSection #kyc-otp-err").hide();var loaderHtml='<div class="overlay-loader"></div>';$("body").append(loaderHtml)},success:function(res){$("body").find("div.overlay-loader").remove(),0==res.errorCode?$(".kycOtpSection #otp-msg").show().text(res.message):507==res.errorCode||107==res.errorCode?($(".error-div .error-section").empty().text(res.message),$(".error-div").show(),$(".kycOtpSection #otp-msg").hide().text(""),$(".kycOtpSection #kycOtp").prop("disabled",!0),$(".kycOtpSection #kyc-otp-resend-btn").css("pointer-events","none"),$(".kycOtpSection #cancelOTP").css("pointer-events","none")):($(".error-div").show(),$(".error-div .error-section").empty().text(res.message))},error:function(){$("body").find("div.overlay-loader").remove()}})}function kycDigiLockOtpSubmit(){0==digiFieldModifyFlag&&(updateAddressToForm(),authenticateOtpSubmissionForModify())}function authenticateOtpSubmissionForModify(){var url="/creditcards/app/myprofile/auth-otp-address-change-revamp",passphrase=$("#passphrase").val(),otpNumber=$(".kycOtpSection .digiLockOtpField").val(),otpPassed=encryptData(otpNumber),docUploadFlag=$("#digiLockAddrChangeForm #docUploadFlag").val(),selectedDocType=$("#addrChangeDocType").val();console.log("docUploadFlag",docUploadFlag,"selectedDocType",selectedDocType),$.ajax({type:"POST",data:{encryptedOtp:otpPassed},url:url,headers:{passphrase:passphrase},beforeSend:function(){var loaderHtml='<div class="overlay-loader"></div>';$("body").append(loaderHtml)},complete:function(){},success:function(response){console.log(response);var decryptedData=dataDecryptionAES(response,passphrase);if(response=JSON.parse(decryptedData),console.log("otp authentication response ",response),response.success)if($("#digiLockAddrChangeForm .digiLockOtpField").css("border","1px solid #ddd;"),"Y"==docUploadFlag)if("multiDoc"==selectedDocType){var fileValue=$(".docupload-block .addr-front-doc");kycAddrDocSubmissionForModify(fileValue)}else{var fileValue=$(".docupload-block .addr-single-doc");kycAddrDocSubmissionForModify(fileValue)}else submitDigilockerForm();else 4==response.statusCode?($("#digiLockAddrChangeForm .digiLockOtpField").css("border","1px solid red"),$("#digiLockAddrChangeForm #kyc-otp-err").css("display","block"),$(".otp-error-message-digilocker").html(""),$(".otp-error-message-digilocker").css("display","none"),$("#digiLockAddrChangeForm .resend-otp-msg-digi").css("display","none"),$(".kycOtpSection .digiLockOtpField").val(""),$(".kycOtpSection .rmv").addClass("disabled"),$("body").find("div.overlay-loader").remove()):2==response.statusCode?($(".otp-error-message-digilocker").css("display","block"),$(".kycOtpSection .rmv").addClass("disabled"),$(".otp-error-message-digilocker").show().text(response.message),$("#digiLockAddrChangeForm .digiLockOtpField").css("border","1px solid red"),$(".kycOtpSection #kyc-otp-resend-btn").css("pointer-events","none"),$(".digiLockOtpField").attr("disabled","true"),$("#digiLockAddrChangeForm #kyc-otp-err").css("display","block"),$("#digiLockAddrChangeForm .cancelDigiLockOTP").css("pointer-events","none"),$("#digiLockAddrChangeForm .resend-otp-msg-digi").css("display","none"),$(".kycOtpSection .digiLockOtpField").val(""),$(".kycOtpSection #kyc-otp-err").css("display","none"),$(".kycOtpSection .digiLockOtpField").css("border","1px solid #ddd"),$("body").find("div.overlay-loader").remove()):$("body").find("div.overlay-loader").remove()},error:function(){$("body").find("div.overlay-loader").remove()}})}function onChangeResidenceDropDown(){}function modifydAddressChange(){isModifyJourney=!0,$("#digilockerAddressEditFlag").val("Y"),$(".email-update-form .read-only-address").css("display","none"),$(".email-update-form .email-update-field-form-modify").css("display","block"),$(".email-update-form .address-change-modify-button").css("display","none"),$("#ucicUpdateCheckboxModify").css("display","block"),$("#kycAddrDocumentDropdown").val(""),$(".input-block.tick-buttons-block.button-group .blue-btn").addClass("button-gray").addClass("disabled"),$("#digiLockAddrChangeForm .resend-otp-msg-digi").css("display","none"),("undefined"!=$("#digiLockAddrChangeForm #checkBoxDigiLock")||null!=$("#digiLockAddrChangeForm #checkBoxDigiLock"))&&($("#digiLockAddrChangeForm #checkBoxDigiLock").prop("checked",!1),$("#digiLockAddrChangeForm #checkBoxDigiLock").val(!1)),("undefined"!=$("#digiLockAddrChangeForm #addressChange_Check")||null!=$("#digiLockAddrChangeForm #addressChange_Check"))&&($("#digiLockAddrChangeForm #addressChange_Check").prop("checked",!1),$("#digiLockAddrChangeForm #addressChange_Check").val(!1)),$(".digilock-add-btns .blue-btn.e-sign-button").addClass("gray-btn"),$(".digilock-add-btns .blue-btn.e-sign-button").css("cursor","none")}function proceeddAddressChange(){var onlyDigilockerPincodeUpdateFlag=($("#digilockerIdType").val(),$("#onlyDigilockerPincodeUpdateFlag").val());console.log("-----PROCEED-------",modifyOtherFields,onlyDigilockerPincodeUpdateFlag,onlyAddressLineCaseChanged),0!=modifyOtherFields||"Y"!=onlyDigilockerPincodeUpdateFlag&&1!=onlyAddressLineCaseChanged?0!=modifyOtherFields||"N"!=onlyDigilockerPincodeUpdateFlag&&1!=onlyAddressLineCaseChanged?"N"==onlyDigilockerPincodeUpdateFlag&&1==modifyOtherFields?(docUploadOptionVisible=!0,$("#digiLockAddrChangeForm .read-only-address").css("display","none"),$("#digiLockAddrChangeForm .email-update-field-form-modify").css("display","none"),$("#digiLockAddrChangeForm #ucicUpdateCheckboxModify").css("display","none"),$("#digiLockAddrChangeForm .kycOtpSection").css("display","none"),$("#digiLockAddrChangeForm .kycOtpSection").css("border-top","none"),$("#digiLockAddrChangeForm .digilock-add-btns").css("display","none"),$(".skipSection").addClass("hidden"),$("#process-verbiage").css("display","none"),$("#digiLockAddrChangeForm .docupload-block").removeClass("hidden"),$("#digiLockAddrChangeForm .docupload-block").css("display","block"),$("#digiLockAddrChangeForm .docupload-block .btn-group-addr-kyc").removeClass("hidden"),$("#kycAddrDocumentDropdown").val(""),$(".docupload-block .file-upload-field:visible").val(""),$("#digiLockAddrChangeForm .digilockerHeader").css("display","none"),$("#digiLockAddrChangeForm .bottom-btn-block").css("padding-top","0px"),$(".docupload-block .file-upload-field").css("pointer-events","visible"),$("#kycAddrDocumentDropdown").css("pointer-events","visible"),$(".docupload-block .docUploadConsentCheckbox").addClass("hidden")):(docUploadOptionVisible=!0,$("#digiLockAddrChangeForm .read-only-address").css("display","none"),$("#digiLockAddrChangeForm .email-update-field-form-modify").css("display","none"),$("#digiLockAddrChangeForm #ucicUpdateCheckboxModify").css("display","none"),$("#digiLockAddrChangeForm .docupload-block").removeClass("hidden"),$("#digiLockAddrChangeForm .kycOtpSection").css("display","none"),$("#digiLockAddrChangeForm .kycOtpSection").css("border-top","none"),$("#digiLockAddrChangeForm .digilock-add-btns").css("display","none"),$(".skipSection").addClass("hidden"),$("#process-verbiage").css("display","none"),$("#digiLockAddrChangeForm .docupload-block .btn-group-addr-kyc").removeClass("hidden"),$("#digiLockAddrChangeForm .docupload-block").css("display","block"),$("#kycAddrDocumentDropdown").val(""),$(".docupload-block .file-upload-field:visible").val(""),$("#digiLockAddrChangeForm .digilockerHeader").css("display","none"),$("#digiLockAddrChangeForm .bottom-btn-block").css("padding-top","0px"),$(".docupload-block .file-upload-field").css("pointer-events","visible"),$("#kycAddrDocumentDropdown").css("pointer-events","visible"),$(".docupload-block .docUploadConsentCheckbox").addClass("hidden")):(docUploadOptionVisible=!1,$("#digiLockAddrChangeForm .kycOtpSection").css("display","block"),$("#digiLockAddrChangeForm .kycOtpSection").css("border-top","none"),$(".input-block.tick-buttons-block.digilock-add-btns").css("display","none"),$("#digiLockAddrChangeForm .digilock-add-btns").css("display","none"),$("#digiLockAddrChangeForm #ucicUpdateCheckboxModify").css("display","none"),genOTPforAddrChangeKyc("proceed"),enabledDisabledAddressFields(!0),$(".docupload-block .docUploadConsentCheckbox").addClass("hidden")):($("#digiLockAddrChangeForm .kycOtpSection").css("display","block"),$("#digiLockAddrChangeForm .kycOtpSection").css("border-top","none"),$(".input-block.tick-buttons-block.digilock-add-btns").css("display","none"),$("#digiLockAddrChangeForm .digilock-add-btns").css("display","none"),$("#digiLockAddrChangeForm #ucicUpdateCheckboxModify").css("display","none"),genOTPforAddrChangeKyc("proceed"),docUploadOptionVisible=!1,enabledDisabledAddressFields(!0))}function addressChangeValidatorOptionalbox(event){("residenceAddress"==event.target.id||"residenceAddressContd"==event.target.id)&&($("#onlyDigilockerPincodeUpdateFlag").val("N"),unCheckConsentCheckbox(),"residenceAddress"==event.target.id?addressLineOneChanged=!0:"residenceAddressContd"==event.target.id&&(addressLineTwoChanged=!0))}function enableSubmitBtnForDocUpload(id){console.log("isDocUploadForAadhaarValid",isDocUploadForAadhaarValid),$("#"+id).is(":checked")&&1==isDocUploadForAadhaarValid?$(".docupload-block #KYC-Addr-Submit").removeClass("gray-btn pointer-none"):$(".docupload-block #KYC-Addr-Submit").addClass("gray-btn pointer-none")}function genOTPforAddrChangeKyc(flag){var genOtpUrl="/creditcards/app/myprofile/send-otp-change-address";"clickhere"==flag?($("#digiLockAddrChangeForm .kycOtpSection").css("display","block"),$(".input-block.tick-buttons-block.digilock-add-btns").css("display","none"),$("#digiLockAddrChangeForm .kycOtpSection").css("border-top","none"),$(".skipSection").addClass("hidden"),$("#process-verbiage").css("display","none"),$("#digiLockAddrChangeForm #ucicUpdateCheckboxModify").css("display","none"),enabledDisabledAddressFields(!0)):"submit"==flag&&($("#digiLockAddrChangeForm #docUploadFlag").val("Y"),$("#digiLockAddrChangeForm #docUploadFlag").val("Y")),$.ajax({type:"GET",url:genOtpUrl,beforeSend:function(){var loaderHtml='<div class="overlay-loader"></div>';$("body").append(loaderHtml)},complete:function(){$("body").find("div.overlay-loader").remove()},success:function(response){response.success&&"clickhere"!=flag&&($("#digiLockAddrChangeForm .kycOtpSection").css("display","block"),$(".btn-group-addr-kyc").addClass("hidden"),$(".docupload-block .docUploadConsentCheckbox").addClass("hidden"),$(".docupload-block .file-upload-field").css("pointer-events","none"),$("#kycAddrDocumentDropdown").css("pointer-events","none"))},error:function(){$("body").find("div.overlay-loader").remove()}})}function updateAddressToForm(){var otpData=$(".kycOtpSection .digiLockOtpField").val();$("#digiLockAddrChangeForm #otpNumber").val(otpData),$("#digiLockAddrChangeForm #residenceAddress").val(null!=$("#digiLockAddrChangeForm #residenceAddress").val()?$("#digiLockAddrChangeForm #residenceAddress").val():$("#digiLockAddrChangeForm #oldResidenceAddress").val()),$("#digiLockAddrChangeForm #residenceAddressContd").val(null!=$("#digiLockAddrChangeForm #residenceAddressContd").val()?$("#digiLockAddrChangeForm #residenceAddressContd").val():$("#digiLockAddrChangeForm #oldResidenceAddressContd").val()),$("#digiLockAddrChangeForm #residenceState").val(null!=$("#digiLockAddrChangeForm #residenceState").val()?$("#digiLockAddrChangeForm #residenceState").val():$("#digiLockAddrChangeForm #digiLockerUserResidenceState").val()),$("#digiLockAddrChangeForm #residenceCity").val(null!=$("#digiLockAddrChangeForm #residenceCity").val()?$("#digiLockAddrChangeForm #residenceCity").val():$("#digiLockAddrChangeForm #digiLockeruserResidenceCity").val()),$("#digiLockAddrChangeForm #residenceZipCode").val(null!=$("#digiLockAddrChangeForm #residenceZipCode").val()?$("#digiLockAddrChangeForm #residenceZipCode").val():$("#digiLockAddrChangeForm #digiLockeruserResidenceZipCode").val())
}function addressChangeValidatorSelectbox(event){if("residenceState"==event.target.id){unCheckConsentCheckbox();var oldState=$("#digiLockAddrChangeForm #digiLockerUserResidenceState").val(),newState=$("#digiLockAddrChangeForm #residenceState").val();"undefined"==oldState&&"null"==oldState&&""==oldState||"null"==newState&&""==newState||(0==modifyOtherFields?oldState==newState||(isModifyJourney=!0,modifyOtherFields=!0,$("#onlyDigilockerPincodeUpdateFlag").val("N"),1==onlyAddressLineCaseChanged&&(onlyAddressLineCaseChanged=!1)):(1==onlyAddressLineCaseChanged&&(onlyAddressLineCaseChanged=!1),modifyOtherFields=!0,isModifyJourney=!0,$("#onlyDigilockerPincodeUpdateFlag").val("N")))}else if("residenceCity"==event.target.id){unCheckConsentCheckbox();var oldResCity=$("#digiLockAddrChangeForm #digiLockeruserResidenceCity").val(),newResCity=$("#digiLockAddrChangeForm #residenceCity").val();"undefined"==oldResCity&&"null"==oldResCity&&""==oldResCity||"null"==newResCity&&""==newResCity||(0==modifyOtherFields?oldResCity==newResCity||(modifyOtherFields=!0,isModifyJourney=!0,$("#onlyDigilockerPincodeUpdateFlag").val("N"),1==onlyAddressLineCaseChanged&&(onlyAddressLineCaseChanged=!1)):(modifyOtherFields=!0,isModifyJourney=!0,$("#onlyDigilockerPincodeUpdateFlag").val("N"),1==onlyAddressLineCaseChanged&&(onlyAddressLineCaseChanged=!1)))}else if("residenceZipCode"==event.target.id){unCheckConsentCheckbox();var oldZipCode=$("#digiLockAddrChangeForm #digiLockeruserResidenceZipCode").val(),newZipCode=$("#digiLockAddrChangeForm #residenceZipCode").val();"undefined"==oldZipCode&&"null"==oldZipCode&&""==oldZipCode||"null"==newZipCode&&""==newZipCode||(0==modifyOtherFields?newZipCode!=oldZipCode?($("#onlyDigilockerPincodeUpdateFlag").val("Y"),modifyOtherFields=!1,isModifyJourney=!0,1==onlyAddressLineCaseChanged&&(onlyAddressLineCaseChanged=!1)):(isModifyJourney=!0,$("#onlyDigilockerPincodeUpdateFlag").val("Y")):($("#onlyDigilockerPincodeUpdateFlag").val("N"),modifyOtherFields=!0,isModifyJourney=!0,1==onlyAddressLineCaseChanged&&(onlyAddressLineCaseChanged=!1)))}}function updateScreenBasedOnModifyFields(){{var onlyDigilockerPincodeUpdateFlag=$("#onlyDigilockerPincodeUpdateFlag").val();$("#digilockerIdType").val()}console.log("onlyDigilockerPincodeUpdateFlag",onlyDigilockerPincodeUpdateFlag,"modifyOtherFields",modifyOtherFields,"onlyAddressLineCaseChanged",onlyAddressLineCaseChanged),0!=modifyOtherFields||"Y"!=onlyDigilockerPincodeUpdateFlag&&1!=onlyAddressLineCaseChanged?($(".skipSection").removeClass("hidden"),$("#process-verbiage").css("display","block")):($(".skipSection").addClass("hidden"),$("#process-verbiage").css("display","none"))}function kycrenewalphotoSubmissionForModify(fileName){var fileValue=fileName.files[0];if(console.log("fileValue",fileValue),fileValue){{var file=fileValue,reader=new FileReader;$("#kyc-upload-form #kyc-photo-upload-file").val()}reader.readAsDataURL(file);var fileNameExt=file.name.split("\\").pop(),fileType=fileNameExt.split(".").pop();sessionStorage.setItem("kycRenewalDocFileExt","."+fileType);var encryptResult;reader.onload=function(){encryptResult=btoa(reader.result),$.ajax({url:"/safe/upload-file.do",type:"POST",contentType:"application/json",data:JSON.stringify({encodedFile:encryptResult,fileType:"photo",fileExt:fileNameExt,authStr:"ABCD"}),beforeSend:function(){var loaderHtml='<div class="overlay-loader"></div>';$("body").append(loaderHtml)},success:function(data){console.log("file",data),$("body").find("div.overlay-loader").remove(),null!=data.docRefId&&"null"!=data.docRefId?(sessionStorage.setItem("kycRenewalDocRefId",data.docRefId),$("#"+fileName.id+"_hdn").val(data.docRefId),$("#ucic-kyc").removeClass("hidden"),$("#kyc-submit-button").removeAttr("disabled"),$(".kyc-sub-block .kyc-upload-proceed-btn").removeClass("gray-btn pointer-none"),console.log("success in doc upload=>"+data)):($("body").find("div.overlay-loader").remove(),$(".kyc-sub-block .kyc-upload-proceed-btn").addClass("gray-btn pointer-none"),console.log("error in doc"))},error:function(){$("body").find("div.overlay-loader").remove(),$(".kyc-sub-block .kyc-upload-proceed-btn").addClass("gray-btn pointer-none")}})}}}function kycAddrDocSubmissionForModify(fileValue){if(console.log("fileValue",fileValue),fileValue){var file=fileValue.prop("files")[0],reader=new FileReader,selectedDocType=$("#digiLockAddrChangeForm #kycAddrDocumentDropdown").val();reader.readAsDataURL(file);var encryptResult,fileNameExt=file.name.split("\\").pop();reader.onload=function(){encryptResult=btoa(reader.result),$.ajax({url:"/safe/upload-file.do",type:"POST",contentType:"application/json",data:JSON.stringify({encodedFile:encryptResult,fileType:selectedDocType,fileExt:fileNameExt,authStr:"ABCD"}),beforeSend:function(){$(".kycOtpSection #otp-msg").hide()},success:function(data){if(null!=data.docRefId&&"null"!=data.docRefId){var docRefId1=data.docRefId,docType1=selectedDocType,addrChangeKycDocForm=$("#digiLockAddrChangeForm");$("<input>").attr({name:"docRefId1",id:"docRefId1",type:"hidden",value:docRefId1}).appendTo(addrChangeKycDocForm),$("<input>").attr({name:"docType1",id:"docType1",type:"hidden",value:docType1}).appendTo(addrChangeKycDocForm),"singleDoc"==$("#addrChangeDocType").val()?(console.log("inside singleAddrDocUploadSubmit- call gen otp"),submitDigilockerForm()):"multiDoc"==$("#addrChangeDocType").val()&&multiDocSubmissionForAddressChangeDigiLocer(),console.log("success in doc upload=>"+data)}else $("body").find("div.overlay-loader").remove(),console.log("error in doc")},error:function(){$("body").find("div.overlay-loader").remove()}})}}}function finalSubmitAddrKYCdocForModify(docRefId1,docType1,docRefId2){var digiLockAddrChangeProceedForm=$("#digiLockAddrChangeForm");$("<input>").attr({name:"docRefId1",id:"docRefId1",type:"hidden",value:docRefId1}).appendTo(digiLockAddrChangeProceedForm),$("<input>").attr({name:"docType1",id:"docType1",type:"hidden",value:docType1}).appendTo(digiLockAddrChangeProceedForm),$("<input>").attr({name:"docRefId2",id:"docRefId2",type:"hidden",value:docRefId2}).appendTo(digiLockAddrChangeProceedForm),submitDigilockerForm()}function cancelKycAddrForDigiLocker(){docUploadOptionVisible=!1;$("#digiLockAddrChangeForm #docUploadFlag").val();$("#digiLockAddrChangeForm .read-only-address").css("display","none"),$("#digiLockAddrChangeForm .email-update-field-form-modify").css("display","block"),$("#digiLockAddrChangeForm .kycOtpSection").css("display","none"),$("#digiLockAddrChangeForm .digilock-add-btns").css("display","block"),$(".kycOtpSection .digiLockOtpField").val(""),$("#digiLockAddrChangeForm #ucicUpdateCheckboxModify").css("display","block"),$("#onlyDigilockerPincodeUpdateFlag").val("N"),$("#digiLockAddrChangeForm #docUploadFlag").val("N"),("undefined"!=$("#digiLockAddrChangeForm #checkBoxDigiLock")||null!=$("#digiLockAddrChangeForm #checkBoxDigiLock"))&&($("#digiLockAddrChangeForm #checkBoxDigiLock").prop("checked",!1),$("#digiLockAddrChangeForm #addressChange_Check").prop("checked",!1),$("#digiLockAddrChangeForm #checkBoxDigiLock").val(!1),$("#digiLockAddrChangeForm #addressChange_Check").val(!1)),$("#digiLockAddrChangeForm .docupload-block").css("display","none"),$(".digilock-add-btns .blue-btn.e-sign-button").addClass("gray-btn"),$(".digilock-add-btns .blue-btn.e-sign-button").css("cursor","none"),$("#kycAddrDocumentDropdown").val(""),$(".input-block.tick-buttons-block.button-group .blue-btn").addClass("button-gray").addClass("disabled"),$("#digiLockAddrChangeForm .digilockerHeader").css("display","block"),$("#digiLockAddrChangeForm .resend-otp-msg-digi").css("display","none"),$(".kycOtpSection #kyc-otp-err").css("display","none"),$(".kycOtpSection .digiLockOtpField").css("border","1px solid #ddd"),$(".kycOtpSection .digiLockOtpField").val(""),$(".docupload-block .KYC-success-upload").css("display","none"),$("#kycAddrDocumentDropdown").prop("selectedIndex",0),$("#a_card").addClass("hidden"),$(".file-upload-field").val(""),$(".file-upload-wrapper").attr("data-text",""),$(".file-upload-wrapper").css("outline","none"),$(".KYC-success-upload").hide(),$(".docupload-block #KYC-Addr-Submit").addClass("gray-btn pointer-none"),$(".KYC-field-error").hide(),$(".KYC-file-error").css({visibility:"hidden",display:"none"}),isValidKYCAddrDropdown=!1,$(".if-pan").removeClass("hidden"),$(".if-addhar").addClass("hidden"),$("#a_card").addClass("hidden"),$(".docupload-block .file-upload-field").css("pointer-events","none"),$("#digiLockAddrChangeForm .bottom-btn-block").css("padding-top","20px"),isDocUploadForAadhaarValid=!1,$("#digiLockAddrChangeForm #digiLokcerAddressChange_Check").prop("checked",!1),$("#digiLockAddrChangeForm #digiLokcerAddressChange_Check").val(!1)}function kycDigiLockCanOtpSubmit(){if(console.log("modifyOtherFields",modifyOtherFields,"docUploadOptionVisible",docUploadOptionVisible),1==docUploadOptionVisible)$("#digiLockAddrChangeForm .kycOtpSection").hide(),$(".input-block.tick-buttons-block.button-group .blue-btn").addClass("button-gray").addClass("disabled"),$("#digiLockAddrChangeForm .docupload-block .btn-group-addr-kyc").removeClass("hidden"),$("#digiLockAddrChangeForm .resend-otp-msg-digi").css("display","none"),$(".kycOtpSection #kyc-otp-err").css("display","none"),$(".kycOtpSection .digiLockOtpField").css("border","1px solid #ddd"),$(".kycOtpSection .digiLockOtpField").val(""),$(".kycOtpSection .rmv").addClass("disabled"),docUploadOptionVisible=!1,1==isAadhaarCardSelected&&1==isDocUploadForAadhaarValid&&($(".docupload-block #KYC-Addr-Submit").addClass("gray-btn pointer-none"),$(".docupload-block .docUploadConsentCheckbox").removeClass("hidden"),("undefined"!=$("#digiLockAddrChangeForm #digiLokcerAddressChange_Check")||null!=$("#digiLockAddrChangeForm #digiLokcerAddressChange_Check"))&&($("#digiLockAddrChangeForm #digiLokcerAddressChange_Check").prop("checked",!1),$("#digiLockAddrChangeForm #digiLokcerAddressChange_Check").val(!1))),$(".docupload-block .file-upload-field").css("pointer-events","visible"),$("#kycAddrDocumentDropdown").css("pointer-events","visible");else{var onlyDigilockerPincodeUpdateFlag=$("#onlyDigilockerPincodeUpdateFlag").val();1==modifyOtherFields||"Y"==onlyDigilockerPincodeUpdateFlag||1==onlyAddressLineCaseChanged?($("#digiLockAddrChangeForm .email-update-field-form-modify").css("display","block"),$("#digiLockAddrChangeForm .read-only-address").css("display","none"),enabledDisabledAddressFields(!1)):($("#digiLockAddrChangeForm .read-only-address").css("display","block"),enabledDisabledAddressFields(!1)),$(".change-address-digi-container .kycOtpSection").hide(),$("#digiLockAddrChangeForm .kycOtpSection").hide(),$(".kycOtpSection .digiLockOtpField").val(""),$("#digiLockAddrChangeForm #ucicUpdateCheckboxModify").css("display","block"),("undefined"!=$("#digiLockAddrChangeForm #checkBoxDigiLock")||null!=$("#digiLockAddrChangeForm #checkBoxDigiLock"))&&($("#digiLockAddrChangeForm #checkBoxDigiLock").prop("checked",!1),$("#digiLockAddrChangeForm #addressChange_Check").prop("checked",!1),$("#digiLockAddrChangeForm #checkBoxDigiLock").val(!1),$("#digiLockAddrChangeForm #addressChange_Check").val(!1)),$("#digiLockAddrChangeForm .docupload-block").css("display","none"),$("#digiLockAddrChangeForm .docupload-block .file-upload-field:visible").val(""),$("#kycAddrDocumentDropdown").val(""),$(".input-block.tick-buttons-block.button-group .blue-btn").addClass("button-gray").addClass("disabled"),$(".digilock-add-btns .blue-btn.e-sign-button").addClass("gray-btn"),$("#digiLockAddrChangeForm .digilock-add-btns").css("display","block"),$(".digilock-add-btns .blue-btn.e-sign-button").css("cursor","none"),$("#digiLockAddrChangeForm #docUploadFlag").val("N"),$("#kycAddrDocumentDropdown").val(""),$(".docupload-block .file-upload-field:visible").val(""),$("#digiLockAddrChangeForm .digilockerHeader").css("display","block"),$("#digiLockAddrChangeForm .resend-otp-msg-digi").css("display","none"),$(".kycOtpSection #kyc-otp-err").css("display","none"),$(".kycOtpSection .digiLockOtpField").css("border","1px solid #ddd"),$(".kycOtpSection .digiLockOtpField").val(""),$(".kycOtpSection .rmv").addClass("disabled")}}function onChangeDigiLockOtpField(){var otpData=$(".kycOtpSection .digiLockOtpField").val();console.log("otpData",otpData,otpData.length),6==otpData.length?($(".kycOtpSection .rmv").removeClass("disabled"),$(".kycOtpSection .digiLockOtpField").css("border","1px solid #ddd"),$(".kycOtpSection #kyc-otp-err").css("display","none")):0==otpData.length?($(".kycOtpSection .digiLockOtpField").css("border","1px solid #ddd"),$(".kycOtpSection #kyc-otp-err").css("display","none"),$(".kycOtpSection .rmv").addClass("disabled"),$(".kycOtpSection #kyc-otp-err").hide()):($(".kycOtpSection .rmv").addClass("disabled"),$(".kycOtpSection .digiLockOtpField").css("border","1px solid #ddd"),$("#digiLockAddrChangeForm #kyc-otp-err").css("display","none"))}function mobileViewPerOffi(flag){"Personal"==flag?sessionStorage.setItem("Personal",!0):sessionStorage.setItem("Personal",!1)}function updateSessionFlagForAddressChange(){sessionStorage.removeItem("Personal")}function onclickRetryButtonForAddressChange(){++retryAttempCount,console.log("%c retryAttempCount ","color:red",retryAttempCount),sessionStorage.setItem("retryCountforAddress",retryAttempCount);{var retryStatus=$("#RetryStatus").val(),authCode=null;$("#submissionResponseForm").val(),$("#srNumberForm").val()}if(console.log("retryAttempCount from session ",retryStatus,sessionStorage.getItem("retryAttempCount")),"Retry with DL"==retryStatus&&(authCode=sessionStorage.getItem("kycDigiLockerAuthCode")),sessionStorage.getItem("retryCountforAddress")>3);else{$("#proceed_to_digilocker #digiRetryCodeForm").val(authCode);var loaderHtml='<div class="overlay-loader"></div>';$("body").append(loaderHtml);var url="/creditcards/app/myprofile/load-address-retry-status";makeAjaxWithLoader({url:url,type:"post",data:$("#proceed_to_digilocker").serialize(),beforeSend:function(){var loaderHtml='<div class="overlay-loader"></div>';$("body").append(loaderHtml)},complete:function(){$("body").find("div.overlay-loader").remove()},success:function(data){$("#address-tab").html(data),console.log("---------------",data),$("body").find("div.overlay-loader").remove()},error:function(){$("body").find("div.overlay-loader").remove()}})}}function onclickTryAgainButtonAddressChange(){sessionStorage.removeItem("addressChangetryAgainStatus"),sessionStorage.setItem("addressChangetryAgainStatus",!0),sessionStorage.removeItem("addressChange");var loaderHtml='<div class="overlay-loader"></div>';$("body").append(loaderHtml),openDigiLockerJourneyForAddressChange()}function openDigiLockerJourneyForAddressChange(){console.log("%c Digi locker journey open from try again journey...","color:red");var clientId=$("#digilockerClientId").val();console.log("clientId",clientId);var URL="https://api.digitallocker.gov.in/public/oauth2/1/authorize?response_type=code&client_id="+clientId+"&rediect_uri=1&state=1";redirectToDigilocker(URL)}function submitDigilockerForm(){console.log("submitDigilockerForm");var url="/creditcards/app/myprofile/digilocker-address-change-submission";makeAjaxWithLoader({url:url,type:"post",data:$("#digiLockAddrChangeForm").serialize(),beforeSend:function(){},complete:function(){$("body").find("div.overlay-loader").remove()},success:function(data){$("#address-tab").html(data),$("body").find("div.overlay-loader").remove()},error:function(){$("body").find("div.overlay-loader").remove()}})}function onclickSubmitKycForAddressChange(status){console.log("status",status),sessionStorage.removeItem("digiLockereErrorHandling"),"retryWDL"==status?($("#personalDetailsTabHeader").addClass("hidden"),$("#personalDetailsFormFieldList").addClass("hidden"),$("#officialAddress").addClass("hidden"),$("#change-address-form .docupload-block").addClass("hidden"),$(".otp-section-block").css("display","none"),$(".officialAddrGenOTPJrny2").addClass("hidden"),$(".officialAddrGenOTPJrny1").addClass("hidden"),$("#AddressChangeProceedBtn").addClass("hidden"),$("#addressCTA").addClass("hidden"),$("#official-addess-edit").addClass("hidden"),$(".LandlineSR").addClass("hidden"),$("#landlineResendOtpExaustedErrorMsg").css("display","none")):"noDocument"==status||"manualUpload"==status&&(console.log("inside manual upload"),sessionStorage.setItem("digiLockereErrorHandling",!0),$(".newVerbiage1").addClass("hidden"),$(".AddressChangeOptSec").addClass("hidden"),$(".AddchangeCloseBtn").addClass("hidden"),$("#personalDetailsTabHeader").addClass("hidden"),$("#personalDetailsFormFieldList").addClass("hidden"),$("#officialAddress").addClass("hidden"),$(".my-profile .tab-item:not(.editable) .show-editable").css("display","block"),$("#personal-addess-edit").removeClass("hidden"),$("#change-address-form #addressCTA").removeClass("hidden"),$("#change-address-form #AddressChangeProceedBtn").removeClass("hidden"),$("#addressCTA").removeClass("hidden"))}function isKycDigiAddressChangeFormValid(){}function unCheckConsentCheckbox(){$(".digilock-add-btns .blue-btn.e-sign-button").addClass("gray-btn"),$(".digilock-add-btns .blue-btn.e-sign-button").css("cursor","none"),$(".skipSection").addClass("hidden"),$("#process-verbiage").css("display","none"),("undefined"!=$("#digiLockAddrChangeForm #checkBoxDigiLock")||null!=$("#digiLockAddrChangeForm #checkBoxDigiLock"))&&($("#digiLockAddrChangeForm #checkBoxDigiLock").prop("checked",!1),$("#digiLockAddrChangeForm #addressChange_Check").prop("checked",!1),$("#digiLockAddrChangeForm #checkBoxDigiLock").val(!1),$("#digiLockAddrChangeForm #addressChange_Check").val(!1))}function enabledDisabledAddressFields(disabledStatus){1==disabledStatus?($("#digiLockAddrChangeForm #residenceAddress").attr("readonly","readonly"),$("#digiLockAddrChangeForm #residenceAddressContd").attr("readonly","readonly"),$("#digiLockAddrChangeForm").find(".trigger").css("pointer-events","none")):($("#digiLockAddrChangeForm #residenceAddress").removeAttr("readonly"),$("#digiLockAddrChangeForm #residenceAddressContd").removeAttr("readonly"),$("#digiLockAddrChangeForm").find(".trigger").css("pointer-events","visible"))}function checkUpperCaseLowerCaseForAddress(){var newresidenceAddress=$("#digiLockAddrChangeForm #residenceAddress").val(),newresidenceAddressContd=$("#digiLockAddrChangeForm #residenceAddressContd").val(),oldResidenceAddress=$("#digiLockAddrChangeForm #oldResidenceAddress").val(),oldResidenceAddressContd=$("#digiLockAddrChangeForm #oldResidenceAddressContd").val();(newresidenceAddress.length>0||newresidenceAddressContd.length>0)&&(console.log("addressLineOneChanged",addressLineOneChanged,"addressLineTwoChanged",addressLineTwoChanged),1==addressLineOneChanged&&1==addressLineTwoChanged?newresidenceAddress.toLowerCase().trim()===oldResidenceAddress.toLowerCase().trim()&&newresidenceAddressContd.toLowerCase().trim()===oldResidenceAddressContd.toLowerCase().trim()?(1==modifyOtherFields?(modifyOtherFields=!0,onlyAddressLineCaseChanged=!1):onlyAddressLineCaseChanged=!0,isModifyJourney=!0):newresidenceAddress.toLowerCase().trim()===oldResidenceAddress.toLowerCase().trim()&&newresidenceAddressContd.toLowerCase().trim()!=oldResidenceAddressContd.toLowerCase().trim()?(modifyOtherFields=!0,onlyAddressLineCaseChanged=!1,isModifyJourney=!0):newresidenceAddress.toLowerCase().trim()!=oldResidenceAddress.toLowerCase().trim()&&newresidenceAddressContd.toLowerCase().trim()===oldResidenceAddressContd.toLowerCase().trim()?(modifyOtherFields=!0,onlyAddressLineCaseChanged=!1,isModifyJourney=!0):newresidenceAddress.toLowerCase().trim()!=oldResidenceAddress.toLowerCase().trim()&&newresidenceAddressContd.toLowerCase().trim()!=oldResidenceAddressContd.toLowerCase().trim()&&(modifyOtherFields=!0,onlyAddressLineCaseChanged=!1,isModifyJourney=!0):1==addressLineOneChanged&&0==addressLineTwoChanged?newresidenceAddress.toLowerCase().trim()===oldResidenceAddress.toLowerCase().trim()?(1==modifyOtherFields?(modifyOtherFields=!0,onlyAddressLineCaseChanged=!1):onlyAddressLineCaseChanged=!0,isModifyJourney=!0):(modifyOtherFields=!0,onlyAddressLineCaseChanged=!1,isModifyJourney=!0):0==addressLineOneChanged&&1==addressLineTwoChanged&&(newresidenceAddressContd.toLowerCase().trim()===oldResidenceAddressContd.toLowerCase().trim()?(1==modifyOtherFields?(modifyOtherFields=!0,onlyAddressLineCaseChanged=!1):onlyAddressLineCaseChanged=!0,isModifyJourney=!0):(onlyAddressLineCaseChanged=!1,isModifyJourney=!0,modifyOtherFields=!0)))}function multiDocSubmissionForAddressChangeDigiLocer(){console.log("enter multiDocSubmissionForAddressChangeDigiLocer");var fileValue=$(".docupload-block .addr-back-doc"),fileValue=fileValue;if(fileValue){var file=fileValue.prop("files")[0],reader=new FileReader,selectedDocType=$("#digiLockAddrChangeForm #kycAddrDocumentDropdown").val();reader.readAsDataURL(file);var fileNameExt=file.name.split("\\").pop();console.log("MULTI DOC fileNameExt",fileNameExt,"selectedDocType",selectedDocType);var encryptResult;reader.onload=function(){encryptResult=btoa(reader.result),$.ajax({url:"/safe/upload-file.do",type:"POST",contentType:"application/json",data:JSON.stringify({encodedFile:encryptResult,fileType:selectedDocType,fileExt:fileNameExt,authStr:"ABCD"}),beforeSend:function(){$(".kycOtpSection #otp-msg").hide()},success:function(data){if(console.log("enter multiAddrDocUploadSubmit -success block"),null!=data.docRefId&&"null"!=data.docRefId){var digiLockAddrChangeForm=$("#digiLockAddrChangeForm"),docRefId2=data.docRefId,docType2=selectedDocType;$("<input>").attr({name:"docRefId2",id:"docRefId2",type:"hidden",value:docRefId2}).appendTo(digiLockAddrChangeForm),$("<input>").attr({name:"docType2",id:"docType2",type:"hidden",value:docType2}).appendTo(digiLockAddrChangeForm),""==$("#docRefId1").val()&&null==$("#docRefId1").val()&&"null"==$("#docRefId1").val()||""==docRefId2&&null==docRefId2&&"null"==docRefId2||(console.log("enter multiAddrDocUploadSubmit -call gen otp"),submitDigilockerForm()),console.log("success in back image doc upload=>"+data)}else $("body").find("div.overlay-loader").remove(),console.log("error in doc")},error:function(){$("body").find("div.overlay-loader").remove()}})}}}function callTrackSr(i,name){$("#passPhoto").attr("disabled","disabled");document.getElementById("srType");console.log("call track sr index",i),"0"==i?(console.log("call track sr index 0"),sessionStorage.setItem("addOnResideWithPrimary","P")):(console.log("call track sr index not 0"),sessionStorage.setItem("addOnResideWithPrimary","Y")),$("#addonaddress").hide();var url="/creditcards/app/requests/kyc-renewal-check-sr",passPhrase=$("#passphase").val(),requestObj={index:"",encryptedCard:"",cardEmbossName:name};sessionStorage.setItem("selectedCardNumber",i),sessionStorage.setItem("selectedCardName",name),requestObj.index=i,requestObj.encryptedCard=i,requestObj.encryptedCard=name,$(".file-upload-field").val(""),$(".file-upload-wrapper").attr("data-text",""),$(".file-upload-wrapper").css("outline","none"),$.ajax({url:url,type:"POST",data:{selectedCardIndex:i,passPhrase:passPhrase},overlayTarget:$(".main"),beforeSend:function(){var loaderHtml='<div class="overlay-loader"></div>';$("body").append(loaderHtml)},complete:function(){$("body").find("div.overlay-loader").remove()},success:function(data){if("ERR500"===data)return void console.log("error in track sr");if(0==data.length)$(".kyc-sub-block .kyc-upload-proceed-btn").addClass("gray-btn pointer-none"),$(".kyc-upload-block").css("pointer-events","visible"),$("#passPhoto").removeAttr("disabled"),i>0?($("#addonaddress").show(),$("#kyc-non-eligible").hide(),$("#kyc-non-eligible").css("display","none")):($("#addonaddress").hide(),$("#kyc-non-eligible").hide(),$("#kyc-non-eligible").css("display","none"));else{if(console.log("inside else"),data.length>0){var srNumberandType=data.split("_");$("#srType").text(srNumberandType[0]),$("#srNumber").text(srNumberandType[1])}$("#kyc-non-eligible").show(),$("#kyc-non-eligible").css("display","block"),$("#passPhoto").attr("disabled","disabled"),$(".kyc-sub-block .kyc-upload-proceed-btn").addClass("gray-btn pointer-none"),$(".kyc-upload-block").css("pointer-events","none")}},error:function(){$("body").find("div.overlay-loader").remove(),console.error("error getting trackSr"),$("#addonaddress").hide(),console.log("error"),$("#kyc-non-eligible").hide(),$("#kyc-non-eligible").css("display","none")}})}function replayOrderRenewal(){console.log("replay order call...........");var isModifyJourney=$("#kycRenewalDigiModifyJourney").val(),modifyButtonClicked=sessionStorage.getItem("isKycRenewalModifyJourney");if(console.log("isModifyJourney.........",isModifyJourney,"modifyButtonClicked",modifyButtonClicked),""==isModifyJourney||null==isModifyJourney||1!=isModifyJourney&&"true"!=isModifyJourney&&"true"!=isModifyJourney)if(""==modifyButtonClicked||null==modifyButtonClicked||1!=modifyButtonClicked&&"true"!=modifyButtonClicked&&"true"!=modifyButtonClicked){console.log("else"),$("#kycRenewalDigiModifyRetryForm #retryDigiModifyJourneyStatus").val(!1),$("#digiRetryCode").val(sessionStorage.getItem("kycDigiLockerAuthCode")),$("#kycRenewalDigiModifyRetryForm #retryEncryptedCardnumber").val(sessionStorage.getItem("selectedCardNumber")),$("#kycRenewalDigiModifyRetryForm #retryAddOnResideWithPrimary").val(sessionStorage.getItem("addOnResideWithPrimary"));var loaderHtml='<div class="overlay-loader"></div>';$("body").append(loaderHtml),$("#kycRenewalDigiModifyRetryForm").submit()}else{console.log("else if"),$("#kycRenewalDigiModifyRetryForm #digiRetryCode").val(sessionStorage.getItem("kycDigiLockerAuthCode")),$("#kycRenewalDigiModifyRetryForm #retryDigiModifyJourneyStatus").val(!0),$("#kycRenewalDigiModifyRetryForm #retryEncryptedCardnumber").val(sessionStorage.getItem("selectedCardNumber")),$("#kycRenewalDigiModifyRetryForm #retryAddOnResideWithPrimary").val(sessionStorage.getItem("addOnResideWithPrimary"));var loaderHtml='<div class="overlay-loader"></div>';$("body").append(loaderHtml),$("#kycRenewalDigiModifyRetryForm").submit()}else{console.log("if"),$("#kycRenewalDigiModifyRetryForm #digiRetryCode").val(sessionStorage.getItem("kycDigiLockerAuthCode")),$("#kycRenewalDigiModifyRetryForm #retryEncryptedCardnumber").val(sessionStorage.getItem("selectedCardNumber")),$("#kycRenewalDigiModifyRetryForm #retryAddOnResideWithPrimary").val(sessionStorage.getItem("addOnResideWithPrimary"));var loaderHtml='<div class="overlay-loader"></div>';$("body").append(loaderHtml),$("#kycRenewalDigiModifyRetryForm").submit()}}function renewalRetryWithDL(){console.log("renewalRetryWithDL");var clientId=$("#digilockerClientId").val();sessionStorage.setItem("renewalTryAgainStatus",!0);var URL="https://api.digitallocker.gov.in/public/oauth2/1/authorize?response_type=code&client_id="+clientId+"&rediect_uri=1&state=1";redirectToDigilocker(URL)}function onClickGenerateOtpForAddon(){$(".addoncard-mt-5").css("display","block"),$("#enterOtp").css("pointer-events","auto"),$(".addon-resend-otp").css("pointer-events","visible"),$(".addon-resend-absolute-pos").css("pointer-events","visible"),$(".addon-resend-absolute-pos").css("right","2px"),$(".addon-resend-absolute-pos").css("margin-top","-20px"),$(".addOn-generate-otp").css("right","22px");var passphrase=$("#passphrase").val(),addonRetryStatus=$("retryStat").val(),retryCount=$("retryCount").val();console.log("OTP Genertae");var addOnMobileNumber=$(".addOnMobileNumber").val(),genOtpUrl="/creditcards/app/requests/addon-otp-send";console.log("Passphrase ========> ",passphrase),$.ajax({type:"POST",url:genOtpUrl,contentType:"application/json; charset=utf-8",data:JSON.stringify({mobileNo:dataEncryptionAES(addOnMobileNumber,passphrase),relationship:dataEncryptionAES($("#relationship").val(),passphrase),nameAsPerKYC:dataEncryptionAES($("#nameAsPerKYC").val(),passphrase),dob:dataEncryptionAES($("#dob-request").val(),passphrase),name:dataEncryptionAES($("#nameOnAddOnCard").val(),passphrase),email:dataEncryptionAES($("#addonEmailValidation").val(),passphrase),gender:dataEncryptionAES($("#gender").val(),passphrase)}),headers:{passPhrase:passphrase},beforeSend:function(){var loaderHtml='<div class="overlay-loader"></div>';$("body").append(loaderHtml)},complete:function(){$("body").find("div.overlay-loader").remove()},success:function(response){response=dataDecryptionAES(response,passphrase),console.log("response",response),response=JSON.parse(response),response.success?(console.log("OTP successfully gen"),oldAddonGenMobileNumber=addOnMobileNumber,$(".addOn-generate-otp").css("pointer-events","none"),$(".addOn-generate-otp").css("background-color","#E5E4E4"),$(".addOn-generate-otp").css("color","#666666"),(null!=addonRetryStatus&&""!=addonRetryStatus||null!=retryCount&&""!=retryCount)&&(retryGenerateOtp=!0)):4==response.statusCode?($(".addOn-generate-otp ").css("pointer-events","none"),console.log("OTP status----004"),$(".addOn-generate-otp").css("background-color","#E5E4E4"),$(".addOn-generate-otp").css("color","#666666")):1010==response.errorCode?(console.log("Checking OTP Flooding on OTPGen"),$("#addonOtpFloodingGen").text(""),$("#addonOtpFloodingGen").css("display","block"),$("#addonOtpFloodingGen").text(response.message),$(".addoncard-mt-5").css("display","none"),$(".addOn-generate-otp").css("background-color","#E5E4E4"),$(".addOn-generate-otp").css("color","#666666"),$(".addon-relationship, #nameAsPerKYC, #dob-request, #nameOnAddOnCard, #addonEmailValidation, .addon-gender, #mobileNumber, .addOn-generate-otp, .addOnOtpField").css("pointer-events","none"),$(".addon-resend-absolute-pos").css("display","none"),$(".addOn-generate-otp").css("right","46px")):999==response.statusCode?($("#addonOtpFloodingGen").text(""),$("#addonOtpFloodingGen").css("display","block"),$("#addonOtpFloodingGen").text(response.message)):($(".addOn-generate-otp ").css("pointer-events","none"),$(".addOn-generate-otp").css("background-color","#E5E4E4"),$(".addOn-generate-otp").css("color","#666666"))},error:function(){$("body").find("div.overlay-loader").remove(),$(".addOn-generate-otp ").css("pointer-events","none"),$(".addOn-generate-otp").css("background-color","#E5E4E4"),$(".addOn-generate-otp").css("color","#666666")}})}function onClickResendOtpForAddon(){var addOnMobileNumber=$(".addOnMobileNumber").val(),passphrase=$("#passphrase").val(),resendOtpUrl="/creditcards/app/requests/addon-otp-resend";$.ajax({type:"POST",url:resendOtpUrl,contentType:"application/json; charset=utf-8",data:JSON.stringify({mobileNumber:dataEncryptionAES(addOnMobileNumber,passphrase)}),headers:{passPhrase:passphrase},beforeSend:function(){var loaderHtml='<div class="overlay-loader"></div>';$("body").append(loaderHtml)},complete:function(){$("body").find("div.overlay-loader").remove()},success:function(response){console.log("response",response),response=dataDecryptionAES(response,passphrase),response=JSON.parse(response),console.log("Response ====>",response),$("body").find("div.overlay-loader").remove(),response.success?(console.log("Otp sent on registered mob number"),$(".addon-resend-Otp-mess").css("display","block"),$("#enterOtp").val(""),$(".addon-Invalid-otp").css("display","none"),$("#enterOtp").siblings("label").removeClass("eeror").css("display","none"),$("#enterOtp").siblings("label").removeClass("valid").css("display","none"),$(".addon-resend-absolute-pos").css("right","2px"),$(".addon-resend-absolute-pos").css("margin-top","-40px"),$("#enterOtp").removeClass("error"),$("#addoOtpFloodingnmargin").css("margin-top","-50px")):(555==response.errorCode||1010==response.errorCode)&&($(".addon-resend-Otp-mess").css("display","none"),console.log("Checking OTP Flooding on Resend"),$("#addonOtpFloodingResend").text(""),$("#addonOtpFloodingResend").css("display","block"),$("#addonOtpFloodingResend").text(response.message),$(".addon-resend-absolute-pos").css("display","none"),$("#enterOtp").val(""),$(".addOn-generate-otp").css("background-color","#E5E4E4"),$(".addOn-generate-otp").css("color","#666666"),$(".addon-relationship, #nameAsPerKYC, #dob-request, #nameOnAddOnCard, #addonEmailValidation, .addon-gender, #mobileNumber, .addOn-generate-otp").css("pointer-events","none"),$(".addon-resend-absolute-pos").css("display","none"),$("#addoOtpFloodingnmargin").css("margin-top","-138px"),$(".addon-threeTimes-invalid-mess").css("display","none"),$(".addOn-generate-otp").css("right","0px"),$(".addon-Invalid-otp").css("display","none"),$(".addOn-generate-otp").css("right","22px"))
},error:function(){console.log("Error else block"),$("body").find("div.overlay-loader").remove()}})}function onClickVerifyOtpForAddon(){var otp=$("#request-addon-form #enterOtp").val(),mobileNumber=$(".addOnMobileNumber").val(),authenticateOtpUrl="/creditcards/app/requests/addon-otp-authenticate";console.log("Enter OTP veryfication");var passphrase=$("#passphrase").val(),otpPassed=dataEncryptionAES(otp,passphrase),addonmobilenumber=dataEncryptionAES(mobileNumber,passphrase);6==otp.length&&$.ajax({type:"POST",url:authenticateOtpUrl,contentType:"application/json; charset=utf-8",data:JSON.stringify({otp:otpPassed,mobileNumber:addonmobilenumber}),beforeSend:function(){$(".addon-Ehaust-mess-sm-text").css("display","none");var loaderHtml='<div class="overlay-loader"></div>';$("body").append(loaderHtml)},complete:function(){$("body").find("div.overlay-loader").remove()},success:function(response){if($("body").find("div.overlay-loader").remove(),console.log("response",response),response=dataDecryptionAES(response,passphrase),response=JSON.parse(response),response&&response.OtpValidationRsType&&(console.log("addon otp veryfication"),response.OtpValidationRsType.statusCode)){var key=response.OtpValidationRsType.statusCode;switch(key){case"000":console.log("OTP veryfied"),$(".addon-Invalid-otp").css("display","none"),isAddonOtpVerify=!0,$("#enterOtp").css("pointer-events","none"),$(".addon-resend-otp").css("pointer-events","none"),$(".addon-resend-absolute-pos").css("pointer-events","none"),$(".addon-verify-otp-button").css("background-color","#E5E4E4"),$(".addon-verify-otp-button").css("color","#666666"),$(".addon-verify-otp-button").css("pointer-events","none"),$(".file-upload-field").prop("disabled",!1),isVerifyBtnClicked=!0;break;case"901":console.log("OTP Does not exist"),$("#enterOtp").val(""),$(".addon-resend-otp").css("pointer-events","visible"),$(".addon-resend-absolute-pos").css("pointer-events","visible"),$(".file-upload-field").prop("disabled",!0),isVerifyBtnClicked=!1;break;case"904":console.log(" OTP not veryfied"),$(".addon-Invalid-otp").css("display","block"),$(".addon-resend-absolute-pos").css("right","0px"),$(".addon-resend-absolute-pos").css("margin-top","-14px"),$("#enterOtp").val(""),$(".addon-resend-Otp-mess").css("display","none"),$("#enterOtp").siblings("label").removeClass("valid"),$(".addoncard-marginTop-otp").addClass("fixAddonTopMargin"),$(".addon-resend-otp").css("pointer-events","visible"),$(".addon-resend-absolute-pos").css("pointer-events","visible"),$("#addonOtpFloodingResend").css("display","none"),$("#addoOtpFloodingnmargin").css("margin-top","-50px"),$(".file-upload-field").prop("disabled",!0),isVerifyBtnClicked=!1;break;case"902":console.log("Invalid Exhausted message"),$(".addon-threeTimes-invalid-mess").css("display","block"),$("#enterOtp").val(""),$(".addon-Invalid-otp").css("display","none"),$("#enterOtp").css("pointer-events","none"),$(".addon-resend-absolute-pos").css("pointer-events","none"),$(".verify-filed-label-block ").css("pointer-events","none"),$(".addOn-generate-otp ").css("pointer-events","none"),$("#mobileNumber ").css("pointer-events","none"),$(".addon-resend-absolute-pos").css("margin-top","0px"),$(".addon-resend-absolute-pos").css("display","none"),$("#enterOtp").siblings("label").removeClass("valid"),$(".addoncard-marginTop-otp").css("margin-top","0px"),$(".addon-Ehaust-mess-sm-text").css("display","none"),$("#request-addon-form").css("pointer-events","none"),$("#addonOtpFloodingResend").css("display","none"),$("#addoOtpFloodingnmargin").css("margin-top","0px"),$(".addon-verify-otp-button").css("background-color","#E5E4E4"),$(".addon-verify-otp-button").css("color","#666666"),$(".addon-verify-otp-button").css("pointer-events","none"),$(".file-upload-field").prop("disabled",!0),isVerifyBtnClicked=!1;break;case"905":console.log("OTP expired due to time interval"),$("#enterOtp").val(""),$(".addon-resend-absolute-pos").css("right","-5px"),$(".addon-resend-absolute-pos").css("margin-top","-14px"),$(".addon-resend-Otp-mess").css("display","none"),$(".addon-otp-expired-mess").css("display","block"),$(".file-upload-field").prop("disabled",!0),isVerifyBtnClicked=!1;break;case"999":console.log("Sorry! due to technical error,Please try again after sometime."),$("#enterOtp").val(""),$(".addon-resend-absolute-pos").css("right","-5px"),$(".addon-resend-absolute-pos").css("margin-top","-14px"),$(".addon-resend-Otp-mess").css("display","none"),$("#addonOtpFloodingGen").text(""),$("#addonOtpFloodingGen").css("display","block"),$("#addonOtpFloodingGen").text(response.message),$(".file-upload-field").prop("disabled",!0),isVerifyBtnClicked=!1}}},error:function(){$("body").find("div.overlay-loader").remove()}})}function onClickAddonConsentCheckbox(id){if($("#"+id).is(":checked")){console.log(isAddonOtpVerify,isDocUploadForAddonApplicant);var addonRetryStatus=$("retryStat").val(),retryCount=$("retryCount").val();if(console.log("addonRetryStatus",addonRetryStatus,"isDocUploadForAddonApplicant",isDocUploadForAddonApplicant),null!=addonRetryStatus&&""!=addonRetryStatus||null!=retryCount&&""!=retryCount){console.log("inside addonRetryStatus");var validForm=$("#request-addon-form").valid();validForm?1==retryGenerateOtp?1==isAddonOtpVerify&&($("#digilocker-btn").css("background-color","#0095d9"),$("#digilocker-btn").css("color","#ffffff"),$("#digilocker-btn").css("pointer-events","visible")):1==isDocUploadForAddonApplicant&&($("#digilocker-btn").css("background-color","#0095d9"),$("#digilocker-btn").css("color","#ffffff"),$("#digilocker-btn").css("pointer-events","visible")):1==retryGenerateOtp?1==isAddonOtpVerify&&1==isDocUploadForAddonApplicant&&($("#digilocker-btn").css("background-color","#0095d9"),$("#digilocker-btn").css("color","#ffffff"),$("#digilocker-btn").css("pointer-events","visible")):1==isDocUploadForAddonApplicant&&($("#digilocker-btn").css("background-color","#0095d9"),$("#digilocker-btn").css("color","#ffffff"),$("#digilocker-btn").css("pointer-events","visible"))}else if(console.log("inside happy path"),1==isAddonOtpVerify&&1==isDocUploadForAddonApplicant)$("#digilocker-btn").css("background-color","#0095d9"),$("#digilocker-btn").css("color","#ffffff"),$("#digilocker-btn").css("pointer-events","visible");else{var validForm=$("#request-addon-form").valid();if(!validForm)return}}else $("#digilocker-btn").css("background-color","#E5E4E4"),$("#digilocker-btn").css("color","#666666"),$("#digilocker-btn").css("pointer-events","none")}function onChangeAddonOtpField(){var addOnOtpValue=$("#request-addon-form #enterOtp").val();6==addOnOtpValue.length?($("#request-addon-form .verify-filed-label-block").css("background-color","#0095d9"),$("#request-addon-form .verify-filed-label-block").css("color","#ffffff"),$("#request-addon-form .verify-filed-label-block").css("pointer-events","visible"),$("#request-addon-form .verify-filed-label-block").removeClass("verify-gray-button"),$("#request-addon-form #enterOtp, label[for=enterOtp]").removeClass("error"),$("#request-addon-form #enterOtp, label[for=enterOtp]").addClass("valid")):addOnOtpValue.length<6&&($("#request-addon-form .verify-filed-label-block").css("background-color","#E5E4E4"),$("#request-addon-form .verify-filed-label-block").css("color","#666666"),$("#request-addon-form .verify-filed-label-block").css("pointer-events","none"),$("#request-addon-form .verify-filed-label-block").addClass("verify-gray-button"),$("#request-addon-form #enterOtp, label[for=enterOtp]").removeClass("valid"),$("#request-addon-form #enterOtp, label[for=enterOtp]").addClass("error")),resetConsentCheckbox()}function validateNameOnAddonCard(element,errorClass,validClass){nameOnAddonCard()?($(element).removeClass(errorClass).addClass(validClass),$(element).next("label").addClass(validClass),isAddonNameOnAddoncardValidate=!0):($(element).removeClass(validClass).addClass(errorClass),$(element).next("label").addClass(errorClass),isAddonNameOnAddoncardValidate=!1),resetConsentCheckbox()}function nameOnAddonCard(){var regName=/^[a-zA-Z\s]+$/,name=$("#nameOnAddOnCard").val();return regName.test(name)?!0:!1}function addonCardLeadUpdateOnProceed(){sessionStorage.removeItem("addOnDocRefId");var leadUpdateUrl="/creditcards/app/requests/addon-card-lead-update-on-proceed",addonmobilenumber=$(".addOnMobileNumber").val(),passphrase=$("#passphrase").val();$.ajax({type:"POST",url:leadUpdateUrl,contentType:"application/json; charset=utf-8",dataType:"json",headers:{passPhrase:passphrase},data:JSON.stringify({mobileNo:dataEncryptionAES(addonmobilenumber,passphrase),relationship:dataEncryptionAES($("#relationship").val(),passphrase),nameAsPerKYC:dataEncryptionAES($("#nameAsPerKYC").val(),passphrase),dob:dataEncryptionAES($("#dob-request").val(),passphrase),name:dataEncryptionAES($("#nameOnAddOnCard").val(),passphrase),email:dataEncryptionAES($("#addonEmailValidation").val(),passphrase),gender:dataEncryptionAES($("#gender").val(),passphrase)}),beforeSend:function(){},complete:function(){},success:function(){},error:function(){}})}function addonEmailIdFormatValidation(element,errorClass,validClass){var emailId=$("#request-addon-form #addonEmailValidation").val(),format=/^[a-zA-Z0-9_.-]+@[a-zA-Z0-9-]+\.[a-zA-Z]{2,}$/;console.log("====",format.test(emailId)),format.test(emailId)?($(element).removeClass(errorClass).addClass(validClass),$(element).next("label").addClass(validClass),isAddonEmailValidate=!0):emailId.length>9&&emailId.match(/^[a-zA-Z0-9_.-]+@[a-zA-Z0-9-]+\.[a-zA-Z]{2,}$/)?($(element).removeClass(errorClass).addClass(validClass),$(element).next("label").addClass(validClass),isAddonEmailValidate=!0):($(element).removeClass(validClass).addClass(errorClass),$(element).next("label").addClass(errorClass),isAddonEmailValidate=!1),resetConsentCheckbox()}function resetAddonFormValidation(){$("#request-addon-form .verify-filed-label-block").css("background-color","#E5E4E4"),$("#request-addon-form .verify-filed-label-block").css("color","#666666"),$("#request-addon-form .verify-filed-label-block").css("pointer-events","none"),$("#request-addon-form #enterOtp").val(""),$("#request-addon-form #enterOtp").css("pointer-events","none"),$("#request-addon-form #enterOtp, label[for=enterOtp]").removeClass("valid"),$("#request-addon-form #enterOtp, label[for=enterOtp]").removeClass("error"),$("#digilocker-btn").css("background-color","#E5E4E4"),$("#digilocker-btn").css("color","#666666"),$("#digilocker-btn").css("pointer-events","none"),$("#addon_checkbox").prop("checked",!1),$("#addon_checkbox").val(!1),$("#request-addon-form .addon-Invalid-otp").css("display","none"),$("#request-addon-form .addon-resend-Otp-mess").css("display","none"),$("#request-addon-form #enterOtp").siblings("label").removeClass("valid"),$(".addOn-generate-otp").css("pointer-events","none"),$(".addOn-generate-otp").css("background-color","#E5E4E4"),$(".addOn-generate-otp").css("color","#666666"),isAddonOtpVerify=!1}function resetConsentCheckbox(){$("#digilocker-btn").css("background-color","#E5E4E4"),$("#digilocker-btn").css("color","#666666"),$("#digilocker-btn").css("pointer-events","none"),$("#addon_checkbox").prop("checked",!1),$("#addon_checkbox").val(!1)}function removeSpecialAndNumberForNameOnAddon(event){var regName=/^[a-zA-Z\s]+$/,name=event.value;return regName.test(name)?(console.log("notsub : "+event.value),event.value):(console.log("sub : "+event.value.substring(0,event.value.length-1)),event.value.substring(0,event.value.length-1))}function pre_login(){var url=window.location.href;" "!=userevent&&(s.events=userevent),s.pageName=" "!=intent?analyticsObj.sitename+":"+pagename+":"+intent:analyticsObj.sitename+":"+pagename,s.eVar2=url,s.prop1=url,journey_type=section,s.channel=section,s.eVar6=analyticsObj.sitename+":"+section+":"+journey_type,s.events=event1;var s_code=s.t();s_code&&document.write(s_code)}function post_login_common(){path=window.location.href,path=path.replace("#","/"),path=path.split("/"),arr=[];for(var i=0,flag=0;i<path.length;i++)"app"==path[i]&&(flag=1),"app"!=path[i]&&1==flag&&(arr=arr+path[i]+":");if(arr.length>0){var m=arr.indexOf(":"),n=arr.lastIndexOf(":");sec=arr.substring(0,m),section="postlogin"+sec,arr=arr.substring(0,n),":"==arr[n]&&(arr=arr.substring(0,n-1))}}function post_login(){var url=window.location.href;arr=arr.split("?")[0],s.pageName=analyticsObj.postlogin_sitename+":"+arr,s.prop14="postlogin:"+arr,s.channel=section.split("?")[0],s.eVar1=userId,s.eVar2=url,s.prop1=url,s.prop5=userId;var s_code=s.t();s_code&&document.write(s_code)}function rewards_load(giftvoucher,rewardevent){var url=window.location.href;s.pageName=analyticsObj.postlogin_sitename+":"+arr,s.channel=section,s.eVar1=userId,s.eVar2=url,s.prop1=url,s.prop5=userId,s.events=rewardevent,"purchase"==rewardevent&&(s.zip=userPinCode,s.prop14="postlogin:"+arr),s.products=""==giftvoucher?" ":";"+giftvoucher;var s_code=s.t();s_code&&document.write(s_code)}function error_track(){error_type="Sorry! You cannot avail this service at the moment"==error?"System":"Business","undefined"!=typeof userId&&(userId?(post_login_common(),s.pageName=analyticsObj.postlogin_sitename+":"+arr):s.pageName=analyticsObj.sitename+":"+pagename+":"+intent),s.prop16=error_type,s.prop17=error;var s_code=s.t();s_code&&document.write(s_code)}function exitFunction(){var blankField="";return $(".post-login-form").find("select, input").each(function(){var targetElement="";return $(this).val()==$(this).attr("placeholder")&&!$(this).hasClass("no-analytic")&&!$(this).is(":hidden")||""==$(this).val()&&!$(this).hasClass("no-analytic")&&!$(this).is(":hidden")||$(this).is(":checkbox")&&!$(this).is(":checked")&&!$(this).parent().hasClass("checked")?targetElement=$(this):$(this).is(":radio")&&!$('input[name="'+$(this).attr("name")+'"]').is(":checked")&&(targetElement=$(this)),targetElement?(blankField=targetElement,!1):void 0}),blankField?blankField.attr("id"):blankField}function formExit(){""!=exitFunction()&&(s.eVar16=journey_link.replace(/\s+/g,"").toLowerCase()+"form",s.eVar15=journey_link.replace(/\s+/g,"").toLowerCase()+"form:"+exitFunction(),s.events="event33",post_login_common(),post_login())}function css_browser_selector(u){var ua=u.toLowerCase(),is=function(t){return ua.indexOf(t)>-1},g="gecko",w="webkit",s="safari",o="opera",h=document.documentElement,b=[!/opera|webtv/i.test(ua)&&/msie\s(\d)/.test(ua)?"ie ie"+RegExp.$1:is("firefox/2")?g+" ff2":is("firefox/3.5")?g+" ff3 ff3_5":is("firefox/3")?g+" ff3":is("gecko/")?g:is("opera")?o+(/version\/(\d+)/.test(ua)?" "+o+RegExp.$1:/opera(\s|\/)(\d+)/.test(ua)?" "+o+RegExp.$2:""):is("konqueror")?"konqueror":is("chrome")?w+" chrome":is("iron")?w+" iron":is("applewebkit/")?w+" "+s+(/version\/(\d+)/.test(ua)?" "+s+RegExp.$1:""):is("mozilla/")?g:"",is("j2me")?"mobile":is("iphone")?"iphone":is("ipod")?"ipod":is("mac")?"mac":is("darwin")?"mac":is("webtv")?"webtv":is("win")?"win":is("freebsd")?"freebsd":is("x11")||is("linux")?"linux":"","js"];return c=b.join(" "),h.className+=" "+c,c}function checkLoginType(){sessionStorage.removeItem("type");var panCard=$("#microport-card-login #pan").val(),cardNumber=$("#microport-card-login #card_no").val(),mobileNumber=$("#micro_mobile_no").val(),otp=$("#showEnterOtp #otp").val();panCard||cardNumber?sessionStorage.setItem("type","card"):(mobileNumber||otp)&&sessionStorage.setItem("type","mobile")}function toggleMobileOrCard(type){$("#micro-submit-error").css("display","none"),$("#micro-submit-ajaxerror").css("display","none"),"card"===type?($("#selectCardMethod").addClass("active"),$("#selectMobileMethod").removeClass("active"),$("#microport-card-login").css("display","block"),$("#microport-mobile-login").css("display","none"),$(".view-mobile #micro_mobile_no").val("+91-"),$(".view-mobile #micro_mobile_no").removeClass("invalid"),$(".view-mobile #otp").val(""),$("#microport-mobile-login #micro-mob-tick").css("display","none"),$("#microport-mobile-login #micro-mob-cross").css("display","none"),$("#microport-mobile-login #micro-mob-err").css("display","none"),$("#microport-mobile-login #micro_mobile_no").removeClass("valid"),$("#genOtpBtnMicroPort").addClass("add-disable"),$("#genOtpBtnMicroPort .blue-btn").addClass("disable-btn")):"mobile"===type&&($("#selectMobileMethod").addClass("active"),$("#selectCardMethod").removeClass("active"),$("#microport-card-login").css("display","none"),$("#microport-mobile-login").css("display","block"),$("#microport-card-login #micro-card-label").removeClass("active"),$("#microport-card-login #micro-pan-label").removeClass("active"),$(".view-card #card_no").val(""),$(".view-card #card_no").removeClass("invalid"),$(".view-card #pan").removeClass("invalid"),$(".view-card #pan").val(""),$("#microport-card-login #micro-card-tick").css("display","none"),$("#microport-card-login #micro-card-err").css("display","none"),$("#microport-card-login #micro-card-cross").css("display","none"),$("#microport-card-login #micro-pan-cross").css("display","none"),$("#microport-card-login #micro-pan-tick").css("display","none"),$("#microport-card-login #micro-pan-err").css("display","none"),$("#microport-card-login #micro-card-err").css("display","none"))}function genOtpMicroPort(){console.log("inside gen otp"),$("#genOtpBtnMicroPort").addClass("add-disable"),$("#genOtpBtnMicroPortEnter").addClass("disable-btn");var mobileNumber=$(".view-mobile #micro_mobile_no").val();mobileNumber=mobileNumber.substring(mobileNumber.lastIndexOf("-")+1).trim();var passphrase=$("#passphrase").val();if($("#micro-submit-error").css("display","none"),$("#micro-submit-ajaxerror").css("display","none"),passphrase)var salt=CryptoJS.lib.WordArray.random(16),iv=CryptoJS.lib.WordArray.random(16),key=CryptoJS.PBKDF2(passphrase,salt,{keySize:4,iterations:100}),encryptedMobile=CryptoJS.AES.encrypt(mobileNumber,key,{iv:iv,mode:CryptoJS.mode.CBC,padding:CryptoJS.pad.Pkcs7}),mobileNumPassed=salt+iv+encryptedMobile;else var mobileNumPassed=mobileNumber;$("#showEnterOtp #microOtpMsg").css("display","none"),$("#microport-mobile-login #microOtpGenMsg").css("display","none"),$("#microOtpGenMsg #otp-gen-msz").html("");var href="/creditcards/micro/user/login-otp-gen";$.ajax({type:"POST",data:JSON.stringify({mobile:mobileNumPassed}),url:href,contentType:"application/json; charset=utf-8",dataType:"json",headers:{passphrase:passphrase},beforeSend:function(){$("body").append(loaderHtml)},complete:function(){$("body").find("div.overlay-loader").remove()},success:function(response){response?(console.log("login ajax response"),response.success===!0?(console.log("login ajax response if block"),$("#micro_mobile_no").css("pointer-events","none"),$(".view-mobile #showEnterOtp").css("display","block"),$(".view-mobile #genOtpBtnMicroPort").css("display","none"),$("#microport-mobile-login #micro-mob-err").hide(),$("#showEnterOtp #microOtpMsg").css("display","block"),$("#showEnterOtp #otp-msz").html(response.message.replace(/_/g," "))):response.success===!1?(console.log("login ajax response else block"),$("#genOtpBtnMicroPort").removeClass("add-disable"),$("#genOtpBtnMicroPortEnter").removeClass("disable-btn"),507===response.errorCode?(console.log("login ajax response if block-507"),$("#micro-submit-otp").addClass("add-disable"),$("#micro-submit-otp .blue-btn").addClass("disable-btn"),$(".view-mobile #otp").attr("disabled",!0),$("#showEnterOtp .resend-otp").css("cursor","not-allowed"),$(".resend-otp #micro-resend-otp").css("pointer-events","none"),$(".resend-otp #micro-resend-otp").css("color","gray"),$("#micro-submit-error").css("display","none"),$("#micro-submit-ajaxerror").css("display","none"),$("#showEnterOtp #microOtpMsg").css("display","block"),$("#showEnterOtp #otp-msz").html(response.message.replace(/_/g," "))):(console.log("login ajax response else block-507"),$("#micro-submit-ajaxerror").css("display","block"),$("#micro-submit-ajaxerror #micro-ajaxerror").html(response.message.replace(/_/g," "))),509===response.errorCode&&(console.log("login ajax response if block-509"),$("#showEnterOtp").css("display","block"),$(".view-mobile #genOtpBtnMicroPort").css("display","none")),505===response.errorCode&&(console.log("login ajax response if block-505"),$("#micro-submit-otp").addClass("add-disable"),$("#micro-submit-otp .blue-btn").addClass("disable-btn"),$(".view-mobile #otp").attr("disabled",!0),$("#micro-submit-ajaxerror").css("display","block"),$("#micro-submit-ajaxerror #micro-ajaxerror").html(response.message.replace(/_/g," ")))):(console.log("login ajax response else block-507"),$("#microport-mobile-login #microOtpGenMsg").css("display","block"),$("#microOtpGenMsg #otp-gen-msz").html(response.message.replace(/_/g," ")))):(console.log("login ajax response if else responses"),$("#microport-mobile-login #microOtpGenMsg").css("display","block"),$("#microOtpGenMsg #otp-gen-msz").html("Generate OTP Failed"))},error:function(){$("body").find("div.overlay-loader").remove(),$("#microport-mobile-login #microOtpGenMsg").css("display","block"),$("#microOtpGenMsg #otp-gen-msz").html("Generate OTP Failed")}})}function regenOtpMicroPort(otpGenURL){console.log("inside gen resend otp");var mobileNumber=$(".view-mobile #micro_mobile_no").val();mobileNumber=mobileNumber.substring(mobileNumber.lastIndexOf("-")+1).trim();var passphrase=$("#passphrase").val();if($("#micro-submit-error").css("display","none"),$("#micro-submit-ajaxerror").css("display","none"),passphrase)var salt=CryptoJS.lib.WordArray.random(16),iv=CryptoJS.lib.WordArray.random(16),key=CryptoJS.PBKDF2(passphrase,salt,{keySize:4,iterations:100}),encryptedMobile=CryptoJS.AES.encrypt(mobileNumber,key,{iv:iv,mode:CryptoJS.mode.CBC,padding:CryptoJS.pad.Pkcs7}),mobileNumPassed=salt+iv+encryptedMobile;else var mobileNumPassed=mobileNumber;$("#showEnterOtp #microOtpMsg").css("display","none"),$("#microport-mobile-login #microOtpGenMsg").css("display","none"),$("#microOtpGenMsg #otp-gen-msz").html(""),$.ajax({type:"POST",data:JSON.stringify({mobile:mobileNumPassed}),url:otpGenURL,contentType:"application/json; charset=utf-8",dataType:"json",headers:{passphrase:passphrase},beforeSend:function(){$("body").append(loaderHtml)},complete:function(){$("body").find("div.overlay-loader").remove()},success:function(response){response?response.success===!0?($("#micro_mobile_no").css("pointer-events","none"),$(".view-mobile #showEnterOtp").css("display","block"),$(".view-mobile #genOtpBtnMicroPort").css("display","none"),$("#microport-mobile-login #micro-mob-err").hide(),$("#showEnterOtp #microOtpMsg").css("display","block"),$("#showEnterOtp #otp-msz").html(response.message.replace(/_/g," "))):response.success===!1?(507===response.errorCode?($("#micro-submit-otp").addClass("add-disable"),$("#micro-submit-otp .blue-btn").addClass("disable-btn"),$(".view-mobile #otp").attr("disabled",!0),$("#showEnterOtp .resend-otp").css("cursor","not-allowed"),$(".resend-otp #micro-resend-otp").css("pointer-events","none"),$(".resend-otp #micro-resend-otp").css("color","gray"),$("#micro-submit-error").css("display","none"),$("#micro-submit-ajaxerror").css("display","none"),$("#showEnterOtp #microOtpMsg").css("display","block"),$("#showEnterOtp #otp-msz").html(response.message.replace(/_/g," "))):($("#micro-submit-ajaxerror").css("display","block"),$("#micro-submit-ajaxerror #micro-ajaxerror").html(response.message.replace(/_/g," "))),509===response.errorCode&&($("#showEnterOtp").css("display","block"),$(".view-mobile #genOtpBtnMicroPort").css("display","none")),505===response.errorCode&&($("#micro-submit-otp").addClass("add-disable"),$("#micro-submit-otp .blue-btn").addClass("disable-btn"),$(".view-mobile #otp").attr("disabled",!0),$("#micro-submit-ajaxerror").css("display","block"),$("#micro-submit-ajaxerror #micro-ajaxerror").html(response.message.replace(/_/g," ")))):($("#microport-mobile-login #microOtpGenMsg").css("display","block"),$("#microOtpGenMsg #otp-gen-msz").html(response.message.replace(/_/g," "))):($("#microport-mobile-login #microOtpGenMsg").css("display","block"),$("#microOtpGenMsg #otp-gen-msz").html("Generate OTP Failed"))},error:function(){$("body").find("div.overlay-loader").remove(),$("#microport-mobile-login #microOtpGenMsg").css("display","block"),$("#microOtpGenMsg #otp-gen-msz").html("Generate OTP Failed")}})}function microCardLogin(){$("body").append(loaderHtml),$("#micro-submit-error").css("display","none"),$("#micro-submit-ajaxerror").css("display","none"),console.log("enter in microCardLogin"),sessionStorage.setItem("ifSubmitted","true"),$("#microCardSubmitBtn").addClass("add-disable"),$("#microMobileSubmitBtn").addClass("disable-btn"),$("#microCardSubmitBtnEnter").addClass("disable-btn"),checkLoginType();var cardNumValue=$(".view-card #card_no").val(),panNumValue=$(".view-card #pan").val(),mobileNumValue=$(".view-mobile #micro_mobile_no").val();mobileNumValue=mobileNumValue.substring(mobileNumValue.lastIndexOf("-")+1).trim();var otpValue=$(".view-mobile #otp").val(),passphrase=$("#passphrase").val();if(passphrase){console.log("enter in passphrase..."+passphrase);var salt=CryptoJS.lib.WordArray.random(16),iv=CryptoJS.lib.WordArray.random(16),key=CryptoJS.PBKDF2(passphrase,salt,{keySize:4,iterations:100});if(cardNumValue&&panNumValue&&!mobileNumValue&&!otpValue){console.log("enter in passphrase if block 1 ..."+cardNumValue+","+panNumValue+","+mobileNumValue+","+otpValue);var encryptedCard=CryptoJS.AES.encrypt(cardNumValue,key,{iv:iv,mode:CryptoJS.mode.CBC,padding:CryptoJS.pad.Pkcs7}),cardPassed=salt+iv+encryptedCard,encryptedPan=CryptoJS.AES.encrypt(panNumValue,key,{iv:iv,mode:CryptoJS.mode.CBC,padding:CryptoJS.pad.Pkcs7}),panPassed=salt+iv+encryptedPan}else if(mobileNumValue&&otpValue&&!cardNumValue&&!panNumValue){console.log("enter in passphrase if block 2 ..."+mobileNumValue+","+otpValue+","+cardNumValue+","+panNumValue);var encryptedMobile=CryptoJS.AES.encrypt(mobileNumValue,key,{iv:iv,mode:CryptoJS.mode.CBC,padding:CryptoJS.pad.Pkcs7}),mobilePassed=salt+iv+encryptedMobile,encryptedOtp=CryptoJS.AES.encrypt(otpValue,key,{iv:iv,mode:CryptoJS.mode.CBC,padding:CryptoJS.pad.Pkcs7}),otpPassed=salt+iv+encryptedOtp}cardNumValue&&panNumValue&&!mobileNumValue&&!otpValue?($(".view-card #card_no").val(cardPassed),$(".view-card #pan").val(panPassed),$(".view-mobile #micro_mobile_no").val("")):mobileNumValue&&otpValue&&!cardNumValue&&!panNumValue&&($(".view-mobile #micro_mobile_no").val(mobilePassed),$(".view-mobile #otp").val(otpPassed))}else $(".view-mobile #micro_mobile_no").val(mobileNumValue);$("#micro-portal-login-form").submit(),cardNumValue&&panNumValue&&!mobileNumValue&&!otpValue?($(".view-card #card_no").val(cardNumValue),$(".view-card #pan").val(panNumValue)):mobileNumValue&&otpValue&&!cardNumValue&&!panNumValue&&($(".view-mobile #micro_mobile_no").val(mobileNumValue),$(".view-mobile #otp").val(otpValue))}function checkGenOtpBtn(type){var mobileNumber=$("#micro_mobile_no").val();mobileNumber=mobileNumber.substring(mobileNumber.lastIndexOf("-")+1).trim();var format=/[ `!@#$%^&*()_+\-=\[\]{};':"\\|,.<>\/?~]/;if(format.test(mobileNumber))$("#micro_mobile_no").val(""),$("#micro_mobile_no").val("+91-");else if("mobile"===type)10===mobileNumber.length&&mobileNumber.match(/^[3-9][0-9]+/)?($("#microport-mobile-login #micro-mob-err").html(""),$("#microport-mobile-login #micro-mob-err").hide(),$("#microport-mobile-login #micro_mobile_no").addClass("valid"),$("#microport-mobile-login #micro_mobile_no").removeClass("invalid"),$("#microport-mobile-login #micro-mob-tick").css("display","block"),$("#microport-mobile-login #micro-mob-cross").css("display","none"),$("#genOtpBtnMicroPort").removeClass("add-disable"),$("#genOtpBtnMicroPort .blue-btn").removeClass("disable-btn")):10!==mobileNumber.length||mobileNumber.match(/^[3-9][0-9]+/)||($("#microport-mobile-login #micro-mob-err").html("Incorrect mobile number!"),$("#microport-mobile-login #micro-mob-err").show(),$("#microport-mobile-login #micro_mobile_no").removeClass("valid"),$("#microport-mobile-login #micro_mobile_no").addClass("invalid"),$("#microport-mobile-login #micro-mob-tick").css("display","none"),$("#microport-mobile-login #micro-mob-cross").css("display","block"),$("#genOtpBtnMicroPort").addClass("add-disable"),$("#genOtpBtnMicroPort .blue-btn").addClass("disable-btn"));else if("otp"===type){var otp=$("#showEnterOtp #otp").val();6===otp.length?($("#micro-submit-otp").removeClass("add-disable"),$("#micro-submit-otp .blue-btn").removeClass("disable-btn")):($("#micro-submit-otp").addClass("add-disable"),$("#micro-submit-otp .blue-btn").addClass("disable-btn"))}}function cardDetSubValidity(){$("#microport-card-login #card_no").hasClass("valid")&&$("#microport-card-login #pan").hasClass("valid")?($("#microCardSubmitBtn").removeClass("add-disable"),$("#microCardSubmitBtn .blue-btn").removeClass("disable-btn")):$("#microCardSubmitBtn").hasClass("add-disable")&&$("#microCardSubmitBtn .blue-btn").hasClass("disable-btn")||($("#microCardSubmitBtn").addClass("add-disable"),$("#microCardSubmitBtn .blue-btn").addClass("disable-btn"))}function formatNonAmexWhileDelete(cardNumberIP){var formatSpd=/[ `!@#$%^&*()_+\-=\[\]{};':"\\|,.<>\/?~]/;4==cardNumberIP.length?(cardNumberIP=cardNumberIP.slice(0,3),$("#microport-card-login #card_no").val(cardNumberIP)):9==cardNumberIP.length&&formatSpd.test(cardNumberIP)?(cardNumberIP=cardNumberIP.slice(0,8),$("#microport-card-login #card_no").val(cardNumberIP)):14==cardNumberIP.length&&formatSpd.test(cardNumberIP)&&(cardNumberIP=cardNumberIP.slice(0,13),$("#microport-card-login #card_no").val(cardNumberIP))}function formatAmexWhileDelete(cardNumberIP){var formatSpd=/[ `!@#$%^&*()_+\-=\[\]{};':"\\|,.<>\/?~]/;4==cardNumberIP.length?(cardNumberIP=cardNumberIP.slice(0,3),$("#microport-card-login #card_no").val(cardNumberIP)):11==cardNumberIP.length&&formatSpd.test(cardNumberIP)&&(cardNumberIP=cardNumberIP.slice(0,10),$("#microport-card-login #card_no").val(cardNumberIP))}function formatAndVerifyNonAmexMicro(cardNumberIP){var formatSpd=/[ `!@#$%^&*()_+\-=\[\]{};':"\\|,.<>\/?~]/;cardNumberIP.length<20?((4==cardNumberIP.length||(9==cardNumberIP.length||14==cardNumberIP.length)&&formatSpd.test(cardNumberIP))&&(cardNumberIP+="-",$("#microport-card-login #card_no").val(cardNumberIP)),19==cardNumberIP.length&&(cardNumberIP=cardNumberIP.slice(0,19),$("#microport-card-login #card_no").val(cardNumberIP),validateMicroCardNumbers(cardNumberIP,!1))):cardNumberIP.length>19&&(cardNumberIP=cardNumberIP.slice(0,19),$("#microport-card-login #card_no").val(cardNumberIP))}function formatAndVerifyAmexMicro(cardNumberIP){var formatSpd=/[ `!@#$%^&*()_+\-=\[\]{};':"\\|,.<>\/?~]/;cardNumberIP.length<18?((4==cardNumberIP.length||11==cardNumberIP.length&&formatSpd.test(cardNumberIP))&&(cardNumberIP+="-",$("#microport-card-login #card_no").val(cardNumberIP)),17==cardNumberIP.length&&(cardNumberIP=cardNumberIP.slice(0,17),$("#microport-card-login #card_no").val(cardNumberIP),validateMicroCardNumbers(cardNumberIP,!0))):cardNumberIP.length>17&&(cardNumberIP=cardNumberIP.slice(0,17),$("#microport-card-login #card_no").val(cardNumberIP))}function validateMicroCardNumbers(cardNumberIP,isAmex){if(cardNumberIP=cardNumberIP.trim(),isAmex){var cardNumber1=cardNumberIP.slice(0,4),cardNumber2=cardNumberIP.slice(5,11),cardNumber3=cardNumberIP.slice(12,17),cardNumber4="";$("#cvv-number").focus(),$(".validate-form #card-number-1").val(cardNumber1),$(".validate-form #card-number-2").val(cardNumber2),$(".validate-form #card-number-3").val(cardNumber3),$(".validate-form #card-number-4").val(cardNumber4);var cardNumber=cardNumber1.concat(cardNumber2,cardNumber3),isValid=creditCardValidateMicro(cardNumber);isValid?setMicroCardStyleValid():setMicroCardStyleError()}else{var cardNumber1=cardNumberIP.slice(0,4),cardNumber2=cardNumberIP.slice(5,9),cardNumber3=cardNumberIP.slice(10,14),cardNumber4=cardNumberIP.slice(15,19);$("#cvv-number").focus(),$(".login-section #card-number-1").val(cardNumber1),$(".login-section #card-number-2").val(cardNumber2),$(".login-section #card-number-3").val(cardNumber3),$(".login-section #card-number-4").val(cardNumber4);
var cardNumber=cardNumber1.concat(cardNumber2,cardNumber3,cardNumber4),isValid=creditCardValidateMicro(cardNumber);isValid?setMicroCardStyleValid():setMicroCardStyleError()}}function setMicroCardStyleError(){resetMicroCardFieldStyle(),$("#microport-card-login #card_no").addClass("invalid"),$("#microport-card-login #micro-card-cross").css("display","block"),$("#microport-card-login #micro-card-tick").css("display","none"),$("#microport-card-login #micro-card-err").css("display","block"),$("#microport-card-login #micro-card-err").html("Invalid card number!")}function setMicroCardStyleValid(){resetMicroCardFieldStyle(),$("#microport-card-login #card_no").addClass("valid"),$("#microport-card-login #micro-card-cross").css("display","none"),$("#microport-card-login #micro-card-tick").css("display","block"),$("#microport-card-login #micro-card-err").css("display","none"),$("#microport-card-login #micro-card-err").html("")}function resetMicroCardFieldStyle(){$("#microport-card-login #card_no").hasClass("invalid")&&$("#microport-card-login #card_no").removeClass("invalid"),$("#microport-card-login #card_no").hasClass("valid")&&$("#microport-card-login #card_no").removeClass("valid")}function checkLoginType(){sessionStorage.removeItem("type");var dobValue=$("#card-login #card-dob").val(),cnum=$("#card-login #card_no").val(),userId=$("#user-login #user_id").val(),mobileNumber=$("#moblogin").val(),otp=$("#mob-otp-section #otp").val();dobValue||cnum?sessionStorage.setItem("type","card"):mobileNumber||otp?sessionStorage.setItem("type","mobile"):userId&&sessionStorage.setItem("type","userId")}function resetCardSection(){$("#card-otp-section").css("display","none"),$(".view-card-login #card_no, #card-dob, #card-otp, #card_captcha_input").val(""),$("#card-login #card_no, #card-otp, #card-dob, #card_captcha_input").removeClass("valid"),$(".view-card-login #card_no, #card-dob, #card-otp, #card_captcha_input").removeClass("invalid"),$("#card-login #card_no").prop("readonly",!1),$("#card-login #card_no").css("pointer-events","auto"),$("#card-login #card_no").removeClass("valid"),$(".view-card-login #loginCardSubmitBtn").css("pointer-events","auto"),$("#card-login #login-card-err").css("display","none"),$("#card-login #login-card-cross").css("display","none"),$("#card-login #login-dob-cross").css("display","none"),$("#card-login #login-card-otp-cross").css("display","none"),$("#card-login #login-card-label").removeClass("active"),$("#card-login #login-card-captcha-label").removeClass("active"),$("#card-login #login-dob-label").removeClass("active"),$("#card-login #login-card-otp-label").removeClass("active"),$("#loginCardSubmitBtn").css("display","block"),$("#loginCardSubmitBtn").addClass("add-disable"),$("#loginCardSubmitBtn .blue-btn").addClass("disable-btn"),$("#login-card-submit").addClass("add-disable"),$("#login-card-submit .blue-btn").addClass("disable-btn"),$("#card-otp-section .resend-otp-card").css("cursor","pointer"),$(".resend-otp-card #login-card-resend-otp").css("pointer-events","auto"),$(".resend-otp-card #login-card-resend-otp").css("color","#0095d9"),$("#card-login #card_captcha_input").val(""),$("#card-login #card_captcha_input").removeClass("valid"),$("#card-login #card-login-captcha-section").css("display","none"),$("#card-login #card-login-captcha-cross").css("display","none"),$("#card-login #card_captcha_code_error").css("display","none"),$("#card-login #card-login-captcha-section").removeClass("captch-error"),$("#card-login #card_captcha_input").removeClass("invalid"),$("#card-login #card-login-captcha-section").css("display","none"),$("#card-login #card-login-select-image-section").css("display","none"),$(".view-card-login #loginCardSubmitBtn").css("display","none"),$("#card-login #dummy-card-dob").val(""),$(".input-field #dummy-login-dob-label").removeClass("active"),$("#card-login #card_calendar_error").css("display","none"),$("#card-login #card-dob-section").css("display","none"),$("#card-login #dummy-card-dob-section").css("display","none"),$("#card-login #auth_img_txt_card").prop("checked",!1),$("#card-login #cardVirtualKeyboardTillGenOTP").css("display","block"),$(".view-card-login #card-login-proceed-button-section").css("display","block"),$("#card-login #card-login-proceed-button-section").addClass("add-disable"),$("#card-login #card-login-proceed-button-section .blue-btn").addClass("disable-btn"),$("#card-login #card-dob").prop("readonly",!0),$("#card-login #card-dob").css("pointer-events","auto"),$("#card-login #login-calendar").css("pointer-events","auto"),$("#virtualkeyboard").css("display","none"),$(".keyboard .char,.keyboard .space,.keyboard .capslock").removeClass("disabled"),$(".keyboard .numbers .mob").removeClass("disabled"),resendOTPCount=0,dobotpFlag=!1}function resetMobileSection(){$(".view-mobile-login #moblogin").val("+91-"),$(".view-mobile-login #otp").val(""),$(".view-mobile-login #pin").val(""),$("#mob-primaryCard").val(""),$("#mob-otp-section").css("display","none"),$("#mob-multi-section").addClass("hidden-mob-details"),$("#mobile-login #proceedMultiAccountMobLoginBtn").css("display","none"),$("#proceedMultiAccountMobLoginBtn").addClass("add-disable"),$("#proceedMultiAccountMobLoginBtn .blue-btn").addClass("disable-btn"),$("#proceedMobLoginBtn").css("display","block"),$(".view-mobile-login #corporateVerbiageSection").css("display","block"),$("#mobile-login #login-mob-cross").css("display","none"),$("#mobile-login #login-mob-err").css("display","none"),$("#mobile-login #login-primarycard-cross").css("display","none"),$("#mobile-login #login-primarycard-err").css("display","none"),$("#mobile-login #login-pin-cross").css("display","none"),$("#mobile-login #login-otp-cross").css("display","none"),$(".view-mobile-login #moblogin").removeClass("invalid"),$("#mobile-login #mob-primaryCard").removeClass("invalid"),$("#mobile-login #pin").removeClass("invalid"),$("#mobile-login #otp").removeClass("invalid"),$("#mobile-login #moblogin").prop("readonly",!1),$("#mobile-login #mob-primaryCard").prop("readonly",!1),$("#mobile-login #pin").prop("readonly",!1),$("#mobile-login #moblogin").css("pointer-events","auto"),$("#mobile-login #pin").css("pointer-events","auto"),$("#mob-primaryCard").css("pointer-events","auto"),$(".view-mobile-login #proceedMobLoginBtn").css("pointer-events","auto"),$("#mobile-login #moblogin").removeClass("valid"),$("#mobile-login #mob-primaryCard").removeClass("valid"),$("#mobile-login #pin").removeClass("valid"),$("#mobile-login #otp").removeClass("valid"),$("#mobile-login #login-pin-label").removeClass("active"),$("#mobile-login #login-otp-label").removeClass("active"),$("#mobile-login #login-primaryCard-label").removeClass("active"),$("#proceedMobLoginBtn").addClass("add-disable"),$("#proceedMobLoginBtn .blue-btn").addClass("disable-btn"),$("#proceedMultiAccountMobLoginBtn").addClass("add-disable"),$("#proceedMultiAccountMobLoginBtn .blue-btn").addClass("disable-btn"),$("#generate-otp-multi-mobile").addClass("add-disable"),$("#generate-otp-multi-mobile .blue-btn").addClass("disable-btn"),$("#login-mob-submit").addClass("add-disable"),$("#login-mob-submit .blue-btn").addClass("disable-btn"),$(".view-mobile-login #otp").attr("disabled",!1),$("#mob-otp-section .resend-otp").css("cursor","pointer"),$(".resend-otp #login-mob-resend-otp").css("pointer-events","auto"),$(".resend-otp #login-mob-resend-otp").css("color","#0095d9"),$("#mobile-login #mobile_captcha_input").val(""),$("#mobile-login #mobile_captcha_input").removeClass("valid"),$("#mobile-login #mobile-login-captcha-cross").css("display","none"),$("#mobile-login #mobile_captcha_code_error").css("display","none"),$("#mobile-login #login-mobile-captcha-label").removeClass("active"),$("#mobile-login #mobile-login-captcha-section").removeClass("captch-error"),$("#mobile-login #mobile_captcha_input").removeClass("invalid"),$("#mobile-login #mobile-login-captcha-section").css("display","block"),$("#mobile-login #mobile-login-select-image-section").css("display","none"),$("#mobile-login #mobile_pin_error").css("display","none"),$("#mobile-login #mobile-pin-section").css("display","none"),$("#mobile-login #auth_img_txt_mobile").prop("checked",!1),$("#mobile-login #mobileVirtualKeyboardTillGenOTP").css("display","block"),$("#mobile-login #generate-otp-multi-mobile").css("display","none"),$("#virtualkeyboard").css("display","none"),$(".keyboard .char,.keyboard .space,.keyboard .capslock").removeClass("disabled"),$(".keyboard .numbers .mob").removeClass("disabled"),resendOTPCountMob=0}function resetUserPassSection(){$("#user-login #user_id").val(""),$("#user-login #password").val(""),$("#user-login #encryped_password").val(""),$("#user-login #captcha_input").val(""),$("#user-login #userid-otp").val(""),$("#user-login #userOtpKey").val(""),$("#user-login #auth_img_txt_user_id").prop("checked",!1),$("#user-login #login-user-label").removeClass("active"),$("#user-login #login-password-label").removeClass("active"),$("#user-login #login-user-captcha-label").removeClass("active"),$("#user-login #login-userid-otp-label").removeClass("active"),$("#user-login #user_id").removeClass("invalid"),$("#user-login #password").removeClass("invalid"),$("#user-login #captcha_input").removeClass("invalid"),$("#user-login #userid-otp").removeClass("invalid"),$("#user-login #user_id").css("pointer-events","auto"),$("#user-login #user_id").removeClass("valid"),$("#user-login #user_id").prop("readonly",!1),$("#user-login #password").css("pointer-events","auto"),$("#user-login #password").prop("readonly",!1),$("#user-login #password").removeClass("valid"),$("#user-login #captcha_input").val(""),$("#user-login #captcha_input").removeClass("valid"),$("#user-login #userid-login-captcha-section").css("display","none"),$("#user-login #userid-login-captcha-cross").css("display","none"),$("#user-login #userid_captcha_code_error").css("display","none"),$("#user-login #userid-login-captcha-section").removeClass("captch-error"),$("#user-login #login-user-captcha-label").removeClass("active"),$("#user-login #captcha_input").removeClass("invalid"),$(".view-user-login #userid-login-proceed-button-section").css("display","block"),$("#userid-login-proceed-button-section").addClass("add-disable"),$("#userid-login-proceed-button-section .blue-btn").addClass("disable-btn"),$("#user-login #UserTillGenOtpVirtualKeybd").css("display","block"),$("#user-login #userid-login-select-image-section").css("display","none"),$(".view-user-login #userid-generate-otp-button-section").css("display","none"),$("#user-login #userid_password_error").css("display","none"),$("#user-login #micro-password-err").css("display","none"),$("#user-login #userid-login-password-section").css("display","none"),$("#userid-generate-otp-button-section").addClass("add-disable"),$("#userid-generate-otp-button-section .blue-btn").addClass("disable-btn"),$(".view-user-login #userid-otp-section").css("display","none"),$("#loginUserSubmitBtn").addClass("add-disable"),$("#loginUserSubmitBtn .blue-btn").addClass("disable-btn"),$(".view-user-login #otp").attr("disabled",!1),$("#userid-otp-section .resend-otp").css("cursor","pointer"),$(".resend-otp #login-user-resend-otp").css("pointer-events","auto"),$(".resend-otp #login-user-resend-otp").css("color","#0095d9"),$("#virtualkeyboard").css("display","none"),$(".keyboard .char,.keyboard .space,.keyboard .capslock").removeClass("disabled"),$(".keyboard .numbers .mob").removeClass("disabled"),userResendOTPCount=0}function toggleMobileOrUserOrCard(type){$("#login-submit-error").css("display","none"),$("#login-submit-ajaxerror").css("display","none"),$(".main-wrap.campaign-wrap.no-border.login-page-loggedout").css("display","none"),"card"===type?($("#selectCardSection").addClass("active"),$("#selectUserSection").removeClass("active"),$("#selectMobileSection").removeClass("active"),$("#card-login").css("display","block"),$("#mobile-login").css("display","none"),$("#user-login").css("display","none"),resetMobileSection(),resetUserPassSection(),resetCardSection()):"mobile"===type?($("#selectMobileSection").addClass("active"),$("#selectCardSection").removeClass("active"),$("#selectUserSection").removeClass("active"),$("#card-login").css("display","none"),$("#user-login").css("display","none"),$("#mobile-login").css("display","block"),resetMobileSection(),resetUserPassSection(),resetCardSection()):"user"===type&&($("#selectUserSection").addClass("active"),$("#selectMobileSection").removeClass("active"),$("#selectCardSection").removeClass("active"),$("#user-login").css("display","block"),$("#card-login").css("display","none"),$("#mobile-login").css("display","none"),resetUserPassSection(),resetMobileSection(),resetCardSection()),0!=endSessionExistMob&&void 0!=endSessionExistMob||0!=endSessionExist&&void 0!=endSessionExist?(endSessionExist=!1,endSessionExistMob=!1):$("#login-submit-error, #login-submit-ajaxerror").css("display","none")}function resendOtpForMobLogin(otpGenURL){if(!(resendOTPCountMob>5)){$("#moblogin").css("pointer-events","none");var mobileNumber=$(".view-mobile-login #moblogin").val(),otpValue=$("#mob-otp-section #otp").val(),pin=$("#mobile-login #pin").val();mobileNumber=mobileNumber.substring(mobileNumber.lastIndexOf("-")+1).trim();var passphrase=$("#passphrase").val();if($("#login-submit-error").css("display","none"),$("#login-submit-ajaxerror").css("display","none"),passphrase)var salt=CryptoJS.lib.WordArray.random(16),iv=CryptoJS.lib.WordArray.random(16),key=CryptoJS.PBKDF2(passphrase,salt,{keySize:4,iterations:100}),encryptedMobile=CryptoJS.AES.encrypt(mobileNumber,key,{iv:iv,mode:CryptoJS.mode.CBC,padding:CryptoJS.pad.Pkcs7}),mobileNumPassed=salt+iv+encryptedMobile;else var mobileNumPassed=mobileNumber;$("#mob-otp-section #loginMobOtpMsg").css("display","none"),$("#mobile-login #loginMobOtpGenMsg").css("display","none"),$("#loginMobOtpGenMsg #otp-gen-msz").html(""),$.ajax({type:"POST",data:JSON.stringify({mobile:mobileNumPassed}),url:otpGenURL,contentType:"application/json; charset=utf-8",dataType:"json",headers:{passphrase:passphrase},beforeSend:function(){4===pin.length?($(".input-field #login-pin-label").addClass("active"),$("#mobile-login #pin").removeClass("invalid"),$("#mobile-login #login-pin-cross").css("display","none")):pin?pin.length<4&&($(".input-field #login-pin-label").addClass("active"),$("#mobile-login #pin").addClass("invalid"),$("#mobile-login #login-pin-cross").css("display","block")):($(".input-field #login-pin-label").removeClass("active"),$("#mobile-login #pin").removeClass("invalid"),$("#mobile-login #login-pin-cross").css("display","none")),6===otpValue.length?($(".input-field #login-otp-label").addClass("active"),$("#mobile-login #otp").removeClass("invalid"),$("#mobile-login #login-otp-cross").css("display","none")):otpValue?otpValue.length<6&&($(".input-field #login-otp-label").addClass("active"),$("#mobile-login #otp").addClass("invalid"),$("#mobile-login #login-otp-cross").css("display","block")):($(".input-field #login-otp-label").removeClass("active"),$("#mobile-login #otp").removeClass("invalid"),$("#mobile-login #login-otp-cross").css("display","none")),$("body").append(loaderHtml)},complete:function(){$("body").find("div.overlay-loader").remove()},success:function(response){response&&($("#otpMobKey").val(response.otpKey),response.success===!0?($("#moblogin").css("pointer-events","none"),$("#mobile-login #login-mob-err").hide(),$("#mob-otp-section #loginMobOtpMsg").css("display","block"),$("#mob-otp-section #otp-msz").html(response.message.replace(/_/g," ")),resendOTPCountMob+=1):(512===response.errorCode?location.href=location.origin+"/creditcards/app/user/login?endSessionMob=true":(507===response.errorCode||1010===response.errorCode)&&($("#mob-otp-section .resend-otp").css("cursor","not-allowed"),$(".resend-otp #login-mob-resend-otp").css("pointer-events","none"),$(".resend-otp #login-mob-resend-otp").css("color","gray"),resendOTPCountMob+=1),$("#login-submit-ajaxerror").css("display","block"),$("#login-submit-ajaxerror #login-ajaxerror").html(response.message.replace(/_/g," ")),$("#login-mob-submit").addClass("add-disable"),$("#login-mob-submit .blue-btn").addClass("disable-btn"),$(".view-mobile-login #otp").attr("disabled",!0)))},error:function(){$("body").find("div.overlay-loader").remove()}})}}function checkUserLoginBtn(type){if("userid"===type||"captcha"===type){var userid=$("#user-login #user_id").val();if($("#user-login #captcha_input").is(":visible")){var captcha=$("#user-login #captcha_input").val();userid&&captcha?($("#userid-login-proceed-button-section").removeClass("add-disable"),$("#userid-login-proceed-button-section .blue-btn").removeClass("disable-btn"),removeCaptchaError("userlogin")):($("#userid-login-proceed-button-section").addClass("add-disable"),$("#userid-login-proceed-button-section .blue-btn").addClass("disable-btn"))}else userid?($("#userid-login-proceed-button-section").removeClass("add-disable"),$("#userid-login-proceed-button-section .blue-btn").removeClass("disable-btn")):($("#userid-login-proceed-button-section").addClass("add-disable"),$("#userid-login-proceed-button-section .blue-btn").addClass("disable-btn"))}else if("password"===type){var password=$("#user-login #password").val();password&&$("#auth_img_txt_user_id").is(":checked")?($("#userid-generate-otp-button-section").removeClass("add-disable"),$("#userid-generate-otp-button-section .blue-btn").removeClass("disable-btn")):password&&!$("#user-login #auth_img_txt_user_id").is(":visible")?($("#userid-generate-otp-button-section").removeClass("add-disable"),$("#userid-generate-otp-button-section .blue-btn").removeClass("disable-btn")):($("#userid-generate-otp-button-section").addClass("add-disable"),$("#userid-generate-otp-button-section .blue-btn").addClass("disable-btn"))}else if("otp"===type){var otp=$("#user-login #userid-otp").val();otp&&6==otp.length?($("#loginUserSubmitBtn").removeClass("add-disable"),$("#loginUserSubmitBtn .blue-btn").removeClass("disable-btn")):($("#loginUserSubmitBtn").addClass("add-disable"),$("#loginUserSubmitBtn .blue-btn").addClass("disable-btn"))}}function checkCardLoginBtn(type){if("captcha"===type||"cardNumber"===type){var card_number=$("#card-login #card_no").val().replace(/-/g,"");if($("#card-login #card_captcha_input").is(":visible")){var captchEnter=$("#card-login #card_captcha_input").val();captchEnter&&(16==card_number.length||15==card_number.length)&&$("#card-login #card_no").hasClass("valid")?($("#card-login-proceed-button-section").removeClass("add-disable"),$("#card-login-proceed-button-section .blue-btn").removeClass("disable-btn"),removeCaptchaError("cardlogin")):($("#card-login-proceed-button-section").addClass("add-disable"),$("#card-login-proceed-button-section .blue-btn").addClass("disable-btn"))}else $("#card-login #card_no").hasClass("valid")&&(16==card_number.length||15==card_number.length&&"3"==card_number[0]&&"7"==card_number[1])?($("#card-login-proceed-button-section").removeClass("add-disable"),$("#card-login-proceed-button-section .blue-btn").removeClass("disable-btn")):($("#card-login-proceed-button-section").addClass("add-disable"),$("#card-login-proceed-button-section .blue-btn").addClass("disable-btn"))}else if("dob"===type){var dob=$("#card-login #card-dob").val();dob?($("#loginCardSubmitBtn").removeClass("add-disable"),$("#loginCardSubmitBtn .blue-btn").removeClass("disable-btn")):($("#loginCardSubmitBtn").addClass("add-disable"),$("#loginCardSubmitBtn .blue-btn").addClass("disable-btn"))}else if("otp"===type){var dob=$("#card-login #card-dob").val(),cardOtp=$("#card-login #card-otp").val();dob&&6===cardOtp.length?($("#login-card-submit").removeClass("add-disable"),$("#login-card-submit .blue-btn").removeClass("disable-btn")):($("#login-card-submit").addClass("add-disable"),$("#login-card-submit .blue-btn").addClass("disable-btn"))}}function checkMobileLoginBtn(type){var mobileNumber=$("#moblogin").val();mobileNumber=mobileNumber.substring(mobileNumber.lastIndexOf("-")+1).trim();var format=/[ `!@#$%^&*()_+\-=\[\]{};':"\\|,.<>\/?~]/;if(format.test(mobileNumber))$("#moblogin").val(""),$("#moblogin").val("+91-");else if("mobile"===type||"captcha"===type)if(mobileNumber.length>9&&mobileNumber.match(/^[6-9][0-9]+/))if($("#mobile-login #login-mob-err").html(""),$("#mobile-login #login-mob-err").hide(),$("#mobile-login #moblogin").addClass("valid"),$("#mobile-login #moblogin").removeClass("invalid"),$("#mobile-login #login-mob-cross").css("display","none"),$("#mobile-login #mobile_captcha_input").is(":visible")){var captcha=$("#mobile-login #mobile_captcha_input").val();captcha?($("#proceedMobLoginBtn").removeClass("add-disable"),$("#proceedMobLoginBtn .blue-btn").removeClass("disable-btn"),removeCaptchaError("mobilelogin")):($("#proceedMobLoginBtn").addClass("add-disable"),$("#proceedMobLoginBtn .blue-btn").addClass("disable-btn"))}else $("#proceedMobLoginBtn").removeClass("add-disable"),$("#proceedMobLoginBtn .blue-btn").removeClass("disable-btn");else mobileNumber.length>9&&!mobileNumber.match(/^[6-9][0-9]+/)?($("#mobile-login #login-mob-err").html("Incorrect mobile number!"),$("#mobile-login #login-mob-err").show(),$("#mobile-login #moblogin").removeClass("valid"),$("#mobile-login #moblogin").addClass("invalid"),$("#mobile-login #login-mob-cross").css("display","block"),$("#proceedMobLoginBtn").addClass("add-disable"),$("#proceedMobLoginBtn .blue-btn").addClass("disable-btn")):mobileNumber.length<=9&&($("#mobile-login #login-mob-err").html(""),$("#mobile-login #login-mob-err").hide(),$("#mobile-login #login-mob-cross").css("display","block"),$("#mobile-login #moblogin").removeClass("valid"),$("#mobile-login #moblogin").removeClass("invalid"),$("#proceedMobLoginBtn").addClass("add-disable"),$("#proceedMobLoginBtn .blue-btn").addClass("disable-btn"));else if("primaryCard"===type){var primaryCard=$("#mob-multi-section #mob-primaryCard").val();4===primaryCard.length?($("#proceedMultiAccountMobLoginBtn").removeClass("add-disable"),$("#proceedMultiAccountMobLoginBtn .blue-btn").removeClass("disable-btn")):($("#proceedMultiAccountMobLoginBtn").addClass("add-disable"),$("#proceedMultiAccountMobLoginBtn .blue-btn").addClass("disable-btn"))}else if("pin"===type){var pin=$("#mobile-login #pin").val();4===pin.length?$("#mobileSelectImageId").is(":visible")?document.getElementById("auth_img_txt_mobile").checked&&($("#generate-otp-multi-mobile").removeClass("add-disable"),$("#generate-otp-multi-mobile .blue-btn").removeClass("disable-btn")):($("#generate-otp-multi-mobile").removeClass("add-disable"),$("#generate-otp-multi-mobile .blue-btn").removeClass("disable-btn")):($("#generate-otp-multi-mobile").addClass("add-disable"),$("#generate-otp-multi-mobile .blue-btn").addClass("disable-btn"))}else if("otp"===type){var otp=$("#mob-otp-section #otp").val();6===otp.length?($("#login-mob-submit").removeClass("add-disable"),$("#login-mob-submit .blue-btn").removeClass("disable-btn")):($("#login-mob-submit").addClass("add-disable"),$("#login-mob-submit .blue-btn").addClass("disable-btn"))}}function cardSubValidity(){$("#card-login #card_no").hasClass("valid")&&$("#card-login #card-dob").hasClass("valid")?($("#loginCardSubmitBtn").removeClass("add-disable"),$("#loginCardSubmitBtn .blue-btn").removeClass("disable-btn")):$("#loginCardSubmitBtn").hasClass("add-disable")&&$("#loginCardSubmitBtn .blue-btn").hasClass("disable-btn")||($("#loginCardSubmitBtn").addClass("add-disable"),$("#loginCardSubmitBtn .blue-btn").addClass("disable-btn"))}function formatNonAmexWhileDeleteLogin(cardNumberIP){var formatSpd=/[ `!@#$%^&*()_+\-=\[\]{};':"\\|,.<>\/?~]/;4==cardNumberIP.length?(cardNumberIP=cardNumberIP.slice(0,3),$("#card-login #card_no").val(cardNumberIP)):9==cardNumberIP.length&&formatSpd.test(cardNumberIP)?(cardNumberIP=cardNumberIP.slice(0,8),$("#card-login #card_no").val(cardNumberIP)):14==cardNumberIP.length&&formatSpd.test(cardNumberIP)&&(cardNumberIP=cardNumberIP.slice(0,13),$("#card-login #card_no").val(cardNumberIP))}function formatAmexWhileDeleteLogin(cardNumberIP){var formatSpd=/[ `!@#$%^&*()_+\-=\[\]{};':"\\|,.<>\/?~]/;4==cardNumberIP.length?(cardNumberIP=cardNumberIP.slice(0,3),$("#card-login #card_no").val(cardNumberIP)):11==cardNumberIP.length&&formatSpd.test(cardNumberIP)&&(cardNumberIP=cardNumberIP.slice(0,10),$("#card-login #card_no").val(cardNumberIP))}function formatAndVerifyNonAmexLogin(cardNumberIP){var formatSpd=/[ `!@#$%^&*()_+\-=\[\]{};':"\\|,.<>\/?~]/;cardNumberIP.length<20?((4==cardNumberIP.length||(9==cardNumberIP.length||14==cardNumberIP.length)&&formatSpd.test(cardNumberIP))&&(cardNumberIP+="-",$("#card-login #card_no").val(cardNumberIP)),19==cardNumberIP.length&&(cardNumberIP=cardNumberIP.slice(0,19),$("#card-login #card_no").val(cardNumberIP),validateLoginCardNumbers(cardNumberIP,!1))):cardNumberIP.length>19&&(cardNumberIP=cardNumberIP.slice(0,19),$("#card-login #card_no").val(cardNumberIP))}function formatAndVerifyAmexLogin(cardNumberIP){var formatSpd=/[ `!@#$%^&*()_+\-=\[\]{};':"\\|,.<>\/?~]/;cardNumberIP.length<18?((4==cardNumberIP.length||11==cardNumberIP.length&&formatSpd.test(cardNumberIP))&&(cardNumberIP+="-",$("#card-login #card_no").val(cardNumberIP)),17==cardNumberIP.length&&(cardNumberIP=cardNumberIP.slice(0,17),$("#card-login #card_no").val(cardNumberIP),validateLoginCardNumbers(cardNumberIP,!0))):cardNumberIP.length>17&&(cardNumberIP=cardNumberIP.slice(0,17),$("#card-login #card_no").val(cardNumberIP))}function validateLoginCardNumbers(cardNumberIP,isAmex){if(cardNumberIP=cardNumberIP.trim(),isAmex){var cardNumber1=cardNumberIP.slice(0,4),cardNumber2=cardNumberIP.slice(5,11),cardNumber3=cardNumberIP.slice(12,17),cardNumber4="";$("#cvv-number").focus(),$(".validate-form #card-number-1").val(cardNumber1),$(".validate-form #card-number-2").val(cardNumber2),$(".validate-form #card-number-3").val(cardNumber3),$(".validate-form #card-number-4").val(cardNumber4);var cnum=cardNumber1.concat(cardNumber2,cardNumber3),isValid=creditCardValidateMicro(cnum);isValid?setLoginCardStyleValid():setLoginCardStyleError()}else{var cardNumber1=cardNumberIP.slice(0,4),cardNumber2=cardNumberIP.slice(5,9),cardNumber3=cardNumberIP.slice(10,14),cardNumber4=cardNumberIP.slice(15,19);$("#cvv-number").focus(),$(".login-section #card-number-1").val(cardNumber1),$(".login-section #card-number-2").val(cardNumber2),$(".login-section #card-number-3").val(cardNumber3),$(".login-section #card-number-4").val(cardNumber4);var cnum=cardNumber1.concat(cardNumber2,cardNumber3,cardNumber4),isValid=creditCardValidateMicro(cnum);isValid?setLoginCardStyleValid():setLoginCardStyleError()}}function setLoginCardStyleError(){resetLoginCardFieldStyle(),$("#card-login #card_no").addClass("invalid"),$("#card-login #login-card-cross").css("display","block"),$("#card-login #login-card-err").css("display","block"),$("#card-login #login-card-err").html("Invalid card number!"),checkCardLoginBtn("cardNumber")}function setLoginCardStyleValid(){resetLoginCardFieldStyle(),$("#card-login #card_no").addClass("valid"),$("#card-login #login-card-cross").css("display","none"),$("#card-login #login-card-err").css("display","none"),$("#card-login #login-card-err").html(""),checkCardLoginBtn("cardNumber")}function resetLoginCardFieldStyle(){$("#card-login #card_no").hasClass("invalid")&&$("#card-login #card_no").removeClass("invalid"),$("#card-login #card_no").hasClass("valid")&&$("#card-login #card_no").removeClass("valid")}function formatCardNum(){var cardNum=$("#card-login #card_no");if(value=cardNum.val(),firstDigit=value.charAt(0),secondDigit=value.charAt(1),15==value.length&&3==firstDigit&&7==secondDigit&&-1==value.indexOf("-")){var cardNum1=value.slice(0,4),cardNum2=value.slice(4,10),cardNum3=value.slice(10,15),cardNum1=cardNum1+"-"+cardNum2+"-"+cardNum3;cardNum.val(cardNum1)}else if(16==value.length&&-1==value.indexOf("-")){var cardNum1=value.slice(0,4),cardNum2=value.slice(4,8),cardNum3=value.slice(8,12),cardNum4=value.slice(12,16),cardNum1=cardNum1+"-"+cardNum2+"-"+cardNum3+"-"+cardNum4;cardNum.val(cardNum1)}}function formatCardNumber(cardNumberValue){var cardNum=$("#card-login #card_no");if(value=cardNumberValue,firstDigit=value.charAt(0),secondDigit=value.charAt(1),15==value.length&&3==firstDigit&&7==secondDigit&&-1==value.indexOf("-")){var cardNum1=value.slice(0,4),cardNum2=value.slice(4,10),cardNum3=value.slice(10,15),cardNum1=cardNum1+"-"+cardNum2+"-"+cardNum3;cardNum.val(cardNum1)}else if(16==value.length&&-1==value.indexOf("-")){var cardNum1=value.slice(0,4),cardNum2=value.slice(4,8),cardNum3=value.slice(8,12),cardNum4=value.slice(12,16),cardNum1=cardNum1+"-"+cardNum2+"-"+cardNum3+"-"+cardNum4;cardNum.val(cardNum1)}}function deformatCardNum(cardNum){var cardNumValue="";return 19==cardNum.length?(cardNum1=cardNum.slice(0,4),cardNum2=cardNum.slice(5,9),cardNum3=cardNum.slice(10,14),cardNum4=cardNum.slice(15,19),cardNumValue=cardNum1+cardNum2+cardNum3+cardNum4):17==cardNum.length?(cardNum1=cardNum.slice(0,4),cardNum2=cardNum.slice(5,11),cardNum3=cardNum.slice(12,17),cardNumValue=cardNum1+cardNum2+cardNum3):cardNumValue=cardNum,cardNumValue}function removeErrorcardNum(){$("#card-login #login-card-err").css("display","none"),$("#card-login #login-card-cross").css("display","none");{var cardNumberIP=$("#card-login #card_no").val().trim();cardNumberIP.charAt(0),cardNumberIP.charAt(1),cardNumberIP.length}}function validateCardNumbersNew(cardNumberIP){cardNumberIP=cardNumberIP.trim();var cardNumber="";cardNumber=deformatCardNum(cardNumberIP);var firstDigit=cardNumber.charAt(0),secondDigit=cardNumber.charAt(1),isValid=creditCardValidateRetail(cardNumber);!isValid&&(cardNumber.length>0&&3==firstDigit&&7==secondDigit||cardNumber.length>0)?($("#card-login #login-card-err").css("display","block"),$("#card-login #login-card-err").html("Invalid card number!"),$("#card-login #login-card-cross").css("display","block"),$(".view-card-login #card_no").addClass("invalid")):isValid&&(cardNumber.length>0&&3==firstDigit&&7==secondDigit||cardNumber.length>0)&&($("#card-login #login-card-err").css("display","none"),$("#card-login #login-card-cross").css("display","none"),$(".view-card-login #card_no").removeClass("invalid"))}function encryptData(data){var passphrase=$("#passphrase").val();if(passphrase){var salt=CryptoJS.lib.WordArray.random(16);iv=CryptoJS.lib.WordArray.random(16),key=CryptoJS.PBKDF2(passphrase,salt,{keySize:4,iterations:100}),encryptedData=CryptoJS.AES.encrypt(data,key,{iv:iv,mode:CryptoJS.mode.CBC,padding:CryptoJS.pad.Pkcs7}),dataPassed=salt+iv+encryptedData}else var dataPassed=data;return dataPassed}function decryptCardNumber(encryptedText){var passphrase=$("#prePassphase").val(),salt=CryptoJS.enc.Hex.parse(encryptedText.substr(0,32)),iv=CryptoJS.enc.Hex.parse(encryptedText.substr(32,32)),encrypted=encryptedText.substring(64),key=CryptoJS.PBKDF2(passphrase,salt,{keySize:4,iterations:100}),decrypted=CryptoJS.AES.decrypt(encrypted,key,{iv:iv,padding:CryptoJS.pad.Pkcs7,mode:CryptoJS.mode.CBC}),decryptedDataPassed=decrypted.toString(CryptoJS.enc.Utf8);return decryptedDataPassed}function proceedMobLoginBtn(proceedMObURL){var mobileNumber=$(".view-mobile-login #moblogin").val(),captchaEntered=$(".view-mobile-login #mobile_captcha_input").val();if(mobileNumber=mobileNumber.substring(mobileNumber.lastIndexOf("-")+1).trim(),$(".view-mobile-login #moblogin").hasClass("invalid"))return $(".view-mobile-login #moblogin").addClass("invalid"),void $("#mobile-login #login-mob-cross").css("display","block");var passphrase=$("#passphrase").val();$("#login-submit-error").css("display","none"),$("#login-submit-ajaxerror").css("display","none"),$("#login-submit-ajaxerror #login-ajaxerror").html(""),$(".main-wrap.campaign-wrap.no-border.login-page-loggedout").css("display","none"),$("#mob-otp-section #loginMobOtpMsg").css("display","none"),mobPassed=encryptData(mobileNumber),captchaPassed=null!=captchaEntered&&""!=captchaEntered?encryptData(captchaEntered):null,$.ajax({type:"POST",data:JSON.stringify({mobile:mobPassed,captcha:captchaPassed}),url:proceedMObURL,contentType:"application/json; charset=utf-8",headers:{passphrase:passphrase},beforeSend:function(){$("body").append(loaderHtml)
},complete:function(){$("body").find("div.overlay-loader").remove()},success:function(response){if(response){var pars_response=decryptResponse(response,passphrase);pars_response.success===!0?1==pars_response.genuineUser&&"501"==pars_response.status_code?($("#mobile-login #moblogin").css("pointer-events","none"),$("#mobile-login #moblogin").prop("readonly",!0),$(".view-mobile-login #proceedMobLoginBtn").css("display","none"),$(".view-mobile-login #corporateVerbiageSection").css("display","none"),$("#mobile-login #login-mob-err").hide(),$("#mobile-login #mobile-login-captcha-section").css("display","none"),$("#mob-multi-section").removeClass("hidden-mob-details"),$(".view-mobile-login #proceedMultiAccountMobLoginBtn").css("display","block")):0==pars_response.genuineUser&&"200"==pars_response.status_code?($("#moblogin").css("pointer-events","none"),$("#mobile-login #moblogin").prop("readonly",!0),$(".view-mobile-login #proceedMobLoginBtn").css("display","none"),$(".view-mobile-login #corporateVerbiageSection").css("display","none"),$("#mobile-login #login-mob-err").hide(),$("#mobile-login #mobile-login-captcha-section").css("display","none"),$("#mobile-login #mobile-login-select-image-section").css("display","block"),$("#mobile-login #mobileSelectImageId").attr("src",pars_response.userImageDetail.imageName),$("#mobile-login #mobileSelectedImageText").text(pars_response.userImageDetail.passphrase),$("#mobile-login #mobile-pin-section").css("display","block"),$(".view-mobile-login #generate-otp-multi-mobile").css("display","block")):1==pars_response.genuineUser&&"200"==pars_response.status_code?($("#moblogin").css("pointer-events","none"),$("#mobile-login #moblogin").prop("readonly",!0),$(".view-mobile-login #proceedMobLoginBtn").css("display","none"),$(".view-mobile-login #corporateVerbiageSection").css("display","none"),$("#mobile-login #login-mob-err").hide(),$("#mobile-login #mobile-login-captcha-section").css("display","none"),pars_response.imageRegistered===!0&&($("#mobile-login #mobile-login-select-image-section").css("display","block"),$("#mobile-login #mobileSelectImageId").attr("src",pars_response.userImageDetail.imageName),$("#mobile-login #mobileSelectedImageText").text(pars_response.userImageDetail.passphrase)),$("#mobile-login #mobile-pin-section").css("display","block"),$(".view-mobile-login #generate-otp-multi-mobile").css("display","block")):void 0!=pars_response.captchaRequired&&(refreshCaptcha("/creditcards/app/user/refresh-captcha","mobilelogin"),$("#mobileloginCaptchaFlag").val(pars_response.captchaRequired),$("#mobile-login #mobile_captcha_input").val(""),$("#mobile-login #mobile_captcha_input").removeClass("valid"),$("#mobile-login #mobile-login-captcha-section").css("display","block"),$("#mobile-login #mobile-login-captcha-cross").css("display","none"),$("#mobile-login #mobile_captcha_code_error").css("display","none"),$("#mobile-login #login-mobile-captcha-label").removeClass("active"),$("#mobile-login #mobile-login-captcha-section").removeClass("captch-error"),$("#moblogin").css("pointer-events","none"),$("#mobile-login #moblogin").prop("readonly",!0),$("#proceedMobLoginBtn").addClass("add-disable"),$("#proceedMobLoginBtn .blue-btn").addClass("disable-btn")):"503"===pars_response.status_code?($("#moblogin").css("pointer-events","none"),$("#mobile-login #moblogin").prop("readonly",!0),$(".view-mobile-login #proceedMobLoginBtn").css("display","none"),$(".view-mobile-login #corporateVerbiageSection").css("display","none"),$("#mobile-login #login-mob-err").hide(),$("#mobile-login #mobile-login-captcha-section").css("display","none"),$("#mobile-login #mobile-login-select-image-section").css("display","block"),$("#mobile-login #mobileSelectImageId").attr("src",pars_response.userImageDetail.imageName),$("#mobile-login #mobileSelectedImageText").text(pars_response.userImageDetail.passphrase),$("#mobile-login #mobile-pin-section").css("display","block"),$(".view-mobile-login #generate-otp-multi-mobile").css("display","block")):"999"===pars_response.status_code?(refreshCaptcha("/creditcards/app/user/refresh-captcha","showCaptchaError"),captchaError("mobilelogin"),$("#login-submit-ajaxerror #login-ajaxerror").html(""),$("#login-submit-ajaxerror").css("display","block"),$("#login-submit-ajaxerror #login-ajaxerror").html(pars_response.message.replace(/_/g," ")),$("html, body, #login-submit-ajaxerror").animate({scrollTop:0},"slow")):"560"===pars_response.status_code?(refreshCaptcha("/creditcards/app/user/refresh-captcha","mobilelogin"),resetMobileSection(),$("#login-submit-ajaxerror #login-ajaxerror").html(""),$("#login-submit-ajaxerror").css("display","block"),$("#login-submit-ajaxerror #login-ajaxerror").html(pars_response.message.replace(/_/g," ")),$("html, body, #login-submit-ajaxerror").animate({scrollTop:0},"slow")):"512"===pars_response.status_code?(location.href=location.origin+"/creditcards/app/user/login?endSessionMob=true",refreshCaptcha("/creditcards/app/user/refresh-captcha","mobilelogin"),resetMobileSection()):"008"===pars_response.status_code?(refreshCaptcha("/creditcards/app/user/refresh-captcha","mobilelogin"),resetMobileSection(),$("#login-submit-ajaxerror #login-ajaxerror").html(""),$("#login-submit-ajaxerror").css("display","block"),$("#login-submit-ajaxerror #login-ajaxerror").html(pars_response.message.replace(/_/g," ")),$("html, body, #login-submit-ajaxerror").animate({scrollTop:0},"slow")):(refreshCaptcha("/creditcards/app/user/refresh-captcha","mobilelogin"),resetMobileSection(),$("#login-submit-ajaxerror #login-ajaxerror").html(""),$("#login-submit-ajaxerror").css("display","block"),$("#login-submit-ajaxerror #login-ajaxerror").html(pars_response.message.replace(/_/g," ")),$("html, body, #login-submit-ajaxerror").animate({scrollTop:0},"slow"))}},error:function(){$("body").find("div.overlay-loader").remove()}})}function proceedMultiAccountMobLoginBtn(proceedMObURL){var mobileNumber=$("#mobile-login #moblogin").val(),cardLastFourDigits=$("#mobile-login #mob-primaryCard").val();mobileNumber=mobileNumber.substring(mobileNumber.lastIndexOf("-")+1).trim();var passphrase=$("#passphrase").val();$("#login-submit-error").css("display","none"),$("#login-submit-ajaxerror").css("display","none"),$("#login-submit-ajaxerror #login-ajaxerror").html(""),$(".main-wrap.campaign-wrap.no-border.login-page-loggedout").css("display","none"),$("#mob-otp-section #loginMobOtpMsg").css("display","none"),mobPassed=encryptData(mobileNumber),cardLastFourDigitsPassed=encryptData(cardLastFourDigits),$.ajax({type:"POST",data:JSON.stringify({mobile:mobPassed,cardLastFourDigits:cardLastFourDigitsPassed}),url:proceedMObURL,contentType:"application/json; charset=utf-8",headers:{passphrase:passphrase},beforeSend:function(){$("body").append(loaderHtml)},complete:function(){$("body").find("div.overlay-loader").remove()},success:function(response){if(response){var pars_response=decryptResponse(response,passphrase);pars_response.success===!0?1==pars_response.genuineUser&&"200"==pars_response.status_code?($("#mobile-login #moblogin").css("pointer-events","none"),$("#mobile-login #moblogin").prop("readonly",!0),$("#mobile-login #mob-primaryCard").css("pointer-events","none"),$("#mobile-login #mob-primaryCard").prop("readonly",!0),$("#mob-multi-section").removeClass("hidden-mob-details"),$(".view-mobile-login #proceedMobLoginBtn").css("display","none"),$(".view-mobile-login #proceedMultiAccountMobLoginBtn").css("display","none"),$(".view-mobile-login #corporateVerbiageSection").css("display","none"),$("#mobile-login #login-mob-err").hide(),$("#mobile-login #mobile-login-captcha-section").css("display","none"),pars_response.imageRegistered===!0&&($("#mobile-login #mobile-login-select-image-section").css("display","block"),$("#mobile-login #mobileSelectImageId").attr("src",pars_response.userImageDetail.imageName),$("#mobile-login #mobileSelectedImageText").text(pars_response.userImageDetail.passphrase)),$("#mobile-login #mobile-pin-section").css("display","block"),$(".view-mobile-login #generate-otp-multi-mobile").css("display","block")):1==pars_response.genuineUser&&"501"==pars_response.status_code?($("#moblogin").css("pointer-events","none"),$("#mobile-login #moblogin").prop("readonly",!0),$("#mobile-login #mob-primaryCard").css("pointer-events","none"),$("#mobile-login #mob-primaryCard").prop("readonly",!0),$(".view-mobile-login #proceedMobLoginBtn").css("display","none"),$(".view-mobile-login #proceedMultiAccountMobLoginBtn").css("display","none"),$(".view-mobile-login #corporateVerbiageSection").css("display","none"),$("#mobile-login #login-mob-err").hide(),$("#mob-multi-section").removeClass("hidden-mob-details"),$("#mobile-login #mobile-login-captcha-section").css("display","none"),pars_response.imageRegistered===!0&&($("#mobile-login #mobile-login-select-image-section").css("display","block"),$("#mobile-login #mobileSelectImageId").attr("src",pars_response.userImageDetail.imageName),$("#mobile-login #mobileSelectedImageText").text(pars_response.userImageDetail.passphrase)),$("#mobile-login #mobile-pin-section").css("display","block"),$(".view-mobile-login #generate-otp-multi-mobile").css("display","block")):pars_response.genuineUser!==!0&&"200"==pars_response.status_code&&($("#moblogin").css("pointer-events","none"),$("#mobile-login #moblogin").prop("readonly",!0),$("#mobile-login #mob-primaryCard").css("pointer-events","none"),$("#mobile-login #mob-primaryCard").prop("readonly",!0),$(".view-mobile-login #proceedMobLoginBtn").css("display","none"),$(".view-mobile-login #proceedMultiAccountMobLoginBtn").css("display","none"),$(".view-mobile-login #corporateVerbiageSection").css("display","none"),$("#mobile-login #login-mob-err").hide(),$("#mobile-login #mobile-login-captcha-section").css("display","none"),$("#mobile-login #mobile-login-select-image-section").css("display","block"),$("#mobile-login #mobileSelectImageId").attr("src",pars_response.userImageDetail.imageName),$("#mobile-login #mobileSelectedImageText").text(pars_response.userImageDetail.passphrase),$("#mobile-login #mobile-pin-section").css("display","block"),$(".view-mobile-login #generate-otp-multi-mobile").css("display","block")):"503"==pars_response.status_code?(refreshCaptcha("/creditcards/app/user/refresh-captcha","mobilelogin"),resetMobileSection(),$("#login-submit-ajaxerror #login-ajaxerror").html(""),$("#login-submit-ajaxerror").css("display","block"),$("#login-submit-ajaxerror #login-ajaxerror").html(pars_response.message.replace(/_/g," ")),$("html, body, #login-submit-ajaxerror").animate({scrollTop:0},"slow")):"512"===pars_response.status_code?(location.href=location.origin+"/creditcards/app/user/login?endSessionMob=true",refreshCaptcha("/creditcards/app/user/refresh-captcha","mobilelogin"),resetMobileSection()):"008"===pars_response.status_code?(refreshCaptcha("/creditcards/app/user/refresh-captcha","mobilelogin"),resetMobileSection(),$("#login-submit-ajaxerror #login-ajaxerror").html(""),$("#login-submit-ajaxerror").css("display","block"),$("#login-submit-ajaxerror #login-ajaxerror").html(pars_response.message.replace(/_/g," ")),$("html, body, #login-submit-ajaxerror").animate({scrollTop:0},"slow")):(refreshCaptcha("/creditcards/app/user/refresh-captcha","mobilelogin"),resetMobileSection(),$("#login-submit-ajaxerror #login-ajaxerror").html(""),$("#login-submit-ajaxerror").css("display","block"),$("#login-submit-ajaxerror #login-ajaxerror").html(pars_response.message.replace(/_/g," ")),$("html, body, #login-submit-ajaxerror").animate({scrollTop:0},"slow"))}},error:function(){$("body").find("div.overlay-loader").remove()}})}function generatedMobOtp(){var primaryCard=$("#mobile-login #mob-primaryCard").val();primaryCard?generatedMultiAccountMobOtp("/creditcards/app/user/mobile-otp-gen-multicard"):generateSingleAccountMobOtp("/creditcards/app/user/proceed-mobile-validate")}function generateSingleAccountMobOtp(otpGenURL){var mobileNumber=$(".view-mobile-login #moblogin").val(),pin=$(".view-mobile-login #pin").val();mobileNumber=mobileNumber.substring(mobileNumber.lastIndexOf("-")+1).trim();var passphrase=$("#passphrase").val();$("#login-submit-error").css("display","none"),$("#login-submit-ajaxerror").css("display","none"),$(".main-wrap.campaign-wrap.no-border.login-page-loggedout").css("display","none"),$("#mob-otp-section #loginMobOtpMsg").css("display","none"),$("#loginMobOtpMsg #otp-gen-msz").html(""),mobPassed=encryptData(mobileNumber),pinPassed=encryptData(pin),$("#mobile-login #pin").blur(),$.ajax({type:"POST",data:JSON.stringify({mobile:mobPassed,cardPin:pinPassed}),url:otpGenURL,contentType:"application/json; charset=utf-8",headers:{passphrase:passphrase},beforeSend:function(){$("body").append(loaderHtml)},complete:function(){$("body").find("div.overlay-loader").remove()},success:function(response){response&&(response=decryptResponse(response,passphrase),response.success===!0?($("#otpMobKey").val(response.otpKey),201===response.errorCode?($("#mobile-login #moblogin").css("pointer-events","none"),$("#mobile-login #pin").css("pointer-events","none"),$("#mobile-login #moblogin").prop("readonly",!0),$("#mobile-login #pin").prop("readonly",!0),$("#mobile-login #pin").addClass("valid"),$("#mobile-login #proceedMobLoginBtn").css("display","none"),$("#mobile-login #proceedMultiAccountMobLoginBtn").css("display","none"),$("#mobile-login #generate-otp-multi-mobile").css("display","none"),$("#mobile-login #mobile-login-select-image-section").css("display","none"),$("#mobile-login #mobileVirtualKeyboardTillGenOTP").css("display","none"),$(".view-mobile-login #corporateVerbiageSection").css("display","none"),$(".view-mobile-login #mob-otp-section").css("display","block"),$("#mobile-login #login-mob-err").hide(),$("#mob-otp-section #loginMobOtpMsg").css("display","block"),$("#mob-otp-section #otp-msz").html(response.message.replace(/_/g," "))):501===response.errorCode&&($("#moblogin").css("pointer-events","none"),$("#pin").css("pointer-events","none"),$("#mobile-login #moblogin").prop("readonly",!0),$("#mobile-login #pin").prop("readonly",!0),$(".view-mobile-login #genOtpBtnPort").css("display","none"),$(".view-mobile-login #corporateVerbiageSection").css("display","none"),$("#mobile-login #login-mob-err").hide(),$("#mob-multi-section").removeClass("hidden-mob-details"))):509===response.errorCode?($("#mobile-login #moblogin").css("pointer-events","none"),$("#mobile-login #pin").css("pointer-events","none"),$("#mobile-login #moblogin").prop("readonly",!0),$("#mobile-login #pin").prop("readonly",!0),$("#mobile-login #pin").addClass("valid"),$("#mobile-login #proceedMobLoginBtn").css("display","none"),$("#mobile-login #proceedMultiAccountMobLoginBtn").css("display","none"),$("#mobile-login #generate-otp-multi-mobile").css("display","none"),$("#mobile-login #mobile-login-select-image-section").css("display","none"),$("#mobile-login #mobileVirtualKeyboardTillGenOTP").css("display","none"),$(".view-mobile-login #corporateVerbiageSection").css("display","none"),$(".view-mobile-login #mob-otp-section").css("display","block"),$("#mobile-login #login-mob-err").hide(),$("#mob-otp-section #loginMobOtpMsg").css("display","block"),$("#mob-otp-section #otp-msz").html(response.message.replace(/_/g," "))):502===response.errorCode?(refreshCaptcha("/creditcards/app/user/refresh-captcha","mobilelogin"),resetMobileSection(),$("#login-submit-ajaxerror #login-ajaxerror").html(""),$("#login-submit-ajaxerror").css("display","block"),$("#login-submit-ajaxerror #login-ajaxerror").html(response.message.replace(/_/g," ")),$("html, body, #login-submit-ajaxerror").animate({scrollTop:0},"slow")):512===response.errorCode?(location.href=location.origin+"/creditcards/app/user/login?endSessionMob=true",refreshCaptcha("/creditcards/app/user/refresh-captcha","mobilelogin"),resetMobileSection()):(refreshCaptcha("/creditcards/app/user/refresh-captcha","mobilelogin"),resetMobileSection(),$("#login-submit-ajaxerror #login-ajaxerror").html(""),$("#login-submit-ajaxerror").css("display","block"),$("#login-submit-ajaxerror #login-ajaxerror").html(response.message.replace(/_/g," ")),$("html, body, #login-submit-ajaxerror").animate({scrollTop:0},"slow")))},error:function(){$("body").find("div.overlay-loader").remove()}})}function generatedMultiAccountMobOtp(otpGenMobURL){var mobileNumber=$(".view-mobile-login #moblogin").val(),pin=$(".view-mobile-login #pin").val();mobileNumber=mobileNumber.substring(mobileNumber.lastIndexOf("-")+1).trim();var primaryCard=$("#mob-primaryCard").val();$("#login-submit-ajaxerror #login-ajaxerror").html(""),$("#login-submit-error").css("display","none"),$("#login-submit-ajaxerror").css("display","none"),$("#login-submit-ajaxerror #login-ajaxerror").html(""),$(".main-wrap.campaign-wrap.no-border.login-page-loggedout").css("display","none"),$("#mob-otp-section #loginMobOtpMsg").css("display","none"),mobPassed=encryptData(mobileNumber),pinPassed=encryptData(pin),cardPassed=encryptData(primaryCard),$("#mob-multi-section #mob-primaryCard").blur();var passphrase=$("#passphrase").val();$.ajax({type:"POST",data:JSON.stringify({mobile:mobPassed,cardLastFourDigits:cardPassed,cardPin:pinPassed}),url:otpGenMobURL,contentType:"application/json; charset=utf-8",headers:{passphrase:passphrase},beforeSend:function(){$("body").append(loaderHtml)},complete:function(){$("body").find("div.overlay-loader").remove()},success:function(response){response&&(response=decryptResponse(response,passphrase),response.success?($("#otpMobKey").val(response.otpKey),$("#mobile-login #moblogin").css("pointer-events","none"),$("#mobile-login #pin").css("pointer-events","none"),$("#mobile-login #moblogin").prop("readonly",!0),$("#mobile-login #pin").prop("readonly",!0),$("#mobile-login #mob-primaryCard").css("pointer-events","none"),$("#mobile-login #mob-primaryCard").prop("readonly",!0),$("#mobile-login #pin").addClass("valid"),$("#mobile-login #mob-primaryCard").addClass("valid"),$(".view-mobile-login #proceedMobLoginBtn").css("display","none"),$("#mobile-login #proceedMultiAccountMobLoginBtn").css("display","none"),$(".view-mobile-login #corporateVerbiageSection").css("display","none"),$("#mobile-login #generate-otp-multi-mobile").css("display","none"),$("#mobile-login #mobile-login-captcha-section").css("display","none"),$("#mobile-login #mobile-login-select-image-section").css("display","none"),$("#mobile-login #mobileVirtualKeyboardTillGenOTP").css("display","none"),$(".view-mobile-login #mob-otp-section").css("display","block"),$("#mobile-login #login-mob-err").hide(),$("#mob-otp-section #loginMobOtpMsg").css("display","block"),$("#mob-otp-section #otp-msz").html(response.message.replace(/_/g," "))):509===response.errorCode?($("#moblogin").css("pointer-events","none"),$("#mobile-login #moblogin").prop("readonly",!0),$("#mobile-login #pin").prop("readonly",!0),$("#mob-multi-section #mob-primaryCard").css("pointer-events","none"),$("#mobile-login #mob-primaryCard").prop("readonly",!0),$("#mobile-login #pin").addClass("valid"),$("#mobile-login #mob-primaryCard").addClass("valid"),$(".view-mobile-login #mob-otp-section").css("display","block"),$(".view-mobile-login #proceedMobLoginBtn").css("display","none"),$("#mobile-login #proceedMultiAccountMobLoginBtn").css("display","none"),$(".view-mobile-login #corporateVerbiageSection").css("display","none"),$("#mobile-login #generate-otp-multi-mobile").css("display","none"),$("#mobile-login #mobile-login-captcha-section").css("display","none"),$("#mobile-login #mobile-login-select-image-section").css("display","none"),$("#mobile-login #mobileVirtualKeyboardTillGenOTP").css("display","none"),$("#generate-otp-multi-mobile").css("display","none"),$("#mobile-login #login-mob-err").hide(),$("#mob-otp-section #loginMobOtpMsg").css("display","block"),$("#mob-otp-section #otp-msz").html(response.message.replace(/_/g," "))):502===response.errorCode?(refreshCaptcha("/creditcards/app/user/refresh-captcha","mobilelogin"),resetMobileSection(),$("#login-submit-ajaxerror #login-ajaxerror").html(""),$("#login-submit-ajaxerror").css("display","block"),$("#login-submit-ajaxerror #login-ajaxerror").html(response.message.replace(/_/g," ")),$("html, body, #login-submit-ajaxerror").animate({scrollTop:0},"slow")):512===response.errorCode?(location.href=location.origin+"/creditcards/app/user/login?endSessionMob=true",refreshCaptcha("/creditcards/app/user/refresh-captcha","mobilelogin"),resetMobileSection()):(resetMobileSection(),refreshCaptcha("/creditcards/app/user/refresh-captcha","mobilelogin"),$("#login-submit-ajaxerror").css("display","block"),$("#login-submit-ajaxerror #login-ajaxerror").html(response.message.replace(/_/g," ")),$("html, body, #login-submit-ajaxerror").animate({scrollTop:0},"slow")))},error:function(){$("body").find("div.overlay-loader").remove()}})}function loginFormMobSubmit(){$("#login-submit-error").css("display","none"),$("#login-submit-ajaxerror").css("display","none"),$(".main-wrap.campaign-wrap.no-border.login-page-loggedout").css("display","none"),sessionStorage.setItem("ifSubmitted","true"),checkLoginType(),$("#moblogin").css("pointer-events","auto"),$("#mob-primaryCard").css("pointer-events","auto");var otpValue=$("#mob-otp-section #otp").val(),pin=$("#mobile-login #pin").val(),primaryCard=($("#passphrase").val(),$("#mob-multi-section #mob-primaryCard").val()),mobile=$("#mobile-login #moblogin").val();otpKey=$("#mobile-login #otpMobKey").val(),mobile=mobile.substring(mobile.lastIndexOf("-")+1).trim(),$("#mob-multi-section").hasClass("hidden-mob-details")?pin&&otpValue&&($("body").append(loaderHtml),otpPassed=encryptData(otpValue),pinPassed=encryptData(pin),mobPassed=encryptData(mobile),otpKeyPassed=encryptData(otpKey),$("#mob-otp-section #otp").val(otpPassed),$("#mobile-login #pin").val(pinPassed),$("#mobile-login #moblogin").val(mobPassed),document.getElementById("login-page").submit(),$("#mob-otp-section #otp").val(otpValue),$("#mobile-login #pin").val(pin),$("#mobile-login #moblogin").val(mobile)):$("#mob-multi-section").hasClass("hidden-mob-details")||primaryCard&&otpValue&&pin&&($("body").append(loaderHtml),cardPassed=encryptData(primaryCard),otpPassed=encryptData(otpValue),pinPassed=encryptData(pin),mobPassed=encryptData(mobile),$("#mob-multi-section #mob-primaryCard").val(cardPassed),$("#mob-otp-section #otp").val(otpPassed),$("#mobile-login #pin").val(pinPassed),$("#mobile-login #moblogin").val(mobPassed),document.getElementById("login-page").submit(),$("#mob-multi-section #mob-primaryCard").val(primaryCard),$("#mob-otp-section #otp").val(otpValue),$("#mobile-login #pin").val(pin),$("#mobile-login #moblogin").val(mobile))}function proceedCardLogin(proceedUseridUrl){$("#login-submit-ajaxerror #login-ajaxerror").html(""),$("#login-submit-error").css("display","none"),$("#login-submit-ajaxerror").css("display","none"),$(".main-wrap.campaign-wrap.no-border.login-page-loggedout").css("display","none"),cardNumber=$("#card-login #card_no").val();var entered_captcha=$("#card-login #card_captcha_input").val();if($("#card-login #user_id").hasClass("invalid")&&null==cardNumber&&""==cardNumber)return $("#card-login #login-card-cross").css("display","block"),void $(".view-card-login #card_no").addClass("invalid");var passphrase=$("#passphrase").val();cardNumberPassed=encryptData(cardNumber),cardCaptchaPassed=null!=entered_captcha&&""!=entered_captcha?encryptData(entered_captcha):null,$.ajax({type:"POST",data:JSON.stringify({cardNumber:cardNumberPassed,captcha:cardCaptchaPassed}),url:proceedUseridUrl,contentType:"application/json; charset=utf-8",headers:{passphrase:passphrase},beforeSend:function(){var loaderHtml='<div class="overlay-loader"></div>';$("body").append(loaderHtml)},complete:function(){$("body").find("div.overlay-loader").remove()},success:function(response){if(response){var pars_response=decryptResponse(response,passphrase);pars_response.success===!0?pars_response.genuineUser===!0&&"200"===pars_response.status_code?($("#card-login #card_no").css("pointer-events","none"),$("#card-login #card_no").prop("readonly",!0),$("#card-login #card-login-captcha-cross").css("display","none"),$("#card-login #card_captcha_code_error").css("display","none"),$("#card-login #card-login-captcha-section").css("display","none"),$(".view-card-login #card-login-proceed-button-section").css("display","none"),$(".view-card-login #loginCardSubmitBtn").css("display","block"),pars_response.imageRegistered===!0?($("#card-login #dummy-card-dob-section").css("display","block"),$("#card-login #card-login-select-image-section").css("display","block"),$("#card-login #cardSelectImageId").attr("src",pars_response.userImageDetail.imageName),$("#card-login #cardSelectedImageText").text(pars_response.userImageDetail.passphrase)):$("#card-login #card-dob-section").css("display","block")):pars_response.genuineUser!==!0&&"200"===pars_response.status_code?($("#card-login #card_no").css("pointer-events","none"),$("#card-login #card_no").prop("readonly",!0),$("#card-login #card-login-captcha-cross").css("display","none"),$("#card-login #card_captcha_code_error").css("display","none"),$("#card-login #card-login-captcha-section").css("display","none"),$(".view-card-login #card-login-proceed-button-section").css("display","none"),$("#card-login #dummy-card-dob-section").css("display","block"),$(".view-card-login #loginCardSubmitBtn").css("display","block"),$("#card-login #card-login-select-image-section").css("display","block"),$("#card-login #cardSelectImageId").attr("src",pars_response.userImageDetail.imageName),$("#card-login #cardSelectedImageText").text(pars_response.userImageDetail.passphrase)):void 0!=pars_response.captchaRequired&&(refreshCaptcha("/creditcards/app/user/refresh-captcha","cardlogin"),$("#cardloginCaptchaFlag").val(pars_response.captchaRequired),$("#card-login #card_captcha_input").val(""),$("#card-login #card_captcha_input").removeClass("valid"),$("#card-login #card-login-captcha-section").css("display","block"),$("#card-login #card-login-captcha-cross").css("display","none"),$("#card-login #card_captcha_code_error").css("display","none"),$("#card-login #card-login-captcha-section").removeClass("captch-error"),$("#card-login #card_no").css("pointer-events","none"),$("#card-login #card_no").prop("readonly",!0),$("#card-login #card-login-proceed-button-section").addClass("add-disable"),$("#card-login #card-login-proceed-button-section .blue-btn").addClass("disable-btn")):"999"===pars_response.status_code?(refreshCaptcha("/creditcards/app/user/refresh-captcha","showCaptchaError"),captchaError("cardlogin"),$("#login-submit-ajaxerror #login-ajaxerror").html(""),$("#login-submit-ajaxerror").css("display","block"),$("#login-submit-ajaxerror #login-ajaxerror").html(pars_response.message.replace(/_/g," ")),$("html, body, #login-submit-ajaxerror").animate({scrollTop:0},"slow")):"512"===pars_response.status_code?(location.href=location.origin+"/creditcards/app/user/login?endSession=true",refreshCaptcha("/creditcards/app/user/refresh-captcha","cardlogin"),resetCardSection()):"008"==pars_response.status_code?($("#card-login #login-card-label").removeClass("active"),$(".view-card-login #card_no").removeClass("valid"),$("#card-login #card_no").val(""),$("#card-login #login-card-captcha-label").removeClass("active"),$(".view-card-login #card_captcha_input").removeClass("valid"),$("#card-login #card_captcha_input").val(""),refreshCaptcha("/creditcards/app/user/refresh-captcha","cardlogin"),$("#login-submit-ajaxerror").css("display","block"),$("#login-submit-ajaxerror #login-ajaxerror").html(pars_response.message.replace(/_/g," ")),$("html, body, #login-submit-ajaxerror").animate({scrollTop:0},"slow")):($("#card-login #login-card-label").removeClass("active"),$(".view-card-login #card_no").removeClass("valid"),$("#card-login #card_no").val(""),$("#card-login #login-card-captcha-label").removeClass("active"),$(".view-card-login #card_captcha_input").removeClass("valid"),$("#card-login #card_captcha_input").val(""),refreshCaptcha("/creditcards/app/user/refresh-captcha","cardlogin"),$("#login-submit-ajaxerror").css("display","block"),$("html, body, #login-submit-ajaxerror").animate({scrollTop:0},"slow"),$("#login-submit-ajaxerror #login-ajaxerror").html(pars_response.message.replace(/_/g," ")))}},error:function(){$("body").find("div.overlay-loader").remove()}})}function genCardOtp(otpGenURL){if($("#login-submit-ajaxerror #login-ajaxerror").html(""),$("#login-submit-error").css("display","none"),$("#login-submit-ajaxerror").css("display","none"),$(".main-wrap.campaign-wrap.no-border.login-page-loggedout").css("display","none"),cardNum=$("#card-login #card_no").val(),cardDob=$("#card-login #card-dob").val(),$("#card-login #card_no").hasClass("invalid")||cardNum.length<17)return $(".view-card-login #card_no").addClass("invalid"),void $("#card-login #login-card-cross").css("display","block");if($("#card-login #card-dob").hasClass("invalid")&&null==cardDob&&""==cardDob)return $(".view-card-login #card-dob").addClass("invalid"),void $("#card-login #login-dob-cross").css("display","block");var passphrase=$("#passphrase").val();if($("#login-submit-error").css("display","none"),$("#login-submit-ajaxerror").css("display","none"),$(".main-wrap.campaign-wrap.no-border.login-page-loggedout").css("display","none"),$("#card-otp-section #loginCardOtpMsg").css("display","none"),cardNumPassed=encryptData(cardNum),passphrase){var salt=CryptoJS.lib.WordArray.random(16),iv=CryptoJS.lib.WordArray.random(16),key=CryptoJS.PBKDF2(passphrase,salt,{keySize:4,iterations:100});encryptedDob=CryptoJS.AES.encrypt(cardDob,key,{iv:iv,mode:CryptoJS.mode.CBC,padding:CryptoJS.pad.Pkcs7}),cardDobPassed=salt+iv+encryptedDob}else cardDobPassed=encryptData(cardDob);$.ajax({type:"POST",data:JSON.stringify({cardNumber:cardNumPassed,dob:cardDobPassed}),url:otpGenURL,contentType:"application/json; charset=utf-8",headers:{passphrase:passphrase},beforeSend:function(){$("body").append(loaderHtml)},complete:function(){$("body").find("div.overlay-loader").remove()},success:function(response){response&&(response.includes("ApiResponse")?response.includes("errorCode=512")&&(location.href=location.origin+"/creditcards/app/user/login?endSession=true",refreshCaptcha("/creditcards/app/user/refresh-captcha","cardlogin"),resetCardSection()):(response=decryptResponse(response,passphrase),response.success===!0?(response.otpKey&&$("#cardOtpKey").val(response.otpKey),201===response.errorCode&&($("#card_no").css("pointer-events","none"),$("#card-login #card_no").prop("readonly",!0),$("#card-login #card-dob").css("pointer-events","none"),$("#card-login #card-dob").prop("readonly",!0),$("#card-login #login-calendar").css("pointer-events","none"),$("#card-login #card-login-select-image-section").css("display","none"),$(".view-card-login #card-otp-section").css("display","block"),$(".view-card-login #loginCardSubmitBtn").css("display","none"),$("#card-login #login-card-err").hide(),$("#card-login #cardVirtualKeyboardTillGenOTP").css("display","none"),$("#card-otp-section #loginCardOtpMsg").css("display","block"),$("#card-otp-section #otp-msz").html(response.message.replace(/_/g," ")))):509===response.errorCode?($("#card_no").css("pointer-events","none"),$("#card-login #card_no").prop("readonly",!0),$("#card-login #card-dob").css("pointer-events","none"),$("#card-login #card-dob").prop("readonly",!0),$("#card-login #login-calendar").css("pointer-events","none"),$("#card-login #card-login-select-image-section").css("display","none"),$(".view-card-login #card-otp-section").css("display","block"),$(".view-card-login #loginCardSubmitBtn").css("display","none"),$("#card-login #login-card-err").hide(),$("#card-login #card-login-select-image-section").css("display","none"),$("#card-login #cardVirtualKeyboardTillGenOTP").css("display","none"),$("#card-otp-section #loginCardOtpMsg").css("display","block"),$("#card-otp-section #otp-msz").html(response.message.replace(/_/g," "))):512===response.errorCode?(location.href=location.origin+"/creditcards/app/user/login?endSession=true",refreshCaptcha("/creditcards/app/user/refresh-captcha","cardlogin"),resetCardSection()):(refreshCaptcha("/creditcards/app/user/refresh-captcha","cardlogin"),resetCardSection(),$("#login-submit-ajaxerror").css("display","block"),$("#login-submit-ajaxerror #login-ajaxerror").html(response.message.replace(/_/g," ")),$("html, body, #login-submit-ajaxerror").animate({scrollTop:0},"slow"))))
},error:function(){$("body").find("div.overlay-loader").remove()}})}function resendOtpForCardLogin(otpGenURL){if(!(resendOTPCount>5)){$("#login-submit-error").css("display","none"),$("#login-submit-ajaxerror").css("display","none"),$(".main-wrap.campaign-wrap.no-border.login-page-loggedout").css("display","none"),cardNumVal=$("#card-login #card_no").val(),cardDob=$("#card-login #card-dob").val(),cardNum=deformatCardNum(cardNumVal);var passphrase=$("#passphrase").val();if(passphrase){var salt=CryptoJS.lib.WordArray.random(16);iv=CryptoJS.lib.WordArray.random(16),key=CryptoJS.PBKDF2(passphrase,salt,{keySize:4,iterations:100}),encryptedCardNum=CryptoJS.AES.encrypt(cardNum,key,{iv:iv,mode:CryptoJS.mode.CBC,padding:CryptoJS.pad.Pkcs7}),cardNumPassed=salt+iv+encryptedCardNum}else var cardNumPassed=cardNum;if(passphrase){var salt=CryptoJS.lib.WordArray.random(16),iv=CryptoJS.lib.WordArray.random(16),key=CryptoJS.PBKDF2(passphrase,salt,{keySize:4,iterations:100});encryptedDob=CryptoJS.AES.encrypt(cardDob,key,{iv:iv,mode:CryptoJS.mode.CBC,padding:CryptoJS.pad.Pkcs7}),cardDobPassed=salt+iv+encryptedDob}else cardDobPassed=encryptData(cardDob);$.ajax({type:"POST",data:JSON.stringify({cardNumber:cardNumPassed,dob:cardDobPassed}),url:otpGenURL,contentType:"application/json; charset=utf-8",headers:{passphrase:passphrase},beforeSend:function(){$("#card-dob, #card-otp").removeClass("invalid"),$("#card-login #login-dob-cross").css("display","none"),$("#card-login #login-card-otp-cross").css("display","none"),pressLoginCard=!1,status_code=!1,$("body").append(loaderHtml)},complete:function(){$("body").find("div.overlay-loader").remove()},success:function(response){response&&(response=decryptResponse(response,passphrase),response.success?($("#card_no").css("pointer-events","none"),$(".view-card-login #card-otp-section").css("display","block"),$(".view-card-login #loginCardSubmitBtn").css("display","none"),$("#card-login #login-card-err").hide(),$("#card-otp-section #loginCardOtpMsg").css("display","block"),$("#card-otp-section #otp-msz").html(response.message.replace(/_/g," ")),resendOTPCount+=1):(512===response.errorCode?(location.href=location.origin+"/creditcards/app/user/login?endSession=true",refreshCaptcha("/creditcards/app/user/refresh-captcha","cardlogin"),resetCardSection()):(507===response.errorCode||1010===response.errorCode)&&($("#card-otp-section .resend-otp-card").css("cursor","not-allowed"),$(".resend-otp-card #login-card-resend-otp").css("pointer-events","none"),$(".resend-otp-card #login-card-resend-otp").css("color","gray"),resendOTPCount+=1),$("html, body, #login-submit-ajaxerror").animate({scrollTop:0},"slow"),$("#login-submit-ajaxerror #login-ajaxerror").html(""),$("#login-submit-ajaxerror").css("display","block"),$("#login-submit-ajaxerror #login-ajaxerror").html(response.message.replace(/_/g," ")),$("#login-card-submit").addClass("add-disable"),$("#login-card-submit .blue-btn").addClass("disable-btn")))},error:function(){$("body").find("div.overlay-loader").remove()}})}}function loginFormCardSubmit(){$("#login-submit-error").css("display","none"),$("#login-submit-ajaxerror").css("display","none"),$(".main-wrap.campaign-wrap.no-border.login-page-loggedout").css("display","none"),sessionStorage.setItem("ifSubmitted","true"),checkLoginType(),$("#card_no").css("pointer-events","auto"),$("#card-dob").css("pointer-events","auto"),pressLoginCard=!0,$("#card-otp-section #card-otp").focusout(),$("#cardNum").prop("readonly",!0),$("#card-dob").prop("readonly",!0);var otpValue=$("#card-otp-section #card-otp").val(),passphrase=$("#passphrase").val(),dob=$("#card-login #card-dob").val(),cardNum=$("#card_no").val();if(cardNumValue=deformatCardNum(cardNum),dob1=dob.slice(0,2),dob2=dob.slice(3,6),dob3=dob.slice(7,11),dobValue=dob1+dob2+dob3,otpValue&&dob&&6==otpValue.length){if($("body").append(loaderHtml),passphrase){var salt=CryptoJS.lib.WordArray.random(16),iv=CryptoJS.lib.WordArray.random(16),key=CryptoJS.PBKDF2(passphrase,salt,{keySize:4,iterations:100});encryptedCard=CryptoJS.AES.encrypt(cardNumValue,key,{iv:iv,mode:CryptoJS.mode.CBC,padding:CryptoJS.pad.Pkcs7}),cardPassed=salt+iv+encryptedCard,encryptedOtp=CryptoJS.AES.encrypt(otpValue,key,{iv:iv,mode:CryptoJS.mode.CBC,padding:CryptoJS.pad.Pkcs7}),otpPassed=salt+iv+encryptedOtp,encryptedDob=CryptoJS.AES.encrypt(dob,key,{iv:iv,mode:CryptoJS.mode.CBC,padding:CryptoJS.pad.Pkcs7}),dobPassed=salt+iv+encryptedDob}$("#card-login #card-otp").val(otpPassed),$("#card-login #card-dob").val(dobPassed),$("#card-login #card_no").val(cardPassed),document.getElementById("login-page").submit(),$("#card-login #card-otp").val(otpValue),$("#card-login #card-dob").val(dob),$("#card-login #card_no").val(cardNum)}}function passwordGen(length){for(var result="",characters="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",charactersLength=characters.length,i=0;length>i;i++){var buf=new Uint8Array(1);result+=characters.charAt(Math.floor(crypto.getRandomValues(buf)*charactersLength))}return result}function checkAndLogin(){$("#login-submit-error").css("display","none"),$("#login-submit-ajaxerror").css("display","none"),$(".main-wrap.campaign-wrap.no-border.login-page-loggedout").css("display","none"),pressLogin=!0,userid=$("#user-login #user_id").val(),gibValue=passwordGen(75),password=$("#user-login #password").val();var otp=$("#user-login #userid-otp").val(),userOtpKey=$("#user-login #userOtpKey").val();if(password||($("#user-login #password").val(gibValue),password=$("#user-login #password").val()),userid||$("#user-login #user_id").addClass("invalid"),otp){checkLoginType(),$("body").append(loaderHtml);var passphrase=$("#passphrase").val();if(passphrase){{var salt=CryptoJS.lib.WordArray.random(16),iv=CryptoJS.lib.WordArray.random(16),key=CryptoJS.PBKDF2(passphrase,salt,{keySize:4,iterations:100});CryptoJS.AES.encrypt(password,key,{iv:iv,mode:CryptoJS.mode.CBC,padding:CryptoJS.pad.Pkcs7})}otpPassed=encryptData(otp),otpKeyPassed=encryptData(userOtpKey)}else var password=password;$("#user-login #userOtpKey").val(otpKeyPassed),$("#user-login #userid-otp").val(otpPassed),$("#user-login #password").val(password),document.getElementById("login-page").submit(),$("#user-login #userid-otp").val(otp)}else $("#user-login #userid-otp").addClass("invalid"),$("#user-login #login-userid-otp-cross").css("display","block")}function dragElement(elmnt){function dragMouseDown(e){e=e||window.event,e.preventDefault(),pos3=e.clientX,pos4=e.clientY,document.onmouseup=closeDragElement,document.onmousemove=elementDrag}function elementDrag(e){e=e||window.event,e.preventDefault(),pos1=pos3-e.clientX,pos2=pos4-e.clientY,pos3=e.clientX,pos4=e.clientY,elmnt.style.top=elmnt.offsetTop-pos2+"px",elmnt.style.left=elmnt.offsetLeft-pos1+"px"}function closeDragElement(){document.onmouseup=null,document.onmousemove=null}var pos1=0,pos2=0,pos3=0,pos4=0;elmnt&&elmnt.id&&(document.getElementById(elmnt.id+"header")?document.getElementById(elmnt.id+"header").onmousedown=dragMouseDown:elmnt.onmousedown=dragMouseDown)}function decryptResponse(encryptedText,passPhrase){var passphrase=passPhrase,salt=CryptoJS.enc.Hex.parse(encryptedText.substr(0,32)),iv=CryptoJS.enc.Hex.parse(encryptedText.substr(32,32)),encrypted=encryptedText.substring(64),key=CryptoJS.PBKDF2(passphrase,salt,{keySize:4,iterations:100}),decrypted=CryptoJS.AES.decrypt(encrypted,key,{iv:iv,padding:CryptoJS.pad.Pkcs7,mode:CryptoJS.mode.CBC});return JSON.parse(decrypted.toString(CryptoJS.enc.Utf8))}function validateImageCheckboxcheckedOrNot(loginType){if("mobilelogin"===loginType){{$("#mobile-login #pin").val()}if($("#mobileSelectImageId").is(":visible")){if(document.getElementById("auth_img_txt_mobile").checked)$("#mobile-login #login-pin-label").addClass("active");else if(!document.getElementById("auth_img_txt_mobile").checked){var cardPin=$("#mobile-login #pin").val();cardPin?$("#mobile-login #login-pin-label").addClass("active"):$("#mobile-login #login-pin-label").removeClass("active"),$("#mobile-login #mobile_pin_error").css("display","block"),$("#mobile-login #login-pin-cross").css("display","none"),$("#mobile-login #pin").addClass("invalid"),$("#mobile-login #pin").css("pointer-events","none"),$("#mobile-login #pin").prop("readonly",!0)}}else $("#mobileSelectImageId").is(":visible")||$(".input-field #login-pin-label").addClass("active")}else if("userlogin"===loginType)if($("#selectImageId").is(":visible")){if(document.getElementById("auth_img_txt_user_id").checked)$(".input-field #login-password-label").addClass("active");else if(!document.getElementById("auth_img_txt_user_id").checked){var password=$("#user-login #password").val();password?$(".input-field #login-password-label").addClass("active"):$(".input-field #login-password-label").removeClass("active"),$("#user-login #userid_password_error").css("display","block"),$("#user-login #password").addClass("invalid"),$("#user-login #password").css("pointer-events","none"),$("#user-login #password").prop("readonly",!0)}}else $("#selectImageId").is(":visible")||$(".input-field #login-password-label").addClass("active");else if("cardlogin"===loginType)if($("#cardSelectImageId").is(":visible"))if(document.getElementById("auth_img_txt_card").checked)$("#card-login #dummy-card-dob-section").css("display","none"),$("#card-login #card-dob-section").css("display","block"),$("#card-login #card_calendar_error").css("display","none"),$("#card-login #dummy-card-dob").removeClass("invalid"),$(".input-field #login-dob-label").addClass("active"),$("#card-login .datepicker input#card-dob").click();else{$("#card-login #dummy-card-dob-section").css("display","block"),$("#card-login #card-dob-section").css("display","none"),$("#card-login #card_calendar_error").css("display","block"),$("#card-login #dummy-card-dob").addClass("invalid"),$(".input-field #login-dob-label").removeClass("active");var DOB=$("#card-login #card-dob").val();DOB?$(".input-field #dummy-login-dob-label").addClass("active"):$(".input-field #dummy-login-dob-label").removeClass("active")}else $("#card-login #dummy-card-dob-section").css("display","none"),$("#card-login #card-dob-section").css("display","block"),$("#card-login #card_calendar_error").css("display","none"),$("#card-login #dummy-card-dob").removeClass("invalid"),$(".input-field #login-dob-label").addClass("active"),$("#card-login .datepicker input#card-dob").click()}function imageCheckBoxClicked(loginType){if("mobilelogin"===loginType&&$("#mobileSelectImageId").is(":visible"))if(document.getElementById("auth_img_txt_mobile").checked){$("#mobile-login #mobile_pin_error").css("display","none"),$("#mobile-login #login-pin-cross").css("display","none"),$("#mobile-login #pin").removeClass("invalid"),$("#mobile-login #pin").css("pointer-events","auto"),$("#mobile-login #pin").prop("readonly",!1);var mobilePin=$("#mobile-login #pin").val();null!=mobilePin&&""!=mobilePin&&" "!=mobilePin?($(".input-field #login-pin-label").addClass("active"),$("#generate-otp-multi-mobile").removeClass("add-disable"),$("#generate-otp-multi-mobile .blue-btn").removeClass("disable-btn")):($("#mobile-login #pin").removeClass("valid"),$(".input-field #login-pin-label").removeClass("active"),$("#generate-otp-multi-mobile").addClass("add-disable"),$("#generate-otp-multi-mobile .blue-btn").addClass("disable-btn"))}else $("#mobile-login #pin").val(""),$(".input-field #login-pin-label").removeClass("active"),$("#mobile-login #mobile_pin_error").css("display","block"),$("#mobile-login #login-pin-cross").css("display","none"),$("#mobile-login #pin").addClass("invalid"),$("#generate-otp-multi-mobile").addClass("add-disable"),$("#generate-otp-multi-mobile .blue-btn").addClass("disable-btn");else if("userlogin"===loginType&&$("#selectImageId").is(":visible"))if(document.getElementById("auth_img_txt_user_id").checked){$("#user-login #userid_password_error").css("display","none"),$("#user-login #password").removeClass("invalid"),$("#user-login #password").css("pointer-events","auto"),$("#user-login #password").prop("readonly",!1);var password=$("#user-login #password").val();null!=password&&""!==password&&" "!=password?($(".input-field #login-password-label").addClass("active"),$("#userid-generate-otp-button-section").removeClass("add-disable"),$("#userid-generate-otp-button-section .blue-btn").removeClass("disable-btn")):($("#user-login #password").removeClass("valid"),$(".input-field #login-password-label").removeClass("active"),$("#userid-generate-otp-button-section").addClass("add-disable"),$("#userid-generate-otp-button-section .blue-btn").addClass("disable-btn"))}else $("#user-login #password").val(""),$(".input-field #login-password-label").removeClass("active"),$("#user-login #userid_password_error").css("display","block"),$("#user-login #password").addClass("invalid"),$("#userid-generate-otp-button-section").addClass("add-disable"),$("#userid-generate-otp-button-section .blue-btn").addClass("disable-btn");else if("cardlogin"===loginType&&$("#cardSelectImageId").is(":visible"))if(document.getElementById("auth_img_txt_card").checked){$("#card-login #card_calendar_error").css("display","none"),$("#card-login #dummy-card-dob").removeClass("invalid"),$("#card-login #dummy-card-dob-section").css("display","none"),$("#card-login #card-dob-section").css("display","block");var dob_filled=$("#card-login #card-dob").val();dob_filled?($(".input-field #login-dob-label").addClass("active"),$("#loginCardSubmitBtn").removeClass("add-disable"),$("#loginCardSubmitBtn .blue-btn").removeClass("disable-btn")):($("#card-login #card-dob").removeClass("valid"),$(".input-field #login-dob-label").removeClass("active"),$("#loginCardSubmitBtn").addClass("add-disable"),$("#loginCardSubmitBtn .blue-btn").addClass("disable-btn"))}else $("#card-login #card-dob").val(""),$("#card-login #dummy-login-dob-label").removeClass("active"),$("#card-login #dummy-card-dob-section").css("display","block"),$("#card-login #card-dob-section").css("display","none"),$("#card-login #card_calendar_error").css("display","block"),$("#card-login #dummy-card-dob").addClass("invalid"),$("#loginCardSubmitBtn").addClass("add-disable"),$("#loginCardSubmitBtn .blue-btn").addClass("disable-btn")}function refreshCaptcha(refreshCaptchaUrl,loginType){$.ajax({type:"GET",url:refreshCaptchaUrl,beforeSend:function(){var loaderHtml='<div class="overlay-loader"></div>';$("body").append(loaderHtml)},complete:function(){$("body").find("div.overlay-loader").remove()},success:function(response){var pars=JSON.parse(response),base64String=pars.Captcha;null!=base64String&&($("#mobile-captcha-show-img, #user-captcha-show-img, #card-captcha-show-img").attr("src","data:image/jpeg;base64,"+base64String),"showCaptchaError"!=loginType&&(removeCaptchaError("mobilelogin"),removeCaptchaError("userlogin"),removeCaptchaError("cardlogin"),$("#mobile-login #mobile_captcha_input, #user-login #captcha_input, #card-login #card_captcha_input").val(""),$("#mobile-login #login-mobile-captcha-label, #user-login #login-user-captcha-label, #card-login #login-card-captcha-label").removeClass("active"),$("#mobile-login #mobile_captcha_input, #user-login #captcha_input, #card-login #card_captcha_input").removeClass("valid"),checkMobileLoginBtn("captcha"),checkUserLoginBtn("captcha"),checkCardLoginBtn("captcha")))},error:function(){$("body").find("div.overlay-loader").remove()}})}function captchaError(loginType){"mobilelogin"==loginType?($("#mobile-login #mobile_captcha_input").val(""),$("#mobile-login #mobile_captcha_input").addClass("invalid"),$(".input-field #login-mobile-captcha-label").removeClass("active"),$("#mobile-login #mobile-login-captcha-cross").css("display","block"),$("#mobile-login #mobile_captcha_code_error").css("display","block"),$("#mobile-login #mobile-login-captcha-section").addClass("captch-error"),$("#proceedMobLoginBtn").addClass("add-disable"),$("#proceedMobLoginBtn .blue-btn").addClass("disable-btn")):"userlogin"==loginType?($("#user-login #captcha_input").val(""),$("#user-login #captcha_input").addClass("invalid"),$(".input-field #login-user-captcha-label").removeClass("active"),$("#user-login #userid-login-captcha-cross").css("display","block"),$("#user-login #userid_captcha_code_error").css("display","block"),$("#user-login #userid-login-captcha-section").addClass("captch-error"),$("#user-login #userid-login-proceed-button-section").addClass("add-disable"),$("#user-login #userid-login-proceed-button-section .blue-btn").addClass("disable-btn")):"cardlogin"==loginType&&($("#card-login #card_captcha_input").val(""),$("#card-login #card_captcha_input").addClass("invalid"),$(".input-field #login-card-captcha-label").removeClass("active"),$("#card-login #card-login-captcha-cross").css("display","block"),$("#card-login #card_captcha_code_error").css("display","block"),$("#card-login #card-login-captcha-section").addClass("captch-error"),$("#card-login #card-login-proceed-button-section").addClass("add-disable"),$("#card-login #card-login-proceed-button-section .blue-btn").addClass("disable-btn"))}function removeCaptchaError(loginType){if("mobilelogin"==loginType){var captcha=$("#mobile-login #mobile_captcha_input").val();$("#mobile-login #mobile-login-captcha-cross").css("display","none"),$("#mobile-login #mobile_captcha_code_error").css("display","none"),$("#mobile-login #mobile_captcha_input").removeClass("invalid"),$("#mobile-login #mobile-login-captcha-section").removeClass("captch-error"),captcha&&($("#proceedMobLoginBtn").removeClass("add-disable"),$("#proceedMobLoginBtn .blue-btn").removeClass("disable-btn"))}else if("userlogin"==loginType){var captcha=$("#user-login #captcha_input").val();$("#user-login #userid-login-captcha-cross").css("display","none"),$("#user-login #userid_captcha_code_error").css("display","none"),$("#user-login #captcha_input").removeClass("invalid"),$("#user-login #userid-login-captcha-section").removeClass("captch-error"),captcha&&($("#userid-login-proceed-button-section").removeClass("add-disable"),$("#userid-login-proceed-button-section .blue-btn").removeClass("disable-btn"))}else if("cardlogin"==loginType){var captcha=$("#card-login #card_captcha_input").val();$("#card-login #card-login-captcha-cross").css("display","none"),$("#card-login #card_captcha_code_error").css("display","none"),$("#card-login #card_captcha_input").removeClass("invalid"),$("#card-login #card-login-captcha-section").removeClass("captch-error"),captcha&&($("#card-login #card-login-proceed-button-section").removeClass("add-disable"),$("#card-login #card-login-proceed-button-section .blue-btn").removeClass("disable-btn"))}}function proceedUseridLogin(proceedUseridUrl){$("#login-submit-ajaxerror #login-ajaxerror").html(""),$("#login-submit-ajaxerror").css("display","none"),$(".main-wrap.campaign-wrap.no-border.login-page-loggedout").css("display","none"),userid=$("#user-login #user_id").val();var entered_captcha=$("#user-login #captcha_input").val();if($("#user-login #user_id").hasClass("invalid")&&null==userid&&""==userid)return void $(".view-user-login #user_id").addClass("invalid");var passphrase=$("#passphrase").val();useridPassed=encryptData(userid),userid_captchaPassed=null!=entered_captcha&&""!=entered_captcha?encryptData(entered_captcha):null,$.ajax({type:"POST",data:JSON.stringify({userId:useridPassed,captcha:userid_captchaPassed}),url:proceedUseridUrl,contentType:"application/json; charset=utf-8",headers:{passphrase:passphrase},beforeSend:function(){var loaderHtml='<div class="overlay-loader"></div>';$("body").append(loaderHtml)},complete:function(){$("body").find("div.overlay-loader").remove()},success:function(response){if(response){var pars_response=decryptResponse(response,passphrase);pars_response.success===!0?pars_response.genuineUser===!0&&"200"===pars_response.status_code?($("#user-login #user_id").css("pointer-events","none"),$("#user-login #user_id").prop("readonly",!0),$("#user-login #userid-login-captcha-cross").css("display","none"),$("#user-login #userid_captcha_code_error").css("display","none"),$("#user-login #userid-login-captcha-section").css("display","none"),$(".view-user-login #userid-login-proceed-button-section").css("display","none"),$("#user-login #userid-login-password-section").css("display","block"),$(".view-user-login #userid-generate-otp-button-section").css("display","block"),pars_response.imageRegistered===!0&&($("#user-login #userid-login-select-image-section").css("display","block"),$("#user-login #selectImageId").attr("src",pars_response.userImageDetail.imageName),$("#user-login #userSelectedImageText").text(pars_response.userImageDetail.passphrase))):pars_response.genuineUser!==!0&&"200"===pars_response.status_code?($("#user-login #user_id").css("pointer-events","none"),$("#user-login #user_id").prop("readonly",!0),$("#user-login #userid-login-captcha-cross").css("display","none"),$("#user-login #userid_captcha_code_error").css("display","none"),$("#user-login #userid-login-captcha-section").css("display","none"),$(".view-user-login #userid-login-proceed-button-section").css("display","none"),$("#user-login #userid-login-select-image-section").css("display","block"),$("#user-login #selectImageId").attr("src",pars_response.userImageDetail.imageName),$("#user-login #userSelectedImageText").text(pars_response.userImageDetail.passphrase),$("#user-login #userid-login-password-section").css("display","block"),$(".view-user-login #userid-generate-otp-button-section").css("display","block")):void 0!=pars_response.captchaRequired&&(refreshCaptcha("/creditcards/app/user/refresh-captcha","userlogin"),$("#userloginCaptchaFlag").val(pars_response.captchaRequired),$("#user-login #captcha_input").val(""),$("#user-login #captcha_input").removeClass("valid"),$("#user-login #userid-login-captcha-section").css("display","block"),$("#user-login #userid-login-captcha-cross").css("display","none"),$("#user-login #userid_captcha_code_error").css("display","none"),$("#user-login #userid-login-captcha-section").removeClass("captch-error"),$("#user-login #user_id").css("pointer-events","none"),$("#user-login #user_id").prop("readonly",!0),$("#userid-login-proceed-button-section").addClass("add-disable"),$("#userid-login-proceed-button-section .blue-btn").addClass("disable-btn")):"999"==pars_response.status_code?(refreshCaptcha("/creditcards/app/user/refresh-captcha","showCaptchaError"),captchaError("userlogin"),$("#login-submit-ajaxerror #login-ajaxerror").html(""),$("#login-submit-ajaxerror").css("display","block"),$("#login-submit-ajaxerror #login-ajaxerror").html(pars_response.message.replace(/_/g," ")),$("html, body, #login-submit-ajaxerror").animate({scrollTop:0},"slow")):"512"==pars_response.status_code?(location.href=location.origin+"/creditcards/app/user/login/error/idleSession",resetUserPassSection()):"008"==pars_response.status_code?(refreshCaptcha("/creditcards/app/user/refresh-captcha","userlogin"),resetUserPassSection(),$("#login-submit-ajaxerror #login-ajaxerror").html(""),$("#login-submit-ajaxerror").css("display","block"),$("#login-submit-ajaxerror #login-ajaxerror").html(pars_response.message.replace(/_/g," ")),$("html, body, #login-submit-ajaxerror").animate({scrollTop:0},"slow")):(refreshCaptcha("/creditcards/app/user/refresh-captcha","userlogin"),void 0!=pars_response.captchaRequired&&$("#userloginCaptchaFlag").val(pars_response.captchaRequired),resetUserPassSection(),$("#login-submit-ajaxerror #login-ajaxerror").html(""),$("#login-submit-ajaxerror").css("display","block"),$("#login-submit-ajaxerror #login-ajaxerror").html(pars_response.message.replace(/_/g," ")),$("html, body, #login-submit-ajaxerror").animate({scrollTop:0},"slow"))}},error:function(){$("body").find("div.overlay-loader").remove()}})}function generateUseridOtp(UserotpGenURL){$("#login-submit-ajaxerror #login-ajaxerror").html(""),$("#login-submit-ajaxerror").css("display","none"),$(".main-wrap.campaign-wrap.no-border.login-page-loggedout").css("display","none");var userName=$("#user-login #user_id").val(),password=$("#user-login #password").val();if($("#user-login #password").hasClass("invalid")&&null==password&&""==password)return void $(".view-user-login #password").addClass("invalid");var passphrase=$("#passphrase").val();userNamePassed=encryptData(userName),passwordPassed=encryptData(password),$("#user-login #encryped_password").val(passwordPassed),$("#user-login #password").val("XXXXXXXXXXXXXXXX"),$.ajax({type:"POST",data:JSON.stringify({userId:userNamePassed,password:passwordPassed}),url:UserotpGenURL,contentType:"application/json; charset=utf-8",headers:{passphrase:passphrase},beforeSend:function(){var loaderHtml='<div class="overlay-loader"></div>';$("body").append(loaderHtml)},complete:function(){$("body").find("div.overlay-loader").remove()},success:function(response){if(response){var pars_response=decryptResponse(response,passphrase);pars_response.success===!0?(pars_response.otpKey&&$("#userOtpKey").val(pars_response.otpKey),("000"===pars_response.status_code||"200"===pars_response.status_code||"005"===pars_response.status_code)&&($("#user-login #user_id").css("pointer-events","none"),$("#user-login #user_id").prop("readonly",!0),$("#user-login #password").css("pointer-events","none"),$("#user-login #password").prop("readonly",!0),$(".input-field #login-password-label").addClass("active"),$("#user-login #userid-login-captcha-section").css("display","none"),$(".view-user-login #userid-login-proceed-button-section").css("display","none"),$("#user-login #UserTillGenOtpVirtualKeybd").css("display","none"),$("#user-login #userid-login-select-image-section").css("display","none"),$(".view-user-login #userid-otp-section").css("display","block"),$(".view-user-login #userid-generate-otp-button-section").css("display","none"),$("#user-login #userid-otp").val(""),$(".input-field #login-userid-otp-label").removeClass("active"),$("#user-login #userid-otp").removeClass("invalid"),$("#user-login #login-userid-otp-cross").css("display","none"),$("#userid-otp-section #loginUserOtpMsg").css("display","block"),$("#userid-otp-section #otp-msz").html(pars_response.message.replace(/_/g," ")))):"509"==pars_response.status_code||"005"==pars_response.status_code?($("#user-login #user_id").css("pointer-events","none"),$("#user-login #user_id").prop("readonly",!0),$("#user-login #password").css("pointer-events","none"),$("#user-login #password").prop("readonly",!0),$(".input-field #login-password-label").addClass("active"),$("#user-login #userid-login-captcha-section").css("display","none"),$(".view-user-login #userid-login-proceed-button-section").css("display","none"),$("#user-login #UserTillGenOtpVirtualKeybd").css("display","none"),$("#user-login #userid-login-select-image-section").css("display","none"),$(".view-user-login #userid-generate-otp-button-section").css("display","none"),$(".view-user-login #userid-otp-section").css("display","block"),$("#user-login #userid-otp").val(""),$(".input-field #login-userid-otp-label").removeClass("active"),$("#user-login #userid-otp").removeClass("invalid"),$("#user-login #login-userid-otp-cross").css("display","none"),$("#userid-otp-section #loginUserOtpMsg").css("display","block"),$("#userid-otp-section #otp-msz").html(pars_response.message.replace(/_/g," "))):"001"===pars_response.status_code?(refreshCaptcha("/creditcards/app/user/refresh-captcha","userlogin"),resetUserPassSection(),$("#login-submit-ajaxerror #login-ajaxerror").html(""),$("#login-submit-ajaxerror").css("display","block"),$("#login-submit-ajaxerror #login-ajaxerror").html(pars_response.message.replace(/_/g," ")),$("html, body, #login-submit-ajaxerror").animate({scrollTop:0},"slow")):"512"===pars_response.status_code?(location.href=location.origin+"/creditcards/app/user/login/error/idleSession",refreshCaptcha("/creditcards/app/user/refresh-captcha","userlogin"),resetUserPassSection()):"008"===pars_response.status_code?(refreshCaptcha("/creditcards/app/user/refresh-captcha","userlogin"),resetUserPassSection(),$("#login-submit-ajaxerror").css("display","block"),$("#login-submit-ajaxerror #login-ajaxerror").html(""),$("#login-submit-ajaxerror #login-ajaxerror").html(pars_response.message.replace(/_/g," ")),$("html, body, #login-submit-ajaxerror").animate({scrollTop:0},"slow")):(refreshCaptcha("/creditcards/app/user/refresh-captcha","userlogin"),resetUserPassSection(),$("#login-submit-ajaxerror").css("display","block"),$("#login-submit-ajaxerror #login-ajaxerror").html(""),$("#login-submit-ajaxerror #login-ajaxerror").html(pars_response.message.replace(/_/g," ")),$("html, body, #login-submit-ajaxerror").animate({scrollTop:0},"slow"))}},error:function(){$("body").find("div.overlay-loader").remove()}})}function resendOtpForUserLogin(UserotpGenURL){if(!(userResendOTPCount>5)){$("#login-submit-error").css("display","none"),$("#login-submit-ajaxerror").css("display","none"),$("#login-submit-ajaxerror #login-ajaxerror").html(""),$(".main-wrap.campaign-wrap.no-border.login-page-loggedout").css("display","none"),userName=$("#user-login #user_id").val(),passwordPassed=$("#user-login #encryped_password").val();var passphrase=$("#passphrase").val();userNamePassed=encryptData(userName),$.ajax({type:"POST",data:JSON.stringify({userId:userNamePassed,password:passwordPassed}),url:UserotpGenURL,contentType:"application/json; charset=utf-8",headers:{passphrase:passphrase},beforeSend:function(){$("#user-login #userid-otp").removeClass("invalid"),$("#user-login #login-userid-otp-cross").css("display","none"),status_code=!1;var loaderHtml='<div class="overlay-loader"></div>';$("body").append(loaderHtml)},complete:function(){$("body").find("div.overlay-loader").remove()},success:function(response){if(response){var pars_response=decryptResponse(response,passphrase);pars_response.success===!0&&"200"===pars_response.status_code?($("#userid-otp-section #loginUserOtpMsg").css("display","block"),$("#userid-otp-section #otp-msz").html(pars_response.message.replace(/_/g," ")),userResendOTPCount+=1):("512"===pars_response.status_code?(location.href=location.origin+"/creditcards/app/user/login/error/idleSession",refreshCaptcha("/creditcards/app/user/refresh-captcha","userlogin"),resetUserPassSection()):("507"===pars_response.status_code||"1010"===pars_response.status_code)&&($("#userid-otp-section .resend-otp-userid").css("cursor","not-allowed"),$(".resend-otp-userid #login-user-resend-otp").css("pointer-events","none"),$(".resend-otp-userid #login-user-resend-otp").css("color","gray"),userResendOTPCount+=1),refreshCaptcha("/creditcards/app/user/refresh-captcha","userlogin"),$("#login-submit-ajaxerror").css("display","block"),$("html, body, #login-submit-ajaxerror").animate({scrollTop:0},"slow"),$("#login-submit-ajaxerror #login-ajaxerror").html(pars_response.message.replace(/_/g," ")),$("#loginUserSubmitBtn").addClass("add-disable"),$("#loginUserSubmitBtn .blue-btn").addClass("disable-btn"))}},error:function(){$("body").find("div.overlay-loader").remove()}})}}function openModalPopup(popupId){$("#"+popupId+".modal-overlay").addClass("open"),$("body").addClass("overlay-opened"),"modal2"==popupId&&($(".msg-txt").css("display","none"),$(".modal-title").css("display","block"),$(".modal-content").find(".three-column").css("display","block"),document.getElementById("feedback-form").reset(),$("#feedback-form").find("label.checked").removeClass("checked"),$("#feedback-form").find(".radio-wrap:first-child").find("label").addClass("checked"),$("#feedback-true").prop("checked",!0),$("label.error").hide(),$(".error").removeClass("error"),$("label.valid").hide(),$(".valid").removeClass("valid"));var pageWidth=document.documentElement.clientWidth,pageHeight=document.documentElement.clientHeight;"number"!=typeof pageWidth&&("CSS1Compat"==document.compatMode?(pageWidth=document.documentElement.clientWidth,pageHeight=document.documentElement.clientHeight):(pageWidth=document.body.clientWidth,pageHeight=document.body.clientHeight));var divobj=$("#"+popupId).find(".modal"),divWidth=divobj.width(),divHeight=divobj.outerHeight(),divTop=divHeight/2;
divobj.css("margin-top","-"+divTop+"px"),$("html.tablet.portrait").length&&divobj.css("margin-left",(divWidth+180)/-2)}function closeModalPopup(currentPopup){$(currentPopup).parents(".modal-overlay").removeClass("open"),$("body").removeClass("overlay-opened"),$(".tab-popup").exists()&&$(".single-item").unslick({arrows:!1})}function openTab(evt,tabName){var i,tabcontent,tablinks;for(tabcontent=document.getElementsByClassName("tabcontent"),i=0;i<tabcontent.length;i++)tabcontent[i].style.display="none";for(tablinks=document.getElementsByClassName("tablinks"),i=0;i<tablinks.length;i++)tablinks[i].className=tablinks[i].className.replace(" active","");document.getElementById(tabName).style.display="block",evt.currentTarget.className+=" active"}function firstStepNextBtn(){$("html, body").animate({scrollTop:0}),$("#first-time-img-auth-selection-block").css("display","none"),$("#second-time-img-auth-selection-block").css("display","block"),$("#main-wrapper-img-select-block .first-step-block").addClass("filled"),$("#main-wrapper-img-select-block .second-step-block").addClass("active");var selectedImgName=$('input[name="imgName"]:checked'),selectedImgId=$('input[name="imgName"]:checked').attr("id");if(selectedImgName&&selectedImgId){var selectedRadioButtonIndex=selectedImgId,index=selectedRadioButtonIndex.split("_")[1],selectedImgSrc=$("#imgAuthimageId_"+index).attr("src");$("#secondStepStoredImg").attr("src",selectedImgSrc);var encryptSelectedImgId=encryptImageIDorText(index);$("#selectedImageId").val(encryptSelectedImgId)}}function secondStepNextBtn(){$("html, body").animate({scrollTop:0}),$("#first-time-img-auth-selection-block").css("display","none"),$("#second-time-img-auth-selection-block").css("display","none"),$("#thrid-time-img-auth-selection-block").css("display","block"),$("#main-wrapper-img-select-block .first-step-block").addClass("filled"),$("#main-wrapper-img-select-block .second-step-block").addClass("filled"),$("#main-wrapper-img-select-block .third-step-block").addClass("active");var userImageText=$("#userImageText").val(),secondSelectedImgSrc=$("#secondStepStoredImg").attr("src");if(userImageText||secondSelectedImgSrc){$("#thirdSectionSelectedText").text(userImageText);var encryptImageText=encryptImageIDorText(userImageText);$("#selectedImageTextEntered").val(encryptImageText),$("#thirdSectionSelectedImg").attr("src",secondSelectedImgSrc)}}function secondStepBackBtn(){$("html, body").animate({scrollTop:0}),$("#first-time-img-auth-selection-block").css("display","block"),$("#second-time-img-auth-selection-block").css("display","none"),$("#main-wrapper-img-select-block .first-step-block").removeClass("filled"),$("#main-wrapper-img-select-block .second-step-block").removeClass("active"),$("#secondStepStoredImg").attr("src",""),$("#thirdSectionSelectedImg").attr("src",""),$("#selectedImageId").val(""),$("#userImageText").val(""),$("#userImageText").attr("placeholder",""),$("#userImageText").attr("placeholder","Enter text hereâ€¦"),$("#proceed_second_step").addClass("gray-btn"),$("#proceed_second_step").css("pointer-events","none")}function thirdStepBackBtn(){$("html, body").animate({scrollTop:0});var textEntered=$("#userImageText").val();$("#first-time-img-auth-selection-block").css("display","none"),$("#second-time-img-auth-selection-block").css("display","block"),$("#thrid-time-img-auth-selection-block").css("display","none"),$("#main-wrapper-img-select-block .first-step-block").addClass("filled"),$("#main-wrapper-img-select-block .second-step-block").removeClass("filled"),$("#main-wrapper-img-select-block .second-step-block").addClass("active"),$("#main-wrapper-img-select-block .third-step-block").removeClass("active"),textEntered?($("#proceed_second_step").removeClass("gray-btn"),$("#proceed_second_step").css("pointer-events","auto")):($("#proceed_second_step").addClass("gray-btn"),$("#proceed_second_step").css("pointer-events","none"))}function checkTryAgainBtn(){var retryAttemptCount=$("#retryAttemptCount").val();if(retryAttemptCount&&retryAttemptCount>=3)$("#checkTryAgainBtnId").addClass("gray-btn"),$("#checkTryAgainBtnId").css("pointer-events","none"),$("#tryAgainWarning").css("display","block");else{$("#tryAgainWarning").css("display","none");var AuthImageSelectionRetryForm=$("#AuthImageSelectionRetryForm");AuthImageSelectionRetryForm.attr("action","/creditcards/app/user/display-image-catalog"),AuthImageSelectionRetryForm.submit()}}function encryptImageIDorText(data){var passphrase=$("#passphrase").val();if(passphrase){var salt=CryptoJS.lib.WordArray.random(16);iv=CryptoJS.lib.WordArray.random(16),key=CryptoJS.PBKDF2(passphrase,salt,{keySize:4,iterations:100}),encryptedData=CryptoJS.AES.encrypt(data,key,{iv:iv,mode:CryptoJS.mode.CBC,padding:CryptoJS.pad.Pkcs7}),dataPassed=salt+iv+encryptedData}else var dataPassed=data;return dataPassed}$(function(){function beforeSubmitHandler(form){var status,laterText,xml,postData;sbi.config.isClickOnSFL===!0||"true"==sbi.config.isClickOnSFL?(sbi.config.isClickOnSFL=!1,postData=$("#e-apply-form").serializeArray(),$.ajax({type:"POST",data:postData,url:ajax_url,beforeSend:function(){var loaderHtml='<div class="overlay-loader"></div>';$("body").append(loaderHtml)},complete:function(){$("body").find("div.overlay-loader").remove(),$("body").scrollTop(0)},success:function(data){"string"==typeof data?(xml=new ActiveXObject("Microsoft.XMLDOM"),xml.async=!1,xml.loadXML(data)):xml=data,status=$(xml).find("status").text().toLowerCase(),"confirm"==status?(laterText=$(xml).find("statusDescription").text(),$("#modal3").find(".modal-title").text(laterText),openModalPopup("modal3")):"success"==status&&($("div.response").removeClass("hide"),$("div.response").find("p").text(laterText))},error:function(){$("div.response").find("p").text("Due to some problem your data not saved"),$("div.response").removeClass("hide"),"901"==xhr.status&&(window.location.href="/creditcards/app/user/login/error/invalidSession")}})):$(form).find(".form-step2").hasClass("hide")&&$(form).find(".form-step3").hasClass("hide")?($("body").scrollTop(0),$(form).find(".form-step2, .form-step1,.card-exist").toggleClass("hide")):($(this).find("input.submit-input").attr("disabled","disabled"),form.submit())}$.validator.addMethod("noSpecialChar",function(value){return!/[^a-z A-Z 0-9]/.test(value)}),$.validator.addMethod("panNum",function(value){return/^([a-z A-Z]){5}([0-9]){4}([a-z A-Z]){1}?$/.test(value)}),$.validator.addMethod("integer",function(value){return/^-?\d+$/.test(value)}),$.validator.addMethod("emailFormat",function(value){return/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\_`{\|}]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\_`{\|}]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]{2,}|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/i.test(value)},""),$.validator.addMethod("emailFormatAddon",function(value){return""==value?!0:/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\_`{\|}]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\_\/*`{\|}]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]{2,}|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/i.test(value)}),$.validator.addMethod("alphaNumeric",function(value){return/^\w+$/i.test(value)}),$.validator.addMethod("noSpecialCharWithSpace",function(value){return/^[A-Za-z0-9 ]+$/.test(value)}),$.validator.addMethod("startWith4or5",function(value){return 4==value[0]||5==value[0]?!0:!1}),$.validator.addMethod("addonnameval",function(nameaddon){var nameaddon=$("#name").val();if(nameaddon.match(/\s/g)){var n=nameaddon.indexOf(" ");if(nameaddon1=nameaddon.substr(0,n),nameaddon2=nameaddon.substr(n+1,nameaddon.length),n>10)return alert("First name must not be more than 10 characters"),!1;if(nameaddon2.length>16)return alert("Last name must not be more than 16 characters"),!1}else if(!nameaddon.match(/\s/g)&&nameaddon.length>10)return alert("Name must not be more than 10 characters"),!1;return!0}),globalErrorObj="en"==lang?sbi.config.en.errorMsgs:sbi.config.hi.errorMsgs,$("#e-apply-form").validate({onkeyup:!1,focusInvalid:!0,rules:{firstName:{required:!0,noSpecialChar:!0},lastName:{required:!0,noSpecialChar:!0},dob:"required",city:"required",resCity:"required",income:"required",email:{required:!0,emailFormat:!0},annualIncome:{required:!0,integer:!0,maxlength:15},panCard:{required:!0,panNum:!0},phone:{required:!0,integer:!0,maxlength:10,minlength:10},step3phone:{required:!0,integer:!0,maxlength:10,minlength:10},agree:"required",gender:"required",address:{required:!0,maxlength:250},pinCode:{required:!0},companyName:{required:!0,noSpecialCharWithSpace:!0},natureOfCompany:{required:!0},years:{required:!0,integer:!0,maxlength:2},designation:{required:!0,alphaNumeric:!0,noSpecialCharWithSpace:!0},officeCity:"required",officeAddress:{required:!0,maxlength:200},officePinCode:"required",mailingAddress:"required",landlineLoc:"required",stdCode:"required",landlinePhone:{required:!0,integer:!0,maxlength:11},agreeCondition1:"required",agreeCondition2:"required",agreeCondition4:"required",smsCode:{required:!0},"alternate-num":{required:!0,startWith4or5:!0,minlength:16}},groups:{fullName:"firstName lastName",landlineNum:"landlineLoc stdCode landlinePhone",cardNumber:"card-number-1 card-number-2 card-number-3 card-number-4"},messages:globalErrorObj,errorPlacement:function($error,$element){var elementName=$element.attr("name"),lastInGroup=$.map(this.groups,function(fields){var fieldsArr;return fields.indexOf(elementName)>=0?(fieldsArr=fields.split(" "),fieldsArr[fieldsArr.length-1]):null})[0];$error.insertAfter(lastInGroup?$("input[name='"+lastInGroup+"']"):$element)},success:function(){validClass="valid"},highlight:function(element,errorClass,validClass){$(element).addClass(errorClass).removeClass(validClass)},unhighlight:function(element,errorClass,validClass){$(element).removeClass(errorClass).addClass(validClass),$(element).next("label").addClass(validClass)},submitHandler:function(form){beforeSubmitHandler(form)}}),$("#register-form").validate({onkeyup:!1,rules:{firstName:{required:!0,noSpecialChar:!0},lastName:{required:!0,noSpecialChar:!0},dob:"required",city:"required",resCity:"required",income:"required",email:{required:!0,emailFormat:!0},annualIncome:{required:!0,integer:!0,maxlength:15},panCard:{required:!0,panNum:!0},phone:{required:!0,integer:!0,maxlength:10},agree:"required",gender:"required",address:{required:!0,alphaNumeric:!0,maxlength:250},pinCode:{required:!0},companyName:{required:!0,noSpecialCharWithSpace:!0},natureOfCompany:{required:!0},years:{required:!0,integer:!0,maxlength:2},designation:{required:!0,alphaNumeric:!0,noSpecialCharWithSpace:!0},officeCity:"required",officeAddress:{required:!0,alphaNumeric:!0,maxlength:200},officePinCode:"required",mailingAddress:"required",landlineLoc:"required",stdCode:"required",landlinePhone:{required:!0,integer:!0,maxlength:11},agreeCondition1:"required",agreeCondition2:"required",smsCode:{required:!0,alphaNumeric:!0,noSpecialChar:!0,maxlength:6}},groups:{fullName:"firstName lastName",landlineNum:"landlineLoc stdCode landlinePhone",cardNumber:"card-number-1 card-number-2 card-number-3 card-number-4"},messages:globalErrorObj,errorPlacement:function($error,$element){var elementName=$element.attr("name"),lastInGroup=$.map(this.groups,function(fields){var fieldsArr;return fields.indexOf(elementName)>=0?(fieldsArr=fields.split(" "),fieldsArr[fieldsArr.length-1]):null})[0];$error.insertAfter(lastInGroup?$("input[name='"+lastInGroup+"']"):$element)},success:function(){validClass="valid"},highlight:function(element,errorClass,validClass){$(element).addClass(errorClass).removeClass(validClass)},unhighlight:function(element,errorClass,validClass){$(element).removeClass(errorClass).addClass(validClass),$(element).next("label").addClass(validClass)},submitHandler:function(form){form.submit()}}),$("#register-form .card-number").each(function(){$(this).rules("add",{required:!0,number:!0,minlength:4,messages:{required:"",number:"",minlength:""}})}),$("#register-form .card-number").keyup(function(){4==$(this).val().length&&$(this).next().focus()}),$(".noSpecial-noInteger").keydown(function(e){if(e.ctrlKey||e.altKey)e.preventDefault();else{var key=e.keyCode?e.keyCode:e.which;8==key||9==key||32==key||46==key||key>=35&&40>=key||key>=65&&90>=key||e.preventDefault()}}),$(".noSpecial-noInteger-Addon-KYC").keydown(function(e){if(e.ctrlKey||e.altKey)e.preventDefault();else{var key=e.keyCode?e.keyCode:e.which;(key>=33&&64>=key||key>=186&&222>=key||key>=96&&111>=key)&&e.preventDefault()}}),$(".noSpecial-noCharacter").keydown(function(e){if(e.ctrlKey||e.altKey)e.preventDefault();else{var key=e.keyCode?e.keyCode:e.which;if(!(8==key||9==key||46==key||key>=35&&40>=key||key>=48&&57>=key||key>=96&&105>=key))return!1}}),$(".noSpace").keydown(function(event){var keycode=event.keyCode?event.keyCode:event.which;return 32==keycode?!1:!0})});try{$.extend($.validator.messages,{required:"",number:"",digits:"",equalTo:"",accept:"",maxlength:$.validator.format(""),minlength:$.validator.format(""),rangelength:$.validator.format(""),range:$.validator.format(""),max:$.validator.format(""),min:$.validator.format("")})}catch(e){console.log(e)}$(".spend-analyser input#fromDate, .spend-analyser input#toDate, .my-account input#fromDate, .my-account input#toDate, .my-account input#fromDate-next, .my-account input#toDate-next, .my-account input#fromDateAdv, .my-account input#toDateAdv").datepicker({dateFormat:"dd-M-yy",changeMonth:!0,changeYear:!0,minDate:"-2Y",maxDate:"0"}).click(function(){$(this).blur().focus()}),$(function(){function submitActiveForm(onSuccess,activeForm,additionalData,overlayTarget){activeForm=activeForm||$(".tab-panel-outer .active form");var formData=$(activeForm).serializeArray();additionalData&&$.isArray(additionalData)&&$.merge(formData,additionalData),makeAjaxWithLoader({url:$(activeForm).attr("action"),type:"post",data:formData,overlayTarget:overlayTarget,success:onSuccess})}function dataEncryptionAES(data,passphrase){var passphrase=void 0==passphrase||null==passphrase||""==passphrase?"BAgtAGHLCb":passphrase;if(passphrase)var salt=CryptoJS.lib.WordArray.random(16),iv=CryptoJS.lib.WordArray.random(16),key=CryptoJS.PBKDF2(passphrase,salt,{keySize:4,iterations:100}),encryptedData=CryptoJS.AES.encrypt(data,key,{iv:iv,mode:CryptoJS.mode.CBC,padding:CryptoJS.pad.Pkcs7}),dataPassed=salt+iv+encryptedData;else dataPassed=data;return dataPassed}function dataEncryptionAES(data,passphrase){console.log("Validation --> dataEncryptionAES -> Start -->");var passphrase=void 0==passphrase||null==passphrase||""==passphrase?"BAgtAGHLCb":passphrase;if(passphrase)var salt=CryptoJS.lib.WordArray.random(16),iv=CryptoJS.lib.WordArray.random(16),key=CryptoJS.PBKDF2(passphrase,salt,{keySize:4,iterations:100}),encryptedData=CryptoJS.AES.encrypt(data,key,{iv:iv,mode:CryptoJS.mode.CBC,padding:CryptoJS.pad.Pkcs7}),dataPassed=salt+iv+encryptedData;else dataPassed=data;return console.log("Validation --> dataEncryptionAES -> End -->"),dataPassed}function dataDecryptionAES(encryptedText,passphrase){console.log("Validation --> dataDecryptionAES -> Start -->");var passphrase=void 0==passphrase||null==passphrase||""==passphrase?"BAgtAGHLCb":passphrase,salt1=CryptoJS.enc.Hex.parse(encryptedText.substr(0,32)),iv1=CryptoJS.enc.Hex.parse(encryptedText.substr(32,32)),encrypted1=encryptedText.substring(64),key1=CryptoJS.PBKDF2(passphrase,salt1,{keySize:4,iterations:100}),decrypted=CryptoJS.AES.decrypt(encrypted1,key1,{iv:iv1,padding:CryptoJS.pad.Pkcs7,mode:CryptoJS.mode.CBC}),decryptedDataPassed=decrypted.toString(CryptoJS.enc.Utf8);return console.log("Validation --> dataDecryptionAES -> End -->"),decryptedDataPassed}validateContactForm(),$("#search-txn-form1").validate({onkeyup:!1,rules:{},messages:{},submitHandler:function(form){submitActiveForm(function(data){$("#txn-display").html(data),$("#totalcountFinal").val()>$("#filtercountFinal").val()?$("#loadMoreTxnhistLinkId").removeClass("hide"):$("#loadMoreTxnhistLinkId").addClass("hide")},form,null,$("#temp-overlay-wrapper").length?$("#temp-overlay-wrapper"):$("#txn-display").wrap('<div id="temp-overlay-wrapper"></div>').parent())}}),$("#search-txn-showAll").validate({onkeyup:!1,rules:{},messages:{},submitHandler:function(form){submitActiveForm(function(data){$("#txn-display").html(data),$("#totalcountFinal").val()>$("#filtercountFinal").val()?$("#loadMoreTxnhistLinkId").removeClass("hide"):$("#loadMoreTxnhistLinkId").addClass("hide")},form,null,$("#temp-overlay-wrapper").length?$("#temp-overlay-wrapper"):$("#txn-display").wrap('<div id="temp-overlay-wrapper"></div>').parent())}}),$("#search-txn-form2").validate({onkeyup:function(element){$(element).valid()},rules:{fromAmount:{lessThan:"#toAmount"},toAmount:{greaterThan:"#fromAmount"},transactionDescription:"alphaNumericWithSeperatorsfortransactionhistory"},messages:{fromAmount:" ",toAmount:" ",transactionDescription:" "},success:function(){validClass="valid"},highlight:function(element,errorClass,validClass){$(element).addClass(errorClass).removeClass(validClass)},unhighlight:function(element,errorClass,validClass){"transactionDescription"==$(element).attr("id")&&0===$(element).val().length||"fromAmount"==$(element).attr("id")&&0===$(element).val().length||"toAmount"==$(element).attr("id")&&0===$(element).val().length?($(element).next("label").remove(),$(element).removeClass("error")):($(element).removeClass(errorClass).addClass(validClass),$(element).next("label").addClass(validClass))},submitHandler:function(form){submitActiveForm(function(data){$("#txn-display").html(data),$("#totalcountFinal").val()>$("#filtercountFinal").val()?$("#loadMoreTxnhistLinkId").removeClass("hide"):$("#loadMoreTxnhistLinkId").addClass("hide")},form)}}),$(".my-account").delegate("#load-more","click",function(e){e.stopPropagation(),e.preventDefault();var value=$(this).attr("data-value")||10;submitActiveForm(function(data){$("#txn-display").html(data)},null,[{name:"loadMore",value:value}])}),$("#search-payment-form1").validate({onkeyup:!1,rules:{},messages:{},submitHandler:function(form){submitActiveForm(function(data){$("#display-payment-history").html(data),$("#totalcountFinal").val()>$("#filtercountFinal").val()?$("#loadMorePayTxnLinkId").removeClass("hide"):$("#loadMorePayTxnLinkId").addClass("hide");var error=$("#paymentCount").val(),count=$("#totalcountFinal").val(),rightLinkHref=$("#right-link-href-gen").attr("data-path"),viewDemoHref=$("#view-demos-href-gen").attr("data-path");(""!==error&&0===count||""!==error)&&($("header.payment-history-page a.view-demos").removeClass("download-lnk").addClass("download-lnk-disabled"),$("header.payment-history-page a.view-demos span.icon").removeClass("download-lnk").addClass("download-lnk-disabled"),$("header.payment-history-page a.right-link").removeClass("print-lnk").addClass("print-lnk-disabled"),$("header.payment-history-page a.right-link span.icon").removeClass("print-lnk").addClass("print-lnk-disabled"),$("header.payment-history-page a.right-link").removeClass("printviewlink"),$("header.payment-history-page a.right-link").removeAttr("data-href"),$("header.payment-history-page a.view-demos").removeAttr("target"),$("header.payment-history-page a.view-demos").attr("href","javascript:void(0);"),$("header.payment-history-page a.right-link").attr("href","javascript:void(0);"),$("div.error-wrap h5").length>0?$("div.error-wrap h5").html(error):($errorBlock=$('<div class="error-wrap"><h5 class="top-error">'+error+".</h5></div>"),$wrapper=$(".my-account .sub-section-header"),$wrapper.after($errorBlock))),""===error&&($("header.payment-history-page a.view-demos").removeClass("download-lnk-disabled").addClass("download-lnk"),$("header.payment-history-page a.view-demos span.icon").removeClass("download-lnk-disabled").addClass("download-lnk"),$("header.payment-history-page a.right-link").removeClass("print-lnk-disabled").addClass("print-lnk"),$("header.payment-history-page a.right-link span.icon").removeClass("print-lnk-disabled").addClass("print-lnk"),$("header.payment-history-page a.right-link").addClass("printviewlink"),$("header.payment-history-page a.view-demos").attr("target","_blank"),$("header.payment-history-page a.right-link").attr("data-href",rightLinkHref),$("header.payment-history-page a.right-link").attr("href",rightLinkHref),$("header.payment-history-page a.view-demos").attr("url-href",viewDemoHref),$("header.payment-history-page a.view-demos").attr("href",viewDemoHref),$(".transactions-history div.error-wrap").remove())},form,null,$("#temp-overlay-wrapper").length?$("#temp-overlay-wrapper"):$("#display-payment-history").wrap('<div id="temp-overlay-wrapper"></div>').parent())}}),$("#search-payment-form2").validate({onkeyup:!1,rules:{txIdChequeNo:"alphaNumericWithSeperatorsforpaymenthistory"},messages:{txIdChequeNo:" "},success:function(){validClass="valid"},highlight:function(element,errorClass,validClass){$(element).addClass(errorClass).removeClass(validClass)},unhighlight:function(element,errorClass,validClass){$(element).removeClass(errorClass).addClass(validClass),$(element).next("label").addClass(validClass)},submitHandler:function(form){submitActiveForm(function(data){$("#display-payment-history").html(data),$("#totalcountFinal").val()>$("#filtercountFinal").val()?$("#loadMorePayTxnLinkId").removeClass("hide"):$("#loadMorePayTxnLinkId").addClass("hide"),rightLinkHref=$("#right-link-href-gen").attr("data-path"),viewDemoHref=$("#view-demos-href-gen").attr("data-path");var error=$("#paymentCount").val(),count=$("#totalcountFinal").val();try{""!==error&&0===count&&($("header.payment-history-page a.view-demos").removeClass("download-lnk").addClass("download-lnk-disabled"),$("header.payment-history-page a.view-demos span.icon").removeClass("download-lnk").addClass("download-lnk-disabled"),$("header.payment-history-page a.right-link").removeClass("print-lnk").addClass("print-lnk-disabled"),$("header.payment-history-page a.right-link span.icon").removeClass("print-lnk").addClass("print-lnk-disabled"),$("header.payment-history-page a.right-link").removeClass("printviewlink"),$("header.payment-history-page a.right-link").removeAttr("data-href"),$("header.payment-history-page a.view-demos").removeAttr("target"),$("header.payment-history-page a.view-demos").attr("href","javascript:void(0)"),$("header.payment-history-page a.right-link").attr("href","javascript:void(0)"),$("div.error-wrap h5").length>0?$("div.error-wrap h5").html(error):($errorBlock=$('<div class="error-wrap"><h5 class="top-error">'+error+".</h5></div>"),$wrapper=$(".my-account .sub-section-header"),$wrapper.after($errorBlock))),""===error&&($("header.payment-history-page a.view-demos").removeClass("download-lnk-disabled").addClass("download-lnk"),$("header.payment-history-page a.view-demos span.icon").removeClass("download-lnk-disabled").addClass("download-lnk"),$("header.payment-history-page a.right-link").removeClass("print-lnk-disabled").addClass("print-lnk"),$("header.payment-history-page a.right-link span.icon").removeClass("print-lnk-disabled").addClass("print-lnk"),$("header.payment-history-page a.right-link").addClass("printviewlink"),$("header.payment-history-page a.view-demos").attr("target","_blank"),$("header.payment-history-page a.right-link").attr("data-href",rightLinkHref),$("header.payment-history-page a.right-link").attr("href",rightLinkHref),$("header.payment-history-page a.view-demos").attr("url-href",viewDemoHref),$("header.payment-history-page a.view-demos").attr("href",viewDemoHref),$(".transactions-history div.error-wrap").remove())}catch(e){}},form)}}),$("#search-payment-display-form").validate({onkeyup:!1,rules:{},messages:{},submitHandler:function(form){submitActiveForm(function(data){$("#display-payment-history").html(data),$("#totalcountFinal").val()>$("#filtercountFinal").val()?$("#loadMorePayTxnLinkId").removeClass("hide"):$("#loadMorePayTxnLinkId").addClass("hide");var rightLinkHref=$("#right-link-href-gen").attr("data-path"),viewDemoHref=$("#view-demos-href-gen").attr("data-path");$("header.payment-history-page a.view-demos").removeClass("download-lnk-disabled").addClass("download-lnk"),$("header.payment-history-page a.view-demos span.icon").removeClass("download-lnk-disabled").addClass("download-lnk"),$("header.payment-history-page a.right-link").removeClass("print-lnk-disabled").addClass("print-lnk"),$("header.payment-history-page a.right-link span.icon").removeClass("print-lnk-disabled").addClass("print-lnk"),$("header.payment-history-page a.right-link").addClass("printviewlink"),$("header.payment-history-page a.view-demos").attr("target","_blank"),$("header.payment-history-page a.right-link").attr("data-href",rightLinkHref),$("header.payment-history-page a.right-link").attr("href",rightLinkHref),$("header.payment-history-page a.view-demos").attr("url-href",viewDemoHref),$("header.payment-history-page a.view-demos").attr("href",viewDemoHref)},form,null,$("#temp-overlay-wrapper").length?$("#temp-overlay-wrapper"):$("#display-payment-history").wrap('<div id="temp-overlay-wrapper"></div>').parent())}}),$("#password-update-form").validate({onkeyup:!1,rules:{newPassword:{required:!0,strongPassword:!0,minlength:12},confirmPassword:{required:!0,strongPassword:!0,equalTo:"#password"}},messages:{newPassword:{required:" ",strongPassword:" ",minlength:" "},confirmPassword:{required:" ",strongPassword:" ",equalTo:" "}},errorPlacement:function($error,$element){$error.insertAfter($element)},success:function(){validClass="valid"},highlight:function(element,errorClass,validClass){console.log("validation highlight"),$(element).addClass(errorClass).removeClass(validClass)},unhighlight:function(element,errorClass,validClass){console.log("validation unhighlight"),$(element).removeClass(errorClass).addClass(validClass),$(element).next("label").addClass(validClass)},submitHandler:function(){makeAjaxWithLoader({url:$("#password-update-form").attr("action"),type:"post",data:$("#password-update-form").serialize(),success:function(data){var responseData=$.parseJSON(data);if(responseData.success){var dataRedirectTo=$("#password-update-form").attr("data-redirectto");$("#change-pass-popup").find(".close-button").attr("data-location",dataRedirectTo),$("#change-pass-popup").find(".modal-title").text(responseData.message),openModalPopup("change-pass-popup")}else if($("input#currentPassword").addClass("error"),responseData.locked){var dataRedirectTo=$("#password-update-form").attr("data-redirectto");window.location.href=dataRedirectTo}else $("#password-error").text(responseData.message)}})}}),$("#manage-pin-form").validate({onkeyup:!1,rules:{otp:{required:!0,minlength:6},atmPin:{required:!0,minlength:4},confirmPin:{required:!0,equalTo:"#atmPin"}},messages:{otp:{required:" ",minlength:" "},atmPin:{required:" ",minlength:" "},confirmPin:{required:" ",equalTo:" "}},errorPlacement:function($error,$element){$error.insertAfter($element)},success:function(){validClass="valid"},highlight:function(element,errorClass,validClass){$(element).addClass(errorClass).removeClass(validClass)},unhighlight:function(element,errorClass,validClass){$(element).removeClass(errorClass).addClass(validClass),$(element).next("label").addClass(validClass)},submitHandler:function(){makeAjaxWithLoader({url:"update-pin",type:"post",data:$("#manage-pin-form").serialize(),success:function(data){var response=$.parseJSON(data),jsonResponse=response.otpResponse;$("div.error-wrap h5").length>0?$("div.error-wrap h5").html(jsonResponse.message):($errorBlock=$('<div class="error-wrap"><h5 class="top-error">'+jsonResponse.message+".</h5></div>"),$wrapper=$(".my-account.card-statment"),$wrapper.after($errorBlock),$("#buttonc2s").show()),jsonResponse.success===!0&&jsonResponse.invalidAttemptsOver===!1?$("#manage-pin-form").addClass("hide"):jsonResponse.success===!1&&jsonResponse.invalidAttemptsOver===!0?($("#manage-pin-form").trigger("reset"),$("#manage-pin-form label.error, #manage-pin-form label.valid").remove(),$("#manage-pin-form input").prop("disabled",!0),$("#buttonc2s").hide(),$("#manage-pin-form .resend-otp").addClass("disabled"),viewport.width<768&&$("html, body").animate({scrollTop:$("div.error-wrap").height()},"slow")):jsonResponse.success===!1&&jsonResponse.invalidAttemptsOver===!1&&($("#manage-pin-form").trigger("reset"),$("#manage-pin-form label.error, #manage-pin-form label.valid").remove(),$("#buttonc2s").hide(),viewport.width<768&&$("html, body").animate({scrollTop:$("div.error-wrap").height()},"slow"))}})}}),$("#opt-estatement").validate({onkeyup:!1,rules:{optEstatementCheck:"required",disclaimerCheck:"required"},messages:{optEstatementCheck:{required:" "},disclaimerCheck:{required:" "}},errorPlacement:function($error,$element){$error.insertAfter($element)},success:function(){validClass="valid"},highlight:function(element,errorClass,validClass){$(element).addClass(errorClass).removeClass(validClass)},unhighlight:function(element,errorClass,validClass){$(element).removeClass(errorClass).addClass(validClass),$(element).next("label").addClass(validClass)},submitHandler:function(form){$("#opt-estatement").valid()===!0&&(form.submit(),$('input[type="submit"]').attr("disabled",!0),$("#discalimer_optStmt1, #discalimer_optStmt2").attr("disabled",!0))}}),$("#login-form").validate({onkeyup:!1,rules:{username:{required:!0},password:{required:!0,maxlength:1e3}},messages:{username:{required:" "},password:{required:" "}},errorPlacement:function(){},success:function(){validClass="valid"},highlight:function(){},unhighlight:function(){}}),$("#msw-login-form").validate({onkeyup:!1,rules:{username:{required:!0},password:{required:!0}},messages:{username:{required:" "},password:{required:" "}},errorPlacement:function(){},success:function(){validClass="valid"},highlight:function(element,errorClass,validClass){$(element).addClass(errorClass).removeClass(validClass)},unhighlight:function(element,errorClass,validClass){$(element).removeClass(errorClass).addClass(validClass),$(element).next("label").addClass(validClass)}}),$("#shoppoingCart").exists()&&(globalErrorObj.shippingaddress={},globalErrorObj.shippingaddress.required={},globalErrorObj.shoppingemailaddress={},globalErrorObj.shoppingemailaddress.required={},globalErrorObj.donationvoucheraddress={},globalErrorObj.donationvoucheraddress.required={},globalErrorObj.shoppingtermcondition={},globalErrorObj.shoppingtermcondition.required={});!function(){$("#shoppoingCart").validate({onkeyup:!1,rules:{shippingaddress:"required",shoppingemailaddress:"required",donationvoucheraddress:"required",shoppingtermcondition:"required"},messages:globalErrorObj,errorPlacement:function($error,$element){var elementName=$element.attr("name"),lastInGroup=$.map(this.groups,function(fields){var fieldsArr;
return fields.indexOf(elementName)>=0?(fieldsArr=fields.split(" "),fieldsArr[fieldsArr.length-1]):null})[0];$error.insertAfter(lastInGroup?$("input[name='"+lastInGroup+"']"):$element)},success:function(){validClass="valid"},highlight:function(element,errorClass,validClass){$(element).addClass(errorClass).removeClass(validClass)},unhighlight:function(element,errorClass,validClass){$(element).removeClass(errorClass).addClass(validClass),$(element).next("label").addClass(validClass)},submitHandler:function(){}})}();$("#card-auth-form").validate({onkeyup:!1,rules:{dob:"required",otp:{required:!0,digits:!0,minlength:6},userId:{required:!0,useridvalidator:!0},password:{strongPassword:!0,required:!0,minlength:12},confirmPassword:{required:!0,strongPassword:!0,equalTo:"#password"}},groups:{cardNumber:"cardNumber1 cardNumber2 cardNumber3 cardNumber4"},messages:{dob:" ",otp:{required:" ",digits:" ",minlength:" ",maxlength:" "},userId:{required:" "},password:{strongPassword:" ",required:" ",minlength:" "},confirmPassword:{required:" ",strongPassword:" ",equalTo:" "}},errorPlacement:function($error,$element){var elementName=$element.attr("name"),lastInGroup=$.map(this.groups,function(fields){var fieldsArr;return fields.indexOf(elementName)>=0?(fieldsArr=fields.split(" "),fieldsArr[fieldsArr.length-1]):null})[0];if(lastInGroup){var elemType=$element[0].nodeName.toLowerCase();4===$("#card-number-1").val().length&&4===$("#card-number-2").val().length&&4===$("#card-number-3").val().length&&4===$("#card-number-4").val().length?$error.insertAfter($(""+elemType+"[name='"+lastInGroup+"']")):0===$("#card-number-1").val().length&&0===$("#card-number-2").val().length&&0===$("#card-number-3").val().length&&0===$("#card-number-4").val().length&&$error.insertAfter($(""+elemType+"[name='"+lastInGroup+"']"))}else{var browserurl=location.href,substring1="forgotpassword-set-credentials-page",substringrRegSetCredPage="register-set-credentials-page",substringUnlockCredPage="unlock-set-credentials-page",substringRegUpdCredPage="register-update-credentials-page",substringForgotSetCred="forgotpassword-set-credentials",substringRegUpdCred="register-update-credentials",substringUnlockSetCred="unlock-set-credentials";-1!==browserurl.indexOf(substring1)||-1!==browserurl.indexOf(substringrRegSetCredPage)||-1!==browserurl.indexOf(substringUnlockCredPage)||-1!==browserurl.indexOf(substringRegUpdCredPage)||-1!==browserurl.indexOf(substringForgotSetCred)||-1!==browserurl.indexOf(substringRegUpdCred)||-1!==browserurl.indexOf(substringUnlockSetCred)?0==$("#password").val().length&&"newPassword"==$element.attr("name")||0==$("#confirmPassword").val().length&&"confirmPassword"==$element.attr("name")||0==$("#password").val().length&&"password"==$element.attr("name")||$error.insertAfter($element):"dob"==elementName&&$error.insertAfter($element)}},success:function(){validClass="valid"},highlight:function(element,errorClass,validClass){var browserurl=location.href,substring1="forgotpassword-set-credentials-page",substringrRegSetCredPage="register-set-credentials-page",substringUnlockCredPage="unlock-set-credentials-page",substringRegUpdCredPage="register-update-credentials-page",substringRegSetCred="register-set-credentials",substringForgotSetCred="forgotpassword-set-credentials",substringRegUpdCred="register-update-credentials",substringUnlockSetCred="unlock-set-credentials";(-1!==browserurl.indexOf(substring1)||-1!==browserurl.indexOf(substringrRegSetCredPage)||-1!==browserurl.indexOf(substringUnlockCredPage)||-1!==browserurl.indexOf(substringRegUpdCredPage))&&checkStrength($("#card-auth-form #password").val()),"card-number-1"==element.id&&""!==$("#card-number-1").val()||"card-number-2"==element.id&&""!==$("#card-number-2").val()||"card-number-3"==element.id&&""!==$("#card-number-3").val()||"card-number-4"==element.id&&""!==$("#card-number-4").val()||(-1!==browserurl.indexOf(substring1)||-1!==browserurl.indexOf(substringrRegSetCredPage)||-1!==browserurl.indexOf(substringUnlockCredPage)||-1!==browserurl.indexOf(substringRegUpdCredPage)||-1!==browserurl.indexOf(substringRegSetCred)||-1!==browserurl.indexOf(substringForgotSetCred)||-1!==browserurl.indexOf(substringRegUpdCred)||-1!==browserurl.indexOf(substringUnlockSetCred))&&(1==isPasswordStrong?(isPasswordsMatch=getIsPasswordMatchStatus(),"confirmPassword"==$(element).attr("name")?1==isPasswordsMatch?($(element).addClass(validClass).removeClass(errorClass),$(element).next("label").addClass(validClass)):0==$("#card-auth-form #confirmPassword").val().length?($(element).removeClass(errorClass),$(element).next("label").removeClass(errorClass),$("#confPwdMissmatchErrorMsg").css("display","none"),$("#confPwdMissmatchErrorMsg").html("")):($("#confPwdMissmatchErrorMsg").css("display","block"),$("#confPwdMissmatchErrorMsg").html(""),$("#confPwdMissmatchErrorMsg").html("Password doesn't match"),$(element).addClass(errorClass).removeClass(validClass),$(element).next("label").addClass(errorClass)):($(element).addClass(validClass).removeClass(errorClass),$(element).next("label").addClass(validClass))):0==$("#password").val().length&&"newPassword"==$(element).attr("name")||(0==$("#confirmPassword").val().length&&"confirmPassword"==$(element).attr("name")?($(element).removeClass(errorClass),$(element).next("label").removeClass(errorClass)):0==$("#password").val().length&&"password"==$(element).attr("name")?($(element).removeClass(errorClass),$(element).next("label").removeClass(errorClass)):($(element).addClass(errorClass).removeClass(validClass),$(element).next("label").addClass(errorClass)))),"confirmPassword"==$(element).attr("name")&&($("input[type=submit]").attr("disabled",!0),$("input[type=submit]").removeClass("primary").addClass("secondary"))},unhighlight:function(element,errorClass,validClass){function myGreeting(){var userIdFieldClassName=document.getElementById("userid").className;1==isPasswordStrong&&1==isPasswordsMatch&&-1!==userIdFieldClassName.indexOf("valid")?($("input[type=submit]").removeAttr("disabled"),$("input[type=submit]").removeClass("secondary").addClass("primary"),$("input[type=submit]").focus()):($("input[type=submit]").attr("disabled","disabled"),$("input[type=submit]").removeClass("primary").addClass("secondary"),$("input[type=submit]").focus())}console.log("unhighlight");var browserurl=location.href,substring1="forgotpassword-set-credentials-page",substringrRegSetCredPage="register-set-credentials-page",substringUnlockCredPage="unlock-set-credentials-page",substringRegUpdCredPage="register-update-credentials-page",substringRegSetCred="register-set-credentials",substringForgotSetCred="forgotpassword-set-credentials",substringRegUpdCred="register-update-credentials",substringUnlockSetCred="unlock-set-credentials";if(-1!==browserurl.indexOf(substring1)||-1!==browserurl.indexOf(substringrRegSetCredPage)||-1!==browserurl.indexOf(substringUnlockCredPage)||-1!==browserurl.indexOf(substringRegUpdCredPage)||-1!==browserurl.indexOf(substringRegSetCred)||-1!==browserurl.indexOf(substringForgotSetCred)||-1!==browserurl.indexOf(substringRegUpdCred)||-1!==browserurl.indexOf(substringUnlockSetCred)){if(isPasswordsMatch=getIsPasswordMatchStatus(),console.log("unhighlight",isPasswordStrong,isPasswordsMatch),1==isPasswordStrong&&"password"==$(element).attr("name")?($(element).removeClass(errorClass).addClass(validClass),$(element).next("label").addClass(validClass)):1==isPasswordsMatch&&"confirmPassword"==$(element).attr("name")?($("#confPwdMissmatchErrorMsg").html(""),$("#confPwdMissmatchErrorMsg").css("display","none"),$(element).removeClass(errorClass).addClass(validClass),$(element).next("label").addClass(validClass)):"userId"==$(element).attr("name")?($(element).removeClass(errorClass).addClass(validClass),$(element).next("label").addClass(validClass)):($(element).removeClass(validClass).addClass(errorClass),$(element).next("label").addClass(errorClass)),-1!==browserurl.indexOf(substringrRegSetCredPage)&&"userId"==$(element).attr("name")){setTimeout(myGreeting,2e3)}}else $(element).removeClass(errorClass).addClass(validClass),$(element).next("label").addClass(validClass);if("confirmPassword"==$(element).attr("name"))if(-1!==browserurl.indexOf(substringrRegSetCredPage)){var userIdFieldClassName=$("#userid").attr("class");1==isPasswordStrong&&1==isPasswordsMatch&&-1!==userIdFieldClassName.indexOf("valid")?($("input[type=submit]").removeAttr("disabled"),$("input[type=submit]").removeClass("secondary").addClass("primary"),$("input[type=submit]").focus()):($("input[type=submit]").attr("disabled","disabled"),$("input[type=submit]").removeClass("primary").addClass("secondary"),$("input[type=submit]").focus())}else 1==isPasswordStrong&&1==isPasswordsMatch&&($("input[type=submit]").removeAttr("disabled"),$("input[type=submit]").removeClass("secondary").addClass("primary"),$("input[type=submit]").focus());try{$(".login-page .card-number").length>0&&0!==$("#card-number-1").val().length&&0!==$("#card-number-2").val().length&&0!==$("#card-number-3").val().length&&0!==$("#card-number-4").val().length&&$('label[for="cardNumber"]').addClass("valid")}catch(e){}},submitHandler:function(form){form.submit()}}),$("#bt-form").exists()&&(globalErrorObj.termcondition={},globalErrorObj.termcondition.required={}),$("#bt-form").validate({onkeyup:!1,focusInvalid:!0,rules:{offers:"required",amount:{required:!0,min:Number($("#minAmount").val()),max:Number($("#maxAmount").val())},otp:{required:!0,digits:!0,minlength:6,maxlength:6},offer:"required"},groups:{cardNumber:"card-number-5 card-number-6 card-number-7 card-number-8"},messages:globalErrorObj,errorPlacement:function($error,$element){var elementName=$element.attr("name"),lastInGroup=$.map(this.groups,function(fields){var fieldsArr;return fields.indexOf(elementName)>=0?(fieldsArr=fields.split(" "),fieldsArr[fieldsArr.length-1]):null})[0];if(lastInGroup){var elemType=$element[0].nodeName.toLowerCase();4!==$("#card-number-5").val().length||4!==$("#card-number-6").val().length||4!==$("#card-number-7").val().length||4!==$("#card-number-8").val().length&&1!==$("#card-number-8").val().length?0===$("#card-number-5").val().length&&0===$("#card-number-6").val().length&&0===$("#card-number-7").val().length&&0===$("#card-number-8").val().length&&$error.insertAfter($(""+elemType+"[name='"+lastInGroup+"']")):$error.insertAfter($(""+elemType+"[name='"+lastInGroup+"']"))}},success:function(){validClass="valid"},highlight:function(element,errorClass,validClass){$(element).addClass(errorClass).removeClass(validClass)},unhighlight:function(element,errorClass,validClass){$(element).removeClass(errorClass).addClass(validClass),console.log("$w BT transfer line no 1918 validation");var cardNumber=$(".card-number").map(function(){return $(this).val()}).get().join("");!creditCardValidate(cardNumber)&&13!==cardNumber.length||$("#maskNumInputFcu-1").val()+$("#maskNumInputFcu-2").val()+$("#maskNumInputFcu-3").val()+$("#maskNumInputFcu-4").val()!=$("#card-number-5").val()+$("#card-number-6").val()+$("#card-number-7").val()+$("#card-number-8").val()||($("#card-number-8").siblings("label").removeClass("error"),$(element).next("label").hasClass("validCard")||$(element).siblings("label").addClass(validClass)),"otp"==element.id&&$("#bt-form #term-condition-id").prop("checked")&&$("#bt-form #confirm-button").removeClass("disabled").prop("disabled",!1).addClass("primary").removeClass("secondary"),"otp"==element.id&&$("#bt-form #enter-otp-field .field-wrap #otp").removeClass("error").siblings("label").removeClass("error").addClass("valid")},submitHandler:function(form){var href=$("#bt-form .bt-submit-buttom").attr("data-href"),otp=$("#bt-form #otp").val(),passPhrase=randomStringGenerator(10,!0,!1);if(console.log("$w BT transfer line no 1932 validation with passPhrase"),href&&"confirm-button"==clicked)$.ajax({url:href,type:"POST",data:{otp:otp,passPhrase:passPhrase},beforeSend:function(){$("#bt-form #enter-otp-field #otp").siblings(".errMsgDisplay").remove();var loaderHtml='<div class="overlay-loader"></div>';$("body").append(loaderHtml)},success:function(data){console.log("$w-->Validations-->BalanceTransfer-->EncryptedData-->"+data+" passPhrase"+passPhrase);var decryptedData=dataDecryptionAES(data,passPhrase);if(data=JSON.parse(decryptedData),data.success){var loaderHtml='<div class="overlay-loader"></div>';$("body").append(loaderHtml);var cardnumber1=(randomStringGenerator(10,!0,!1),$("#card-number-1").val()),cardnumber2=$("#card-number-2").val(),cardnumber3=$("#card-number-3").val(),cardnumber4=$("#card-number-4").val(),previousCard=$("#previousCard").val();cardnumber1=dataEncryptionAES(cardnumber1),cardnumber2=dataEncryptionAES(cardnumber2),cardnumber3=dataEncryptionAES(cardnumber3),cardnumber4=dataEncryptionAES(cardnumber4),previousCard=dataEncryptionAES(previousCard),$("#card-number-1").val(cardnumber1),$("#card-number-2").val(cardnumber2),$("#card-number-3").val(cardnumber3),$("#card-number-4").val(cardnumber4),$("#previousCard").val(previousCard),form.submit(),$(".bt-submit-buttom").attr("disabled",!0),$("#term-condition-id").attr("disabled",!0)}else{$("#bt-form #otp").val(""),$("#bt-form #term-condition-id").prop("checked",!1).parent().removeClass("checked"),$("#bt-form #confirm-button").prop("disabled",!0).addClass("disabled").addClass("secondary").removeClass("primary");var message,dataMsg=data.message;data.invalidAttemptsOver===!0?($("body").find("div.overlay-loader").remove(),message='<div class="errMsgDisplay"><span style="color:red">'+dataMsg+"</span></div>",$(".errMsgDisplay").remove(),$("#enter-otp-field .field-wrap").append(message),$("#bt-form #enter-otp-field .field-wrap #otp").addClass("error"),$("#bt-form #term-condition-id").attr("disabled","disabled"),$("#bt-form #enter-otp-field .field-wrap #otp").addClass("error").siblings("label.error").removeClass("valid"),$("#bt-form").closest(".main-wrap").css(".position","relative").append('<div class="block-user-overlay"></div>')):($("body").find("div.overlay-loader").remove(),$(".errMsgDisplay").remove(),$("#bt-form #enter-otp-field .field-wrap #otp").addClass("error").siblings("label").addClass("error").removeClass("valid"),$("#card-number-8").siblings("label").removeClass("error")),$("#bt-form #enter-otp-field #otp").off().on("blur",function(){$(this).siblings(".errMsgDisplay").remove()})}}});else{var loaderHtml='<div class="overlay-loader"></div>';$("body").append(loaderHtml),form.submit(),$("#confirm-button-test").attr("disabled",!0),$("#term-condition-id").attr("disabled",!0)}}}),$("#credit-limit-inc").exists()&&(globalErrorObj.termcondition={},globalErrorObj.termcondition.required={}),$(".card-number").each(function(){$(this).rules("add",{required:!0,number:!0,minlength:4,messages:{required:"",number:"",minlength:""}})}),$("#encash-form").validate({onkeyup:!1,focusInvalid:!0,rules:{savingsAccountNumber:"required",bankName:"required",ifscCode:"required",bookingAmnt:"required",otp:{required:!0,digits:!0,minlength:6,maxlength:6}},messages:globalErrorObj,errorPlacement:function($error,$element){var elementName=$element.attr("name"),lastInGroup=$.map(this.groups,function(fields){var fieldsArr;return fields.indexOf(elementName)>=0?(fieldsArr=fields.split(" "),fieldsArr[fieldsArr.length-1]):null})[0];$error.insertAfter(lastInGroup?$("input[name='"+lastInGroup+"']"):$element)},success:function(){validClass="valid"},highlight:function(element,errorClass,validClass){$(element).addClass(errorClass).removeClass(validClass)},unhighlight:function(element,errorClass,validClass){"bookingAmnt"==element.id?validateBookingAmount($(element).closest("form")):($(element).removeClass(errorClass),$("#encash-form").find("#enter-otp-field").find("label.error").remove(),$(".prod-tick-fix").next("label").addClass(validClass),$(".outbound-bank-cross-fix").next("label").removeClass("error")),"otp"==element.id&&$("#encash-form #term-condition-id").prop("checked")&&$("#encash-form #confirm-button").removeClass("disabled").prop("disabled",!1).addClass("primary").removeClass("secondary")},submitHandler:function(form){var href=$("#encash-form .encash-submit-button").attr("data-href"),otp=$("#encash-form #otp").val(),passphrase=document.getElementById("passphrase").value;if(href&&"confirm-button"==clicked)$.ajax({url:href,type:"POST",data:{otp:otp},headers:{passphrase:passphrase},beforeSend:function(){$("#encash-form #enter-otp-field #otp").siblings(".errMsgDisplay").remove();var loaderHtml='<div class="overlay-loader"></div>';$("body").append(loaderHtml)},success:function(data){if(data=decryptResponse(data,passphrase),data.success){var loaderHtml='<div class="overlay-loader"></div>';$("body").append(loaderHtml),sessionStorage.setItem("abandon","false"),$(".encash-submit-buttom").attr("disabled",!0),$("#encash-form #term-condition-id").removeAttr("disabled"),$("#encash-form #term-condition-id").prop("disabled",!1),form.submit()}else{$("#encash-form #otp").val(""),$("#encash-form #term-condition-id").prop("checked",!1).parent().removeClass("checked"),$("#encash-form #term-condition-id").removeAttr("disabled"),$("#encash-form #confirm-button").prop("disabled",!0).addClass("disabled").addClass("secondary").removeClass("primary"),$("#encash-form").find("#enter-otp-field").find("label.valid").remove();var message,dataMsg=data.message;data.invalidAttemptsOver===!0?($("body").find("div.overlay-loader").remove(),message='<div class="errMsgDisplay"><span style="color:red">'+dataMsg+"</span></div>",$(".errMsgDisplay").remove(),$("#enter-otp-field .field-wrap").append(message),$("#encash-form #enter-otp-field .field-wrap #otp").addClass("error"),$("#encash-form").find("#enter-otp-field").find("label.valid").remove(),$("#encash-form #enter-otp-field .field-wrap #otp").addClass("error").siblings("label.error").removeClass("valid"),$("#encash-form").closest(".main-wrap").css(".position","relative").append('<div class="block-user-overlay"></div>')):("004"==data.statusCode&&($("#rico-encash-inc-otp").show(),$("#rico-encash-inc-otp").html("OTP entered is incorrect")),$("body").find("div.overlay-loader").remove(),$(".errMsgDisplay").remove(),$("#encash-form #enter-otp-field .field-wrap #otp").addClass("error").siblings("label.error").removeClass("valid"),$("#encash-form").find("#enter-otp-field").find("label.valid").remove()),$("#encash-form #enter-otp-field #otp").off().on("blur",function(){$(this).siblings(".errMsgDisplay").remove()}),$("#encash-form .rico-encash-enter-otp").on("keydown keyup change",function(){$("#rico-encash-inc-otp").hide()}),$("#resend-otp-id").on("click",function(){$("#rico-encash-inc-otp").hide()})}callDncOTPverifyEncash(data)}});else{var loaderHtml='<div class="overlay-loader"></div>';$("body").append(loaderHtml),form.submit(),$("#confirm-button-test").attr("disabled",!0),$("#term-condition-id").attr("disabled",!0)}}}),$("#emd-form").validate({onkeyup:!1,focusInvalid:!0,rules:{savingsAccountNumber:"required",bankName:"required",ifscCode:"required",bookingAmnt:"required",otp:{required:!0,digits:!0,minlength:6,maxlength:6}},messages:globalErrorObj,errorPlacement:function($error,$element){var elementName=$element.attr("name"),lastInGroup=$.map(this.groups,function(fields){var fieldsArr;return fields.indexOf(elementName)>=0?(fieldsArr=fields.split(" "),fieldsArr[fieldsArr.length-1]):null})[0];$error.insertAfter(lastInGroup?$("input[name='"+lastInGroup+"']"):$element)},success:function(){validClass="valid"},highlight:function(element,errorClass,validClass){$(element).addClass(errorClass).removeClass(validClass)},unhighlight:function(element,errorClass,validClass){"bookingAmnt"==element.id?validateBookingAmount($(element).closest("form")):($(element).removeClass(errorClass).addClass(validClass),$(element).next("label").addClass(validClass)),"otp"==element.id&&$("#emd-form #term-condition-id").prop("checked")&&$("#emd-form #confirm-button").removeClass("disabled").prop("disabled",!1).addClass("primary").removeClass("secondary")},submitHandler:function(form){var href=$("#emd-form .emd-submit-button").attr("data-href"),otp=$("#emd-form #otp").val();if(console.log("Inside emd validation"),console.log(href),href&&"confirm-button"==clicked)console.log("Inside confirm-button"),$.ajax({url:href,type:"POST",data:{otp:otp},beforeSend:function(){$("#emd-form #enter-otp-field #otp").siblings(".errMsgDisplay").remove();var loaderHtml='<div class="overlay-loader"></div>';$("body").append(loaderHtml)},success:function(data){if(console.log(data),data.success){var loaderHtml='<div class="overlay-loader"></div>';$("body").append(loaderHtml),form.submit(),$(".emd-submit-buttom").attr("disabled",!0),$("#term-condition-id").removeAttr("disabled")}else{$("#emd-form #otp").val(""),$("#emd-form #term-condition-id").prop("checked",!1).parent().removeClass("checked"),$("#emd-form #term-condition-id").removeAttr("disabled"),$("#emd-form #confirm-button").prop("disabled",!0).addClass("disabled").addClass("secondary").removeClass("primary"),$("#encash-form").find("#enter-otp-field").find("label.valid").remove();var message,dataMsg=data.message;console.log("datainvalid attempt"+data.invalidAttemptsOver),data.invalidAttemptsOver===!0?(console.log("inside confirm butt"),$("body").find("div.overlay-loader").remove(),message='<div class="errMsgDisplay"><span style="color:red">'+dataMsg+"</span></div>",$(".errMsgDisplay").remove(),$("#enter-otp-field .field-wrap").append(message),$("#emd-form #enter-otp-field .field-wrap #otp").addClass("error"),$("#emd-form #enter-otp-field .field-wrap #otp").addClass("error").siblings("label.error").removeClass("valid"),$("#emd-form").find("#enter-otp-field").find("label.valid").remove(),$("#emd-form").closest(".main-wrap").css(".position","relative").append('<div class="block-user-overlay"></div>')):($("body").find("div.overlay-loader").remove(),$(".errMsgDisplay").remove(),$("#emd-form #enter-otp-field .field-wrap #otp").addClass("error").siblings("label.error").removeClass("valid")),$("#emd-form #enter-otp-field #otp").off().on("blur",function(){$(this).siblings(".errMsgDisplay").remove()})}}});else{var loaderHtml='<div class="overlay-loader"></div>';$("body").append(loaderHtml),form.submit(),$("#confirm-button-test").attr("disabled",!0),$("#term-condition-id").attr("disabled",!0)}}});var creditCardValidate=window.creditCardValidate=function(value){if(/[^0-9 \-]+/.test(value))return console.log("Second if for BT Amex"),!1;var n,cDigit,nCheck=0,nDigit=0,bEven=!1;if(value=value.replace(/\D/g,""),value.length<13||value.length>19)return console.log("Third if for BT Amex"),!1;for(n=value.length-1;n>=0;n--)cDigit=value.charAt(n),nDigit=parseInt(cDigit,10),bEven&&(nDigit*=2)>9&&(nDigit-=9),nCheck+=nDigit,bEven=!bEven;return nCheck%10===0};$.validator.addMethod("alphaNumericWithSeperators",function(value,element){return this.optional(element)||/^[\w\._]+$/i.test(value)},"Must be alphanumeric"),$.validator.addMethod("useridvalidator",function(){return useridValidation_Reg()},""),$.validator.addMethod("alphaNumericWithSeperatorsfortransactionhistory",function(value,element){return this.optional(element)||/^[\w\-._ ]+$/i.test(value)},"Must be alphanumeric"),$.validator.addMethod("alphaNumericWithSeperatorsforpaymenthistory",function(value,element){return this.optional(element)||/^[\w\ ]+$/i.test(value)},"Must be alphanumeric"),$.validator.addMethod("minDateVal",function(value){}),$.validator.addMethod("strongPassword",function(value){var strength=0;return value.match(/([a-z].*[A-Z])|([A-Z].*[a-z])/)&&(strength+=1),value.match(/([a-zA-Z])/)&&value.match(/([0-9])/)&&(strength+=1),value.match(/([!,%,&,@,#,$,^,*,?,_,~])/)&&(strength+=1),strength>=3},""),$.validator.addMethod("groupedCreditCard",function(value,element){console.log("groupedCreditCard is getting called");var cardNumberElements=$(element).parent().children("input"),cardNumber=$(cardNumberElements).map(function(){return $(this).val()}).get().join("");if(console.log("cardNumber"+cardNumber),!(cardNumber.length<16)){var isValid;return cardNumber.length>16?(isValid="true",console.log("cardNumber>16")):(console.log("call creditCardValidate"),isValid=creditCardValidate(cardNumber)),isValid?$(cardNumberElements).addClass("valid").removeClass("error"):$(cardNumberElements).addClass("error").removeClass("valid"),isValid}},""),$.validator.addMethod("noStartWith9or8or7",function(value){return 9==value[0]||8==value[0]||7==value[0]?!0:!1}),$.validator.addMethod("greaterThan",function(){var $min=$("#fromAmount"),$max=$("#toAmount");return this.settings.onkeyup&&$max.off(".validate-greaterThan").on("keyup.validate-greaterThan",function(){$min.valid(),$max.valid()}),$min.val().length>0?parseFloat($max.val())>=parseFloat($min.val()):0===$max.val().length?!0:!1},"Max must be greater than min"),$.validator.addMethod("lessThan",function(){var $min=$("#fromAmount"),$max=$("#toAmount");return this.settings.onkeyup&&$min.off(".validate-lessThan").on("keyup.validate-lessThan",function(){$min.valid(),$max.valid()}),$max.val().length>0?parseFloat($min.val())<=parseFloat($max.val()):!0},"Min must be less than max"),$.validator.addMethod("noStartWith0",function(value){return 0===value[0]?!1:!0}),$("#card-auth-form .card-number").each(function(){$(this).rules("add",{required:!0,digits:!1,number:!1,groupedCreditCard:!0,minlength:4,maxlength:1e3,messages:{required:" ",number:" ",minlength:" "}})}),$("#card-auth-form .card-number, #card-upgrade-form .card-no-upgrade").keyup(function(e){var key=e.keyCode?e.keyCode:e.which;key>=48&&57>=key&&!e.shiftKey&&4==$(this).val().length&&$(this).next().focus()}),$(".cvv-number").each(function(){$(this).rules("add",{required:!0,number:!1,minlength:3,maxlength:1e3,messages:{required:" ",number:" ",minlength:" "}})}),$("body").delegate(".only-numeric","keydown",function(e){if(e.ctrlKey||e.altKey)e.preventDefault();else{var key=e.keyCode?e.keyCode:e.which;if(!(8==key||9==key||46==key||key>=35&&40>=key||key>=48&&57>=key&&!e.shiftKey||key>=96&&105>=key))return!1}}),$("#card-upgrade-form").validate({onkeyup:!1,focusInvalid:!0,rules:{name:"required",frequentFlyerNoAirIndia:"required",emailIdAirIndia:{required:!0,emailFormat:!0}},groups:{cardNumber:"card-number-1 card-number-2 card-number-3 card-number-4"},messages:globalErrorObj,errorPlacement:function($error,$element){var elementName=$element.attr("name"),lastInGroup=$.map(this.groups,function(fields){var fieldsArr;return fields.indexOf(elementName)>=0?(fieldsArr=fields.split(" "),fieldsArr[fieldsArr.length-1]):null})[0];$error.insertAfter(lastInGroup?$("input[name='"+lastInGroup+"']"):$element)},success:function(){validClass="valid"},highlight:function(element,errorClass,validClass){$(element).addClass(errorClass).removeClass(validClass)},unhighlight:function(element,errorClass,validClass){$(element).removeClass(errorClass).addClass(validClass),$(element).next("label").addClass(validClass)},submitHandler:function(form){form.submit(),$(this).attr("disabled",!0),$("#card-upgrade-terms").attr("disabled",!0)}}),$("#refer-from").length>0&&$("#refer-from").validate({onkeyup:!1,focusInvalid:!0,errorPlacement:function($error,$element){$error.insertAfter($element)},success:function(){validClass="valid"},highlight:function(element,errorClass,validClass){$(element).addClass(errorClass).removeClass(validClass)},unhighlight:function(element,errorClass,validClass){$(element).removeClass(errorClass).addClass(validClass),$(element).next("label").addClass(validClass)},submitHandler:function(){$("#refer-from input#add-row-submit").attr("disabled",!0).addClass("secondary");var href=$("#refer-from").attr("data-href"),formData=$("#refer-from").serialize();href&&makeAjaxWithLoader({url:href,type:"POST",data:formData,success:function(data){$(".refer .notification").find("span.friendNames").html(data),$(".refer-page").css("display","none"),$("body").find("div.overlay-loader").remove(),$(".refer-success-page").css("display","block"),setAnalyticsPost("referafriend-submit")}})}}),$(".card-no-upgrade").each(function(){$(this).rules("add",{required:!0,number:!0,minlength:4,messages:{required:"",number:"",minlength:""}})})}),$(".card-number").keyup(function(e){4==$(this).val().length&&9!=e.keyCode&&16!=e.keyCode&&$(this).next().focus()}),$(document).delegate(".noSpecial-noInteger","keydown",function(e){if(e.ctrlKey||e.altKey)e.preventDefault();else{var key=e.keyCode?e.keyCode:e.which;8==key||9==key||13==key||46==key||key>=35&&40>=key||key>=65&&90>=key||e.preventDefault()}}),$(document).delegate(".noSpecial-noInteger-Addon-KYC","keydown",function(e){if(e.ctrlKey||e.altKey)e.preventDefault();else{var key=e.keyCode?e.keyCode:e.which;(key>=33&&64>=key||key>=186&&222>=key||key>=96&&111>=key)&&e.preventDefault()}}),$(document).delegate(".onlyInteger","keypress",function(e){var keyCode,ret,specialKeys=new Array;return specialKeys.push(8),specialKeys.push(9),specialKeys.push(13),specialKeys.push(46),specialKeys.push(36),specialKeys.push(35),specialKeys.push(37),specialKeys.push(39),keyCode=0===e.keyCode?e.charCode:e.keyCode,ret=keyCode>=48&&57>=keyCode||$.inArray(e.keyCode,specialKeys)>-1&&e.charCode!=e.keyCode}),$(".onlyNumber").keypress(function(evt){var specialKeys=[8,9,13,32,36,35,37,39],charCode=evt.which?evt.which:evt.keyCode;return $.inArray(charCode,specialKeys)>-1&&evt.charCode!=evt.keyCode?!0:checkDecimals($(this),$(this).val())?46!=charCode&&charCode>31&&(48>charCode||charCode>57)?!1:!0:!1}),$(document).delegate(".noSpecialChar","keypress",function(e){var keyCode,ret,specialKeys=[8,9,13,32,46,36,35,37,39];return keyCode=0===e.keyCode?e.charCode:e.keyCode,ret=keyCode>=48&&57>=keyCode||32==keyCode||13==keyCode||keyCode>=65&&90>=keyCode||keyCode>=97&&122>=keyCode||-1!=specialKeys.indexOf(e.keyCode)&&e.charCode!=e.keyCode}),$(".stringWithSpaceOnly").on("keydown",function(e){var keyCode=0===e.keyCode?e.charCode:e.keyCode,specialKeys=[8,9,13,32,46,36,35,37,39];return keyCode>=65&&90>=keyCode||keyCode>=97&&122>=keyCode||-1!=specialKeys.indexOf(keyCode)?void 0:(e.preventDefault(),!1)});var onlyMoney=function(container){container.length>0&&$(container).find(".onlyMoney").on({keypress:function(evt){var el=this,charCode=evt.which?evt.which:evt.keyCode;if(charCode>31&&(48>charCode||charCode>57)&&46!=charCode)return!1;var number=el.value.split(".");if(number.length>1&&46==charCode)return!1;var caratPos=getSelectionStart(el),dotPos=el.value.indexOf(".");return 8!=charCode&&9!=charCode&&caratPos>dotPos&&dotPos>-1&&number[1].length>1?!1:!0},keyup:function(evt){var el=this,charCode=evt.which?evt.which:evt.keyCode;46==charCode||-1!=el.value.indexOf(".")?$(el).attr("maxlength",parseInt($(el).attr("data-maxlength"))+1):$(el).attr("maxlength",$(el).attr("data-maxlength"))},focusout:function(){var oldVal=$(this).val()||0,newVal="";newVal=Number(oldVal),newVal=0===newVal?"":newVal,$(this).val(newVal);var textid=$(this).attr("id"),fldId=textid+"-hdn";document.getElementById(fldId).value=newVal}}).one("focus",function(){var max=10;$.trim($(this).attr("maxlength")).length>0&&(max=$.trim($(this).attr("maxlength"))),$(this).attr("data-maxlength",max)})};onlyMoney($(".onlyMoney").parent());var onlyMoneyTxn=function(container){container.length>0&&$(container).find(".onlyMoneyTxn").on({keypress:function(evt){var el=this,charCode=evt.which?evt.which:evt.keyCode;if(charCode>31&&(48>charCode||charCode>57)&&46!=charCode)return!1;var number=el.value.split(".");if(number.length>1&&46==charCode)return!1;var caratPos=getSelectionStart(el),dotPos=el.value.indexOf(".");return 8!=charCode&&9!=charCode&&caratPos>dotPos&&dotPos>-1&&number[1].length>1?!1:!0},keyup:function(evt){var el=this,charCode=evt.which?evt.which:evt.keyCode;46==charCode||-1!=el.value.indexOf(".")?$(el).attr("maxlength",parseInt($(el).attr("data-maxlength"))+1):$(el).attr("maxlength",$(el).attr("data-maxlength"))},focusout:function(){var oldVal=$(this).val()||0,newVal="";newVal=Number(oldVal),newVal=0===newVal?0:newVal,$(this).val(newVal)}}).one("focus",function(){var max=10;$.trim($(this).attr("maxlength")).length>0&&(max=$.trim($(this).attr("maxlength"))),$(this).attr("data-maxlength",max)
})};if(onlyMoneyTxn($(".onlyMoneyTxn").parent()),$(".onlyIFSC").on({keydown:function(e){function validateIfscCode(){var thisLen=thisEl.val().length,retVal=!1;return 3>=thisLen?(keyCode>=65&&90>=keyCode||keyCode>=97&&122>=keyCode)&&(retVal=!0):10>=thisLen&&(keyCode>=48&&57>=keyCode||keyCode>=96&&105>=keyCode)&&(retVal=!0),retVal}{var thisEl=$(this),keyCode=0===e.keyCode?e.charCode:e.keyCode,specialKeys=(0===e.which?e.which:e.keyCode,[8,9,13,32,36,35,37,39,46]);String.fromCharCode(keyCode)}return validateIfscCode()||-1!=specialKeys.indexOf(keyCode)?void 0:!1}}),$(document).delegate(".alphaWithSpecialChar","keypress",function(e){var keyCode,ret,specialKeys=[8,9,13,32,46,36,35,37,39];return keyCode=0===e.keyCode?e.charCode:e.keyCode,ret=keyCode>=48&&57>=keyCode||32==keyCode||46==keyCode||95==keyCode||45==keyCode||13==keyCode||keyCode>=65&&90>=keyCode||keyCode>=97&&122>=keyCode||-1!=specialKeys.indexOf(e.keyCode)&&e.charCode!=e.keyCode}),$(".userIdvalidation").keypress(function(e){var keyCode,ret,specialKeys=[8,9,13,32,46,36,35,37,39];return keyCode=0===e.keyCode?e.charCode:e.keyCode,ret=keyCode>=48&&57>=keyCode||46==keyCode||95==keyCode||13==keyCode||keyCode>=65&&90>=keyCode||keyCode>=97&&122>=keyCode||-1!=specialKeys.indexOf(e.keyCode)&&e.charCode!=e.keyCode}),$(".datepicker").exists()){var d=new Date;$("#request-addon-form .datepicker input#dob-request, .login-page .datepicker input#dob, .login-page .datepicker input#dob-card, .yono-login-form .datepicker input#yono_card_dob").datepicker({dateFormat:"dd-M-yy",changeMonth:!0,changeYear:!0,maxDate:"-18Y",onSelect:function(){var validator=$(this).closest("form").validate();validator.element($(this))},yearRange:"1900:"+((new Date).getFullYear()-18)}).click(function(){$(this).blur().focus()})}$(document).ready(function(){$(".login-page #login-form .form-field-list li input#userid").focus()}),$(document).ready(function(){$(".fancy-dd").supportKeyboard(),$rewardTxtDashboard=$(".dashboard-post .sub-col.reward-goal .item-name"),$rewardTxtDashboard.text().length>25&&$rewardTxtDashboard.text(readMore($rewardTxtDashboard.text(),25))}),$(window).on("load",function(){$("div.overlay-loader").fadeOut("slow")}),$(document).ready(function(){$("#password").bind("keypress",function(e){if($("#password").val().length>=0){var k=e.which,ok=k>=65&&90>=k||k>=97&&122>=k||k>=48&&57>=k||8==k||33==k||37==k||38==k||64==k||35==k||36==k||94==k||42==k||63==k||95==k||126==k||13==k||40==k||41==k||45==k||58==k||59==k||124==k||34==k||123==k||125==k||63==k||43==k||47==k||91==k||93==k||92==k||61==k||44==k||46==k||39==k;ok||e.preventDefault()}})}),$(document).ready(function(){$("#year").html((new Date).getFullYear())}),$("document").ready(function(){console.log("------------------------------------12---------------12------------12---------"),$(".sticky-quick-links li.quick-sticky-link a").css("margin-left","-85px"),$(".sticky-quick-links li.quick-sticky-link a").css("width","85px"),$(".sticky-quick-links li.quick-sticky-link a").css("background","#0a242b"),$(".sticky-quick-links li.quick-sticky-link a").css("border-top-color","#0a242b"),$(".sticky-quick-links li.quick-sticky-link a small").css("display","block"),$(".sticky-quick-links li.quick-sticky-link a small").css("color","#fff"),$(".quick-icon").addClass("lefticon1"),$(".quick-icon").hasClass("righticon1")&&$(".quick-icon").removeClass("righticon1");var req_flag=0;$(".quick-master-icon").click(function(){console.log(req_flag+"--req_flag"),0==req_flag?(console.log(req_flag+"--req_flag"),req_flag=1,$(".sticky-quick-links li.quick-sticky-link a").css("margin-left","0px"),$(".sticky-quick-links li.quick-sticky-link a").css("background","#0a242b"),$(".sticky-quick-links li.quick-sticky-link a").css("border-top-color","#0a242b"),$(".quick-icon").addClass("righticon1"),$(".quick-icon").hasClass("lefticon1")&&$(".quick-icon").removeClass("lefticon1")):(console.log(req_flag+"--req_flag"),req_flag=0,$(".sticky-quick-links li.quick-sticky-link a").css("margin-left","-85px"),$(".sticky-quick-links li.quick-sticky-link a").css("width","85px"),$(".sticky-quick-links li.quick-sticky-link a").css("background","#0a242b"),$(".sticky-quick-links li.quick-sticky-link a").css("border-top-color","#0a242b"),$(".sticky-quick-links li.quick-sticky-link a small").css("display","block"),$(".sticky-quick-links li.quick-sticky-link a small").css("color","#fff"),$(".quick-icon").addClass("lefticon1"),$(".quick-icon").hasClass("righticon1")&&$(".quick-icon").removeClass("righticon1"))})}),$(document).ready(function(){$.validator.addMethod("notEqual",function(value,element,param){return this.optional(element)||value!==param}),$.validator.addMethod("mod7Logic",function(value){var number=parseInt(value/10),num1=parseInt(value%10),num2=parseInt(number%7);return num1==num2}),$.validator.addMethod("lowTier",function(value){return"CV Gold"!==value&&"CV Platinum"!==value}),$.validator.addMethod("lowTierTrident",function(value){return"Gold"!==value&&"Platinum"!==value}),$.validator.addMethod("checkFullName",function(){return!$("#firstName").hasClass("error")&&""==!$("#firstName").val()&&!$("#salutation").hasClass("error")&&""==!$("#salutation option:selected").val()&&""==!$("#lastName").val()}),$.validator.addMethod("checkDependencies",function(){return!$("#firstName").hasClass("error")&&""==!$("#firstName").val()&&!$("#salutation").hasClass("error")&&""==!$("#salutation option:selected").val()}),validateTridentPrimeCard(),validateVistaraPrimeCard()});var isAmexCard=!1;$(".validate-form #cvv-number").on("focus",function(){if($("#cvvImageGeneric").css("display",""),$("#cvvImageAmexElite").css("display",""),$("#cvvImageAmexPrime").css("display",""),isAmexCard){$("#cvvImageGeneric").css("display","block"),$("#cvvImageAmexElite").css("display","none"),$("#cvvImageAmexPrime").css("display","none");var cardnum=$("#card-number-single").val(),cardLogo=cardnum.substring(6,9);89==cardLogo&&($("#cvvImageAmexElite").css("display","block"),$("#cvvImageAmexPrime").css("display","none"),$("#cvvImageGeneric").css("display","none")),400==cardLogo&&($("#cvvImageAmexElite").css("display","none"),$("#cvvImageAmexPrime").css("display","block"),$("#cvvImageGeneric").css("display","none"))}else $("#cvvImageAmexElite").css("display","none"),$("#cvvImageAmexPrime").css("display","none")});var cardNumberIP_Prev="";$("#card-number-single").on("keyup blur",function(e){resetCardFieldStyle();var cardNumberIP=$(this).val(),firstDigit=parseInt(cardNumberIP.charAt(0)),secondDigit=parseInt(cardNumberIP.charAt(1)),kc=e.which||e.keyCode;cardNumberIP_Prev.length-cardNumberIP.length==1&&(console.log("Backspace pressed!"),kc=8),cardNumberIP||($("#cvvTooltipGeneric").css("display","block"),$("#cvvTooltipNonAmex").css("display","none"),$("#cvvTooltipAmex").css("display","none"),$("#cvv-number").attr("placeholder","")),console.log("cardNumberIP: ",cardNumberIP);var expToMatch=new RegExp("[a-zA-Z]");if(expToMatch.test(firstDigit))console.log("firstdigit is alphabet"),$("#card-number-single").val("");else if(expToMatch.test(cardNumberIP))console.log("alphabet has been typed"),console.log("cardNumberIP length= ",cardNumberIP.length),cardNumberIP=cardNumberIP.slice(0,cardNumberIP.length-1),$("#card-number-single").val(cardNumberIP);else{if(console.log("digit has been typed"),cardNumberIP&&3===firstDigit&&5!==secondDigit&&isNavigaionKeys(kc))console.log("amex"),isAmexCard=!0,$("#cvvTooltipGeneric").css("display","none"),$("#cvvTooltipNonAmex").css("display","none"),$("#cvvTooltipAmex").css("display","block"),$("#cvv-number").attr("placeholder","XXXX"),$("#card-number-single").attr("maxlength","17"),$("#card-number-single").attr("minlength","17"),$("#cvv-number").attr("maxlength","4"),$("#cvv-number").attr("minlength","4"),$("#cvv-number").css(viewport.width<768?{width:"44px"}:{width:"34px"}),formatAndVerifyAmex(cardNumberIP);else if(cardNumberIP&&3===firstDigit&&5===secondDigit&&isNavigaionKeys(kc)){if(isAmexCard=!1,cardNumberIP.length>16&&cardNumberIP.length<19)return void setStyleError();console.log("Rupay JCB &","isAmexCard = "+isAmexCard),$("#cvvTooltipGeneric").css("display","none"),$("#cvvTooltipNonAmex").css("display","block"),$("#cvvTooltipAmex").css("display","none"),$("#cvv-number").attr("placeholder","XXX"),$("#card-number-single").attr("maxlength","19"),$("#card-number-single").attr("minlength","19"),$("#cvv-number").attr("maxlength","3"),$("#cvv-number").attr("minlength","3"),$("#cvv-number").css(viewport.width<768?{width:"40px"}:{width:"30px"}),formatAndVerifyNonAmex(cardNumberIP)}else cardNumberIP&&3!==firstDigit&&isNavigaionKeys(kc)?(isAmexCard=!1,$("#cvvTooltipGeneric").css("display","none"),$("#cvvTooltipNonAmex").css("display","block"),$("#cvvTooltipAmex").css("display","none"),$("#cvv-number").attr("placeholder","XXX"),$("#card-number-single").attr("maxlength","19"),$("#card-number-single").attr("minlength","19"),$("#cvv-number").attr("maxlength","3"),$("#cvv-number").attr("minlength","3"),$("#cvv-number").css(viewport.width<768?{width:"40px"}:{width:"30px"}),formatAndVerifyNonAmex(cardNumberIP)):3!==firstDigit?formatNonAmexWhileDelete(cardNumberIP):3===firstDigit&&5===secondDigit?formatAmexWhileDelete(cardNumberIP):3===firstDigit&&5===secondDigit&&formatNonAmexWhileDelete(cardNumberIP);cardNumberIP_Prev=$("#card-number-single").val()}}),$(".validate-form #card-number-single, .validate-form #cvv-number, .validate-form #dob").on("blur",function(){checkAuthFormValidity()}),$(".validate-form #cvv-number").on("blur",function(){checkAmexCvvFormat()});var isAmexInitially,isNonAmexInitially;$(".validate-form #card-number-single").on("change",function(){var cardNumber=$(this).val(),firstDigit=cardNumber.charAt(0),secondDigit=cardNumber.charAt(1);3===firstDigit&&5!==secondDigit?isAmexInitially=!0:isNonAmexInitially=!0,isAmexInitially&&isNonAmexInitially&&($(".validate-form #cvv-number").val(""),3===firstDigit&&5!==secondDigit?(isAmexInitially=!0,isNonAmexInitially=!1):(isNonAmexInitially=!0,isAmexInitially=!1))});var isPasswordStrong=!1,isPasswordsMatch=!1,currentCard,recommendedCard;$(function(){initCalulator(),$(".card-upgrade-benefits").click(function(){var currId=$(this).find("a").attr("href");currentCard=$(currId).find(".currentCard").attr("data-cardtype"),recommendedCard=$(currId).find(".recommendedCard").attr("data-cardtype")})}),$(function(){var accordion=($("body"),$(".side-menu > li > a")),html=$("html");accordion.click(function(e){console.log("onClickPathSr ="+ctxPathStr);var href=$(this).attr("data-href");href==ctxPathStr&&(e.preventDefault(),$(this).parent("li").toggleClass("active"),$(this).parent("li").siblings("li").hasClass("active")&&$(this).parent("li").siblings("li").removeClass("active"))});$(".styled-checkbox").wrap('<label class="fancy-checkbox"></label>').after("<span class='check-toggle'></span>"),$(".login-page .fancy-checkbox input#virtual").after("<span class='check-toggle'></span>"),$(".rewards-container.desktop-only.hide").exists()||$(".styled-radio").wrap('<label class="fancy-radio"></label>').after("<span class='radio-toggle'></span>"),$(".hover-tip").parent().addClass("has-tooltip"),(html.hasClass("desktop")||html.hasClass("mobile")||html.hasClass("ios")||html.hasClass("iphone")||html.hasClass("portrait")||html.hasClass("webkit")||html.hasClass("safari")||html.hasClass("safari9"))&&($("select.fancy").exists()&&$("select.fancy").fancySelect(),$("input.date-field").exists()&&$("input.date-field").attr("type","text").datepicker({dateFormat:"dd-M-yy",changeMonth:!0,changeYear:!0,onSelect:function(){var validator=$(this).closest("form").validate();validator.element($(this))}})),$(".tab-wrap").each(function(){var tabMenu=$(this).find(".tab-menu > li").length;$(this).find(".tab-menu").addClass("tabcount-"+tabMenu),$(this).find(".tab-item").not(".active").hide();var tabTrigger=$(this).find(".tab-menu > li > a");$(tabTrigger).bind("click",function(e){e.preventDefault(),$(this).parents("li").siblings("li.active").removeClass("active"),$(this).parent("li").addClass("active");var active=$(this).attr("data-id");$(this).parents(".tab-wrap").find(".tab-item.active").removeClass("active").hide(),$(this).parents(".tab-wrap").find("#"+active).addClass("active").fadeIn()})}),$(document).off().click(function(){$(".dd-options.open").exists()&&$(".dd-options.open").removeClass("open")}),$(".fancy-dd").each(function(){var fancyTrigger=$(this).find("span.selected"),selectedVal=($(this).find(".dd-options li"),$(this).find("input:checked").attr("data-val")),selectedId=$(this).find("input:checked").attr("data-id");fancyTrigger.bind("click",function(e){e.stopPropagation(),$(this).siblings("ul.dd-options").toggleClass("open")}),$(this).find("span.selected").text(selectedVal),$(this).find("span.selected").attr("data-value",selectedId),$(this).children("ul.dd-options li label").click(function(){$(this).parents("ul.dd-options").removeClass("open")})}),$(".dd-options li").click(function(){$(this).find("input").prop("checked",!0).trigger("change")}),$(".dd-options li input").each(function(){$(this).is(":checked")&&$(this).parent("span").parent("li").addClass("selected-option"),$(this).change(function(){$(this).closest(".bt-calc-dialog").length>0||($(this).prop("checked")?($(this).parents("li.option").addClass("selected-option"),$(this).parents("li.option").siblings("li.option").removeClass("selected-option")):$(this).parent("span").parent("label").parent("li").removeClass("selected-option"),$(this).parents("ul.dd-options").removeClass("open"),$(this).parents(".dd-options").siblings("span.selected").text($(this).attr("data-val")),$(this).parents(".dd-options").siblings("span.selected").attr("data-value",$(this).attr("data-id")))})});var sliderint=function(num){$("#reward-slider"+num).slick({slidesToShow:1,slidesToScroll:1,arrows:!1,fade:!0,infinite:!1,asNavFor:"#gallery-"+num}),$("#gallery-"+num).slick({slidesToShow:3,slidesToScroll:1,asNavFor:"#reward-slider"+num,dots:!1,focusOnSelect:!0,infinite:!1})};!$("html").hasClass("mobile")&&$(".rewards").exists()&&sliderint(1),$(".fancy-checkbox input").change(function(){$(this).parent("label.fancy-checkbox").toggleClass("checked")}),$(".offers-container ul .fancy-checkbox input").change(function(){$(this).parent("label.fancy-checkbox").hasClass("checked")?$(this).parent("label.fancy-checkbox").parent().addClass("active"):$(this).parent("label.fancy-checkbox").parent().removeClass("active")}),$(".hero-slider").slick({dots:!0,infinite:!1,speed:1500,autoplay:!0,slidesToShow:1,slidesToScroll:1,arrows:!1,accessibility:!1,onInit:function(){$(".hero-slider").find(".slick-slide").each(function(){var thisObj=$(this).find("img");$("html").hasClass("mobile")?thisObj.attr("src",thisObj.data("mobile-src")):$("html").hasClass("tablet")?thisObj.attr("src",thisObj.data("tab-src")):thisObj.attr("src",thisObj.data("desktop-src"))})}}),$("ul.toggle-tab-menu li").click(function(e){e.preventDefault();var _this=this;"sa-grid-view"==_this.id?($("section#sa-graph-detail").addClass("hide-content"),$("section#sa-grid-detail").removeClass("hide-content")):($("section#sa-grid-detail").addClass("hide-content"),$("section#sa-graph-detail").removeClass("hide-content")),$("ul.toggle-tab-menu li").hasClass("active"),$("ul.toggle-tab-menu li").removeClass("active"),$(_this).addClass("active")}),$(document).on("click",".track-service table tr td span.arrow-upDown",function(e){var _this=$(this),parentTr=_this.parents("tr"),tr=parentTr.next(),trClassNm="special-offer",trNewClassNm="special-offer-show",addUpArrowClass="arrow-upDown-up";tr.hasClass(trNewClassNm)?(tr.removeClass(trNewClassNm),e.target.classList.remove(addUpArrowClass),tr.addClass(trClassNm)):(tr.removeClass(trClassNm),tr.addClass(trNewClassNm),e.target.classList.add(addUpArrowClass)),e.preventDefault()}),$(".button-wrap").on("click",function(){$(this).toggleClass("button-active")}),$(".slide-open").click(function(e){$(this).parent().next().toggleClass("hide"),$(this).toggleClass("upside-arrow"),e.preventDefault()}),$(".alert-wrap-content .tab-item .edit-button").on("click",function(e){e.preventDefault();var $tabItem=$(this).parents(".tab-item");$tabItem.toggleClass("editable")}),$(document).ready(function(){$('input[name="cardforkyc"]').on("click",function(){0!=$(this).val()?($("#addonaddress").show(),$(".p-card").hide(),$(".addon-card").show()):($("#addonaddress").hide(),$(".p-card").show(),$(".addon-card").hide())}),$(".radio-wrap-lg").click(function(){$(".radio-wrap-lg").removeClass("active"),$(this).addClass("active")})}),$(".kycrenewal-file-upload").bind("change",function(){console.log("kycrenewal-file-upload"),$(this).parent(".file-upload-wrapper").attr("data-text",$(this).val().replace(/.*(\/|\\)/,""));var fileValue=$("#new-upload-photo .docupload-block .file-upload-field:visible"),splitData=$(this).val().split(".").pop().toLowerCase();console.log("splitData "+splitData),kycAcceptableFileFormats=["pdf","jpg","jpeg","tiff","tif","gif"],console.log("Here is the accepted format of file",kycAcceptableFileFormats),"pdf"==splitData||"jpg"==splitData||"jpeg"==splitData||"tiff"==splitData||"tif"==splitData||"gif"==splitData?(console.log("enter kycrenewalphotoSubmissionForModify"),uploadCall=!0):uploadCall=!1,console.log("fileValue----",fileValue),console.log("Value of upload call",uploadCall)}),$(".uploadDoFile").bind("change",function(){kycAcceptableFileFormats=["pdf","jpg","jpeg","tiff","png","tif","gif"],uploadCall=!0,console.log("Here is the accepted format of file",kycAcceptableFileFormats)}),$(".kyc-browse-button").on("click",function(){$(this).siblings(".kyc-file-field").click()}),$(".kyc-file-field").on("change",function(e){if(uploadCall===!0&&kycrenewalphotoSubmissionForModify(e.target),null!=$(this).val()||" "!=$(this).val())if(console.log("not empty"),$(this).closest(".kyc-upload-block").siblings(".KYC-file-valid").addClass("hidden"),$(this).closest(".kyc-upload-block").siblings(".kyc-file-error").css("display","none").find(".kyc-format-error").css("display","block").siblings(".kyc-fileSize-error").css("display","none"),$(".kyc-upload-proceed-btn").addClass("gray-btn pointer-none"),$(this).closest(".lable-contact-block").siblings(".KYC-file-error").css("display","none").find(".KYC-format-error").css({display:"none",visibility:"visible"}).siblings(".KYC-fileSize-error").css("display","none"),$(this).closest(".lable-contact-block").siblings(".KYC-file-valid").css("display","none").find(".KYC-success-upload").css({display:"none",visibility:"visible"}),$(this).val().length>0){var fileName=$(this).val().split("\\").pop(),fileExt=$(this).val().split(".").pop().toLowerCase(),selectedPOA=$("#kycRenewalPOADocumentDropdown :selected").text(),selectedPOI=$("#kycRenewalPOIDocumentDropdown :selected").text();console.log("condition----",""!=selectedPOA&&null!=selectedPOA||""!=selectedPOI&&null!=selectedPOI),(""!=selectedPOA&&null!=selectedPOA&&"Select"!=selectedPOA&&"undefined"!=selectedPOA||""!=selectedPOI&&null!=selectedPOI&&"Select"!=selectedPOI&&"undefined"!=selectedPOI)&&(console.log("inside if condition"),validateKYCRenewalDocumentFields($(this)[0].files[0],$(this).val(),fileName),$("#kycRenewalPOI_consentt_check_box").prop("checked",!1));var file=$(this)[0].files[0],fileSize=file.size/1048576;$(this).siblings(".kyc-file-name").val($(this).val()),console.log("fileExtPIN",fileExt),""!=selectedPOA&&null!=selectedPOA&&"Select"!=selectedPOA&&"undefined"!=selectedPOA||""!=selectedPOI&&null!=selectedPOI&&"Select"!=selectedPOI&&"undefined"!=selectedPOI?(-1==$.inArray(fileExt,kycAcceptableFileFormats)&&(console.log("kycAcceptableFileFormats"),$(this).closest(".kyc-upload-block").addClass("invalid-kyc-field"),$(this).closest(".kyc-upload-block").siblings(".proceed-kyc-file-error").css("display","block"),$(this).closest(".kyc-upload-block").siblings(".proceed-KYC-file-invalid").addClass("hidden"),$(this).closest(".kyc-upload-block").siblings(".kyc-field-error").css("display","inline-block"),$(this).closest(".kyc-upload-block").siblings(".KYC-file-error").css("display","block").find(".KYC-format-error").css("display","block"),$(this).closest(".lable-contact-block").siblings(".KYC-file-error").css("display","block").find(".KYC-format-error").css({display:"block",visibility:"visible"})),fileSize>5?(console.log("!AcceptableFileUpload"),ResetFileSizeError(),$(this).closest(".kyc-upload-block").siblings(".proceed-KYC-file-invalid").addClass("hidden"),$(this).closest(".kyc-upload-block").siblings(".proceed-kyc-file-error").css("display","block"),$(this).closest(".kyc-upload-block").addClass("invalid-kyc-field"),$(this).closest(".kyc-upload-block").siblings(".kyc-field-error").css("display","inline-block"),$(this).closest(".kyc-upload-block").siblings(".KYC-file-error").css("display","block").find(".KYC-fileSize-error").css("display","block"),$(this).closest(".lable-contact-block").siblings(".KYC-file-error").css("display","block").find(".KYC-fileSize-error").css({display:"block",visibility:"visible"})):(console.log("AcceptableFileUpload else"),ResetFileSizeError(),$(this).closest(".kyc-upload-block").removeClass("invalid-kyc-field"),$(this).closest(".kyc-upload-block").siblings(".KYC-file-valid").removeClass("hidden"),$(this).closest(".kyc-upload-block").siblings(".kyc-field-error").css("display","none"),$(this).closest(".kyc-upload-block").siblings(".kyc-file-error").css("display","none").find(".kyc-format-error").css("display","block").siblings(".kyc-fileSize-error").css("display","none"),$("#ucic-kyc").addClass("hidden"),$("#kyc-submit-button").removeAttr("disabled"),$(this).closest(".lable-contact-block").siblings(".KYC-file-valid").css("display","block").find(".KYC-success-upload").css({display:"block",visibility:"visible"}),(""!=selectedPOA&&null!=selectedPOA&&"Select"!=selectedPOA&&"undefined"!=selectedPOA||""!=selectedPOI&&null!=selectedPOI&&"Select"!=selectedPOI&&"undefined"!=selectedPOI)&&$(this).closest(".lable-contact-block").siblings(".KYC-file-valid").removeClass("hidden"))):-1==$.inArray(fileExt,kycAcceptableFileFormats)?(console.log("kycAcceptableFileFormats"),$(this).closest(".kyc-upload-block").addClass("invalid-kyc-field"),$(this).closest(".kyc-upload-block").siblings(".proceed-kyc-file-error").css("display","block"),$(this).closest(".kyc-upload-block").siblings(".proceed-KYC-file-invalid").addClass("hidden"),$(this).closest(".kyc-upload-block").siblings(".kyc-field-error").css("display","inline-block"),$(this).closest(".kyc-upload-block").siblings(".KYC-file-error").css("display","block").find(".KYC-format-error").css("display","block"),$(this).closest(".lable-contact-block").siblings(".KYC-file-error").css("display","block").find(".KYC-format-error").css({display:"block",visibility:"visible"})):fileSize>5?(console.log("!AcceptableFileUpload"),ResetFileSizeError(),$(this).closest(".kyc-upload-block").siblings(".proceed-KYC-file-invalid").addClass("hidden"),$(this).closest(".kyc-upload-block").siblings(".proceed-kyc-file-error").css("display","block"),$(this).closest(".kyc-upload-block").addClass("invalid-kyc-field"),$(this).closest(".kyc-upload-block").siblings(".kyc-field-error").css("display","inline-block"),$(this).closest(".kyc-upload-block").siblings(".KYC-file-error").css("display","block").find(".KYC-fileSize-error").css("display","block"),$(this).closest(".lable-contact-block").siblings(".KYC-file-error").css("display","block").find(".KYC-fileSize-error").css({display:"block",visibility:"visible"})):(console.log("AcceptableFileUpload else"),ResetFileSizeError(),$(this).closest(".kyc-upload-block").removeClass("invalid-kyc-field"),$(this).closest(".kyc-upload-block").siblings(".KYC-file-valid").removeClass("hidden"),$(this).closest(".kyc-upload-block").siblings(".kyc-field-error").css("display","none"),$(this).closest(".kyc-upload-block").siblings(".kyc-file-error").css("display","none").find(".kyc-format-error").css("display","block").siblings(".kyc-fileSize-error").css("display","none"),$("#ucic-kyc").addClass("hidden"),$("#kyc-submit-button").removeAttr("disabled"),$(this).closest(".lable-contact-block").siblings(".KYC-file-valid").css("display","block").find(".KYC-success-upload").css({display:"block",visibility:"visible"}),(""!=selectedPOA&&null!=selectedPOA&&"Select"!=selectedPOA&&"undefined"!=selectedPOA||""!=selectedPOI&&null!=selectedPOI&&"Select"!=selectedPOI&&"undefined"!=selectedPOI)&&$(this).closest(".lable-contact-block").siblings(".KYC-file-valid").removeClass("hidden")),($(".poiKYCrenewal .KYC-file-error").is(":visible")||$(".poiKYCrenewal .KYC-format-error").is(":visible")||$(".poiKYCrenewal .KYC-fileSize-error").is(":visible"))&&($(".poiKYCrenewal .KYC-file-valid").addClass("hidden"),console.log("Successmessage hidden poi"),kycRenewalDocUploadValidation=!1),($(".poaKYCrenewal .KYC-file-error").is(":visible")||$(".poaKYCrenewal .KYC-format-error").is(":visible")||$(".poaKYCrenewal .KYC-fileSize-error").is(":visible"))&&($(".poaKYCrenewal .KYC-file-valid").addClass("hidden"),console.log("Successmessage hidden poa"),kycRenewalDocUploadValidation=!1),$(this).siblings(".kyc-browse-button").removeClass("kyc-btn").addClass("kyc-chng-file").text("");var fileNameWidth=$(this).closest(".kyc-upload-block").width()-$(this).siblings(".kyc-browse-button").width()-40;$(this).siblings(".kyc-file-name").css("width",fileNameWidth),$(this).siblings('input[type="hidden"]').attr("value",fileName)}else console.log("else"),kycRenewalDocUploadValidation=!1,$("#modifyaddressChange_Check").prop("checked",!1),$("#kyc-renewal-main .doc-upload-proceed-btn").addClass("gray-btn pointer-none"),$("#kycRenewalPOI_consentt_check_box").prop("checked",!1),AcceptableFileUpload()&&ResetFileSizeError(),$(this).siblings(".kyc-file-name").val("").closest(".kyc-upload-block").removeClass("invalid-kyc-field").siblings(".kyc-field-error").css("display","none").siblings(".kyc-file-error").css("display","none").find(".kyc-format-error").css("display","none").siblings(".kyc-fileSize-error").css("display","none");$("#kyc-upload-form :input[type=file]").each(function(){console.log("----514"),$(this).val().length>0&&$(this)[0].files[0].size>=fileSizeLimitation()&&-1!=$.inArray($(this).val().split(".").pop().toLowerCase(),kycAcceptableFileFormats)&&(console.log("----517"),ResetFileSizeError(),$(this).closest(".kyc-upload-block").addClass("invalid-kyc-field").siblings(".kyc-field-error").css("display","inline-block").siblings(".kyc-file-error").css("visibility","visible").find(".kyc-fileSize-error").css("display","block"))}),isKYCSubmitAllowed()?$("#kyc-submit-button").is(":disabled")||($("#kyc-upload-form").exists()?(console.log("kyc sub enable"),0==$("#kyc-upload-form #ucic-kyc").length&&$(".info-text.kycaddr-update-consent-box").css("pointer-events","auto")):$("#kyc-submit-button").removeClass("secondary kyc-inactive-button").addClass("primary")):(console.log("kyc sub disable"),$("#kyc-submit-button").addClass("secondary kyc-inactive-button").removeClass("primary"))}),$("input[type=radio][name=kycAddrSelection]").change(function(){var selectedAddr=null;selectedAddr=$(this).is(":checked")?$(this).prop("value"):$(this).closest(".fancy-radio").siblings(".fancy-radio").find("input[type=radio]").prop("value"),$(this).closest(".fancy-radio").siblings("input[type=hidden]").attr("value",selectedAddr)}),$('.kyc-block :input[type="text"]').on("keypress keydown keyup",function(e){-1==$.inArray(e.which,[37,39])&&event.preventDefault()}),$("form#kyc-upload-form").on("keyup keypress",function(e){var keyCode=e.keyCode||e.which;return 13===keyCode?(e.preventDefault(),!1):!0}),$("a.kyc-supp-link").on("click",function(e){e.preventDefault(),openModalPopup("kyc-popup"),$("#kyc-popup .modal").css("top","5%"),$("#kyc-popup .modal").scrollTop(0),viewport.width<=1024&&($("#kyc-popup").css("margin-top","0px"),$("#kyc-popup .modal").css("margin-top","0px"));var modalInnerHeight=$("#kyc-popup").find(".kyc-modal").height()-$("#kyc-popup").find(".button-wrap").height();modalInnerHeight-=$(window).width()>767?120:60,$("#kyc-popup").find(".modal-wrap").css("height",modalInnerHeight),$("#kyc-popup").find(".modal-wrap").scrollTop(0)}),$("#kyc-popup .button-cancel").on("click",function(e){e.preventDefault(),$(".modal-overlay").removeClass("open")}),keepC2BSessionActive(),$(document).on("click",function(){keepC2BSessionActive()}),$("#addon-popup .button-cancel").on("click",function(e){e.preventDefault(),$(".modal-overlay").removeClass("open")}),$("#msw-otp-submit").on("click",function(){$(".msw-otp-msg").hide()});var responseData={application:"SBICard",module:"Registration",completed:!0,HSToken:$("#hs_token").val()};$("#msw_completion_status").val()&&window.top.postMessage(responseData,"*"),$(document).on("submit","#msw-login-form",function(){var passphrase=document.getElementById("passphase").value,password=$("#mswPassword").val(),salt=CryptoJS.lib.WordArray.random(16),iv=CryptoJS.lib.WordArray.random(16),key=CryptoJS.PBKDF2(passphrase,salt,{keySize:4,iterations:100}),encrypted=CryptoJS.AES.encrypt(password,key,{iv:iv,mode:CryptoJS.mode.CBC,padding:CryptoJS.pad.Pkcs7}),passwordpassed=salt+iv;if(passwordpassed+=encrypted,$("#mswPassword").val(passwordpassed),$(".msw-login-conatiner.cards_container").exists())if($("#mswUserName").val()&&$("#mswPassword").val()){var mswLoader='<div class="msw-jrny-overlay-loader"><div class="loader"></div></div>';$("body").append(mswLoader)}else $("body").find("div.msw-jrny-overlay-loader").remove(),event.preventDefault();else $("#mswUserName").val()&&$("#mswPassword").val()?addOverlay():event.preventDefault()}),$("#validate-card-button").on("click",function(){})});var digiLockerJourney=!1,modifyOtherFields=!1,onlyAddressLineCaseChanged=!1,addressLineOneChanged=!1,addressLineTwoChanged=!1,onlyRenewalAddressLineCaseChange=!1,kycAcceptableFileFormats=["pdf","jpg","jpeg","tiff","tif","png","gif"],webformAcceptableFileFormats=["pdf","jpg","jpeg","tiff","tif","png","gif"],campaignLogOutTimer=null,keppSessionActive=null;if($('form[name="logoutForm"]').exists(),$(".app-widget").exists()){$.validator.addMethod("noStartWith0or1",function(value){return 9==value[0]||8==value[0]||7==value[0]?!0:!1}),$(".app-widget .send-link-to-phone").click(function(e){e.preventDefault(),$("#appdownload").toggleClass("hide"),$(".app-widget .responseMsg").addClass("hide")});var successValue=getParameterByName("successAD");if(""!=successValue&&"undefined"!=successValue&&alert("true"==successValue||1==successValue?"The download link for SBI Card Mobile App has been sent on your mobile number.":"Sorry, we could not send you the download link for SBI Card Mobile App on the mobile number that you have provided. Please check your number or try again later."),$("#appdownload").exists())try{$("#appdownload").validate({onkeyup:!1,focusInvalid:!0,rules:{toNumber:{required:!0,minlength:10,noStartWith0or1:!0}},messages:{toNumber:{required:"",minlength:"",noStartWith0or1:""}},errorPlacement:function($error,$element){$error.insertAfter($element)},success:function(){validClass="valid"},highlight:function(element,errorClass,validClass){$(element).addClass(errorClass).removeClass(validClass)},unhighlight:function(element,errorClass,validClass){$(element).removeClass(errorClass).addClass(validClass),$(element).next("label").addClass(validClass)},submitHandler:function(){var formData=$("#appdownload").serialize(),dataHref=$("#appdownload").attr("action");$.ajax({url:dataHref,type:"POST",data:formData,success:function(data){try{"true"==data?(alert(appStoreMessages.successMsg),location.reload()):(alert(appStoreMessages.failMsg),location.reload())}catch(e){}},error:function(){}})}})}catch(e){}}$(document).ready(function(){if($("#cli-result-data").val()){var cliFiles=JSON.parse($("#cli-result-data").val());200!==parseInt(cliFiles.FileUploadResponse.finalScanStatus)&&$("#cli-failure-message").show(),cliFiles.FileUploadResponse.fileScanDetailsVOList&&cliFiles.FileUploadResponse.fileScanDetailsVOList.forEach(function(i){200!==parseInt(cliFiles.FileUploadResponse.finalScanStatus)?($(".cli-upload-container").css("display","block"),$(".cli-success-page").css("display","none"),$("#cli-result-table").append('<tr><td valign="top" class="cli-failed-upload-icon"></td><td valign="top">'+i.fileName+'</td><td valign="top">('+i.statusInterpretation+")</td></tr>")):$(".cli-success-page").css("display","block")
})}}),$(document).ready(function(){$("#etihad-upgrade-button").attr("disabled",!0),$(".etihad-agree-check").click(function(){1==$(this).prop("checked")?($("#etihad-upgrade-button").attr("disabled",!1),$("#etihad-upgrade-button").addClass("primary").removeClass("secondary")):0==$(this).prop("checked")&&($("#etihad-upgrade-button").attr("disabled",!0),$("#etihad-upgrade-button").addClass("secondary").removeClass("primary"))})}),$("#etihad-upgrade-button").on("click",function(){var loaderHtml='<div class="overlay-loader"></div>';$("body").append(loaderHtml)}),$("document").ready(function(){$("#fraud-fancy-checkbox").on("change",function(){$("#checkbox-value").exists()&&$("#checkbox-value").remove();var checkedCheckbox;checkedCheckbox=$("#fraud-fancy-checkbox").hasClass("checked")?'<input type="hidden" name="checkboxValue" id="checkbox-value" value="yes">':'<input type="hidden" name="checkboxValue" id="checkbox-value" value="no">',$("#fraudulent-form").append(checkedCheckbox)}),$("#cancelFraudLoginButton, #fraudCloseButton").on("click",function(){$("#fraud-otp").css("border",".8px solid #ddd"),event.preventDefault(),AddOverlayLoader(),window.location.href=document.URL.indexOf("/app")>0?"/creditcards/app/user/loggedout":"/creditcards/b2b/user/loggedout"}),$("#fraud-alert-close").on("click",function(){$(".fraud-success-alert").remove()}),$(document).mouseup(function(e){0===$(e.target).closest(".fraud-success-alert").length&&$(".fraud-success-alert").remove()})}),$(document).ready(function(){$(".password.checkstrength.password_check").mouseenter("hover",function(){$("#first-time-userId").css("display","none"),$("#first-time-userId").prop("display","none")}).mouseleave(function(){$("#first-time-userId").css("display","block"),$("#first-time-userId").prop("display","block")});var userAgentString=navigator.userAgent,IExplorerAgent=userAgentString.indexOf("MSIE")>-1||userAgentString.indexOf("rv:")>-1;console.log("IExplorerAgent"+IExplorerAgent),wid=$(window).width(),IExplorerAgent&&wid>768&&$(".activate-card .benefitCont").css("margin-right","75px"),$(".register-container.prelogin-instacard-register-container").on("mouseover mousedown mouseup click",function(){cardno4=$("#card-number-4").hasClass("error"),cardno4&&($("#card-number-4").siblings("label").addClass("error"),$("#card-number-4").siblings("label").removeClass("valid"),console.log("job done"))}),$("body").on("mouseover mousedown mouseup click",function(){$("#card-number-4").hasClass("error")&&$("#card-number-4").next("label").removeClass("valid")})}),$(document).ready(function(){$(".priority-pass-content-vistrabx1 #WAterms").on("change",function(){var button=$("#WAconfirmButton");$(this).hasClass("checked")?(button.css("background-color","rgb(0, 149, 217)"),button.css("color","rgb(255, 255, 255)"),button.css("pointer-events","auto")):(button.css("background-color","rgb(224, 224, 224)"),button.css("color","rgb(102, 102, 102)"),button.css("pointer-events","none"))}),$("#WAconfirmButton").on("click",function(){$.ajax({type:"GET",beforeSend:function(){var loaderHtml='<div class="overlay-loader"></div>';$("body").append(loaderHtml)},complete:function(){$("body").find("div.overlay-loader").remove()},success:function(){},error:function(){}})}),$(".wtsp-main-content label.fancy-checkbox").on("change",function(){$(".wtsp-main-content label.fancy-checkbox").hasClass("checked")?$("#sub-unsub-button").removeClass("disabled"):$("#sub-unsub-button").addClass("disabled")})}),$(document).ready(function(){"track-service-request"==$("#active-journey").val()?$("#microportalTrackSr").addClass("activeHeaderLink"):"clear-dues"==$("#active-journey").val()?$(".payment-mob-link").addClass("activeHeaderLink"):"OPT_IN"==$("#active-journey").val()&&$("#microportalOptIn").addClass("activeHeaderLink"),$("#balCon-interest-options").on("click",function(){$(".intrest-option-container").toggle(),wid=$(window).width(),wid>767?(display=$("hr.width-97").css("display"),0==display.localeCompare("block")?$("hr.width-97").css("display","none"):$("hr.width-97").css("display","block"),margin=$("#offerConfirmBtn").css("margin-top"),0==margin.localeCompare("30px")?$("#offerConfirmBtn").css("margin-top","10px"):$("#offerConfirmBtn").css("margin-top","30px")):$("hr.width-97").css("display","none")}),"Y"==$("#madFulfilmentFlag").val()?($(".radio-view.deactivated").css("top","100px"),$(".balcon-offer-section .radio-view.deactivated .row.m-0 .col-md-3").css("pointer-events","auto"),$("#payToActivateOffer").hide(),$("#payToActivateOfferMob").hide(),$("#offerConfirmBtn").show(),$("#offerConfirmBtnMob").show()):($(".radio-view.deactivated").css("top","75px"),$(".balcon-offer-section .radio-view.deactivated .row.m-0 .col-md-3").css("pointer-events","none"),$("#payToActivateOffer").show(),$("#payToActivateOfferMob").show(),$("#offerConfirmBtn").hide(),$("#offerConfirmBtnMob").hide()),$(".balcon-offer-section .radio-view.deactivated .row.m-0 .col-md-3").on("click",function(){$(".balcon-offer-section .radio-view.deactivated .row.m-0 .col-md-3.selectedBookingAmt").css("border-color","#ccc"),$(".balcon-offer-section .radio-view.deactivated .row.m-0 .col-md-3.selectedBookingAmt").find(".icon.radio-check").html(""),$(".balcon-offer-section .radio-view.deactivated .row.m-0 .col-md-3.selectedBookingAmt").find(".icon.radio-check").css("border-color","#dadada"),$(".balcon-offer-section .radio-view.deactivated .row.m-0 .col-md-3.selectedBookingAmt").find("span").css("color","#8a8a96"),$(".balcon-offer-section .radio-view.deactivated .row.m-0 .col-md-3").removeClass("selectedBookingAmt"),$(this).addClass("selectedBookingAmt"),$(this).find(".icon.radio-check").html("&#10004;"),$(this).find(".icon.radio-check").css({"border-color":"#00b1f2",color:"#00b1f2"}),$(this).css({"border-color":"#00b1f2"}),$(this).find(".checkmark").find("span").css("color","#00b1f2"),$("#offerConfirmBtn").css({background:"#00b1f2","pointer-events":"auto"})}),$("#initial-grid-block-mob .styled-radio, #dynamic-grid-block-mob .styled-radio").on("click",function(){$("#initial-grid-block-mob .col-md-12").removeClass("selectedBookingAmt"),$(this).parent().parent().parent().parent().parent().addClass("selectedBookingAmt")}),$("#payToActivateOffer, #payToActivateOfferMob").on("click",function(){var paynowTxt='<div class="static-txt">Your payment is being processed, and will reflect as â€˜Last Payment Amountâ€™ and â€˜Last Payment Dateâ€™ shortly.</div><div class="static-info"><span>Note: Total Amount Due will still be the same as it is as per the last statement date. Adjustments will reflect post generation of next statement.</span></div>';$("#microportal-customer-level-section").html(""),$("#microportal-customer-level-section").html(paynowTxt);var downPaymentAmount=$("#downPaymentAmount").val();$("#payToActivateOffer").css("pointer-events","none"),$("#payToActivateOffer a").css("pointer-events","none"),$("#payToActivateOffer").css("background-color","#dadada"),$("#payToActivateOfferMob").css("pointer-events","none"),$("#payToActivateOfferMob a").css("pointer-events","none"),$("#payToActivateOfferMob").css("background-color","#dadada");var payAmt=$(".addAmt-price-range").val(),payFlag=$(this).attr("payflag");payFlag=downPaymentAmount==payAmt?"M":"A";var syncToken=$("#synchronizerTokenMicroDashboard").val(),href="/creditcards/micro/cleardues/balcon/paynow-micro";$.ajax({url:href,type:"GET",data:{payAmt:payAmt,payFlag:payFlag},overlayTarget:$(".main"),headers:{synchronizerToken:syncToken},success:function(data){var processDiv="";if($("#isOfferActivatedBtn").show(),$("#isOfferActivatedBtnMob").show(),null!=data&&""!=data)var processDiv='<form action="'+data[0].paynetUrl+'" target="_blank" method="POST" name="payNetForm" style="margin-bottom:0px;"><input type="hidden" name="msg" id="msg" value="'+data[0].message+'"/><a href="#" class="button primary button-clickToProceed" onClick="payNetForm.submit();setAnalyticsPost(\'Proceed\');closeModalPopup($(this));">Proceed</a><a href="javascript:void(0);" class="button primary button-cancel" id="paynetCancelBtn" onClick="setAnalyticsPost(\'Cancel\');closeModalPopup($(this));">Cancel</a></form>';0==$(".button-clickToProceed").length&&$("#appendPayNowForm").append(processDiv),$(".button.primary.button-clickToProceed").on("click",function(){$("#appendPayNowForm form").remove()}),$(".modal-overlay").find("div.overlay-loader").remove(),$(".button-clickToProceed").css("margin-right","5px"),viewport.width>=1024?$("#appendPayNowForm").parents().find(".open").children(".modal").css("margin-top","-267.5px"):viewport.width<767&&$("#appendPayNowForm").parents().find(".open").children(".modal").css("margin-top","0px"),$("#paynetCancelBtn").on("click",function(){$("#appendPayNowForm form").remove(),$("#payToActivateOffer, #payToActivateOfferMob").css({"pointer-events":"auto","background-color":"#00b1f2"}),$("#isOfferActivatedBtn, #isOfferActivatedBtnMob").hide()})},error:function(){}})}),$("#offerConfirmBtnMob").on("click",function(){$(this).css({"background-color":"#dadada","pointer-events":"none"});var tenure=$(".col-md-12.mob-radio-view .selectedBookingAmt").find(".checkmark").find(".label .tenure").html(),rateOfInterest=$(".col-md-12.mob-radio-view .selectedBookingAmt").find(".checkmark").find(".small-text span").html();callBalConConfirmOffer(tenure,rateOfInterest),calHeightMicro()}),$("#offerConfirmBtn").on("click",function(){$(this).css({"background-color":"#dadada","pointer-events":"none"});var tenure=$(".radio-view.deactivated .selectedBookingAmt").find(".checkmark").find(".label .tenure").html(),rateOfInterest=$(".radio-view.deactivated .selectedBookingAmt").find(".checkmark").find(".small-text span").html();callBalConConfirmOffer(tenure,rateOfInterest),calHeightMicro()}),$("#bookBalConHeader").on("click",function(){$("#showBookOfferSection").hide(),$("#successBalConSection").hide(),$("#bookBalConSection").show(),viewport.width<767?($(".balcon-main-container .microportal-collapsible.section-tab1 .main-opt.active .idea-section-mobile").show(),$(".microportal-section-wrap .show-in-desktop").hide(),$(".btn-gap.show-in-desktop").hide()):($(".balcon-main-container .microportal-collapsible.section-tab1 .main-opt.active .idea-section-mobile").hide(),$(".microportal-section-wrap .show-in-desktop").show(),$(".btn-gap.show-in-desktop").show()),$("#sucsessBalConHeader").css("pointer-events","none"),$("#sucsessBalConHeaderLabel").addClass("grey"),calHeightMicro()}),$(window).on("load",function(){$("#showBookOfferSection").hide(),viewport.width>767?$("#bookBalConSection").show():$("#bookBalConSection").hide(),$(".btn-gap.show-in-desktop").show(),$("#sucsessBalConHeader .tab3-success-offer").css({"background-color":"#f2f2fd",border:"2px solid #e0e0e0"}),$("#bookOfferHeader .tab2-other-payopt").css({"background-color":"#f2f2fd",border:"2px solid #e0e0e0"}),$("#sucsessBalConHeader").css("pointer-events","none"),$("#sucsessBalConHeaderLabel").addClass("grey"),$("#showBookOfferSectionHeader").addClass("grey"),$("#bookOfferHeader").css("pointer-events","none"),""!=$("#isEmiPaid").val()?$("#microprtal-restructure-section").find("#successBalConSection").show():$("#microprtal-restructure-section").find("#successBalConSection").hide(),"true"==$("#isEppBooked").val()||1==$("#isEppBooked").val()?$("#bal-con-main-content-box").find("#successBalConSection").show():$("#bal-con-main-content-box").find("#successBalConSection").hide(),calHeightMicro()}),$("#showBookOfferSection #book-offer").on("click",function(){if($("#check #fraud-fancy-checkbox").hasClass("checked")){var tenure=$(".selectedBookingAmt").find(".checkmark").find(".label .tenure").html(),rateOfInterest=$(".selectedBookingAmt").find(".checkmark").find(".small-text span").html();callBalConBookOffer(tenure,rateOfInterest)}}),$("#microportal-consent-checkbox").on("click",function(){submitconsent()}),$(".sticky-dash .sticky-icon").click(function(){$(".sticky-dash .sticky-icon").hasClass("righticon1")?($(".sticky-dash .sticky-icon").removeClass("righticon1"),$(".sticky-dash .sticky-icon").addClass("lefticon1"),$(".sticky-consent-links .quick-sticky-link a").css("margin-left","-183px")):$(".sticky-dash .sticky-icon").hasClass("lefticon1")&&($(".sticky-dash .sticky-icon").addClass("righticon1"),$(".sticky-dash .sticky-icon").removeClass("lefticon1"),$(".sticky-consent-links .quick-sticky-link a").css("margin-left","0px"))})});var settlementEligibility="",reinstatementEligibility="",balconEligibility="",restructEligibility="",rbiRestructEligibility="";$("#micro-paypart-btn").on("click",function(){$("#micro-paypart-block").css("display","block"),calHeightMicro()}),$(document).ready(function(){$("#check #fraud-fancy-checkbox").on("change",function(){var button=$("#book-offer");$(this).hasClass("checked")?(button.removeAttr("style"),$("#book-offer").css({"background-color":"#00b1f2","pointer-events":"auto"})):(button.attr("style","background-color:#a5a4a4 !important; font-weight: bold !important;"),$("#book-offer").css({"pointer-events":"none"}))})}),$(document).ready(function(){if($("#micro-paypart-btn").on("click",function(){logActivity("MICRO_PORTAL_PAY_CANNOT_PAY_FULL_CLICK")}),$(".microportal-content-wrapper #micro-def-grid-len").exists()){var gridLength=$(".microportal-content-wrapper #micro-def-grid-len").val();4===gridLength||"4"===gridLength?$(".balcon-offer-section #initial-grid-block .m-0").css("margin-left","0px"):3===gridLength||"3"===gridLength?$(".balcon-offer-section #initial-grid-block .m-0").css("margin-left","5.5rem"):2===gridLength||"2"===gridLength?$(".balcon-offer-section #initial-grid-block .m-0").css("margin-left","12rem"):(1===gridLength||"1"===gridLength)&&$(".balcon-offer-section #initial-grid-block .m-0").css("margin-left","17.5rem")}}),$(document).ready(function(){$(".microportal-nav-menu .account-details-nav .sub-menu .active a.micro-hor-menu span:first-child").css("border","2px solid #fff"),$(".microportal-nav-menu .account-details-nav .sub-menu div:not(.active) a.micro-hor-menu span:first-child").css("border","1px solid #fff"),$("#microprtal-settlement-section .idea-section-mobile .mob-radio-view .col-md-12 .field-view-radio-btn").on("click",function(){$("#microprtal-settlement-section .idea-section-mobile .mob-radio-view .col-md-12 .field-view-radio-btn").find(".checkmark").find("span").css("color","#8a8a96"),$("#microprtal-settlement-section .idea-section-mobile .mob-radio-view .col-md-12 .field-view-radio-btn").removeClass("selectedBookingAmt"),$(this).addClass("selectedBookingAmt"),$(this).find(".checkmark").find("span").css("color","#00b1f2"),$("#offerConfirmBtnMob, #restructureConfirmBtnMob,#settlementConfirmBtnmob").css({background:"#00b1f2","pointer-events":"auto"})}),$("#restructure-section1 .idea-section-mobile .mob-radio-view .col-md-12 .field-view-radio-btn").on("click",function(){$("#restructureConfirmBtnMob").css({background:"#00b1f2","pointer-events":"auto"})});var delinquency=$("#delinquency").val();Number(delinquency)<=1&&viewport.width<768&&$("#micro-mobile-paynow-button").css("padding","8px"),$(".micro-hor-menu").on("click",function(){setTimeout(function(){calHeightMicro()},200),setTimeout(function(){calHeightMicro()},1e3)}),$(".microportal-content-wrapper #track-service-request-grid .load-more-wrap .load-more").on("click",function(){setTimeout(function(){calHeightMicro()},200)}),$("#LoadMorePayTxnLinkDiv #loadMorePayTxnLinkId").on("click",function(){setTimeout(function(){calHeightMicro()},2e3),setTimeout(function(){calHeightMicro()},4e3),setTimeout(function(){calHeightMicro()},6e3)}),$("#search-payment-display-form .show-all-paymenthistory").on("click",function(){setTimeout(function(){calHeightMicro()},2e3),setTimeout(function(){calHeightMicro()},4e3),setTimeout(function(){calHeightMicro()},6e3)}),$("#filter-quick-tab #Go_Search_Tsr_Form_Id").on("click",function(){setTimeout(function(){calHeightMicro()},2e3),setTimeout(function(){calHeightMicro()},4e3),setTimeout(function(){calHeightMicro()},6e3)}),$("#track-service-request-grid .load-more").on("click",function(){setTimeout(function(){calHeightMicro()},200),setTimeout(function(){calHeightMicro()},2e3),setTimeout(function(){calHeightMicro()},4e3),setTimeout(function(){calHeightMicro()},6e3)}),$("#search-tsr-adv-form #Go_Search_Tsr_Adv_Form_Id").on("click",function(){setTimeout(function(){calHeightMicro()},200),setTimeout(function(){calHeightMicro()},2e3),setTimeout(function(){calHeightMicro()},4e3),setTimeout(function(){calHeightMicro()},6e3)})}),$(window).on("load",function(){setTimeout(function(){calHeightMicro()},200),setTimeout(function(){calHeightMicro()},1e3),setTimeout(function(){calHeightMicro()},2e3)}),$(document).ready(function(){$("#restructureConfirmBtn, #restructureConfirmBtnMob").css({"pointer-events":"none",background:"#dadada"}),$(".restructure-offer-section .radio-view.deactivated .row.m-0 .col-md-3").on("click",function(){$(".restructure-offer-section .radio-view.deactivated .row.m-0 .col-md-3.selectedBookingAmt").css("border-color","#ccc"),$(".restructure-offer-section .radio-view.deactivated .row.m-0 .col-md-3.selectedBookingAmt").find(".icon.radio-check").html(""),$(".restructure-offer-section .radio-view.deactivated .row.m-0 .col-md-3.selectedBookingAmt").find(".icon.radio-check").css("border-color","#dadada"),$(".restructure-offer-section .radio-view.deactivated .row.m-0 .col-md-3.selectedBookingAmt").find("span").css("color","#8a8a96"),$(".restructure-offer-section .radio-view.deactivated .row.m-0 .col-md-3").removeClass("selectedBookingAmt"),$(this).addClass("selectedBookingAmt"),$(this).find(".icon.radio-check").html("&#10004;"),$(this).find(".icon.radio-check").css({"border-color":"#00b1f2",color:"#00b1f2"}),$(this).css({"border-color":"#00b1f2"}),$(this).find(".checkmark").find("span").css("color","#00b1f2"),$("#restructureConfirmBtn").css({background:"#00b1f2","pointer-events":"auto"})}),$("#restructure-grid-block-mob .col-md-12").on("click",function(){$("#restructure-grid-block-mob .col-md-12").removeClass("selectedBookingAmt"),$(this).addClass("selectedBookingAmt")}),$("#restructureConfirmBtnMob").on("click",function(){$(this).css({"background-color":"#dadada","pointer-events":"none"});var tenure=$(".col-md-12.mob-radio-view .selectedBookingAmt").find(".checkmark").find(".label .tenure").html(),rateOfInterest=$(".col-md-12.mob-radio-view .selectedBookingAmt").find(".checkmark").find(".small-text span").html();callRestructureOffer(tenure,rateOfInterest)}),$("#restructureConfirmBtn").on("click",function(){$(this).css({"background-color":"#dadada","pointer-events":"none"});var tenure=$(".radio-view.deactivated .selectedBookingAmt").find(".checkmark").find(".label .tenure").html(),rateOfInterest=$(".radio-view.deactivated .selectedBookingAmt").find(".checkmark").find(".small-text span").html();callRestructureOffer(tenure,rateOfInterest)}),$("#book-restructure-offer").on("click",function(){var tenure=$(".selectedBookingAmt").find(".checkmark").find(".label .tenure").html(),rateOfInterest=$(".selectedBookingAmt").find(".checkmark").find(".small-text span").html();callrequestRestructureOffer(tenure,rateOfInterest)}),$("#microprtal-restructure-section #fraud-fancy-checkbox").on("change",function(){$("#check #fraud-fancy-checkbox").hasClass("checked")?($("#book-restructure-offer").css("pointer-events","auto"),$("#book-restructure-offer").css("background","#00b1f2 ")):($("#book-restructure-offer").css("pointer-events","none"),$("#book-restructure-offer").css("background","#d0cfcf"))});var paynowTxt='<div class="static-txt">Your payment is being processed, and will reflect as Last Payment Amount and Last Payment Date shortly.</div><div class="static-info"><span>Note: Total Amount Due will still be the same as it is as per the last statement date. Adjustments will reflect post generation of next statement.</span></div>';$(".button.microportal-restructure-paynow").on("click",function(e){if(e.preventDefault(),$("a.crossDomain").length>0&&$(this).attr("target","_blank"),$(".modal-overlay.disclaimer-popup").addClass("open"),viewport.width<=1024&&($(".disclaimer-popup").css("margin-top","0px"),$(".disclaimer-popup .modal").css("margin-top","0px"),$(".disclaimer-popup .modal").css("margin-left","0px"),$(".disclaimer-popup .modal").scrollTop(0)),!$(".disclaimer-popup-open").exists()&&!$("#paynow-disclaimer-cardStatement").exists()&&$("a.button-clickToProceed").length>0){var url=$(this).attr("href"),target=$(this).attr("target");$("a.button-clickToProceed").attr("href",url),""!=target&&"undefined"!=target&&$("a.button-clickToProceed").attr("target",target)}$("#microportal-customer-level-section").html(""),$("#microportal-customer-level-section").html(paynowTxt)}),$(".button.microportal-restructure-paynow").on("click",function(){var href="/creditcards/micro/cleardues/restructure/paynow-rbire",syncToken=$("#synchronizerTokenMicroDashboard").val(),monthlyEmi=$("#installmentEmi").val();$.ajax({url:href,type:"GET",data:{payAmt:monthlyEmi,payFlag:payFlag},headers:{synchronizerToken:syncToken},success:function(data){var processDiv="";if(null!=data&&""!=data)var processDiv='<form action="'+data[0].paynetUrl+'" target="_blank" method="POST" name="payNetForm" style="margin-bottom:0px;"><input type="hidden" name="msg" id="msg" value="'+data[0].message+'"/><a href="#" class="button primary button-clickToProceed" onClick="payNetForm.submit();setAnalyticsPost(\'Proceed\');closeModalPopup($(this));">Proceed</a><a href="javascript:void(0);" class="button primary button-cancel" onClick="setAnalyticsPost(\'Cancel\');closeModalPopup($(this));">Cancel</a></form>';0==$(".button-clickToProceed").length&&$("#appendPayNowForm").append(processDiv),$(".button.primary.button-clickToProceed").on("click",function(){$("#appendPayNowForm form").remove()}),$(".button-clickToProceed").css("margin-right","5px"),viewport.width>=1024?$("#appendPayNowForm").parents().find(".open").children(".modal").css("margin-top","-267.5px"):viewport.width<767&&$("#appendPayNowForm").parents().find(".open").children(".modal").css("margin-top","0px")},error:function(){}})});var payFlag;if($("#microprtal-restructure-section").exists())if(""!=$("#isEmiPaid").val())if($("#microprtal-restructure-section").find("#bookBalConSection .verify-account-details").hide(),$("#restructureConfirmBtn").hide(),$("#restructure-section1").hide(),$("#microprtal-restructure-section #restructure-section1").find(".btn-gap").css("padding","0px"),$("#microprtal-restructure-section").find("#showBookOfferSection").hide(),$("#microprtal-restructure-section").find("#successBalConSection").show(),$("#microprtal-restructure-section").find("#bookOfferHeader").css("pointer-events","none"),$("#microprtal-restructure-section").find("#bookBalConHeader").css("pointer-events","none"),$("#payemi-btn-box").hide(),payFlag="PL","true"==$("#isEmiPaid").val())$("#restructureEmiPaid").show(),$("#restructureEmiNotPaid").hide(),$("#restructureSrBooked").hide(),$("#emiPlanHeader").hide(),$("#restructurePlanHeader").hide(),$("#emiPlanHeader").empty(),$("#restructurePlanHeader").empty(),$("#restructureActivestatus").show(),$(".cong-message").css({margin:"0px auto",width:"100%"}),$("#restructure-userlevel-info").find(".static-txt").html("Restructuring Plan active"),$("#restructure-userlevel-info").find(".note-small-text").remove(),viewport.width<767&&$("#restructure-userlevel-info").css("height","4rem");else{$("#restructureEmiNotPaid").show(),$("#restructureEmiPaid").hide(),$("#restructureSrBooked").hide();var monthlyEmiToPaid=$(".restructure-emi-box").html();$("#installmentEmi").val(monthlyEmiToPaid),$("#emiPlanHeader").hide(),$("#restructureActivestatus").hide(),$("#restructureActivestatus").empty(),$("#emiPlanHeader").empty(),$("#restructurePlanHeader").show(),$("#payemi-btn-box").show(),$("#restructure-userlevel-info").find(".static-txt").html("Please enroll for NACH/Auto-Debit for ease of payment of future instalments."),$("#restructure-userlevel-info").find(".note-small-text").remove(),viewport.width<767&&$("#restructure-userlevel-info").css("height","6rem")}else $("#bookBalConSection").show(),viewport.width>767?($("#balance-conversion-container").find("#bookBalConSection .verify-account-details").show(),$("#restructureConfirmBtn").show()):($("#balance-conversion-container").find("#bookBalConSection .verify-account-details").hide(),$("#restructureConfirmBtn").hide()),$("#restructureEmiNotPaid").hide(),$("#restructureEmiPaid").hide(),$("#restructureSrBooked").show(),payFlag="PO",$("#emiPlanHeader").show(),$("#restructurePlanHeader").empty(),$("#restructurePlanHeader").hide(),$("#restructureActivestatus").hide(),$("#restructureActivestatus").empty(),$("#payemi-btn-box").show(),viewport.width<767&&$("#restructure-userlevel-info").css("height","6rem"),calHeightMicro();$("#balance-conversion-container").exists()&&("true"==$("#isEppBooked").val()||1==$("#isEppBooked").val()?($("#balcon-sturucture-box").hide(),$("#balance-conversion-container").find("#successBalConSection").show(),$("#eppNotBookedBox").hide(),$("#eppBookedBox").show(),$(".cong-message").css({margin:"0px auto",width:"100%"}),$("#balance-conversion-container").find(".microportal-userlevel-info .static-info").remove(),viewport.width<767&&$("#balance-conversion-container").find(".microportal-userlevel-info").css("height","5rem")):($("#eppNotBookedBox").show(),$("#eppBookedBox").hide(),"Y"==$("#madFulfilmentFlag").val()?($(".radio-view.deactivated").css("top","100px"),$(".balcon-offer-section .radio-view.deactivated .row.m-0 .col-md-3").css("pointer-events","auto"),$("#payToActivateOffer").hide(),$("#payToActivateOfferMob").hide(),$("#offerConfirmBtn").show(),$("#offerConfirmBtnMob").show()):($(".radio-view.deactivated").css("top","75px"),$(".balcon-offer-section .radio-view.deactivated .row.m-0 .col-md-3").css("pointer-events","none"),$("#payToActivateOffer").show(),$("#payToActivateOfferMob").show(),$("#offerConfirmBtn").hide(),$("#offerConfirmBtnMob").hide()),viewport.width<767&&$("#balance-conversion-container").find(".microportal-userlevel-info").css("height","6rem"),$("#balance-conversion-container").find("#successBalConSection").hide()))}),$(document).ready(function(){$(".priority-pass-content-vistrabx1 #WAterms").on("change",function(){var button=$("#sub-unsub-button");$(this).hasClass("checked")?(button.css("background-color","rgb(0, 149, 217)"),button.css("color","rgb(255, 255, 255)"),button.css("pointer-events","auto")):(button.css("background-color","rgb(224, 224, 224)"),button.css("color","rgb(102, 102, 102)"),button.css("pointer-events","none"))}),$(".wtsp-main-content label.fancy-checkbox").on("change",function(){$(".wtsp-main-content label.fancy-checkbox").hasClass("checked")?$("#sub-unsub-button").removeClass("disabled"):$("#sub-unsub-button").addClass("disabled")}),$("#Go_Search_Pay_Form1_Id, #Go_Search_Pay_Form2_Id").on("click",function(){calHeightMicro()})}),$(document).ready(function(){$("#paynow-disclaimer-popup").on("click",function(){var href="/creditcards/app/dashboard/paynow";$.ajax({url:href,type:"GET",success:function(data){var processDiv="";if(console.log("data==success1234==>"+data),null!=data&&""!=data)var processDiv='<form action="'+data[0].paynetUrl+'" target="_blank" method="POST" name="payNetForm" style="margin-bottom:0px;"><input type="hidden" name="msg" id="msg" value="'+data[0].message+'"/><a href="#" class="button primary button-clickToProceed" onClick="payNetForm.submit();setAnalyticsPost(\'Proceed\');closeModalPopup($(this));">Proceed</a><a href="javascript:void(0);" class="button primary button-cancel" onClick="setAnalyticsPost(\'Cancel\');closeModalPopup($(this));">Cancel</a></form>';0==$(".button-clickToProceed").length&&$("#appendPayNowForm").append(processDiv),$(".button-clickToProceed").css("margin-right","5px"),viewport.width>=1024?$("#appendPayNowForm").parents().find(".open").children(".modal").css("margin-top","-267.5px"):viewport.width<767&&$("#appendPayNowForm").parents().find(".open").children(".modal").css("margin-top","0px")},error:function(){console.log("Enter inside failure block")}})}),$(".billdesk-pay-btn").on("click",function(){var href="/creditcards/app/dashboard/paynow";$.ajax({url:href,type:"GET",success:function(data){var processDiv="";if(console.log("data==success1234==>"+data),null!=data&&""!=data)var processDiv='<form action="'+data[0].paynetUrl+'" target="_blank" method="POST" name="payNetForm" style="margin-bottom:0px;"><input type="hidden" name="msg" id="msg" value="'+data[0].message+'"/><a href="#" class="button primary button-clickToProceed" onClick="payNetForm.submit();setAnalyticsPost(\'Proceed\');closeModalPopup($(this));">Proceed</a><a href="javascript:void(0);" class="button primary button-cancel" onClick="setAnalyticsPost(\'Cancel\');closeModalPopup($(this));">Cancel</a></form>';0==$(".button-clickToProceed").length&&$("#appendPayNowForm").append(processDiv),$(".button-clickToProceed").css("margin-right","5px"),viewport.width>=1024?$("#appendPayNowForm").parents().find(".open").children(".modal").css("margin-top","-267.5px"):viewport.width<767&&$("#appendPayNowForm").parents().find(".open").children(".modal").css("margin-top","0px")},error:function(){console.log("Enter inside failure block")}})}),$("#digi-contact-change-disclaimer-popup").on("click",function(){sessionStorage.removeItem("tryAgainStatus"),sessionStorage.setItem("tryAgainStatus",!1);var clientId=$("#digilockerClientId").val();console.log("clientId",clientId);var URL="https://api.digitallocker.gov.in/public/oauth2/1/authorize?response_type=code&client_id="+clientId+"&rediect_uri=1&state=1",processDiv='<form action="'+URL+'" target="_blank" method="POST" name="payNetForm" style="margin-bottom:0px;"><input type="hidden" name="msg" id="msg" value=""/><a href="#" class="button primary button-clickToProceed" onClick="redirectToDigilocker(`'+URL+'`);setAnalyticsPost(\'Proceed\');closeModalPopup($(this));">Proceed</a><a href="javascript:void(0);" class="button primary button-cancel" onClick="setAnalyticsPost(\'Cancel\');closeModalPopup($(this));">Cancel</a></form>';0==$(".button-clickToProceed").length&&$("#appendPayNowForm").append(processDiv),$(".button-clickToProceed").css("margin-right","5px"),viewport.width>=1024?$(".modal").css("margin-top","-267.5px"):viewport.width<767&&$(".modal").css("margin-top","0px")})}),$(document).ready(function(){var roleId=$("#crosssell-roleId").val(),jrnyName=$("#crosssell-jrny-name").val();if($(".cross-sell-login-error-block").exists()&&($(".micro-logo-head.text-center a").removeAttr("onclick"),$(".micro-logo-head.text-center a").removeAttr("href"),$(".micro-logo-head.text-center a").css("cursor","auto")),"11"==roleId||"crosssell"==jrnyName){var crosssellJrny='<input type="hidden" name="journey" value="crosssell"/>';$("#flexipay-confirm-form #cancel").attr("onclick","submitForm('/creditcards/b2b/crosssell/home',true)")}$("#logoutFormId").append(crosssellJrny)}),$(document).ready(function(){$(".side-menu.kyc-side-menu").find("li.active").addClass("selectedKycMenu"),$("#sub-unsub-button").on("click",function(){$(this).css({color:"#fff",background:"#f3f2f2","pointer-events":"none"})}),$(".btn.waves-effect.waves-light.blue-btn.micro-disclaimer-popup-open").on("click",function(){$(this).css("background-color","#00b1f2")})}),$(document).ready(function(){$("#submitbtn").css("background","#dddddd"),$("#submitbtn").css("color","#666666"),$(".error-wrap-amt").css("display","none"),$(".numeric").keypress(function(event){46==event.which&&-1==$(this).val().indexOf(".")||!(event.which<48||event.which>57)||0==event.which||8==event.which||event.preventDefault();var amt=$(this).val();-1!=amt.indexOf(".")&&amt.substring(amt.indexOf(".")).length>2&&0!=event.which&&8!=event.which&&$(this)[0].selectionStart>=amt.length-2&&event.preventDefault()}),$("#showOTPView").hide(),$("#maskedCbrAccNo").on("blur",function(){$(this).parent().find("label").remove(),isNaN($("#maskedCbrAccNo").val())||$("#encashAccNo").val($("#maskedCbrAccNo").val());for(var maskedAcntNo="",i=0;i<$(this).val().length;i++)maskedAcntNo+="X";
$("#maskedCbrAccNo").val(maskedAcntNo),""!=$(this).val()?($(this).parent().find("label.error").remove(),$(this).removeClass("error").css("border-color","#cdcbcb").after('<label for="encashAccNo" class="valid"></label>')):($(this).parent().find("label.valid").remove(),$(this).css("border-color","red").after('<label for="encashAccNo" class="error"></label>')),""!=$("#encashConfirmAccNo").val()&&($("#encashConfirmAccNo").parent().find("label").remove(),$("#encashConfirmAccNo").val()!=$("#encashAccNo").val()?($("#encashConfirmAccNo").css("border-color","red"),$("#encashConfirmAccNo").addClass("error"),$("#encashConfirmAccNo").after('<label for="encashAccNo" class="error"></label>'),resetNeftChequeFeild()):($("#encashConfirmAccNo").css("border-color","#cdcbcb"),$("#encashConfirmAccNo").removeClass("error"),$("#encashConfirmAccNo").after('<label for="encashAccNo" class="valid"></label>'),resetNeftChequeFeild()))}),$("#maskedCbrAccNo").bind("cut copy paste",function(e){e.preventDefault()}),$("#maskedCbrAccNo").on("focus",function(){var start=this.selectionStart,end=this.selectionEnd;""!=$(this).val()&&($(this).val($("#encashAccNo").val()),this.value=this.value.toLowerCase(),this.setSelectionRange(start,end))}),$(".bank-field #encashConfirmAccNo").on("blur",function(){}),$(".bank-field #neft-ifsc-field").on("blur",function(){}),$(".cbr-neft-link").on("click",function(){$(this).parent().find("label").remove(),$("#neft-ifsc-field").css("border-color","#cdcbcb")}),$("#requested-cbr").on("blur",function(){console.log("INACTIVE ACCOUNT"),$(this).parent().find("label").remove(),selected_value=$(this).val(),parseInt(selected_value)>=49e3?$("#cBRTxtBox").show():$("#cBRTxtBox").hide(),0==parseInt($(this).val())?($("#requested-cbr").val(null),$("#requested-cbr").css("border-color","red"),$("#requested-cbr").addClass("error"),$("#requested-cbr").addClass("error-cbr"),$("#requested-cbr").after('<label class="error error-cbr"></label>'),$(this).siblings(".requested-amount-error").text("").css({display:"block",visibility:"visible",color:"red",margin:"2px 4px"}),$(".error-wrap-amt").css("display","block"),$(".error-wrap-amt .top-error").html(),$("#error-request").css("display","none")):$("#eligible-cbr").val()>=parseFloat($(this).val())>=1?(console.log("entered amt greater/equal than 1 and less than/equal to eligible amount==>"),$.ajax({url:"/creditcards/app/requests/cbr-requested-amount-check",data:{requestedAmount:selected_value},beforeSend:function(){var loaderHtml='<div class="overlay-loader"></div>';$("body").append(loaderHtml)},complete:function(){$("body").find("div.overlay-loader").remove()},type:"POST",success:function(data){if(console.log("entered success==>"+data),1==data.policy||"true"==data.policy){console.log("policy approved==>"+data.policy),$("#requested-cbr").removeClass("error"),$("#requested-cbr").removeClass("error-cbr"),$("#requested-cbr").css("border-color","#cdcbcb"),$("#requested-cbr").after('<label class="valid valid-cbr"></label>'),$("#requested-cbr").siblings(".requested-amount-error").text("").css("display","none"),$(".error-wrap-amt").css("display","none"),$("#error-request").css("display","none");var tmpVal=$("#requested-cbr").val();$("#online-cbr-form")[0].reset(),$(".cbr-list-field .fancy-select .trigger").html("Select"),$("#requested-cbr").val(tmpVal),$(".cbr-list-field .fancy-select").find("label.valid").remove(),$(".cbr-list-field .fancy-select").find("label.error").remove(),$(".bank-details").find("label.valid").remove(),$(".bank-details").find("label.error").remove(),$("#cbr-accept").prop("disabled",!1),$("#submitbtn").attr("disabled","disabled"),$("#submitbtn").css("pointer-events","none"),$("#submitbtn").css("background","#dddddd"),$("#submitbtn").css("color","#666666"),1==data.panCardDueFlag&&parseInt($("#requested-cbr").val())>=49e3?(console.log("pan not available==>"),$("#cBRPanCardBox").show(),$("#cancelled-cheque-verbiage").css("display","none"),$("#pancard-cancelled-zif-verbiage").css("display","none"),$("#pancard-box-verbiage").css("display","block"),zipFormateEnable=!1):0==data.panCardDueFlag&&parseInt($("#requested-cbr").val())>1e5?(console.log("pan available upload cancelled cheque==>"),$("#cBRPanCardBox").show(),$("#pancard-box-verbiage").css("display","none"),$("#cancelled-cheque-verbiage").css("display","block"),$("#pancard-cancelled-zif-verbiage").css("display","none"),zipFormateEnable=!1):1==data.panCardDueFlag&&parseInt($("#requested-cbr").val())>1e5?(console.log("pan not available upload zif ==>"),$("#cBRPanCardBox").show(),$("#pancard-box-verbiage").css("display","none"),$("#cancelled-cheque-verbiage").css("display","none"),$("#pancard-cancelled-zif-verbiage").css("display","block"),zipFormateEnable=!0):(console.log("pan available==>"),$("#cBRPanCardBox").hide())}else console.log("policy fail==>"+data.policy),$("#requested-cbr").css("border-color","red"),$("#requested-cbr").addClass("error"),$("#requested-cbr").addClass("error-cbr"),$("#requested-cbr").after('<label class="error error-cbr"></label>'),$("#requested-cbr").siblings(".requested-amount-error").text("").css("display","none"),$(".error-wrap-amt").css("display","none"),$("#error-request").css("display","none"),$("#request-amount-policy-fail").submit()},error:function(){console.log("entered failure==>"),$("#requested-cbr").val(null),$("#requested-cbr").css("border-color","red"),$("#requested-cbr").addClass("error"),$("#requested-cbr").addClass("error-cbr"),$("#requested-cbr").after('<label class="error error-cbr"></label>'),$("#requested-cbr").siblings(".requested-amount-error").text("").css("display","none"),$(".error-wrap-amt").css("display","none"),$("#error-request").css("display","none")}})):(console.log("entered amt less than 1 or greater than eligible amount==>"),$("#requested-cbr").val(null),$("#requested-cbr").css("border-color","red"),$("#requested-cbr").addClass("error"),$("#requested-cbr").addClass("error-cbr"),$("#requested-cbr").after('<label class="error error-cbr"></label>'),$(this).siblings(".requested-amount-error").text("").css({display:"block",visibility:"visible",color:"red",margin:"2px 4px"}),$(".error-wrap-amt").css("display","block"),$(".error-wrap-amt .top-error").html(),$("#error-request").css("display","none"))}),$("#requested-cbr-active").on("blur",function(){console.log("ACTIVE ACCOUNT"),$(this).parent().find("label").remove(),selected_value=$(this).val(),parseInt(selected_value)>=49e3?$("#cBRTxtBox").show():$("#cBRTxtBox").hide(),0==parseInt($(this).val())?($("#requested-cbr-active").val(null),$("#requested-cbr-active").css("border-color","red"),$("#requested-cbr-active").addClass("error"),$("#requested-cbr-active").addClass("error-cbr"),$("#requested-cbr-active").after('<label class="error error-cbr"></label>'),$(this).siblings(".requested-amount-error").text("").css({display:"block",visibility:"visible",color:"red",margin:"2px 4px"}),$(".error-wrap-amt").css("display","block"),$(".error-wrap-amt .top-error").html(),$("#error-request").css("display","none")):parseFloat($(this).val())>=0&&parseFloat($(this).val())<=$("#eligible-cbr").val()?(console.log("entered amt greater/equal than 0 and less than/equal to eligible amount==>"),$.ajax({url:"/creditcards/app/requests/cbr-requested-amount-check",data:{requestedAmount:selected_value},beforeSend:function(){var loaderHtml='<div class="overlay-loader"></div>';$("body").append(loaderHtml)},complete:function(){$("body").find("div.overlay-loader").remove()},type:"POST",success:function(data){if(console.log("entered success==>"+data),1==data.policy||"true"==data.policy){console.log("policy approved==>"+data.policy),$("#requested-cbr-active").removeClass("error"),$("#requested-cbr-active").removeClass("error-cbr"),$("#requested-cbr-active").css("border-color","#cdcbcb"),$("#requested-cbr-active").after('<label class="valid valid-cbr"></label>'),$("#requested-cbr-active").siblings(".requested-amount-error").text("").css("display","none"),$(".error-wrap-amt").css("display","none"),$("#error-request").css("display","none");var tmpVal=$("#requested-cbr-active").val();$("#online-cbr-form")[0].reset(),$(".cbr-list-field .fancy-select .trigger").html("Select"),$("#requested-cbr-active").val(tmpVal),$(".cbr-list-field .fancy-select").find("label.valid").remove(),$(".cbr-list-field .fancy-select").find("label.error").remove(),$(".bank-details").find("label.valid").remove(),$(".bank-details").find("label.error").remove(),$("#cbr-accept").prop("disabled",!1),$("#submitbtn").attr("disabled","disabled"),$("#submitbtn").css("pointer-events","none"),$("#submitbtn").css("background","#dddddd"),$("#submitbtn").css("color","#666666"),$(".pan-upload-error-message").css("display","none"),1==data.panCardDueFlag&&parseInt($("#requested-cbr-active").val())>49e3&&parseInt($("#requested-cbr-active").val())<=1e5?(console.log("pan not available==>"),$("#cBRPanCardBox").show(),$("#cancelled-cheque-verbiage").css("display","none"),$("#pancard-cancelled-zif-verbiage").css("display","none"),$("#pancard-box-verbiage").css("display","block"),zipFormateEnable=!1):0==data.panCardDueFlag&&parseInt($("#requested-cbr-active").val())>1e5?(console.log("pan available upload cancelled cheque==>"),$("#cBRPanCardBox").show(),$("#pancard-box-verbiage").css("display","none"),$("#cancelled-cheque-verbiage").css("display","block"),$("#pancard-cancelled-zif-verbiage").css("display","none"),zipFormateEnable=!1):1==data.panCardDueFlag&&parseInt($("#requested-cbr-active").val())>1e5?(console.log("pan not available upload zif ==>"),$("#cBRPanCardBox").show(),$("#pancard-box-verbiage").css("display","none"),$("#cancelled-cheque-verbiage").css("display","none"),$("#pancard-cancelled-zif-verbiage").css("display","block"),zipFormateEnable=!0):(console.log("pan available==>"),$("#cBRPanCardBox").hide())}else console.log("policy fail==>"+data.policy),1==data.kycDueFlag||"true"==data.kycDueFlag?openModalPopup("kycmodaldue-popup"):($("#requested-cbr-active").css("border-color","red"),$("#requested-cbr-active").addClass("error"),$("#requested-cbr-active").addClass("error-cbr"),$("#requested-cbr-active").after('<label class="error error-cbr"></label>'),$("#requested-cbr-active").siblings(".requested-amount-error").text("").css("display","none"),$(".error-wrap-amt").css("display","none"),$("#error-request").css("display","none"),$("#request-amount-policy-fail").submit())},error:function(){console.log("entered failure==>"),$("#requested-cbr-active").val(null),$("#requested-cbr-active").css("border-color","red"),$("#requested-cbr-active").addClass("error"),$("#requested-cbr-active").addClass("error-cbr"),$("#requested-cbr-active").after('<label class="error error-cbr"></label>'),$("#requested-cbr-active").siblings(".requested-amount-error").text("").css("display","none"),$(".error-wrap-amt").css("display","none"),$("#error-request").css("display","none")}})):(console.log("entered amt less than 500 or greater than eligible amount==>"),$("#requested-cbr-active").val(null),$("#requested-cbr-active").css("border-color","red"),$("#requested-cbr-active").addClass("error"),$("#requested-cbr-active").addClass("error-cbr"),$("#requested-cbr-active").after('<label class="error error-cbr"></label>'),$(this).siblings(".requested-amount-error").text("").css({display:"block",visibility:"visible",color:"red",margin:"2px 4px"}),$(".error-wrap-amt").css("display","block"),$(".error-wrap-amt .top-error").html(),$("#error-request").css("display","none"))}),$(".bank-field #neft-beneficiaryAcnt").on("change",function(){$(".neft-input-box").each(function(){$(this).css("border-color","#cdcbcb"),$(this).removeClass("error"),$(this).parent().find("label").remove()});var selectedAcctNo=$(this).parent().find(".trigger").html();isNaN(selectedAcctNo)||$("#encashAccNo").val(selectedAcctNo);for(var maskedAcntNo="",i=0;i<selectedAcctNo.length;i++)maskedAcntNo+="X";$("#maskedCbrAccNo").val(maskedAcntNo),$("#encashConfirmAccNo").val(selectedAcctNo)}),$(".otp-gen-error").css("display","none"),$("#online-cbr-form #submitbtn").click(function(e){e.preventDefault(),makeAjaxWithLoader({url:$(this).attr("formaction"),type:"POST",success:function(data){console.log(data),data.success?(console.log("OTP Gen status==>"+data.success),$("#showOTPView").show(),$("#submitbtn").prop("disabled",!0),$("#submitbtn").css("pointer-events","none"),$("#submitbtn").css("background","#dddddd"),$("#submitbtn").css("color","#666666"),$("#cbr-accept").prop("disabled",!0),$("#submitbtn").siblings(".otp-gen-error").text("").css("display","none")):(console.log("OTP Gen status==>"+data.success),$("#submitbtn").siblings(".otp-gen-error").text("Your request could not be processed. Please try again later!").css({display:"block",visibility:"visible",color:"red",margin:"2px 15px"}))},error:function(){console.log("entered failure==>"),$(".otp-gen-error").html(),$(".otp-gen-error").css({display:"block",visibility:"visible",color:"red",margin:"2px 0px"})}})}),$("#cbr-accept").click(function(){var valid=!0;""==$(".req-amt-val").val()||"0"==document.getElementById("reason-for-refund").selectedIndex||""==$("#maskedCbrAccNo").val()||""==$("#encashConfirmAccNo").val()||""==$("#neft-ifsc-field").val()||""==$("#neft-bankDetail-field").val()?($("#cbr-accept").prop("checked",!1),$("#submitbtn").attr("disabled","disabled"),$("#submitbtn").css("pointer-events","none"),$("#submitbtn").css("background","#dddddd"),$("#submitbtn").css("color","#666666"),valid=!1):$(".req-amt-val").val()>=49e3&&(""==$("textarea").val()&&($("#cbr-accept").prop("checked",!1),$("#submitbtn").attr("disabled","disabled"),$("#submitbtn").css("pointer-events","none"),$("#submitbtn").css("background","#dddddd"),$("#submitbtn").css("color","#666666"),valid=!1),$("#cBRPanCardBox").is(":visible")&&""==$("#refId").val()&&($("#cbr-accept").prop("checked",!1),$("#submitbtn").attr("disabled","disabled"),$("#submitbtn").css("pointer-events","none"),$("#submitbtn").css("background","#dddddd"),$("#submitbtn").css("color","#666666"),valid=!1)),1==valid&&($("#cbr-accept").prop("disabled",!0),$("#submitbtn").removeAttr("disabled"),$("#submitbtn").css("pointer-events","auto"),$("#submitbtn").css("background","#0095da"),$("#submitbtn").css("color","#ffffff")),console.log("form validation status==>"+valid)}),$("#online-cbr-form #resendBtn").click(function(e){e.preventDefault(),makeAjaxWithLoader({url:$(this).attr("data-href"),type:"POST",success:function(data){console.log(data),data.success&&data.resendEnabled?(console.log("OTP Gen status==>"+data.success),$(".otp-model-view").siblings(".otp-gen-error").text("").css("display","none")):data.resendEnabled?(console.log("OTP Gen status==>"+data.success),$(".otp-model-view").siblings(".otp-gen-error").text("Your request could not be processed. Please try again later!").css({display:"block",visibility:"visible",color:"red",margin:"5px 0px"})):(console.log("max otp sent limit reached==>"),$("#resendBtn").off("click"),$("#validateOtpBtn").off("click"),$("#validateOtpBtn").css("pointer-events","none"),$("#validateOtpBtn").css("background","#dddddd"),$("#validateOtpBtn").css("color","#666666"),$("#otp-value-cbr").prop("disabled",!0),$(".otp-model-view").siblings(".otp-gen-error").text("").css("display","none"),$(".error-wrap-otp .top-error").html(data.message))},error:function(){console.log("entered failure==>"),$(".otp-gen-error").html(),$(".otp-gen-error").css({display:"block",visibility:"visible",color:"red",margin:"5px 0px"})}}),$("#online-cbr-form #otp-value-cbr").val("").removeClass("error").siblings("label.error").remove(),$(this).hasClass("disabled")&&e.preventDefault()}),$("#reason-for-refund").on("blur",function(){$(this).parent().find("label").remove(),"0"==!document.getElementById("reason-for-refund").selectedIndex?($(this).parent().find("label.error").remove(),$(this).parent().find("label.error-cbr").remove(),$(this).parent().find("label.error-cbr-rsn").remove(),$(this).removeClass("error error-cbr").css("border-color","#cdcbcb").after('<label class="valid valid-cbr-rsn"></label>')):($(this).parent().find("label.valid").remove(),$(this).parent().find("label.valid-cbr").remove(),$(this).parent().find("label.valid-cbr-rsn").remove(),$(this).css("border-color","red").after('<label class="error error-cbr-rsn"></label>'))}),$(".mob-wrapper-txt").on("blur",function(){$(this).parent().find("label").remove(),""==!$(".mob-wrapper-txt").val()?($(this).parent().find("label.error").remove(),$(this).parent().find("label.error-cbr-txt").remove(),$(this).removeClass("error error-cbr-txt").css("border-color","#cdcbcb").after('<label class="valid valid-cbr-txt"></label>')):($(this).parent().find("label.valid").remove(),$(this).parent().find("label.valid-cbr-txt").remove(),$(this).css("border-color","red").after('<label class="error error-cbr-txt"></label>'))}),$("#neft-bankDetail-field").on("focus",function(){$(this).parent().find("label").remove(),""==!$("#neft-bankDetail-field").val()?($(this).parent().find("label.error").remove(),$(this).parent().find("label.error-cbr").remove(),$(this).removeClass("error error-cbr").css("border-color","#cdcbcb").after('<label class="valid valid-cbr"></label>')):($(this).parent().find("label.valid").remove(),$(this).parent().find("label.valid-cbr").remove(),$(this).css("border-color","red").after('<label class="error error-cbr"></label>'))}),$("#online-cbr-form #validateOtpBtn").click(function(){if($("#otp-value-cbr").parent().find("label.error").remove(),$("#otp-value-cbr").parent().find("label.error-cbr").remove(),selected_value=$("#otp-value-cbr").val(),selected_value.length<6)$(".otp-model-view").siblings(".otp-gen-error").text("Please enter complete 6 digit  OTP.").css({display:"block",visibility:"visible",color:"red",margin:"5px 15px","text-align":"center","white-space":"nowrap"}),$("#otp-value-cbr").parent().find("label.valid").remove(),$("#otp-value-cbr").parent().find("label.valid-cbr").remove(),$("#otp-value-cbr").css("border-color","red").after('<label class="error error-cbr"></label>');else{var passPhrase=randomStringGenerator(10,!0,!1);makeAjaxWithLoader({url:$(this).attr("data-href"),data:{otp:selected_value,passPhrase:passPhrase},type:"POST",success:function(data){console.log("CBR-->OTP Auth status and passPhrase $w-->"+data);var decryptedData=dataDecryptionAES(data,passPhrase);console.log(decryptedData),data=JSON.parse(decryptedData),data.success?(console.log("OTP auth status==>"+data.success),$(".otp-model-view").siblings(".otp-gen-error").text("").css("display","none"),$("#otp-value-cbr").parent().find("label.error").remove(),$("#otp-value-cbr").parent().find("label.error-cbr").remove(),$("#otp-value-cbr").removeClass("error error-cbr").css("border-color","#cdcbcb").after('<label class="valid valid-cbr"></label>'),$("#resendBtn").off("click"),$("#validateOtpBtn").off("click"),$("#validateOtpBtn").css("pointer-events","none"),$("#validateOtpBtn").css("background","#dddddd"),$("#validateOtpBtn").css("color","#666666"),$("#otp-value-cbr").prop("disabled",!0),$("#cancelBtn").off("click"),console.log("submit CBR Form"),$("#online-cbr-form").submit()):data.success||"002"!=data.statusCode?($("body").find("div.overlay-loader").remove(),console.log("OTP auth status==>"+data.success),$(".otp-model-view").siblings(".otp-gen-error").text("The OTP entered by you is incorrect. Please re-enter the correct OTP.").css({display:"block",visibility:"visible",color:"red",margin:"5px 15px","text-align":"center","white-space":"nowrap"}),$("#otp-value-cbr").parent().find("label.valid").remove(),$("#otp-value-cbr").parent().find("label.valid-cbr").remove(),$("#otp-value-cbr").css("border-color","red").after('<label class="error error-cbr"></label>')):($("body").find("div.overlay-loader").remove(),$(".otp-model-view").siblings(".otp-gen-error").text("").css("display","none"),$("#otp-value-cbr").parent().find("label.valid").remove(),$("#otp-value-cbr").parent().find("label.valid-cbr").remove(),$("#otp-value-cbr").css("border-color","red").after('<label class="error error-cbr"></label>'),$("#resendBtn").off("click"),$("#validateOtpBtn").off("click"),$("#validateOtpBtn").css("pointer-events","none"),$("#validateOtpBtn").css("background","#dddddd"),$("#validateOtpBtn").css("color","#666666"),$("#otp-value-cbr").prop("disabled",!0),$(".error-wrap-otp .top-error").html(data.message))},error:function(){$("body").find("div.overlay-loader").remove(),console.log("entered failure==>"),$(".otp-model-view").siblings(".otp-gen-error").text("").css("display","none"),$("#otp-value-cbr").parent().find("label.valid").remove(),$("#otp-value-cbr").parent().find("label.valid-cbr").remove(),$("#otp-value-cbr").css("border-color","red").after('<label class="error error-cbr"></label>')}})}})}),$("document").ready(function(){function panFileSizeLimit(){var fileSize=parseInt($(".add-update-file-type-info").text().trim().match(/-?\d+\.?\d*/).toString()),fileSizeUnit=$(".add-update-file-type-info").text().trim().match("[a-zA-Z]*$").toString();return byteConversion(fileSize,fileSizeUnit)}function byteConversion(amount,type){return"KB"===type.toUpperCase()?1024*amount:"MB"===type.toUpperCase()?1024*amount*1024:void 0}function AcceptablePanFileUpload(){console.log("Checking appectance of file");var totalsize=0;return $(".select-reason").find(".browse-wrapp :input[type=file]").each(function(){$(this).val().length>0&&-1!=$.inArray($(this).val().split(".").pop().toLowerCase(),panAcceptableFileFormats)&&(totalsize+=$(this)[0].files[0].size)}),totalsize>panFileSizeLimit()?!1:!0}function encryptFileFuction(fileValue,fileName,selectedDocType,panUploadId){$elementId=panUploadId;var file=fileValue.files[0],reader=new FileReader;reader.readAsDataURL(file),reader.onload=function(){var encryptResult=btoa(reader.result),fileNameExt=fileName.split("\\").pop();$("#docupload").attr("enctype","multipart/form-data");var xml;$.ajax({url:"/safe/upload-file.do",type:"POST",contentType:"application/json",data:JSON.stringify({encodedFile:encryptResult,fileType:selectedDocType,fileExt:fileNameExt,authStr:"ABCD"}),beforeSend:function(){$(fileValue).siblings(".add-update-loader-wrapper").css("display","block")},complete:function(){$(fileValue).siblings(".add-update-loader-wrapper").css("display","none")},success:function(data){"string"==typeof data||(xml=data),null!=data.docRefId&&"null"!=data.docRefId?($(fileValue).siblings(".refId").val(data.docRefId),$(fileValue).siblings(".pan-upload-error-message").text("File uploaded successfully").css("color","green").css("margin","2px 4px").css("visibility","visible").css("display","block")):$(fileValue).siblings(".pan-upload-error-message").text("File upload failed").css("color","red").css("margin","2px 4px").css("visibility","visible").css("display","block")},error:function(){$(fileValue).siblings(".pan-upload-error-message").text("File upload failed").css({display:"block",visibility:"visible",color:"red",margin:"2px 4px"})}})}}$(".add-update-loader-wrapper").css("display","none"),$("#browse-pan").click(function(){$("#docPanUpload").click()}),$(".pan-upload-error-message").text("").css("display","none"),$("#docPanUpload").on("change",function(){function fileFormatValidation(panFieldName,panFieldVal,thisVal){panFieldName.siblings(".pan-upload-error-message").text("").css("display","none");if(console.log("before",panAcceptableFileFormats,panAcceptableFileFormats.includes("zip")),panAcceptableFileFormats.includes("zip")&&(panAcceptableFileFormats=panAcceptableFileFormats.filter(function(letter){return"zip"!==letter})),console.log("after",panAcceptableFileFormats),panFieldVal.length>0){console.log("Files selected");var fileName=panFieldVal.split("\\").pop(),fileExt=panFieldVal.split(".").pop().toLowerCase();if(panFieldName.siblings(".pan-update-input-document").val(panFieldVal),zipFormateEnable?(console.log("inside if",panAcceptableFileFormats),panAcceptableFileFormats.includes("zip")||panAcceptableFileFormats.push("zip")):panAcceptableFileFormats.includes("zip")&&(panAcceptableFileFormats=panAcceptableFileFormats.filter(function(letter){return"zip"!==letter})),console.log("zipFormateEnable",zipFormateEnable,panAcceptableFileFormats),0==thisVal.files[0].size){for(var elements=document.getElementsByClassName("refId"),i=0;i<elements.length;++i)elements[i].innerHTML="";panFieldName.siblings(".refId").val(""),panFieldName.siblings(".pan-upload-error-message").css("display","block").css("color","red").css("margin","2px 4px").text("This file type is not valid. File size should be greater than 0 KB").css("visibility","visible")}else if(-1==$.inArray(fileExt,panAcceptableFileFormats))console.log("if block 2 checking file type validation"),panFieldName.siblings(".refId").val(""),zipFormateEnable?panFieldName.siblings(".pan-upload-error-message").css("display","block").css("color","red").css("margin","2px 4px").text("This file type is not valid. It should be a pdf, jpg, zip, jpeg, png, tiff or gif file only.").css("visibility","visible"):panFieldName.siblings(".pan-upload-error-message").css("display","block").css("color","red").css("margin","2px 4px").text("This file type is not valid. It should be a pdf, jpg, jpeg, png, tiff or gif file only.").css("visibility","visible");else if(AcceptablePanFileUpload()){var selectedFileValue=panFieldName.siblings(".pan-field").text().replace(/ /g,"");encryptFileFuction(thisVal,panFieldVal,selectedFileValue,panUploadId),panFieldName.siblings(".pan-upload-error-message").css("display","block").text("").css("visibility","hidden")}else console.log("if block 3 file size exceeds"),panFieldName.siblings(".refId").val(""),panFieldName.siblings(".pan-upload-error-message").css("display","block").css("color","red").css("margin","2px 4px").text("The upload exceeds the maximum size limit of 5 MB .").css("visibility","visible");console.log("outside all if else blocks, always runs when file length > 0"),panFieldName.siblings(".Addon-kyc-browse-button").removeClass("Addon-kyc-btn").addClass("Addon-kyc-chng-file").text(""),panFieldName.siblings(".Addon-kyc-cross-button").css("display","block"),panFieldName.siblings(".pan-field").attr("value",fileName);var selectedFileValue=panFieldName.siblings(".pan-field").text().replace(/ /g,"")}else console.log("File length is <= 0"),AcceptablePanFileUpload()&&console.log("File accepted"),console.log("outside if else blocks when file length <=0"),panFieldName.siblings(".pan-update-input-document").val("").siblings(".pan-upload-error-message").css("display","block").css("color","red").css("margin","2px 4px").text("This file type is not valid. File size should be greater than 0 KB").css("visibility","visible");console.log("Outside parent If else block"),$(".select-reason").find(".browse-wrapp :input[type=file]").each(function(){panFieldVal.length>0&&panFieldName[0].files[0].size>=panFileSizeLimit()&&-1!=$.inArray(panFieldVal.split(".").pop().toLowerCase(),panAcceptableFileFormats)&&panFieldName.siblings(".pan-upload-error-message").css("display","block").css("color","red").css("margin","2px 4px").text("The upload exceeds the maximum size limit of 5 MB .").css("visibility","visible")})}console.log("change event catched");var panFieldName=$(this),panFieldVal=$(this).val(),panObj=this,panUploadId=$(this).attr("id");fileFormatValidation(panFieldName,panFieldVal,panObj)});var panAcceptableFileFormats=["pdf","jpg","jpeg","png","tiff","gif"];$("#reason-for-refund").on("change",function(){var cbrCode=$(this).find("option:selected").val();$("#cBRCode").val(cbrCode)});var CBRUserName=$("#online-cbr-form .bank-input.neft-input-box").val();$("#CBRBankUserName").val(CBRUserName)}),$(document).ready(function(){$("#settlement-check-status").parent().css({"pointer-events":"none",background:"#dadada"}),$("#initialBlock").addClass("selectedBookingAmt"),$("#initialBlock").find(".icon.radio-check").html("&#10004;"),$("#settlementConfirmBtn").css({background:"#00b1f2","pointer-events":"auto"}),$("#initialBlock").css({"border-color":"#00b1f2"}),$("#initialBlock").find(".icon.radio-check").css({"border-color":"#00b1f2",color:"#00b1f2"}),$("#initialBlock").find(".checkmark").find("span").css("color","#00b1f2"),$(".restructure-offer-section .radio-view.deactivated .row.m-0 .col-md-3").on("click",function(){$(".restructure-offer-section .radio-view.deactivated .row.m-0 .col-md-3.selectedBookingAmt").css("border-color","#ccc"),$(".restructure-offer-section .radio-view.deactivated .row.m-0 .col-md-3.selectedBookingAmt").find(".icon.radio-check").html(""),$(".restructure-offer-section .radio-view.deactivated .row.m-0 .col-md-3.selectedBookingAmt").find(".icon.radio-check").css("border-color","#dadada"),$(".restructure-offer-section .radio-view.deactivated .row.m-0 .col-md-3.selectedBookingAmt").find("span").css("color","#8a8a96"),$(".restructure-offer-section .radio-view.deactivated .row.m-0 .col-md-3").removeClass("selectedBookingAmt"),$(this).addClass("selectedBookingAmt"),$(this).find(".icon.radio-check").html("&#10004;"),$(this).find(".icon.radio-check").css({"border-color":"#00b1f2",color:"#00b1f2"}),$(this).css({"border-color":"#00b1f2"}),$(this).find(".checkmark").find("span").css("color","#00b1f2"),$("#settlementConfirmBtn").css({background:"#00b1f2","pointer-events":"auto"})}),$("#regEmailExist").exists()&&($("#regRadio").attr("checked",!0),$("#regRadio").attr("css",{backgroundColor:"#00b1f2"}),$("#showAddEmailBtn").hide(),$("#regRadio").addClass("opted"),$("#altRadio").removeClass("opted")),$("#regRadio").on("click",function(){$("#regEmailExist").exists()&&$("#altRadio").attr("checked",!0)&&($("#regRadio").attr("checked",!0),$("#regRadio").attr("css",{backgroundColor:"#00b1f2"}),$("#showAddEmailBtn").hide(),$("#enter-email").show(),$("#new-email-added").hide(),$("#regRadio").addClass("opted"),$("#altRadio").removeClass("opted"),$("#settlement-error-block").hide())}),$("#altRadio").on("click",function(){$("#altRadio").addClass("opted"),$("#regRadio").removeClass("opted");var newEmail=$("#new-email-added .registerOpt p .labRes").html();newEmail?($("#new-email-added").show(),$("#new-email-added").find(".labRes").html(newEmail),$("#new-email-added").css("font-size","14px"),$("#enter-email").hide()):($("#altRadio").attr("checked",!0),$("#altRadio").attr("css",{backgroundColor:"#00b1f2"}),$("#enter-email").hide(),$("#showAddEmailBtn").show())}),$("#settlement-email-add-btn-anchor").on("click",function(){showAddEmailPopup()}),$("#closeAddEmailPopup").on("click",function(){closeAddEmailPopup()}),$(".line-input").on("keyup keypress",function(e){var popupInpChk=popupInputFieldCheck(),kc=e.which||e.keyCode;1==popupInpChk?($("#settlement-email-submit-btn-anchor").css("pointer-events","auto"),$("#settlement-email-submit-btn-anchor").css("background","#00b1f2 "),$("#settlement-email-submit-btn-anchor").css("cursor","pointer"),$("#settlement-email-submit-btn-div").css({"pointer-events":"auto",background:"#00b1f2 ",cursor:"pointer"}),"13"==kc&&(e.preventDefault(),submitAddEmailPopup())):($("#settlement-email-submit-btn-anchor").css("pointer-events","none"),$("#settlement-email-submit-btn-anchor").css("background","#d0cfcf"),$("#settlement-email-submit-btn-anchor").css("cursor","auto"),$("#settlement-email-submit-btn-div").css({"pointer-events":"none",background:"#d0cfcf ",cursor:"auto"}))}),$("#settlement-email-submit-btn-anchor").on("click",function(){submitAddEmailPopup()}),$("#book-digiSettlement-offer").css({"pointer-events":"none",background:"#dadada"}),$("#microprtal-settlement-section #settlement-fancy-checkbox").on("change",function(){$("#digital-settlement-check #settlement-fancy-checkbox").hasClass("checked")?($("#booksettle-paynet-integration").css("pointer-events","auto"),$("#booksettle-paynet-integration").css("background","#00b1f2 ")):($("#booksettle-paynet-integration").css("pointer-events","none"),$("#booksettle-paynet-integration").css("background","#dadada"))}),$("#book-digiSettlement-offer").on("click",function(){if($("#digital-settlement-check #settlement-fancy-checkbox").hasClass("checked"))if("false"==$("#regEmailExist").exists()||0==$("#regEmailExist").exists()){console.log("inside if 1");
var popupInpChk=popupInputFieldCheck();if(0==popupInpChk){console.log("inside error block");var errorMsgEmailId="Please enter your email Id";$(".balcon-error-block").html(errorMsgEmailId),$(".top-error.balcon-error-block").show()}else{$("#bookSettlementHeader, #settlementOfferHeader").css("pointer-events","none");var tenMon=$("#showSettlementOfferSection").find("#settlementBookOfferTenure").html(),emiAmt=$("#showSettlementOfferSection").find("#settlementBookOfferEMI").html(),totSettAmt=$("#showSettlementOfferSection").find("#settlementBookOfferAmt").html(),wavAmt=$("#showSettlementOfferSection").find("#settlementBookOfferWaiverAmt").html(),wavPerc=$("#showSettlementOfferSection").find("#settlementPerc").html(),regEmailIDCheck=$("#showSettlementOfferSection").find("#enter-email .labResUnmasked").html(),altEmailID=$("#showSettlementOfferSection").find("#new-email-added .labRes").html();if(void 0!=regEmailIDCheck){console.log("inside undefined");var regEmailID=$("#showSettlementOfferSection").find("#enter-email .labResUnmasked").html();if($("#regRadio").hasClass("opted")){console.log("insideregradio");var emailChosen="REG";$("#emailIDregistered").html(regEmailID)}else if($("#altRadio").hasClass("opted")&&""==altEmailID){var emailChosen="REG";$("#emailIDregistered").html(regEmailID)}else if($("#altRadio").hasClass("opted")&&""!=altEmailID){var emailChosen="ALT";$("#emailIDregistered").html(altEmailID)}}else{console.log("inside alt");var regEmailID="",emailChosen="ALT";$("#emailIDregistered").html(altEmailID)}1==tenMon?($("#forMultipleemis").css("display","none"),$("#forOneShotPopup").css("display","block"),$("#SettlementAmountBooked1").html(+totSettAmt),$("#monthlyEMI1").html(+emiAmt)):($("#forMultipleemis").css("display","block"),$("#forOneShotPopup").css("display","none"),$("#settlementSrBooked #SettlementAmountBooked2").html(+totSettAmt),$("#settlementSrBooked #monthlyEMI2").html(+tenMon)),callBookOffer(tenMon,emiAmt,totSettAmt,wavAmt,wavPerc,regEmailID,altEmailID,emailChosen)}}else{$("#bookSettlementHeader, #settlementOfferHeader").css("pointer-events","none");var tenMon=$("#showSettlementOfferSection").find("#settlementBookOfferTenure").html(),emiAmt=$("#showSettlementOfferSection").find("#settlementBookOfferEMI").html(),totSettAmt=$("#showSettlementOfferSection").find("#settlementBookOfferAmt").html(),wavAmt=$("#showSettlementOfferSection").find("#settlementBookOfferWaiverAmt").html(),wavPerc=$("#showSettlementOfferSection").find("#settlementPerc").html(),regEmailIDCheck=$("#showSettlementOfferSection").find("#enter-email .labResUnmasked").html(),altEmailID=$("#showSettlementOfferSection").find("#new-email-added .labRes").html();if(void 0!=regEmailIDCheck){console.log("inside undefined");var regEmailID=$("#showSettlementOfferSection").find("#enter-email .labResUnmasked").html();if($("#regRadio").hasClass("opted")){console.log("insideregradio");var emailChosen="REG";$("#emailIDregistered").html(regEmailID)}else if($("#altRadio").hasClass("opted")&&""==altEmailID){var emailChosen="REG";$("#emailIDregistered").html(regEmailID)}else if($("#altRadio").hasClass("opted")&&""!=altEmailID){var emailChosen="ALT";$("#emailIDregistered").html(altEmailID)}}else{console.log("inside alt");var regEmailID="",emailChosen="ALT";$("#emailIDregistered").html(altEmailID)}1==tenMon?($("#forMultipleemis").css("display","none"),$("#forOneShotPopup").css("display","block"),$("#SettlementAmountBooked1").html(+totSettAmt),$("#monthlyEMI1").html(+emiAmt)):($("#forMultipleemis").css("display","block"),$("#forOneShotPopup").css("display","none"),$("#settlementSrBooked #SettlementAmountBooked2").html(+totSettAmt),$("#settlementSrBooked #monthlyEMI2").html(+tenMon)),callBookOffer(tenMon,emiAmt,totSettAmt,wavAmt,wavPerc,regEmailID,altEmailID,emailChosen)}}),$("#bookSettlementHeader").on("click",function(){$("#emiOtherSlotTxt").hide(),$("#emiFirstSlotTxt").hide(),$("#default").show(),$("#digiSettleSection").show(),$("#showSettlementOfferSection").hide(),$("#successSettlementSection").hide(),calHeightMicro()}),$(".button.microportal-settlement-paynow").on("click",function(){var monthlyEmi=$("#settlementBookOfferEMI").html(),payFlag="S";callBillDeskMethod(monthlyEmi,payFlag)}),$(".button.track-settlement-paynow").on("click",function(){var monthlyEmi=$("#track-pay-emi-amt").html(),payFlag="T";callBillDeskMethod(monthlyEmi,payFlag)}),$("#settlementConfirmBtn").on("click",function(){$("#digiSettleSection").hide(),$("#showSettlementOfferSection").show(),$("#settlementOfferHeader #showBookOfferSectionHeader").css({"font-weight":"600",color:"#2d2d2d"}),$("#settle-bookOffer-list-section #sucsessBalConHeaderLabel, #settlement-main-content-box #bookSettlementHeader #settlement-heading-tab1").css({"font-weight":"normal",color:"#8a8a96"}),calHeightMicro(),highlightOtherPayTab()}),$("#settlementConfirmBtnmob").on("click",function(){$("#digiSettleSection").hide(),$("#showSettlementOfferSection").show(),calHeightMicro()}),(1==$("#hideTrackPayEmi").val()||"true"==$("#hideTrackPayEmi").val()||0==$("#track-pay-emi-amt").html()||"VAL"==$("#VPLUSsettlement").val()||"ZER"==$("#VPLUSsettlement").val())&&($("#track-settle-account-btn").css("pointer-events","none"),$("#track-settle-account-btn").css("background","#dadada")),"BRK"==$("#VPLUSsettlement").val()&&"N"==$("#HardshipDetail").val()&&($("#track-settle-account-btn").css("pointer-events","none"),$("#track-settle-account-btn").css("background","#dadada")),$("#settlement-main-content-box #bookSettlementHeader").on("click",function(){$("#settlement-main-content-box #bookSettlementHeader #settlement-heading-tab1").css({"font-weight":"600",color:"#2d2d2d"}),$("#settle-bookOffer-list-section #sucsessBalConHeaderLabel,#settlementOfferHeader #showBookOfferSectionHeader").css({"font-weight":"normal",color:"#8a8a96"}),$("#digiSettleSection .btn-gap.show-in-desktop .top-error.balcon-error-block").hide()}),$(".offer-postlogin.track-service .load-more-wrap .button.load-more").on("click",function(){console.log("load more"),setTimeout(function(){calHeightMicro()},200)})}),$("#settlementConfirmBtnmob").on("click",function(){var Percentage=$(" .col-md-12 .selectedBookingAmt").find(".checkmark").find(".small-text").find(".waiverpercentage").html(),oneshot=$("#OneShotPayment").val(),tenure=$(" .col-md-12 .selectedBookingAmt").find(".checkmark").find(".label .tenure").html(),waiveramount=$(".col-md-12 .selectedBookingAmt").find(".checkmark").find(".small-text").find(".waiveramount").html(),monthlyEmi=$(" .col-md-12 .selectedBookingAmt").find(".checkmark").find(".label .waiver").html();$("#oneshotpaymentverb #settlementPendingAmt").html(monthlyEmi),$("#multiInstalmentpayment #settlementPendingAmt").html(monthlyEmi),$("#booksettle-paynet-integration span").html(monthlyEmi);var totalSettlementAmount=$(" .col-md-12 .selectedBookingAmt").find(".checkmark").find(".label .TotalsettlementAmount").html(),otherSavedAmt=$(".col-md-12 .selectedBookingAmt").find(".checkmark").find(".label #balAmt").html();callsettlementOffer(tenure,waiveramount,totalSettlementAmount,monthlyEmi,oneshot,Percentage,otherSavedAmt),settlementSelectOfferCall(tenure,waiveramount,totalSettlementAmount,monthlyEmi,oneshot,Percentage,otherSavedAmt)}),$("#settlementConfirmBtn").on("click",function(){var oneshot=$("#OneShotPayment").val(),Percentage=$(".radio-view.deactivated .selectedBookingAmt").find(".checkmark").find(".small-text").find(".waiverpercentage").html(),tenure=$(".radio-view.deactivated .selectedBookingAmt").find(".checkmark").find(".label .tenure").html(),waiveramount=$(".radio-view.deactivated .selectedBookingAmt").find(".checkmark").find(".small-text").find(".waiveramount").html(),monthlyEmi=$(".radio-view.deactivated .selectedBookingAmt").find(".checkmark").find(".label .waiver").html();$("#oneshotpaymentverb #settlementPendingAmt").html(monthlyEmi),$("#multiInstalmentpayment #settlementPendingAmt").html(monthlyEmi),$("#booksettle-paynet-integration span").html(monthlyEmi);var totalSettlementAmount=$(".radio-view.deactivated .selectedBookingAmt").find(".checkmark").find(".label .TotalsettlementAmount").html(),otherSavedAmt=$(".radio-view.deactivated .selectedBookingAmt").find(".checkmark").find(".label #balAmt").html();callsettlementOffer(tenure,waiveramount,totalSettlementAmount,monthlyEmi,oneshot,Percentage,otherSavedAmt),settlementSelectOfferCall(tenure,waiveramount,totalSettlementAmount,monthlyEmi,oneshot,Percentage,otherSavedAmt)}),$(document).ready(function(){if($("#settlement-bookOffer-btn").parent().hide(),$("#booksettle-paynet-integration").on("click",function(){if($("#digital-settlement-check #settlement-fancy-checkbox").hasClass("checked"))if(!("false"==$("#regEmailExist").exists()||0==$("#regEmailExist").exists()||$("#altRadio").exists()&&$("#altRadio").hasClass("opted"))||""!=$("#SettlementPayStatus").val()||""!=$("#settlementSectionalLanding").val()&&"null"!=$("#settlementSectionalLanding").val()&&null!=$("#settlementSectionalLanding").val())if(""==$("#settlementSectionalLanding").val()||"null"==$("#settlementSectionalLanding").val()||null==$("#settlementSectionalLanding").val()){console.log("inside if settlementSectionalLanding 5567"),$("#bookSettlementHeader, #settlementOfferHeader").css("pointer-events","none"),console.log("else book 2 5570");var tenMon=$("#showSettlementOfferSection").find("#settlementBookOfferTenure").html(),emiAmt=$("#showSettlementOfferSection").find("#settlementBookOfferEMI").html(),totSettAmt=$("#showSettlementOfferSection").find("#settlementBookOfferAmt").html(),wavAmt=$("#showSettlementOfferSection").find("#settlementBookOfferWaiverAmt").html();if(""==$("#SettlementPayStatus").val()){console.log("enter post settle check 2 5577");var wavPerc=$("#showSettlementOfferSection").find("#settlementPerc").html(),regEmailIDCheck=$("#showSettlementOfferSection").find("#enter-email .labResUnmasked").html(),altEmailID=$("#showSettlementOfferSection").find("#new-email-added .labRes").html()}else if(""==$("#settlementSectionalLanding").val()||"null"==$("#settlementSectionalLanding").val()||null==$("#settlementSectionalLanding").val()){console.log("enter post settle check 1 5583");var wavPerc=$("#showSettlementOfferSection").find("#settlementPerc").html(),regEmailIDCheck=$("#showSettlementOfferSection").find("#enter-email .labResUnmasked").html(),altEmailID=$("#showSettlementOfferSection").find("#new-email-added .labRes").html()}else{console.log("enter post check 2 5589");var wavPerc=$("#checkwaiverperc").val();if("ALT"==$("#checkChoosenId").val())var altEmailID=$(".altPostEmailId").html();else var regEmailIDCheck=$(".regPostEmailId").html()}if(void 0!=regEmailIDCheck){console.log("inside undefined 5602");var regEmailID=$("#showSettlementOfferSection").find("#enter-email .labResUnmasked").html();if($("#regRadio").hasClass("opted")){console.log("insideregradio 5605");var emailChosen="REG";$("#emailIDregistered").html(regEmailID),console.log("emailChosen1=5608 ",emailChosen)}else if($("#altRadio").hasClass("opted")&&""==altEmailID){var emailChosen="REG";$("#emailIDregistered").html(regEmailID),console.log("emailChosen2= 5613",emailChosen)}else if($("#altRadio").hasClass("opted")&&""!=altEmailID){var emailChosen="ALT";$("#emailIDregistered").html(altEmailID),console.log("emailChosen3= 5618 ",emailChosen)}}else{console.log("inside alt"),console.log("altEmailID 5623"+altEmailID);var regEmailID="",emailChosen="ALT";$("#emailIDregistered").html(altEmailID),console.log("emailChosen4= 5628 ",emailChosen)}1==tenMon?($("#forMultipleemis").css("display","none"),$("#forOneShotPopup").css("display","block"),$("#SettlementAmountBooked1").html(+totSettAmt),$("#monthlyEMI1").html(+emiAmt)):($("#forMultipleemis").css("display","block"),$("#forOneShotPopup").css("display","none"),$("#settlementSrBooked #SettlementAmountBooked2").html(+totSettAmt),$("#settlementSrBooked #monthlyEMI2").html(+tenMon)),console.log("call callBookOffer 5642"),callSettlementBooking(tenMon,emiAmt,totSettAmt,wavAmt,wavPerc,regEmailID,altEmailID,emailChosen)}else{$("#bookSettlementHeader, #settlementOfferHeader").css("pointer-events","none");var tenMon=$("#showSettlementOfferSection").find("#settlementBookOfferTenure").html(),emiAmt=$("#showSettlementOfferSection").find("#settlementBookOfferEMI").html(),totSettAmt=$("#showSettlementOfferSection").find("#settlementBookOfferAmt").html(),wavAmt=$("#showSettlementOfferSection").find("#settlementBookOfferWaiverAmt").html();if(""==$("#SettlementPayStatus").val()&&""==$("#settlementSectionalLanding").val()||"null"==$("#settlementSectionalLanding").val()||null==$("#settlementSectionalLanding").val()){console.log("enter post settle check 5656");var regEmailIDCheck=$("#showSettlementOfferSection").find("#enter-email .labResUnmasked").html(),altEmailID=$("#showSettlementOfferSection").find("#new-email-added .labRes").html(),wavPerc=$("#showSettlementOfferSection").find("#settlementPerc").html()}else if(""==$("#settlementSectionalLanding").val()||"null"==$("#settlementSectionalLanding").val()||null==$("#settlementSectionalLanding").val()){console.log("enter post settle check 1 5661");var regEmailIDCheck=$("#showSettlementOfferSection").find("#enter-email .labResUnmasked").html(),altEmailID=$("#showSettlementOfferSection").find("#new-email-added .labRes").html(),wavPerc=$("#showSettlementOfferSection").find("#settlementPerc").html()}else{console.log("enter post check 5672");var wavPerc=$("#checkwaiverperc").val();if("ALT"==$("#checkChoosenId").val())var emailChosen="ALT",altEmailID=$(".altPostEmailId").html();else var emailChosen="REG",regEmailIDCheck=$(".regPostEmailId").html()}if(console.log("regEmailIDCheck==>"+regEmailIDCheck),void 0!=regEmailIDCheck){console.log("inside undefined 5685");var regEmailID=$("#showSettlementOfferSection").find("#enter-email .labResUnmasked").html();if(console.log("regEmailIDCheck==>regEmailID"+regEmailIDCheck),$("#regRadio").hasClass("opted")){console.log("insideregradio 5688");var emailChosen="REG";$("#emailIDregistered").html(regEmailID)}else if($("#altRadio").hasClass("opted")&&""==altEmailID){var emailChosen="REG";$("#emailIDregistered").html(regEmailID)}else if($("#altRadio").hasClass("opted")&&""!=altEmailID){var emailChosen="ALT";$("#emailIDregistered").html(altEmailID)}}else{console.log("inside alt 5704");var regEmailID="",emailChosen="ALT";$("#emailIDregistered").html(altEmailID)}1==tenMon?($("#forMultipleemis").css("display","none"),$("#forOneShotPopup").css("display","block"),$("#SettlementAmountBooked1").html(+totSettAmt),$("#monthlyEMI1").html(+emiAmt)):($("#forMultipleemis").css("display","block"),$("#forOneShotPopup").css("display","none"),$("#settlementSrBooked #SettlementAmountBooked2").html(+totSettAmt),$("#settlementSrBooked #monthlyEMI2").html(+tenMon)),console.log("ajax call data: "+regEmailID+"=="+altEmailID+"=="+emailChosen),callSettlementBooking(tenMon,emiAmt,totSettAmt,wavAmt,wavPerc,regEmailIDCheck,altEmailID,emailChosen),$(".button.primary.button-clickToProceed").on("click",function(){console.log("click to proceed"),$("#settlement-btn-box #booksettle-paynet-integration").css({"background-color":"#dadada","pointer-events":"none"}),$("#settlement-btn-box #settlement-check-status").css({"background-color":"rgb(0, 177, 242)","pointer-events":"auto"})}),$(".button.primary.button-cancel").on("click",function(){console.log("click to cancle"),$("#settlement-btn-box #booksettle-paynet-integration").css({"background-color":"rgb(0, 177, 242)","pointer-events":"auto"}),$("#settlement-btn-box #settlement-check-status").css({"background-color":"#dadada","pointer-events":"none"})})}else if(console.log("inside if 5474"),""==$("#new-email-added .labRes").html()){console.log("inside error block 5477");var errorMsgEmailId="Please enter your email Id";$(".balcon-error-block").html(errorMsgEmailId),$("#settlement-error-block").show(),$(".top-error.balcon-error-block").show()}else{$("#bookSettlementHeader, #settlementOfferHeader").css("pointer-events","none"),console.log("else book 5485");var tenMon=$("#showSettlementOfferSection").find("#settlementBookOfferTenure").html(),emiAmt=$("#showSettlementOfferSection").find("#settlementBookOfferEMI").html(),totSettAmt=$("#showSettlementOfferSection").find("#settlementBookOfferAmt").html(),wavAmt=$("#showSettlementOfferSection").find("#settlementBookOfferWaiverAmt").html();if(""==$("#SettlementPayStatus").val()&&""==$("#settlementSectionalLanding").val()||"null"==$("#settlementSectionalLanding").val()||null==$("#settlementSectionalLanding").val()){console.log("enter post settle check 5492");var wavPerc=$("#showSettlementOfferSection").find("#settlementPerc").html(),regEmailIDCheck=$("#showSettlementOfferSection").find("#enter-email .labResUnmasked").html(),altEmailID=$("#showSettlementOfferSection").find("#new-email-added .labRes").html()}else if(""==$("#settlementSectionalLanding").val()||"null"==$("#settlementSectionalLanding").val()||null==$("#settlementSectionalLanding").val()){console.log("enter post settle check 1  5498");var wavPerc=$("#showSettlementOfferSection").find("#settlementPerc").html(),regEmailIDCheck=$("#showSettlementOfferSection").find("#enter-email .labResUnmasked").html(),altEmailID=$("#showSettlementOfferSection").find("#new-email-added .labRes").html()}else if(""==$("#SettlementPayStatus").val()&&""!=$("#settlementSectionalLanding").val()||"null"!=$("#settlementSectionalLanding").val()||null!=$("#settlementSectionalLanding").val()){console.log("enter post settle check 2 5504");var wavPerc=$("#showSettlementOfferSection").find("#settlementPerc").html(),regEmailIDCheck=$("#showSettlementOfferSection").find("#enter-email .labResUnmasked").html(),altEmailID=$("#showSettlementOfferSection").find("#new-email-added .labRes").html()}else{console.log("enter post check 5510");var wavPerc=$("#checkwaiverperc").val();if("ALT"==$("#checkChoosenId").val())var altEmailID=$(".altPostEmailId").html();else var regEmailIDCheck=$(".regPostEmailId").html()}if(void 0!=regEmailIDCheck){console.log("inside undefined 5523");var regEmailID=$("#showSettlementOfferSection").find("#enter-email .labResUnmasked").html();if($("#regRadio").hasClass("opted")){console.log("insideregradio 5526");var emailChosen="REG";$("#emailIDregistered").html(regEmailID),console.log("emailChosen1= 5529",emailChosen)}else if($("#altRadio").hasClass("opted")&&""==altEmailID){var emailChosen="REG";$("#emailIDregistered").html(regEmailID),console.log("emailChosen2=5534 ",emailChosen)}else if($("#altRadio").hasClass("opted")&&""!=altEmailID){var emailChosen="ALT";$("#emailIDregistered").html(altEmailID),console.log("emailChosen3=5539 ",emailChosen)}}else{console.log("inside alt 5543"),console.log("altEmailID 5544"+altEmailID);var regEmailID="",emailChosen="ALT";$("#emailIDregistered").html(altEmailID),console.log("emailChosen4=5549 ",emailChosen)}1==tenMon?($("#forMultipleemis").css("display","none"),$("#forOneShotPopup").css("display","block"),$("#SettlementAmountBooked1").html(+totSettAmt),$("#monthlyEMI1").html(+emiAmt)):($("#forMultipleemis").css("display","block"),$("#forOneShotPopup").css("display","none"),$("#settlementSrBooked #SettlementAmountBooked2").html(+totSettAmt),$("#settlementSrBooked #monthlyEMI2").html(+tenMon)),console.log("call callBookOffer 5563"),callSettlementBooking(tenMon,emiAmt,totSettAmt,wavAmt,wavPerc,regEmailID,altEmailID,emailChosen)}}),$("#settlement-email-add-btn-anchor").on("click",function(){$("#settlement-error-block").hide()}),$("#settlement-main-content-box").exists()&&""!=$("#SettlementPayStatus").val()){console.log("enter check status flow"),highlightOtherPayTab();var settlementTSA=$("#checkOfferAmt").val(),settlementCheckTenure=$("#checkTenure").val(),settlementWaiverAmt=$("#checkWaiveramount").val(),settlementEmiAmt=$("#checkOfferEmi").val(),pendingEmiAmt=$("#pendingEmiAmt").val(),regEmailService=$("#regemail").val(),ALTEmail=$("#sectionlandingemail").val(),AmountPaid=$("#AmtPaid").val(),AmountPending=$("#AmtPending").val();$("#default").hide(),$("#settlementPendingAmt").html(pendingEmiAmt),$("#booksettle-paynet-integration span").html(pendingEmiAmt),$("#showSettlementOfferSection #settlementBookOfferAmt").html(+settlementTSA),$("#showSettlementOfferSection #settlementBookOfferTenure").html(+settlementCheckTenure),$("#showSettlementOfferSection #settlementBookOfferWaiverAmt").html(+settlementWaiverAmt),$("#showSettlementOfferSection #settlementBookOfferEMI").html(+settlementEmiAmt),$("#bookSettlementHeader").css("pointer-events","none"),$("#showSettlementOfferSection #settlement-email-box").hide(),$("#settlementoneshot").show,$("#showSettlementOfferSection #post-statusCheck-box").show(),$("#settlement-section1").hide(),$("#showSettlementOfferSection").show(),$("#showBookOfferSectionHeader").css({"font-weight":"600",color:"#2d2d2d"});var emailIdStatus=$("#postPayId").html();if($("#emailIDregistered").val(emailIdStatus),$("#email-li").val(emailIdStatus),"true"==$("#SettlementPayStatus").val()||1==$("#SettlementPayStatus").val()){console.log("payment successfully done"),$("html, body").animate({scrollTop:$(document).height()-$(window).height()},2e3),$("#settlement-heading-tab1").css({"font-weight":"400",color:"#8a8a96"}),$("#showCheckStatusSectionHeader").css({"font-weight":"600",color:"#2d2d2d"});var tenMon=$("#checkTenure").val(),emiAmt=$("#checkOfferEmi").val(),totSettAmt=$("#checkOfferAmt").val();1==tenMon?($("#forMultipleemis").css("display","none"),$("#forOneShotPopup").css("display","block"),"REG"==$("#checkChoosenId").val()?($("#emailIDregistered").html(regEmailService),console.log(regEmailService)):(console.log(ALTEmail),$("#emailIDregistered").html(ALTEmail)),$("#emiOtherSlotTxt").hide(),$("#emiFirstSlotTxt").show(),$("#emiFirstSlotTxt").find("#savedamount").html(settlementWaiverAmt),$("#SettlementAmountBooked1").html(+totSettAmt),$("#monthlyEMI1").html(+emiAmt),$("#PartialPayment").hide(),$("#Oneshotverbiage").show(),$("#MultipleEmis").hide(),$("#oneshotpaymentverb #settlementPendingAmt").html(emiAmt),$("#oneshotpaymentverb").show(),$("#multiInstalmentpayment").hide()):($("#forMultipleemis").css("display","block"),$("#forOneShotPopup").css("display","none"),"REG"==$("#checkChoosenId").val()?($("#emailIDregisteredmulti").html(regEmailService),console.log(regEmailService)):(console.log(ALTEmail),$("#emailIDregisteredmulti").html(ALTEmail)),console.log(+totSettAmt),$("#emiOtherSlotTxt").show(),$("#emiFirstSlotTxt").hide(),$("#emiOtherSlotTxt").find("#tenureSelected").html(tenMon),$("#emiOtherSlotTxt").find("#savedamount2").html(settlementWaiverAmt),$("#settlementSrBooked #SettlementAmountBooked2").html(+totSettAmt),$("#settlementSrBooked #monthlyEMI2").html(+tenMon),$("#multiInstalmentpayment #settlementPendingAmt").html(emiAmt),$("#oneshotpaymentverb").hide(),$("#multiInstalmentpayment").show(),$("#Oneshotverbiage").hide(),$("#MultipleEmis").show()),showsettlementThankYouPopup(),highlightBookOfferSection()}else"false"!=$("#SettlementPayStatus").val()&&0!=$("#SettlementPayStatus").val()||""!=$("#check-status-error-block h5").html()?"false"!=$("#SettlementPayStatus").val()&&0!=$("#SettlementPayStatus").val()||""==$("#check-status-error-block h5").html()||(console.log("check status service error"),$("#showSettlementOfferSection").show(),$("#settlement-heading-tab1").css({"font-weight":"400",color:"#8a8a96"}),$("#showCheckStatusSectionHeader").css({"font-weight":"600",color:"#2d2d2d"}),$("#booksettle-paynet-integration").css({"pointer-events":"none",background:"#dadada"}),$("#settlement-check-status").css({"pointer-events":"auto",background:"rgb(0, 177, 242)"}),$("#settlement-fancy-checkbox").addClass("checked"),$("#settlement-fancy-checkbox").css("pointer-events","none")):(console.log("payment not done"),1==$("#PaymentStatus").val()||"true"==$("#PaymentStatus").val()?(console.log("paystatus>trueblock"),$("#multiInstalmentpayment").hide(),$("#oneshotpaymentverb").hide(),$("#PartialPayment #AmtPaid").html(AmountPaid),$("#PartialPayment #AmtPending").html(AmountPending),$("#PartialPayment").show()):(console.log("paystatus>false block"),1==tenMon?($("#oneshotpaymentverb #settlementPendingAmt").html(emiAmt),$("#oneshotpaymentverb").show(),$("#multiInstalmentpayment").hide(),$("#PartialPayment").hide(),$("#oneshotpaymentverb #settlementPendingAmt").show()):($("#multiInstalmentpayment #settlementPendingAmt").html(emiAmt),$("#oneshotpaymentverb").hide(),$("#multiInstalmentpayment").show(),$("#PartialPayment").hide())),$("#showSettlementOfferSection").show(),$("#settlement-heading-tab1").css({"font-weight":"400",color:"#8a8a96"}),$("#showCheckStatusSectionHeader").css({"font-weight":"600",color:"#2d2d2d"}),$("#booksettle-paynet-integration").css({"pointer-events":"auto",background:"#0095d9"}),$("#settlement-check-status").css($("#checkStatusCount").val()>=0&&$("#checkStatusCount").val()<3?{"pointer-events":"auto",background:"rgb(0, 177, 242)"}:{"pointer-events":"none",background:"#dadada"}),$("#settlement-fancy-checkbox").addClass("checked"),$("#settlement-fancy-checkbox").css("pointer-events","none"))}$("#settlement-bookOffer-btn").on("click",function(){$("#showCheckStatusSectionHeader").css({"font-weight":"400",color:"#8a8a96"}),showsettlementThankYouPopup(),highlightBookOfferSection()}),$("#settlement-check-status").css($("#checkStatusCount").val()>0&&$("#checkStatusCount").val()<3?{"pointer-events":"auto",background:"rgb(0, 177, 242)"}:{"pointer-events":"none",background:"#dadada"}),("true"==$("#settlementSectionalLanding").val()||1==$("#settlementSectionalLanding").val())&&settleConditionalLanding(),$("#track-settlement-account-container").exists()&&($(".tab1-vertical-line").css({"border-color":"#0095d9",height:"92%"}),$(".offer-vertical-line, .offer-vertical-line").css({"border-color":"#0095d9",height:"93%",top:"19px"}));var alterConfirmEmailVal;$("#addEmailPopupContainer #email-li").on("keyup",function(e){var key=e.keyCode;alterEmailTxt=8!=key&&46!=key?$(this).val():alterEmailTxt}),$("#addEmailPopupContainer #confirm-email-li").on("keyup",function(e){var key=e.keyCode;alterConfirmEmailVal=8!=key&&46!=key?$(this).val():alterConfirmEmailVal}),$("#settlement-email-add-btn-anchor").on("click",function(){""==$("#addEmailPopupContainer #email-li").val()&&""!=$("#addEmailPopupContainer #confirm-email-li").val()?$("#addEmailPopupContainer #email-li").val(alterEmailTxt):""!=$("#addEmailPopupContainer #email-li").val()&&""==$("#addEmailPopupContainer #confirm-email-li").val()&&$("#addEmailPopupContainer #confirm-email-li").val(alterConfirmEmailVal);var popupcheck=popupInputFieldCheck();$("#settlement-email-submit-btn-div, #settlement-email-submit-btn-anchor").css(1==popupcheck||"true"==popupcheck?{"pointer-events":"auto",background:"rgb(0, 177, 242)",cursor:"pointer"}:{"pointer-events":"none",background:"rgb(208, 207, 207)",cursor:"auto"})}),"REV"==$("#VPLUSsettlement").val()&&$(".microportal-home-deeplink-box").html("Your booking for Settlement plan was discontinued. Click here to check settlement plan availability.")}),$(document).ready(function(){$("#reinst-modal-condirm").on("click",function(){localStorage.setItem("myprofile-details",!0)}),$("#ProceedReinstatement").css("pointer-events","none"),$("#ProceedReinstatement").css("background","#dadada"),$("#ProceedReinstatement").css("color","#666666"),$("#TickIcon").hide(),$("#section2Hideable").css("pointer-events","none"),$("#section2Hideable").hide(),$("#Step1Reinstatement").css("pointer-events","none"),$("#Step2notclick").css("pointer-events","none"),$("#ReinstatementCheckbox #check_box_1 ,#ReinstatementCheckbox #check_box_2,#ReinstatementCheckbox #check_box_3 ").on("change",function(){$("#reinstGenErrBlk").hide(),$("#reinstAuthErrBlk").hide(),$("#reinstErrBlk").hide(),$("#check_box_1").exists()&&$("#check_box_2").exists()&&$("#check_box_3").exists()?$("#ReinstatementCheckbox #check_box_1").hasClass("checked")&&$("#ReinstatementCheckbox #check_box_2").hasClass("checked")&&$("#ReinstatementCheckbox #check_box_3").hasClass("checked")?($("#ProceedReinstatement").css("pointer-events","auto"),$("#ProceedReinstatement").css("background","#0095da"),$("#ProceedReinstatement").css("color","#ffffff")):($("#ProceedReinstatement").css("pointer-events","none"),$("#ProceedReinstatement").css("background","#dadada"),$("#ProceedReinstatement").css("color","#666666")):$("#check_box_1").exists()&&$("#check_box_3").exists()?$("#ReinstatementCheckbox #check_box_1").hasClass("checked")&&$("#ReinstatementCheckbox #check_box_3").hasClass("checked")?($("#ProceedReinstatement").css("pointer-events","auto"),$("#ProceedReinstatement").css("background","#0095da"),$("#ProceedReinstatement").css("color","#ffffff")):($("#ProceedReinstatement").css("pointer-events","none"),$("#ProceedReinstatement").css("background","#dadada"),$("#ProceedReinstatement").css("color","#666666")):$("#check_box_2").exists()&&$("#check_box_3").exists()?$("#ReinstatementCheckbox #check_box_2").hasClass("checked")&&$("#ReinstatementCheckbox #check_box_3").hasClass("checked")?($("#ProceedReinstatement").css("pointer-events","auto"),$("#ProceedReinstatement").css("background","#0095da"),$("#ProceedReinstatement").css("color","#ffffff")):($("#ProceedReinstatement").css("pointer-events","none"),$("#ProceedReinstatement").css("background","#dadada"),$("#ProceedReinstatement").css("color","#666666")):$("#check_box_3").exists()&&($("#ReinstatementCheckbox #check_box_3").hasClass("checked")?($("#ProceedReinstatement").css("pointer-events","auto"),$("#ProceedReinstatement").css("background","#0095da"),$("#ProceedReinstatement").css("color","#ffffff")):($("#ProceedReinstatement").css("pointer-events","none"),$("#ProceedReinstatement").css("background","#dadada"),$("#ProceedReinstatement").css("color","#666666")))}),$("#ProceedReinstatement").on("click",function(){$("#section1Hideable").hide(),$("#section2Hideable").show(),$("#TickIcon").show(),$("#numeric").hide(),$("#SubmitSendOtp").css("pointer-events","auto"),$("#reinstGenErrBlk").hide(),$("#reinstAuthErrBlk").hide(),$("#reinstErrBlk").hide(),console.log("Inside proceed"),$("#Step1Reinstatement").css("pointer-events","auto"),$("html,body").animate({scrollTop:$("#step2").offset().top},"fast")}),$("#Step1Reinstatement").on("click",function(){console.log("inside step1"),$("#section2Hideable").hide(),$("#section2Hideable").css("pointer-events","none"),$("#section1Hideable").show(),$("#TickIcon").hide(),$("#numeric").show(),$("#reinstGenErrBlk").hide(),$("#reinstAuthErrBlk").hide(),$("#reinstErrBlk").hide(),$("#Step1Reinstatement").css("pointer-events","none")}),($("#TrackSRsectionAddress").exists()||$("#TrackSRsectionmobile").exists()||$("#TrackSRsectionboth").exists())&&($("#TickIcon").show(),$("#numeric").hide(),$("#section1Hideable").hide(),$("#Step1Reinstatement").css("pointer-events","none"),$("#reinstGenErrBlk").hide(),$("#reinstAuthErrBlk").hide(),$("#reinstErrBlk").hide()),$("#OTPBlock").hide(),$("#reinstGenErrBlk").hide(),$("#reinstAuthErrBlk").hide(),$("#OTPBlock #authOTPSub").css("pointer-events","none"),$("#OTPBlock #authOTPSub").css("background","#dadada"),$("#reinstGenErrBlk").hide(),$("#reinstAuthErrBlk").hide(),$("#reinstErrBlk").hide();var otpAuthErrorDisplay=$("#otpAuthError").val();console.log("otpAuthErrorDisplay=",otpAuthErrorDisplay),otpAuthErrorDisplay&&(console.log("error occurred while validating otp"),$("#section1Hideable").hide(),$("#section2Hideable").show(),$("#TickIcon").show(),$("#numeric").hide(),$("#SubmitSendOtp").hide(),$("#OTPBlock").show(),$("#reinstGenErrBlk").hide(),$("#reinstErrBlk").hide(),$("#reinstAuthErrBlk").show(),$("html,body").animate({scrollTop:$("#OTPBlock").offset().top},"fast"));var genNoteErrDisplay=$("#genericNoteError").val();console.log("genNoteErrDisplay=",genNoteErrDisplay),genNoteErrDisplay?(console.log("error occurred while validating otp"),$("#section1Hideable").hide(),$("#section2Hideable").show(),$("#TickIcon").show(),$("#numeric").hide(),$("#SubmitSendOtp").show(),$("#SubmitSendOtp").css("pointer-events","auto"),$("#OTPBlock").hide(),$("#reinstGenErrBlk").show(),$("#reinstGenErrBlk .top-error").html(genNoteErrDisplay),$("#reinstAuthErrBlk").hide(),$("#reinstErrBlk").hide()):setAnalyticsReinstatement("Congratulations"),"true"==$("#maxAttemptError").val()||1==$("#maxAttemptError").val()?(console.log("submit btn can't be clicked anymore"),$("#authOTPSub").css({"pointer-events":"none",background:"#dadada"}),$("#reinstResendOTP").addClass("disabled"),$("#reinstResendOTP").css("pointer-events","none"),$("#reinst-otp-inp").on("keydown keyup change",function(e){e.preventDefault()
})):$("#authOTPSub").css({"pointer-events":"auto",background:"#0095d9"})}),$("#reinstResendOTP").on("click",function(){$("#reinstGenErrBlk").hide(),$("#reinstErrBlk").hide(),$("#reinstAuthErrBlk").hide(),console.log("resend button clicked");var href="/creditcards/app/requests/resend-otp-reinstatement";$.ajax({url:href,type:"POST",dataType:"json",data:{Journey:"Reinstatement"},beforeSend:function(){var loaderHtml='<div class="overlay-loader"></div>';$("body").append(loaderHtml)},complete:function(){$("body").find("div.overlay-loader").remove()},success:function(data){"true"==data.success||1==data.success?($("#reinstGenErrBlk").hide(),console.log("data success true"),("false"==data.resendEnabled||0==data.resendEnabled)&&$("#reinstResendOTP").on("click",function(e){e.preventDefault(),console.log("resend exhausted"),$("#reinstResendOTP").addClass("disabled"),$("#reinstResendOTP").css("pointer-events","none"),$("#authOTPSub").css({"pointer-events":"none",background:"#dadada"}),(""!=data.message||null!=data.message)&&($("#reinstErrBlk").show(),$("#reinstErrBlk .top-error").html(data.message)),$("#reinst-otp-inp").on("keydown keyup change",function(e){e.preventDefault()})})):($("#reinstGenErrBlk").hide(),$("#reinstErrBlk .top-error").html(data.message))},error:function(){$("body").find("div.overlay-loader").remove()}})}),$(document).ready(function(){if($(".reversal-request-container").exists()){$(".reason-select-dropbox .trigger").css({color:"#f3f2f2","font-weight":"400"}),$(".feetype-select-dropbox .trigger").text("Select fee type"),$(".reason-select-dropbox .trigger").text("Select category");var options="",selectOptions="";$(".feetype-select-dropbox .options").empty();var feeTypeData=JSON.parse($("#feeListData").val());console.log("feeTypeData="+feeTypeData);for(var i=0;i<feeTypeData.length;i++)console.log(feeTypeData),options+='<li data-id="'+feeTypeData[i].feeId+'" hoverTxt="'+feeTypeData[i].toolTip+'">'+feeTypeData[i].feeType+"</li>",selectOptions+='<option data-id="'+feeTypeData[i].feeId+'" hoverTxt="'+feeTypeData[i].toolTip+'">'+feeTypeData[i].feeType+"</option>";console.log("options"+options),$(".feetype-select-dropbox .options").html(options),$(".feetype-select-dropbox #fee-type-dropdown").append(selectOptions),$(".feetype-select-dropbox .options").find("li:first-child").addClass("selected"),$("#fee-type-dropdown option:first-child").attr("selected","selected")}$("#fee-type-dropdown").on("change",function(){$("#reversal-reason-subtxt").html(""),$(".reason-select-dropbox .trigger").text("Select category"),$("#reason-type-tooltip p").html("Select category"),$(".reversal-txtreason-field.disabled-reason-field").val(""),$(".reversal-txtreason-field.disabled-reason-field").css({"border-color":"#dddddd","font-weight":"normal","pointer-events":"none"}),$("#reversalRq-next-btn").css({"pointer-events":"none",background:"#e0e0e0",color:"#fff"}),$(".reversal-reason-label").css("color","#2d2d2d"),$(".reversal-reason-box .fancy-select").css("pointer-events","auto"),$(".reversal-detail-wrap.reversal-reason-box .trigger").css("border","1px solid #cdcbcb");var selectedFeeType=$(".feetype-select-dropbox .options .selected").html(),FTHoverTxt=$(".feetype-select-dropbox .options .selected").attr("hovertxt");$("#submit-feetype").val(selectedFeeType),$("#fee-type-subtxt").html(FTHoverTxt),$("#fee-type-tooltip p").html($(".feetype-select-dropbox .options .selected").attr("hoverTxt"));var selectedFeeId=$(".feetype-select-dropbox .options .selected").attr("data-id");$(".feetype-select-dropbox .trigger").text(selectedFeeType);var optionsList="",selectOptionsList="";$(".reason-select-dropbox .options").empty();for(var feeTypeData=JSON.parse($("#feeListData").val()),i=0;i<feeTypeData.length;i++)if(feeTypeData[i].feeId==selectedFeeId)for(var j=0;j<feeTypeData[i].reason.length;j++)console.log("feeTypeData[i].reason[j]"),optionsList+='<li data-id="'+feeTypeData[i].feeId+'">'+feeTypeData[i].reason[j]+"</li>",selectOptionsList+='<option data-id="'+feeTypeData[i].feeId+'">'+feeTypeData[i].reason[j]+"</option>";else console.log("no data found");$(".reason-select-dropbox .options").html(optionsList),$(".reason-select-dropbox #charge-reason-dropbox").append(selectOptionsList),$(".reason-select-dropbox .options").find("li:first-child").addClass("selected"),$("#charge-reason-dropbox option:first-child").attr("selected","selected"),$(".reason-select-dropbox .trigger").css({color:"#222","font-weight":"400"})}),$("#charge-reason-dropbox").on("change",function(){$(this).parent().find(".trigger").html();$(".reversal-txtreason-label").css("color","#2d2d2d");var selectedReason=$(".reason-select-dropbox .options .selected").html();$("#reason-type-tooltip p").html(selectedReason),$("#reversal-reason-subtxt").html(selectedReason),$(".reason-select-dropbox .trigger").text(selectedReason),$("#submit-req-reason").val(selectedReason),$("#reason-type-tooltip p").html(selectedReason),$(".reversal-txtreason-field").css({"border-color":"#cdcbcb","pointer-events":"auto"}),$(".RRtxt-length").css("color","#222")}),$(".reversal-txtreason-field").on("input",function(){$(".RRtxt-length p").text(this.value.length)}),$(".reversal-txtreason-field").on("keyup",function(){var count=$(".RRtxt-length p").html();$("#reversalRq-next-btn").css(count>0?{"pointer-events":"auto",background:"#0095d9",color:"#fff"}:{"pointer-events":"none",background:"#e0e0e0",color:"#666"})});var indexVal=0;$("#reversalRq-next-btn").on("click",function(){$(".fee-detail-span").hide(),$(this).hide();var descDetails=$(".reversal-txtreason-field").val();$("#submit-req-details").val(descDetails),$("#transList-error-box").empty(),$(".fee-detail-title #accordian-sec1-tick").show(),$(".fee-charges-span").css("border","2px solid #0095d9"),$("#reversal-from-sec1").hide(),$(".fee-detail-title .fee-detail-text, #accordian-sec1-tick").css({"pointer-events":"auto"}),$(this).css({background:"#e0e0e0","pointer-events":"none"});var selectedFeeType=$(".feetype-select-dropbox .options .selected").html();$.ajax({type:"POST",url:"txnSelection-data-feewaiver",data:{feeType:selectedFeeType},beforeSend:function(){var loaderHtml='<div class="overlay-loader"></div>';$("body").append(loaderHtml)},complete:function(){$("body").find("div.overlay-loader").remove()},success:function(result){if(console.log(result),result.error){var errorTxt='<div class="error-wrap">										<h5 class="top-error">'+result.error+"</h5>									</div>";$("#transList-error-box").append(errorTxt),$("#reversal-from-sec2").show()}else{console.log("enter else block");var transacSRData=JSON.stringify(result);$("#transactionListData").val(transacSRData);var transacData=JSON.parse($("#transactionListData").val());localStorage.setItem("transactionResult",transacSRData),transacData.length<=5?$("#reversal-from-sec2 .d2i-pagination").hide():($("#reversal-from-sec2 .d2i-pagination").show(),$(".fw-tran-count").html("1")),displayTransactionList(indexVal,transacData);var transacListSize=JSON.parse($("#transactionListData").val()),transactionIndexSize=Math.ceil(transacListSize.length/5);$(".fw-trans-size").html(transactionIndexSize)}},error:function(){}})}),$(".fee-detail-title .fee-detail-text, #accordian-sec1-tick").on("click",function(){$(this).css("cursor","pointer"),$(".fee-detail-span").show(),$(".table-pagination-box").hide(),$(".fee-detail-title #accordian-sec1-tick").hide(),$(".fee-charges-span").css("border","2px solid #666"),$("#reversal-from-sec1").show(),$("#reversal-from-sec2").hide(),$("#transacDataRow tbody").empty(),$("#transList-error-box").empty(),$("#reversalRq-next-btn").show(),$("#transacDataRow").hide(),$("#reversalRq-next-btn").css({"pointer-events":"auto",background:"#0095d9",color:"#fff"}),$(".fw-paginate-right").css("pointer-events","auto"),$("#tableindex").html("1 - 5 of "),$("#fee-waiver-submit-btn").css({background:"#e0e0e0","pointer-events":"none"})}),$("#transacDataRow .transRow .transCol-1 .fancy-radio").on("click",function(){$("#fee-waiver-submit-btn").css({background:"#0095d9","pointer-events":"auto"})}),$("#fee-waiver-submit-btn").on("click",function(){$(this).css({"pointer-events":"none",background:"#e0e0e0",color:"#666"})}),$("#fee-waiver-submit-btn").on("click",function(){var loaderHtml='<div class="overlay-loader"></div>';$("body").append(loaderHtml)}),$(".fw-paginate-right").on("click",function(){$(".fw-tran-count").html(parseInt($(".fw-tran-count").html())+1),$(".fw-paginate-left").css("pointer-events","auto");var dataLimit,transacData=JSON.parse($("#transactionListData").val()),tansacList="",dataLength=$("#tableindex").html().split("-"),dataStartVal=parseInt(dataLength[1]);if(dataStartVal+5<transacData.length)var dataLimit=dataStartVal+5;else dataLimit=transacData.length,$(".fw-paginate-right").css("pointer-events","none");dataStartVal==transacData.length&&$(".fw-paginate-right").css("pointer-events","none"),console.log("dataStartVal "+dataStartVal+"==>"+dataLimit);for(var indexVal=dataStartVal;dataLimit>indexVal;indexVal++){var selectedRadioBox="";selectedRadioBox=1==transacData[indexVal].transactionSelected||"true"==transacData[indexVal].transactionSelected?'<div class="field-wrap"><label class="fancy-radio checked"> <input name="AddonKycAddrSelection" class="styled-radio" type="radio" id="req-reversal-radio" value="${col.index}"/>									<span class="radio-toggle"></span>									</label>								</div>':'<div class="field-wrap"><label class="fancy-radio"> <input name="AddonKycAddrSelection" class="styled-radio" type="radio" id="req-reversal-radio" value="${col.index}"/>									<span class="radio-toggle"></span>									</label>								</div>',tansacList+='<tr class="transRow">							<td class="transCol-1" transacId="'+transacData[indexVal].transactionId+'">								'+selectedRadioBox+'								</td>							<td class="transCol-2">'+transacData[indexVal].effectiveDate+'</td>						   	<td class="transCol-3">'+transacData[indexVal].transactionDescription+'</td>						   	<td class="transCol-4">'+transacData[indexVal].transactiontType+'</td>						  	<td class="transCol-5"><span>&#8377;</span> '+transacData[indexVal].amount+"</td></tr>"}$("#tableindex").html(parseInt(dataStartVal+1)+" - "+indexVal+" of "),$("#transacDataRow tbody tr").remove(),$("#transacDataRow").append(tansacList),$("#transacDataRow tbody tr").show(),$("#table-size").html(transacData.length),$("#transacDataRow .transRow .transCol-1 .fancy-radio").on("click",function(){$("#transacDataRow tbody .transRow .transCol-1 .field-wrap label").removeClass("checked"),$("#fee-waiver-submit-btn").css({background:"#0095d9","pointer-events":"auto"}),$("#submit-transaction").val($(this).parent().parent().attr("transacid"));for(var transacVal=$(this).parent().parent().attr("transacid"),i=0;i<transacData.length;i++)(1==transacData[i].transactionSelected||"true"==transacData[i].transactionSelected)&&delete transacData[i].transactionSelected,transacVal==transacData[i].transactionId&&(console.log("matched"+transacData[i].transactionId),transacData[i].transactionSelected=!0,$("#transactionListData").val(JSON.stringify(transacData)))})}),$(".fw-paginate-left").on("click",function(){$(".fw-tran-count").html(parseInt($(".fw-tran-count").html())-1),$(".fw-paginate-right").css("pointer-events","auto");var transacData=JSON.parse($("#transactionListData").val()),tansacList="",dataLength=$("#tableindex").html().split("-"),dataLen1=parseInt(dataLength[0]),dataLimit=(parseInt(dataLength[1]),dataLen1-6);(1>=dataLen1||$(".fw-tran-count").html()<=1)&&$(".fw-paginate-left").css("pointer-events","none");for(var indexVal=dataLimit;dataLen1-1>indexVal;indexVal++){var selectedRadioBox="";selectedRadioBox=1==transacData[indexVal].transactionSelected||"true"==transacData[indexVal].transactionSelected?'<div class="field-wrap"><label class="fancy-radio checked"> <input name="AddonKycAddrSelection" class="styled-radio" type="radio" id="req-reversal-radio" value="${col.index}"/>									<span class="radio-toggle"></span>									</label>								</div>':'<div class="field-wrap"><label class="fancy-radio"> <input name="AddonKycAddrSelection" class="styled-radio" type="radio" id="req-reversal-radio" value="${col.index}"/>									<span class="radio-toggle"></span>									</label>								</div>',tansacList+='<tr class="transRow">							<td class="transCol-1" transacId="'+transacData[indexVal].transactionId+'">								'+selectedRadioBox+'								</td>							<td class="transCol-2">'+transacData[indexVal].effectiveDate+'</td>						   	<td class="transCol-3">'+transacData[indexVal].transactionDescription+'</td>						   	<td class="transCol-4">'+transacData[indexVal].transactiontType+'</td>						  	<td class="transCol-5"><span>&#8377;</span> '+transacData[indexVal].amount+"</td></tr>"}$("#tableindex").html(parseInt(dataLimit+1)+" - "+indexVal+" of "),$("#transacDataRow tbody tr").remove(),$("#transacDataRow").append(tansacList),$("#transacDataRow tbody tr").show(),$("#table-size").html(transacData.length),$("#transacDataRow .transRow .transCol-1 .fancy-radio").on("click",function(){$("#transacDataRow tbody .transRow .transCol-1 .field-wrap label").removeClass("checked"),$("#fee-waiver-submit-btn").css({background:"#0095d9","pointer-events":"auto"});var transacVal=$(this).parent().parent().attr("transacid");$("#submit-transaction").val($(this).parent().parent().attr("transacid"));for(var i=0;i<transacData.length;i++)(1==transacData[i].transactionSelected||"true"==transacData[i].transactionSelected)&&delete transacData[i].transactionSelected,transacVal==transacData[i].transactionId&&(console.log("matched"+transacData[i].transactionId),transacData[i].transactionSelected=!0,$("#transactionListData").val(JSON.stringify(transacData)))})}),$(".field-wrap.feetype-select-dropbox .fancy-select-wrap").on("keydown",function(){8==event.which||46==event.which?($(".reversal-reason-label, .reversal-txtreason-label").css("color","#f3f2f2"),$(".reversal-reason-box .fancy-select").css("pointer-events","none"),$(".reversal-reason-box .fancy-select-wrap .fancy-select .trigger").css({color:"rgb(243, 242, 242)","font-weight":"400",border:"1px solid rgb(243, 242, 242)"}),$("#fee-type-tooltip p").html("Select fee type"),$(".reversal-reason-box .fancy-select-wrap .fancy-select .trigger, #reason-type-tooltip").html("Select the reason"),$(".reversal-txtreason-field.disabled-reason-field").val(""),$(".RRtxt-length").css("color","#ddd"),$(".RRtxt-length p").html("0"),$(".reversal-txtreason-field.disabled-reason-field").css({"border-color":"#dddddd","font-weight":"normal","pointer-events":"none"}),$("#reversalRq-next-btn").css({"pointer-events":"none",background:"#e0e0e0",color:"#fff"})):($(".reversal-reason-label, .reversal-txtreason-label").css("color","rgb(45, 45, 45)"),$(".reversal-reason-box .fancy-select").css("pointer-events","auto"),$(".reversal-reason-box .fancy-select-wrap .fancy-select .trigger").css({color:"rgb(34, 34, 34)","font-weight":"400",border:"1px solid rgb(205, 203, 203)"}))}),$(".field-wrap.reason-select-dropbox .fancy-select-wrap").on("keydown",function(){8==event.which||46==event.which?($("#reason-type-tooltip").html("Select the reason"),$(".reversal-txtreason-label").css("color","#f3f2f2"),$(".reversal-txtreason-field.disabled-reason-field").val(""),$(".RRtxt-length").css("color","#ddd"),$(".RRtxt-length p").html("0"),$(".reversal-txtreason-field.disabled-reason-field").css({"border-color":"#dddddd","font-weight":"normal","pointer-events":"none"}),$("#reversalRq-next-btn").css({"pointer-events":"none",background:"#e0e0e0",color:"#fff"})):console.log("else block")}),$("#transacDataRow .transRow .transCol-1 .fancy-radio").on("click",function(){$("#transacDataRow tbody .transRow .transCol-1 .field-wrap label").removeClass("checked"),$("#fee-waiver-submit-btn").css({background:"#0095d9","pointer-events":"auto"});var transacVal=$(this).parent().parent().attr("transacid");$("#submit-transaction").val($(this).parent().parent().attr("transacid"));for(var i=0;i<transacData.length;i++)(1==transacData[i].transactionSelected||"true"==transacData[i].transactionSelected)&&delete transacData[i].transactionSelected,transacVal==transacData[i].transactionId&&(console.log("matched"+transacData[i].transactionId),transacData[i].transactionSelected=!0,console.log("transacData >>:",transacData),$("#transactionListData").val(JSON.stringify(transacData)))})}),$(document).ready(function(){function setAnalyticsCardUpgradeProceed(){s.linkTrackVars="events,prop6,eVar9",s.linkTrackEvents="event12",s.prop4="sbi-card:postlogin:benefits:flip-page",s.prop6="sbi-card:postlogin:benefits:flip-page:proceed",s.tl(this,"o","sbi:"+s.prop4+":"+s.prop6,null)}function setAnalyticsReissueCancel(){s.linkTrackVars="events,prop6,eVar9",s.linkTrackEvents="event12",s.prop4="sbi-card:postlogin:requests:reissue-replace-page",s.prop6="sbi-card:postlogin:requests:reissue-replace-page:cancel-Otp",s.tl(this,"o","sbi:"+s.prop4+":"+s.prop6,null)}function setAnalyticsReportCancel(){s.linkTrackVars="events,prop6,eVar9",s.linkTrackEvents="event12",s.prop4="sbi:sbi-card:postlogin:requests:report-stolen-page",s.prop6="sbi:sbi-card:postlogin:requests:report-stolen-page:cancel-Otp",s.tl(this,"o","sbi:"+s.prop4+":"+s.prop6,null)}function setAnalyticsCardupgradeCancel(){s.linkTrackVars="events,prop6,eVar9",s.linkTrackEvents="event12",s.prop4=" sbi-card:postlogin:benefits:flip-page",s.prop6=" sbi-card:postlogin:benefits:flip-page:Otp-Cancel",s.tl(this,"o","sbi:"+s.prop4+":"+s.prop6,null)}var fetch_mobileNo=$("#mobileno").val(),fetch_emailId=$("#emailid").val();fetch_mobileNo&&mobilenomasking(fetch_mobileNo),fetch_emailId&&emailmasking(fetch_emailId);var status_Code=($("#manageCardSelected").val(),$("#status_Code").val()),otp_error=$("#error_message").val(),selected_Reason=$("#reason_selected").val(),selected_NotBlockingReason=$("#notblockingreason_selected").val(),check1=$("#check1").val(),check2=$("#check2").val(),check3=$("#check3").val(),selected_card=$("#selected_card").val(),selected_CardToBlock=$("#selected_cardtoblock").val();(511==status_Code||512==status_Code||513==status_Code)&&($(".manage-card-section").css("display","block"),$(".reissue-manage-section .gray-otp-wrapp").show(),$(".reissue-manage-section .button-group").hide(),$("#manageCardCheckbox #check_box_1").prop("disabled",!0),$("#manageCardCheckbox #check_box_2").prop("disabled",!0),$("#manageCardCheckbox #check_box_3").prop("disabled",!0),511==status_Code&&($(".reissue-manage-section #reissue-otp-err").css("display","block"),$(".reissue-manage-section #reissue-otp-err").empty(),$(".reissue-manage-section #reissue-otp-err").append(otp_error),$(".reissue-manage-section .error-div").css("display","none"),$(".reissue-manage-section #otp-msg").css("display","none"),$(".reissue-manage-section #reissueOtp").css("border","1px solid red")),(512==status_Code||513==status_Code)&&($(".reissue-manage-section #otp-msg").css("display","none"),$(".reissue-manage-section .error-div").css("display","block"),$(".reissue-manage-section .error-section").empty(),$(".reissue-manage-section .error-section").append(otp_error),$(".reissue-manage-section #reissue-otp-submit").css("color","#fff"),$(".reissue-manage-section #reissue-otp-submit").css("background-color","#ddd"),$(".reissue-manage-section #reissue-otp-submit").css("pointer-events","none"),$(".reissue-manage-section #reissue-resendotp").css("color","grey"),$(".reissue-manage-section #reissue-resendotp").css("pointer-events","none"),$(".reissue-manage-section #reissueOtp").prop("readonly",!0),$("#reissueOtpSection #cancelOTP").css("pointer-events","none")),check1&&"Y"===check1&&$("#manageCardCheckbox #check_box_1").prop("checked",!0),check2&&"Y"===check2&&$("#manageCardCheckbox #check_box_2").prop("checked",!0),check3&&"Y"===check3&&$("#manageCardCheckbox #check_box_3").prop("checked",!0),selected_Reason&&($("select#reissuereason").val(selected_Reason).change(),$(".reissue-manage-section .rmv").removeClass("button-gray disabled")),selected_card&&0!=selected_card&&$("ul.form-field-list li:nth-child(2) .field-wrap .fancy-radio input[name='cardToBlock']").attr("checked",!0)),(514==status_Code||515==status_Code||516==status_Code)&&($(".manage-card-section").css("display","block"),$(".report-manage-section .gray-otp-wrapp").show(),$(".report-manage-section .button-group").hide(),$("#report-stolen-form .styled-checkbox.reissuecheck").prop("disabled",!0),$("#manageCardCheckbox #check_box_1").prop("disabled",!0),$("#manageCardCheckbox #check_box_2").prop("disabled",!0),$("#manageCardCheckbox #check_box_3").prop("disabled",!0),516==status_Code&&($(".report-manage-section #report-otp-err").css("display","block"),$(".report-manage-section #report-otp-err").empty(),$(".report-manage-section #report-otp-err").append(otp_error),$(".report-manage-section .error-div").css("display","none"),$(".report-manage-section #otp-msg").css("display","none"),$(".report-manage-section #reportOtp").css("border","1px solid red")),(514==status_Code||515==status_Code)&&($(".report-manage-section #otp-msg").css("display","none"),$(".report-manage-section .error-div").css("display","block"),$(".report-manage-section .error-section").empty(),$(".report-manage-section .error-section").append(otp_error),$(".report-manage-section #report-otp-submit").css("color","#fff"),$(".report-manage-section #report-otp-submit").css("background-color","#ddd"),$(".report-manage-section #report-otp-submit").css("pointer-events","none"),$(".report-manage-section #report-resendotp").css("color","grey"),$(".report-manage-section #report-resendotp").css("pointer-events","none"),$(".report-manage-section #reportOtp").prop("readonly",!0),$("#reportOtpSection #cancelOTP").css("pointer-events","none")),check1&&"Y"===check1&&$("#manageCardCheckbox #check_box_1").prop("checked",!0),check2&&"Y"===check2&&$("#manageCardCheckbox #check_box_2").prop("checked",!0),check3&&"Y"===check3&&$("#manageCardCheckbox #check_box_3").prop("checked",!0),selected_NotBlockingReason&&($("select#reportreissuereason").val(selected_NotBlockingReason).change(),$(".report-manage-section .rmv").removeClass("button-gray disabled")),selected_CardToBlock&&0!=selected_CardToBlock&&$("ul.form-field-list li:nth-child(2) .field-wrap .fancy-radio input[name='cardToBlock']").attr("checked",!0)),(517==status_Code||518==status_Code||519==status_Code)&&($("#card-upgrade #upgrade-now-tab-id").trigger("click"),$(".manage-card-section").css("display","block"),$(".card-upgrade-section .gray-otp-wrapp").show(),$(".card-upgrade-section .button-group").hide(),$("#manageCardCheckbox #check_box_1").prop("disabled",!0),$("#manageCardCheckbox #check_box_2").prop("disabled",!0),$("#manageCardCheckbox #check_box_3").prop("disabled",!0),$(".card-upgrade-section .cond-check #check_box_4").prop("checked",!0),$(".card-upgrade-section .cond-check #check_box_4").prop("disabled",!0),$(".card-upgrade-section .sub-heading").css("display","block"),$(".card-upgrade-section .collapse-content.stolen-content-wrapp").css("display","block"),$("#upgrade-now-tab #upgrade-now-section-1").hide(),$("#upgrade-now-tab #num-1").css("display","none"),$("#upgrade-now-tab #tick-img").css("display","block"),519==status_Code&&($(".card-upgrade-section #cardupgrade-otp-err").css("display","block"),$(".card-upgrade-section #cardupgrade-otp-err").empty(),$(".card-upgrade-section #cardupgrade-otp-err").append(otp_error),$(".card-upgrade-section .error-div").css("display","none"),$(".card-upgrade-section #otp-msg").css("display","none"),$(".card-upgrade-section #cardUpgradeOtp").css("border","1px solid red"),$(".card-upgrade-section .rmv").removeClass("button-gray disabled")),(517==status_Code||518==status_Code)&&($(".card-upgrade-section #otp-msg").css("display","none"),$(".card-upgrade-section .error-div").css("display","block"),$(".card-upgrade-section .error-section").empty(),$(".card-upgrade-section .error-section").append(otp_error),$(".card-upgrade-section #cardUpgrade-otp-submit").css("color","#fff"),$(".card-upgrade-section #cardUpgrade-otp-submit").css("background-color","#ddd"),$(".card-upgrade-section #cardUpgrade-otp-submit").css("pointer-events","none"),$(".card-upgrade-section #cardUpgrade-resendotp").css("color","grey"),$(".card-upgrade-section #cardUpgrade-resendotp").css("pointer-events","none"),$(".card-upgrade-section #cardUpgradeOtp").prop("readonly",!0),$("#cardUpgradeOtpSection #cancelOTP").css("pointer-events","none"),$(".padding-Zero.manage-card-section .mumer-heading").css("pointer-events","none")),check1&&"Y"===check1&&$("#manageCardCheckbox #check_box_1").prop("checked",!0),check2&&"Y"===check2&&$("#manageCardCheckbox #check_box_2").prop("checked",!0),check3&&"Y"===check3&&$("#manageCardCheckbox #check_box_3").prop("checked",!0)),$(".report-stlm .fancy-checkbox input.reissuecheck").change(function(){var manageSection=$("#showManageCardUsageSection").val();1==$(this).prop("checked")?"true"==manageSection?($(".manage-card-section.report-manage-section").css("display","block"),$(".reissueCard-wrapper .button-row.replace-stolen").css("display","none")):($(".manage-card-section.report-manage-section").css("display","none"),$(".reissueCard-wrapper .button-row.replace-stolen").css("display","block")):0==$(this).prop("checked")&&($(".manage-card-section.report-manage-section").css("display","none"),$(".reissueCard-wrapper .button-row.replace-stolen").css("display","block"))}),$(".card-upgrade-section .cond-check #check_box_4").change(function(){$(".cond-check input[type=checkbox]").is(":checked")?$(".card-upgrade-section .rmv").removeClass("button-gray disabled"):$(".card-upgrade-section .rmv").addClass("button-gray disabled")}),$("#card-upgrade .step2").click(function(){setAnalyticsCardUpgradeProceed(),$(".card-upgrade-section .sub-heading").css("display","block"),$(".card-upgrade-section .collapse-content.stolen-content-wrapp").css("display","block"),$("#upgrade-now-tab #upgrade-now-section-1").hide(),$("#upgrade-now-tab #num-1").css("display","none"),$("#upgrade-now-tab #tick-img").css("display","block");var target=$(this.hash);return target=target.length?target:$("[name="+this.hash.substr(1)+"]"),target.length?($("html,body").animate({scrollTop:target.offset().top-110}),!1):void 0}),$(".padding-Zero.manage-card-section .mumer-heading").click(function(){$("#upgrade-now-tab #upgrade-now-section-1").show(),$("#upgrade-now-tab #num-1").css("display","block"),$("#upgrade-now-tab #tick-img").css("display","none")}),$("#reissueOtpSection #cancelOTP").click(function(){$(".reissue-manage-section .gray-otp-wrapp").hide(),$(".reissue-manage-section .button-group").show(),$(this).hide(),$("#manageCardCheckbox #check_box_1").prop("disabled",!1),$("#manageCardCheckbox #check_box_2").prop("disabled",!1),$("#manageCardCheckbox #check_box_3").prop("disabled",!1),$("#manageCardCheckbox #check_box_1").prop("checked",!1),$("#manageCardCheckbox #check_box_2").prop("checked",!1),$("#manageCardCheckbox #check_box_3").prop("checked",!1),$(".reissue-manage-section #reissueOtp").val(""),$(".reissue-manage-section .error-div").css("display","none"),$(".reissue-manage-section #otp-msg").css("display","none"),$(".reissue-manage-section #reissue-otp-err").css("display","none"),$(".reissue-manage-section #reissueOtp").css("border","1px solid #dddddd"),setAnalyticsReissueCancel()}),$("#reportOtpSection #cancelOTP").click(function(){$(".report-manage-section .gray-otp-wrapp").hide(),$(".report-manage-section .button-group").show(),$("#manageCardCheckbox #check_box_1").prop("disabled",!1),$("#manageCardCheckbox #check_box_2").prop("disabled",!1),$("#manageCardCheckbox #check_box_3").prop("disabled",!1),$("#manageCardCheckbox #check_box_1").prop("checked",!1),$("#manageCardCheckbox #check_box_2").prop("checked",!1),$("#manageCardCheckbox #check_box_3").prop("checked",!1),$(".report-manage-section #reportOtp").val(""),$(this).hide(),$(".report-manage-section .error-div").css("display","none"),$(".report-manage-section #report-otp-err").css("display","none"),$(".report-manage-section #reportOtp").css("border","1px solid #dddddd"),$("#report-stolen-form .styled-checkbox.reissuecheck").prop("disabled",!1),setAnalyticsReportCancel()}),$("#cardUpgradeOtpSection #cancelOTP").click(function(){$(".card-upgrade-section .gray-otp-wrapp").hide(),$(".card-upgrade-section .button-group").show(),$("#manageCardCheckbox #check_box_1").prop("disabled",!1),$("#manageCardCheckbox #check_box_2").prop("disabled",!1),$("#manageCardCheckbox #check_box_3").prop("disabled",!1),$("#manageCardCheckbox #check_box_1").prop("checked",!1),$("#manageCardCheckbox #check_box_2").prop("checked",!1),$("#manageCardCheckbox #check_box_3").prop("checked",!1),$(".card-upgrade-section .cond-check #check_box_4").prop("disabled",!1),$(".card-upgrade-section .cond-check #check_box_4").prop("checked",!1),$(".card-upgrade-section #cardUpgradeOtp").val(""),$(this).hide(),$(".card-upgrade-section .rmv").addClass("button-gray disabled"),$(".card-upgrade-section #cardupgrade-otp-err").css("display","none"),$(".card-upgrade-section #cardUpgradeOtp").css("border","1px solid #dddddd"),$(".card-upgrade-section .error-div").css("display","none"),setAnalyticsCardupgradeCancel()}),$(".reissue-manage-section #reissueOtp").on("keyup",function(){var data=$(".reissue-manage-section #reissueOtp").val();data.length>0&&($(".reissue-manage-section #reissue-otp-err").css("display","none"),$(".reissue-manage-section #reissueOtp").css("border","1px solid #dddddd"))}),$(".report-manage-section #reportOtp").on("keyup",function(){var data=$(".report-manage-section #reportOtp").val();data.length>0&&($(".report-manage-section #report-otp-err").css("display","none"),$(".report-manage-section #reportOtp").css("border","1px solid #dddddd"))}),$(".card-upgrade-section #cardUpgradeOtp").on("keyup",function(){var data=$(".card-upgrade-section #cardUpgradeOtp").val();data.length>0&&($(".card-upgrade-section #cardupgrade-otp-err").css("display","none"),$(".card-upgrade-section #cardUpgradeOtp").css("border","1px solid #dddddd"))})});var reissueResendOTPCount=0,reportResendOTPCount=0,cardupgradeResendOTPCount=0,sw1modified="N",sw2modified="N",sw3modified="N",sw4modified="N",sw1status,sw2status,sw3status,sw4status,CountrySelected="",StartDAte="",EndDate="",intNumber=0,intNumberEndDate="",trvlupreqtypval="0",reqType="0",checkDel=!1,isContDel="0",travelresendCount=0,interNatNumber=$("#interNatNumber").val();$(document).ready(function(){function loadPostAuthForm(){$("#fromDate").datepicker("setDate",formatDate(StartDAte)),$("#toDate").datepicker("setDate",formatDate(EndDate)),$("#NumberDate").datepicker("setDate",formatDate(intNumberEndDate)),$("#intNoInput").val(intNumber);var countryText=$("#TravelUpdate .fancy-select ul li[data-raw-value="+CountrySelected+"]").text();$("#TravelUpdate #dropdownSelect option[value="+CountrySelected+"]").attr("selected","selected"),$("#TravelUpdate .fancy-select .trigger").text(countryText),$("#TravelUpdate .fancy-select ul li[data-raw-value="+CountrySelected+"]").addClass("selected"),$("#TravelUpdate .fancy-select ul li[data-raw-value="+CountrySelected+"]").siblings().removeClass("selected")}"0"==interNatNumber&&(interNatNumber=null,$("#intNoInput").val(null),$("#interNatNumber_text").text("")),$("#ErrtravelUpdateRequestType").val()&&$("#edit-travel-plan .buttn-block").hide(),$("#CheckImage").hide(),$("#NumerErr").hide(),$("#StartErr").hide(),$("#DateExceedErr").hide(),$("#travelNext").css({"pointer-events":"none",background:"#dadada"});var internationalDate=$("#interNatNumberExpiry").val();null!=internationalDate&&$("#NumberDate").datepicker("setDate",formatDate(internationalDate)),$("#fromDate").mouseenter("hover",function(){$("#StartDateTool").css({display:"block",top:"auto"})}).mouseleave(function(){$("#StartDateTool").css({display:"none",top:"auto"})}),$("#toDate").mouseenter("hover",function(){$("#EndDAteTool").css({display:"block",top:"auto"})}).mouseleave(function(){$("#EndDAteTool").css({display:"none",top:"auto"})}),$("#intNoInput").mouseenter("hover",function(){$("#intlNoTool").css({display:"block",top:"auto"})
}).mouseleave(function(){$("#intlNoTool").css({display:"none",top:"auto"})}),$("#NumberDate").mouseenter("hover",function(){$("#numberendDateTooltip").css({display:"block",top:"auto"})}).mouseleave(function(){$("#numberendDateTooltip").css({display:"none",top:"auto"})}),$("#TravelStart input#fromDate").on("change",function(){CheckNextValidity()}),$("#TravelEnd input#toDate").on("change",function(){CheckNextValidity()}),$("#NumberEnd input#NumberDate").on("change",function(){CheckNextValidity()}),$("#dropdownSelect").on("change",function(){CheckNextValidity()}),$("#IntNumbBlock").on("keydown keyup change",function(){CheckNextValidity()}),$("#intNoInput").on("blur",function(){CheckNextValidity()});var postAuthOTPCode=$("#postAuthOTPCode").val(),postAuthOTPMsg=$("#postAuthOTPMsg").val();107==postAuthOTPCode||108==postAuthOTPCode?(console.log("107 or 108 entered"),postAuthScenario(),$("#travelResendOTP").addClass("disabled"),$("#travelResendOTP").css("pointer-events","none"),$("#travelauthOTPSub").css({"pointer-events":"none",background:"#dadada"}),$("#travel-otp-inp").prop("disabled",!0),$("#travelauthOTPCancel").addClass("disabled"),$("#travelauthOTPCancel").css("pointer-events","none"),$("#travelErrBlk").show(),$("#travelErrBlk .top-error").html(postAuthOTPMsg)):106==postAuthOTPCode?(postAuthScenario(),$("#travelAuthErrBlk").show(),$("#subHeading").hide(),$("#travelAuthErrBlk travelErrLabel").html(postAuthOTPMsg),sw1status=$("#ErronlineTransactionSwitch").val(),sw2status=$("#ErrposSwitch").val(),sw3status=$("#ErrcontactLessSwitch").val(),sw4status=$("#ErratmSwitch").val(),sw1modified=$("#ErronlineTransactionSwitchEdited").val(),sw2modified=$("#ErrposSwitchEdited").val(),sw3modified=$("#ErrcontactLessSwitchEdited").val(),sw4modified=$("#ErratmSwitchEdited").val(),intNumber=$("#ErrinternationalNumber").val(),intNumberEndDate=$("#ErrinternationalNumberExpiryDate").val(),CountrySelected=$("#ErrtravelCountryCode").val(),EndDate=$("#ErrtravelEndDate").val(),StartDAte=$("#ErrtravelStartDate").val(),trvlupreqtypval=$("#ErrtravelUpdateRequestType").val(),isContDel=$("#ErrisContactDeleted").val(),"2"!=trvlupreqtypval&&(createPlanBlock.show(),updatePlanBlock.hide(),loadPostAuthForm()),CheckNextValidity()):($("#travelmcu").hide(),$("#step2-travel-iti .sub-heading").hide(),$("#Travel-OTPBlock").hide(),$("#step2-travel-iti .numeric").show(),$("#travel-check-img-2").hide(),$("#step2-travel-iti .mumer-heading").css({cursor:"default"})),$("#travelNext").on("click",function(){if(travelresendCount>5)$("#step1-travel-iti .numeric").hide(),$("#CheckImage").show(),$("#Step1UTP").hide(),$("#step2-travel-iti .numeric").hide(),$("#travel-check-img-2").show(),$("#travelmcu").hide(),$("#step2-travel-iti .sub-heading").hide(),$("#travel-gen-otp").hide(),$("#travelErrBlk").css("display","block"),$("#travelErrBlk .top-error").empty(),$("#travelErrBlk .top-error").append("You have exhausted the number of times you can ask for the One Time Password (OTP) to be resent. Please re-start your journey by clicking on the Update Travel Plan.");else{CountrySelected=$("#dropdownSelect :selected").val(),intNumber=$("#intNoInput").val();var UnformatStartDAte=$("#TravelStart #fromDate").datepicker("getDate");StartDAte=convertDate(UnformatStartDAte);var UnformatEndDate=$("#TravelEnd #toDate").datepicker("getDate");EndDate=convertDate(UnformatEndDate);var UnformatintNumberEndDate=$("#NumberDate").datepicker("getDate");null!=UnformatintNumberEndDate?intNumberEndDate=convertDate(UnformatintNumberEndDate):""!=intNumber&&(intNumberEndDateunformated=$("#TravelEnd #toDate").datepicker("getDate"),intNumberEndDate=convertDate(intNumberEndDateunformated),$("#NumberDate").datepicker("setDate",intNumberEndDateunformated)),nextToMITrans()}});var deleteBtn=$("#delete-btn");deleteBtn.click(function(){checkDel=!0,generateTravelOtp()}),$("#travel-gen-otp").on("click",function(){$("#travel-online #check_box_1").prop("disabled",!0),$("#travel-pos #check_box_2").prop("disabled",!0),$("#travel-cntl #check_box_3").prop("disabled",!0),$("#travel-atm #check_box_4").prop("disabled",!0),generateTravelOtp()}),$("#travelResendOTP").on("click",function(){$("#travel-otp-inp").removeAttr("style","border:1px solid red !important;"),$("#travelAuthErrBlk").hide(),regenerateTravelOtp()}),$("#Travel-OTPBlock #travelauthOTPCancel").click(function(){$("#travel-otp-inp").removeAttr("style","border:1px solid red !important;"),$("#travelAuthErrBlk").hide(),travelresendCount=0,$("#Travel-OTPBlock").hide(),$("#step1-travel-iti .numeric").show(),$("#CheckImage").hide(),$("#Step1UTP").show(),$("#step1-travel-iti .mumer-heading").css({cursor:"pointer"}),$("#step2-travel-iti .numeric").show(),$("#travel-check-img-2").hide(),$("html,body").animate({scrollTop:0},"slow"),$("#travelErrBlk").css("display","none"),$("#travelAuthErrBlk").css("display","none"),$("#travelResendBlk").css("display","none"),$("#travel-gen-otp").show(),$("#travel-online #check_box_1").prop("disabled",!1),$("#travel-pos #check_box_2").prop("disabled",!1),$("#travel-cntl #check_box_3").prop("disabled",!1),$("#travel-atm #check_box_4").prop("disabled",!1),postCancelActions(),checkDel=!1,$("#edit-travel-plan .buttn-block").show()});var travelotp,interNatNumberExpiry=$("#interNatNumberExpiry").val();$("#travel-otp-inp").on("keydown keyup change",function(){travelotp=$("#travel-otp-inp").val(),$("#travel-otp-inp").removeAttr("style","border:1px solid red !important;"),$("#travelAuthErrBlk").hide()}),$("#travelauthOTPSub").on("click",function(e){$("#travel-otp-inp").removeAttr("style","border:1px solid red !important;"),$("#travelAuthErrBlk").hide(),e.preventDefault();var travelForminputs,intlnumval=intNumber,intlexpdateval=intNumberEndDate,trvlcntryval=CountrySelected,trvlendval=EndDate,trvlstval=StartDAte,internationalNumberSelected=$("#checkIntlNumber:checked").val();if(travelotp&&6==travelotp.length){var travelOTPencr=encryptData(travelotp);$("#travel-otp-inp").val(travelOTPencr);var loaderHtml='<div class="overlay-loader"></div>';$("body").append(loaderHtml),0==checkDel?travelForminputs=' <input type="hidden" name="onlineTransactionSwitch" id="onlineTransactionSwitch" value="'+sw1status+'"/>  <input type="hidden" name="posSwitch" id="posSwitch" value="'+sw2status+'"/>  <input type="hidden" name="contactLessSwitch" id="contactLessSwitch" value="'+sw3status+'"/>  <input type="hidden" name="atmSwitch" id="atmSwitch" value="'+sw4status+'"/>  <input type="hidden" name="onlineTransactionSwitchEdited" id="onlineTransactionSwitchEdited" value="'+sw1modified+'"/>  <input type="hidden" name="posSwitchEdited" id="posSwitchEdited" value="'+sw2modified+'"/>  <input type="hidden" name="contactLessSwitchEdited" id="contactLessSwitchEdited" value="'+sw3modified+'"/>  <input type="hidden" name="atmSwitchEdited" id="atmSwitchEdited" value="'+sw4modified+'"/>  <input type="hidden" name="internationalNumber" id="internationalNumber" value="'+intlnumval+'"/>  <input type="hidden" name="internationalNumberExpiryDate" id="internationalNumberExpiryDate" value="'+intlexpdateval+'"/>  <input type="hidden" name="travelCountryCode" id="travelCountryCode" value="'+trvlcntryval+'"/>  <input type="hidden" name="travelEndDate" id="travelEndDate" value="'+trvlendval+'"/>  <input type="hidden" name="travelStartDate" id="travelStartDate" value="'+trvlstval+'"/>  <input type="hidden" name="travelUpdateRequestType" id="travelUpdateRequestType" value="'+trvlupreqtypval+'"/>  <input type="hidden" name="isContactDeleted" id="isContactDeleted" value="'+isContDel+'"/> ':(travelForminputs='<input type="hidden" name="travelUpdateRequestType" id="travelUpdateRequestType" value="2"/>',internationalNumberSelected?(isContDel="1",travelForminputs+=' <input type="hidden" name="isContactDeleted" id="isContactDeleted" value="'+isContDel+'"/> ',travelForminputs+='<input type="hidden" name="internationalNumberExpiryDate" id="internationalNumberExpiryDate" value="'+interNatNumberExpiry+'"/>',travelForminputs+=' <input type="hidden" name="internationalNumber" id="internationalNumber" value="'+interNatNumber+'"/>'):travelForminputs+=' <input type="hidden" name="isContactDeleted" id="isContactDeleted" value="'+isContDel+'"/> '),$("#travel-otp-form").append(travelForminputs),$("#travel-otp-form").submit(),$("#travelauthOTPSub").css("pointer-events","none")}else $("#travel-otp-inp").attr("style","border:1px solid red !important;")})}),$("#TravelStart input#fromDate").datepicker({dateFormat:"dd-M-yy",changeMonth:!0,changeYear:!0,minDate:"0"}).click(function(){$(this).blur().focus()}),$("#TravelEnd input#toDate").datepicker({dateFormat:"dd-M-yy",changeMonth:!0,changeYear:!0}).click(function(){$(this).blur().focus()}),$("#NumberEnd input#NumberDate").datepicker({dateFormat:"dd-M-yy",changeMonth:!0,changeYear:!0}).click(function(){$(this).blur().focus()}),Date.prototype.addDays=function(days){return this.setDate(this.getDate()+parseInt(days)),this};var CheckNextValidity=function(){$("#NumberError").hide(),$("#crossImageStart").hide(),$("#crossImage").hide(),$("#crossImagenumber").hide(),$("#NumerErr").hide(),$("#StartErr").hide(),$("#DateExceedErr").hide(),$("#endDate").removeClass("error-block"),$("#InterNumberField").removeClass("error-block"),$("#startDate").removeClass("error-block"),$("#IntNumbBlock").removeClass("error-block"),console.log("checkDateCalled");var StartDate=null,endDate=null,today=new Date;today.setHours(0,0,0,0);var ValidateStartdate=!1,validateIntNumber=!0,CheckNoOfDigIntNumber=!1,diffInMsTraveStart=0,diffInMsTravelEnd=0,intNoInputVal=$("#intNoInput").val(),Countryvalue=$("#dropdownSelect :selected").text();intNumber=$("#intNoInput").val(),StartDate=$("#TravelStart input#fromDate").datepicker("getDate"),endDate=$("#TravelEnd input#toDate").datepicker("getDate"),numberEndDate=$("#NumberEnd input#NumberDate").datepicker("getDate"),console.log(endDate),console.log(numberEndDate);var currentDate=new Date;diffInMsTraveStart=Math.abs(today-StartDate);var DaysStart=diffInMsTraveStart/864e5,DaysStartNumberEnd=DaysStart+90,modifiedDate=currentDate.addDays(DaysStartNumberEnd);diffInMsTravelEnd=Math.abs(StartDate-endDate);var DaysEnd=diffInMsTravelEnd/864e5;null!=StartDate&&(15>DaysStart?ValidateStartdate=!0:(ValidateStartdate=!1,$("#StartErr").show(),$("#startDate").addClass("error-block"),$("#crossImageStart").show())),null!=endDate&&null!=StartDate&&(90>=DaysEnd?ValidateStartdate=!0:(ValidateStartdate=!1,$("#DateExceedErr").show(),$("#endDate").addClass("error-block"),$("#crossImage").show())),null!=numberEndDate&&(today>numberEndDate||numberEndDate>modifiedDate)&&($("#NumerErr").show(),$("#InterNumberField").addClass("error-block"),$("#crossImagenumber").show()),null!=numberEndDate&&""==intNumber&&(console.log("inside number"),validateIntNumber=!1,$("#NumberError").show(),$("#IntNumbBlock").addClass("error-block")),(""==intNoInputVal||intNoInputVal.length>8)&&!intNoInputVal.match("^000")?($("#IntNumbBlock").removeClass("error-block"),$("#NumberErrorCross").hide(),CheckNoOfDigIntNumber=!0):($("#IntNumbBlock").addClass("error-block"),$("#NumberErrorCross").show(),CheckNoOfDigIntNumber=!1),null==numberEndDate?$("#travelNext").css(15>DaysStart&&null!=endDate&&null!=StartDate&&90>=DaysEnd&&"Select"!=Countryvalue?{background:"#00b1f2","pointer-events":"auto"}:{"pointer-events":"none",background:"#dadada"}):15>DaysStart&&null!=endDate&&null!=StartDate&&90>=DaysEnd&&numberEndDate>=today&&modifiedDate>=numberEndDate&&"Select"!=Countryvalue&&validateIntNumber&&CheckNoOfDigIntNumber?(console.log("inside Check number valid"),$("#travelNext").css({background:"#00b1f2","pointer-events":"auto"})):$("#travelNext").css({"pointer-events":"none",background:"#dadada"})},openDeletePlanButton=$("#delete-travel-plan-button"),editPlanModal=$("#delete-travel-plan-modal"),deletePlanModalClose=$("#delete-modal-close"),createPlanBlock=$("#create-travel-plan"),updatePlanBlock=$("#edit-travel-plan"),journeyFlag=$("#travelflag").val(),editTravelPlanButton=$("#edit-travel-plan-button"),travelCountry=$("#travelCountry").val(),travelStartDate=$("#travelStartDate").val(),travelEndDate=$("#travelEndDate").val(),travelCountryCode=$("#travelCountryCode").val(),internationalDate=$("#interNatNumberExpiry").val(),formDataset={travelCountry:travelCountry,fromDate:travelStartDate,toDate:travelEndDate,interNatNumber:interNatNumber,NumberDate:internationalDate,travelCountryCode:travelCountryCode};openDeletePlanButton.click(function(){checkDel=!0,editPlanModal.addClass("show"),editPlanModal.removeClass("hide")}),deletePlanModalClose.click(function(){checkDel=!1,editPlanModal.removeClass("show"),editPlanModal.addClass("hide")}),console.log("journeyFlag ================>",journeyFlag),journeyFlag&&"false"===journeyFlag||journeyFlag&&journeyFlag===!1?(createPlanBlock.hide(),updatePlanBlock.show()):(createPlanBlock.show(),updatePlanBlock.hide()),$("input[class='only-numeric']").on("input",function(){$(this).val($(this).val().replace(/[^0-9]/g,""))}),editTravelPlanButton.click(function(){trvlupreqtypval="1",reqType="1",loadForm(),createPlanBlock.show(),updatePlanBlock.hide()}),$(document).ready(function(){function _formatDate(date){return null===date||""===date?"":(date=new Date(date),("0"+date.getDate()).slice(-2)+"/"+("0"+(date.getMonth()+1)).slice(-2)+"/"+date.getFullYear())}"false"==$("#isEditable").val()&&($("#noteEdit").hide(),$("#noteEdit2").show()),$("#travel_duration_text").text(_formatDate(formDataset.fromDate)+" - "+_formatDate(formDataset.toDate)),$("#travel_phn_duration_text").text(_formatDate(formDataset.NumberDate))}),$(document).ready(function(){var fetch_mobileNo=$("#fetchedmobileno").val(),fetch_emailId=$("#fetchedemailid").val();fetch_mobileNo&&mobilenomasked(fetch_mobileNo),fetch_emailId&&emailmasked(fetch_emailId),$("#card-activation-form").length>0&&$(document).on("change","select#cardToActivate",function(evt){evt.preventDefault();{var $option=$(this.options[this.selectedIndex]);$option.val()}});var status_Code=($("#cardActivationSelected").val(),$("#ca_status_Code").val()),otp_error=$("#ca_error_message").val(),selected_card=$("#ca_selectedCard").val();(520==status_Code||521==status_Code||522==status_Code)&&($(".card-activate .gray-otp-wrapp").show(),$(".card-activate .card-activation-proceed").hide(),520==status_Code&&($(".card-activate #card-activate-otp-err").css("display","block"),$(".card-activate #card-activate-otp-err").empty(),$(".card-activate #card-activate-otp-err").append(otp_error),$(".card-activate .error-div").css("display","none"),$(".card-activate #otp-msg").css("display","none"),$(".card-activate #cardactivateOtp").css("border","1px solid red")),(521==status_Code||522==status_Code)&&($(".card-activate #otp-msg").css("display","none"),$(".card-activate .error-div").css("display","block"),$(".card-activate .error-section").empty(),$(".card-activate .error-section").append(otp_error),$(".card-activate #card-activate-otp-submit").css("color","#fff"),$(".card-activate #card-activate-otp-submit").css("background-color","#ddd"),$(".card-activate #card-activate-otp-submit").css("pointer-events","none"),$(".card-activate #cardactivate-resendotp").css("color","grey"),$(".card-activate #cardactivate-resendotp").css("pointer-events","none"),$(".card-activate #cardactivateOtp").prop("readonly",!0),$("#cardActivationOtpSection #cancelOTP").css("pointer-events","none")),selected_card&&$("select#cardToActivate").val(selected_card).change()),$(".card-activate .card-activation-proceed input").on("click",function(){if(cardActivationResendOTPCount>5)return $(".card-activate .error-div").css("display","block"),$(".card-activate .error-section").empty(),void $(".card-activate .error-section").append("You have exhausted the number of times you can ask for One Time Password (OTP) to be resent. Please re-start your journey by clicking on the Card Activation.");var SelectedCardId=$("#cardToActivate").find(":selected").attr("data-value"),passphrase=$("#passphrase").val();$.ajax({type:"POST",data:{selEncyptedCardNum:SelectedCardId,passphrase:passphrase},url:"/creditcards/app/requests/send-otp-card-activation",beforeSend:function(){$("body").append(loaderHtml)},complete:function(){$("body").find("div.overlay-loader").remove()},success:function(response){response&&(response.success?($(".card-activate .gray-otp-wrapp").show(),$(".card-activate .card-activation-proceed").hide(),$(".card-activate .error-div").css("display","none"),$(".card-activate #otp-msg").css("display","none")):5===response.errorCode?($(".card-activate .card-activation-proceed").hide(),$(".card-activate .gray-otp-wrapp").show(),$(".card-activate .error-div").css("display","none"),$(".card-activate #otp-msg").css("display","none")):1010==response.errorCode?($(".card-activate .error-div").css("display","block"),$(".card-activate .error-section").empty(),$(".card-activate .error-section").append(response.message)):($(".card-activate .error-div").css("display","block"),$(".card-activate .error-section").empty(),$(".card-activate .error-section").append(response.message)))},error:function(){$("body").find("div.overlay-loader").remove()}})}),$("#cardActivationOtpSection #cancelOTP").click(function(){$(".card-activate .gray-otp-wrapp").hide(),$(".card-activate .card-activation-proceed").show(),$(this).hide(),$(".card-activate #cardactivateOtp").val(""),$(".card-activate .error-div").css("display","none"),$(".card-activate #otp-msg").css("display","none"),$(".card-activate #card-activate-otp-err").css("display","none"),$(".card-activate #cardactivateOtp").css("border","1px solid #dddddd")}),$(".card-activate #cardactivateOtp").on("keyup",function(){var data=$(".card-activate #cardactivateOtp").val();data.length>0&&($(".card-activate #card-activate-otp-err").css("display","none"),$(".card-activate #cardactivateOtp").css("border","1px solid #dddddd"))})});var cardActivationResendOTPCount=0;$("#rbi-consent-checkbox").change(function(){acknowledgeButtonToggle()}),$(".retail-consent #rbi-consent-cancel, .retail-consent #rbi-consent-popup-close-button").click(function(){var action="/creditcards/validate/logout";submitRBIMandateForm(action)}),$(".micro-portal-consent #rbi-consent-cancel, .micro-portal-consent #rbi-consent-popup-close-button").click(function(){var action="/creditcards/micro/user/logout";submitRBIMandateForm(action)}),$(".c2b-consent #rbi-consent-cancel, .c2b-consent #rbi-consent-popup-close-button").click(function(){var action="/creditcards/app/campaign/logout";submitRBIMandateForm(action)}),$("#rbi-consent-submit").click(function(){$(this).css("pointer-events","none"),document.getElementById("rbi-consent-form").submit()});var step1Complete=!1,step2Complete=!1,beneficiaryDetailsUpdated=!1,emdEmiFormExists=!1;$(".easyMoneyEMI #next-button-1").click(function(){EasyMoneyOnEMIOmniture(this,1);var offerIndex=$("#offers").find(".selected-option").attr("data-index"),bookingAmnt=$("#emd-form-emi #bookingAmnt-emd-emi").val();emdEmiAmountCheck(offerIndex!=offerIndexGlobal||bookingAmnt!==bookingAmntGlobal),$(".emd-emi-offerList").removeClass("open-emd-emi")}),$(".easyMoneyEMI #next-button-2").click(function(){EasyMoneyOnEMIOmniture(this,2);var maskedEncashEmpty=""==$("#maskedEncashAccNo").val(),neftIfscFieldEmpty=""==$("#neft-ifsc-field").val(),encashConfirmEmpty=""==$("#encashConfirmAccNo").val();(maskedEncashEmpty||neftIfscFieldEmpty||encashConfirmEmpty)&&$("#maskedEncashAccNo, #encashConfirmAccNo, #neft-ifsc-field").change();var maskedEncashError=$("#maskedEncashAccNo").hasClass("error"),neftIfscFieldError=$("#neft-ifsc-field").hasClass("error"),encashConfirmError=$("#encashConfirmAccNo").hasClass("error");maskedEncashError&&$("#maskedEncashAccNo").parent().parent().addClass("width-95-emd-emi"),encashConfirmError&&$("#encashConfirmAccNo").parent().parent().addClass("width-95-emd-emi"),neftIfscFieldError&&$("#neft-ifsc-field").parent().parent().addClass("width-95-emd-emi"),maskedEncashError||encashConfirmError||neftIfscFieldError||($(".step-3-hidden").removeClass("hide"),$(".step-2-hidden").addClass("hide"),step2Complete=!0,$(".step-2 .number-count-emd.emd-emi-tick").removeClass("hidden"),$(".step-2 .number-count-emd.emd-emi-number").addClass("hidden"),$(".emd-amount-booked").text($("bookingAmnt-emd-emi").val()))}),$(".easyMoneyEMI .step-1 .steps").click(function(){$(this).next(".emd-hidden").removeClass("hide"),$(".step-2 .emd-hidden, .step-3 .emd-hidden").addClass("hide"),$(".step-1 .number-count-emd.emd-emi-number").removeClass("hidden"),$(".step-1 .number-count-emd.emd-emi-tick").addClass("hidden"),$(".step-2 .number-count-emd.emd-emi-number").removeClass("hidden"),$(".step-2 .number-count-emd.emd-emi-tick").addClass("hidden"),step1Complete=step2Complete=!1}),$(".easyMoneyEMI .step-2 .steps").click(function(){step1Complete&&($(this).next(".emd-hidden").removeClass("hide"),$(".step-1 .emd-hidden, .step-3 .emd-hidden").addClass("hide"),$(".step-2 .number-count-emd.emd-emi-number").removeClass("hidden"),$(".step-2 .number-count-emd.emd-emi-tick").addClass("hidden"),step2Complete=!1)}),$(".easyMoneyEMI #emd-form-emi #term-condition-id-emd-emi").click(function(){var countNeft=0;$("#emd-form-emi #neftInputFields .neft-input-box").each(function(){""==$(this).val()&&countNeft++}),this.checked&&0==countNeft&&!$("#emd-form-emi #neftInputFields input.error").exists()&&!$("#emd-form-emi #neftInputFields #error").exists()&&$("#encashAccNo").val().length>0&&$("#encashConfirmAccNo").val().length>0&&$("#neft-ifsc-field").val().length>0?$("#emd-form-emi #confirm-button-emd-emi.emd-submit-button, #emd-form-emi #confirm-button-emd-emi-c2b").css("pointer-events","auto").addClass("primary").removeClass("secondary"):$("#emd-form-emi #confirm-button-emd-emi.emd-submit-button, #emd-form-emi confirm-button-emd-emi-c2b").css("pointer-events","none").removeClass("primary").addClass("secondary")}),$(".easyMoneyEMI #emd-form-emi #confirm-button-emd-emi-c2b").click(function(){EasyMoneyOnEMIOmniture(this,3);var loaderHtml='<div class="overlay-loader"></div>';$("body").append(loaderHtml);var passphraseEMDEMI=randomStringGenerator(10,!0,!1);$("#encashAccNo").val(dataEncryptionAES($("#encashAccNo").val(),passphraseEMDEMI)),$("#beneficiaryBankName").val(dataEncryptionAES($("#beneficiaryBankName").val(),passphraseEMDEMI)),$("#neft-ifsc-field").val(dataEncryptionAES($("#neft-ifsc-field").val(),passphraseEMDEMI)),$("#disbursementMode").val(dataEncryptionAES($("#disbursementMode").val(),passphraseEMDEMI)),$("#passphraseEMDEMI").val(passphraseEMDEMI),document.getElementById("emd-form-emi").submit()}),$(".easyMoneyEMI #emd-form-emi #confirm-button-emd-emi").click(function(){EasyMoneyOnEMIOmniture(this,3),$.ajax({url:"/creditcards/app/benefits/send-otp-emd?emiProductCheck=true",type:"POST",beforeSend:function(){$("body").append('<div class="overlay-loader"></div>'),$(".error-block-msg").addClass("hide"),$(".emd-emi.error-section-parent .error-section-flooding, .emd-emi.error-section-parent .error-section-generic, .separator").hide()},complete:function(){$("body").find("div.overlay-loader").remove()},success:function(response){console.log(response);var mesg=response.message;response.success||response.alreadyExists?($(".otp-section.emd-emi, .emd-hr-3-pro").removeClass("hide"),$(".button-row.encash-btns.emd-emi").hide(),$(".emd-emi-info-text .fancy-checkbox").css("pointer-events","none")):mesg.indexOf("Maximum OTP delivery attempts reached")>-1?$(".emd-emi.error-section-parent .error-section-flooding").show():$(".emd-emi.error-section-parent .error-section-generic").show()},error:function(){$("body").find("div.overlay-loader").remove()}})}),$(".easyMoneyEMI #emd-form-emi #emd-emi-regenerate").click(function(){$.ajax({url:"/creditcards/app/benefits/resend-otp-emd?emiProductCheck=true",type:"POST",beforeSend:function(){$("body").append('<div class="overlay-loader"></div>'),$(".error-block-msg").addClass("hide"),$(".emd-emi #otp-msg").hide(),$(".emd-emi .error-section.otp-flooding, .separator, .emd-emi .error-section.resend-otp-exhaust").hide()},complete:function(){$("body").find("div.overlay-loader").remove()},success:function(data){if(console.log(data),data.resendEnabled)$(".emd-emi #otp-msg").show();else{$("#emd-emi-regenerate").addClass("disable-a");var mesg=data.message;mesg.indexOf("Maximum OTP delivery attempts reached")>-1?$(".emd-emi .error-section.otp-flooding.hide, .separator").show():$(".emd-emi .error-section.resend-otp-exhaust.hide, .separator").show()}},error:function(){$("body").find("div.overlay-loader").remove()}})});var offerIndexGlobal="",bookingAmntGlobal="",emdEmiAmountCheck=function(amountCheckNeeded){if(!amountCheckNeeded)return step1Complete=!0,void openStep2CloseStep1();if(validateBookingAmountAndOfferEmdEMI($("#emd-form-emi"))){var maxAmount=$("#emd-form-emi #maxAmount").val(),minAmount=$("#offers").find(".selected-option").attr("data-min"),offerIndex=$("#offers").find(".selected-option").attr("data-index"),bookingAmnt=$("#emd-form-emi #bookingAmnt-emd-emi").val();if(parseFloat(offerIndex)>=0&&parseFloat(bookingAmnt)>=parseFloat(minAmount)&&parseFloat(bookingAmnt)<=parseFloat(maxAmount)){$("#emd-form-emi #bookingAmnt-emd-emi").removeClass("error"),$("#emd-form-emi #bookingAmnt-emd-emi").parent().parent().addClass("width-95-emd-emi"),$("#emd-form-emi #bookingAmnt-emd-emi").next("label[for='amount']").addClass("valid"),$("#emd-form-emi").find("#enter-otp-field").find("label.error").remove(),$("#emd-form-emi").find("#enter-otp-field").find("label.valid").remove();var href=$("#emd-form-emi #bookingAmnt-emd-emi").attr("data-action");href&&$.ajax({type:"POST",data:{offerIndex:offerIndex,paymentMode:"NEFT",requestedAmount:bookingAmnt},url:href,beforeSend:function(){var loaderHtml='<div class="overlay-loader"></div>';$("body").append(loaderHtml),$(".label-option.alert-message-emd-emi").addClass("hide"),$(".label-option.alert-message-emd-emi p").empty()},success:function(data){data.success?(beneficiaryDetailsUpdated?(openStep2CloseStep1(),$("body").find("div.overlay-loader").remove()):addBeneficiaryDetails(),step1Complete=!0,offerIndexGlobal=offerIndex,bookingAmntGlobal=bookingAmnt,$(".emd-emi-amount").html('<em class="WebRupee">Rs.</em> '+data.savingsInfo.emi),$(".emd-process-fee").html('<em class="WebRupee">Rs.</em> '+data.processingFee),$(".emd-amount-booked").html('<em class="WebRupee">Rs.</em> '+data.totalAmount),$("#emd-emi-gst").text(data.gstOnProcessingFee),$(".emd-interest").html($(".easyMoneyEMI").exists()?(Number(data.interest)/12).toString().substring(0,4)+" %":data.interest+" % P.M."),$(".emd-months").html(data.tenure+" days")):($(".label-option.alert-message-emd-emi").removeClass("hide"),$(".label-option.alert-message-emd-emi p").html(data.message).css("line-height","1.83"),$("body").find("div.overlay-loader").remove())},error:function(xhr){"901"==xhr.status&&(window.location.href="/creditcards/app/user/login/error/invalidSession")}})}else $("#emd-form-emi #bookingAmnt-emd-emi").addClass("error"),$("#emd-form-emi #bookingAmnt-emd-emi").next("label[for='bookingAmnt-emd-emi']").removeClass("valid").addClass("error"),$("#emd-form-emi #bookingAmnt-emd-emi").parent().parent().addClass("width-95-emd-emi")}};$(".easyMoneyEMI #emd-form-emi").validate({onkeyup:!1,rules:{savingsAccountNumber:{required:!0},bankName:{required:!0},ifscCode:{required:!0},bookingAmnt:{required:!0}},errorPlacement:function($error,$element){var elementName=$element.attr("name"),lastInGroup=$.map(this.groups,function(fields){var fieldsArr;return fields.indexOf(elementName)>=0?(fieldsArr=fields.split(" "),fieldsArr[fieldsArr.length-1]):null})[0];lastInGroup?$error.insertAfter($("input[name='"+lastInGroup+"']")):"bookingAmnt"!=$element.attr("name")&&$error.insertAfter($element)},success:function(){validClass="valid"},highlight:function(element,errorClass,validClass){$(element).addClass(errorClass).removeClass(validClass)},unhighlight:function(element,errorClass,validClass){"bookingAmnt-emd-emi"!=element.id&&($(element).removeClass(errorClass).addClass(validClass),$(element).next("label").addClass(validClass))},submitHandler:function(){EasyMoneyOnEMIOmniture(this,4);var passphraseEMDEMI=randomStringGenerator(10,!0,!1);if($(".otp-section").exists()){var encryptedOtp=$("#emd-emi-otp-field").val();if($("#otp-msg").addClass("hide"),""==encryptedOtp)return void $(".error-block-msg").removeClass("hide");$.ajax({url:"/creditcards/benefits/auth-otp-emd-emi?emiProductCheck=true",type:"POST",data:{otp:encryptedOtp,passphraseEMDEMI:passphraseEMDEMI},beforeSend:function(){$(".separator").addClass("hide");var loaderHtml='<div class="overlay-loader"></div>';$("body").append(loaderHtml),$("#emd-emi-otp-field").val(""),$(".error-section, .error-block-msg").addClass("hide")},success:function(data){var decryptedData=dataDecryptionAES(data,passphraseEMDEMI);if(console.log(decryptedData),data=JSON.parse(decryptedData),"000"==data.statusCode){var loaderHtml='<div class="overlay-loader"></div>';$("body").append(loaderHtml),$("#encashAccNo").val(dataEncryptionAES($("#encashAccNo").val(),passphraseEMDEMI)),$("#beneficiaryBankName").val(dataEncryptionAES($("#beneficiaryBankName").val(),passphraseEMDEMI)),$("#neft-ifsc-field").val(dataEncryptionAES($("#neft-ifsc-field").val(),passphraseEMDEMI)),$("#disbursementMode").val(dataEncryptionAES($("#disbursementMode").val(),passphraseEMDEMI)),$("#passphraseEMDEMI").val(passphraseEMDEMI),document.getElementById("emd-form-emi").submit()}else data.success||1!=data.invalidAttemptsOver?($(".error-block-msg.hide, .separator").removeClass("hide"),$("body").find("div.overlay-loader").remove()):($(".error-section.otp-submit-exhaust.hide, .separator").removeClass("hide"),$("#submit-button-emd-emi").addClass("gray-btn").css("cursor","not-allowed").prop("disabled",!0),$("#emd-emi-regenerate").addClass("disable-a"),$("body").find("div.overlay-loader").remove(),$("#emd-emi-otp-field").prop("readonly",!0).css("cursor","not-allowed"))},error:function(){$("body").find("div.overlay-loader").remove(),$(".error-section-generic.hide, .separator").removeClass("hide")}})}else $("#encashAccNo").val(dataEncryptionAES($("#encashAccNo").val(),passphraseEMDEMI)),$("#beneficiaryBankName").val(dataEncryptionAES($("#beneficiaryBankName").val(),passphraseEMDEMI)),$("#neft-ifsc-field").val(dataEncryptionAES($("#neft-ifsc-field").val(),passphraseEMDEMI)),$("#disbursementMode").val(dataEncryptionAES($("#disbursementMode").val(),passphraseEMDEMI)),$("#passphraseEMDEMI").val(passphraseEMDEMI),document.getElementById("emd-form-emi").submit()}}),$(".easyMoneyEMI #bookingAmnt-emd-emi").blur(function(){var bookingAmnt=$("#emd-form-emi").find("#bookingAmnt-emd-emi").val(),minAmount=$("#minAmountEMIAllowed").val(),maxEligibleAmount=$("#emd-form-emi").find("#maxAmount").val();validateBookingAmountEmdEMI(bookingAmnt,minAmount,maxEligibleAmount)}),$(".easyMoneyEMI #neft-beneficiaryAcnt-emd-emi").on("change",function(){$(".neft-input-box").each(function(){$(this).css("border-color","#cdcbcb"),$(this).removeClass("error"),$(this).parent().find("label").remove()}),resetNeftChequeFeild();var selectedIFSC=$(".emd-emi-benificiary-list").find("option:selected").attr("data-ifsc"),selectedBankName=$(this).find("option:selected").attr("data-bankname"),selectedFullBankName=$(this).find("option:selected").attr("data-fullbankname");$("#beneficiaryBankName").val(selectedFullBankName);var selectedAcctNo=$(this).parent().find(".options li.selected").text();$("#neft-ifsc-field").val(selectedIFSC),$("#neft-bankDetail-field").val(selectedBankName),isNaN(selectedAcctNo)||$("#encashAccNo").val(selectedAcctNo);var maskedAcntNo="";for(i=0;i<selectedAcctNo.length;i++)maskedAcntNo+="X";$("#maskedEncashAccNo").val(maskedAcntNo),$("#encashConfirmAccNo").val(selectedAcctNo)}),$(document).ready(function(){$(".easyMoneyEMI .emd-emi-w .dd-options").find("input[name=offerIndex]").each(function(){var str="Interest "+$(this).parent().next("label").find(".percent").text().substring(0,$(this).parent().next("label").find(".percent").text().indexOf("%")+1)+"p.m | "+$(this).parent().next("label").find(".tenure").text()+" months | "+$(this).parent().next("label").find(".procFee").text()+" Process...";
$(this).attr("data-val",str.substring(0,45)+"...")})});var icount=2;$(".easyMoneyEMI .emd-emi.selected").click(function(){$("#offers div .option").slideToggle(),$(".emd-emi-offerList").addClass("open-emd-emi"),$(".fancy-dd .emd-emi.selected").addClass()}),$(".easyMoneyEMI .emd-emi-offerList .option").click(function(){$("span.selected span").text($(this).find("input").attr("data-val")),$("#offers div .option").slideToggle(),$(".emd-emi-offerList").removeClass("open-emd-emi"),$(".emd-emi-offerList.dd-options .option").each(function(){$(this).removeClass("selected-option")}),$(this).addClass("selected-option"),$("label[for=emd-dropdown]").addClass("emd-dropdown-label-105").removeClass("emd-dropdown-label-320")}),$(".easyMoney #next-button-1").click(function(){EasyMoneyOmniture(this,"sbi-card:postloginbenefits:easymoney:enter:amount:select:offer:next");var offerIndex=$("#offers").find(".selected-option").attr("data-index"),bookingAmnt=$("#emd-form-emi #bookingAmnt-emd-emi").val();emdEmiAmountCheck(offerIndex!=offerIndexGlobal||bookingAmnt!==bookingAmntGlobal),$(".emd-emi-offerList").removeClass("open-emd-emi")}),$(".easyMoney #next-button-2").click(function(){EasyMoneyOmniture(this,"sbi-card:postloginbenefits:easymoney:enter:your:bank:neft:details:next");var maskedEncashEmpty=""==$("#maskedEncashAccNo").val(),neftIfscFieldEmpty=""==$("#neft-ifsc-field").val(),encashConfirmEmpty=""==$("#encashConfirmAccNo").val();(maskedEncashEmpty||neftIfscFieldEmpty||encashConfirmEmpty)&&$("#maskedEncashAccNo, #encashConfirmAccNo, #neft-ifsc-field").change();var maskedEncashError=$("#maskedEncashAccNo").hasClass("error"),neftIfscFieldError=$("#neft-ifsc-field").hasClass("error"),encashConfirmError=$("#encashConfirmAccNo").hasClass("error");maskedEncashError&&$("#maskedEncashAccNo").parent().parent().addClass("width-95-emd-emi"),encashConfirmError&&$("#encashConfirmAccNo").parent().parent().addClass("width-95-emd-emi"),neftIfscFieldError&&$("#neft-ifsc-field").parent().parent().addClass("width-95-emd-emi"),maskedEncashError||encashConfirmError||neftIfscFieldError||($(".step-3-hidden").removeClass("hide"),$(".step-2-hidden").addClass("hide"),step2Complete=!0,$(".step-2 .number-count-emd.emd-emi-tick").removeClass("hidden"),$(".step-2 .number-count-emd.emd-emi-number").addClass("hidden"),$(".emd-amount-booked").text($("bookingAmnt-emd-emi").val()))}),$(".easyMoney .step-1 .steps").click(function(){$(this).next(".emd-hidden").removeClass("hide"),$(".step-2 .emd-hidden, .step-3 .emd-hidden").addClass("hide"),$(".step-1 .number-count-emd.emd-emi-number").removeClass("hidden"),$(".step-1 .number-count-emd.emd-emi-tick").addClass("hidden"),$(".step-2 .number-count-emd.emd-emi-number").removeClass("hidden"),$(".step-2 .number-count-emd.emd-emi-tick").addClass("hidden"),step1Complete=step2Complete=!1}),$(".easyMoney .step-2 .steps").click(function(){step1Complete&&($(this).next(".emd-hidden").removeClass("hide"),$(".step-1 .emd-hidden, .step-3 .emd-hidden").addClass("hide"),$(".step-2 .number-count-emd.emd-emi-number").removeClass("hidden"),$(".step-2 .number-count-emd.emd-emi-tick").addClass("hidden"),step2Complete=!1)}),$(".easyMoney #emd-form-emi #term-condition-id-emd-emi").click(function(){var countNeft=0;$("#emd-form-emi #neftInputFields .neft-input-box").each(function(){""==$(this).val()&&countNeft++}),this.checked&&0==countNeft&&!$("#emd-form-emi #neftInputFields input.error").exists()&&!$("#emd-form-emi #neftInputFields #error").exists()&&$("#encashAccNo").val().length>0&&$("#encashConfirmAccNo").val().length>0&&$("#neft-ifsc-field").val().length>0?$("#emd-form-emi #confirm-button-emd-emi.emd-submit-button, #emd-form-emi #confirm-button-emd-emi-c2b").css("pointer-events","auto").addClass("primary").removeClass("secondary"):$("#emd-form-emi #confirm-button-emd-emi.emd-submit-button, #emd-form-emi confirm-button-emd-emi-c2b").css("pointer-events","none").removeClass("primary").addClass("secondary")}),$(".easyMoney #emd-form-emi #confirm-button-emd-emi-c2b").click(function(){EasyMoneyOmniture(this,"sbi-card:postloginbenefits:easymoney:verify:and:confirm:your:otp:submit");var loaderHtml='<div class="overlay-loader"></div>';$("body").append(loaderHtml);var passphraseEMDEMI=randomStringGenerator(10,!0,!1);$("#encashAccNo").val(dataEncryptionAES($("#encashAccNo").val(),passphraseEMDEMI)),$("#beneficiaryBankName").val(dataEncryptionAES($("#beneficiaryBankName").val(),passphraseEMDEMI)),$("#neft-ifsc-field").val(dataEncryptionAES($("#neft-ifsc-field").val(),passphraseEMDEMI)),$("#disbursementMode").val(dataEncryptionAES($("#disbursementMode").val(),passphraseEMDEMI)),$("#passphraseEMDEMI").val(passphraseEMDEMI),document.getElementById("emd-form-emi").submit()}),$(".easyMoney #emd-form-emi #confirm-button-emd-emi").click(function(){EasyMoneyOmniture(this,"sbi-card:postloginbenefits:easymoney:verify:and:confirm:your:bookings:confirm"),$.ajax({url:"/creditcards/app/benefits/send-otp-emd",type:"POST",beforeSend:function(){$("body").append('<div class="overlay-loader"></div>'),$(".error-block-msg").addClass("hide"),$(".emd-emi.error-section-parent .error-section-flooding, .emd-emi.error-section-parent .error-section-generic, .separator").hide()},complete:function(){$("body").find("div.overlay-loader").remove()},success:function(response){console.log(response);var mesg=response.message;response.success||response.alreadyExists?($(".otp-section.emd-emi, .emd-hr-3-pro").removeClass("hide"),$(".button-row.encash-btns.emd-emi").hide(),$(".emd-emi-info-text .fancy-checkbox").css("pointer-events","none")):mesg.indexOf("Maximum OTP delivery attempts reached")>-1?$(".emd-emi.error-section-parent .error-section-flooding").show():$(".emd-emi.error-section-parent .error-section-generic").show()},error:function(){$("body").find("div.overlay-loader").remove()}})}),$(".easyMoney #emd-form-emi #emd-emi-regenerate").click(function(){$.ajax({url:"/creditcards/app/benefits/resend-otp-emd",type:"POST",beforeSend:function(){$("body").append('<div class="overlay-loader"></div>'),$(".error-block-msg").addClass("hide"),$(".emd-emi #otp-msg").hide(),$(".emd-emi .error-section.otp-flooding, .separator, .emd-emi .error-section.resend-otp-exhaust").hide()},complete:function(){$("body").find("div.overlay-loader").remove()},success:function(data){if(console.log(data),data.resendEnabled)$(".emd-emi #otp-msg").show();else{$("#emd-emi-regenerate").addClass("disable-a");var mesg=data.message;mesg.indexOf("Maximum OTP delivery attempts reached")>-1?$(".emd-emi .error-section.otp-flooding.hide, .separator").show():$(".emd-emi .error-section.resend-otp-exhaust.hide, .separator").show()}},error:function(){$("body").find("div.overlay-loader").remove()}})}),$(".easyMoney #emd-form-emi").validate({onkeyup:!1,rules:{savingsAccountNumber:{required:!0},bankName:{required:!0},ifscCode:{required:!0},bookingAmnt:{required:!0}},errorPlacement:function($error,$element){var elementName=$element.attr("name"),lastInGroup=$.map(this.groups,function(fields){var fieldsArr;return fields.indexOf(elementName)>=0?(fieldsArr=fields.split(" "),fieldsArr[fieldsArr.length-1]):null})[0];lastInGroup?$error.insertAfter($("input[name='"+lastInGroup+"']")):"bookingAmnt"!=$element.attr("name")&&$error.insertAfter($element)},success:function(){validClass="valid"},highlight:function(element,errorClass,validClass){$(element).addClass(errorClass).removeClass(validClass)},unhighlight:function(element,errorClass,validClass){"bookingAmnt-emd-emi"!=element.id&&($(element).removeClass(errorClass).addClass(validClass),$(element).next("label").addClass(validClass))},submitHandler:function(){EasyMoneyOmniture(this,"sbi-card:postloginbenefits:easymoney:verify:and:confirm:your:otp:submit");var passphraseEMDEMI=randomStringGenerator(10,!0,!1);if($(".otp-section").exists()){var encryptedOtp=$("#emd-emi-otp-field").val();if($("#otp-msg").addClass("hide"),""==encryptedOtp)return void $(".error-block-msg").removeClass("hide");$.ajax({url:"/creditcards/benefits/auth-otp-emd-emi",type:"POST",data:{otp:encryptedOtp,passphraseEMDEMI:passphraseEMDEMI},beforeSend:function(){$(".separator").addClass("hide");var loaderHtml='<div class="overlay-loader"></div>';$("body").append(loaderHtml),$("#emd-emi-otp-field").val(""),$(".error-section, .error-block-msg").addClass("hide"),$(".emd-emi #otp-msg").hide()},success:function(data){var decryptedData=dataDecryptionAES(data,passphraseEMDEMI);if(console.log(decryptedData),data=JSON.parse(decryptedData),"000"==data.statusCode){var loaderHtml='<div class="overlay-loader"></div>';$("body").append(loaderHtml),$("#encashAccNo").val(dataEncryptionAES($("#encashAccNo").val(),passphraseEMDEMI)),$("#beneficiaryBankName").val(dataEncryptionAES($("#beneficiaryBankName").val(),passphraseEMDEMI)),$("#neft-ifsc-field").val(dataEncryptionAES($("#neft-ifsc-field").val(),passphraseEMDEMI)),$("#disbursementMode").val(dataEncryptionAES($("#disbursementMode").val(),passphraseEMDEMI)),$("#passphraseEMDEMI").val(passphraseEMDEMI),document.getElementById("emd-form-emi").submit()}else data.success||1!=data.invalidAttemptsOver?($(".error-block-msg.hide, .separator").removeClass("hide"),$("body").find("div.overlay-loader").remove()):($(".error-section.otp-submit-exhaust.hide, .separator").removeClass("hide"),$("#submit-button-emd-emi").addClass("gray-btn").css("cursor","not-allowed").prop("disabled",!0),$("#emd-emi-regenerate").addClass("disable-a"),$("body").find("div.overlay-loader").remove(),$("#emd-emi-otp-field").prop("readonly",!0).css("cursor","not-allowed"))},error:function(){$("body").find("div.overlay-loader").remove(),$(".error-section-generic.hide, .separator").removeClass("hide")}})}else $("#encashAccNo").val(dataEncryptionAES($("#encashAccNo").val(),passphraseEMDEMI)),$("#beneficiaryBankName").val(dataEncryptionAES($("#beneficiaryBankName").val(),passphraseEMDEMI)),$("#neft-ifsc-field").val(dataEncryptionAES($("#neft-ifsc-field").val(),passphraseEMDEMI)),$("#disbursementMode").val(dataEncryptionAES($("#disbursementMode").val(),passphraseEMDEMI)),$("#passphraseEMDEMI").val(passphraseEMDEMI),document.getElementById("emd-form-emi").submit()}}),$(".easyMoney #bookingAmnt-emd-emi").blur(function(){var bookingAmnt=$("#emd-form-emi").find("#bookingAmnt-emd-emi").val(),minAmount=$("#minAmountEMIAllowed").val(),maxEligibleAmount=$("#emd-form-emi").find("#maxAmount").val();validateBookingAmountEmdEMI(bookingAmnt,minAmount,maxEligibleAmount)}),$(".easyMoney #neft-beneficiaryAcnt-emd-emi").on("change",function(){$(".neft-input-box").each(function(){$(this).css("border-color","#cdcbcb"),$(this).removeClass("error"),$(this).parent().find("label").remove()}),resetNeftChequeFeild();var selectedIFSC=$(".emd-emi-benificiary-list").find("option:selected").attr("data-ifsc"),selectedBankName=$(this).find("option:selected").attr("data-bankname"),selectedFullBankName=$(this).find("option:selected").attr("data-fullbankname");$("#beneficiaryBankName").val(selectedFullBankName);var selectedAcctNo=$(this).parent().find(".options li.selected").text();$("#neft-ifsc-field").val(selectedIFSC),$("#neft-bankDetail-field").val(selectedBankName),isNaN(selectedAcctNo)||$("#encashAccNo").val(selectedAcctNo);var maskedAcntNo="";for(i=0;i<selectedAcctNo.length;i++)maskedAcntNo+="X";$("#maskedEncashAccNo").val(maskedAcntNo),$("#encashConfirmAccNo").val(selectedAcctNo)}),$(document).ready(function(){$(".easyMoney .emd-emi-w .dd-options").find("input[name=offerIndex]").each(function(){var str="Interest "+$(this).parent().next("label").find(".percent").text().substring(0,$(this).parent().next("label").find(".percent").text().indexOf("%")+1)+"p.m | "+$(this).parent().next("label").find(".tenure").text()+" days | "+$(this).parent().next("label").find(".procFee").text()+" Process...";$(this).attr("data-val",str.substring(0,45)+"...")}),$(document).click(function(){$("article.name-emd-emi.tooltip-visible").removeClass("tooltip-visible")})}),$(".easyMoney .emd-emi.selected").click(function(){$("#offers div .option").slideToggle(),$(".emd-emi-offerList").addClass("open-emd-emi"),$(".fancy-dd .emd-emi.selected").addClass()}),$(".easyMoney .emd-emi-offerList .option").click(function(){$("span.selected span").text($(this).find("input").attr("data-val")),$("#offers div .option").slideToggle(),$(".emd-emi-offerList").removeClass("open-emd-emi"),$(".emd-emi-offerList.dd-options .option").each(function(){$(this).removeClass("selected-option")}),$(this).addClass("selected-option"),$("label[for=emd-dropdown]").addClass("emd-dropdown-label-105").removeClass("emd-dropdown-label-320")}),$("span.name-emd-emi").parent().click(function(){$("article.name-emd-emi").toggleClass("tooltip-visible")}),$(document).ready(function(){function isKYCsubmitValid(){isValidKYCDropdown&&isValidKYCUploadSize&&isValidKYCUploadFormat?$(".kycWorkflowJourney #KYC-submit").removeClass("disabled"):$(".kycWorkflowJourney #KYC-submit").addClass("disabled")}if("true"==$("#proceedToKYCJourney").val()){$(".fancy.addOn-dropbox.fancified").parent().find(".trigger").css("pointer-events","auto"),$("#kycLinkClicked").val("N"),$(".updateVerifyJourney .readonly-email-block .masked").css("display","none"),$(".updateVerifyJourney .readonly-email-block .unmasked").css("display","block"),$(".updateVerifyJourney .readonly-mobile-block .masked").css("display","none"),$(".updateVerifyJourney .readonly-mobile-block .unmasked").css("display","block"),$(".updateVerifyJourney .update-email-block").removeClass("hide-section"),$(".updateVerifyJourney .update-phone-number-block").removeClass("hide-section"),$(".updateVerifyJourney .gray-otp-wrapp.unmaskingOtpSection").css("display","none"),$(".updateVerifyJourney .verify-block").css("display","none"),$(".fancy.addOn-dropbox.fancified").parent().find(".trigger").css("pointer-events","none"),$(".updateVerifyJourney .view-edit-details").addClass("hide-section");var mobileValue=$("#primary-MobileNumber").val(),emailValue=$("#primary-EmailId").val();$(".updateVerifyJourney .readonly-email-block .unmasked").empty(),$(".updateVerifyJourney .readonly-email-block .unmasked").append(emailValue),$(".updateVerifyJourney .readonly-mobile-block .unmasked").empty(),$(".updateVerifyJourney .readonly-mobile-block .unmasked").append("+91"+mobileValue)}if($(".updateVerifyJourney .conatct-block").on("click",function(){var cardType=$("#addon-cardType").val();"S"==cardType||"A"==cardType?($(".tooltip-primary-email.primary").hide(),$(".tooltip-primary-email.addon").show(),$(".tooltip-primary-mobile.primary").hide(),$(".tooltip-primary-mobile.addon").show()):("P"==cardType||""==cardType)&&($(".tooltip-primary-email.primary").show(),$(".tooltip-primary-email.addon").hide(),$(".tooltip-primary-mobile.primary").show(),$(".tooltip-primary-mobile.addon").hide())}),$(".updateVerifyJourney").is(":visible")){var isVisibleVerifyButton=$("#isVisibleVerifyButton").val(),isEmailVerifyElligible=$("#isEmailVerifyElligible").val(),emailField=$("#primary-EmailId").val(),cardType=$("#addon-cardType").val();"N"==isVisibleVerifyButton&&"true"==isEmailVerifyElligible&&""!=emailField&&"P"==cardType?$(".updateVerifyJourney .verify-block a").show():$(".updateVerifyJourney .verify-block a").hide()}$("#emailVerified").val("N"==isVisibleVerifyButton&&"true"==isEmailVerifyElligible&&""!=emailField?"N":"Y");var fetch_emailID=$(".updateVerifyJourney .editable-email-block input").val(),regex=/^(([^<>()\[\]\\.,;:!#{}'?\/|`~$%^&*+=\s@"]+(\.[^<>()\[\]\\.,;:!#{}'?\/|`~$%^&*+=\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;regex.test(fetch_emailID)?$(".updateVerifyJourney .editable-email-block .rmv").removeClass("disabled"):$(".updateVerifyJourney .editable-email-block .rmv").addClass("disabled");var fetch_mobileNumber=$(".updateVerifyJourney .editable-mobile-block input").val();fetch_mobileNumber&&(fetch_mobileNumber.length>9&&fetch_mobileNumber.match(/^[1-9][0-9]+/)?$(".updateVerifyJourney .editable-mobile-block .rmv").removeClass("disabled"):$(".updateVerifyJourney .editable-mobile-block .rmv").addClass("disabled")),$(".unmaskingOtpSection #unmaskingOtp, .verifyOtpSection #verifyOtp, .kycOtpSection #kycOtp, .updateOtpSection #updateOtp").bind("cut copy paste drop",function(e){e.preventDefault()});var isValidKYCUploadFormat=!1,isValidKYCUploadSize=!1,isValidKYCDropdown=!1;$(document).on("change","select#kycDocumentDropdown",function(evt){evt.preventDefault();var $option=$(this.options[this.selectedIndex]),value=$option.val();"Select"!=value?(isValidKYCDropdown=!0,$(".kycWorkflowJourney .file-upload-field").css("pointer-events","auto")):(isValidKYCDropdown=!1,$(".kycWorkflowJourney .file-upload-field").css("pointer-events","none")),"aadhar"==value.toLowerCase()||"aadhaar"==value.toLowerCase()?$("#adahar_disclaimer").show():$("#adahar_disclaimer").hide(),isKYCsubmitValid()}),$(".kycWorkflowJourney .file-upload-field").change(function(e){const file=e.target.files[0];if(""===$(".kycWorkflowJourney .file-upload-field").val())return $(".kycWorkflowJourney .KYC-field-error").css("display","none"),$(".kycWorkflowJourney .KYC-field-valid").css("display","none"),$(".kycWorkflowJourney .file-upload-wrapper").css("outline","none"),$(".kycWorkflowJourney .KYC-file-error").css("visibility","hidden"),$(".kycWorkflowJourney #KYC-submit").addClass("disabled"),isValidKYCUploadFormat=!1,isValidKYCUploadSize=!1,$(".kycWorkflowJourney .KYC-file-error").css("display","none"),void $(".kycWorkflowJourney .KYC-file-valid").css("display","none");var MBsize=file.size/1048576,ext=file.name.split(".").pop();"png"!==ext&&"jpeg"!==ext&&"pdf"!==ext&&"tiff"!==ext&&"gif"!==ext&&"jpg"!==ext?($(".kycWorkflowJourney .KYC-format-error").css("display","block"),isValidKYCUploadFormat=!1):($(".kycWorkflowJourney .KYC-format-error").css("display","none"),isValidKYCUploadFormat=!0),5>MBsize?($(".kycWorkflowJourney .KYC-fileSize-error").css("display","none"),isValidKYCUploadSize=!0):($(".kycWorkflowJourney .KYC-fileSize-error").css("display","block"),isValidKYCUploadSize=!1),isValidKYCUploadFormat&&isValidKYCUploadSize?($(".kycWorkflowJourney .KYC-field-error").css("display","none"),$(".kycWorkflowJourney .KYC-field-valid").css("display","inline-block"),$(".kycWorkflowJourney .file-upload-wrapper").css("outline","none"),$(".kycWorkflowJourney .KYC-file-error").css("visibility","hidden"),$(".kycWorkflowJourney .KYC-file-valid").css("visibility","visible"),$(".kycWorkflowJourney .KYC-success-upload").css("display","block"),$(".kycWorkflowJourney .KYC-file-error").css("display","none"),$(".kycWorkflowJourney .KYC-file-valid").css("display","block")):($(".kycWorkflowJourney .KYC-field-error").css("display","inline-block"),$(".kycWorkflowJourney .KYC-field-valid").css("display","none"),$(".kycWorkflowJourney .file-upload-wrapper").css("outline","1px solid red"),$(".kycWorkflowJourney .KYC-file-error").css("visibility","visible"),$(".kycWorkflowJourney .KYC-file-valid").css("visibility","hidden"),$(".kycWorkflowJourney .KYC-success-upload").css("display","none"),$(".kycWorkflowJourney .KYC-file-error").css("display","block"),$(".kycWorkflowJourney .KYC-file-valid").css("display","none")),isKYCsubmitValid()}),$(".form-upload").on("change",".file-upload-field",function(){$(this).parent(".file-upload-wrapper").attr("data-text",$(this).val().replace(/.*(\/|\\)/,""))}),$(".unmaskingOtpSection #unmaskingOtp").on("keyup",function(){var otpData=$(".unmaskingOtpSection #unmaskingOtp").val();otpData?otpData.length>5?$(".unmaskingOtpSection .rmv").removeClass("disabled"):($(".unmaskingOtpSection #unmaskingOtp").css("border","1px solid #ddd"),$(".unmaskingOtpSection #unmasking-otp-err").hide(),$(".unmaskingOtpSection .rmv").addClass("disabled")):$(".unmaskingOtpSection .rmv").addClass("disabled")}),$(".verifyOtpSection #verifyOtp").on("keyup",function(){var otpData=$(".verifyOtpSection #verifyOtp").val();otpData?otpData.length>5?$(".verifyOtpSection .rmv").removeClass("disabled"):($(".verifyOtpSection #verifyOtp").css("border","1px solid #ddd"),$(".verifyOtpSection #verify-otp-err").hide(),$(".verifyOtpSection .rmv").addClass("disabled")):$(".verifyOtpSection .rmv").addClass("disabled")}),$(".updateOtpSection #updateOtp").on("keyup",function(){var otpData=$(".updateOtpSection #updateOtp").val();otpData?otpData.length>5?$(".updateOtpSection .rmv").removeClass("disabled"):($(".updateOtpSection #updateOtp").css("border","1px solid #ddd"),$(".updateOtpSection #update-otp-err").hide(),$(".updateOtpSection .rmv").addClass("disabled")):$(".updateOtpSection .rmv").addClass("disabled")}),$(".kycOtpSection #kycOtp").on("keyup",function(){var otpData=$(".kycOtpSection #kycOtp").val();otpData?otpData.length>5?$(".kycOtpSection .rmv").removeClass("disabled"):($(".kycOtpSection #kycOtp").css("border","1px solid #ddd"),$(".kycOtpSection #kyc-otp-err").hide(),$(".kycOtpSection .rmv").addClass("disabled")):$(".kycOtpSection .rmv").addClass("disabled")}),$(".updateVerifyJourney .editable-mobile-block input").on("keyup blur",function(){var mobileNumber=$(".updateVerifyJourney .editable-mobile-block input").val();$("#mobile-field-error").hide(),$('#contact-update-form-retail:has(".ucic-mobile-check-block")').length>0&&0==$(".addon-card #addon-card").val()?mobileNumber.length>9&&mobileNumber.match(/^[1-9][0-9]+/)?($("#mobile_ucicCheck").is(":checked")&&$(".updateVerifyJourney .editable-mobile-block .rmv").removeClass("disabled"),$(".updateVerifyJourney .editable-mobile-block input").css("border","1px solid #cdcbcb"),$(".updateVerifyJourney .mobile-field-error").css("display","none")):($(".updateVerifyJourney .editable-mobile-block .rmv").addClass("disabled"),$(".updateVerifyJourney .editable-mobile-block input").css("border","1px solid red"),$(".updateVerifyJourney .mobile-field-error").css("display","inline-block")):mobileNumber.length>9&&mobileNumber.match(/^[1-9][0-9]+/)?($(".updateVerifyJourney .editable-mobile-block .rmv").removeClass("disabled"),$(".updateVerifyJourney .editable-mobile-block input").css("border","1px solid #cdcbcb"),$(".updateVerifyJourney .mobile-field-error").css("display","none")):($(".updateVerifyJourney .editable-mobile-block .rmv").addClass("disabled"),$(".updateVerifyJourney .editable-mobile-block input").css("border","1px solid red"),$(".updateVerifyJourney .mobile-field-error").css("display","inline-block"))}),$(".updateVerifyJourney .editable-email-block input").on("keyup blur",function(){$("#nochangeEmail").hide();var newEmail=$(".updateVerifyJourney .editable-email-block input").val(),regex=/^(([^<>()\[\]\\.,;:!#{}'?\/|`~$%^&*+=\s@"]+(\.[^<>()\[\]\\.,;:!#{}'?\/|`~$%^&*+=\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;$('#contact-update-form-retail:has(".ucic-email-check-block")').length>0&&0==$(".addon-card #addon-card").val()?regex.test(newEmail)?($("#email_ucicCheck").is(":checked")&&$(".updateVerifyJourney .editable-email-block .rmv").removeClass("disabled"),$(".updateVerifyJourney .editable-email-block input").css("border","1px solid #cdcbcb"),$(".updateVerifyJourney .email-field-error").css("display","none")):($(".updateVerifyJourney .editable-email-block .rmv").addClass("disabled"),$(".updateVerifyJourney .editable-email-block input").css("border","1px solid red"),$(".updateVerifyJourney .email-field-error").css("display","inline-block")):regex.test(newEmail)?($(".updateVerifyJourney .editable-email-block .rmv").removeClass("disabled"),$(".updateVerifyJourney .editable-email-block input").css("border","1px solid #cdcbcb"),$(".updateVerifyJourney .email-field-error").css("display","none")):($(".updateVerifyJourney .editable-email-block .rmv").addClass("disabled"),$(".updateVerifyJourney .editable-email-block input").css("border","1px solid red"),$(".updateVerifyJourney .email-field-error").css("display","inline-block"))}),$(".unmaskingOtpSection #cancelOTP").click(function(){$(".updateVerifyJourney .gray-otp-wrapp.unmaskingOtpSection").hide(),$(".updateVerifyJourney .view-edit-details").removeClass("hide-section"),$(".updateVerifyJourney .unmaskingOtpSection .rmv").addClass("disabled"),$(".unmaskingOtpSection #unmaskingOtp").val(""),$(this).hide(),$(".error-div").hide(),$(".unmaskingOtpSection #otp-msg").hide(),$(".email-update-form .error-div").css("display","none"),$(".unmaskingOtpSection #unmasking-otp-err").css("display","none"),$(".unmaskingOtpSection #unmaskingOtp").css("border","1px solid #dddddd"),$(".fancy.addOn-dropbox.fancified").parent().find(".trigger").css("pointer-events","auto")}),$(".verifyOtpSection #cancelOTP").click(function(){$(".updateVerifyJourney .gray-otp-wrapp.verifyOtpSection").hide(),$(".updateVerifyJourney .view-edit-details").removeClass("hide-section"),$(".updateVerifyJourney .verifyOtpSection .rmv").addClass("disabled"),$(".verifyOtpSection #verifyOtp").val(""),$(this).hide(),$(".error-div").hide(),$(".email-update-form .error-div").css("display","none"),$(".verifyOtpSection #verify-otp-err").css("display","none"),$(".verifyOtpSection #verifyOtp").css("border","1px solid #dddddd"),$(".fancy.addOn-dropbox.fancified").parent().find(".trigger").css("pointer-events","auto")}),$(".updateVerifyJourney .update-email").click(function(){$(".updateVerifyJourney .readonly-email-block").addClass("hide-section"),$(".updateVerifyJourney .editable-email-block").removeClass("hide-section"),$(".updateVerifyJourney .update-email-block").addClass("hide-section"),$(".updateVerifyJourney .update-phone-number-block").addClass("hide-section");var emailValue=$("#unmaskedEmailId").val();""==!emailValue?($(".updateVerifyJourney .editable-email-block .rmv").removeClass("disabled"),$(".updateVerifyJourney .editable-email-block input").val(emailValue)):($(".updateVerifyJourney .editable-email-block .rmv").addClass("disabled"),$(".updateVerifyJourney .editable-email-block input").val("")),"Y"==$("#kycLinkClicked").val()&&($(".updateVerifyJourney .editable-email-block .rmv").addClass("disabled"),$(".updateVerifyJourney .editable-email-block input").val(""))}),$(".updateVerifyJourney .update-phone-number").click(function(){$(".updateVerifyJourney .readonly-mobile-block").addClass("hide-section"),$(".updateVerifyJourney .editable-mobile-block").removeClass("hide-section"),$(".updateVerifyJourney .update-phone-number-block").addClass("hide-section"),$(".updateVerifyJourney .update-email-block").addClass("hide-section");var mobileValue=$("#unmaskedMobileNo").val();""==!mobileValue?($(".updateVerifyJourney .editable-mobile-block .rmv").removeClass("disabled"),$(".updateVerifyJourney .editable-mobile-block input").val(mobileValue)):($(".updateVerifyJourney .editable-mobile-block .rmv").addClass("disabled"),$(".updateVerifyJourney .editable-mobile-block input").val("")),"Y"==$("#kycLinkClicked").val()&&($(".updateVerifyJourney .editable-mobile-block .rmv").addClass("disabled"),$(".updateVerifyJourney .editable-mobile-block input").val(""))}),$(".updateVerifyJourney #cancelEmailUpdate").click(function(){$("#nochangeEmail").hide(),$(".updateVerifyJourney .readonly-email-block").removeClass("hide-section"),$(".updateVerifyJourney .editable-email-block").addClass("hide-section"),$(".updateVerifyJourney .update-email-block").removeClass("hide-section"),$(".updateVerifyJourney .update-phone-number-block").removeClass("hide-section"),$(".updateVerifyJourney .editable-email-block input").css("border","1px solid #cdcbcb"),$(".updateVerifyJourney .email-field-error").css("display","none"),$(".error-div").hide();var emailValue=$("#unmaskedEmailId").val();$(".updateVerifyJourney .editable-email-block input").val(emailValue),""==!emailValue&&$(".updateVerifyJourney .editable-email-block .rmv").removeClass("disabled"),"View less"==$("#email-view-more").text()&&($("#email-view-more").text("View more"),$(".ucic-moretext-2").slideToggle())}),$(".updateVerifyJourney #cancelMobileUpdate").click(function(){$("#nochangeMobile").hide(),$(".updateVerifyJourney .readonly-mobile-block").removeClass("hide-section"),$(".updateVerifyJourney .editable-mobile-block").addClass("hide-section"),$(".updateVerifyJourney .update-email-block").removeClass("hide-section"),$(".updateVerifyJourney .update-phone-number-block").removeClass("hide-section"),$(".updateVerifyJourney .editable-mobile-block input").css("border","1px solid #cdcbcb"),$(".updateVerifyJourney .mobile-field-error").css("display","none"),$(".error-div").hide();var mobileValue=$("#unmaskedMobileNo").val();$(".updateVerifyJourney .editable-mobile-block input").val(mobileValue),""==!mobileValue&&$(".updateVerifyJourney .editable-mobile-block .rmv").removeClass("disabled"),"View less"==$("#mobile-view-more").text()&&($(".ucic-moretext-2").slideToggle(),$("#mobile-view-more").text("View more"))}),$(".updateOtpSection #cancelOTP").click(function(){$(".updateVerifyJourney .gray-otp-wrapp.updateOtpSection").css("display","none"),$(".updateOtpSection #updateOtp").val(""),$(".updateVerifyJourney .updateOtpSection .rmv").addClass("disabled"),$(this).hide(),$(".error-div").hide(),$(".updateOtpSection #otp-msg").hide(),$(".email-update-form .error-div").css("display","none"),$(".updateOtpSection #update-otp-err").css("display","none"),$(".updateOtpSection #updateOtp").css("border","1px solid #dddddd"),"block"==$(".updateVerifyJourney .editable-email-block span.unmasked").css("display")?($(".updateVerifyJourney .email-submit-div").css("display","block"),$(".updateVerifyJourney .editable-email-block input").css("display","block"),$(".updateVerifyJourney .editable-email-block .unmasked").css("display","none")):($(".updateVerifyJourney .mobile-submit-div").css("display","block"),$(".updateVerifyJourney .editable-mobile-block .mobile-input-group").css("display","block"),$(".updateVerifyJourney .editable-mobile-block .unmasked").css("display","none"))}),$(".kycOtpSection #cancelOTP").click(function(){$(".updateVerifyJourney .gray-otp-wrapp.kycOtpSection").css("display","none"),$(".kycOtpSection #kycOtp").val(""),$(".updateVerifyJourney .kycOtpSection .rmv").addClass("disabled"),$(this).hide(),$(".error-div").hide(),$(".kycOtpSection #otp-msg").hide(),$(".email-update-form .error-div").css("display","none"),$(".kycOtpSection #kyc-otp-err").css("display","none"),$(".kycOtpSection #kycOtp").css("border","1px solid #dddddd"),"block"==$(".updateVerifyJourney .editable-email-block span.unmasked").css("display")?($(".updateVerifyJourney .email-submit-div").css("display","block"),$(".updateVerifyJourney .editable-email-block input").css("display","block"),$(".updateVerifyJourney .editable-email-block .unmasked").css("display","none")):($(".updateVerifyJourney .mobile-submit-div").css("display","block"),$(".updateVerifyJourney .editable-mobile-block .mobile-input-group").css("display","block"),$(".updateVerifyJourney .editable-mobile-block .unmasked").css("display","none"))}),$("#contact-update-form-retail").is(":visible")||$(".new-with-digi").is(":visible")?($(".disclaimer-popup .digiContactChangeJourney").removeClass("hide-section"),$(".disclaimer-popup .normalJourney").addClass("hide-section")):($(".disclaimer-popup .digiContactChangeJourney").addClass("hide-section"),$(".disclaimer-popup .normalJourney").removeClass("hide-section"))});var loaderHtml='<div class="overlay-loader"></div>';$("#anchor-kyc").on("click",function(){var loaderHtml='<div class="overlay-loader"></div>';$("body").append(loaderHtml),$("#proceed_to_kyc_form").submit()}),$(".kyc-flow-wrapp #KYC-submit").on("click",function(){var fileValue=$('.kyc-flow-wrapp input[type="file"]');if(fileValue){var file=fileValue.prop("files")[0],reader=new FileReader,selectedDocType=$("#kycDocumentDropdown").val();reader.readAsDataURL(file);var encryptResult,fileNameExt=file.name.split("\\").pop();reader.onload=function(){encryptResult=btoa(reader.result),$.ajax({url:"/safe/upload-file.do",type:"POST",contentType:"application/json",data:JSON.stringify({encodedFile:encryptResult,fileType:selectedDocType,fileExt:fileNameExt,authStr:"ABCD"}),beforeSend:function(){$(".kycOtpSection #otp-msg").hide();
var loaderHtml='<div class="overlay-loader"></div>';$("body").append(loaderHtml)},success:function(data){null!=data.docRefId&&"null"!=data.docRefId?(submitKYCdoc(data.docRefId,selectedDocType),console.log("success in doc upload=>"+data)):($("body").find("div.overlay-loader").remove(),console.log("error in doc"))},error:function(){$("body").find("div.overlay-loader").remove()}})}}}),$(document).ready(function(){"true"==$("#proceedToKYCJourney").val()&&$(".fancy.addOn-dropbox.fancified").parent().find(".trigger").css("pointer-events","auto")}),$(document).ready(function(){$('#kyc-upload-form:has("#ucic-kyc")').length>0&&0==$('input[name="cardforkyc"]:checked').val()?(console.log("check multi"),$('input[name="cardforkyc"]').on("click",function(){0==$('input[name="cardforkyc"]:checked').val()?(console.log("ucic 1.1"),$("#ucic-kyc").removeClass("hidden"),$("#kyc-discalimer_ucic").is(":checked")||($("#kyc-submit-button").prop("disabled",!0),$("#kyc-submit-button").addClass("secondary kyc-inactive-button").removeClass("primary"),console.log("ucic 1.2"))):($("#ucic-kyc").addClass("hidden"),$("#kyc-submit-button").removeAttr("disabled"),console.log("ucic 1.3"),isKYCSubmitAllowed()&&(console.log("ucic 1.4"),$("#kyc-submit-button").removeClass("secondary kyc-inactive-button").addClass("primary")))}),$("#kyc-discalimer_ucic").on("click",function(){0==$('input[name="cardforkyc"]:checked').val()&&($(this).is(":checked")?($("#kyc-submit-button").removeAttr("disabled"),isKYCSubmitAllowed()&&$("#kyc-submit-button").removeClass("secondary kyc-inactive-button").addClass("primary")):(console.log("uncheck kyc"),$("#kyc-submit-button").prop("disabled",!0),$("#kyc-submit-button").addClass("secondary kyc-inactive-button").removeClass("primary"),$("#consentOnKycAadharDoc").prop("checked",!1).parent().removeClass("checked")))}),$(".kyc-moreless-button-2").click(function(){$(".ucic-moretext-2").slideToggle(),$(".kyc-moreless-button-2").text("View more"==$(".kyc-moreless-button-2").text()?"View less":"View more")})):console.log("not multi acc")}),$(document).ready(function(){if($("#statementAccountNumber").val()){var accountNumber=$("#statementAccountNumber").val(),logoList=$("#logoList").val().split(",");console.log(logoList),console.log(accountNumber);var logo=accountNumber[6]+accountNumber[7]+accountNumber[8];console.log(logo),1==$("#isSimplyCash").val()||"true"==$("#isSimplyCash").val()?($(".hide-unhide-class").hide(),console.log("Inside If block"),logoList.includes(logo)||(console.log("Inside logo mismatch block"),$("#cardCashbackStatement").text().includes("Card Cashback")&&(console.log("Inside text match block"),document.getElementById("cardCashbackStatement").innerHTML="Reward Points",document.getElementById("offerCashbackStatement").innerHTML="Cash Back",document.getElementById("cardCashbackStatement1").innerHTML="Reward Points",document.getElementById("offerCashbackStatement1").innerHTML='Cash Back  (<em class="WebRupee">Rs.</em>)',$(".hide-unhide-class").show()))):(console.log("Inside Else block"),logoList.includes(logo)&&(console.log("Inside logo match block"),$("#rewardsStatement").text().includes("Reward")&&(document.getElementById("rewardsStatement").innerHTML="Card Cashback (<em class=WebRupee>Rs.</em>)",$("#cash-back-text").text($("#cash-back-text").text().replace("Cash Back","Offer Cashback")),$(".hide-unhide-class").hide())))}if($(".rewards-summary.rewards.cashback").is(":visible")){var gregDate=$("#gregDate").val().split(" "),months=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],statementDate=gregDate[0]+"-"+gregDate[1]+"-"+gregDate[2],today=new Date,day=today.getDate(),month=today.getMonth();10>day&&(day="0"+day);var date=day+"-"+months[month]+"-"+today.getFullYear();document.getElementById("date1").innerHTML=statementDate,document.getElementById("date2").innerHTML=date}});var reasonList=[],retentionToolMap=[],moreOffersMap=[],closeWithoutPopup=!1;$(document).ready(function(){var url=window.location.href;if($("#srNumber").val()){var srNumber=$("#srNumber").val();setAnalyticsReasonandSR(url,srNumber,"Submit Button"),setAnalyticsReasonAndButton("credit_card_closure_submit_request","",window.location.href)}$("#credit-card-closure-form").exists()&&(reasonList=$("#reasonListPrimary").val().split(","),retentionToolMap=$("#retentionToolMap").val().split(","),moreOffersMap=$("#moreRadioOfferMap").val().split(","),"1"!=$("#totalAdCrBlkCount").val()||$(".clsr-box1-primary-radio").exists()?$("#totalAdCrBlkCount").val()>"1"&&!$(".clsr-box1-primary-radio").exists()?($(".form-control.custom-select.custom-select1").show(),$(".styled-radio.clsr-box1-addon-radio").attr("checked","checked"),$("#isRadioSelected").val("s-type"),$("#card-cls-step2").addClass("disabled"),$("#AddOnOrPrimary").val("1")):($(".clsr-radiobtn-pdata .field-wrap:first-child .styled-radio.clsr-box1-primary-radio").attr("checked","checked"),$("#clsr-show-val").html("Primary Card: "+$(".clsr-radiobtn-pdata .field-wrap:first-child label.selected").html()),$("#selectedCardNo").val($(".clsr-radiobtn-pdata .field-wrap:first-child label.selected").attr("data-val"))):($(".styled-radio.clsr-box1-addon-radio").attr("checked","checked"),$("#selectedCardNo").val($(".selected.clsr-selected-addon-type").attr("data-val")),$("#AddOnOrPrimary").val("1"),$("#clsr-show-val").html("Add-on Card: "+$(".selected.clsr-selected-addon-type").html())));var fetch_mobileNo=$("#mobileno").val(),fetch_emailId=$("#emailid").val();if(fetch_mobileNo&&mobilenomaskingCardClosure(fetch_mobileNo),fetch_emailId&&emailmaskingCardClosure(fetch_emailId),$(".clsr-box1-addon-radio").on("click",function(){if($(".card-closure-wrapp-first-block .form-control.custom-select.custom-select1").show(),$("#isRadioSelected").val("s-type"),$("#card-closure-addon-list").exists()){$(".radio-block").css("margin-bottom","18px");var selectedData=$(".select-selected").html();$("#card-closure-addon-list option").each(function(){$(this).html()==selectedData&&$("#credit-card-closure-form #selectedCardNo").val($(this).attr("data-val"))})}else{var cardToClose=$(this).parent().parent().parent().find(".selected").attr("data-val");$("#credit-card-closure-form #selectedCardNo").val(cardToClose)}$("#AddOnOrPrimary").val("1")}),$(".clsr-box1-primary-radio").on("click",function(){$("#card-cls-step2").removeClass("disabled"),$(".card-closure-wrapp-first-block .form-control.custom-select.custom-select1").hide(),$(".radio-block").css("margin-bottom","10px");var cardToClose=$(this).parent().parent().parent().find(".selected").attr("data-val"),selectedMaskedCard=$(this).parent().parent().parent().find(".selected").html();$("#clsr-show-val").html("Primary Card: "+selectedMaskedCard),$("#credit-card-closure-form #selectedCardNo").val(cardToClose),$("#AddOnOrPrimary").val("0"),$("#isRadioSelected").val("p-type")}),$("#card-closure-addon-list option").on("click",function(){var cardToClose=$(this).find("option").attr("data-val");$("#credit-card-closure-form #selectedCardNo").val(cardToClose)}),$("#recurtrSelectCard1").on("click",function(){("0"==$("#card-closure-addon-list").val()||0==$("#card-closure-addon-list").val())&&$("#card-cls-step2").addClass("disabled")}),$("#card-cls-step2").click(function(){if($("#outstandingValue").val()>1&&"p-type"==$("#isRadioSelected").val())$(this).parents(".card-closure-wrapp-first-block .collapse-content.reinstatement-content-wrapp").hide(),$(".paymentDue-wrapp").css("display","block"),$("#step2").css("display","none"),$("#card-clsr-tab1 .number-count.check-img").show(),$("#card-clsr-tab1 .number-count.numeric").hide(),$("#clsr-show-val").show();else if($(".paymentDue-wrapp").css("display","none"),$("#step2").css("display","block"),$(this).parents(".card-closure-wrapp-first-block .collapse-content.reinstatement-content-wrapp").hide(),$("#clsr-show-val").show(),$(this).parents(".main-wrap.my-profile").siblings("#step2").show(),$("#step2 .collapse-content.reinstatement-content-wrapp").show(),$("#card-clsr-tab1 .number-count.check-img").show(),$("#card-clsr-tab1 .number-count.numeric").hide(),"p-type"==$("#isRadioSelected").val()){setAnalyticsReasonAndButton("select_card_credit_card_closure_Next_","Primary_Card",window.location.href),$("#primary-selected").css("display","block"),$("#addon-selected").css("display","none");var cardText2=($(".styled-radio.clsr-box1-primary-radio[checked='checked']").parent().parent().parent().find(".label-text").text(),$(".styled-radio.clsr-box1-primary-radio[checked='checked']").parent().parent().parent().find(".selected").text());$("#clsr-show-val").show()}else if("s-type"==$("#isRadioSelected").val())if(setAnalyticsReasonAndButton("select_card_credit_card_closure_Next_","Addon_Card",window.location.href),$("#primary-selected").css("display","none"),$("#addon-selected").css("display","block"),$("#card-closure-addon-list").exists()){var selectedData=$(".select-selected").html();$("#card-closure-addon-list option").each(function(){$(this).html()==selectedData&&($("#credit-card-closure-form #selectedCardNo").val($(this).attr("data-val")),$("#clsr-show-val").html("Add-on Card: "+$(this).text()).show())})}else{setAnalyticsReasonAndButton("select_card_credit_card_closure_Next_","Addon_Card",window.location.href),$("#primary-selected").css("display","none"),$("#addon-selected").css("display","block");var cardToClose=$(".styled-radio.clsr-box1-addon-radio").parent().parent().parent().find(".selected").attr("data-val"),cardText2=$(".styled-radio.clsr-box1-addon-radio").parent().parent().parent().find(".selected").text();$("#credit-card-closure-form #selectedCardNo").val(cardToClose),$("#clsr-show-val").html("Add-on Card: "+cardText2).show()}}),$("#card-clsr-tab1").on("click",function(){$("#outstandingValue").val()>1&&$(".paymentDue-wrapp").css("display","none"),$("#proceed-to-offer").addClass("disabled"),$("#other-text").css("display","none"),$("#step2").css("display","none"),$(".card-closure-wrapp-first-block .collapse-content.reinstatement-content-wrapp").show(),$("#clsr-show-val").hide(),$("#show-reason").css("display","none"),$("#step2 .collapse-content.reinstatement-content-wrapp").hide(),$("#personalised-offer").css("display","none"),$("#addon-card-section").css("display","none"),$("#usage-card-section").css("display","none"),$(".other-offers-wrapp").css("display","none"),$(".other-offers-section").css("display","none"),$("#avail-offer-section").css("display","none"),$("#billing-cycle-div").css("display","none"),$("#otherfeesandcharges").css("display","none"),$("#clsr-show-val").hide(),$("#card-clsr-tab1 .number-count.numeric").hide()}),"716"==$("#statusCode").val()||"714"==$("#statusCode").val()||"816"==$("#statusCode").val()){$("#card-clsr-tab1").css("pointer-events","none"),$("#step2").css("pointer-events","none");{$("#passphrase").val()}$(".show-reason-class").css("display","block");var reason=$("#selectedReasonPostOTP").val(),cardNumber=sessionStorage.getItem("maskedCard");if($("#show-reason").html(reason).show(),$("#step1").css("display","none"),$("#step1 .number-count.numeric").hide(),$("#step1 .number-count.check-img").show(),$("#step2").css("display","block"),$("#step2 .number-count.numeric").hide(),$("#step2 .number-count.check-img").show(),"0"==$("#cardTypePostOTP").val()?($("#personalised-offer").css("display","block"),$("#personalised-offer .number-count.numeric").hide(),$("#personalised-offer .number-count.check-img").show(),$("#personalised-offer .offer-section").css("display","none"),$("#other-offers").css("display","block"),$("#other-offers .number-count.numeric").hide(),$("#other-offers .number-count.check-img").show(),$("#other-offers .other-offers-section").css("display","none"),$("#clsr-show-val").html("Primary Card: "+cardNumber).show()):($("#addon-card-section").css("display","block"),$("#addon-card-section .number-count.numeric").hide(),$("#addon-card-section .number-count.check-img").show(),$("#addon-card-section .addon-benefit-section").css("display","none"),$("#submit-section .number-count.numeric").html("4"),$("#clsr-show-val").html("Add-on Card: "+cardNumber).show()),$("#confirm-card-number").html($("#clsr-show-val").val()),$("#confirm-card-number").html($("#clsr-show-val").html().slice($("#clsr-show-val").html().indexOf("X"),$("#clsr-show-val").html().length+1)),$("#confirm-closure-reason").html(reason),$("#submit-section").css("display","block"),$("#submit-section .collapse-content.reinstatement-content-wrapp").show(),$("#submit-section .collapse-content.reinstatement-content-wrapp.reason-closure").show(),$(".input-block.tick-buttons-block.button-group .blue-btn").removeClass("button-gray").removeClass("disabled"),$(".select-reson-cnt.terms-and-condition-section").show(),$("#selectedCardNo").val($("#selectedCardPostOTP").val()),$("#AddOnOrPrimary").val($("#cardTypePostOTP").val()),$("#selectedReason").val($("#selectedReasonPostOTP").val()),$("#card-closure-otp-err").show(),$("#cardClosureOtpSection").parent().css("display","block"),$(".credit-card-closure-section .button-group").hide(),$(".credit-card-closure-section #terms_conditions").prop("checked",!0),$(".credit-card-closure-section #terms_conditions").prop("disabled",!0),"0"==$("#cardTypePostOTP").val()?$(".styled-radio.clsr-box1-primary-radio").attr("checked","checked"):"1"==$("#cardTypePostOTP").val()&&$(".styled-radio.clsr-box1-addon-radio").attr("checked","checked"),$("#card-closure-addon-list").exists()){$(".card-closure-wrapp-first-block .form-control.custom-select.custom-select1").show();{$(".select-selected").html()}$("#card-closure-addon-list option").each(function(){$(this).attr("data-val")==$("#selectedCardPostOTP").val()&&$("#card-closure-addon-list").parent().find(".select-selected").html($(this).html())})}$("#cardClosureReason option").each(function(){$(this).html()==$("#selectedReasonPostOTP").val()&&$("#cardClosureReason").parent().find(".select-selected").html($(this).html())}),$("html, body").animate({scrollTop:$(".main-wrap.my-profile.border-top.gray-otp-wrapp").offset().top},1e3)}("714"==$("#statusCode").val()||"816"==$("#statusCode").val())&&($("#step2").css("display","block"),$("#card-closure-otp-submit").addClass("button-gray").addClass("disabled"),$(".input-block.tick-buttons-block.button-group .blue-btn").addClass("button-gray").addClass("disabled"),$("#card-cls-step2").addClass("button-gray").addClass("disabled"),$(".card-closure-wrapp-first-block .radio-block").css("pointer-events","none"),$(".form-control.custom-select.custom-select2").css("pointer-events","none"),$(".credit-card-closure-section .sbi-input-checkbox").css("pointer-events","none"),$(".card-closure-wrapp-first-block .collapse-content.reinstatement-content-wrapp .form-control.custom-select .custom-select1").css("pointer-events","none"),$("#card-closure-otp-err").hide(),$(".credit-card-closure-section .error-div").css("display","block"),$(".credit-card-closure-section .error-section").empty(),$(".credit-card-closure-section .error-section").append($("#message").val()),$(".credit-card-closure-section #cancelOTP").css("pointer-events","none"),$(".credit-card-closure-section #card-closure-resendotp").css("color","grey"),$(".credit-card-closure-section #card-closure-resendotp").css("pointer-events","none"),$(".credit-card-closure-section #cardClosureOtp").prop("readonly",!0)),$("#cardClosureOtpSection #cancelOTP").click(function(){setAnalyticsReasonAndButton("otp_confirm_credit_card_closure_Cancel_",$("#cardClosureReason").val().replace(/ /gi,"_"),window.location.href),$("#step2").css("display","block"),$(".credit-card-closure-section .gray-otp-wrapp").hide(),$(".credit-card-closure-section .button-group").show(),$(".credit-card-closure-section #cardClosureOtp").val(""),$(this).hide(),$(".credit-card-closure-section .rmv").addClass("button-gray disabled"),$(".credit-card-closure-section #card-closure-otp-err").css("display","none"),$(".credit-card-closure-section #cardClosureOtp").css("border","1px solid #dddddd"),$(".credit-card-closure-section .error-div").css("display","none"),$(".credit-card-closure-section .rmv").removeClass("button-gray disabled"),$(".credit-card-closure-section #terms_conditions").prop("disabled",!1)}),$("#cardClosureOtpSection #cardClosureOtp").on("keyup",function(){var data=$("#cardClosureOtpSection #cardClosureOtp").val();data.length>0&&($("#cardClosureOtpSection #card-closure-otp-err").css("display","none"),$("#cardClosureOtpSection #cardClosureOtp").css("border","1px solid #dddddd"))}),$(".credit-card-closure-section #terms_conditions").change(function(){$(".credit-card-closure-section input[type=checkbox]").is(":checked")?$(".credit-card-closure-section .rmv").removeClass("button-gray disabled"):$(".credit-card-closure-section .rmv").addClass("button-gray disabled")}),$("#addressChange_Check").click(function(){$("#addressCTA input[type=checkbox]").is(":checked")?$("#AddressChangeProceedBtn .AddchangeProceedbtn").removeClass("gray-btn disabled"):$("#AddressChangeProceedBtn .AddchangeProceedbtn").addClass("gray-btn disabled"),1==$(this).prop("checked")?(console.log("checked ++++++++"),$("#AddressChangeProceedBtn .AddchangeProceedbtn").removeClass("gray-btn disabled")):(console.log("Not checked ++++++++"),$("#AddressChangeProceedBtn .AddchangeProceedbtn").addClass("gray-btn disabled"))})}),$("#addressChange_Check").click(function(){1==$(this).prop("checked")?(console.log("checked ++++++++"),$("#AddressChangeProceedBtn .AddchangeProceedbtn").removeClass("gray-btn disabled")):(console.log("Not checked ++++++++"),$("#AddressChangeProceedBtn .AddchangeProceedbtn").addClass("gray-btn disabled"))});var cardClosureResendOTPCount=0,presentClass="offer-image-annual";$(document).ready(function(){if($("#phoneNumber").val()){var phone=$("#phoneNumber").val();phone=phone.toLowerCase().replace(/x/g,""),$("#last-four-retention").html(phone)}if($("#retentionTool").val()){var phone=$("#phoneNumber").val();phone=phone.toLowerCase().replace(/x/g,""),$("#last-four-retention").html(phone),$("#retention-action").html("billing cycle"==$("#retentionTool").val()?"change in Billing Cycle":"annual fee waiver"==$("#retentionTool").val()?"Waiver of Annual Fee":"fee waiver"==$("#retentionTool").val()?"reversal of "+$("#feeName").val():"reward points"==$("#retentionTool").val()?"credit of bonus Reward Points":$("#retentionTool").val())}$(".select-reason-wrapp .mumer-heading").click(function(){$(".reason-closure").css("display","block"),"p-type"==$("#isRadioSelected").val()?($("#primary-selected").css("display","block"),$("#addon-selected").css("display","none")):"s-type"==$("#isRadioSelected").val()?($("#primary-selected").css("display","none"),$("#addon-selected").css("display","block")):($("#primary-selected").css("display","none"),$("#addon-selected").css("display","block")),$("#personalised-offer").css("display","none"),$("#addon-card-section").css("display","none"),$("#usage-card-section").css("display","none"),$("#other-offers").css("display","none"),$("#avail-offer-section").css("display","none"),$(".avail-offer-div").css("display","none"),$(".other-fees-charges").css("display","none"),$("#submit-section").css("display","none"),uncheckPrevious(0),$("#avail-offer-others").addClass("disabled"),$("#more-radio").val(""),$("#show-reason").html("").hide()}),$("#personalised-offer .mumer-heading").click(function(){$(".offer-section").css("display","block"),$(".other-offers-wrapp").css("display","none"),$("#avail-offer-section").css("display","none"),$(".avail-offer-div").css("display","none"),$(".other-fees-charges").css("display","none"),$("#submit-section").css("display","none"),uncheckPrevious(0),$("#avail-offer-others").addClass("disabled"),$("#more-radio").val("")}),$("#other-offers .mumer-heading").click(function(){$(".other-offers-section").css("display","block"),$("#avail-offer-section").css("display","none"),$(".avail-offer-div").css("display","none"),$(".other-fees-charges").css("display","none"),$("#submit-section").css("display","none")}),$("#addon-card-section .mumer-heading").click(function(){$(".addon-benefit-section").css("display","block"),$("#submit-section").css("display","none")}),$("#reason-select").click(function(){"Others"==$("#cardClosureReason").val()?($("#other-text").css("display","block"),$("#proceed-to-offer").addClass("disabled")):($("#proceed-to-offer").removeClass("disabled"),$("#other-text").css("display","none"))}),$("#reason-select1").click(function(){$("#cardClosureReason").val($("#cardClosureReason1").val()),"Others"==$("#cardClosureReason").val()?($("#other-text").css("display","block"),$("#proceed-to-offer").addClass("disabled")):($("#proceed-to-offer").removeClass("disabled"),$("#other-text").css("display","none"))}),$("#other-text").keyup(function(){$("#other-text").val().length>=20?$("#proceed-to-offer").removeClass("disabled"):$("#proceed-to-offer").addClass("disabled")}),$("#date-select").click(function(){"Select"!=$("#billing-cycle-date").val()&&$("#cycle-change-confirm").removeClass("disabled")}),$("#fees-charges").click(function(){$("#feeObject").val();"Select a Request"!=$("#otherfeesdropdown").val()&&callForFees($("#otherfeesdropdown").val())}),$("#proceed-to-offer").click(function(){var subtext=$("#subtext").val().split(",");if($("#other-offers-intro-text").html(subtext[3]),""==$("#offers-list").val())return $("#submit-section .number-count.numeric").html("3"),void toConfirm();if($("#cardClosureReason").val()==reasonList[2])$("#offer-image").removeClass(presentClass),$("#offer-image").addClass("offer-image-annual"),presentClass="offer-image-annual",$("#per-offer-text").html("Annual Fee Waiver"),$("#retentionTool").val(retentionToolMap[2]),$("#per-offer-subtext").html(subtext[2]);else if("Billing Cycle Issues"==$("#cardClosureReason").val())$("#offer-image").removeClass(presentClass),$("#offer-image").addClass("offer-image-billing"),presentClass="offer-image-billing",$("#per-offer-text").html("Change Billing Cycle"),$("#retentionTool").val(retentionToolMap[1]);else if($("#cardClosureReason").val()==reasonList[0])$("#offer-image").removeClass(presentClass),$("#offer-image").addClass("offer-image-credit"),presentClass="offer-image-credit",$("#per-offer-text").html("Increase Credit Limit"),$("#retentionTool").val(retentionToolMap[0]),$("#per-offer-subtext").html(subtext[1]);else if("Reward Points Related"==$("#cardClosureReason").val()){$("#offer-image").removeClass(presentClass),$("#offer-image").addClass("offer-image-rewards"),presentClass="offer-image-rewards",$("#per-offer-text").html("Get Reward Points"),$("#retentionTool").val(retentionToolMap[4]);var rewardsPoints=$("#reward-points").val();$("#per-offer-subtext").html("Get "+rewardsPoints+" Reward Points")}else $("#cardClosureReason").val()==reasonList[3]&&($("#offer-image").removeClass(presentClass),$("#offer-image").addClass("offer-image-fee"),presentClass="offer-image-fee",$("#per-offer-text").html("Request for Fee Waiver"),$("#retentionTool").val(retentionToolMap[3]),$("#per-offer-subtext").html(subtext[0]));"s-type"==$("#isRadioSelected").val()?$(".addon-card-section").css("display","block"):$("#cardClosureReason").val()==reasonList[6]?($(".other-offers-wrapp").css("display","block"),$(".other-offers-section").css("display","block"),$("#other-offers .number-count.numeric").html("3")):$("#cardClosureReason").val()==reasonList[1]||$("#cardClosureReason").val()==reasonList[4]?($(".other-offers-wrapp").css("display","block"),$(".other-offers-section").css("display","block"),$("#other-offers .number-count.numeric").html("3")):$("#cardClosureReason").val()==reasonList[5]?($("#retentionTool").val(retentionToolMap[5]),cardFeaturesCall("avail offer")):$("#offers-list").val().indexOf($("#retentionTool").val())>-1?($(".personalisedOffer-wrapp").css("display","block"),$("html, body").animate({scrollTop:$("#step2").offset().top},1e3)):($(".other-offers-wrapp").css("display","block"),$(".other-offers-section").css("display","block"),$("#other-offers .number-count.numeric").html("3"),$("#other-offers-intro-text").html($("#cardClosureReason").val()==reasonList[0]?subtext[4]:subtext[3])),$(this).parents(".card-closure-wrapp-first-block .collapse-content.reinstatement-content-wrapp").hide(),$("#step2 .number-count.numeric").hide(),$("#step2 .number-count.check-img").show(),$(".reason-closure").css("display","none"),$("#show-reason").html($("#cardClosureReason").val()).show(),setAnalyticsReasonAndButton("select_a_reason_credit_card_closure_Next_",$("#cardClosureReason").val().replace(/ /gi,"_"),window.location.href)})});var timeopen=!1,languageopen=!1,previousCount;$(document).ready(function(){if($(".activate-card-section").is(":visible")){var value=$("#vintageCardNumber").val(),visibleSection=value.slice(-4);$(".activate-card-section #vintageLastFour").empty(),$(".activate-card-section #vintageLastFour").append(visibleSection)}if($(".cardResultText").is(":visible")){var value=$("#vintageCardNumber").val(),visibleSection=value.slice(-4);$(".activate-result-status #vintageLastFour").empty(),$(".activate-result-status #vintageLastFour").append(visibleSection)}});var retryAttempCount=0;$("#kycDigiLockerFailedRetryBtn").on("click",function(){retryAttempCount++,console.log("%c retryAttempCount ","color:red",retryAttempCount);var retryStatus=$("#RetryStatus").val(),retryItemID=null,retryItemKey=null,retryItemSeq=null,retryOrderId=null,authCode=null,submissionResponse=$("#submissionResponseForm").val(),emailSrNumber=$("#EmailSrNumber").val(),mobileSrNumber=$("#MobileSrNumber").val(),isMobileJourney=$("#isMobileJourney").val(),isEmailJourney=$("#isEmailJourney").val();if(console.log("emailSrNumber",emailSrNumber,"mobileSrNumber",mobileSrNumber,"isMobileJourney",isMobileJourney,"isEmailJourney",isEmailJourney),"Retry with DL"==retryStatus&&(authCode=sessionStorage.getItem("kycDigiLockerAuthCode")),""!=$("#retryItemID").val()&&null!=$("#retryItemID").val()&&(retryItemID=$("#retryItemID").val()),""!=$("#retryItemKey").val()&&null!=$("#retryItemKey").val()&&(retryItemKey=$("#retryItemKey").val()),""!=$("#retryItemSeq").val()&&null!=$("#retryItemSeq").val()&&(retryItemSeq=$("#retryItemSeq").val()),""!=$("#retryOrderId").val()&&null!=$("#retryOrderId").val()&&(retryOrderId=$("#retryOrderId").val()),retryAttempCount>3)$(".quick-contact-page-header").css("display","none"),$(".field-wrap.addon-card.dropbox-Block").css("display","none"),$(".email-update-form .updateVerifyJourney").css("display","none"),$(".email-update-form .retry-screen-digi-locker-with-docupload").css("display","none"),$(".email-update-form .retry-screen-digi-locker-without-docupload").css("display","none"),$(".email-update-form .retry-screen-digi-locker-with-docupload").addClass("display","none"),$(".email-update-form .retry-screen-digi-locker-without-docupload").addClass("display","none"),$(".email-update-form .kyc-retry-button-request-decline-screen").removeClass("hide-section");else{$("#proceed_to_digilocker #submissionResponse").val(submissionResponse),$("#proceed_to_digilocker #retryOrderIdForm").val(retryOrderId),$("#proceed_to_digilocker #retryItemIDForm").val(retryItemID),$("#proceed_to_digilocker #retryItemKeyForm").val(retryItemKey),$("#proceed_to_digilocker #retryItemSeqForm").val(retryItemSeq),$("#proceed_to_digilocker #digiRetryCodeForm").val(authCode),$("#proceed_to_digilocker #emailSrNumberForm").val(emailSrNumber),$("#proceed_to_digilocker #mobileSrNumberForm").val(mobileSrNumber),$("#proceed_to_digilocker #isMobileJourneyForm").val(isMobileJourney),$("#proceed_to_digilocker #isEmailJourneyForm").val(isEmailJourney);var emailUpdateForm=$("#contact-update-form-retail");emailUpdateForm.removeAttr("action");var digiContactUpdateForm=$("#proceed_to_digilocker");digiContactUpdateForm.removeAttr("action"),digiContactUpdateForm.attr("action","/creditcards/app/myprofile/retry-status"),digiContactUpdateForm.submit()}}),$("#kycDigiLockerFailedTryAgainBtn").on("click",function(){openDigiLockerJourney()}),$(document).ready(function(){$(".encash-step2").on("click",function(){var enachregistered=$("#enachregistered").val();console.log("enachregistered value",enachregistered),$(".step-1 .form-field-list input[type='text']").each(function(){if(""==$(this).val()||""==$("#bookingAmnt").val()||""==$("#emi").val()||""==$("#processingFee").val())$(this).css("border","1px solid red");else if(1==enachregistered||"Y"==enachregistered)console.log("Enach Registered"),$(".step-1 .form-field-list").hide(),$(".step-1 .encash_nachsuccess_pd").hide(),$(".encash-step1-span-img").css("display","inline-block"),$(".encash-step1-span-count").hide(),$(".step2-encash-fields").show();else{console.log("enach not registered");var enachRedirectFromEncash=$("#enachRedirectionFormSubmit");enachRedirectFromEncash.attr("action","/creditcards/app/requests/enach-mandate"),$("<input>").attr({name:"encashFlag",id:"enachRedirectingFlagId",type:"hidden",value:!0}).appendTo(enachRedirectFromEncash),enachRedirectFromEncash.submit()}})});var enableProceed2=!0;if($(".encash-step2-proceed-btn").on("click",function(){enableProceed2=!0,"NEFT"==$(".step-2 input[type='radio']").val()?(console.log("NEFT Selected"),$(".step-2 #neftInputFields input[type='text']").each(function(){""==$(this).val()&&($(this).css("border","1px solid red"),enableProceed2=!1)})):(console.log("Cheque Selected"),$(".step-2 #checkInputFields input[type='text']").each(function(){""==$(this).val()&&($(this).css("border","1px solid red"),enableProceed2=!1)})),1==enableProceed2&&($(".step2-encash-fields").hide(),$(".step3-encash-fields, .encash-submit-btns-steps, .encash-tnc-steps").show(),$(".encash-step2-span-img").css("display","inline-block"),$(".encash-step2-span-count").hide(),console.log("step2-encash-fields enable"))}),$(".encash-step2-back-btn").on("click",function(){$(".step2-encash-fields").hide(),$(".step-1 .form-field-list").show(),$(".step-1 .encash_nachsuccess_pd").show(),$(".encash-step1-span-count").show(),$(".encash-step1-span-img").css("display","none")}),$("#encash-step3-back-btn").on("click",function(){$(".step3-encash-fields, .encash-submit-btns-steps, .encash-tnc-steps").hide(),$(".step2-encash-fields").show(),$(".encash-step2-span-img").css("display","none"),$(".encash-step2-span-count").show()}),$(".encash-step1-header").on("click",function(){$(".step3-encash-fields, .encash-submit-btns-steps, .encash-tnc-steps").hide(),$(".step2-encash-fields").hide(),$(".step-1 .form-field-list").show(),$(".encash-step1-span-img").css("display","none"),$(".encash-step1-span-count").show()}),$("#encashRedirectionMassageId").is(":visible")&&$("#enachBilldeskResponseId").exists()){console.log("set intervel function1");var enachInterval=setInterval(function(){console.log("inside set intervel function2");var redirectPageName=$("#redirectPageName").val(),enachFailureTimer=document.querySelector("#enach_billdesk_response_counter"),encashPageRedirectionCount=1*enachFailureTimer.textContent-1;if(enachFailureTimer.textContent=encashPageRedirectionCount,0>=encashPageRedirectionCount){var enachBilldeskResponseSubmitForm=$("#enachBilldeskResponseSubmitForm");"ENCASH"==redirectPageName?enachBilldeskResponseSubmitForm.attr("action","/creditcards/app/benefits/encash"):enachBilldeskResponseSubmitForm.attr("action","/creditcards/app/benefits/encash"),enachBilldeskResponseSubmitForm.submit(),clearInterval(enachInterval)}},1e3)}$("#enachRegistrationRetryButton").on("click",function(){var loaderHtml='<div class="overlay-loader"></div>';$(".modal-overlay").append(loaderHtml),console.log("redirected to billdesk");var pageRedirectionFlagValue=$("#redirectPageName").val(),eNachPaymentType=$("#enach_paymentDebitType").val();console.log(eNachPaymentType,"The payment Type is-------");var href="/creditcards/app/requests/nachRegistration?paymentDebitType="+eNachPaymentType+"@"+pageRedirectionFlagValue;console.log(href,"The HREF is"),$.ajax({url:href,type:"GET",success:function(data){var processDiv="";if(console.log("data==success1234==>"+data[0]),null!=data&&""!=data)var processDiv='<form id = "payNetForm" action="'+data[0].nachRegistrationURL+'" method="POST" name="payNetForm" style="margin-bottom:0px;"><input type="hidden" name="msg" id="msg" value="'+data[0].message+'"/><a href="#" id="enachProceed" class="button primary button-clickToProceed" onClick="payNetForm.submit();setAnalyticsPost(\'Proceed\');closeModalPopup($(this));">Proceed</a><a href="javascript:void(0);" class="button primary button-cancel" onClick="setAnalyticsPost(\'Cancel\');closeModalPopup($(this));">Cancel</a></form>';
0==$(".button-clickToProceed").length&&($("#appendPayNowForm").append(processDiv),document.getElementById("enachProceed").addEventListener("click",function(){console.log(msg.value,"Value of message after reset");var myobj=document.getElementById("payNetForm");myobj.remove(),console.log("Logout before Ajax run"),$.ajax({url:"/creditcards/j_spring_security_logout",type:"GET",success:function(){console.log("Logout Ajax run")}})})),$(".modal-overlay").find("div.overlay-loader").remove(),$(".button-clickToProceed").css("margin-right","5px"),viewport.width>=1024?$("#appendPayNowForm").parents().find(".open").children(".modal").css("margin-top","-267.5px"):viewport.width<767&&$("#appendPayNowForm").parents().find(".open").children(".modal").css("margin-top","0px")},error:function(){console.log("Enter inside failure block")}})})}),$(document).ready(function(){$(".kyc-file-name, .kyc-browse-button").on("click",function(){$("#consentOnKycAadharDoc").prop("checked",!1).parent().removeClass("checked"),$("#kyc-discalimer_ucic").prop("checked",!1).parent().removeClass("checked")}),$(".add-update-wrapper .multiAccount-ucic-checkbox-upd-msg .fancy-checkbox").next().hide()}),$(document).ready(function(){var modifyButtonClicked=sessionStorage.getItem("isKycRenewalModifyJourney"),isModifyJourney=$("#kycRenewalDigiModifyJourney").val(),retryStat=$("#retryStatus").val();if(!$(".credit-card-closure-section").is(":visible")){var x,i,j,l,ll,selElmnt,a,b,c;for(console.log("--------",1==isModifyJourney||isModifyJourney===!0||"true"==isModifyJourney||"true"===isModifyJourney||1==modifyButtonClicked||"true"==modifyButtonClicked||"true"==modifyButtonClicked||1==kycRenewalProceedJourney||1==digiModifyButtonClick||1==kycRenewalModifyJourney||""!=retryStat&&null!=retryStat),1==isModifyJourney||isModifyJourney===!0||"true"==isModifyJourney||"true"===isModifyJourney||1==modifyButtonClicked||"true"==modifyButtonClicked||"true"==modifyButtonClicked||1==kycRenewalProceedJourney||1==digiModifyButtonClick||1==kycRenewalModifyJourney||""!=retryStat&&null!=retryStat?(console.log("%c inside kyc renewal custom class","color:green"),x=document.getElementsByClassName("custom-select")):x=document.getElementsByClassName("custom-select1"),l=x.length,i=0;l>i;i++){for(selElmnt=x[i].getElementsByTagName("select")[0],ll=selElmnt.length,a=document.createElement("DIV"),a.setAttribute("class","select-selected"),a.innerHTML=selElmnt.options[selElmnt.selectedIndex].innerHTML,x[i].appendChild(a),b=document.createElement("DIV"),b.setAttribute("class","select-items select-hide"),j=1;ll>j;j++)c=document.createElement("DIV"),c.innerHTML=selElmnt.options[j].innerHTML,c.addEventListener("click",function(){var y,i,k,s,h,sl,yl;for(s=this.parentNode.parentNode.getElementsByTagName("select")[0],sl=s.length,h=this.parentNode.previousSibling,i=0;sl>i;i++)if(s.options[i].innerHTML==this.innerHTML){for(s.selectedIndex=i,h.innerHTML=this.innerHTML,y=this.parentNode.getElementsByClassName("same-as-selected"),$(".btn-radio-block").addClass("blue-button-remain"),$(".btn-radio-block").removeClass("gray-btn"),$("#card-cls-step2").removeClass("disabled"),yl=y.length,k=0;yl>k;k++)y[k].removeAttribute("class");this.setAttribute("class","same-as-selected");break}h.click()}),b.appendChild(c);x[i].appendChild(b),a.addEventListener("click",function(e){e.stopPropagation(),closeAllSelect(this),this.nextSibling.classList.toggle("select-hide"),this.classList.toggle("select-arrow-active")})}}}),document.addEventListener("click",closeAllSelect);var docuploadEnabled=!1,isAadhaarCardSelected=!1,isDocUploadForAadhaarValid=!1,isValidKYCAddrDropdown=!1;$(document).ready(function(){function isKYCsubmitAddrValid(){isValidKYCAddrDropdown&&isValidKYCAddrUploadSize&&isValidKYCAddrUploadFormat?(console.log("correct !"),"multiDoc"==$("#addrChangeDocType").val()?""===$(".addr-front-doc").val()||""===$(".addr-back-doc").val()||0==$("#AddrCorrectDocUpload").val()||"false"==$("#AddrCorrectDocUpload").val()?($(".docupload-block #KYC-Addr-Submit").addClass("gray-btn pointer-none"),console.log("multi correct !"),$(".KYC-file-valid").addClass("hidden"),isDocUploadForAadhaarValid=!1):(console.log("multi incorrect !",isModifyJourney),isDocUploadForAadhaarValid=!0,1==isModifyJourney&&(1==isAadhaarCardSelected||$(".docupload-block #KYC-Addr-Submit").removeClass("gray-btn pointer-none")),"Aadhaar Card"==$("#addrChangeDocFileName").val()||"Aadhar Card"==$("#addrChangeDocFileName").val()||"Aadhaar/UID"==$("#addrChangeDocFileName").val()?(console.log("aadhar selected"),$("#aadhaarConsentBox .fancy-checkbox").css("pointer-events","auto")):($(".docupload-block #KYC-Addr-Submit").removeClass("gray-btn pointer-none"),0==kycRenewalDocUploadValidation&&$("#aadhaarConsentBox .fancy-checkbox").css("pointer-events","none")),$(".KYC-file-valid").removeClass("hidden"),$(".if-addhar .KYC-file-valid").css({visibility:"visible",display:"block"}),$(".if-addhar .KYC-success-upload").show()):(console.log("single correct !",isValidKYCAddrDropdown),$(".KYC-file-valid").removeClass("hidden"),$(".docupload-block #KYC-Addr-Submit").removeClass("gray-btn pointer-none"),isDocUploadForAadhaarValid=!1)):(console.log("correct not !"),$(".docupload-block #KYC-Addr-Submit").addClass("gray-btn pointer-none"),isDocUploadForAadhaarValid=!1)}var isValidKYCAddrUploadFormat=!1,isValidKYCAddrUploadSize=!1,isValidKYCAddrDropdown=!1;$(document).on("change","select#kycAddrDocumentDropdown",function(evt){evt.preventDefault(),$("#aadhaarConsentBox .fancy-checkbox").css("pointer-events","none"),$(".file-upload-field").val(""),$(".file-upload-wrapper").attr("data-text",""),$(".file-upload-wrapper").css("outline","none"),$(".KYC-success-upload").hide(),$("#aadhharConsentBox_Check").prop("checked",!1),$(".docupload-block #KYC-Addr-Submit").addClass("gray-btn pointer-none");var $option=$(this.options[this.selectedIndex]),value=$option.val();console.log("value is =>>>>",value),"Select"==value?(isValidKYCAddrDropdown=!1,$(".if-pan").removeClass("hidden"),$(".if-addhar").addClass("hidden"),$("#a_card").addClass("hidden"),$("#kycAddrUploadDocBox").css("margin-bottom","14px"),$("#aadhaarConsentBoxUl").addClass("hidden"),$(".docScreen").text(""),$("#addrChangeDocFileName").val(""),isAadhaarCardSelected=!1):"Aadhar Card"==value||"Voter ID Card"==value||"Driving License"==value||"Passport"==value||"Aadhaar Card"==value||"Aadhaar/UID"==value?(console.log("value if "+value),isValidKYCAddrDropdown=!0,$(".if-pan").addClass("hidden"),$(".if-addhar").removeClass("hidden"),$(".docScreen").text(value),$("#addrChangeDocFileName").val(value),console.log("resources isModifyJourney",isModifyJourney),$("#a_card").removeClass("hidden"),$(".docScreentxt").html(value),$("#addrChangeDocType").val("multiDoc"),"Aadhaar Card"==value||"Aadhar Card"==value||"Aadhaar/UID"==value?($(".d-image-block").removeClass("hidden"),$(".aadhar-doc-txt").removeClass("hidden"),$("#a_card .d-cntent").css("width","67%"),$("#kycAddrUploadDocBox").css("margin-bottom","0px"),$("#aadhaarConsentBoxUl").removeClass("hidden"),isAadhaarCardSelected=!0,isModifyJourney&&$(".docupload-block .docUploadConsentCheckbox").removeClass("hidden")):("Voter ID Card"==value||"Driving License"==value||"Passport"==value)&&($(".d-image-block").addClass("hidden"),$("#a_card .d-cntent").css("width","100%"),$(".aadhar-doc-txt").addClass("hidden"),$("#kycAddrUploadDocBox").css("margin-bottom","14px"),$("#aadhaarConsentBoxUl").addClass("hidden"),isAadhaarCardSelected=!1,isModifyJourney&&$(".docupload-block .docUploadConsentCheckbox").addClass("hidden"))):(console.log("value if else"+value),isValidKYCAddrDropdown=!0,$(".if-pan").removeClass("hidden"),$(".if-addhar").addClass("hidden"),$("#aadhaarConsentBoxUl").addClass("hidden"),$("#a_card").addClass("hidden"),$(".docScreen").text(""),$("#addrChangeDocFileName").val(value),$("#addrChangeDocType").val("singleDoc"),$("#kycAddrUploadDocBox").css("margin-bottom","14px"),isModifyJourney&&$(".docupload-block .docUploadConsentCheckbox").addClass("hidden"))}),$(document).delegate(".docupload-block .file-upload-field:visible","change",function(e){const file=e.target.files[0];$(".docupload-block .file-upload-field").parent(".file-upload-wrapper").hasClass("addr-single-doc")?console.log("single"):$(".docupload-block .file-upload-field").parent(".file-upload-wrapper").hasClass("addr-front-doc")?console.log("front"):$(".docupload-block .file-upload-field").parent(".file-upload-wrapper").hasClass("addr-back-doc")&&console.log("back"),$(this).parent(".file-upload-wrapper").attr("data-text",$(this).val().replace(/.*(\/|\\)/,""));var docBox=$(this).val();if(console.log("docBox"+docBox),""===docBox)return console.log("file blank uploaded"),$(".docupload-block #KYC-Addr-Submit").addClass("gray-btn pointer-none"),$(this).parent().parent().parent().parent().find(".KYC-field-error").css("display","none"),$(".docupload-block .KYC-field-valid").css("display","none"),$(this).parent().parent().parent().find(".file-upload-wrapper").css("outline","none"),$(this).parent().parent().parent().parent().find(".KYC-file-error").css("visibility","hidden"),$(".docupload-block #KYC-submit").addClass("disabled"),isValidKYCAddrUploadFormat=!1,isValidKYCAddrUploadSize=!1,$(this).parent().parent().parent().parent().find(".KYC-file-error").css("display","none"),void $(this).parent().parent().parent().parent().find(".KYC-file-valid").css("display","none");console.log("file not blank uploaded");var MBsize=file.size/1048576,ext=file.name.split(".").pop();"png"!==ext&&"jpeg"!==ext&&"pdf"!==ext&&"tiff"!==ext&&"gif"!==ext&&"jpg"!==ext?(console.log("incorrect format"),$(this).parent().parent().parent().parent().find(".KYC-file-error .KYC-format-error").css("display","block"),isValidKYCAddrUploadFormat=!1):(console.log(" format"),$(this).parent().parent().parent().parent().find(".KYC-file-error .KYC-format-error").css("display","none"),isValidKYCAddrUploadFormat=!0),5>MBsize?(console.log("format1"),$(this).parent().parent().parent().parent().find(".KYC-file-error .KYC-fileSize-error").css("display","none"),isValidKYCAddrUploadSize=!0):(console.log(" incorrect format2"),$(this).parent().parent().parent().parent().find(".KYC-file-error .KYC-fileSize-error").css("display","block"),isValidKYCAddrUploadSize=!1),isValidKYCAddrUploadFormat&&isValidKYCAddrUploadSize?(console.log("format4"),$(this).parent().parent().parent().parent().find(".KYC-field-error").css("display","none"),$(this).parent().parent().parent().find(".file-upload-wrapper").css("outline","none"),$(this).parent().parent().parent().parent().find(".KYC-file-error").css("visibility","hidden"),$(this).parent().parent().parent().parent().find(".KYC-file-error").css("display","none"),"multiDoc"==$("#addrChangeDocType").val()?$(".if-addhar .KYC-file-error").is(":visible")?(console.log("incorrect doc upload"),$("#AddrCorrectDocUpload").val(!1)):(console.log("correct doc upload"),$("#AddrCorrectDocUpload").val(!0)):($(".docupload-block .KYC-field-valid").css("display","inline-block"),$(".docupload-block .KYC-file-valid").css("visibility","visible"),$(".docupload-block .KYC-success-upload").css("display","block"),$(".docupload-block .KYC-file-valid").css("display","block"))):(console.log("incorrect format3"),$(this).parent().parent().parent().parent().find(".KYC-field-error").css("display","inline-block"),$(".docupload-block .KYC-field-valid").css("display","none"),$(this).parent().parent().parent().find(".file-upload-wrapper").css("outline","1px solid red"),$(this).parent().parent().parent().parent().find(".KYC-file-error").css("visibility","visible"),$(".docupload-block .KYC-file-valid").css("visibility","hidden"),$(".docupload-block .KYC-success-upload").css("display","none"),$(this).parent().parent().parent().parent().find(".KYC-file-error").css("display","block"),$(".docupload-block .KYC-file-valid").css("display","none")),isKYCsubmitAddrValid()})});var addrKycresendCount=0,resendOTPCount=0;$(document).ready(function(){$(".kycOtpSection #digiLockOtpField").on("keyup",function(){var otpData=$(".kycOtpSection #digiLockOtpField").val();otpData?otpData.length>5?$(".kycOtpSection .rmv").removeClass("disabled"):($(".kycOtpSection #digiLockOtpField").css("border","1px solid #ddd"),$(".kycOtpSection #kyc-otp-err").hide(),$(".kycOtpSection .rmv").addClass("disabled")):$(".kycOtpSection .rmv").addClass("disabled")})}),$(document).ready(function(){"SBICARD"!=$("#isSBICheck").html()||"USER"!=$("#userRole").val()&&""!=$("#userRole").val()?($(".CCRHideDetails").show(),$(".CCRHideDetailsImg").hide(),$(".contactLnk a").html("Update")):($(".CCRHideDetails").hide(),$(".CCRHideDetailsImg").show(),$(".contactLnk a").html("View"))});var kycRenewalAddOnCardSelected=!1,kycRenewalProceedJourney=!1,isValidKycRenewalUploadFormat=!1,isValidKycRenewalUploadSize=!1,isValidKycRenewalDropdown=!1,kycRenewalDocUploadValidation=!1,addressLineUpdateFlag=!1,kycRenewalProceedJourney=!0,kycRenewalModifyJourney=!1,digiModifyButtonClick=!1;$('input[name="cardforkyc"]').on("click",function(){0!=$(this).val()?(console.log("if"),$("#addonaddress").show(),$(".p-card").hide(),$(".addon-card").show(),kycRenewalAddOnCardSelected=!0,$("#addonaddress #kycPrimaryAddr").prop("checked",!0)):(console.log("else"),$("#addonaddress").hide(),$(".p-card").show(),$(".addon-card").hide(),kycRenewalAddOnCardSelected=!1,$("#addonaddress #kycPrimaryAddr").prop("checked",!0)),console.log("refresh"),$(".KYC-file-valid").addClass("hidden"),$(".lable-contact-block .kyc-file-error").css("display","none")});var isPreviouslyPOIIsPassport=!1;$(document).ready(function(){$(".kyc-renewal-success-page").is(":visible")&&""!=$("#srNumber").val()&&setAnalyticsKYCConfirmation("KYC Renewal Confirmation","KYC Renewal"),$("#kyc-success-message").is(":visible")&&setAnalyticsKYCConfirmation("KYC Renewal Manual Confirmation","KYC Renewal Manual Confirmation")}),$(document).ready(function(){$(".kyc-file-field-png-ext").on("change",function(){if(null!=$(this).val()||" "!=$(this).val())if(console.log("png ext field not empty"),$(this).closest(".kyc-upload-block").siblings(".KYC-file-valid").addClass("hidden"),$(this).closest(".kyc-upload-block").siblings(".kyc-file-error").css("display","none").find(".kyc-format-error").css("display","block").siblings(".kyc-fileSize-error").css("display","none"),$(".kyc-upload-proceed-btn").addClass("gray-btn pointer-none"),$(this).closest(".lable-contact-block").siblings(".KYC-file-error").css("display","none").find(".KYC-format-error").css({display:"none",visibility:"visible"}).siblings(".KYC-fileSize-error").css("display","none"),$(this).closest(".lable-contact-block").siblings(".KYC-file-valid").css("display","none").find(".KYC-success-upload").css({display:"none",visibility:"visible"}),$(this).val().length>0){var fileName=$(this).val().split("\\").pop(),fileExt=$(this).val().split(".").pop().toLowerCase(),selectedPOA=$("#kycRenewalPOADocumentDropdown :selected").text(),selectedPOI=$("#kycRenewalPOIDocumentDropdown :selected").text();(""!=selectedPOA&&null!=selectedPOA&&"Select"!=selectedPOA&&"undefined"!=selectedPOA||""!=selectedPOI&&null!=selectedPOI&&"Select"!=selectedPOI&&"undefined"!=selectedPOI)&&(console.log("inside if condition png"),validateKYCRenewalDocumentFields($(this)[0].files[0],$(this).val(),fileName),$("#kycRenewalPOI_consentt_check_box").prop("checked",!1));var file=$(this)[0].files[0],fileSize=file.size/1048576;$(this).siblings(".kyc-file-name").val($(this).val()),console.log("fileExtPIN png",fileExt),""!=selectedPOA&&null!=selectedPOA&&"Select"!=selectedPOA&&"undefined"!=selectedPOA||""!=selectedPOI&&null!=selectedPOI&&"Select"!=selectedPOI&&"undefined"!=selectedPOI?(-1==$.inArray(fileExt,kycAcceptablePhotoFormats)&&(console.log("kycAcceptablePhotoFormats"),$(this).closest(".kyc-upload-block").addClass("invalid-kyc-field"),$(this).closest(".kyc-upload-block").siblings(".proceed-kyc-file-error").css("display","block"),$(this).closest(".kyc-upload-block").siblings(".proceed-KYC-file-invalid").addClass("hidden"),$(this).closest(".kyc-upload-block").siblings(".kyc-field-error").css("display","inline-block"),$(this).closest(".kyc-upload-block").siblings(".KYC-file-error").css("display","block").find(".KYC-format-error").css("display","block"),$(this).closest(".lable-contact-block").siblings(".KYC-file-error").css("display","block").find(".KYC-format-error").css({display:"block",visibility:"visible"})),fileSize>5?(console.log("!AcceptableFileUpload png"),ResetFileSizeError(),$(this).closest(".kyc-upload-block").siblings(".proceed-KYC-file-invalid").addClass("hidden"),$(this).closest(".kyc-upload-block").siblings(".proceed-kyc-file-error").css("display","block"),$(this).closest(".kyc-upload-block").addClass("invalid-kyc-field"),$(this).closest(".kyc-upload-block").siblings(".kyc-field-error").css("display","inline-block"),$(this).closest(".kyc-upload-block").siblings(".KYC-file-error").css("display","block").find(".KYC-fileSize-error").css("display","block"),$(this).closest(".lable-contact-block").siblings(".KYC-file-error").css("display","block").find(".KYC-fileSize-error").css({display:"block",visibility:"visible"})):(console.log("AcceptableFileUpload png else"),ResetFileSizeError(),$(this).closest(".kyc-upload-block").removeClass("invalid-kyc-field"),$(this).closest(".kyc-upload-block").siblings(".KYC-file-valid").removeClass("hidden"),$(this).closest(".kyc-upload-block").siblings(".kyc-field-error").css("display","none"),$(this).closest(".kyc-upload-block").siblings(".kyc-file-error").css("display","none").find(".kyc-format-error").css("display","block").siblings(".kyc-fileSize-error").css("display","none"),$("#ucic-kyc").addClass("hidden"),$("#kyc-submit-button").removeAttr("disabled"),$(this).closest(".lable-contact-block").siblings(".KYC-file-valid").css("display","block").find(".KYC-success-upload").css({display:"block",visibility:"visible"}),(""!=selectedPOA&&null!=selectedPOA&&"Select"!=selectedPOA&&"undefined"!=selectedPOA||""!=selectedPOI&&null!=selectedPOI&&"Select"!=selectedPOI&&"undefined"!=selectedPOI)&&$(this).closest(".lable-contact-block").siblings(".KYC-file-valid").removeClass("hidden"))):-1==$.inArray(fileExt,kycAcceptablePhotoFormats)?(console.log("kycAcceptablePhotoFormats png"),$(this).closest(".kyc-upload-block").addClass("invalid-kyc-field"),$(this).closest(".kyc-upload-block").siblings(".proceed-kyc-file-error").css("display","block"),$(this).closest(".kyc-upload-block").siblings(".proceed-KYC-file-invalid").addClass("hidden"),$(this).closest(".kyc-upload-block").siblings(".kyc-field-error").css("display","inline-block"),$(this).closest(".kyc-upload-block").siblings(".KYC-file-error").css("display","block").find(".KYC-format-error").css("display","block"),$(this).closest(".lable-contact-block").siblings(".KYC-file-error").css("display","block").find(".KYC-format-error").css({display:"block",visibility:"visible"})):fileSize>5?(console.log("!AcceptableFileUpload png"),ResetFileSizeError(),$(this).closest(".kyc-upload-block").siblings(".proceed-KYC-file-invalid").addClass("hidden"),$(this).closest(".kyc-upload-block").siblings(".proceed-kyc-file-error").css("display","block"),$(this).closest(".kyc-upload-block").addClass("invalid-kyc-field"),$(this).closest(".kyc-upload-block").siblings(".kyc-field-error").css("display","inline-block"),$(this).closest(".kyc-upload-block").siblings(".KYC-file-error").css("display","block").find(".KYC-fileSize-error").css("display","block"),$(this).closest(".lable-contact-block").siblings(".KYC-file-error").css("display","block").find(".KYC-fileSize-error").css({display:"block",visibility:"visible"})):(console.log("AcceptableFileUpload else png"),ResetFileSizeError(),$(this).closest(".kyc-upload-block").removeClass("invalid-kyc-field"),$(this).closest(".kyc-upload-block").siblings(".KYC-file-valid").removeClass("hidden"),$(this).closest(".kyc-upload-block").siblings(".kyc-field-error").css("display","none"),$(this).closest(".kyc-upload-block").siblings(".kyc-file-error").css("display","none").find(".kyc-format-error").css("display","block").siblings(".kyc-fileSize-error").css("display","none"),$("#ucic-kyc").addClass("hidden"),$("#kyc-submit-button").removeAttr("disabled"),$(this).closest(".lable-contact-block").siblings(".KYC-file-valid").css("display","block").find(".KYC-success-upload").css({display:"block",visibility:"visible"}),(""!=selectedPOA&&null!=selectedPOA&&"Select"!=selectedPOA&&"undefined"!=selectedPOA||""!=selectedPOI&&null!=selectedPOI&&"Select"!=selectedPOI&&"undefined"!=selectedPOI)&&$(this).closest(".lable-contact-block").siblings(".KYC-file-valid").removeClass("hidden")),($(".poiKYCrenewal .KYC-file-error").is(":visible")||$(".poiKYCrenewal .KYC-format-error").is(":visible")||$(".poiKYCrenewal .KYC-fileSize-error").is(":visible"))&&($(".poiKYCrenewal .KYC-file-valid").addClass("hidden"),console.log("Successmessage hidden poi"),kycRenewalDocUploadValidation=!1),($(".poaKYCrenewal .KYC-file-error").is(":visible")||$(".poaKYCrenewal .KYC-format-error").is(":visible")||$(".poaKYCrenewal .KYC-fileSize-error").is(":visible"))&&($(".poaKYCrenewal .KYC-file-valid").addClass("hidden"),console.log("Successmessage hidden poa png"),kycRenewalDocUploadValidation=!1),$(this).siblings(".kyc-browse-button").removeClass("kyc-btn").addClass("kyc-chng-file").text("");var fileNameWidth=$(this).closest(".kyc-upload-block").width()-$(this).siblings(".kyc-browse-button").width()-40;$(this).siblings(".kyc-file-name").css("width",fileNameWidth),$(this).siblings('input[type="hidden"]').attr("value",fileName)}else console.log("else png"),kycRenewalDocUploadValidation=!1,$("#modifyaddressChange_Check").prop("checked",!1),$("#kyc-renewal-main .doc-upload-proceed-btn").addClass("gray-btn pointer-none"),$("#kycRenewalPOI_consentt_check_box").prop("checked",!1),AcceptableFileUpload()&&ResetFileSizeError(),$(this).siblings(".kyc-file-name").val("").closest(".kyc-upload-block").removeClass("invalid-kyc-field").siblings(".kyc-field-error").css("display","none").siblings(".kyc-file-error").css("display","none").find(".kyc-format-error").css("display","none").siblings(".kyc-fileSize-error").css("display","none");$("#kyc-upload-form :input[type=file]").each(function(){console.log("png ext----514"),$(this).val().length>0&&$(this)[0].files[0].size>=fileSizeLimitation()&&-1!=$.inArray($(this).val().split(".").pop().toLowerCase(),kycAcceptablePhotoFormats)&&(console.log("png----517"),ResetFileSizeError(),$(this).closest(".kyc-upload-block").addClass("invalid-kyc-field").siblings(".kyc-field-error").css("display","inline-block").siblings(".kyc-file-error").css("visibility","visible").find(".kyc-fileSize-error").css("display","block"))}),isKYCSubmitAllowed()?$("#kyc-submit-button").is(":disabled")||($("#kyc-upload-form").exists()?(console.log("kyc renewal sub enablepng"),0==$("#kyc-upload-form #ucic-kyc").length&&$(".info-text.kycaddr-update-consent-box").css("pointer-events","auto")):$("#kyc-submit-button").removeClass("secondary kyc-inactive-button").addClass("primary")):(console.log("kyc png sub disable"),$("#kyc-submit-button").addClass("secondary kyc-inactive-button").removeClass("primary"))})});var kycAcceptablePhotoFormats=["pdf","jpg","jpeg","tiff","tif","gif"];$(document).ready(function(){$(".dark-block-arrow-img-block").click(function(){console.log("click on cashback"),$(this).parent().toggleClass("active")})});var tenureArray=[0],offerObjectList=[],bankObjectList=[],maxAmount=0,minAmount=0,sortedlist=[0],value=0,firstStepOpen=!0;$(document).ready(function(){null!=$("#otp-msg-failure #otpAuthFail").val()&&"false"==sessionStorage.getItem("c2bOtpVerify")&&("Encash"==$("#featureNameForEncash").val()||"Encash Inline"==$("#featureNameForEncash").val()?dncOTPSubmitEventEncash("c2b","otp:invalid","C2B Landing Page","","failure","",""):"encash"==$("#featureNameForEncash").val()&&dncOTPSubmitEventEncash("c2s","otp:invalid","C2S OTP Page","","failure","",""));var validity=[];if($(".field-wrap-dob").is(":visible")&&(console.log("EVENT3 to be triggered======>",$("#featureNameForEncash").val()),("Encash"==$("#featureNameForEncash").val()||"Encash Inline"==$("#featureNameForEncash").val())&&dncCampaignLandingEncash("c2b","shortcode:valid","C2B Landing Page","success","","")),$("#encash-landing-form").is(":visible"))dncJourneyMilestoneEncash("journey_started","Common Page",""),dncFormLoadEncash("encash_offer_form","Common Page",""),dncEligibilityCheckEncash("offer:available","Common Page","","success","",""),dncCommonPageEncash("Common Page"),localStorage.visitedLanding="yes",$("#channelFromInfo").val()==$("#channelFromConfig").val()?dncOTPSubmitEventEncash("c2b","otp:valid","C2B Landing Page","","success","",""):$("#channelFromInfo").val()==$("#channelFromConfigC2S").val()&&dncOTPSubmitEventEncash("c2s","otp:valid","C2S OTP Page","","success","","");else if($(".encash-prelogin-lower").is(":visible")){var visited=localStorage.visitedLanding;"yes"!=visited?($("#channelFromInfo").val()==$("#channelFromConfig").val()?dncOTPSubmitEventEncash("c2b","otp:valid","C2B Landing Page","","success","",""):$("#channelFromInfo").val()==$("#channelFromConfigC2S").val()&&dncOTPSubmitEventEncash("c2s","otp:valid","C2S OTP Page","","success","",""),"true"==$("#isInline").val()||1==$("#isInline").val()?(dncJourneyMilestoneEncash("journey_started","Encash Inline Booking",""),dncEligibilityCheckEncash("offer:available","Encash Inline Booking","","success","","")):(dncJourneyMilestoneEncash("journey_started","Encash Booking",""),dncEligibilityCheckEncash("offer:available","Encash Booking","","success","",""))):"yes"==visited&&("true"==$("#isInline").val()||1==$("#isInline").val()?dncFormConfirmationEncash("encash_offer_form","Encash Inline Booking","","","success","",""):dncFormConfirmationEncash("encash_offer_form","Encash Booking","","","success","","")),"true"==$("#isInline").val()||1==$("#isInline").val()?(dncFormLoadEncash("encash_inline_form","Encash Inline Booking","encash_inline"),dncFormLoadEncash("encash_inline_plan_form","Encash Inline Booking","encash_inline")):(dncFormLoadEncash("encash_form","Encash Booking","encash"),dncFormLoadEncash("encash_plan_form","Encash Booking","encash"))}else $(".suc-booking-wrap").is(":visible")?("true"==$("#isInline").val()||1==$("#isInline").val()?dncFormConfirmationEncash("encash_inline_form","Encash Confirmation","",$("#encashSRNumber").val(),"success","",""):dncFormConfirmationEncash("encash_form","Encash Confirmation","",$("#encashSRNumber").val(),"success","",""),dncJourneyMilestoneEncash("journey_completed","Encash Confirmation","")):$(".dncEnventClassFailure").is(":visible")&&("true"==$("#isInline").val()||1==$("#isInline").val()?dncFormConfirmationEncash("encash_inline_form","Encash Confirmation","",$("#encashSRNumber").val(),"failure","",""):dncFormConfirmationEncash("encash_form","Encash Confirmation","",$("#encashSRNumber").val(),"failure","",""));($("#channelFromInfo").val()==$("#channelFromConfig").val()||$("#channelFromInfo").val()==$("#channelFromConfigC2S").val())&&$(".encash-prelogin-banner").addClass("banner-padding-inline-campaign"),$(".encash-prelogin-lower").is(":visible")&&(validity=$("#encash-validity").val().split(".")),$("#enachBilldeskResponseId").is(":visible")&&setAnalyticsEncashJourney("sbi-card:postlogin:high_risk_auto_debit_reg_success","sbi-card:postlogin:high_risk_auto_debit_reg_success"),$(".encash-booking-success-view").is(":visible")&&("true"==$("#isInline").val()||1==$("#isInline").val()?setAnalyticsEncashJourney("sbi-card:postlogin:encash_inline_booking_success","sbi-card:postlogin:encash_inline_booking_success"):setAnalyticsEncashJourney("sbi-card:postlogin:encash_booking_success","sbi-card:postlogin:encash_booking_success")),$("#subtitle-validity").html(validity[0]);var offerObject=$.parseJSON($("#offers-encash").val());for(var i in offerObject)for(var j in offerObject[i]){var object=offerObject[i][j];offerObjectList.push(object)}for(var i in offerObjectList)for(var j in offerObjectList[i].offers)-1==tenureArray.indexOf(offerObjectList[i].offers[j].tenure)&&(tenureArray.push(offerObjectList[i].offers[j].tenure),sortedlist.push(offerObjectList[i].offers[j].tenure));if($(".encash-prelogin-lower").is(":visible")){var bankObject=$.parseJSON($("#bank-drop-details").val());bankObjectList=bankObject.bankdetailslist}tenurelist="",sortedlist.sort(function(a,b){return a-b});for(var i=1;i<sortedlist.length;i++)tenurelist=tenurelist+'<div class="option" onClick="setTenureInput('+sortedlist[i]+')">'+sortedlist[i]+"</div>";var tenureWidth=100/(sortedlist.length-1)+"% !important";$("#tenureSlider").attr("max",sortedlist.length-1);for(var tenuresliderlist="",length=sortedlist.length-1,i=0;length>i;i++)tenuresliderlist=tenuresliderlist+'<div style="width:'+tenureWidth+';">'+sortedlist[i]+"</div>";tenuresliderlist=tenuresliderlist+"<div>"+sortedlist[sortedlist.length-1]+"</div>",$("#tenure-number-line").html(tenuresliderlist),$("#dropdown").html(tenurelist),$(".width-map1").css("width",tenureWidth);var maxMinArray=($("#offers-encash").val(),checkMaxAmount(offerObjectList)),minAmountForDisplay=maxMinArray[1].toString().split(".");minAmount=Number(minAmountForDisplay[0]);var maxAmountForDisplay=maxMinArray[0].toString().split(".");maxAmount=Number(maxAmountForDisplay[0]),minAmount>maxAmount&&($("#amount-input").css("border-color","red"),$(".text-danger").html("Amount must be Rs."+commaSeparateNumber(minAmount)+" or more"),$(".text-danger").css("display","block"),$(".cross-mark").css("display","block"),$("#amount-input").attr("disabled","disabled"),$("#encash-next-btn").addClass("encash-gray-button")),minAmount==maxAmount&&($("#amount-input").attr("disabled","disabled"),$("#amountSlider").addClass("slider-thumb-correction-class"),$("#amountSlider").css("background","linear-gradient(to right, #0095da 0%, #0095da 100%, #f5f5f5 100%, #f5f5f5 100%)"),$("#amount-number-line").css("padding-top","0.5rem"),$("#amountSlider").attr("disabled","disabled")),$("#encashInlineMaxAmount").html('Up to <em class="WebRupee">Rs.</em>'+commaSeparateNumber(maxAmount)),$("#encash-landing-form").is(":visible")&&$("#encashMaxAmount").html('Up to <em class="WebRupee">Rs.</em>'+commaSeparateNumber($("#encashMaxEligibleAmountLanding").val())),setNumberLine(minAmount,maxAmount),""!=$("#tenureAutofillEncash").val()&&($("#amount-input").val($("#amountAutofillEncash").val()),setAmountInAmountField(),$("#tenure-input").val(Number($("#tenureAutofillEncash").val())),setTenureInput(Number($("#tenureAutofillEncash").val()))),$(window).width()>767&&$(".scroll-box-encash").css("transform","translateY(-0%)"),$(window).resize(function(){$(window).width()<767&&$(".encash-error-screen-wrap").is(":visible")&&$("content-section-c2s").css("height",""),$(".enach-disclaimer-button-block-proceed").is("visible")&&($(window).width()<767?($(".disclaimer-popup .modal").css("top",""),$(".disclaimer-popup .modal").css("left","")):($(".disclaimer-popup .modal").css("top","5%"),$(".disclaimer-popup .modal").css("left","25%")))}),$(window).on("scroll",function(){if($(window).width()<767){var scroll=$(window).scrollTop();scroll>=0&&10>=scroll?($(".scroll-box-encash").css("transform","translateY(-0%)"),$("#tdb").css("display","none")):scroll>=11&&30>=scroll?($(".scroll-box-encash").css("transform","translateY(-1%)"),$("#tdb").css("display","none")):scroll>=31&&50>=scroll?($(".scroll-box-encash").css("transform","translateY(-2%)"),$("#tdb").css("display","none")):scroll>=51&&70>=scroll?($(".scroll-box-encash").css("transform","translateY(-3%)"),$("#tdb").css("display","none")):scroll>=71&&100>=scroll?($(".scroll-box-encash").css("transform","translateY(-4%)"),$("#tdb").css("display","none")):scroll>=101&&130>=scroll?($(".scroll-box-encash").css("transform","translateY(-5%)"),$("#tdb").css("display","none")):scroll>=131&&150>=scroll?($(".scroll-box-encash").css("transform","translateY(-6%)"),$("#tdb").css("display","none")):scroll>=151&&170>=scroll?($(".scroll-box-encash").css("transform","translateY(-7%)"),$("#tdb").css("display","none")):scroll>=171&&180>=scroll?($(".scroll-box-encash").css("transform","translateY(-8%)"),$("#tdb").css("display","none")):scroll>=181&&200>=scroll?($(".scroll-box-encash").css("transform","translateY(-8.5%)"),$("#tdb").css("display","none")):scroll>=201&&220>=scroll?($(".scroll-box-encash").css("transform","translateY(-9%)"),$("#tdb").css("display","none")):scroll>=221&&239>=scroll&&($(".scroll-box-encash").css("transform","translateY(-9.2%)"),$("#tdb").css("display","none"))
}else $(".scroll-box-encash").css("transform","translateY(-0%)");if($(".encash-prelogin-container").is(":visible")?$(window).scrollTop()>=170?($("#scroll-bar-mobile-set").css("top","60px"),$("#scroll-bar-mobile-set").css("display","block")):($("#scroll-bar-mobile-set").css("top","120px"),$("#scroll-bar-mobile-set").css("display","none")):$(window).scrollTop()>=270?$("#scroll-bar-mobile-set").css("display","block"):$("#scroll-bar-mobile-set").css("display","none"),$("#channelFromInfo").val()==$("#channelFromConfig").val()||$("#channelFromInfo").val()==$("#channelFromConfigC2S").val())if($(window).scrollTop()>=450&&$(window).scrollTop()<=750){value=Number($(window).scrollTop())-430;var property="translateY("+value+"px)";$(".encash-summary-column").css("transform",property)}else if($(window).scrollTop()>750){var property="translateY("+value+"px)";$(".encash-summary-column").css("transform",property)}else $(".encash-summary-column").css("transform","none");else if(1==$("#isInline").val()||"true"==$("#isInline").val())if($(window).scrollTop()>=550&&$(window).scrollTop()<=750){value=Number($(window).scrollTop())-530;var property="translateY("+value+"px)";$(".encash-summary-column").css("transform",property)}else if($(window).scrollTop()>750)if(1==firstStepOpen){var property="translateY(270px)";$(".encash-summary-column").css("transform",property)}else{var property="translateY(270px)";$(".encash-summary-column").css("transform",property)}else $(".encash-summary-column").css("transform","none");else if($(window).scrollTop()>=550&&$(window).scrollTop()<=800){value=Number($(window).scrollTop())-530;var property="translateY("+value+"px)";$(".encash-summary-column").css("transform",property)}else if($(window).scrollTop()>800)if(1==firstStepOpen){var property="translateY(270px)";$(".encash-summary-column").css("transform",property)}else{var property="translateY(310px)";$(".encash-summary-column").css("transform",property)}else $(".encash-summary-column").css("transform","none");checkIfOnscreen()?($(".emi-confirm-button-block").css("position","absolute"),($("#channelFromInfo").val()==$("#channelFromConfig").val()||$("#channelFromInfo").val()==$("#channelFromConfigC2S").val())&&$(".emi-confirm-button-block").css("bottom","-40px")):($(".emi-confirm-button-block").css("position","fixed"),($("#channelFromInfo").val()==$("#channelFromConfig").val()||$("#channelFromInfo").val()==$("#channelFromConfigC2S").val())&&$(".emi-confirm-button-block").css("bottom","-2px"))}),$("#amount-input").val(commaSeparateNumber($("#amountSlider").val())),$(".amount-avail").html("<em class='WebRupee'>Rs.</em>"+$("#amount-input").val()),$("#amountSlider").on("input",function(){changeSlider(minAmount,maxAmount),$("#amount-input").val(commaSeparateNumber($("#amountSlider").val())),changeSlider(minAmount,maxAmount)}),$("#tenureSlider").on("input",function(){changeTenureSlider()}),$("#amountSlider").on("touchend mouseup",function(){$(".amount-avail").html("<em class='WebRupee'>Rs.</em>"+$("#amount-input").val()),callForEncashAmountCheck()}),$("#amount-input").on("blur",function(){$("#amount-input").addClass("amount-input-filled"),Number($("#amount-input").val().replace(/[^0-9]/,""))>=minAmount&&Number($("#amount-input").val().replace(/[^0-9]/,""))<=maxAmount&&($(".amount-avail").html("<em class='WebRupee'>Rs.</em>"+$("#amount-input").val()),callForEncashAmountCheck()),Number($("#amount-input").val().replace(/[^0-9]/,""))==previousAmount&&0!=Number($("#tenure-input").val())&&$("#encash-next-btn").removeClass("encash-gray-button")}),$("#tenureSlider").on("touchend mouseup",function(){if(0!=$("#tenureSlider").val()&&-1!=tenureArray.indexOf(sortedlist[$("#tenureSlider").val()])){var newMax=checkMaxAmountForTenure(offerObjectList,sortedlist[$("#tenureSlider").val()]);if(newMax[0]!=maxAmount||newMax[1]!=minAmount){var minAmountForDisplayInternal=newMax[1].toString().split(".");minAmount=Number(minAmountForDisplayInternal[0]);var maxAmountForDisplayInternal=newMax[0].toString().split(".");maxAmount=Number(maxAmountForDisplayInternal[0]),setNumberLine(minAmount,maxAmount),changeSlider(minAmount,maxAmount)}callForEncashAmountCheck()}else previousTenure=0,$("#encash-form #bookingAmnt").addClass("error").siblings("label.error").removeClass("valid"),$("#encash-next-btn").addClass("encash-gray-button"),$(".proc-fee-block .info-text").html("0"),$(".emi-amount-calculated").html("<span style='font-size:21px; font-weight:600;'><em class='WebRupee'>Rs.</em>0</span>/month*"),$(".emi-amount-calculated-mobile").html("<span style='font-size:16px; font-weight:600;'><em class='WebRupee'>Rs.</em>0/Month*</span>"),$("#mobile-footer-emi-detail").html("0"),$("#summaryProcFee").html("<em class='WebRupee'>Rs.</em>0"),$(".roi-block .info-text").html("0"),$(".rateOfInterest").html("-"),$("#intRate").val(0),$("#emi").val(0),$("#processingFee").val(0),$(".tenure-footer-detail").html("-"),$(".summaryProcFee").html("-"),$(".procfeesthtml").html("0")}),$("#tenure-input").click(function(){$("#dropdown").is(":visible")?($("#dropdown").css("display","none"),$(".down-arrow").css("transform","rotate(0deg)"),$(".down-arrow-block").removeClass("align-arrow"),$("#tenure-input").removeClass("amount-input-align")):($("#dropdown").css("display","block"),$(".down-arrow").css("transform","rotate(180deg)"),$(".down-arrow-block").addClass("align-arrow"),$("#tenure-input").addClass("amount-input-align"))}),$("#bank-input, .down-arrow-block2").click(function(event){if($("#bank-input").val($("#encashAccNoToCheck").val()),0!=bankObjectList.length)if($("#dropdown2").is(":visible")){if("dropdown2-encash-arrow"==event.target.id){for(var maskedInput="",i=0;i<$("#bank-input").val().length;i++)maskedInput+="X";$("#bank-input").val(maskedInput)}$("#dropdown2").css("display","none"),$(".down-arrow-block2").css("transform","rotate(0deg)"),$(".down-arrow-block2").removeClass("align-arrow2")}else $("#dropdown2").css("display","block"),$(".down-arrow-block2").css("transform","rotate(180deg)"),$(".down-arrow-block2").addClass("align-arrow2")}),$("#bank-input").change(function(){$("#bank-input").siblings(".placeholder").addClass("placeholder-active")});$("#amount-input,#bank-input").on("keydown",function(e){"bank-input"==e.target.id&&matchAccountAndConfirm()}),$(window).keydown(function(e){if(13==e.keyCode||13==e.which){if($("#IFSC-search-block").is(":visible")&&!$("#neft-srchBtn").hasClass("IFSC-gray-btn"))return $("#neft-srchBtn").click(),!1;if($("#IFSC-result-block").is(":visible")&&!$("#IFSC-confirm").hasClass("IFSC-gray-btn"))return $("#IFSC-confirm").click(),!1}}),$("#amount-input").on("input",function(e){var key=e.keyCode;37!=key&&39!=key&&46!=key&&setAmountInAmountField()}),$(".name-input").click(function(event){"bank-input"!=event.target.id&&$("#"+event.target.id).siblings(".placeholder").addClass("placeholder-active"),"bank-input"!=event.target.id||$("#bank-input").is("[readonly]")||$("#"+event.target.id).siblings(".placeholder").addClass("placeholder-active"),$("#"+event.target.id).addClass("name-input-filled")}),$(".name-input").focus(function(){$("#"+event.target.id).siblings(".placeholder").addClass("placeholder-active")}),$(".name-input").blur(function(){""==$("#bank-input").val()&&0!=bankObjectList.length&&$("#bank-input").attr("readonly",!0),""==$("#"+event.target.id).val()&&($("#"+event.target.id).removeClass("name-input-filled"),$("#"+event.target.id).siblings(".placeholder").removeClass("placeholder-active"))}),$(".encash-prelogin-lower").click(function(){if("dropdown"!=event.target.id&&"tenure-input"!=event.target.id&&($("#dropdown").css("display","none"),$(".down-arrow").css("transform","rotate(0deg)"),$(".down-arrow-block").removeClass("align-arrow"),$("#tenure-input").removeClass("amount-input-align")),"dropdown2"!=event.target.id&&"bank-input"!=event.target.id&&"dropdown2-encash-arrow"!=event.target.id){for(var maskedInput="",i=0;i<$("#bank-input").val().length;i++)maskedInput+="X";$("#bank-input").val(maskedInput),$("#dropdown2").css("display","none"),$(".down-arrow-block2").css("transform","rotate(0deg)"),$(".down-arrow-block2").removeClass("align-arrow2")}}),$("#encash-next-btn").click(function(){"true"==$("#isInline").val()||"true"==$("#isInline").val()?dncFormConfirmationEncash("encash_inline_plan_form","Encash Inline Booking","","","success","",""):dncFormConfirmationEncash("encash_plan_form","Encash Booking","","","success","",""),"true"==$("#isInline").val()||"true"==$("#isInline").val()?dncFormSubmitEncash("encash_inline_plan_form","Encash Inline Booking","","","","",""):dncFormSubmitEncash("encash_plan_form","Encash Booking","","","","",""),"true"==$("#isInline").val()||1==$("#isInline").val()?setAnalyticsEncashJourney("sbi-card:postlogin:avail_encash_inline_form","sbi-card:postlogin:avail_encash inline_form"):setAnalyticsEncashJourney("sbi-card:postlogin:avail_encash_form","sbi-card:postlogin:avail_encash_form");var enachregistered=$("#enachregistered").val();if(""!=enachregistered)if(1==enachregistered||"Y"==enachregistered||"true"==$("#isInline").val()||1==$("#isInline").val())"true"==$("#isInline").val()||1==$("#isInline").val()?dncFormLoadEncash("encash_inline_payment_details_form","Encash Inline Booking","encash_inline"):dncFormLoadEncash("encash_payment_details_form","Encash Booking","encash"),proceedForNEFTStepEncash();else{var loaderHtml='<div class="overlay-loader"></div>';$("body").append(loaderHtml);var enachRedirectFromEncash=$("#enachRedirectionFormSubmit");enachRedirectFromEncash.attr("action","/creditcards/app/requests/enach-mandate"),$("#amountForEnach").val(Number($("#amount-input").val().replace(/[^0-9]/,""))),$("#tenureForEnach").val($("#tenure-input").val()),$("<input>").attr({name:"encashFlag",id:"enachRedirectingFlagId",type:"hidden",value:!0}).appendTo(enachRedirectFromEncash),enachRedirectFromEncash.submit()}else"true"==$("#isInline").val()||1==$("#isInline").val()?dncFormLoadEncash("encash_inline_payment_details_form","Encash Inline Booking","encash_inline"):dncFormLoadEncash("encash_payment_details_form","Encash Booking","encash"),proceedForNEFTStepEncash()}),$("#tnc-block-check").click(function(){$("#tnc-check").is(":checked")?($("#tnc-check").prop("checked",!1),checkForAllValues()):($("#tnc-check").prop("checked",!0),checkForAllValues()),""==$("#confirm-input").val()&&($(".cross-mark-confirm").css("display","block"),$(".tick-mark-confirm").css("display","none"),$(".text-danger-confirm").html("Confirm Account n/o. is a required field"),$(".text-danger-confirm").css("display","block"),$("#confirm-input").addClass("confirm-account-incorrect"))}),$("#bank-input").keyup(function(){$("#encashAccNoToCheck").val($("#bank-input").val()),$("#encashAccNoToCheck").val()!=$("#confirm-input").val()&&""!=$("#confirm-input").val()?($(".text-danger-confirm").css("display","block"),$("#confirm-input").addClass("confirm-account-incorrect"),$(".cross-mark-confirm").css("display","block"),$(".tick-mark-confirm").css("display","none")):$("#encashAccNoToCheck").val()==$("#confirm-input").val()&&""!=$("#confirm-input").val()?($(".text-danger-confirm").css("display","none"),$("#confirm-input").css("border-bottom","1px solid #8a8a96"),$(".cross-mark-confirm").css("display","none"),$(".tick-mark-confirm").css("display","block"),$("#confirm-input").removeClass("confirm-account-incorrect")):($(".text-danger-confirm").css("display","none"),$("#confirm-input").css("border-bottom","1px solid #8a8a96"),$(".cross-mark-confirm").css("display","none"),$("#confirm-input").removeClass("confirm-account-incorrect")),checkForAllValues()}),$("#bank-input").on("blur",function(){var changed=!1;""!=$("#bank-input").val()?$("#bank-input").addClass("name-input-filled"):(changed=!0,$("#bank-input").removeClass("name-input-filled"));for(var maskedInput="",i=0;i<$("#bank-input").val().length;i++)maskedInput+="X";return $("#bank-input").val(maskedInput),""==$("#encashAccNoToCheck").val()?void($(".down-arrow-block2").is(":visible")&&$("#bank-input").attr("placeholder","Select")):void($("#encashAccNoToCheck").val()!=$("#confirm-input").val()&&""!=$("#confirm-input").val()?($(".text-danger-confirm").css("display","block"),$("#confirm-input").addClass("confirm-account-incorrect"),$(".cross-mark-confirm").css("display","block"),$(".tick-mark-confirm").css("display","none")):(""!=$("#encashAccNoToCheck").val()&&""==$("#confirm-input").val()&&($(".text-danger-confirm").css("display","none"),$("#confirm-input").css("border-bottom","1px solid #8a8a96"),$("#confirm-input").removeClass("confirm-account-incorrect"),$(".cross-mark-confirm").css("display","none"),$(".tick-mark-confirm").css("display","none")),changed?($(".text-danger-confirm").css("display","none"),$("#confirm-input").css("border-bottom","1px solid #8a8a96"),$(".cross-mark-confirm").css("display","none"),$(".tick-mark-confirm").css("display","none"),$("#confirm-input").removeClass("confirm-account-incorrect")):($(".text-danger-confirm").css("display","none"),$("#confirm-input").css("border-bottom","1px solid #8a8a96"),$(".cross-mark-confirm").css("display","none"),$("#confirm-input").removeClass("confirm-account-incorrect"))))}),$("#confirm-input").on("blur",function(){""!=$("#confirm-input").val()&&$("#confirm-input").addClass("name-input-filled"),$("#encashAccNoToCheck").val()!=$("#confirm-input").val()&&($(".text-danger-confirm").css("display","block"),$("#confirm-input").addClass("confirm-account-incorrect"),$(".cross-mark-confirm").css("display","block"),$(".tick-mark-confirm").css("display","none"),$(".text-danger-confirm").html("Account Number does not match")),""==$("#confirm-input").val()&&($("#confirm-input").siblings(".placeholder").removeClass("placeholder-active"),$("#confirm-input").siblings(".placeholder").removeClass("placeholder-value-inactive"))}),$("#confirm-input").click(function(){$(".text-danger-confirm").css("display","none"),$(".cross-mark-confirm").css("display","none"),$(".tick-mark-confirm").css("display","none"),$("#confirm-input").removeClass("confirm-account-incorrect")}),$("#confirm-input").on("change",function(){$("#confirm-input").val().length==$("#encashAccNoToCheck").val().length?($(".text-danger-confirm").css("display","none"),$("#confirm-input").css("border-bottom","1px solid #2d2d2d"),$("#confirm-input").removeClass("confirm-account-incorrect"),$(".cross-mark-confirm").css("display","none"),$(".tick-mark-confirm").css("display","block")):($(".text-danger-confirm").css("display","block"),$("#confirm-input").addClass("confirm-account-incorrect"),$(".cross-mark-confirm").css("display","block"),checkForAllValues())});var invalidChars=["-","e","+","E"];$("#confirm-input").keydown(function(e){return invalidChars.includes(e.key)?void e.preventDefault():void 0}),$("#confirm-input").keyup(function(){$("#confirm-input").siblings(".placeholder").hasClass("placeholder-active")||$("#confirm-input").siblings(".placeholder").addClass("placeholder-active"),$("#confirm-input").val().length==$("#encashAccNoToCheck").val().length&&($(".text-danger-confirm").css("display","none"),$("#confirm-input").css("border-bottom","1px solid #2d2d2d"),$("#confirm-input").removeClass("confirm-account-incorrect"),$(".cross-mark-confirm").css("display","none"),$(".tick-mark-confirm").css("display","block")),checkForAllValues()}),$("#neftBranchHint").keyup(function(){$("#neftBranchHint").val().length>=3?$("#neft-srchBtn").removeClass("IFSC-gray-btn"):$("#neft-srchBtn").addClass("IFSC-gray-btn")}),$("#neftCityDetail").change(function(){""!=$("#neftCityDetail").val()&&$("#neftBranchHint").val().length>=3?$("#neft-srchBtn").removeClass("IFSC-gray-btn"):$("#neft-srchBtn").addClass("IFSC-gray-btn")}),$(".encashencashotp-form *:input[type!=hidden]:first").focus();$(".encashOtp-field"),$(".otp-value");$("#encashAccNoToCheck, #confirm-input, #ifsc-input, #details-input, #name-input").on("change",function(){checkForAllValues()}),$("#ifsc-input").on("blur",function(){""!=$("#ifsc-input").val()&&$("#ifsc-input").addClass("name-input-filled"),selected_value=$("#ifsc-input").val(),""!=$("#ifsc-input").val()?$.ajax({url:"/creditcards/app/benefits/getIFSCDetailsForNEFT",data:{IFSCCode:selected_value},beforeSend:function(){var loaderHtml='<div class="overlay-loader"></div>';$("body").append(loaderHtml)},complete:function(){$("body").find("div.overlay-loader").remove()},type:"POST",success:function(data){var data=JSON.parse(data);"Success"==data.IFSCStatus?($(".cross-mark-ifsc").css("display","none"),$(".tick-mark-ifsc").css("display","block"),$("#details-input").val(data.branchesForNEFT[0].bankName+", "+data.branchesForNEFT[0].branch+", "+data.branchesForNEFT[0].address),$("#details-input").html(data.branchesForNEFT[0].bankName+", "+data.branchesForNEFT[0].branch+", "+data.branchesForNEFT[0].address),$("#beneficiaryBankName").val(data.branchesForNEFT[0].bankName),$("#CBRBankName").val(data.branchesForNEFT[0].bankName),$("#details-input").siblings(".placeholder").addClass("placeholder-active"),$("#details-input").siblings(".placeholder").addClass("fix-placeholder-inactive-alignment"),$("#ifsc-input").addClass("name-input-filled"),$("#details-input").addClass("name-input-filled"),checkForAllValues()):($(".cross-mark-ifsc").css("display","block"),$(".tick-mark-ifsc").css("display","none"),$("#details-input").siblings(".placeholder").removeClass("placeholder-active"),$("#details-input").siblings(".placeholder").removeClass("placeholder-value-inactive"),$("#details-input").siblings(".placeholder").removeClass("fix-placeholder-inactive-alignment"),$("#details-input").val(""),$("#details-input").html(""),checkForAllValues())},error:function(){}}):($("#ifsc-input").siblings(".placeholder").removeClass("placeholder-active"),$(".cross-mark-ifsc").css("display","block"),$(".tick-mark-ifsc").css("display","none"),$("#details-input").siblings(".placeholder").removeClass("placeholder-active"),$("#details-input").siblings(".placeholder").removeClass("placeholder-value-inactive"),$("#details-input").siblings(".placeholder").removeClass("fix-placeholder-inactive-alignment"),$("#details-input").val(""),$("#details-input").html(""),checkForAllValues())}),$("#ifsc-input").keyup(function(){$("#ifsc-input").siblings(".placeholder").hasClass("placeholder-value-inactive")||$("#ifsc-input").siblings(".placeholder").addClass("placeholder-value-inactive")}),$("#neftBranchHint").keyup(function(){$("#neftBranchHint").siblings(".placeholder").hasClass("placeholder-value-inactive")||$("#neftBranchHint").siblings(".placeholder").addClass("placeholder-value-inactive")}),$("#neftCityDetail").keyup(function(){$("#neft-srchBtn").addClass("IFSC-gray-btn"),$("#neftBranchHint").val(""),$("#neftBranchHint").siblings(".placeholder").removeClass("placeholder-active"),$("#neftBranchHint").siblings(".placeholder").removeClass("placeholder-value-inactive"),$("#neftBranchHint").removeClass("name-input-filled"),$("#neftCityDetail").siblings(".placeholder").hasClass("placeholder-value-inactive")||$("#neftCityDetail").siblings(".placeholder").addClass("placeholder-value-inactive")}),$("#neftBankName").on("blur",function(){""!=$("#neftBankName").val()&&$("#neftBankName").addClass("name-input-filled")}),$("#neftBranchHint").on("blur",function(){""!=$("#neftBranchHint").val()&&$("#neftBranchHint").addClass("name-input-filled")}),$("#neftCityDetail").on("blur",function(){""!=$("#neftCityDetail").val()&&$("#neftCityDetail").addClass("name-input-filled")}),$("#neftBankName").keyup(function(){$("#neft-srchBtn").addClass("IFSC-gray-btn")}),$("#ifsc-input").on("keypress",function(event){var regex=new RegExp("^[a-zA-Z0-9]+$"),key=String.fromCharCode(event.charCode?event.charCode:event.which);return regex.test(key)?void 0:(event.preventDefault(),!1)})}),$(window).on("beforeunload",function(){"true"==$("#journeyAbandon").val()?(console.log("going away"),$("#encash-landing-form").is(":visible")?($.ajaxSetup({cache:!1}),$.ajaxSetup({async:!1}),dncJourneyAbandonEncash("Common Page","")):$(".encash-prelogin-lower").is(":visible")&&($.ajaxSetup({cache:!1}),$.ajaxSetup({async:!1}),1==$("#isInline").val()||"true"==$("#isInline").val()?dncJourneyAbandonEncash("Encash Inline Booking",""):dncJourneyAbandonEncash("Encash Booking",""))):console.log("going forward")});var previousIFSCSelected=0,selectedBankDetailIFSC={},previousTenure=0,previousAmount=0;$(document).ready(function(){$(".encashencashotp-form *:input[type!=hidden]:first").focus();var otp_fields=$(".encashOtp-field"),otp_value_field=$(".otp-value");otp_fields.click(function(){""!=otp_value_field.val()?6==otp_value_field.val().length?$("#encash-otp6").focus():$(".encashOtp-field").each(function(){return""==$(this).val()?($(this).focus(),!1):void 0}):$("#encash-otp1").focus()}),otp_fields.on("input",function(e){$(this).val();if(1==$(this).val().length){var num=$(this).val();num=num[0],""!=num&&$(this).val(num.replace(/[^0-9]/g,""))}else{var num=$(this).val(),inputs=$(".encashOtp-field"),index=inputs.index($("#"+e.target.id)),numAtIndex=$(".otp-value").val()[index];num=num[1],(Number(num)==Number(numAtIndex)||"encash-otp6"==e.target.id)&&(num=$(this).val(),num=num[0]),""!=num&&$(this).val(num.replace(/[^0-9]/g,""))}var opt_value="";otp_fields.each(function(){var field_value=$(this).val();""!=field_value&&(opt_value+=field_value)}),otp_value_field.val(opt_value)}).on("keyup",function(e){var key=e.keyCode||e.charCode;if(8==key){otp_value_field.val(otp_value_field.val().slice(0,otp_value_field.val().length-1));for(var i=0;i<=otp_value_field.val().length;i++){var j=i+1;$("#encash-otp"+j).val(otp_value_field.val()[i])}$("#encash-otp"+(otp_value_field.val().length+1)).focus()}else(38==key||""!=$(this).val())&&$(this).next().focus().get(0).setSelectionRange(0,0);$(this).attr("maxlength","2")}).on("paste",function(e){var paste_data=e.originalEvent.clipboardData.getData("text"),paste_data_splitted=paste_data.split("");$.each(paste_data_splitted,function(index,value){otp_fields.eq(index).val(value)})})});var resendOTPCount=0,counter=0,uploadCall=!1,status_code_yono="",dobotpFlagYono=!1;$(document).ready(function(){var linkingStrategy=$("#linkingStrategyYono").val(),status_code_yono=$("#status_code_yono").val(),fetch_yonoCardNumber=$("#fetch-cardNumber_yono").val(),fetch_yonoUserId=$("#fetch-userId_yono").val(),fetch_yonoPassword=$("#fetch-password_yono").val(),passphrase=$("#fetch-passphrase_yono").val(),passphrase_sucess=$("#passphrase").val(),completion_status=$("#msw_completion_status").val(),isLinkingSuccessful=$("#isLinkingSuccessful").val();isLinkingSuccessful&&(isLinkingSuccessful=decryptUserIDYono(isLinkingSuccessful,passphrase_sucess)),completion_status&&(completion_status=decryptUserIDYono(completion_status,passphrase_sucess)),fetch_yonoUserId&&(fetch_yonoUserId=decryptUserIDYono(fetch_yonoUserId,passphrase)),fetch_yonoPassword&&(fetch_yonoPassword=decryptUserIDYono(fetch_yonoPassword,passphrase)),"true"==completion_status&&($("#completed").removeClass("hidden"),$("#main-div").removeClass("hidden"),"true"==isLinkingSuccessful?$("#linking").removeClass("hidden"):$("#no-linking").removeClass("hidden")),console.log("linkingStrategy ==> "+linkingStrategy),console.log("status_code_yono ==> "+status_code_yono),"LINKING_STRATEGY_CARD_AND_DOB"==linkingStrategy?($("#selectYonoCardSection a").addClass("active"),$("#selectYonoUserSection a").removeClass("active"),$(".yono-login-form #yono-card-linking").css("display","block"),$(".yono-login-form #yono-user-linking").css("display","none")):"LINKING_STRATEGY_USER_AND_PWD"==linkingStrategy&&($("#selectYonoUserSection a").addClass("active"),$("#selectYonoCardSection a").removeClass("active"),$(".yono-login-form #yono-card-linking").css("display","none"),$(".yono-login-form #yono-user-linking").css("display","block"),$("#yono_userid").val(fetch_yonoUserId),$("#yono_password").val(fetch_yonoPassword)),fetch_yonoCardNumber&&"504"==status_code_yono&&(formatCardNumberYono(fetch_yonoCardNumber),$("#yono-card-linking #yono_card_tick").css("display","block")),"504"==status_code_yono?($(".yono-login-form .card-otp-wrapper").removeClass("hide-card-wrapper"),$(".yono-login-form #yonoCardGenOtpContainer").addClass("hide-card-wrapper"),$("#yono-card-linking #yono_card_no").css("pointer-events","none"),$("#yono-card-linking #yono_card_dob").addClass("invalid"),$("#yono-card-linking #yono_card_dob_cross").css("display","block"),$("#yono-card-linking #yono_card_otp").addClass("invalid"),$("#yono-card-linking #yono_card_otp_cross").css("display","block")):"510"==status_code_yono?($("#yono-card-linking #yonoCardGenOtpContainer").css("pointer-events","none"),$("#yonoCardGenOtpContainer").addClass("add-disable"),$("#yonoCardGenOtpContainer .submit_btn").addClass("disable-btn"),$("#yono-card-linking #yono_card_no").css("pointer-events","auto")):"777"==status_code_yono&&($(".yono-login-form .card-otp-wrapper").removeClass("hide-card-wrapper"),$(".yono-login-form #yonoCardGenOtpContainer").addClass("hide-card-wrapper"),$("#yono-card-linking #yono_card_no").css("pointer-events","none"),$("#yono-card-linking #yono_card_dob").addClass("invalid"),$("#yono-card-linking #yono_card_dob").css("pointer-events","none"),$("#yono-card-linking #yono_card_dob_cross").css("display","block"),$("#yono-card-linking #yono_card_otp").addClass("invalid"),$("#yono-card-linking #yono_card_otp").css("pointer-events","none"),$("#yono-card-linking #yono_card_otp_cross").css("display","block")),"714"==status_code_yono||"715"==status_code_yono?($(".yono-login-form .user-otp-wrapper").removeClass("hide-user-wrapper"),$(".yono-login-form .user-otp-gen-wrapper").addClass("hide-user-wrapper"),$("#yono-user-linking #yono_user_otp").addClass("invalid"),$("#yono-user-linking #yono_user_otp_cross").css("display","block")):"888"==status_code_yono?($(".yono-login-form .user-otp-wrapper").removeClass("hide-user-wrapper"),$(".yono-login-form .user-otp-gen-wrapper").addClass("hide-user-wrapper"),$("#yono-user-linking #yono_user_otp").addClass("invalid"),$("#yono-user-linking #yono_user_otp").css("pointer-events","none"),$("#yono-user-linking #yono_user_otp_cross").css("display","block")):"716"==status_code_yono&&($("#yono-user-linking #yonoUserGenBtn").css("pointer-events","none"),$("#yonoUserGenBtn").addClass("add-disable"),$("#yonoUserGenBtn .yono_generate_btn").addClass("disable-btn")),$(".tab-menu li a").on("click",function(){var target=$(this).attr("data-rel");return $(".tab-menu li a").removeClass("active"),$(this).addClass("active"),$("#"+target).fadeIn("slow").siblings(".tab-box").hide(),!1}),$("#yono-card-linking #yono_card_no").on("keyup",function(e){var cardNumberIP=$("#yono-card-linking #yono_card_no").val().trim(),firstDigit=cardNumberIP.charAt(0),secondDigit=cardNumberIP.charAt(1),kc=e.which||e.keyCode;("8"==kc||"46"==kc)&&($("#yono-card-linking #yono_card_no").removeClass("valid"),$("#yono-card-linking #yono_card_no").removeClass("invalid"),$("#yono-card-linking #yono_card_tick").css("display","none"),$("#yono-card-linking #yono_card_err").css("display","none"),$("#yono-card-linking #yono_card_cross").css("display","none"));var diffLength=(String.fromCharCode(kc),cardNumberIP_Prev.length-cardNumberIP.length),formatSpd=/[ `!@#$%^&*()_+\-=\[\]{};':"\\|,.<>\/?~]/,formatSp=/[ `!@#$%^&*()_+\=\[\]{};':"\\|,.<>\/?~]/,formatAl=/^[A-Za-z]+$/;formatSp.test(cardNumberIP)||formatAl.test(cardNumberIP)?(cardNumberIP="",$("#yono-card-linking #yono_card_no").val(""),e.preventDefault()):(15!=cardNumberIP.length&&16!=cardNumberIP.length||formatSpd.test(cardNumberIP)?cardNumberIP.length>16&&!formatSpd.test(cardNumberIP)&&(cardNumberIP=3==firstDigit&&7==secondDigit?cardNumberIP.slice(0,15):cardNumberIP.slice(0,16),$("#yono-card-linking #yono_card_no").val(cardNumberIP)):(formatCardNumYono(),cardNumberIP=$("#yono-card-linking #yono_card_no").val()),3==firstDigit&&7==secondDigit&&1!=diffLength&&2!=diffLength&&35!=kc&&36!=kc&&37!=kc&&39!=kc?($("#yono-card-linking #yono_card_no").attr("maxlength","17"),formatAndVerifyAmexLoginYono(cardNumberIP),cardNumberIP.length<17&&$("#yono-card-linking #yono_card_cross").css("display","block")):(3!=firstDigit||3==firstDigit&&7!=secondDigit)&&1!=diffLength&&2!=diffLength&&35!=kc&&36!=kc&&37!=kc&&39!=kc?($("#yono-card-linking #yono_card_no").attr("maxlength","19"),formatAndVerifyNonAmexLoginYono(cardNumberIP),cardNumberIP.length<19&&$("#yono-card-linking #yono_card_cross").css("display","block")):3!=firstDigit||3==firstDigit&&7!=secondDigit?(formatNonAmexWhileDeleteLoginYono(cardNumberIP),cardNumberIP.length<19&&$("#yono-card-linking #yono_card_cross").css("display","block")):3==firstDigit&&7==secondDigit&&(formatAmexWhileDeleteLoginYono(cardNumberIP),cardNumberIP.length<17&&$("#yono-card-linking #yono_card_cross").css("display","block")),cardSubValidityYono()),cardNumberIP_Prev=$("#yono-card-linking #yono_card_no").val()}),$("#yono-card-linking #yono_card_no").on("blur",function(){$("#yono-card-linking #yono_card_no").hasClass("invalid")||$("#yono-card-linking #yono_card_no").css("border-buttom","1px solid #9e9e9e");var cardNumberIP=$("#yono-card-linking #yono_card_no").val().trim(),firstDigit=cardNumberIP.charAt(0),secondDigit=cardNumberIP.charAt(1),len=cardNumberIP.length;17==len&&3==firstDigit&&7==secondDigit||19==len||$("#yono-card-linking #yono_card_tick").css("display","none"),-1==cardNumberIP.indexOf("-")&&(3==firstDigit&&7==secondDigit&&cardNumberIP.length>15?cardNumberIP=cardNumberIP.slice(0,15):cardNumberIP.length>16&&(cardNumberIP=cardNumberIP.slice(0,16)),$("#yono-card-linking #yono_card_no").val(cardNumberIP)),cardNumberIP&&(formatCardNumYono(),validateCardNumbersNewYono(cardNumberIP)),cardSubValidityYono()}),$("#yono-card-linking #yono_card_no").focus(function(){removeErrorcardNumYono(),$("#yono-card-linking #yono_card_no").removeClass("invalid")}),$("#yono-card-linking #yono_card_dob").focus(function(){$("#yono-card-linking #yono_card_dob").removeClass("invalid"),$("#yono-card-linking #yono_card_dob_cross").css("display","none")}),$("#yono-card-linking #yono_card_otp").focus(function(){var data=$("#yono-card-linking #yono_card_otp").val();$("#yono-card-linking #yono_card_otp").removeClass("invalid"),$("#yono-card-linking #yono_card_otp_cross").css("display","none"),data.length>0&&(6===data.length?($("#yono-card-linking #yono_card_otp_tick").css("display","block"),$("#yono-card-linking #yono_card_otp_cross").css("display","none")):($("#yono-card-linking #yono_card_otp_tick").css("display","none"),$("#yono-card-linking #yono_card_otp_cross").css("display","block")))}),$("#yono-user-linking #yono_user_otp").focus(function(){var data=$("#yono-user-linking #yono_user_otp").val();$("#yono-user-linking #yono_user_otp").removeClass("invalid"),$("#yono-user-linking #yono_user_otp_cross").css("display","none"),data.length>0&&(6===data.length?($("#yono-user-linking #yono_user_otp_tick").css("display","block"),$("#yono-user-linking #yono_user_otp_cross").css("display","none")):($("#yono-user-linking #yono_user_otp_tick").css("display","none"),$("#yono-user-linking #yono_user_otp_cross").css("display","block")))}),$(document).on("mouseover mousemove",function(){var dob=$("#yono-card-linking #yono_card_dob").val();dob&&(dobotpFlagYono=!0,$("#yono-card-linking #yono_dob_label").addClass("active"),$("#yono-card-linking #yono_card_no").removeClass("invalid"),$("#yono-card-linking #yono_card_no").addClass("valid"),$("#yono-card-linking #yono_card_dob_cross").css("display","none"),$("#yono-card-linking #yono_card_dob_tick").css("display","block")),checkCardSubmitBtnYono()}),$("#yono-card-linking #yono_card_otp").on("keyup",function(){var data=$("#yono-card-linking #yono_card_otp").val();data.length>0?6===data.length?($("#yono-card-linking #yono_card_otp_tick").css("display","block"),$("#yono-card-linking #yono_card_otp_cross").css("display","none"),$("#yono-card-linking #yono_card_otp").addClass("valid")):($("#yono-card-linking #yono_card_otp_tick").css("display","none"),$("#yono-card-linking #yono_card_otp_cross").css("display","block"),$("#yono-card-linking #yono_card_otp").removeClass("valid")):$("#yono-card-linking #yono_card_otp_tick").css("display","none")
}),$("#yono-user-linking #yono_user_otp").on("keyup",function(){var data=$("#yono-user-linking #yono_user_otp").val();data.length>0?6===data.length?($("#yono-user-linking #yono_user_otp_tick").css("display","block"),$("#yono-user-linking #yono_user_otp_cross").css("display","none"),$("#yono-user-linking #yono_user_otp").addClass("valid")):($("#yono-user-linking #yono_user_otp_tick").css("display","none"),$("#yono-user-linking #yono_user_otp_cross").css("display","block"),$("#yono-user-linking #yono_user_otp").removeClass("valid")):$("yono-user-linking #yono_user_otp_tick").css("display","none")}),$("#yono-card-linking #yono_card_otp, #yono-user-linking #yono_password, #yono-user-linking #yono_user_otp").bind("cut copy paste drop",function(e){e.preventDefault()}),$("#yono-card-linking #yono_card_otp").blur(function(){var data=$("#yono-card-linking #yono_card_otp").val();data?data.length<6?($("#yono-card-linking #yono_card_otp").addClass("invalid"),$("#yono-card-linking #yono_card_otp_cross").css("display","block")):6===data.length&&$("#yono-card-linking #yono_card_otp_tick").css("display","block"):($("#yono-card-linking #yono_card_otp").addClass("invalid"),$("#yono-card-linking #yono_card_otp_cross").css("display","block"),$("#yono-card-linking #yono_card_otp_tick").css("display","none"))}),$("#yono-user-linking #yono_user_otp").blur(function(){var data=$("#yono-user-linking #yono_user_otp").val();data?data.length<6?($("#yono-user-linking #yono_user_otp").addClass("invalid"),$("#yono-user-linking #yono_user_otp_cross").css("display","block")):6===data.length&&$("#yono-user-linking #yono_user_otp_tick").css("display","block"):($("#yono-user-linking #yono_user_otp").addClass("invalid"),$("#yono-user-linking #yono_user_otp_cross").css("display","block"),$("#yono-user-linking #yono_user_otp_tick").css("display","none"))}),$("#yono-card-linking #yono_card_dob").blur(function(){var dob=$("#yono-card-linking #yono_card_dob").val();dob&&($("#yono-card-linking #yono_dob_label").addClass("active"),$("#yono-card-linking #yono_card_dob").removeClass("invalid"),$("#yono-card-linking #yono_card_dob").addClass("valid"),$("#yono-card-linking #yono_card_dob_tick").css("display","block"),$("#yono-card-linking #yono_card_dob_cross").css("display","none"))}),$("#yono-card-linking #yono_calendar").click(function(){$("#yono-card-linking .datepicker input#yono_card_dob").click()}),document.addEventListener("keydown",function(e){var kc=e.which||e.keyCode;if("13"==kc)if(e.preventDefault(),$("#selectYonoUserSection a").hasClass("active"))if($("#yono-user-linking .user-otp-gen-wrapper").hasClass("hide-user-wrapper"))"block"==$("#yono-user-linking #yono_user_otp_tick").css("display")&&$("#yonoUserSubmitBtn .submit_btn").click();else{var userid=$("#yono-user-linking #yono_userid").val(),password=$("#yono-user-linking #yono_password").val();userid&&password&&$("#yonoUserGenBtn .yono_generate_btn").click()}else if($("#selectYonoCardSection a").hasClass("active")){var otpSectionHidden=$("#yono-card-linking .card-otp-wrapper").hasClass("hide-card-wrapper");otpSectionHidden?"block"==$("#yono-card-linking #yono_card_tick").css("display")&&($("#yonoCardGenOtpContainer .submit_btn").click(),$("#yono-card-linking #yono_card_no").blur()):"block"==$("#yono-card-linking #yono_card_dob_tick").css("display")&&"block"==$("#yono-card-linking #yono_card_otp_tick").css("display")&&$("#yonoCardSubmitOtp .submit_btn").click()}})});var yonoUserResendOTPCount=0,yonoCardResendOTPCount=0,creditCardValidateMicroYono=window.creditCardValidateMicroYono=function(value){if(/[^0-9 \-]+/.test(value))return!1;var n,cDigit,nCheck=0,nDigit=0,bEven=!1;if(value=value.replace(/\D/g,""),value.length<13||value.length>19)return!1;for(n=value.length-1;n>=0;n--)cDigit=value.charAt(n),nDigit=parseInt(cDigit,10),bEven&&(nDigit*=2)>9&&(nDigit-=9),nCheck+=nDigit,bEven=!bEven;return nCheck%10===0},creditCardValidateRetailYono=window.creditCardValidateRetailYono=function(value){if(/[^0-9 \-]+/.test(value))return!1;var n,cDigit,nCheck=0,nDigit=0,bEven=!1;if(value=value.replace(/\D/g,""),15!==value.length&&16!==value.length)return!1;for(n=value.length-1;n>=0;n--)cDigit=value.charAt(n),nDigit=parseInt(cDigit,10),bEven&&(nDigit*=2)>9&&(nDigit-=9),nCheck+=nDigit,bEven=!bEven;return nCheck%10===0},cardNumberIP_Prev=0,isValidCard=!1;$("#yono-card-linking #yono_card_no").on("keydown",function(e){var kc=e.which||e.keyCode;return"189"==kc?void e.preventDefault():void 0}),$(document).ready(function(){$("#card-number-4").on("blur",function(){16==($("#card-number-1").val()+$("#card-number-2").val()+$("#card-number-3").val()+$("#card-number-4").val()).length?$("#card-number-4").siblings("label").addClass("valid"):$("#card-number-4").siblings("label").removeClass("valid").addClass("error")}),$("#card-number-1").on("blur",function(){$("#card-number-1").val().length<=3?(console.log("card-1 -----------"),$("#card-number-1").attr("style"," border:solid 1px #ff0000;"),$("#card-number-4").siblings("label").removeClass("valid").removeClass("error")):$("#card-number-1").attr("style"," border:solid 1px #cdcbcb;")}),$("#card-number-2").on("blur",function(){$("#card-number-2").val().length<=3?(console.log("card-2 -----------"),$("#card-number-2").attr("style"," border:solid 1px #ff0000;"),$("#card-number-4").siblings("label").removeClass("valid").removeClass("error")):$("#card-number-2").attr("style"," border:solid 1px #cdcbcb;")}),$("#card-number-3").on("blur",function(){$("#card-number-3").val().length<=3?(console.log("card-3 -----------"),$("#card-number-3").attr("style"," border:solid 1px #ff0000;"),$("#card-number-4").siblings("label").removeClass("valid").removeClass("error")):$("#card-number-3").attr("style"," border:solid 1px #cdcbcb;")}),$("#card-number-4").on("blur",function(){$("#card-number-4").val().length<=3?(console.log("card-4 -----------"),$("#card-number-4").attr("style"," border:solid 1px #ff0000;"),$("#card-number-4").siblings("label").removeClass("valid").removeClass("error")):$("#card-number-4").attr("style"," border:solid 1px #cdcbcb;")}),$("#channelFromInfo").val()==$("#FCUCrossSellConfigC2B").val()&&($(".c2bFcuCrossellMargin").css("margin-top","5px"),$(".fcuErrorMessRedCol").css("display","none"))}),$(document).ready(function(){$("body").click(function(e){("card-number-1"==e.target.id||"card-number-2"==e.target.id||"card-number-3"==e.target.id||"card-number-4"==e.target.id)&&($("#card-number-1").val($("#maskNumInputFcu-1").val()),$("#card-number-2").val($("#maskNumInputFcu-2").val()),$("#card-number-3").val($("#maskNumInputFcu-3").val()),$("#card-number-4").val($("#maskNumInputFcu-4").val()))})}),$("body").on("keyup click",function(e){if($(".bt-wrapper-class").is(":visible")&&"card-number-1"!=e.target.id&&"card-number-2"!=e.target.id&&"card-number-3"!=e.target.id&&"card-number-4"!=e.target.id){"XXXX"!=$("#card-number-1").val()&&($("#maskNumInputFcu-1").val($(".bt-wrapper-class #card-number-1").val()),$("#maskNumInputFcu-2").val($(".bt-wrapper-class #card-number-2").val()),$("#maskNumInputFcu-3").val($(".bt-wrapper-class #card-number-3").val()),$("#maskNumInputFcu-4").val($(".bt-wrapper-class #card-number-4").val()));for(var maskedInput="",i=0;i<$(".bt-wrapper-class #card-number-1").val().length;i++)maskedInput+="X";$(".bt-wrapper-class #card-number-1").val(maskedInput),maskedInput="";for(var i=0;i<$(".bt-wrapper-class #card-number-2").val().length;i++)maskedInput+="X";$(".bt-wrapper-class #card-number-2").val(maskedInput),maskedInput="";for(var i=0;i<$(".bt-wrapper-class #card-number-3").val().length;i++)maskedInput+="X";$(".bt-wrapper-class #card-number-3").val(maskedInput),maskedInput="";for(var i=0;i<$(".bt-wrapper-class #card-number-4").val().length;i++)maskedInput+="X";if($(".bt-wrapper-class #card-number-4").val(maskedInput),maskedInput="",""==$("#maskNumInputFcu-1, #maskNumInputFcu-2, #maskNumInputFcu-3, #maskNumInputFcu-4").val())return}}),$("#card-number-1").bind("keyup",function(){var error=[],card1=$("#card-number-1").val();card1.length>3&&(error.push("<p>Allow digits only(0 - 4).</p>"),this.value.length==this.maxLength&&$("#card-number-2").focus())}),$("#card-number-2").bind("keyup",function(){var error=[],card2=$("#card-number-1").val();card2.length>3&&(error.push("<p>Allow digits only(0 - 4).</p>"),this.value.length==this.maxLength&&$("#card-number-3").focus())}),$("#card-number-3").bind("keyup",function(){var error=[],card3=$("#card-number-1").val();card3.length>3&&(error.push("<p>Allow digits only(0 - 4).</p>"),this.value.length==this.maxLength&&$("#card-number-4").focus())}),$("document").ready(function(){$(".eeo-carousel-wrap").slick({slidesToShow:2,slidesToScroll:1,dots:!0,appendDots:$("#offer-slider-nav"),arrows:!0,focusOnSelect:!1,cssEase:"linear",speed:900,infinite:!1,responsive:[{breakpoint:600,settings:{slidesToShow:2,slidesToScroll:1}},{breakpoint:480,settings:{slidesToShow:1,slidesToScroll:1}}]})});var resendOTPCount=0;$(document).ready(function(){if($("#reward-redirection-form").is(":visible")){var loaderHtml='<div class="overlay-loader"></div>';$(".modal-overlay").append(loaderHtml),"RS"==$("#pageToRedirect").val()?($("#reward-redirection-form").attr("action","/creditcards/app/rewards/rewards-summary"),$("#reward-redirection-form").submit()):$("#reward-redirection-form").submit()}if((1==$("#cardLogo").val()||"true"==$("#cardLogo").val())&&$("#teamsiteDataTravelCard").val()){var data=JSON.parse($("#teamsiteDataTravelCard").val());console.log("teamsite data =======>",data);var html="";for(i=0;i<data.travelCardFeatures.cardFeaturesDetails.length;i++)html+='<div class="t-rewards-block"><div class="t-rewards-cnt-block"><div class="t-rewards-title">'+data.travelCardFeatures.cardFeaturesDetails[i].heading+'</div><div class="t-rewards-description">'+data.travelCardFeatures.cardFeaturesDetails[i].features+'</div></div><div class="t-rewards-img-block"><img src="/creditcards/resources/img/reward-img-'+(i+1)+'.svg" alt=""/></div></div>';$(".t-rewards-wrap").html(html);var annualFees=data.travelCardFeatures.annualFees.replace("</li>","<li>").split("<li>")[1];console.log("Annual fees text=====>",annualFees),$("#travelAnnualFeesText").html(annualFees)}}),$("document").on("ready",function(){$("#cancelOTPverify").onClick(function(){$(".gray-otp-wrapp.verifyOtpSection").hide()}),$("#content-section-c2s").length>0&&$(".view-edit-details.CCRHideDetails").hide()}),$(document).ready(function(){if((1==$("#cardLogo").val()||"true"==$("#cardLogo").val())&&$("#teamsiteDataTravelCard").val()){var data=JSON.parse($("#teamsiteDataTravelCard").val());console.log("teamsite data =======>",data);var html="";for(i=0;i<data.travelCardFeatures.cardFeaturesDetails.length;i++)html+='<div class="t-rewards-block"><div class="t-rewards-cnt-block"><div class="t-rewards-title">'+data.travelCardFeatures.cardFeaturesDetails[i].heading+'</div><div class="t-rewards-description">'+data.travelCardFeatures.cardFeaturesDetails[i].features+'</div></div><div class="t-rewards-img-block"><img src="/creditcards/resources/img/reward-img-'+(i+1)+'.svg" alt=""/></div></div>';$(".t-rewards-wrap").html(html);var annualFees=data.travelCardFeatures.annualFees.replace("</li>","<li>").split("<li>")[1];console.log("Annual fees text=====>",annualFees),$("#travelAnnualFeesText").html(annualFees)}});var rewards={},rewardsOtherData={},rewardsSummaryGoal={},highlyRecommended={},moreRewards={},foreClosureError="",eStmtError="",tab1="",contextPath="",statesDetail=[],citiesDetail=[],pinList=[],companyCitiesDetail=[],companyPinList=[],quickJsonObj={email:"",mobile:""},flexiPayObj={minAmount:0,tenureLmtAmt:0,minTotalAmt:0},selectMaxChar=16,isiOS=!!navigator.userAgent.match(/iP(hone|od|ad)/i),isSafari=/Safari/.test(navigator.userAgent)&&/Apple Computer/.test(navigator.vendor),goalSetEnable=!1,autoCompleteErrorFlag,emailResendFlag,verifyResendFlag,mobileResendFlag,calculatorRange={minLimit:0,maxLimit:0},viewport={width:$(window).width(),height:$(window).height()},modifyOtherFields=!1,isModifyJourney=!1,isProceedCheckboxChecked=!1,docUploadOptionVisible=!1,onlyAddressLineCaseChanged=!1,addressLineOneChanged=!1,addressLineTwoChanged=!1,digiFieldModifyFlag=!1,docRefIdList=[],isAddonOtpVerify=!1,isDocUploadForAddonApplicant=!1,isAddonRelationValidate=!1,isAddonKycNameValidate=!1,isAddonDobValidate=!1,isAddonNameOnAddoncardValidate=!1,isAddonEmailValidate=!1,isAddonGenderFieldValidate=!1,oldAddonGenMobileNumber="";$(function(){function calHeightMicro(){var contentHeight=$(".microportal-content-wrapper").outerHeight(),navHeight=$(".microportal-nav-menu").outerHeight(),sideBardHeight=$(".microportal-side-bar-menu").outerHeight(),heightAdjusted=0;heightAdjusted=contentHeight>=sideBardHeight?contentHeight:sideBardHeight;var totalHeight=heightAdjusted+navHeight;$(".microportal-main").css("height",totalHeight)}function highlightVerifyInfoTab(){$(".tab1-vertical-line").css({height:"96%","border-color":"#f2f2fd"}),$(".tab2-vertical-line").hide(),$(".tab1-verify-acntInfo").removeClass("active-clear-dues-tab")}function resetMicroActiveState(){$("#micro-reinstatement-block").removeClass("active-state"),$("#micro-bal-conv-block").removeClass("active-state"),$("#micro-restruct-acc").removeClass("active-state"),$("#micro-settle-acc").removeClass("active-state")}function calculateSlabData(){var additionalAmount=$(".intrest-option-container #priceRange").val(),amtForBalConv=$(".intrest-option-container #priceRangeBalCon").val(),sliderMaxLimit=$(".microportal-content-wrapper #checkMaxval").val(),sliderMinLimit=$(".microportal-content-wrapper #checkMinval").val();sliderMaxLimit=Number(Number(sliderMaxLimit).toFixed(2)),sliderMinLimit=Number(Number(sliderMinLimit).toFixed(2)),additionalAmount=Number(Number(additionalAmount).toFixed(2)),amtForBalConv=Number(Number(amtForBalConv).toFixed(2)),$("#payToActivateOffer a").empty();var buttonVerbiage="Pay <span>&#8377;</span>"+additionalAmount+" to Activate Offer";$("#payToActivateOffer a").html(buttonVerbiage),$("#payToActivateOfferMob a").empty();var buttonVerbiage="Pay <span>&#8377;</span>"+additionalAmount+" to Activate Offer";$("#payToActivateOfferMob a").html(buttonVerbiage),$(".balcon-offer-section #dynamic-grid-data").empty(),$(".idea-section-mobile #dynamic-grid-block-mob").empty();var slabDataList=$(".microportal-content-wrapper #gridList").val();slabDataList=JSON.parse(slabDataList);var gridView="",calculatedEmi=0,EMI=0,firstPower=0,secondPower=0,intRatePer=0,tenure=0,defGridSize=$(".microportal-content-wrapper #micro-def-grid-len").val(),calculatedGridSize=0;if(additionalAmount!=sliderMinLimit&&""!=additionalAmount){for(i=0;i<slabDataList.length;i++)if(slabDataList[i].slabMaxAmount>=additionalAmount&&additionalAmount>=slabDataList[i].slabMinAmount)for(calculatedGridSize=slabDataList[i].gridDetailList.length,$(".center-tag-with-bg #offer-activated-count").html(calculatedGridSize),$(".center-tag-with-bg #offer-activated-count-mob").html(calculatedGridSize),j=0;j<slabDataList[i].gridDetailList.length;j++)intRatePer=Number(slabDataList[i].gridDetailList[j].interestRatePercentage),tenure=Number(slabDataList[i].gridDetailList[j].tenure),amtForBalConv=Number(amtForBalConv),intRatePer/=1200,firstPower=Math.pow(1+intRatePer,tenure),secondPower=firstPower-1,EMI=amtForBalConv*intRatePer*firstPower/secondPower,calculatedEmi=Number(Number(EMI).toFixed(2)),gridView+=viewport.width>768?'<div class="col-md-3">									<div class="field-view-radio">									<label class="field-view-radio-btn">									<span class="icon radio-check"></span>                        			<span class="checkmark">										<span class="label">EMI of &#8377;<span id="balAmt"></span>'+calculatedEmi+'<br>for <span class="tenure">'+tenure+'</span> months </span>										<span class="small-text"> Interest Rate @ <span>'+slabDataList[i].gridDetailList[j].interestRatePercentage+"</span>%</span></span>									</label>									</div>									</div>":'<div class="col-md-12">						<div class="field-view">						<label class="field-view-radio-btn">						<label class="fancy-radio"><label class="fancy-radio"><input name="radio" class="styled-radio" type="radio" value=""><span class="radio-toggle"></span></label></label>            			<span class="checkmark">							<span class="label">EMI of &#8377;<span id="balAmt"></span>'+calculatedEmi+' for <span class="tenure">'+tenure+'</span> months </span><br>							<span class="small-text"> Interest Rate @ <span>'+slabDataList[i].gridDetailList[j].interestRatePercentage+"</span>%</span></span>						</label>						</div>						</div>";viewport.width>768?(4===calculatedGridSize||"4"===calculatedGridSize?$(".balcon-offer-section #dynamic-grid-block .m-0").css("margin-left","0px"):3===calculatedGridSize||"3"===calculatedGridSize?$(".balcon-offer-section #dynamic-grid-block .m-0").css("margin-left","5.5rem"):2===calculatedGridSize||"2"===calculatedGridSize?$(".balcon-offer-section #dynamic-grid-block .m-0").css("margin-left","12rem"):(1===calculatedGridSize||"1"===calculatedGridSize)&&$(".balcon-offer-section #dynamic-grid-block .m-0").css("margin-left","17.5rem"),$(".balcon-offer-section #dynamic-grid-data").append(gridView),$(".balcon-offer-section #initial-grid-block").css("display","none"),$(".balcon-offer-section #dynamic-grid-block").css("display","block"),$(".radio-view.deactivated").css("top","100px"),$(".balcon-offer-section .radio-view.deactivated .row.m-0 .col-md-3").css("pointer-events","none"),$("#payToActivateOffer").show(),$("#offerConfirmBtn").hide(),$(".balcon-offer-section .radio-view.deactivated .row.m-0 .col-md-3").on("click",function(){$(this).addClass("selectedBookingAmt"),$(this).css({"border-color":"#00b1f2"}),$(this).find(".checkmark").find("span").css("color","#00b1f2"),$("#offerConfirmBtn").css({background:"#00b1f2","pointer-events":"auto"})})):($(".idea-section-mobile #dynamic-grid-block-mob").append(gridView),$(".idea-section-mobile #initial-grid-block-mob").css("display","none"),$(".idea-section-mobile #dynamic-grid-block-mob").css("display","block"),$(".radio-view.deactivated").css("top","100px"),$(".balcon-offer-section .radio-view.deactivated .row.m-0 .col-md-3").css("pointer-events","none"),$("#payToActivateOfferMob").show(),$("#offerConfirmBtnMob").hide(),$(".idea-section-mobile .mob-radio-view .row.m-0 .col-md-12").on("click",function(){console.log("enter confirm"),$(this).addClass("selectedBookingAmt"),$(this).find(".checkmark").find("span").css("color","#00b1f2"),$("#offerConfirmBtnMob").css({background:"#00b1f2","pointer-events":"auto"})}))}else additionalAmount==sliderMinLimit&&($(".center-tag-with-bg #offer-activated-count").html(defGridSize),$(".center-tag-with-bg #offer-activated-count-mob").html(defGridSize),$(".balcon-offer-section #initial-grid-block").css("display","block"),$(".balcon-offer-section #dynamic-grid-block").css("display","none"),$(".idea-section-mobile #initial-grid-block-mob").css("display","block"),$(".idea-section-mobile #dynamic-grid-block-mob").css("display","none"),"Y"==$(".microportal-section-container #madFulfilmentFlag").val()?($(".radio-view.deactivated").css("top","100px"),$(".balcon-offer-section .radio-view.deactivated .row.m-0 .col-md-3").css("pointer-events","auto"),$("#payToActivateOffer").hide(),$("#payToActivateOfferMob").hide(),$("#offerConfirmBtn").show(),$("#offerConfirmBtnMob").show()):($(".radio-view.deactivated").css("top","100px"),$(".balcon-offer-section .radio-view.deactivated .row.m-0 .col-md-3").css("pointer-events","none"),$("#payToActivateOffer").show(),$("#payToActivateOfferMob").show(),$("#offerConfirmBtn").hide(),$("#offerConfirmBtnMob").hide()))}function loadMoreInit(){$(".track-service tr.new-row").each(function(index){if(index+1>seachCounter){$(this).addClass("hide");var $next=$(this).next();$next.hasClass("blank-row")?$next.addClass("hide"):$next.next().hasClass("blank-row")&&$next.next().addClass("hide")}}),0==$("tr.new-row.hide").length&&$(".track-service .load-more").addClass("hide")}function loadMore(parentEle){var count=0;$(parentEle).find("tr.new-row").each(function(){$(this).hasClass("hide")&&seachCounter>count&&($(this).removeClass("hide"),$(this).next().hasClass("blank-row")&&$(this).next().removeClass("hide"),count++),0==$(parentEle).find("tr.new-row.hide").length&&$(parentEle).find(".track-service .load-more").addClass("hide")})}function loadMoreInitMyAcc(){$(".my-account tr.my-acc-toggle-row").each(function(index){index+1>seachCounterNew&&($(this).addClass("hide"),$(this).next().hasClass("notification")&&$(this).next().addClass("hide"))}),0==$("tr.my-acc-toggle-row.hide").length&&$(".my-account #load-more-settletransactions").addClass("hide")}function loadMoreMyAcc(parentEle){var count=0;$(parentEle).find("tr.my-acc-toggle-row").each(function(){$(this).hasClass("hide")&&seachCounterNew>count&&($(this).removeClass("hide"),$(this).next().hasClass("notification")&&$(this).next().removeClass("hide"),count++),0==$(parentEle).find("tr.my-acc-toggle-row.hide").length&&$(parentEle).find(".my-account #load-more-settletransactions").addClass("hide")})}function loadMoreInitMyAccST(){$(".my-account tr.my-acc-trans").each(function(index){index+1>seachCounterNewST&&$(this).addClass("hide")}),0==$("tr.my-acc-trans.hide").length&&$(".my-account #load-more-transundersettles").addClass("hide")}function loadMoreMyAccST(parentEle){var count=0;$(parentEle).find("tr.my-acc-trans").each(function(){$(this).hasClass("hide")&&seachCounterNewST>count&&($(this).removeClass("hide"),count++),0==$(parentEle).find("tr.my-acc-trans.hide").length&&$(parentEle).find(".my-account #load-more-transundersettles").addClass("hide")})}function populateForclosureErrorMessage($errorMessage){if(""!=$errorMessage){if($("#foreClosureErrorDiv .error-wrap .top-error").length)$("#foreClosureErrorDiv .error-wrap .top-error").html($errorMessage);else var html='<div class="error-wrap"><h5 class="top-error">'+$errorMessage+"</h5></div>";$("#foreClosureErrorDiv").html(html)}else $("#foreClosureErrorDiv .error-wrap .top-error").remove()}function populateEStmtErrorMessage($errorMessage){if(""!=$errorMessage){if($("#eStmtErrorDiv .error-wrap .top-error").length)$("#eStmtErrorDiv .error-wrap .top-error").html($errorMessage);else var html='<div class="error-wrap"><h5 class="top-error">'+$errorMessage+"</h5></div>";$("#eStmtErrorDiv").html(html)}else $("#eStmtErrorDiv .error-wrap .top-error").remove()}function duplicateStatement(){var selectedDate=$("#DuplicateStatement").find(":selected[value]"),selectedValue="";$.each(selectedDate,function(){selectedValue+=$(this).attr("value")+","}),$("#cycleDate").val(selectedValue)}function greeting(){var hours=(new Date).getHours();return 12>hours?"Good Morning":17>hours?"Good Afternoon":"Good Evening"}function initBTForm(){$("#bt-form").exists()&&($("#bt-form #generate-otp-field").hide(),$("#bt-form #enter-otp-field").hide(),$("#bt-form #confirm-button").addClass("disabled").prop("disabled",!0),$("#bt-form #rriInfo").hide(),$("#bin-error").hide(),$("#bt-form #offers .option").hide(),$("#mode-of-delivery-field").hide(),$("#mailing-address-field").hide(),$("#bt-form #bankName").change(function(){0==$.trim($(this).val()).length?($("#bt-form #amount").attr("readonly",!0),$("#offers .dd-options").hide()):($("#bt-form #amount").removeAttr("readonly"),$("#offers .dd-options").show())}).change())}function resetBtForm(){var cardNumber=$(".card-number").map(function(){return $(this).val()}).get().join("");if($("#bt-form #savedCards").exists()){var ddlCard=$("#bt-form #savedCards").val().replace(/\D/g,"");ddlCard!=cardNumber&&$("#bt-form #savedCards").val("").change().siblings("ul").find("li").removeClass("selected")}$("#bt-form #amount").val("").removeClass("error").siblings("label.error").remove();var text=DATA_FROM_PROPERTY.selectOfferText+" (<span class='no-of-offers'>0</span>)";text=DATA_FROM_PROPERTY.selectOfferText,$("#bt-form #offers .selected").html(text),$("#bt-form #offers .dd-options").hide(),$("#bt-form #offers .dd-options .option.selected-option").removeClass("selected-option"),$("#bt-form #calculations").html(""),$("#bt-form #rriInfo").html("").hide(),$("#bt-form #confirmation .col-data").html(""),$("#bt-form #otp").val("").removeClass("error").siblings("label.error").remove(),$("#bt-form #otp").siblings(".errMsgDisplay").remove(),$("#bt-form #generate-otp-field").hide(),$("#bt-form #enter-otp-field").hide(),$("#bt-form #term-condition-id").parent().removeClass("checked"),$("#bt-form #confirm-button").prop("disabled",!0).addClass("disabled").removeClass("primary").addClass("secondary"),$("#bt-form #gstOnProcFeeBTDisplay").addClass("hide"),$("#bt-form #gstOnProcFeeBT").text("XX")}function initEncash(){$("#encash-form").exists()&&($("#encash-form #disbursementMode").attr("checked","checked").trigger("change"),$("#encash-form #generate-otp-field").hide(),$("#encash-form #enter-otp-field").hide(),$("#encash-form #confirm-button").addClass("disabled").prop("disabled",!0),$("#encash-form").find("#name").blur(function(){setFormVisibility($("#encash-form"))}).trigger("blur"),$("#encash-form").find("#encashBankName").blur(function(){setFormVisibility($("#encash-form"))}).trigger("blur"),$("#encash-form #calculations-encash").addClass("hide"),$("#encash-form #saveDisplay").addClass("hide"),$("#encash-form #youSaveId").addClass("hide"),$("#encash-form #rriInfo").addClass("hide"),$("#encash-form #encashRRIAstrisk").addClass("hide"),$("#encash-form #encashROITooltipId").addClass("hide"))}function initEmd(){$("#emd-form").exists()&&($("#emd-form #generate-otp-field").hide(),$("#emd-form #enter-otp-field").hide(),$("#emd-form").find("#name").blur(function(){setFormVisibility($("#emd-form"))}).trigger("blur"),$("#emd-form").find("#emdBankName").blur(function(){setFormVisibility($("#emd-form"))}).trigger("blur"),$("#emd-form #calculations-emd").addClass("hide"),$("#emd-form #rriInfo").addClass("hide"))}$("select#filterPeriod").on("change",function(){var textStr=$(this).find("option:selected").val();"7"!=textStr?$("li.datepicker").css("visibility","hidden"):$("li.datepicker").css("visibility","visible")}).change(),$(document).delegate(".resend-otp","click",function(e){e.preventDefault();var changedFieldName=$("#changedFieldName").val(),linkElement=$(this);if(!linkElement.hasClass("disabled")){var href=$(this).attr("data-href");href&&makeAjaxWithLoader({url:href,type:"POST",data:{changedFieldName:changedFieldName},success:function(response){var data=response;if($(".card-activation #manage-pin-form").length>0&&("string"==typeof response&&(data=$.parseJSON(response)),data.hasOwnProperty("otpResponse")&&(data=data.otpResponse)),!data.resendEnabled){if(console.log("emd resend"),linkElement.addClass("disabled").attr("href","#"),"email"==$("#changedFieldName").val()?(emailResendFlag=!1,verifyResendFlag=!0,mobileResendFlag=!0,console.log("1-email<->emailResendFlag"+emailResendFlag+",mobileResendFlag"+mobileResendFlag),$(".email-edit-button").remove()):"mobile"==$("#changedFieldName").val()?(emailResendFlag=!0,verifyResendFlag=!0,mobileResendFlag=!1,console.log("2-mobile<->emailResendFlag"+emailResendFlag+",mobileResendFlag"+mobileResendFlag),$(".mobile-edit-button").remove()):(verifyResendFlag=!1,emailResendFlag=!0,mobileResendFlag=!0,console.log("2-verify_email<->emailResendFlag"+emailResendFlag+",mobileResendFlag"+mobileResendFlag)),1==emailResendFlag&&0==mobileResendFlag&&1==verifyResendFlag?(console.log("resend block "+emailResendFlag+","+mobileResendFlag+","+verifyResendFlag),$(".top-error").parent().show(),$("#resendOtp-exceed").parent().show(),$(".email-edit-button").hide(),$(".validate-btn").hide(),$(".mobile-edit-button").hide(),$(".addon-emailId").show(),$(".mobile-number-main-container").show(),$(".email-id-main-container").show(),$(".email-id-expanded-body").hide(),$(".mobile-number-expanded-body").hide(),$("#unmasked-primary-emailId").css("display","none"),$(".verifyNote").css("display","none")):0==emailResendFlag&&1==mobileResendFlag&&1==verifyResendFlag?(console.log("resend block "+emailResendFlag+","+mobileResendFlag+","+verifyResendFlag),$(".top-error").parent().show(),$("#resendOtp-exceed").parent().show(),$(".email-edit-button").hide(),$(".validate-btn").hide(),$(".mobile-edit-button").hide(),$(".addon-emailId").show(),$(".mobile-number-main-container").show(),$(".email-id-main-container").show(),$(".email-id-expanded-body").hide(),$(".mobile-number-expanded-body").hide(),$("#unmasked-primary-emailId").css("display","none"),$(".verifyNote").css("display","none")):1==emailResendFlag&&1==mobileResendFlag&&0==verifyResendFlag&&(console.log("resend block "+emailResendFlag+","+mobileResendFlag+","+verifyResendFlag),$(".top-error").parent().show(),$("#resendOtp-exceed").parent().show(),$(".email-edit-button").hide(),$(".validate-btn").hide(),$(".mobile-edit-button").hide(),$(".addon-emailId").show(),$(".mobile-number-main-container").show(),$(".email-id-main-container").show(),$(".email-id-expanded-body").hide(),$(".mobile-number-expanded-body").hide(),$("#unmasked-primary-emailId").css("display","none"),$(".verifyNote").css("display","none")),""!=data.message){if($(".error-wrap .top-error").length)$(".error-wrap .top-error").html(data.message);else{var html='<div class="error-wrap"><h5 class="top-error" id="resendOtp-exceed">'+data.message+"</h5></div>";console.log(data.message+"==2"),$(".fancy.addOn-dropbox.fancified").parent().find(".trigger").css("pointer-events","none"),$(".quick-contact-page-header").after(html),$(".quarter-width.onlyNumber").prop("disabled",!0),$("#submit-contact-details").attr("disabled","disabled"),$(".resend-otp.disabled").css("background","none repeat scroll 0 0 #e0e0e0")}$("#bt-form").length&&($("#bt-form input").prop("disabled",!0),$("#bt-form select").trigger("disable"),$("#bt-form .fancy-dd ul.dd-options").css("display","none"),$("#bt-form").prepend(html),$(window).scrollTop(500)),$("#encash-form").length&&($("#encash-form input").prop("disabled",!0),$("#encash-form select").trigger("disable"),$("#encash-form .fancy-dd ul.dd-options").css("display","none"),$("#encash-form").prepend(html),$(window).scrollTop(500)),$("#emd-form").length?($("#emd-form input").prop("disabled",!0),$("#emd-form select").trigger("disable"),$("#emd-form .fancy-dd ul.dd-options").css("display","none"),$("#emd-form").prepend(html),$(window).scrollTop(500)):$(".section-header").length&&$(".section-header").after(html)}else $(".error-wrap .top-error").remove();"quick-contact-tab"==$(".tab-menu.tabcount-5").find("li.active a").attr("data-id")?($("#contact-update-form input").prop("disabled",!0),$("#quick-contact-tab div.error-wrap").length>0?$("#quick-contact-tab div.error-wrap h5").html(data.message):($errorBlock=$('<div class="error-wrap"><h5 class="top-error">'+data.message+".</h5></div>"),$wrapper=$("header.tab-header"),$wrapper.after($errorBlock))):"international-tab"==$(".tab-menu.tabcount-5").find("li.active a").attr("data-id")?($("#intl-number-update-form input").prop("disabled",!0),$("#intl-number-update-form div.error-wrap").length>0?$("#intl-number-update-form div.error-wrap h5").html(data.message):($errorBlock=$('<div class="error-wrap"><h5 class="top-error">'+data.message+".</h5></div>"),$wrapper=$("#intl-number-update-form > p"),$wrapper.after($errorBlock))):"address-tab"==$(".tab-menu.tabcount-5").find("li.active a").attr("data-id")?($("#change-address-form select").trigger("disable"),$("#change-address-form input").prop("disabled",!0),$("#address-tab > article.tab-content div.error-wrap").length>0?($("#address-tab > article.tab-content div.error-wrap h5").html(data.message),$(window).scrollTop(0)):($errorBlock=$('<div class="error-wrap"><h5 class="top-error">'+data.message+".</h5></div>"),$wrapper=$("#address-tab > article.tab-content"),$wrapper.after($errorBlock),$(window).scrollTop(0))):$(".card-activation #manage-pin-form").length>0?($("#manage-pin-form input").prop("disabled",!0),$(".my-account.card-statment div.error-wrap").length>0?$(".my-account.card-statment div.error-wrap h5").html(data.message):($errorBlock=$('<div class="error-wrap"><h5 class="top-error">'+data.message+".</h5></div>"),$wrapper=$(".my-account.card-statment"),$wrapper.after($errorBlock))):$("#otp-ivr-form").length>0&&($("div.error-wrap").length>0?$("div.error-wrap h5").html(data.message):($errorBlock=$('<div class="error-wrap"><h5 class="top-error">'+data.message+".</h5></div>"),$wrapper=$("#otp-ivr-form"),$wrapper.after($errorBlock)))
}data.success||(console.log("resend  enable"),$("#generate-otp-tab").hide(),$("#otp-ivr-form").length>0&&($("div.error-wrap").length>0?$("div.error-wrap h5").html(data.message):($errorBlock=$('<div class="error-wrap"><h5 class="top-error">'+data.message+".</h5></div>"),$wrapper=$("#otp-ivr-form"),$wrapper.after($errorBlock))))}})}});try{$(".datepicker").exists()&&$(document).mousedown($.datepicker._checkExternalClick)}catch(e){}$("a.disclaimer-popup-open, a.crossDomain, .button.microportal-paynow").on("click",function(e){if(console.log("hit1"),e.preventDefault(),$("a.crossDomain").length>0&&$(this).attr("target","_blank"),$(".modal-overlay.disclaimer-popup").addClass("open"),viewport.width<=1024&&($(".disclaimer-popup").css("margin-top","0px"),$(".disclaimer-popup .modal").css("margin-top","0px"),$(".disclaimer-popup .modal").css("margin-left","0px"),$(".disclaimer-popup .modal").scrollTop(0)),!$(".disclaimer-popup-open").exists()&&!$("#paynow-disclaimer-cardStatement").exists()&&$("a.button-clickToProceed").length>0){var url=$(this).attr("href"),target=$(this).attr("target");$("a.button-clickToProceed").attr("href",url),""!=target&&"undefined"!=target&&$("a.button-clickToProceed").attr("target",target)}}),$(".disclaimer-popup .button-cancel").on("click",function(e){e.preventDefault(),$(".modal-overlay").removeClass("open"),$("a.button-clickToProceed").attr("href","javascript:void(0);"),$("a.button-clickToProceed").removeAttr("target")}),$(".disclaimer-popup .button-clickToProceed").on("click",function(){$(".modal-overlay").removeClass("open")}),$("#update-ivr-contact").on("click",function(e){e.preventDefault(),openModalPopup("otp-ivr-confirm"),viewport.width<=1024&&($(".otp-ivr-popup").css("margin-top","0px"),$(".otp-ivr-popup .modal").css("margin-top","0px"),$(".otp-ivr-popup .modal").css("margin-left","0px"),$(".otp-ivr-popup .modal").scrollTop(0))});var cardBlockDropDownPopulate;$(document).ready(function(){var hash=window.location.hash,tabItem=hash,tab=$('.my-profile ul.tab-menu li:has(a[href="'+tabItem+'"])');if(0!=tabItem.length)return $(".my-profile ul.tab-menu li").removeClass("active"),tab.addClass("active"),tab.find("a").click(),!1;if(tab.addClass("active"),$(".my-account.encash").exists()&&$("#confirm-button").on("click",function(){var loaderHtml='<div class="overlay-loader"></div>';$("body").append(loaderHtml)}),$(".my-account.flexipay").exists()&&$("#confirm-button").on("click",function(){var loaderHtml='<div class="overlay-loader"></div>';$("body").append(loaderHtml)}),$(".headercontAddonCard").css("pointer-events","none"),localStorage.getItem("addon-edit-flag")){$("#quick-contact-tab .primarycard-container").css("display","none"),$("#quick-contact-tab .addon-container").css("display","block"),$("#quick-contact-tab .headercontPrimaryCard").css("display","none"),$("#quick-contact-tab .headercontAddonCard").css("display","block"),$(".myprofile-addonDisText").show();var selectedCardNo=localStorage.getItem("addon-card-no"),selectedMaskedCardNo=localStorage.getItem("addonMaskedCardNo");$("#quick-contact-tab .fancy-select .options li").removeClass("selected"),$("#quick-contact-tab .fancy-select .options li:contains("+selectedMaskedCardNo+")").addClass("selected"),$("#quick-contact-tab .trigger").text(selectedMaskedCardNo);var href="/creditcards/app/myprofile/add-on-details-page-edit";$.ajax({url:href,type:"POST",data:{selectedCardNum:selectedCardNo},overlayTarget:$(".main"),beforeSend:function(){var loaderHtml='<div class="overlay-loader"></div>';$("body").append(loaderHtml)},complete:function(){$("body").find("div.overlay-loader").remove()},success:function(data){$(".headercontAddonCard").css("pointer-events","auto"),localStorage.removeItem("addon-edit-flag"),localStorage.removeItem("selectedMaskedCardNo"),$(".primarycard-container").css("display","none"),$(".addon-container").css("display","block"),$(".headercontAddonCard h3").text("Add-On "+data.cardType),$(".addon-emailId").text(data.maskedEmailAddress),$(".addon-mobileNo").text("+91"+data.maskedMobileNumber),$("#edit-addon-mobileNumber").val(data.mobileNumber),$("#edit-addon-emailAddress").val(data.emailAddress),$("#addon-cardType").val(data.cardType),$("#contact-update-form #addon-cardType").val(data.cardType),$("#addon-cardNo").val(selectedCardNo),$("#primary-MobileNumber").val(data.mobileNumber),$("#primary-EmailId").val(data.emailAddress),$(".readonly-email-block span.masked").text(data.maskedEmailAddress),$(".readonly-mobile-block span.masked").text("+91"+data.maskedMobileNumber),$(".editable-mobile-block input").val(data.mobileNumber),$(".editable-email-block input").val(data.emailAddress),$("#unmaskedEmailId").val(data.emailAddress),$("#unmaskedMobileNo").val(data.mobileNumber),$("#maskedEmailId").val(data.maskedEmailAddress),$("#maskedMobileNo").val(data.maskedMobileNumber)},error:function(){}})}if(localStorage.getItem("myprofile-details")){$(".addon-container").css("display","block"),$(".primarycard-container").css("display","none"),$(".headercontPrimaryCard").css("display","none"),$(".headercontPrimaryCard .edit-button").css("display","none"),$(".headercontAddonCard").css("display","block"),$(".headercontAddonCard .addon-edit-button").css("display","block");var href="/creditcards/app/myprofile/add-on-quick-contact-details-page",selectedIndex=0;$.ajax({url:href,type:"POST",data:{selectedCardIndex:selectedIndex},overlayTarget:$(".main"),success:function(data){if(data=dataDecryptionAES(data,""),""!=data)if(data=$.parseJSON(data),$(".headercontAddonCard").css("pointer-events","auto"),$(".headercontAddonCard h3").text("Add-On "+data.cardType),$(".addon-emailId").text(data.maskedEmailAddress),$(".addon-mobileNo").text("+91"+data.maskedMobileNumber),$("#edit-addon-mobileNumber").val(data.mobileNumber),$("#edit-addon-emailAddress").val(data.emailAddress),$("#primary-MobileNumber").val(data.mobileNumber),$("#primary-EmailId").val(data.emailAddress),$("#addon-cardType").val(data.cardType),$("#addon-cardNo").val(data.cardNo),"P"==data.cardType){var mobileField=$("#primary-MobileNumber").val(),emailField=$("#primary-EmailId").val();""==mobileField?($(".email-edit-button").hide(),$(".validate-btn").hide(),$(".updateVerifyJourney .verify-block a").hide(),$(".quickContactEditButton").removeClass()):""==emailField?($(".validate-btn").hide(),$(".updateVerifyJourney .verify-block a").hide()):($(".validate-btn").show(),$(".updateVerifyJourney .verify-block a").show()),""==data.mobileNumber?($(".addon-container .form-field-list li:nth-child(2)").hide(),$(".tab-content.hide-editable.mobile-number-main-container .mobile-number-border").hide(),$(".quickcontact-notify-subHeader").hide(),$(".hide-editable").bind("click",!1),localStorage.setItem("isEditDisabled",!0),$(".headercontAddonCard").css("background","none 0px 0px repeat scroll rgb(224, 224, 224)"),$(".addOnCard-noMobile-msg").hide(),$(".primaryCard-noMobile-msg").show(),$(".email-edit-button").off("click"),$(".quickContactEditButton").css("background","none 0px 0px repeat scroll rgb(224, 224, 224)"),$(".quickContactEditButton").css("pointer-events","auto"),""==data.emailAddress&&$(".addon-container .form-field-list li:first-child").hide()):($(".hide-editable").bind("click",!0),localStorage.setItem("isEditDisabled",!1),$(".addOnCard-noMobile-msg").hide(),$(".headercontAddonCard").css("background","none"))}else"S"!=data.cardType&&"A"!=data.cardType||"true"!=localStorage.getItem("isEditDisabled")?"S"!=data.cardType&&"A"!=data.cardType||"false"!=localStorage.getItem("isEditDisabled")||($(".addon-container .form-field-list li").show(),$(".primaryCard-noMobile-msg").hide(),$(".validate-btn").hide(),$(".updateVerifyJourney .verify-block a").hide()):($(".addon-container .form-field-list li").show(),$(".primaryCard-noMobile-msg").hide(),$(".addOnCard-noMobile-msg").show(),$(".validate-btn").hide(),$(".updateVerifyJourney .verify-block a").hide())},error:function(){}}),localStorage.removeItem("myprofile-details")}cardBlockDropDownPopulate=function(){var cardToBlockData=$("input[type=radio][name=cardToBlock]:checked").attr("id"),cardToBlockSubStr=cardToBlockData.substr(12,19),cardMapBlockCodeList=$("#cardMapBlockCodeMapList").val(),result=$.parseJSON(cardMapBlockCodeList),blockCode=($("#reasonsList").val(),"");if($.each(result,function(key,value){return cardToBlockSubStr==key?(blockCode=value,!1):void 0}),"S"==blockCode)$("#reissuereason option").each(function(){"Card plastic has been damaged"==$(this).val()&&($(".fancy-select-wrap ul.options li:contains('Card plastic has been damaged')").remove(),$(this).remove())});else{var exists=!1;$("#reissuereason option").each(function(){return"Card plastic has been damaged"==$(this).val()&&$(".fancy-select-wrap ul.options li:contains('Card plastic has been damaged')")?(exists=!0,!1):void 0}),0==exists&&($(".fancy-select-wrap ul.options").append('<li data-raw-value="Card plastic has been damaged" data-id="undefined">Card plastic has been damaged</li>'),$("#reissuereason").append('<option value="Card plastic has been damaged">Card plastic has been damaged</option>'))}},$("#reissue-replace-form").length>0&&$("#reissue-replace-form input[type='radio']:checked")&&cardBlockDropDownPopulate(),$("#reissue-replace-form").length>0&&$("input:radio[name=cardToBlock]").click(function(){$(this).is(":checked")&&cardBlockDropDownPopulate()}),""==$("#msw-error-msg").text()?$("#msw-error-msg").css("background","none"):$("#msw-error-msg").css("background","#ebf9ff")}),$("document").ready(function(){$(".modal-overlay.disclaimer-popup.open form a").on("click",function(){$(".modal-overlay.disclaimer-popup.open form a").parent().remove(),console.log("Removed")}),$(".billdesk-pay-btn").on("click",function(){if($(".bill-text").exists()){console.log("data==l==>"+data);var processDiv='<form id="billpay_proceedbtn_form"><a href="javascript:void(0);" class="button primary button-clickToProceed" onClick="setAnalyticsPost(\'Proceed\');closeModalPopup($(this));billpay_proceedbtn_form.submit();">Proceed</a> 				<a href="javascript:void(0);" class="button primary button-cancel" onClick="setAnalyticsPost(\'Cancel\');closeModalPopup($(this));">Cancel</a></form>'}0==$(".button-clickToProceed").length&&$("#appendPayNowForm").append(processDiv);var url=$(this).attr("href"),target=$(this).attr("target");if($("a.button-clickToProceed").attr("href",url),""!=target&&"undefined"!=target&&$("a.button-clickToProceed").attr("target",target),""!=$("#channelid").val()){{$('input:hidden[name="synchronizerToken"]').val()}$("#billpay_proceedbtn_form").attr("action","/creditcards/app/billdesk/billpay"),$("#billpay_proceedbtn_form").attr("target","_blank"),$("#billpay_proceedbtn_form").attr("method","post")}}),$("#reissuereason").on("change",function(){"Dispute Transactions"==$("#reissuereason").val()?$("#update-address").css("display","block"):$("#update-address").css("display","none")}),$("#reportreissuereason").on("change",function(){"Suspicious transaction on Card"==$("#reportreissuereason").val()?($("#update-address1").css("display","block"),$("#report-checkbox").css("display","inline-block")):($("#report-checkbox").attr("style","display:none!important"),$("#report-checkbox input[type=checkbox]").parent().hasClass("checked")||$("#report-checkbox input[type=checkbox]").click(),$("#update-address1").css("display","none"))}),window.onload=function(){var dropdownBlockReason=$("#reportreissuereason").val();dropdownBlockReason="Card is lost/Stolen"},$("#reissuereason").on("change",function(){"Dispute Transactions"==$("#reissuereason").val()?$("#update-address").css("display","block"):$("#update-address").css("display","none")}),window.onload=function(){var dropdownBlockReason=$("#reportreissuereason").val();dropdownBlockReason="Card is lost/Stolen"},$(".sihub-pay-btn").on("click",function(){var syncToken=$('input:hidden[name="synchronizerToken"]').val(),recurTrCard=$("#recurtrSelecledCard").val(),recurTrCard=$(".selectedTrCardData").val(),processDiv='<form id="sihub_proceedbtn_form" method="POST" target="_blank" action="/creditcards/app/recurringtransaction/generateToken"><input type="hidden" name="synchronizerToken" value ="'+syncToken+'" /><a href="javascript:void(0);" class="button primary si-hub-button-clickToProceed" onClick="setAnalyticsPost(\'Proceed\');closeModalPopup($(this));submitSIhubForm(event);"> Proceed</a> <a href="javascript:void(0);" class="button primary button-cancel" onClick="setAnalyticsPost(\'Cancel\');closeModalPopup($(this));"> Cancel</a> </form> ';$(".si-hub-button-clickToProceed").exists()||$("#appendPayNowForm").append(processDiv);var syncToken=$("#synchronizerTokenMicroDashboard").val(),href="/creditcards/app/recurringtransaction/reccuring-tansaction-selected-card-no";$.ajax({url:href,data:{selectedAddonCardNumber:recurTrCard},type:"POST",headers:{synchronizerToken:syncToken},overlayTarget:$(".overlay-opened"),success:function(){},error:function(){removeAjaxLoader()}})}),$(".micro-disclaimer-popup-open, .button.microportal-paynow").on("click",function(){var href="/creditcards/micro/user/dashboard/paynow-micro";$.ajax({url:href,type:"GET",success:function(data){var processDiv="";if(console.log("data==success1234==>"+data),null!=data&&""!=data)var processDiv='<form action="'+data[0].paynetUrl+'" target="_blank" method="POST" name="payNetForm" style="margin-bottom:0px;"><input type="hidden" name="msg" id="msg" value="'+data[0].message+'"/><a href="#" class="button primary button-clickToProceed" onClick="payNetForm.submit();setAnalyticsPost(\'Proceed\');closeModalPopup($(this));">Proceed</a><a href="javascript:void(0);" class="button primary button-cancel" onClick="setAnalyticsPost(\'Cancel\');closeModalPopup($(this));">Cancel</a></form>';0==$(".button-clickToProceed").length&&$("#appendPayNowForm").append(processDiv),$(".button-clickToProceed").css("margin-right","5px"),viewport.width>=1024?$("#appendPayNowForm").parents().find(".open").children(".modal").css("margin-top","-267.5px"):viewport.width<767&&$("#appendPayNowForm").parents().find(".open").children(".modal").css("margin-top","0px"),$(".button.primary.button-clickToProceed").on("click",function(){console.log("click to proceed"),$("#appendPayNowForm form").remove()})},error:function(){console.log("Enter inside failure block")}})}),$("#paynow-disclaimer-cardStatement").on("click",function(){var totalAmtDue=$("#totalAmtDue-cardStatement").val(),minOutstanding=$("#minOutstanding-cardStatement").val(),href="/creditcards/app/myaccount/paynow?maxAmtDue="+totalAmtDue+"&minAmtDue="+minOutstanding;$.ajax({url:href,type:"GET",success:function(data){var processDiv="";if(console.log("data==success1234==>"+data),$("#paynow-disclaimer-cardStatement").exists()&&null!=data&&""!=data){console.log("data==success in card statement==>"+data[0].message);var processDiv='<form action="'+data[0].paynetUrl+'" target="_blank" method="POST" name="payNetForm" style="margin-bottom:0px;"><input type="hidden" name="msg" id="msg" value="'+data[0].message+'"/><a href="#" class="button primary button-clickToProceed" onClick="payNetForm.submit();setAnalyticsPost(\'Proceed\');closeModalPopup($(this));">Proceed</a><a href="javascript:void(0);" class="button primary button-cancel" onClick="setAnalyticsPost(\'Cancel\');closeModalPopup($(this));">Cancel</a></form>'}0==$(".button-clickToProceed").length&&$("#appendPayNowForm").append(processDiv),$(".button-clickToProceed").css("margin-right","5px"),viewport.width>=1024?$("#appendPayNowForm").parents().find(".open").children(".modal").css("margin-top","-267.5px"):viewport.width<767&&$("#appendPayNowForm").parents().find(".open").children(".modal").css("margin-top","0px")},error:function(){console.log("Enter inside failure block")}})}),$("#microportalLogoutButton").on("click",function(){deleteTokenOnLogout(),sessionStorage.clear(),logoutMicroportalForm.submit()}),$(".microportal-user-card").on("click",function(){console.log("microportal-user-card");var href="/creditcards/micro/user/dashboard/change-account",selectedCardNumber=$(this).find("#aacount-id").val(),selectedIndex=$(this).find("#indexCount").val();console.log("accounr---"+selectedIndex),showLoader(),$.ajax({url:href,type:"POST",data:{cardNumberIndex:selectedIndex,cardNumber:selectedCardNumber},overlayTarget:$(".main"),success:function(data){data.success&&data.reload?(showLoader(),submitForm(data.redirectURL,!0)):removeAjaxLoader()},error:function(){removeAjaxLoader()}})}),$(".lined-box .waves-effect").on("click",function(){console.log("microportal");var href="/creditcards/micro/user/paymentConsent",productType=$(this).attr("data-name");makeAjaxWithLoader({url:href,type:"POST",data:{productType:productType},overlayTarget:$(".overlay-opened"),success:function(data){1==data.success&&(console.log("open popup"),$("#micropopup .alert-msz-text").html(data.message),$("#micropopup .modal-dialog").addClass("open"),$(".menu-overlay").addClass("open"),setTimeout(function(){$("#micropopup .modal-dialog").removeClass("open"),$(".menu-overlay").removeClass("open")},5e3))},error:function(){console.log("error"),removeAjaxLoader()}})}),$(".closepop").click(function(){console.log("close"),$("#micropopup .modal-dialog").removeClass("open"),$(".menu-overlay").removeClass("open")})}),$(".collapsible-header #micro-collap-ver-acc").on("click",function(){$("#verify-acc-line-divide").css("display","none"),$("#other-payment-opt-section").css("display","none"),$("#micro-collap-ver-acc-body").css("display","block"),$("#micro-colap-other-pay-body").css("display","none"),$("#micro-colap-other-pay").addClass("grey"),$("#micro-collap-ver-acc").removeClass("grey"),$(".main-opt .collapsible-header #micro-collap-ver-acc").css("margin","1.33em 0em"),$(".microportal-collapsible .collapsible-header").css("padding","0px 0px 15px 20px"),$(".microportal-collapsible #micro-colap-other-pay").css("margin","1.33em 0em"),calHeightMicro(),highlightVerifyInfoTab()}),$(".idea-section-row #micro-other-pay-btn").on("click",function(){$(".microportal-collapsible .collapsible-header").css("padding","0px 0px 0px 20px"),$(".microportal-collapsible #micro-colap-other-pay").css("margin","0px")}),$("#micro-reinstatement-block").on("click",function(){resetMicroActiveState(),$("#micro-reinstatement-block").addClass("active-state")}),$("#micro-bal-conv-block").on("click",function(){resetMicroActiveState(),$("#micro-bal-conv-block").addClass("active-state")}),$("#micro-restruct-acc").on("click",function(){resetMicroActiveState(),$("#micro-restruct-acc").addClass("active-state")}),$("#micro-settle-acc").on("click",function(){resetMicroActiveState(),$("#micro-settle-acc").addClass("active-state")}),viewport.width<768&&($(".payment-mob-link").removeAttr("href"),$("#microportal-header-menulist").on("click",function(){$(".menu.retail-menu-list").toggle()}),$(".microportal-section-container .menu.retail-menu-list li").on("click",function(){$(".microportal-section-container .menu.retail-menu-list li a").removeClass("highlight-microportal-link"),$(this).find("a").addClass("highlight-microportal-link")}),$(".payment-mob-link").on("click",function(){$(".mobile-list-header").toggle()}));var paynowTxt='<div class="static-txt">Your payment is being processed, and will reflect as â€˜Last Payment Amountâ€™ and â€˜Last Payment Dateâ€™ shortly.</div><div class="static-info"><span>Note: Total Amount Due will still be the same as it is as per the last statement date. Adjustments will reflect post generation of next statement.</span></div>';$(".disclaimer-popup-open, .button.microportal-paynow").on("click",function(){$("#microportal-customer-level-section").html(""),$("#microportal-customer-level-section").html(paynowTxt)}),viewport.width<768?($(".microportal-side-bar-menu").hide(),$(".microportal-multicard-mobile-view").show()):($(".microportal-side-bar-menu").show(),$(".microportal-multicard-mobile-view").hide());var slider=document.getElementById("micro-balCon-slider");if(slider){var maxLimit=$(".microportal-content-wrapper #checkMaxval").val(),minLimit=$(".microportal-content-wrapper #checkMinval").val();maxLimit=Number(Number(maxLimit).toFixed(2)),minLimit=Number(Number(minLimit).toFixed(2)),$(".microportal-content-wrapper #showSlideMaxVal").html(maxLimit),$(".microportal-content-wrapper #showSlideMinVal").html(minLimit);var meanValue=Number(((maxLimit+minLimit)/2).toFixed(2));$(".microportal-content-wrapper #showSlideAvgVal").html(meanValue),noUiSlider.create(slider,{start:minLimit,tooltips:[wNumb({decimals:2})],behaviour:"tap",connect:"lower",step:100,range:{min:minLimit,max:maxLimit},format:wNumb({decimals:2})})}var rangeSliderValueElement=document.querySelector(".addAmt-price-range"),rangeSliderValueElement1=document.querySelector(".balCoverse-price-range");console.log("rangeSliderValueElement1: "+rangeSliderValueElement1);var sliderInitiationCount=0;if(slider){var maxLimit=$(".microportal-content-wrapper #balConEligibleAmount").val();maxLimit=Number(Number(maxLimit).toFixed(2)),slider.noUiSlider.on("update",function(values,handle){sliderInitiationCount+=1;var additionalAmt=values[handle];rangeSliderValueElement.value=Number(Number(additionalAmt).toFixed(2)),console.log("maxLimit: "+maxLimit),console.log("additionalAmt: "+additionalAmt),console.log("minLimit:"+minLimit),rangeSliderValueElement1.value=Number(Number(maxLimit-additionalAmt+minLimit).toFixed(2)),console.log("rangeSliderValueElement1.value: "+rangeSliderValueElement1.value),sliderInitiationCount>1&&calculateSlabData()})}$(".intrest-option-container #priceRange").blur(function(){var slider=document.getElementById("micro-balCon-slider"),userVal=$(".intrest-option-container #priceRange").val(),maxLimit=$(".microportal-content-wrapper #checkMaxval").val(),minLimit=$(".microportal-content-wrapper #checkMinval").val();maxLimit=Number(maxLimit),minLimit=Number(minLimit),minLimit>userVal?(userVal=minLimit,$(".intrest-option-container #priceRange").val(userVal)):userVal>maxLimit&&(userVal=maxLimit,$(".intrest-option-container #priceRange").val(userVal)),slider.noUiSlider.set(userVal)}),"Y"==$(".microportal-section-container #madFulfilmentFlag").val()&&($(this).css({"border-color":"#00b1f2"}),$(".balcon-offer-section #initial-grid-block .col-md-3").css({"pointer-events":"auto"}),$(".balcon-offer-section #initial-grid-block .col-md-3").css({"pointer-events":"auto"}),$(".idea-section-mobile #dynamic-grid-block-mob .col-md-12 .field-view").css("pointer-events","auto"),$(".idea-section-mobile #initial-grid-block-mob .col-md-12 .field-view").css("pointer-events","auto")),$(".balcon-main-container #balCon-interest-options").on("click",function(){calHeightMicro()}),$(".pay-footer .pay-click").on("click",function(){$(".pay-footer #micro-pay-aero").hasClass("pay-aero-rotate")?($(".pay-footer #micro-pay-aero").removeClass("pay-aero-rotate"),$(".pay-footer #micro-pay-text").removeClass("hide-pay-text"),$(".pay-footer #footer-pay").removeClass("pay-data-show")):($(".pay-footer #micro-pay-aero").addClass("pay-aero-rotate"),$(".pay-footer #micro-pay-text").addClass("hide-pay-text"),$(".pay-footer #footer-pay").addClass("pay-data-show"))}),viewport.width<768&&$(window).scroll(function(){$(window).scrollTop()+$(window).height()>$(document).height()-100?"none"==$("#micro-colap-other-pay-body").css("display")&&($(".pay-footer #micro-pay-aero").addClass("pay-aero-rotate"),$(".pay-footer #micro-pay-text").addClass("hide-pay-text"),$(".pay-footer #footer-pay").addClass("pay-data-show")):($(".pay-footer #micro-pay-aero").removeClass("pay-aero-rotate"),$(".pay-footer #micro-pay-text").removeClass("hide-pay-text"),$(".pay-footer #footer-pay").removeClass("pay-data-show"))}),$("#Go_Search_Tsr_Form_Id").on("click",function(e){e.preventDefault();var datastring=$("#search-tsr-form").serialize(),href=$("#search-tsr-form").attr("data-href");href+="&"+datastring,href&&makeAjaxWithLoader({url:href,type:"POST",success:function(data){$("#track-service-request-grid").html(data),loadMoreInit(),$(".load-more-wrap .button.load-more").on("click",function(){setTimeout(function(){calHeightMicro()},200)})}})}),$(".login-page .cvv-number").on("focus",function(e){e.preventDefault(),$(".card-preview figure img").removeClass("hide")}),$(".login-page .cvv-number").on("focusout",function(e){e.preventDefault(),$(".card-preview figure img").addClass("hide")}),$("#Go_Search_Tsr_Adv_Form_Id").on("click",function(e){e.preventDefault();var datastring=$("#search-tsr-adv-form").serialize(),href=$("#search-tsr-adv-form").attr("data-href");href+="&"+datastring,href&&makeAjaxWithLoader({url:href,type:"POST",success:function(data){$("#track-service-request-grid").html(data),loadMoreInit(),$(".load-more-wrap .button.load-more").on("click",function(){setTimeout(function(){calHeightMicro()},200)})}})}),$("#Go_Search_Tbo_Form_Id").on("click",function(e){e.preventDefault();var datastring=$("#search-tbo-form").serialize(),href=$("#search-tbo-form").attr("data-href");href+="&"+datastring,href&&makeAjaxWithLoader({url:href,type:"POST",success:function(data){$("#track-booked-offer-grid").html(data),loadMoreInit()}})}),$("#Go_Search_Tbo_Adv_Form_Id").on("click",function(e){e.preventDefault();var datastring=$("#search-tbo-adv-form").serialize(),href=$("#search-tbo-adv-form").attr("data-href");href+="&"+datastring,href&&makeAjaxWithLoader({url:href,type:"POST",success:function(data){$("#track-booked-offer-grid").html(data),loadMoreInit()}})}),$("#Go_Search_Sanalyzer_Form_Id").on("click",function(e){e.preventDefault();var datastring=$("#search-sanalyzer-form").serialize(),href=$("#search-sanalyzer-form").attr("data-href");href+="?"+datastring,href&&makeAjaxWithLoader({url:href,type:"POST",success:function(data){$("#spend-analyzer-chart").html(data),$(".spend-analyser .toggle-tab-menu #sa-grid-view").hasClass("active")&&($("#sa-grid-detail").removeClass("hide-content"),$("#sa-graph-detail").addClass("hide"))}})}),$(".track-service #filter-advanced").click(function(e){e.preventDefault(),$("#note").show(),isiOS?($("#selectBy, #selectByValue, #selectByOffer, #selectByValueOffer").fancySelect({forceiOS:!0}),$("#selectBy, #selectByValue, #selectByOffer, #selectByValueOffer").trigger("update.fs")):($("#selectBy, #selectByValue, #selectByOffer, #selectByValueOffer").fancySelect(),$("#selectBy, #selectByValue, #selectByOffer, #selectByValueOffer").trigger("update.fs"))}),$(document).delegate(".trackAdvInfo ul.options li","click",function(){var selectedVal=$(this).attr("data-raw-value"),htmlSelect="",htmlUlLi="";if($("#note").show(),"Request_Type"==selectedVal?trackData.prodTypes.length&&($("#selectByValue").trigger("enable"),$.each(trackData.prodTypes,function(i,item){htmlSelect+='<option value="'+item.level1+":"+item.level2+":"+item.serviceRequestType+'">'+item.displayName+"</option>",htmlUlLi+='<li data-raw-value="'+item.level1+":"+item.level2+":"+item.serviceRequestType+'">'+item.displayName+"</li>"})):"Status"==selectedVal?trackData.status.length&&($("#selectByValue").trigger("enable"),$.each(trackData.status,function(i,item){htmlSelect+='<option value="'+item+'">'+item+"</option>",htmlUlLi+='<li data-raw-value="'+item+'">'+item+"</li>"})):"Channel"==selectedVal?trackData.channels.length&&($("#selectByValue").trigger("enable"),$.each(trackData.channels,function(i,item){htmlSelect+='<option value="'+item.chValue+'">'+item.chName+"</option>",htmlUlLi+='<li data-raw-value="'+item.chValue+'">'+item.chName+"</li>"})):"Select"==selectedVal&&($("#selectByValue").trigger("disable"),$("#selectByValue").siblings("div.trigger").html("")),$("#selectByValue").html(htmlSelect),$("#selectByValue").siblings("ul.options").html(htmlUlLi),"Select"!=selectedVal){var optionValue=$("#selectByValue").siblings("ul.options").children("li:first-child").text();if(isiOS)$("#selectByValue").siblings("div.trigger").html(optionValue);else try{var actualVal=readMore(optionValue,selectMaxChar);$("#selectByValue").siblings("div.trigger").html(actualVal)}catch(e){$("#selectByValue").siblings("div.trigger").html(optionValue)}}$("#selectBy").siblings("div.trigger").html($(this).text())}),$(document).delegate(".trackAdvInfoByValue ul.options li","click",function(){$("#note").show();var selectedVal=$(this).text();if(isiOS)$("#selectByValue").siblings("div.trigger").html(selectedVal);else try{var actualVal=readMore(selectedVal,selectMaxChar);$("#selectByValue").siblings("div.trigger").html(actualVal)}catch(e){$("#selectByValue").siblings("div.trigger").html(selectedVal)}}),$(document).delegate(".trackAdvInfoOffer ul.options li","click",function(){var selectedVal=$(this).attr("data-raw-value"),htmlSelect="",htmlUlLi="";$("#note").show(),"Product_Type"==selectedVal?trackData.prodTypes.length&&($("#selectByValueOffer").trigger("enable"),$.each(trackData.prodTypes,function(i,item){htmlSelect+='<option value="'+item.level1+":"+item.level2+":"+item.serviceRequestType+'">'+item.displayName+"</option>",htmlUlLi+='<li data-raw-value="'+item.level1+":"+item.level2+":"+item.serviceRequestType+'">'+item.displayName+"</li>"})):"Status"==selectedVal?trackData.status.length&&($("#selectByValueOffer").trigger("enable"),$.each(trackData.status,function(i,item){htmlSelect+='<option value="'+item+'">'+item+"</option>",htmlUlLi+='<li data-raw-value="'+item+'">'+item+"</li>"})):"Channel"==selectedVal?trackData.channels.length&&($("#selectByValueOffer").trigger("enable"),$.each(trackData.channels,function(i,item){htmlSelect+='<option value="'+item.chValue+'">'+item.chName+"</option>",htmlUlLi+='<li data-raw-value="'+item.chValue+'">'+item.chName+"</li>"})):"Select"==selectedVal&&($("#selectByValueOffer").siblings("div.trigger").html(""),$("#selectByValueOffer").trigger("disable")),$("#selectByValueOffer").html(htmlSelect),$("#selectByValueOffer").siblings("ul.options").html(htmlUlLi),"Select"!=selectedVal&&$("#selectByValueOffer").siblings("div.trigger").html($("#selectByValueOffer").siblings("ul.options").children("li:first-child").text()),$("#selectByOffer").siblings("div.trigger").html($(this).text())}),$(document).delegate(".trackAdvInfoByValueOffer ul.options li","click",function(){var selectedVal=$(this).text();if(isiOS)$("#selectByValueOffer").siblings("div.trigger").html(selectedVal);else try{var actualVal=readMore(selectedVal,selectMaxChar);$("#selectByValueOffer").siblings("div.trigger").html(actualVal)}catch(e){$("#selectByValueOffer").siblings("div.trigger").html(selectedVal)}});var seachCounter=5;loadMoreInit(),$(document).on("click",".track-service .load-more",function(e){e.preventDefault();var parent=$(this).parents();loadMore(parent),$("html, body").animate({scrollTop:$(document).height()},"slow")});var seachCounterNew=10;loadMoreInitMyAcc(),$(document).on("click",".my-account #load-more-settletransactions",function(e){e.preventDefault();var parent=$(this).parents();loadMoreMyAcc(parent),viewport.width<768?$("html, body").animate({scrollTop:$(document).offset()},"slow"):$("html, body").animate({scrollTop:$(".transactions").height()},"fast")});var seachCounterNewST=10;loadMoreInitMyAccST(),$(document).on("click",".my-account #load-more-transundersettles",function(e){e.preventDefault();var parent=$(this).parents();loadMoreMyAccST(parent),viewport.width<768?$("html, body").animate({scrollTop:$(document).offset()},"slow"):$("html, body").animate({scrollTop:$(document).height()},"slow")}),$("#card-statements-form #statementCycleDate").on("change.fs",function(){var loaderHtml='<div class="overlay-loader"></div>';$("body").append(loaderHtml),$("#card-statements-form").submit()});var showLoader=function(){var loaderHtml='<div class="overlay-loader"></div>',$target=$("body");$target.append(loaderHtml)},removeAjaxLoader=function(){var $target=$("body");$target.find("div.overlay-loader").remove()};$(".card-summary #user-card").on("change.fs",function(){var href=$(this).attr("data-href"),selectedIndex=$(this)[0].value||0,lastSelectedIndex=$(this).attr("data-selected");showLoader(),$.ajax({url:href,type:"POST",data:{cardNumberIndex:selectedIndex,lastSelectedIndex:lastSelectedIndex},overlayTarget:$(".main"),beforeSend:function(){alertLogoutUser()
},success:function(data){data.success&&(data.reload?(submitForm(data.redirectURL,!0),sessionStorage.removeItem("AANData"),sessionStorage.setItem("AANPopupEnableFlag",!0),sessionStorage.setItem("AANMultiAccCall",!0),$(".alert-unreadcount").hide(),$(".alert-unreadcount").html("")):(removeAjaxLoader(),data.cardBlockCode&&document.getElementById("hBlockPopup").classList.add("opened")))},error:function(){removeAjaxLoader()}})}),$(".addon-card-detail #addon-card").on("change.fs",function(){var href=$(this).attr("data-href"),selectedIndex=$(this)[0].selectedIndex||0;href+=selectedIndex,submitForm(href,!0)}),$(".foreclosure #s2sProductNames").on("change.fs",function(e){e.preventDefault();var href=$("#s2sProductNames").attr("data-href"),selectedIndex=this.selectedIndex||0,lastSelectedIndex=$(this).attr("data-selected");if(selectedIndex!=lastSelectedIndex){var selectedValue=$(this).val();href&&makeAjaxWithLoader({url:href,type:"POST",data:{selectedS2sIndex:selectedIndex,selectedS2sName:selectedValue},success:function(data){$("#foreclosures-grid").html(data),populateForclosureErrorMessage(foreClosureError),loadMoreInit()}})}}),$(document).on("click","#foreclosures-grid .foreclosures input[type=radio]",function(){var href=($(this).value,$(this).attr("data-href")),productType=$(this).attr("data-product"),activeS2sIndex=$(this).val();href&&($("#foreclosure-confirmation").hide(),makeAjaxWithLoader({url:href,type:"POST",data:{productType:productType,activeS2sIndex:activeS2sIndex},success:function(data){var responseData=$.parseJSON(data);"true"==responseData.checkSuccessful?($("#foreclosure-principaAmount").text(responseData.outstanding),$("#foreclosure-foreclosureCharges").text(responseData.fees),$("#foreclosure-foreclosureAmount").text(responseData.total),$("#foreclosure-gst").text(responseData.gst),$("#foreclosure-confirmation").show(),populateForclosureErrorMessage(responseData.message),validateForeClosurePrivacy()):populateForclosureErrorMessage(responseData.message)}}))}),$(window).on("load",function(){$("#resend-otp-tab").hide(),$(".resend-otp-tab").hide(),$(".manage-pin-update").hide(),$("#duplicate-statement-download , #duplicate-statement-mode").hide()});var showHideLoaderDS=function(){var loaderHtml='<div class="overlay-loader"></div>',$target=$("body");$target.append(loaderHtml),$("#duplicate-statement-download , #duplicate-statement-mode").hide(),$("#duplicate-statement-submit").attr("disabled",!1),setTimeout(function(){var $target=$("body");$target.find("div.overlay-loader").remove(),$("#duplicate-statement-download , #duplicate-statement-mode").show(),$("#duplicate-statement-submit").attr("disabled",!0),$("#duplicate-statement-submit").addClass("duplicateStatementSubmitted")},500)};$("#duplicate-statement-submit").click(function(){$("#DuplicateStatement option:selected").text()&&"Select"!=$("#DuplicateStatement option:selected").text()?($("#eStmtErrorDiv").remove(),showHideLoaderDS(),duplicateStatement()):populateEStmtErrorMessage(dupEstmtData.duplicateStmtDatesNoSelected)}),$("#generate-otp-manage-pin").click(function(){var daysToGenOtp=$(this).attr("days-to-gen-otp");if("0"==daysToGenOtp){var urlval=$(this).attr("formaction");urlval=urlval+"?selectedCardIndex="+$("#cardNumberIndex").val(),makeAjaxWithLoader({url:urlval,type:"post",success:function(data){var responseData=$.parseJSON(data);$("div.main").find("h5.top-error").length&&$("div.main").find("h5.top-error").remove(),responseData.otpResponse.success?(responseData.otpResponse.onIntlNumber?($(".manage-pin-update #sendonDomestic").hide(),$(".manage-pin-update #sendonDomesticAndInternational").show()):($(".manage-pin-update #sendonDomestic").show(),$(".manage-pin-update #sendonDomesticAndInternational").hide()),$(".manage-pin-update").show(),$(".generate-otp-tab").hide(),$("#cardNumberIndex").trigger("disable"),$("#msgMobileNoChangedId").addClass("hide")):$(".my-account.card-statment.manage-pin-page").after("<div class='error-wrap'><h5 class='top-error'>"+responseData.otpResponse.message+"</h5></div>")}})}else $("#msgMobileNoChangedId").removeClass("hide"),$(".generate-otp-tab").hide()}),$("#donotgenerate-otp-manage-pin").click(function(){var daysToGenOtp=$(this).attr("days-to-gen-otp");if("0"==daysToGenOtp){var urlval=$(this).attr("formaction");urlval=urlval+"?selectedCardIndex="+$("#cardNumberIndex").val(),makeAjaxWithLoader({url:urlval,type:"post",success:function(data){var responseData=$.parseJSON(data);$("div.main").find("h5.top-error").length&&$("div.main").find("h5.top-error").remove(),responseData.otpResponse.success?($(".manage-pin-update").show(),$("#otp").hide(),$(".donotgenerate-otp-tab").hide(),$("#cardNumberIndex").trigger("disable"),$("#msgMobileNoChangedId").addClass("hide")):$(".my-account.card-statment.manage-pin-page").after("<div class='error-wrap'><h5 class='top-error'>"+responseData.otpResponse.message+"</h5></div>")}})}else $("#donotgenerate-otp-manage-pin").hide(),$("#msgMobileNoChangedId").removeClass("hide"),$(".generate-otp-tab").hide()}),$("#usageStatus1 , #usageStatus2").change(function(){"1"==$(this).val()?$("#disclaimer").hide():$("#disclaimer").show()}),$(document).delegate("#quick-contact-tab #generate-otp-quick-contact","click",function(){1==$("#contact-update-form input#edit-addon-emailAddress").valid()&&1==$("#contact-update-form input#edit-addon-mobileNumber").valid()&&$("#submit-contact-details").show()}),$(document).delegate("#generate-otp-quick-contact","click",function(){{var ajaxUrl=$(this).attr("formaction"),selfparent=$(this).parents(".tab-item");$(selfparent).attr("id")}1==$("#contact-update-form input#edit-addon-emailAddress").valid()&&1==$("#contact-update-form input#edit-addon-mobileNumber").valid()&&makeAjaxWithLoader({url:ajaxUrl,type:"get",success:function(data){$(selfparent).find("#generate-otp-button").attr("formaction","#"),data.success?($(selfparent).find("#generate-otp-tab").hide(),$(selfparent).find("#resend-otp-tab").show(),$(selfparent).find("#intl-number-update-form").length>0&&applyValidationOnInter()):($(".tab-header.quick-contact-page-header").show(),$("#timeOutError").show(),$(".fancy.addOn-dropbox.fancified").parent().find(".trigger").css("pointer-events","none"),$("#timeOutError").addClass("otpTimeOutError"),$("#timeOutError").html(data.message),"P"==$("#addon-cardType").val()?($(".tab-content.primarycard-edit-container.show-editable").show(),$(".tab-content.addon-edit-container.show-editable").hide()):("A"==$("#addon-cardType").val()||"S"==$("#addon-cardType").val())&&($(".tab-content.primarycard-edit-container.show-editable").hide(),$(".tab-content.addon-edit-container.show-editable").show()),$(selfparent).find("#otp-send-response").html(data.message))},error:function(xhr,status,error){console.log(status),console.log(error)}})}),$(".my-profile #password-tab #password").on("input",function(){0!=$("#password").val().length?($(".my-profile .password-strength").css("display","block"),onChangeCreatePassword($("#password").val())):($(".my-profile .password-strength").css("display","none"),onChangeCreatePassword($("#password").val()))}),$(document).delegate("#generate-otp-intl","click",function(){{var ajaxUrl=$(this).attr("formaction"),selfparent=$(this).parents(".tab-item");$(selfparent).attr("id")}makeAjaxWithLoader({url:ajaxUrl,type:"get",success:function(data){$(selfparent).find("#generate-otp-button").attr("formaction","#"),data.success?($(selfparent).find("#generate-otp-tab").hide(),$(selfparent).find("#resend-otp-tab").show(),$(selfparent).find("#resend-otp-tab #de-register-button").removeClass("secondary").addClass("primary").prop("disabled",!1),$(selfparent).find("#intl-number-update-form").length>0):$(selfparent).find("#otp-send-response").html(data.message)}})}),$(document).on("click",".my-profile #international-tab #reset-button",function(){$("#intl-number-update-form").trigger("reset"),$(".my-profile #international-tab label").removeClass("valid error")}),$(document).on("click","#de-register-button",function(){var href=$(this).attr("data-href"),intlNumber=$("#intl-number-update-form #intlNumber").val(),otpNumber=$("#intl-number-update-form #otp").val();1==$("#intl-number-update-form").valid()&&href&&makeAjaxWithLoader({type:"POST",data:{intlNumber:intlNumber,otpNumber:otpNumber},url:href,success:function(data){data&&($("#international-tab").html(data),applyValidationOnInter(),$("#intl-number-update-form #resend-otp-tab").hide())},error:function(xhr,status,error){"901"==xhr.status&&(window.location.href="/creditcards/app/user/login/error/invalidSession"),"function"==typeof parameters.error&&parameters.error(xhr,status,error)}})}),$("#submitc-button").on("click",function(){$("#optForClip").val($("#clip-option-id:checked").val()),$("#credit-limit-options-form").submit()}),$("#intl-number-update-form #generate-otp-tab").show(),$("#intl-number-update-form #toDate").datepicker("option","minDate","0"),$("#generate-otp-intl-number").on("click",function(){$.ajax({url:$("#generate-otp-intl-number").attr("formaction"),type:"get",success:function(data){data.success?($("#intl-number-update-form #generate-otp-tab").hide(),$("#intl-number-update-form #resend-otp-tab").show()):$("#otp-send-response").html(data.message)},error:function(xhr,status,error){"901"==xhr.status&&(window.location.href="/creditcards/app/user/login/error/invalidSession"),"function"==typeof parameters.error&&parameters.error(xhr,status,error)}})});var showSelectedAddonCardOnDashboard=function(){var selectedIndex=$(".dashboard #addOnCard")[0].selectedIndex||0;$(".dashboard .add-on-overview").hide(),$(".dashboard .add-on-overview[data-id="+selectedIndex+"]").show()};$(".dashboard #addOnCard").on("change.fs",showSelectedAddonCardOnDashboard),$(".dashboard #addOnCard").exists()&&showSelectedAddonCardOnDashboard(),$(".my-account input#fromDate").datepicker("option",{minDate:"-2Y",maxDate:"0"}),$(".my-account input#toDate").datepicker("option",{minDate:"-2Y",maxDate:"0"}),$(".my-account input#fromDate-next").datepicker("option",{minDate:"-2Y",maxDate:"0"}),$(".my-account input#toDate-next").datepicker("option",{minDate:"-2Y",maxDate:"0"}),$(".my-account input#fromDateAdv").datepicker("option",{minDate:"-2Y",maxDate:"0"}),$(".my-account input#toDateAdv").datepicker("option",{minDate:"-2Y",maxDate:"0"}),$("input#fromDate").on("change",function(){var selectedDate=$(this).val();$("input#fromDate").val(selectedDate),$("input#toDate").datepicker("option","minDate",selectedDate)}),$("input#toDate").on("change",function(){var selectedDate=$(this).val();$("input#toDate").val(selectedDate),$("input#fromDate").datepicker("option","maxDate",selectedDate)}),$("input#fromDateAdv").on("change",function(){var selectedDate=$(this).val();$("input#fromDateAdv").val(selectedDate),$("input#toDateAdv").datepicker("option","minDate",selectedDate)}),$("input#toDateAdv").on("change",function(){var selectedDate=$(this).val();$("input#toDateAdv").val(selectedDate),$("input#fromDateAdv").datepicker("option","maxDate",selectedDate)}),$(".tab-panel-outer form .button#reset").click(function(e){e.preventDefault(),$(".tab-panel-outer form").trigger("reset"),$(".tab-panel-outer form label").removeClass("valid error"),$(".tab-panel-outer form select.fancy").trigger("update.fs"),$(".tab-panel-outer form .fancy-checkbox").removeClass("checked")}),$(".greeting").html(greeting()),initBTForm(),$("#bt-form #savedCards").on("change.fs",function(){if(0!=$(this).val().length){var cardNumber=$(this).val().replace(/[-]/g,"").match(/.{1,4}/g);$(".card-number").each(function(i){$(this).val(cardNumber[i]);var j=i+1;$("#card-number-"+j).val(cardNumber[i]),$("#maskNumInputFcu-"+j).val(cardNumber[i]),3==i&&$(this).trigger("change")}),$("#card-number-4").blur(),$("#card-number-4").siblings("label").addClass("valid"),$("#card-number-8").siblings("label").addClass("valid"),console.log("card number 8 print without green tick"),$(".fcuErrorMessRedCol").css("display","none"),$("#card-number-1,#card-number-2,#card-number-3").attr("style"," border:solid 1px #cdcbcb;"),$("#card-number-5,#card-number-6,#card-number-7,#card-number-8").removeClass("error");for(var maskedInput="",i=0;i<$("#card-number-1").val().length;i++)maskedInput+="X";$("#card-number-1").val(maskedInput),maskedInput="";for(var i=0;i<$("#card-number-2").val().length;i++)maskedInput+="X";$("#card-number-2").val(maskedInput),maskedInput="";for(var i=0;i<$("#card-number-3").val().length;i++)maskedInput+="X";$("#card-number-3").val(maskedInput),maskedInput="";for(var i=0;i<$("#card-number-4").val().length;i++)maskedInput+="X";return $("#card-number-4").val(maskedInput),maskedInput="",""==$("#maskNumInputFcu-1, #maskNumInputFcu-2, #maskNumInputFcu-3, #maskNumInputFcu-4").val()?void console("returning the value from drop down--------"):void 0}}),verifyCard=function(){var cardNumber=$(".card-number").map(function(){return $(this).val()}).get().join("");if(resetBtForm(),console.log("cardNumber --------printing card number",cardNumber),creditCardValidate(cardNumber)&&$("#maskNumInputFcu-1").val()+$("#maskNumInputFcu-2").val()+$("#maskNumInputFcu-3").val()+$("#maskNumInputFcu-4").val()==$("#card-number-5").val()+$("#card-number-6").val()+$("#card-number-7").val()+$("#card-number-8").val()){$("label[for='cardNumber']").removeClass("validCard").addClass("valid").removeClass("error");var href=$("#bankName").attr("data-validate-action");if($("#maskNumInputFcu-1").val()+$("#maskNumInputFcu-2").val()+$("#maskNumInputFcu-3").val()+$("#maskNumInputFcu-4").val()!=$("#card-number-5").val()+$("#card-number-6").val()+$("#card-number-7").val()+$("#card-number-8").val())return;if(href){$("#bin-error").hide();try{$("#mode-of-delivery-field .fancy-radio input").removeAttr("checked"),$("#mode-of-delivery-field input:radio[value=0]").parent().removeClass("checked")}catch(e){}if($("#card-number-8").siblings("label").removeClass("valid"),16==cardNumber.length||15==cardNumber.length){var passPhrase=randomStringGenerator(10,!0,!1);cardNumber=dataEncryptionAES(cardNumber,passPhrase),$.ajax({type:"POST",data:{cardNumber:cardNumber,passPhrase:passPhrase},url:href,beforeSend:function(){var loaderHtml='<div class="overlay-loader"></div>';$("body").append(loaderHtml),$("#card-type").removeAttr("class")},complete:function(){$("body").find("div.overlay-loader").remove()},success:function(data){var responseData=$.parseJSON(data);if(responseData.error){var binError=$("#bin-error");binError.text(responseData.error),binError.css("display","inline-block"),$("#bt-form #term-condition-id").attr("disabled",!0),$("#bt-form #confirm-button").prop("disabled",!0).addClass("disabled").removeClass("primary").addClass("secondary"),$("#bt-form #bankName").val("").trigger("change"),$("#mode-of-delivery-field").hide()}else{$("#bt-form #bankName").attr("value",responseData.bankName),$("#bt-form  #bankName").val(responseData.bankName),$("#bt-form  #bankName").val(responseData.bankName).trigger("change"),$("#amount").show(),cardNumber=dataDecryptionAES(cardNumber,passPhrase);var cardType="",firstDigit=cardNumber.charAt(0),secondDigit=cardNumber.charAt(1),cardNoLength=cardNumber.length;cardType="4"==firstDigit?"VISA":"5"==firstDigit||"2"==firstDigit?"MasterCard":"6"==firstDigit||"3"==firstDigit&&"5"==secondDigit&&16===cardNoLength?"RuPay":"3"==firstDigit&&"5"!==secondDigit&&15===cardNoLength?"Amex":"Other",console.log(cardType),$("#provider").val(cardType),"VISA"==cardType?($("#mode-of-delivery-field").hide(),$("#mailing-address-field").hide(),$("#card-type").removeClass("master-card").removeClass("rupay-card").removeClass("amex-card").addClass("visa-card"),$("#bt-form #default-tooltip").hide(),$("#bt-form #master-tooltip").hide(),$("#bt-form #rupay-tooltip").hide(),$("#bt-form #visa-tooltip").show(),$("#bt-form #amex-tooltip").hide(),$("#bt-form #other-tooltip").hide()):"MasterCard"==cardType?($("#card-type").removeClass("visa-card").removeClass("rupay-card").removeClass("amex-card").addClass("master-card"),$("#mode-of-delivery-field").show(),$("#mode-of-delivery-field input:radio[value=0]").parent().addClass("checked"),$("#mode-of-delivery-field input:radio[value=0]").attr("checked","checked"),$("#mode-of-delivery-field input:radio[value=0]").prop("checked",!0),$("#mailing-address-field").show(),$("#bt-form #default-tooltip").hide(),$("#bt-form #master-tooltip").show(),$("#bt-form #visa-tooltip").hide(),$("#bt-form #rupay-tooltip").hide(),$("#bt-form #amex-tooltip").hide(),$("#bt-form #other-tooltip").hide()):"RuPay"==cardType?($("#card-type").removeClass("visa-card").removeClass("master-card").removeClass("amex-card").addClass("rupay-card"),$("#mode-of-delivery-field").show(),$("#mode-of-delivery-field input:radio[value=0]").parent().addClass("checked"),$("#mode-of-delivery-field input:radio[value=0]").attr("checked","checked"),$("#mode-of-delivery-field input:radio[value=0]").prop("checked",!0),$("#mailing-address-field").show(),$("#bt-form #default-tooltip").hide(),$("#bt-form #rupay-tooltip").show(),$("#bt-form #master-tooltip").hide(),$("#bt-form #visa-tooltip").hide(),$("#bt-form #amex-tooltip").hide(),$("#bt-form #other-tooltip").hide()):"Amex"==cardType?($("#card-type").removeClass("visa-card").removeClass("master-card").removeClass("rupay-card").addClass("amex-card"),$("#mode-of-delivery-field").show(),$("#mode-of-delivery-field input:radio[value=0]").parent().addClass("checked"),$("#mode-of-delivery-field input:radio[value=0]").attr("checked","checked"),$("#mode-of-delivery-field input:radio[value=0]").prop("checked",!0),$("#mailing-address-field").show(),$("#bt-form #default-tooltip").hide(),$("#bt-form #amex-tooltip").show(),$("#bt-form #master-tooltip").hide(),$("#bt-form #visa-tooltip").hide(),$("#bt-form #rupay-tooltip").hide(),$("#bt-form #other-tooltip").hide()):($("#mode-of-delivery-field").show(),$("#mode-of-delivery-field input:radio[value=0]").attr("checked","checked").trigger("change"),$("#mode-of-delivery-field input:radio[value=0]").prop("checked",!0),$("#mailing-address-field").show(),$("#bt-form #default-tooltip").hide(),$("#bt-form #master-tooltip").hide(),$("#bt-form #visa-tooltip").hide(),$("#bt-form #rupay-tooltip").hide(),$("#bt-form #other-tooltip").show()),$("#bt-form #term-condition-id").removeAttr("disabled")}},error:function(xhr){"901"==xhr.status&&(window.location.href="/creditcards/app/user/login/error/invalidSession")}})}}}else{var cardfield1=$("#maskNumInputFcu-1").val()+$("#maskNumInputFcu-2").val()+$("#maskNumInputFcu-3").val()+$("#maskNumInputFcu-4").val(),cardfield2=$("#card-number-5").val()+$("#card-number-6").val()+$("#card-number-7").val()+$("#card-number-8").val();console.log("removing the card number--------"),$("label[for='cardNumber']").addClass("validCard").removeClass("valid"),$("#card-type").removeClass(),$("#bt-form #bankName").val("").trigger("change"),$("#mailing-address-field").show(),$("#bt-form #default-tooltip").show(),$("#bt-form #master-tooltip").hide(),$("#bt-form #visa-tooltip").hide(),$("#bt-form #other-tooltip").hide(),cardfield1.length>=13&&cardfield2.length>=13&&cardfield1!=cardfield2?(console.log("checking the lenth of card and empty--------"),$("#card-number-8").siblings("label").removeClass("valid"),$(".fcuErrorMessRedCol").css("display","block"),$("#card-number-8").siblings("label").addClass("error")):($("#card-number-8").siblings("label").removeClass("valid"),$(".fcuErrorMessRedCol").css("display","none"))}},$("#bt-form .card-number").change(function(){var cardfield1=$("#maskNumInputFcu-1").val()+$("#maskNumInputFcu-2").val()+$("#maskNumInputFcu-3").val()+$("#maskNumInputFcu-4").val(),cardfield2=$("#card-number-5").val()+$("#card-number-6").val()+$("#card-number-7").val()+$("#card-number-8").val();verifyCard(),$("#maskNumInputFcu-1").val()+$("#maskNumInputFcu-2").val()+$("#maskNumInputFcu-3").val()+$("#maskNumInputFcu-4").val()==$("#card-number-5").val()+$("#card-number-6").val()+$("#card-number-7").val()+$("#card-number-8").val()?(console.log("verify card called 1-----"),$("#card-number-8").next("label").hasClass("validCard")||(console.log("Both are validated in main js"),$("#card-number-8").siblings("label").addClass("valid"),$(".fcuErrorMessRedCol").css("display","none")),creditCardValidate($("#card-number-5").val()+$("#card-number-6").val()+$("#card-number-7").val()+$("#card-number-8").val())||($("#card-number-8").siblings("label").removeClass("valid"),$("#card-number-8").siblings("label").addClass("error"),$(".fcuErrorMessRedCol").css("display","none"),console.log("This is not a valid creditCard"))):$("#maskNumInputFcu-1").val()+$("#maskNumInputFcu-2").val()+$("#maskNumInputFcu-3").val()+$("#maskNumInputFcu-4").val()!=""&&cardfield1.length==cardfield2.length&&cardfield1.length>=13&&cardfield2.length>=13&&(console.log("Showing the error message"),$("#card-number-8").siblings("label").removeClass("valid"),$(".fcuErrorMessRedCol").css("display","block"),$("#card-number-8").siblings("label").addClass("error"))}),$("#bt-form .othercardNumBox").change(function(){var cardfield1=$("#maskNumInputFcu-1").val()+$("#maskNumInputFcu-2").val()+$("#maskNumInputFcu-3").val()+$("#maskNumInputFcu-4").val(),cardfield2=$("#card-number-5").val()+$("#card-number-6").val()+$("#card-number-7").val()+$("#card-number-8").val();verifyCard(),$("#maskNumInputFcu-1").val()+$("#maskNumInputFcu-2").val()+$("#maskNumInputFcu-3").val()+$("#maskNumInputFcu-4").val()==$("#card-number-5").val()+$("#card-number-6").val()+$("#card-number-7").val()+$("#card-number-8").val()?(console.log("verify card called 2-----"),$("#card-number-8").next("label").hasClass("validCard")||(console.log("Both are validated in main js"),$("#card-number-8").siblings("label").addClass(validClass),$(".fcuErrorMessRedCol").css("display","none")),creditCardValidate($("#card-number-5").val()+$("#card-number-6").val()+$("#card-number-7").val()+$("#card-number-8").val())||($("#card-number-8").siblings("label").removeClass(validClass),$("#card-number-8").siblings("label").addClass("error"),$(".fcuErrorMessRedCol").css("display","none"),console.log("This is not a valid creditCard"))):$("#card-number-5").val()+$("#card-number-6").val()+$("#card-number-7").val()+$("#card-number-8").val()!=""&&cardfield1.length==cardfield2.length&&cardfield1.length>=13&&cardfield2.length>=13&&(console.log("Showing the error message"),$("#card-number-8").siblings("label").removeClass(validClass),$(".fcuErrorMessRedCol").css("display","block"),$("#card-number-8").siblings("label").addClass("error"))}),$("#bt-form #card-number-single").change(function(){console.log("called now on change-------"),console.log("verify card called 3-----"),verifyCard()}),$("#bt-form #verify-card-button").click(function(){console.log("verify card called 4-----"),verifyCard()}),$("#bt-form #mode-of-delivery-field input:radio").change(function(){var $target=$("#mode-of-delivery-field input:radio").parent();$target.hasClass("checked")&&$target.removeClass("checked");var value=$("#mode-of-delivery-field input:radio:checked").val();0==value?$("#mailing-address-field").show():$("#mailing-address-field").hide()}),$("#bt-form #amount").val("").change(function(){$("#bt-form #calculations").html(""),$("#bt-form #confirmation .col-data").html(""),$("#bt-form #rriInfo").html(""),$("#bt-form #term-condition-id").prop("checked",!1),$("#bt-form #term-condition-id").parent("label.fancy-checkbox").removeClass("checked"),$("#bt-form #confirm-button").attr("disabled",!0).addClass("disabled"),$("#bt-form #generate-otp-field").hide(),$("#bt-form #otp").siblings(".errMsgDisplay").remove(),$("#bt-form #gstOnProcFeeBTDisplay").addClass("hide"),$("#bt-form #gstOnProcFeeBT").text("XX"),$("#bt-form #btRRIAstrisk").removeClass("show").addClass("hide");var strAmount=$("#bt-form #amount").val();if(strAmount.length>0){var amount=parseInt(strAmount.replace(/,/gi,""));isNaN(amount)||+$("#bt-form #amount").val(amount)}var minAmount=+$(".main-wrap #minAmount").val(),maxAmount=+$(".main-wrap #maxAmount").val();if(amount>=minAmount&&maxAmount>=amount)return $("#bt-form #offers .option").show(),$("#bt-form #offers .dd-options").show(),void btAmountBasedOffers($("#bt-form #amount").val(),!1);var text=DATA_FROM_PROPERTY.selectOfferText+" (<span class='no-of-offers'>0</span>)";text=DATA_FROM_PROPERTY.selectOfferText,$("#bt-form #offers .selected").html(text),$("#bt-form #offers .dd-options").hide(),$("#bt-form #amount").addClass("error"),0==$("#bt-form #amount").siblings("label.error").length?$("#bt-form #amount").after('<label class="error" for="amount">'):$("#bt-form #amount").siblings("label.error").removeClass("valid")});var btAmountCheck=function(){var cardNumber=$(".card-number").map(function(){return $(this).val()}).get().join(""),maxAmount=$("#offers").find("li.selected-option").attr("data-max"),minAmount=$("#offers").find("li.selected-option").attr("data-min"),offerIndex=$("#offers").find("li.selected-option").attr("data-index"),minAllowedAmount=$("#offers").find("li.selected-option").attr("data-acc-min"),maxAllowedAmount=$("#offers").find("li.selected-option").attr("data-acc-max"),amount=$("#bt-form #amount").val(),modeOfDelivery=$("#bt-form input:radio[name=modeOfDelivery]:checked").val();if(minAllowedAmount>=minAmount&&(minAmount=minAllowedAmount),maxAmount=maxAllowedAmount,parseFloat(offerIndex)>=0&&parseFloat(amount)>=parseFloat(minAmount)&&parseFloat(amount)<=parseFloat(maxAmount)){var passPhrase=randomStringGenerator(10,!0,!1);cardNumber=dataEncryptionAES(cardNumber,passPhrase),$("#bt-form #amount").removeClass("error"),$("#bt-form #amount").next("label[for='amount']").addClass("valid");var href=$("#offers").attr("data-action");href&&$.ajax({url:href,type:"POST",data:{cardNumber:cardNumber,offerIndex:offerIndex,amount:amount,modeOfDelivery:modeOfDelivery,passPhrase:passPhrase},beforeSend:function(){var loaderHtml='<div class="overlay-loader"></div>';$("body").append(loaderHtml)},success:function(data){var error=$(data).find("#error");if($(error).exists())$("#confirmation").replaceWith(error);else{var calculations=$(data).find("#calculations");$(calculations).exists()&&$("#calculations").replaceWith(calculations);var confirmation=$(data).find("#confirmation");$(confirmation).exists()&&$("#confirmation").replaceWith(confirmation);var previousError=$("li #error");$(previousError).exists()&&previousError.replaceWith(confirmation),$("#bt-form #enter-otp-field").hide(),$("#bt-form #generate-otp-field").show(),$("#bt-form  #amount").attr("data-isChange","true");var rriInfo=$(data).find("#rriInfo");$(rriInfo).exists()&&($("#rriInfo").replaceWith(rriInfo),$("#bt-form #btRRIAstrisk").removeClass("hide").addClass("show"))}},complete:function(){$("body").find("div.overlay-loader").remove()},error:function(xhr){"901"==xhr.status&&(window.location.href="/creditcards/app/user/login/error/invalidSession")}})}else $("#bt-form #amount").addClass("error"),$("#bt-form #amount").next("label[for='amount']").removeClass("valid"),$("#bt-form #btRRIAstrisk").removeClass("show").addClass("hide")};$("#bt-form #offers li.option").off().click(function(e){$("#bt-form #offers li.option").removeClass("selected-option"),e.preventDefault(),e.stopPropagation();var thisLi=$(this);thisLi.addClass("selected-option"),$("#bt-form #offers").trigger("change"),$("#bt-form .dd-options").toggleClass("open"),$("#bt-form #otp").val("").removeClass("error").siblings("label.error").remove(),$("#bt-form #term-condition-id").prop("checked",!1).parent().removeClass("checked"),$("#bt-form #confirm-button").prop("disabled",!0).addClass("disabled").addClass("secondary").removeClass("primary"),$(thisLi).closest(".dd-options").siblings(".selected").html($(thisLi).find(".hd").text())}),$("#bt-form #offers").change(btAmountCheck);$("#bt-form #amount").change(function(){$("#bt-form #enter-otp-field").hide()}),$("#bt-form #generate-otp-button").click(function(e){e.preventDefault(),makeAjaxWithLoader({url:$(this).attr("formaction"),type:"POST",success:function(data){data.success&&($("#enter-otp-field").show(),$("#generate-otp-field").hide(),$("#bt-form #otp").val("").removeClass("error").siblings("label.error").remove(),$("#bt-form #term-condition-id").prop("checked",!1).closest(".checked").removeClass("checked"),$("#bt-form #confirm-button").prop("disabled",!0).addClass("disabled").addClass("secondary").removeClass("primary"))}})});var otpVal,dobVal,empty=!1;$("#confirmOTP").bind("change",function(){otpVal=$(this).val()}),$("#campaign-dob").change(function(){dobVal=$(this).val(),empty=0==$(this).val().length?!0:!1,empty?$("#generate-otp-button-c2b").attr("disabled","disabled"):$("#generate-otp-button-c2b").removeAttr("disabled")}),$(".field-wrap-dob").on("keypress","#campaign-otp",function(evt){(evt.which<48||evt.which>57)&&evt.preventDefault()}),$(".field-wrap-dob").on("keyup","#campaign-otp",function(){var blank=!1;0==$(this).val().length&&(blank=!0),blank?$("#confirm-campaign-button").attr("disabled","disabled"):$("#confirm-campaign-button").attr("disabled",!1)}),$("#campaign-form #generate-otp-button-c2b").click(function(e){("Encash"==$("#featureNameForEncash").val()||"Encash Inline"==$("#featureNameForEncash").val())&&dncOTPGenEventEncash("c2b","C2B Landing Page","","N"),sessionStorage.setItem("Multicarding-Campaign","true"),$(".field-wrap-dob").removeClass("has-error"),$("span.errorMsg").remove(),e.preventDefault(),makeAjaxWithLoader({url:$(this).attr("formaction"),data:{dob:dobVal},type:"POST",error:function(){$("#otp-msg-failure2").css("display","block")},success:function(data){console.log(data),data.success||"DOB entered is incorrect."!==data.message?$(".field-wrap-dob").removeClass("has-error"):($(".field-wrap-dob").addClass("has-error"),$(".field-wrap-dob").prepend('<span class="errorMsg">'+data.message+"</span>")),data.success||data.alreadyExisting?($(".tnc-section-c2b").removeClass("hide"),$("#campaign-dob").remove(),$("p.campaign-otp-label").hide(),$("#otp-status1").css("display","block"),$("#otp-status1").text(data.message),$("#resend-campaign-otp").show(),$(".field-wrap-dob").addClass("activated"),$(".field-wrap-dob").html('<input type="password" placeholder="Enter OTP" name="campaign-otp" id="campaign-otp" maxlength="6" class="onlyNumber campaign-otp" autofocus="autofocus" />'),$("#generate-otp-button-c2b").remove(),$("#confirm-campaign-button").css("display","block")):($("#otp-msg-failure2").css("display","block"),$("#otp-status1").css("display","none"),$("#otp-status1").text(""),$("p.campaign-otp-label").show(),$(".field-wrap-dob").removeClass("activated"),data.alreadyExisting?($("#otp-msg-failure1").css("display","block"),$("#otp-msg-failure2").css("display","none")):($("#otp-msg-failure1").css("display","none"),$("#otp-msg-failure2").css("display","none"))),callC2bOtpGen(data)}})}),$("#bt-form #term-condition-id").click(function(){$("#bt-form #confirm-button-campaign").removeAttr("disabled").removeClass("disabled").addClass("primary").removeClass("secondary"),$(this).prop("checked")?$("#bt-form #otp:visible").length>0?6==$("#bt-form #otp").val().length?$("#bt-form #confirm-button").removeAttr("disabled").removeClass("disabled").addClass("primary").removeClass("secondary"):($("#bt-form #confirm-button").prop("disabled",!0).addClass("disabled").removeClass("primary").addClass("secondary"),$("#bt-form #confirm-button-campaign").prop("disabled",!0).addClass("disabled").removeClass("primary").addClass("secondary")):$("#bt-form #confirm-button").prop("disabled",!0).addClass("disabled").removeClass("primary").addClass("secondary"):($("#bt-form #confirm-button").prop("disabled",!0).addClass("disabled").removeClass("primary").addClass("secondary"),$("#bt-form #confirm-button-campaign").prop("disabled",!0).addClass("disabled").removeClass("primary").addClass("secondary"))}),$("#bt-form #resend-otp-id").click(function(e){$("#bt-form #otp").val("").removeClass("error").siblings("label.error").remove(),$(this).hasClass("disabled")&&e.preventDefault()}),$("#emd-form input:radio[name=disbursementMode]").change(function(){var value=$("#emd-form input:radio[name=disbursementMode]:checked").val();
"NEFT"==value?($("#name-field").show(),$("#mailing-address-field").hide(),$("#ifscCode-field").show(),$("#change-address-link").hide()):($("#name-field").show(),$("#mailing-address-field").show(),$("#ifscCode-field").hide(),$("#change-address-link").show())}),$("#manageAlertSelect").on("change.fs",function(){$(".alerts-table").hide(),$(".editAlerts #"+$(this).val()).show()}),$(".data2").on("change.fs",function(){0==$(this).prop("selectedIndex")?($(this).parents("tr").find("input[type='text'].data3").show(),$(this).parents("tr").find("select.data3").parents(".fancy-select-wrap").hide()):($(this).parents("tr").find("input[type='text'].data3").hide(),$(this).parents("tr").find("select.data3").parents(".fancy-select-wrap").show())}),$("#confirmAlert").on("click",function(){{var alertsArray=[],typeDesc=$("#manageAlertSelect").find("option:selected").text();$("#manageAlertSelect").val()}$(".alerts-table").each(function(){return $(this).is(":hidden")?void 0:void(selectAlertType=$(this).attr("id"))}),$("#"+selectAlertType).find("tbody tr").each(function(){var data1=null,data2=null,data3=0;$(this).find(".data1").length>0&&(data1=$(this).find(".data1").attr("id")),$(this).find(".data2").length>0&&(data2=$(this).find(".data2").val()),$(this).find(".data3").length>0&&(data3=$(this).find("select.data2").length>0?0==$(this).find(".data2").prop("selectedIndex")?$(this).find("input[type='text'].data3").val():$(this).find("select.data3").val():$(this).find(".data3").val());var enabled=!0;$(this).find(".alertswitch").find("div.button-wrap").hasClass("button-active")&&(enabled=!1);var alert={category:data1,type:data2,limit:data3,enabled:enabled};alertsArray.push(alert)}),$.ajax({url:"/creditcards/app/alerts/save",type:"POST",dataType:"json",data:JSON.stringify(alertsArray),success:function(){$(".congrats-msg").show(),$("#msgalertType").text(typeDesc),$("#manage-alert-tab").removeClass("editable"),$.each(alertsArray,function(i,val){var $viewTr=$(".viewAlerts").find("#"+val.category+"_view");void 0!=$viewTr&&($viewTd=$viewTr.find("td"),val.enabled?(null!=val.limit&&("spend-percent"==val.type||"credit-limit"==val.type?$($viewTd[1]).text(val.limit+"%"):"payment-due"==val.type?$($viewTd[1]).text(val.limit+" Days"):$($viewTd[1]).html("<em class='WebRupee'>Rs.</em>"+val.limit)),$($viewTd[2]).text("ON")):($($viewTd[1]).text(""),$($viewTd[2]).text("OFF")))})},error:function(xhr){"901"==xhr.status&&(window.location.href="/creditcards/app/user/login/error/invalidSession")}})}),$("#cancelAlert").on("click",function(){$("#manage-alert-tab").removeClass("editable"),$(".congrats-msg").hide()}),$(document).delegate(".add-social","click",function(e){e.preventDefault(),$(this).parents(".tab-item").find(".edit-button").trigger("click")}),$(".alertswitch").click(function(){var $textBox=$(this).parent().prev("td").find("input[type='text']");if(!$(this).find(".button-active").length>0&&$textBox.length>0&&!$textBox.is(":hidden")){var pattern=/\d+/;""!=$textBox.val()&&pattern.test($textBox.val())?$textBox.css("border-color",""):($(this).find(".button-wrap").addClass("button-active"),$textBox.css("border-color","#ff0000"))}}),$("input[type='text'].data3").on("blur",function(){var pattern=/\d+/;""!=$(this).val()&&pattern.test($(this).val())?$(this).css("border-color",""):($(this).parents("td").next().find(".button-wrap").addClass("button-active"),$(this).css("border-color","#ff0000"))}),initEncash(),initEmd()}),$(".download-lnk-card-statement").click(function(){var formData;formData="<form name='pdfForm' id='pdfForm' action='/creditcards/app/myaccount/download-card-statement-pdf' method='post'>",formData=formData+"<input type='hidden' name='cycleDate' id='cycleDate' value='"+$("#statementCycleDate").val()+"' />",formData+="</form>",formData+="<script type='text/javascript'>",formData+="document.pdfForm.submit();</script>",OpenWindow=window.open("","","resizable=1, toolbar=0"),OpenWindow.document.write(formData),OpenWindow.document.close()}),$("#deactivateLinkId").click(function(e){if(e.preventDefault(),confirm("Are you sure you want to deactivate this Card ?\n\nClick Yes to proceed\n\nClick Cancel to go back")){var dataRedirectTo=$(this).attr("data-href");submitForm(dataRedirectTo,!0)}setTimeout(function(){calHeightMicro()},2e3)}),$("#micro-payhist-advance, #micro-payhist-quick, .show-all-paymenthistory").click(function(){setTimeout(function(){calHeightMicro()},1e3)}),$("#Go_Search_Pay_Form1_Id").click(function(){$("#loadMorePayTxnLinkId").attr("form-id","search-payment-form1");var initTxnCnt=$("#search-payment-form1 #payTxncount").attr("data-init-val");$("#search-payment-form1 #payTxncount").val(initTxnCnt),$("#search-payment-form1").submit(),setTimeout(function(){calHeightMicro()},2e3)}),$("#Go_Search_Pay_Form2_Id").click(function(){$("#loadMorePayTxnLinkId").attr("form-id","search-payment-form2");var initTxnCnt=$("#search-payment-form2 #payTxncount").attr("data-init-val");$("#search-payment-form2 #payTxncount").val(initTxnCnt),$("#search-payment-form2").submit(),$("#search-payment-form2").removeClass("valid error"),setTimeout(function(){calHeightMicro()},2e3)}),$("#quickTabId").on("click",function(){$("#search-txn-showAll").trigger("reset")}),$("#advTabId").on("click",function(){$("#search-txn-showAll").trigger("reset")});var loadTxnHistoryData=function($href,$formName){var formData=$($formName).serialize();$href&&makeAjaxWithLoader({type:"POST",data:formData,url:$href,beforeSend:function(){},complete:function(){},success:function(data){if(""!=data){$("#txn-display").html(data);var error=$("#valueErrorCount").val(),rightLinkHrefTxn=$("#right-link-href-gen").attr("data-path"),viewDemoHrefTxn=$("#view-demos-href-gen").attr("data-path");""!=error?($(".transactions-history header.section-header a.view-demos").removeClass("download-lnk").addClass("download-lnk-disabled"),$(".transactions-history header.section-header a.view-demos span.icon").removeClass("download-lnk").addClass("download-lnk-disabled"),$(".transactions-history header.section-header a.right-link").removeClass("print-lnk").addClass("print-lnk-disabled"),$(".transactions-history header.section-header a.right-link span.icon").removeClass("print-lnk").addClass("print-lnk-disabled"),$(".transactions-history header.section-header a.right-link").removeClass("printviewlink"),$(".transactions-history header.section-header a.right-link").removeAttr("data-href"),$(".transactions-history header.section-header a.view-demos").attr("href","javascript:void(0);"),$(".transactions-history header.section-header a.right-link").attr("href","javascript:void(0);"),$(".transactions-history header.section-header a.view-demos").removeAttr("target"),$("div.error-wrap h5").length>0?$("div.error-wrap h5").html(error):($errorBlock=$('<div class="error-wrap"><h5 class="top-error">'+error+".</h5></div>"),$wrapper=$(".transactions-history h3"),$wrapper.after($errorBlock))):($(".transactions-history header.section-header a.view-demos").removeClass("download-lnk-disabled").addClass("download-lnk"),$(".transactions-history header.section-header a.view-demos span.icon").removeClass("download-lnk-disabled").addClass("download-lnk"),$(".transactions-history header.section-header a.right-link").removeClass("print-lnk-disabled").addClass("print-lnk"),$(".transactions-history header.section-header a.right-link span.icon").removeClass("print-lnk-disabled").addClass("print-lnk"),$(".transactions-history header.section-header a.right-link").addClass("printviewlink"),$(".transactions-history header.section-header a.right-link").attr("data-href",rightLinkHrefTxn),$(".transactions-history header.section-header a.view-demos").attr("href",viewDemoHrefTxn),$(".transactions-history header.section-header a.view-demos").attr("target","_blank"),$(".transactions-history div.error-wrap").remove()),loadMoreTxnInit()}},error:function(){}})};$(".my-account a.show-all").click(function(){"filter-quick-tab"==$(".tab-menu.tabcount-3").find("li.active a").attr("data-id")?($("#search-txn-form1").trigger("reset"),$("#search-txn-showAll").trigger("reset")):"filter-advanced-tab"==$(".tab-menu.tabcount-3").find("li.active a").attr("data-id")&&($("#search-txn-form2").trigger("reset"),$("#search-txn-showAll").trigger("reset"),$("#search-txn-form2 label").removeClass("error valid"),$("#merchantCategory").trigger("update")),$("#actionFlag").val("showAll");var href=$("#search-txn-showAll").attr("action");loadTxnHistoryData(href,"#search-txn-showAll")}),$(".my-account a.show-all-paymenthistory").click(function(){$("#loadMorePayTxnLinkId").attr("form-id","search-payment-display-form");var initTxnCnt=$("#search-payment-display-form #payTxncount").attr("data-init-val");$("#search-payment-display-form #payTxncount").val(initTxnCnt),$("#search-payment-display-form").submit(),"filter-quick-tab"==$(".tab-menu.tabcount-3").find("li.active a").attr("data-id")?$("#search-payment-form1").trigger("reset"):"filter-advanced-tab"==$(".tab-menu.tabcount-3").find("li.active a").attr("data-id")&&($("#search-payment-form2").trigger("reset"),$("#search-payment-form2 label").removeClass("error valid"),$("#modeofpayment").trigger("update"))}),$(".my-account #LoadMorePayTxnLinkDiv a").on("click",function(e){e.preventDefault();var txnCnt,txnOffsetCnt,currFormId=$(this).attr("form-id");txnCnt=$("#"+currFormId+" #payTxncount").val(),txnOffsetCnt=$("#"+currFormId+" #payTxnOffsetcount").val(),txnCnt=parseInt(txnCnt)+parseInt(txnOffsetCnt),$("#"+currFormId+" #payTxncount").val(txnCnt),$("#"+currFormId).submit();var total=$("#totalcountFinal").val(),finalCount=$("#filtercountFinal").val(),offSetVal=$("#payTxnOffsetcount").val();parseInt(finalCount)+parseInt(offSetVal)>total?$("#loadMorePayTxnLinkId").addClass("hide"):($("#loadMorePayTxnLinkId").removeClass("hide"),viewport.width<768?$("html, body").animate({scrollTop:$(document).offset()},"slow"):$("html, body").animate({scrollTop:$(document).height()},"slow"))}),$("#Go_Search_Txnhist_Form1_Id").click(function(){$("#loadMoreTxnhistLinkId").attr("form-id","search-txn-form1");var fromDate=$("#search-txn-form1 #fromDate").val();$("#search-txn-showAll #fromDateShowAll").val(fromDate);var toDate=$("#search-txn-form1 #toDate").val();$("#search-txn-showAll #toDateShowAll").val(toDate);var formType=$("#search-txn-form1 #formType").val();$("#search-txn-showAll #formType").val(formType),$("#search-txn-showAll #actionFlag").val("showLimited");var href=$("#search-txn-form1").attr("action");loadTxnHistoryData(href,"#search-txn-form1")}),$("#Go_Search_Txnhist_Form2_Id").click(function(){$("#loadMoreTxnhistLinkId").attr("form-id","search-txn-form2"),$("#search-txn-form2 label").removeClass("error valid");var fromDate=$("#search-txn-form2 #fromDateAdv").val();if(null==fromDate||""==fromDate){var back2yearsDate=$("#search-txn-showAll #back2yearsDate").val();$("#search-txn-showAll #fromDateShowAll").val(back2yearsDate)}else $("#search-txn-showAll #fromDateShowAll").val(fromDate);var toDate=$("#search-txn-form2 #toDateAdv").val();if(null==toDate||""==toDate){var todaysDate=$("#search-txn-showAll #todaysDate").val();$("#search-txn-showAll #toDateShowAll").val(todaysDate)}else $("#search-txn-showAll #toDateShowAll").val(toDate);var fromAmount=$("#search-txn-form2 #fromAmount").val();$("#search-txn-showAll #fromAmount").val(fromAmount);var toAmount=$("#search-txn-form2 #toAmount").val();$("#search-txn-showAll #toAmount").val(toAmount);var transactionDescription=$("#search-txn-form2 #transactionDescription").val();$("#search-txn-showAll #transactionDescription").val(transactionDescription);var merchantCategory=$("#search-txn-form2 #merchantCategory").val();$("#search-txn-showAll #merchantCategory").val(merchantCategory);var formType=$("#search-txn-form2 #formType").val();$("#search-txn-showAll #formType").val(formType),$("#search-txn-showAll #actionFlag").val("showLimited");var href=$("#search-txn-form2").attr("action");loadTxnHistoryData(href,"#search-txn-form2")}),$("#search-txn-showAll #txn-history-card").on("change.fs",function(){$("#loadMoreTxnhistLinkId").attr("form-id","search-txn-showAll");var selectedIndex=$(this)[0].selectedIndex||0;$("input[name=selectedCardIndex]").val(selectedIndex);var href=$("#search-txn-form2").attr("action");loadTxnHistoryData(href,"#search-txn-showAll")}),$(".dd-options li.option").click(function(){$(".dd-options li.option").removeClass("selected-option"),$(this).addClass("selected-option");var maxEligibleAmount=$("#offers").find("li.selected-option").attr("data-max-eligible"),maxOfferEligibleAmount=$("#offers").find("li.selected-option").attr("data-max"),maxOfferEligibleAmountDisplay=$("#offers").find("li.selected-option").attr("data-max-offer-disp"),maxEligibleAmountDisplay=$("#offers").find("li.selected-option").attr("data-max-eligible-disp"),rate=$("#offers").find("li.selected-option").attr("data-rate");$("input#intRate").val(rate),$("input#maxEligible").val(maxEligibleAmount),console.log("is inline value ===> ",$("#isInline").val()),"false"==$("#isInline").val()?parseFloat(maxOfferEligibleAmount)<parseFloat(maxEligibleAmount)?(console.log("Inside if condition for encash ======>"),console.log("max offer eligible amount ======>",maxOfferEligibleAmount),console.log("max eligible amount======>",maxEligibleAmount),$("input#maxEligibleDisplay").val(maxOfferEligibleAmountDisplay)):(console.log("Inside else condition for encash ======>"),console.log("max offer eligible amount ======>",maxOfferEligibleAmount),console.log("max eligible amount======>",maxEligibleAmount),$("input#maxEligibleDisplay").val(maxEligibleAmountDisplay)):(console.log("Inside else condition for encash inline======>"),console.log("max offer eligible amount ======>",maxOfferEligibleAmount),console.log("max eligible amount======>",maxEligibleAmount),$("input#maxEligibleDisplay").val(maxEligibleAmountDisplay));var encashMin_emdMin=$("#offers").find("li.selected-option").attr("data-min-amt-label"),emdMaxVal=$("#offers").find("li.selected-option").attr("data-max-amt-label");$("#encash-form").length&&($("#encash-form .label-option-text").css("display","block"),$("#encash-form .label-option-text .min-amnt").text(encashMin_emdMin)),$("#emd-form").length&&($("#emd-form .label-option-text").css("display","block"),$("#emd-form .label-option-text .min-amnt").text(encashMin_emdMin),$("#emd-form .label-option-text .max-amnt").text(emdMaxVal)),$(this).parent().siblings(".custom-select-label").addClass("valid-custom").removeClass("error-custom"),$(this).parent().siblings(".selected").removeClass("error")});var emdAmountCheck=function(){var cardNumber=$("#emd-form #savingsAccountNumber").val(),paymentMode=$("#emd-form #disbursementMode").val(),maxAmount=$("#emd-form #maxAmount").val(),minAmount=$("#offers").find("li.selected-option").attr("data-min"),offerIndex=$("#offers").find("li.selected-option").attr("data-index"),bookingAmnt=$("#emd-form #bookingAmnt").val();if(parseFloat(offerIndex)>=0&&parseFloat(bookingAmnt)>=parseFloat(minAmount)&&parseFloat(bookingAmnt)<=parseFloat(maxAmount)){$("#emd-form #bookingAmnt").removeClass("error"),$("#emd-form #bookingAmnt").next("label[for='amount']").addClass("valid"),$("#emd-form").find("#enter-otp-field").find("label.error").remove(),$("#emd-form").find("#enter-otp-field").find("label.valid").remove();var href=$("#emd-form #bookingAmnt").attr("data-action");href&&$.ajax({type:"POST",data:{offerIndex:offerIndex,savingsAccountNumber:cardNumber,paymentMode:paymentMode,requestedAmount:bookingAmnt},url:href,beforeSend:function(){var loaderHtml='<div class="overlay-loader"></div>';$("body").append(loaderHtml),clearEmdSummary()},complete:function(){$("body").find("div.overlay-loader").remove()},success:function(data){if(data.success)fillEmdSummary(data),$("#emd-form .step-3").find("#error").remove(),$("#emd-form #enter-otp-field").hide(),$("#emd-form #generate-otp-field").show();else{var errMsg=data.message;errMsg||(errMsg=DATA_FROM_PROPERTY.defaultErrorMessage,submitForm(window.location.href,!0)),$("#emd-form #bookingAmnt").addClass("error").siblings("label.error").removeClass("valid"),clearEmdSummary();var h3=$("#emd-form .step-3 > .steps");if(h3.parent().find("#error.error-wrap").length>0)return void h3.parent().find("#error.error-wrap").html('<h5 class="top-error">'+errMsg+"</h5>");$("#emd-form .step-3 > .steps").after('<div id="error" class="error-wrap"><h5 class="top-error">'+errMsg+"</h5></div>")}},error:function(xhr){"901"==xhr.status&&(window.location.href="/creditcards/app/user/login/error/invalidSession"),clearEmdSummary()}})}else $("#emd-form #bookingAmnt").addClass("error"),$("#emd-form #bookingAmnt").next("label[for='bookingAmnt']").removeClass("valid"),clearEmdSummary()};$("#emd-form #bookingAmnt").change(function(){emdAmountCheck()}),$("#emd-form .emd-submit-button").click(function(e){if(e.preventDefault(),"yes"!=autoCompleteErrorFlag){$("#emd-form").validate();var $selectedSpan=$("#offers .selected");$selectedSpan.addClass("").siblings(".custom-select-label").show(),$.trim($selectedSpan.text())?$selectedSpan.removeClass("error").siblings(".custom-select-label").addClass("valid-custom").removeClass("error-custom"):$selectedSpan.addClass("error").siblings(".custom-select-label").addClass("error-custom").removeClass("valid-custom"),$selectedSpan.text()&&$("#emd-form").valid()&&$("#emd-form").submit()}}),$("#emd-form #term-condition-id").click(function(){this.checked&&!$("#error").exists()&&!$("input.error").exists()&&$.trim($("#processingFee").val()).length>0&&$("#emd-form #otp:visible").length>0&&(console.log($("#emd-form #otp:visible").length),6==$("#emd-form #otp").val().length?(console.log($("#emd-form #otp").val().length),$("#emd-form #confirm-button").removeClass("disabled").removeAttr("disabled").addClass("primary").removeClass("secondary")):$("#emd-form #confirm-button").addClass("disabled").attr("disabled",!0).removeClass("primary").addClass("secondary"))}),$("#encash-form #term-condition-id").click(function(){this.checked&&!$("#error").exists()&&!$("input.error").exists()&&$.trim($("#processingFee").val()).length>0&&$("#encash-form #otp:visible").length>0&&(console.log($("#encash-form #otp:visible").length),6==$("#encash-form #otp").val().length?(console.log($("#encash-form #otp").val().length),$("#encash-form #confirm-button").removeClass("disabled").removeAttr("disabled").addClass("primary").removeClass("secondary")):$("#encash-form #confirm-button").addClass("disabled").attr("disabled","disabled").removeClass("primary").addClass("secondary"))}),$("document").ready(function(){function populateCity(city,name,from){var hiddenCity=$("input[name=userResidenceCity]").val().trim().toUpperCase();$.ajax({type:"POST",data:{state:name},url:"/creditcards/app/myprofile/cityList",overlayTarget:$(".main"),success:function(data){try{for(var selectedPinArray=data,htmlPin="<option value=''>Select a City</option>",matchedFlag=!1,i=0;i<selectedPinArray.length;i++){var temp_city=selectedPinArray[i].CITY.toString().trim();void 0!=hiddenCity&&null!=hiddenCity&&""!=hiddenCity&&hiddenCity.toUpperCase()==temp_city.toUpperCase()?(htmlPin+="<option data-id='"+selectedPinArray[i].CITY.toString()+"' value='"+selectedPinArray[i].CITY.toString()+"' selected>"+selectedPinArray[i].CITY.toString()+"</option>",matchedFlag=!0):htmlPin+="<option data-id='"+selectedPinArray[i].CITY.toString()+"' value='"+selectedPinArray[i].CITY.toString()+"'>"+selectedPinArray[i].CITY.toString()+"</option>"}"residence"==from&&($("#residenceCity").html(htmlPin),$("#residenceCity").fancySelect(),$("#residenceCity").trigger("update.fs"));var userAgent=navigator.userAgent||navigator.vendor||window.opera,isAndroid=/android/i.test(userAgent);isiOS?$("#residenceCity, #residenceZipCode, #country_code, #companyCity, #companyZipCode, #companyCountry_code, #residenceState, #companyState").fancySelect({forceiOS:!0}):isAndroid&&$("#residenceState, #residenceCity, #residenceZipCode, #country_code, #companyState, #companyCity, #companyZipCode, #companyCountry_code").fancySelect(),1==matchedFlag&&$("#residenceCity").change()}catch(e){}},error:function(){}})}function populatePin(cityName,name,from){var hiddenPin=$("input[name=userResidenceZipCode]").val().trim();$.ajax({type:"POST",data:{city:cityName},url:"/creditcards/app/myprofile/pinStdList",overlayTarget:$(".main"),success:function(data){try{for(var selectedPinArray=data,htmlPin="<option value=''>Select a Pin</option>",i=0;i<selectedPinArray.length;i++){var temp_pin=selectedPinArray[i].PIN_CODE;htmlPin+=void 0!=hiddenPin&&""!=hiddenPin&&null!=hiddenPin&&hiddenPin==temp_pin?"<option value="+selectedPinArray[i].PIN_CODE+" selected>"+selectedPinArray[i].PIN_CODE+"</option>":"<option value="+selectedPinArray[i].PIN_CODE+">"+selectedPinArray[i].PIN_CODE+"</option>"}"residence"==from&&($("#residenceZipCode").html(htmlPin),$("#residenceZipCode").fancySelect(),$("#residenceZipCode").trigger("update.fs"));var userAgent=navigator.userAgent||navigator.vendor||window.opera,isAndroid=/android/i.test(userAgent);isiOS?$("#residenceCity, #residenceZipCode, #country_code, #companyCity, #companyZipCode, #companyCountry_code, #residenceState, #companyState").fancySelect({forceiOS:!0}):isAndroid&&$("#residenceState, #residenceCity, #residenceZipCode, #country_code, #companyState, #companyCity, #companyZipCode, #companyCountry_code").fancySelect()}catch(e){}},error:function(){}})}function populateCompanyCity(city,name){var hiddenCity=$("input[name=userCompanyCity]").val().trim().toUpperCase();$.ajax({type:"POST",data:{state:name},url:"/creditcards/app/myprofile/cityList",overlayTarget:$(".main"),success:function(data){try{for(var selectedPinArray=data,htmlPin="<option value=''>Select a City</option>",matchedFlag=!1,i=0;i<selectedPinArray.length;i++){var temp_city=selectedPinArray[i].CITY.toString().trim();void 0!=hiddenCity&&null!=hiddenCity&&""!=hiddenCity&&hiddenCity.toUpperCase()==temp_city.toUpperCase()?(htmlPin+="<option data-id='"+selectedPinArray[i].CITY.toString()+"' value='"+selectedPinArray[i].CITY.toString()+"' selected>"+selectedPinArray[i].CITY.toString()+"</option>",matchedFlag=!0):htmlPin+="<option data-id='"+selectedPinArray[i].CITY.toString()+"' value='"+selectedPinArray[i].CITY.toString()+"'>"+selectedPinArray[i].CITY.toString()+"</option>"}$("#companyCity").html(htmlPin),$("#companyCity").fancySelect(),$("#companyCity").trigger("update.fs");var userAgent=navigator.userAgent||navigator.vendor||window.opera,isAndroid=/android/i.test(userAgent);isiOS?$("#residenceCity, #residenceZipCode, #country_code, #companyCity, #companyZipCode, #companyCountry_code, #residenceState, #companyState").fancySelect({forceiOS:!0}):isAndroid&&$("#residenceState, #residenceCity, #residenceZipCode, #country_code, #companyState, #companyCity, #companyZipCode, #companyCountry_code").fancySelect(),1==matchedFlag&&$("#companyCity").change()}catch(e){}},error:function(){}})}function populateCompanyPin(cityName){var hiddenPin=$("input[name=userCompanyZipCode]").val().trim();$.ajax({type:"POST",data:{city:cityName},url:"/creditcards/app/myprofile/pinStdList",overlayTarget:$(".main"),success:function(data){try{for(var selectedPinArray=data,htmlPin="<option value=''>Select a Pin</option>",i=0;i<selectedPinArray.length;i++){var temp_pin=selectedPinArray[i].PIN_CODE;htmlPin+=void 0!=hiddenPin&&""!=hiddenPin&&null!=hiddenPin&&hiddenPin==temp_pin?"<option value="+selectedPinArray[i].PIN_CODE+" selected>"+selectedPinArray[i].PIN_CODE+"</option>":"<option value="+selectedPinArray[i].PIN_CODE+">"+selectedPinArray[i].PIN_CODE+"</option>"}$("#companyZipCode").html(htmlPin),$("#companyZipCode").fancySelect(),$("#companyZipCode").trigger("update.fs");var userAgent=navigator.userAgent||navigator.vendor||window.opera,isAndroid=/android/i.test(userAgent);isiOS?$("#residenceCity, #residenceZipCode, #country_code, #companyCity, #companyZipCode, #companyCountry_code, #residenceState, #companyState").fancySelect({forceiOS:!0}):isAndroid&&$("#residenceState, #residenceCity, #residenceZipCode, #country_code, #companyState, #companyCity, #companyZipCode, #companyCountry_code").fancySelect()}catch(e){}},error:function(){}})}if($("#termsconditionId")&&$("#termsconditionId").on("click",function(){window.open($("#termsconditionUrl").val(),"_blank")}),$("#privacyPolicyId")&&$("#privacyPolicyId").on("click",function(){window.open($("#privacypolicyUrl").val(),"_blank")}),$("#disclaimerId")&&$("#disclaimerId").on("click",function(){window.open($("#disclaimerUrl").val(),"_blank")}),$("#tncID")&&$("#tncID").on("click",function(){window.open($("#tncUrl").val(),"_blank")}),$("#offerTnCId")&&$("#offerTnCId").on("click",function(){window.open($("#offerTnCUrl").val(),"_blank")}),$("#securityTipsId")&&$("#securityTipsId").on("click",function(){window.open($("#securityTipsUrl").val(),"_blank")}),$("#securityTipsLearnMoreId")&&$("#securityTipsLearnMoreId").on("click",function(){window.open($("#securityTipsUrl").val(),"_blank")}),$("#viewdemosbicardId")&&$("#viewdemosbicardId").on("click",function(){window.open($("#viewdemosbicardUrl").val(),"_blank")}),$(".my-account .apply-addon-card #apply-now-addon").on("click",function(){var addCount=$("#addOnCardCount").val();3==addCount?($(".my-account .apply-addon-card #apply-now-addon").attr("href","javascript:void(0);"),$("#already2AddOnErrorMsgDivId").removeClass("hide")):$("#already2AddOnErrorMsgDivId").addClass("hide")}),$("#international-usage #disclaimer").change(function(e){e.preventDefault(),$(this).is(":checked")?$("#confirm").removeClass("secondary").addClass("primary").attr("disabled",!1):$("#confirm").attr("disabled",!0).addClass("secondary").removeClass("primary")}),$("#international-usage .fancy-radio #usageStatus2").click(function(){$("#confirm").addClass("secondary").removeClass("primary").attr("disabled",!0),$(".fancy-checkbox").removeClass("checked"),$("input#disclaimer").prop("checked",!1),$("input#disclaimer").attr("disabled","disabled")}),$("#international-usage .fancy-radio #usageStatus1").click(function(){$("input#disclaimer").prop("checked",!1),$("input#disclaimer").attr("disabled",!1)}),$("#international-usage .fancy-radio #usageStatus3").click(function(){$("#confirm").addClass("secondary").removeClass("primary").attr("disabled",!0)}),$("#international-usage .fancy-radio #usageStatus4").click(function(){$("#confirm").addClass("primary").removeClass("secondary").attr("disabled",!1)}),$("#encash-form").exists()&&$("#encash-form input#encashBankName").attr("data-values")&&"[]"!==$("#encash-form input#encashBankName").attr("data-values")){var encashBankNames=$("#encash-form input#encashBankName").attr("data-values");encashBankNames=encashBankNames.replace("[","").replace("]","").replace(/"/g,""),encashBankNames=encashBankNames.split(",");var autoSelectVal="";$("#encash-form input#encashBankName").blur(function(){$("#encash-form #term-condition-id").prop("checked",!1).parent().removeClass("checked"),$("#encash-form #confirm-button").attr("disabled",!0).removeClass("primary").addClass("secondary").addClass("disabled");var keyEvent=$.Event("keydown");return keyEvent.keyCode=$.ui.keyCode.ENTER,$(this).trigger(keyEvent),!1}).autocomplete({source:encashBankNames,minLength:0,delay:100,autoFocus:!0,select:function(event,ui){autoSelectVal=ui.item.value},appendTo:".searchElem",response:function(event,ui){0==ui.content.length?(autoCompleteErrorFlag="yes",$(event.target).addClass("error").siblings('label[for="encashBankName"]').length>0?$(event.target).removeClass("valid").addClass("error").siblings('label[for="encashBankName"]').removeClass("valid"):$(event.target).removeClass("valid").addClass("error").after($('<label for="encashBankName" class="error"></label>'))):(autoCompleteErrorFlag="no",$(event.target).removeClass("error").siblings('label[for="encashBankName"]').remove())}}).focus(function(){$.trim($(this).val());$(this).val(""),$(this).autocomplete("search")}),$("#encash-form input#encashBankName").on("focusout",function(){var newVal=$.trim($(this).val());0==newVal.length&&$(this).val(autoSelectVal);var $this=$(this);return"yes"==autoCompleteErrorFlag?($this.removeClass("valid").addClass("error"),$this.next("label").removeClass("valid")):($this.addClass("valid"),$this.next("label").addClass("valid")),!1})}if($("#emd-form").exists()&&$("#emd-form input#emdBankName").attr("data-values")&&"[]"!==$("#emd-form input#emdBankName").attr("data-values")){var emdBankNames=$("#emd-form input#emdBankName").attr("data-values");emdBankNames=emdBankNames.replace("[","").replace("]","").replace(/"/g,""),emdBankNames=emdBankNames.split(",");var autoSelectVal="";$("#emd-form input#emdBankName").blur(function(){$("#emd-form #term-condition-id").prop("checked",!1).parent().removeClass("checked"),$("#emd-form #confirm-button").attr("disabled",!0).removeClass("primary").addClass("secondary").addClass("disabled");var keyEvent=$.Event("keydown");return keyEvent.keyCode=$.ui.keyCode.ENTER,$(this).trigger(keyEvent),!1}).autocomplete({source:emdBankNames,minLength:0,delay:100,autoFocus:!0,select:function(event,ui){autoSelectVal=ui.item.value},appendTo:".searchElem",response:function(event,ui){0==ui.content.length?(autoCompleteErrorFlag="yes",$(event.target).addClass("error").siblings('label[for="emdBankName"]').length>0?$(event.target).removeClass("valid").addClass("error").siblings('label[for="emdBankName"]').removeClass("valid"):$(event.target).removeClass("valid").addClass("error").after($('<label for="emdBankName" class="error"></label>'))):(autoCompleteErrorFlag="no",$(event.target).removeClass("error").siblings('label[for="emdBankName"]').remove())}}).focus(function(){$.trim($(this).val());$(this).val(""),$(this).autocomplete("search")}),$("#emd-form input#emdBankName").on("focusout",function(){var newVal=$.trim($(this).val());0==newVal.length&&$(this).val(autoSelectVal);var $this=$(this);return"yes"==autoCompleteErrorFlag?($this.removeClass("valid").addClass("error"),$this.next("label").removeClass("valid")):($this.addClass("valid"),$this.next("label").addClass("valid")),!1})}var validateFetchOrder=function($this){{var $parent=$($this).parents("tr"),$minLimit=($(".flexipayTable .total-eligible-amount").attr("data-total-eligible-amount"),flexiPayObj.minAmount),$target=$(".fetchOfferBtn:visible"),$amount=$($this).val();$("#requestedAmount").val()}$eligibleAmount=$parent.find("td:visible input.onlyMoney").attr("data-val"),tenureLmtAmt=flexiPayObj.tenureLmtAmt,parseFloat($amount)>=$minLimit&&parseFloat($amount)<=parseFloat($eligibleAmount)?($($this).removeClass("error"),$target.removeClass("disabled").removeAttr("disabled"),validateFlexiPayStep3(!1)):($($this).addClass("error"),$target.addClass("disabled").attr("disabled","disabled"),validateFlexiPayStep3(!0))};if($("#flexipay-form").exists()){var selectedTxnIndex=[],offerIndex=0,flexiPayStep=0;$(function(){$(".selectAll-flexipay").on("change",function(){var isChecked=$(this).prop("checked"),inputs=$("tbody tr:not(.date-lmt) td:visible input.onlyMoney"),checks=$("tbody tr:not(.date-lmt) td:visible .fancy-checkbox");isChecked?($(".flexipay-date:visible").attr("checked","checked"),$(this).closest("label").addClass("checked"),$(inputs).each(function(){$(this).val($(this).attr("data-val")),$(this).removeAttr("disabled")}),$(checks).addClass("checked")):($(".flexipay-date").removeAttr("checked"),$(inputs).each(function(){$(this).val(""),$(this).attr("disabled","disabled")}),$(checks).removeClass("checked").find("input").removeAttr("checked")),calculateFetchAmount(),validateFlexipaySteps()}),$("#flexipay-form .flexipayTable input[type=text]:visible").on("input",function(){flexiPayStep>0&&validateFlexipaySteps()}),$(".flexipay-date").on("change",function(e){e.preventDefault();var currentStatus=$(this).attr("checked"),thisInput=($(this).closest("tr"),$(this).closest("tr").find("input.onlyMoney"));"checked"==currentStatus?($(".selectAll-flexipay").removeAttr("checked"),$(".selectAll-flexipay").parent("label").removeClass("checked"),$(this).parent("label").removeClass("checked"),$(this).removeAttr("checked"),$(thisInput).attr("disabled","disabled").val(""),$(thisInput).removeClass("error")):($(thisInput).removeAttr("disabled"),$(thisInput).val(thisInput.attr("data-val")),$(this).attr("checked",this.checked)),calculateFetchAmount();
var $chkError=$(".flexipayTable tbody input:visible.error").length,$chkBoxesLen=$(".flexipay-date:visible").length,$checkedChkBxLen=$(".flexipay-date[checked]:visible").length,$totalVal=parseFloat($("#requestedAmount").val());$("#requestedAmount").hasClass("error")||$chkError>0||0>=$totalVal?($("#confirm-button").addClass("secondary").attr("disabled","disabled"),$(".fetchOfferBtn:visible").addClass("disabled").attr("disabled","disabled")):$(".fetchOfferBtn:visible").removeClass("disabled").removeAttr("disabled"),$chkBoxesLen==$checkedChkBxLen&&($(".selectAll-flexipay").attr("checked","checked"),$(".selectAll-flexipay").parent("label").addClass("checked")),validateFlexipaySteps()})}),$('.flexipayTable input[type="checkbox"]').change(function(){var indexPos=($(this).parents("tr"),-1),index=0;$('.flexipayTable input[type="checkbox"]').each(function(){$(this).is(":checked")&&(selectedTxnIndex[index]=indexPos,index+=1),indexPos+=1})}),$(".flexi-dd .dd-options li input").change(function(){var tenureVal=$(this).attr("data-tenures");if(offerIndex=$(this).attr("data-index"),totalReqAmount=parseFloat($(".total-amount").val()),tenureLmtAmt=parseFloat(flexiPayObj.tenureLmtAmt),tenureLmtAmt>totalReqAmount){var index=tenureVal.indexOf(",36");index>-1&&(tenureVal=tenureVal.replace(",36",""))}for(var valueArray=tenureVal.split(","),html='<option value="">Select Tenure</option>',i=0;i<valueArray.length;i++)html+='<option value="'+valueArray[i]+'">'+valueArray[i]+"</option>";populateTenureDropDown(html)}),$(".flexipay-term-condition").on("click",function(){$($(".flexipay-term-condition")[0]).is(":checked")?$("#amountData").parents(".row-head.encash-money").hasClass("success")&&($("#requestedAmount").hasClass("error")?$("#confirm-button").addClass("secondary").attr("disabled","disabled"):$("#confirm-button.flexipay-submit-button").removeClass("secondary").addClass("primary").removeAttr("disabled")):$("#confirm-button.flexipay-submit-button").removeClass("primary").addClass("secondary").attr("disabled","disabled")}),$('.flexipayTable input[type="text"]').not("#requestedAmount").blur(function(e){e.preventDefault(),calculateFetchAmount(),validateFetchOrder(this)}),$("#flexipay-form #fetchOffer-btn").click(function(){getFlexipayOffers(),flexiPayStep=1});var validateFlexiPayStep3=function($error){1==$error?($("#term-condition-id").attr("disabled","disabled"),$("#confirm-button").addClass("secondary").attr("disabled","disabled")):$("#term-condition-id").removeAttr("disabled")},resetFlexipayOffers=function(){var $stepTwo=$(".main-wrap.flexipay"),offerArray=[],text=DATA_FROM_PROPERTY.selectOfferText;$stepTwo.find("#offers .selected").html(text),$stepTwo.find("#offers .dd-options input").prop("checked",!1).closest("li.option").removeClass("selected-option"),$stepTwo.find("#offers ul").removeClass("open"),$stepTwo.find("#offers ul.dd-options li").each(function(){-1!=$.inArray($(this).attr("data-offer-id"),offerArray)?($(this).removeClass("offerHide"),$(this).removeClass("selected-option")):($(this).addClass("offerHide"),$(this).removeClass("selected-option"))}),0==offerArray.length?$stepTwo.find(".fancy-dd .dd-options").hide():$stepTwo.find(".fancy-dd .dd-options").show()},validateFlexipaySteps=function(){flexiPayStep>0&&(resetFlexipayOffers(),resetFlexipayTenure(),populateFlexiPayStep3("null",!1))},resetFlexipayTenure=function(){$("#tenure").html(""),isiOS?($("#tenure").fancySelect({forceiOS:!0}),$("#tenure").trigger("update.fs")):($("#tenure").fancySelect(),$("#tenure").trigger("update.fs"))},populateTenureDropDown=function(html){$("#tenure").html(""),$("#tenure").html(html),isiOS?($("#tenure").fancySelect({forceiOS:!0}),$("#tenure").trigger("update.fs")):($("#tenure").fancySelect(),$("#tenure").trigger("update.fs"))},populateFlexiPayStep3=function(data,$flag){if(0==$flag)var data={benCardAccountNumber:null,totalAmount:"",interest:"",processingFee:"",modeOfDelivery:null,emi:"",tenure:"",message:null,success:!0,savingsInfo:{benefitsInformation:"",totalSavingsForSelected:"",monthlySavingsForSelected:"",selectedOfferInterestRate:"",selectedOfferTenure:"",selectedOfferProcFee:"",betterOfferInterestRate:"",processingFeeWaivered:null,requestedAmount:"",defaultOfferInterestRate:"",totalSavingsForDefault:0,monthlySavingsForDefault:0,totalSavingsForBetterOffer:0,monthlySavingsForBetterOffer:0,totalSaving:"",voucher:0,rewardPointsFlat:0,cashBackFlat:null,savingsInfoAvailable:!1,betterOfferInterest:500,defaultOfferInterest:"",waiverAvailable:!1},irrFactor:null,totalAmountDisplay:"",emiDisplay:"",processingFeeDisplay:""};$("#flexipay-confirm-form #amountData").text(data.totalAmountDisplay),$("#flexipay-confirm-form #tenureData").text(data.tenure),$("#flexipay-confirm-form #interestData").text(data.savingsInfo.betterOfferInterestRate),$("#flexipay-confirm-form #emiData").text(data.emiDisplay),$("#emi").val(data.emiDisplay),$("#flexipay-confirm-form #feeData").text(data.processingFeeDisplay),$("#processingFeeData").val(data.savingsInfo.selectedOfferProcFee),$("#flexipay-confirm-form #amountData").parents(".row-head.encash-money").addClass("success"),data.gstOnProcessingFee?($("#flexipay-confirm-form #gstOnProcFeeFlexipayDisplay").removeClass("hide"),$("#flexipay-confirm-form #gstOnProcFeeFlexipay").text(data.gstOnProcessingFee)):($("#flexipay-confirm-form #gstOnProcFeeFlexipayDisplay").addClass("hide"),$("#flexipay-confirm-form #gstOnProcFeeFlexipay").text("XX")),""!=data.savingsInfo.selectedOfferTenure?($("#selectedOfferInterestRate").text(data.savingsInfo.selectedOfferInterestRate),$("#selectedOfferTenure").text(data.savingsInfo.selectedOfferTenure),$("#selectedOfferProcFee").text(data.savingsInfo.selectedOfferProcFee),$("#selectedOfferH3").removeClass("hide"),$("#savingsTable #savingsTableRow").removeClass("hide")):($("#selectedOfferH3").addClass("hide"),$("#savingsTable #savingsTableRow").addClass("hide"),$("#flexipay-confirm-form #gstOnProcFeeFlexipayDisplay").addClass("hide"),$("#flexipay-confirm-form #gstOnProcFeeFlexipay").text("XX")),data.savingsInfo.waiverAvailable?($("#updatedOfferRow").removeClass("hide"),null!=data.savingsInfo.waiverDisplay&&""!=data.savingsInfo.waiverDisplay&&$("#waiverDisplayID").html(data.savingsInfo.waiverDisplay)):($("#updatedOfferRow").addClass("hide"),$("#waiverDisplayID").text("")),data.savingsInfo.savingsInfoAvailable?($("#savingsTable #benefitsTableRow").removeClass("hide"),$("#savingsRequestedAmount").text(data.savingsInfo.requestedAmount),$("#savingsDefaultOfferInterestRate").text(data.savingsInfo.defaultOfferInterestRate),$("#savingsDefaultOfferInterest").text(data.savingsInfo.totalSavingsForDefault),$("#defaultOfferMonthlyAmount").text(data.savingsInfo.monthlySavingsForDefault),$("#savingsBetterOfferInterestRate").text(data.savingsInfo.betterOfferInterestRate),$("#savingsBetterOfferInterest").text(data.savingsInfo.totalSavingsForBetterOffer),$("#savingsTotalSaving").text(data.savingsInfo.totalSaving)):($("#savingsTable #benefitsection").addClass("hide"),$("#savingsTable #benefitsTableRow").addClass("hide"));var specialBenefitsVar=(data.savingsInfo,data.savingsInfo.specialBenefits);null!=specialBenefitsVar&&""!=specialBenefitsVar?($("#specialBenefitsID").html(specialBenefitsVar),$("#specialBenefitsDisplayID").removeClass("hide"),$("#savingsTable #benefitsection").removeClass("hide")):($("#specialBenefitsID").html(""),$("#specialBenefitsDisplayID").addClass("hide"));var irrFactor=data.irrFactor,selectedROI=data.savingsInfo.selectedOfferInterestRate;null!=irrFactor&&""!=irrFactor&&selectedROI>0?($("#flexipayRRIAstrisk").removeClass("hide").addClass("show"),$("#rriInfo").removeClass("hide"),$("#irrFactorId").text(irrFactor)):($("#flexipayRRIAstrisk").removeClass("show").addClass("hide"),$("#rriInfo").addClass("hide"),$("#irrFactorId").text("")),0==$flag&&$("#amountData").parents(".row-head.encash-money").hasClass("success")&&($("#amountData").parents(".row-head.encash-money").removeClass("success"),$(".flexipay-term-condition:checked").length&&($(".flexipay-term-condition").parent(".fancy-checkbox").removeClass("checked"),$(".flexipay-term-condition").prop("checked",!1),validateFlexiPayStep3(!0)))};$(document).delegate(".tenure-select ul.options li","click",function(){$("#flexipay-confirm-form .step-3").find("#error").length>0&&$("#flexipay-confirm-form .step-3").find("#error").remove();{var href=$(".tenure-select").attr("data-href"),selectedTenure=$(this).text();$(".flexipayTable .total-amount").text()}href&&makeAjaxWithLoader({type:"POST",data:{offerIndex:offerIndex,selectedTenure:selectedTenure},url:href,beforeSend:function(){},complete:function(){},success:function(data){data.success?(populateFlexiPayStep3(data,!0),validateFlexiPayStep3(!1)):($("#flexipay-confirm-form .step-3").find("#error").length<=0&&$("#flexipay-confirm-form .step-3 .steps h3").after('<div id="error" class="error-wrap"><h5 class="top-error">'+data.message+"</h5></div>"),validateFlexiPayStep3(!0))},error:function(){}})});var calculateFetchAmount=function(){var $totalAmount=0,eligibleAmt=$(".flexipayTable .total-eligible-amount").attr("data-total-eligible-amount"),$minLimit=parseFloat(flexiPayObj.minTotalAmt),$totalEligibleAmount=parseFloat(eligibleAmt),inputs=($(".flexipayTable tbody input.error").length,$("tbody tr:not(.date-lmt) td:visible input.onlyMoney"));$(inputs).not(".total-amount").each(function(){void 0!=$(this).val()&&""!=$(this).val()&&($totalAmount=parseFloat($totalAmount)+parseFloat($(this).val()))}),$totalAmount=$totalAmount.toFixed(2),$minLimit>$totalAmount||$totalAmount>$totalEligibleAmount?($totalAmount>$totalEligibleAmount?($(".total-amount").addClass("error"),$("#flexipay-form #flexipayErrMsgDisplayId").removeClass("hide").addClass("show")):$(".total-amount").removeClass("error"),$(".fetchOfferBtn:visible").addClass("disabled").attr("disabled","disabled")):($("#flexipay-form #flexipayErrMsgDisplayId").removeClass("show").addClass("hide"),$(".total-amount").removeClass("error"),$(".fetchOfferBtn:visible").removeClass("disabled").removeAttr("disabled")),$(".flexipayTable .total-amount").val($totalAmount)},getFlexipayOffers=function(){var href=$("#fetchOffer-btn").attr("data-href"),requestedAmount=$(".flexipayTable .total-amount").val(),eligibleAmount=$(".flexipayTable .total-eligible-amount").text();if(parseFloat(requestedAmount)<=parseFloat(eligibleAmount)&&href){var flexipayFormData="";flexipayFormData+="synchronizerToken="+$("#flexipay-form").find('[name="synchronizerToken"]').val()+"&",$("#flexipay-form .flexipayTable tbody").find('[name="txnIndex"]:visible').each(function(){"checked"==$(this).attr("checked")&&(flexipayFormData+="txnIndex="+$(this).attr("value")+"&")}),$("#flexipay-form .flexipayTable td").find('[name="txnReqAmountNew"]').each(function(){$(this).parent().siblings().find("label")&&(flexipayFormData+="txnReqAmountNew="+$(this).attr("value")+"&")}),$("#flexipay-form .flexipayTable td:visible").find('[name="txnReqAmount"]').each(function(){$(this).parent().siblings().find("label").hasClass("checked")&&(flexipayFormData+="txnReqAmount="+$(this).attr("data-val")+"&")}),flexipayFormData+="requestedAmount="+$("#flexipay-form").find('[name="requestedAmount"]').val()+"&",flexipayFormData+="flexipayAmountMismatch="+$("#flexipay-form").find('[name="flexipayAmountMismatch"]').attr("value"),makeAjaxWithLoader({type:"POST",data:flexipayFormData,url:href,beforeSend:function(){},complete:function(){},success:function(data){try{var $stepTwo=$(".main-wrap.flexipay"),offerArray=($.parseJSON(data),[]);$.each($.parseJSON(data),function(idx,obj){var offerId=obj.id;offerArray.push(offerId)}),$("#flexipayRRIAstrisk").addClass("hide"),$("#rriInfo").addClass("hide");var text=DATA_FROM_PROPERTY.selectOfferText+" (<span class='no-of-offers'>"+offerArray.length+"</span>)";$stepTwo.find("#offers .selected").html(text),$stepTwo.find("#offers .dd-options input").prop("checked",!1).closest("li.option").removeClass("selected-option"),$stepTwo.find("#offers ul").removeClass("open"),$stepTwo.find("#offers ul.dd-options li").each(function(){-1!=$.inArray($(this).attr("data-offer-id"),offerArray)?($(this).removeClass("offerHide"),$(this).removeClass("selected-option")):($(this).addClass("offerHide"),$(this).removeClass("selected-option"))}),0==offerArray.length?$stepTwo.find(".fancy-dd .dd-options").hide():$stepTwo.find(".fancy-dd .dd-options").show()}catch(e){}},error:function(){}})}validateFlexipaySteps()}}$("#card-upgrade-terms").change(function(){$(this).is(":checked")?$("#upgrade-submit-btn").removeClass("disabled").attr("disabled",!1):$("#upgrade-submit-btn").addClass("disabled").attr("disabled",!0)}),$("#card-upgrade-form").find('[type="submit"]').click(function(){$(this).prop("disabled",!0),$("#card-upgrade-form").submit()}),refer_rowCount=1,$(".refer").exists()&&(addRow(1),refer_rowCount=1,$(".refer #add-row").click(function(e){e.preventDefault(),refer_rowCount++,5>=refer_rowCount?addRow(refer_rowCount):"",5==refer_rowCount&&$(this).attr("disabled",!0).addClass("disabled")}),$(document).delegate(".refer .remove-row","click",function(event){event.preventDefault(),refer_rowCount>1?removeRow($(this)):"",5>=refer_rowCount&&$("#add-row").removeAttr("disabled").removeClass("disabled"),refer_rowCount--})),$(".my-profile ul.tab-menu li a").click(function(){var href=$(this).attr("data-href"),id=$(this).attr("data-id"),hash=$(this).attr("href");requestUrl=href+hash;try{window.location.hash=hash}catch(e){}href&&makeAjaxWithLoader({url:href,type:"POST",success:function(data){try{if(data){if($("#"+id).html(" "),$("#"+id).html(data),$("#"+id).removeClass("editable"),$("#intl-number-update-form #resend-otp-tab").hide(),"international-tab"==id){applyValidationOnInter();var currDate=$(".international .datepicker input#validTo").attr("data-currDate");currDate=currDate.split("-").reverse().join("/");var maxD=parseInt($(".international .datepicker input#validTo").attr("data-validDate")),maxDate=new Date(currDate);maxDate.setDate(maxDate.getDate()+maxD),$(".international .datepicker input#validTo").datepicker({dateFormat:"dd-M-yy",changeMonth:!0,changeYear:!0,maxDate:maxDate,minDate:new Date(currDate)}),changeDateIntlNumber()}"address-tab"==id?(applyValidationOnChangeAdd(),addressChange()):"quick-contact-tab"==id&&validateContactForm()}}catch(e){}}})}),$(document).delegate("#social-media-confirm","click",function(e){e.preventDefault();var href=$("#social-media-form").attr("action");href&&makeAjaxWithLoader({url:href,type:"POST",data:$("#social-media-form").serialize(),success:function(data){data&&$("#social-tab").html(data)}})}),$(document).delegate("#change-pass-popup .close-button,#change-pass-popup .button-ok","click",function(){var dataRedirectTo=$("#change-pass-popup .close-button").attr("data-location");closeModalPopup($(this)),submitForm(dataRedirectTo,!0)}),$(document).delegate(".my-profile .tab-item .edit-button","click",function(e){e.preventDefault();var hiddenState=$("input[name=userResidenceState]").val().trim().toUpperCase(),hiddenCompanyState=$("input[name=userCompanyState]").val().trim().toUpperCase(),$tabItem=$(this).parents(".tab-item");$tabItem.toggleClass("editable"),$tabItem.find("#generate-otp-tab").show(),$tabItem.find("#resend-otp-tab").hide();var selectedTab=$(".tab-menu.tabcount-5").find("li.active a").attr("data-id"),$isFourTab=$(".tab-menu").hasClass("tabcount-4"),$isFiveTab=$(".tab-menu").hasClass("tabcount-5"),selectedTab="";if($isFourTab?selectedTab=$(".tab-menu.tabcount-4").find("li.active a").attr("data-id"):$isFiveTab&&(selectedTab=$(".tab-menu.tabcount-5").find("li.active a").attr("data-id")),0==modifyOtherFields&&$("#process-verbiage").css("display","none"),"address-tab"===selectedTab){makeAjaxWithLoader({url:"/creditcards/app/myprofile/stateList",type:"POST",data:"",success:function(data){try{console.log("state"+data),statesDetail=data,$("select.dynPin").fancySelect(),$("select.dynCity").fancySelect(),$("select.dynState").renderStateDropDown();for(var i=0;i<=statesDetail.length;i++)void 0!=hiddenState&&""!=hiddenState&&null!=hiddenState&&statesDetail[i].CODE_MASTER_HIGH_VAL.toUpperCase()==hiddenState.toUpperCase()&&$("#residenceState  option[value='"+hiddenState+"']").prop("selected",!0).change(),void 0!=hiddenCompanyState&&""!=hiddenCompanyState&&null!=hiddenCompanyState&&statesDetail[i].CODE_MASTER_HIGH_VAL.toUpperCase()==hiddenCompanyState.toUpperCase()&&$("#companyState  option[value='"+hiddenCompanyState+"']").prop("selected",!0).change();$("#residenceState").trigger("update.fs"),$("#residenceZipCode").trigger("update.fs");var userAgent=navigator.userAgent||navigator.vendor||window.opera,isAndroid=/android/i.test(userAgent);isiOS?$("#residenceState, #residenceCity, #residenceZipCode, #country_code, #companyState, #companyCity, #companyZipCode, #companyCountry_code").fancySelect({forceiOS:!0}):isAndroid&&$("#residenceState, #residenceCity, #residenceZipCode, #country_code, #companyState, #companyCity, #companyZipCode, #companyCountry_code").fancySelect()}catch(e){}},error:function(){}});var selectedRadio=$('input[type="radio"]:checked').attr("id");$('input[type="radio"]').change(function(){var addressVal=this.id;("personal"===addressVal||"official"===addressVal)&&($("#addressChange_Check").prop("checked",!1),$(".newVerbiage1, .nochangErrMsg").addClass("hidden"),$("#addressChange_Check").removeClass("errAddrConsentCheck"),$(".nochangErrMsg").addClass("hidden"),$("#AddressChangeProceedBtn .AddchangeProceedbtn").addClass("gray-btn e-sign-button"),console.log("addressVal",addressVal),addressVal==selectedRadio?($("#change-address-form #addressSwapFlag").val("false"),$("#digiLockAddrChangeProceedFormSubmit #addressSwapFlag").val("false")):($("#change-address-form #addressSwapFlag").val("true"),$(".newVerbiage1").removeClass("activeModifiedFlag"),$("#digiLockAddrChangeProceedFormSubmit #addressSwapFlag").val("true")))})}}),$(document).delegate("#address-confirm-popup .close-boxpop","click",function(e){e.preventDefault(),closeModalPopup($(this))}),$(document).delegate("#manage-card-usage-popup .close-boxpop","click",function(e){e.preventDefault(),closeModalPopup($(this))}),$("#address-confirm-popup .addleft1").click(function(){localStorage.setItem("editAddressOpen",!0),console.log("clicked"),closeModalPopup($(this))}),$("#address-confirm-popup .addleft2").click(function(){$.ajax({type:"GET",url:"/creditcards/app/myprofile/update-gst-flag",beforeSend:function(){var loaderHtml='<div class="overlay-loader"></div>';$("body").append(loaderHtml),$(".overlay-loader").css("z-index","999999")},complete:function(){$(".overlay-loader").css("z-index","999"),$("body").find("div.overlay-loader").remove()},success:function(){closeModalPopup("#address-confirm-popup .popup1")},error:function(){closeModalPopup("#address-confirm-popup .popup1")}})}),$(document).on("change","#residenceState",function(evt){evt.preventDefault();var stateName=$("#residenceState option:selected").text();0==modifyOtherFields&&$("#process-verbiage").css("display","none"),$("#residenceZipCode").parent(".fancy-select").find(".options,.trigger").text(""),populateCity(stateName,stateName,"residence")}),$(document).on("change","#residenceCity",function(evt){evt.preventDefault();var cityName=$("#residenceCity option:selected").text();populatePin(cityName,cityName,"residence"),0==modifyOtherFields&&$("#process-verbiage").css("display","none")}),$(document).on("change","#companyState",function(evt){evt.preventDefault();var stateName=$("#companyState option:selected").text();$("#companyZipCode").parent(".fancy-select").find(".options,.trigger").text(""),populateCompanyCity(stateName,stateName)}),$(document).on("change","#companyCity",function(evt){evt.preventDefault();var cityName=$("#companyCity option:selected").text();populateCompanyPin(cityName,cityName)}),"true"==localStorage.getItem("editAddressOpen")&&($(".my-profile .tab-item .edit-button").click(),localStorage.removeItem("editAddressOpen")),$(".msw-login-conatiner.cards_container").exists()&&($(".lotus-registration-otp-page .lotus-login-field-wrap label").click(function(){$(".lotus-login-field-wrap input").focus()}),$(".lotus-login-field-wrap #mswPassword").siblings("label").click(function(){$(".lotus-login-field-wrap #mswPassword").focus()}),$(".lotus-login-field-wrap input").focusout(),$(".lotus-login-field-wrap input").focusin(function(){$(this).parent().find("label").addClass("active")}),$(".lotus-login-field-wrap input").blur(function(){""==$(this).val()&&($(this).parent().find("label").removeClass("active"),$(this).removeClass("valid"),$(".lotus-login-field-wrap input").focusout())}),$(".lotus-login-field-wrap input").keypress(function(){$(this).parent().find("label").addClass("active")}),$(".lotus-submit-btn").click(function(){""==$("#mswUserName").val()&&""==$("#mswPassword").val()?($(".login-error-msg").show(),$(".login-error-msg").text("Please enter valid Username and Password"),$(".login-error-msg2").hide()):""==$("#mswUserName").val()?($(".login-error-msg").show(),$(".login-error-msg").text("Please enter valid Username"),$(".login-error-msg2").hide()):""==$("#mswPassword").val()?($(".login-error-msg").show(),$(".login-error-msg").text("Please enter valid Password"),$(".login-error-msg2").hide()):$(".login-error-msg").hide()}),$(".lotus-registration-otp-page #resend-msw-otp").on("click",function(){console.log("on click"),$(".lotus-sendTxt").hide(),$(".lotus-resendTxt").show()}),$(document).on("submit",".msw-login-conatiner.lotus-registration-otp-page.cards_container .msw-otp-form",function(){var otpFieldLength;if("block"==$(".lotus-normal-view-otp").css("display")?otpFieldLength=$(".lotus-normal-view-otp #mswOTP").val().length:"block"==$(".lotus-mobile-container").css("display")?otpFieldLength=$(".lotus-mobile-container #mswOTP").val().length:"block"==$(".lotus-desktop-container").css("display")&&(otpFieldLength=$(".lotus-desktop-container #mswOTP").val().length),6==otpFieldLength){var mswLoader='<div class="msw-jrny-overlay-loader"><div class="loader"></div></div>';$("body").append(mswLoader)}else $("body").find("div.msw-jrny-overlay-loader").remove(),event.preventDefault()})),$(".msw-login-conatiner #mswOTP").on("blur",function(){var otpFieldValLength;"block"==$(".lotus-normal-view-otp").css("display")?otpFieldValLength=$(".lotus-normal-view-otp #mswOTP").val().length:"block"==$(".lotus-mobile-container").css("display")?otpFieldValLength=$(".lotus-mobile-container #mswOTP").val().length:"block"==$(".lotus-desktop-container").css("display")&&(otpFieldValLength=$(".lotus-desktop-container #mswOTP").val().length),6>otpFieldValLength?$(".lotus-registration-otp-page").exists()||($(this).css("border","1px solid red"),$(".msg-submit-btn").css("pointer-events","none")):$(".lotus-registration-otp-page").exists()||($(this).css("border","1px solid #bcbebf"),$(".msg-submit-btn").css("pointer-events","auto"))}),""!=$(".lotus-error-msg").html()?($(".msw-login-conatiner.msw-otp-page").css("margin","0% auto"),$(".top-error.msw-msg-container.lotus-success-msg").css("margin-top","15%")):($(".msw-login-conatiner.msw-otp-page").css("margin","10% auto"),$(".top-error.msw-msg-container.lotus-success-msg").css("margin-top","20%")),""!=$(".login-error-msg2").text()?$(".login-error-msg2").show():$(".login-error-msg2").hide(),$("input#mswUserName").on("change",function(){setTimeout(function(){$("label[for='mswPassword']").addClass("active")},500)});{var ch=navigator.userAgent.search("Chrome");navigator.userAgent.search("Firefox"),navigator.userAgent.search("MSIE 8.0"),navigator.userAgent.search("MSIE 9.0")}ch>-1||isiOS||isSafari?$(".msw-login-conatiner.lotus-registration-otp-page.cards_container #mswOTP").attr("type","number"):$(".msw-login-conatiner.lotus-registration-otp-page.cards_container #mswOTP").attr("type","password"),viewport.width<768?($(".lotus-desktop-container").hide(),$(".lotus-mobile-container").show()):($(".lotus-desktop-container").show(),$(".lotus-mobile-container").hide()),$("#msw-otp-form #msw-otp-submit").on("click",function(){localStorage.setItem("myprofile-details",!0)})}),$("#card-upgrade-btn1, #card-upgrade-btn2, #card-upgrade-btn3").click(function(e){e.preventDefault(),$(".upgrade-now-trigger").trigger("click"),viewport.width>1024&&$("body,html").animate({scrollTop:$("#card-upgade-tabs").offset().top},700),setcardNumber()}),$(".upgrade-now-trigger").click(function(e){e.preventDefault(),setcardNumber()});var validateForeClosurePrivacy=function(){$(".foreclosure-term-condition").on("click",function(){$($(".foreclosure-term-condition")[0]).is(":checked")&&$($(".foreclosure-term-condition")[1]).is(":checked")?($("#foreclosure-confirm-button").removeClass("disabled"),$("#foreclosure-confirm-button").attr("disabled",!1),$("#foreclosure-confirm-button").removeClass("secondary").addClass("primary")):($("#foreclosure-confirm-button").addClass("disabled"),$("#foreclosure-confirm-button").attr("disabled",!0),$("#foreclosure-confirm-button").removeClass("primary").addClass("secondary"))}),$("#foreclosure-confirm-button").on("click",function(){if($($(".foreclosure-term-condition")[0]).is(":checked")&&$($(".foreclosure-term-condition")[1]).is(":checked")){var dataRedirectTo=$("#foreclosure-confirm-button").attr("data-url");submitForm(dataRedirectTo,!0),$(this).attr("disabled",!0),$(".foreclosure-term-condition").attr("disabled",!0)}})},validateBookingAmount=function(frm){var offerIndex=$(frm).find("#offers").find("li.selected-option").attr("data-index"),bookingAmnt=$(frm).find("#bookingAmnt").val(),minAmount=$(frm).find("#offers").find("li.selected-option").attr("data-min"),maxEligibleAmount="";maxEligibleAmount="emd-form"==$(frm).attr("id")?$(frm).find("#maxAmount").val():$(frm).find("#offers").find("li.selected-option").attr("data-max-eligible"),parseInt(offerIndex)>=0&&parseFloat(bookingAmnt)>=parseFloat(minAmount)&&parseFloat(bookingAmnt)<=parseFloat(maxEligibleAmount)?($(frm).find("#bookingAmnt").removeClass("error"),$(frm).find("#bookingAmnt").next("label[for='bookingAmnt']").addClass("valid")):($(frm).find("#bookingAmnt").addClass("error"),$(frm).find("#bookingAmnt").next("label[for='bookingAmnt']").removeClass("valid"))},encashAmountCheck=function(){console.log("encashAmountCheck called");var savingsAccountNumber=$("#encash-form #savingsAccountNumber").val(),paymentMode=$("#encash-form #disbursementMode").val(),minAmount=$("#offers").find("li.selected-option").attr("data-min"),maxEligibleAmount=$("#offers").find("li.selected-option").attr("data-max-eligible"),offerIndex=$("#offers").find("li.selected-option").attr("data-index"),offerTenure=$("#offers").find("li.selected-option").attr("data-tenure"),bookingAmnt=$("#encash-form #bookingAmnt").val(),interest=$("#encash-form #intRate").val();if(parseInt(offerIndex)>=0&&parseFloat(bookingAmnt)>=parseFloat(minAmount)&&parseFloat(bookingAmnt)<=parseFloat(maxEligibleAmount)){$("#encash-form #bookingAmnt").removeClass("error"),$("#encash-form #bookingAmnt").next("label[for='bookingAmnt']").addClass("valid"),$("#encash-form").find("#enter-otp-field").find("label.error").remove(),$("#encash-form").find("#enter-otp-field").find("label.valid").remove();var href=$("#encash-form #bookingAmnt").attr("data-action");href&&$.ajax({type:"POST",data:{offerIndex:offerIndex,tenure:offerTenure,savingsAccountNumber:savingsAccountNumber,paymentMode:paymentMode,requestedAmount:bookingAmnt,interest:interest},url:href,beforeSend:function(){var loaderHtml='<div class="overlay-loader"></div>';$("body").append(loaderHtml),resetEncashSummary()},complete:function(){$("body").find("div.overlay-loader").remove()},success:function(data){if(data.success)fillEncashSummary(data),$("#encash-form .step-3").find("#error").remove(),$("#encash-form #enter-otp-field").hide(),$("#encash-form #generate-otp-field").show();else{$("#encash-form #bookingAmnt").addClass("error").siblings("label.error").removeClass("valid"),resetEncashSummary();var errMsg=data.message;errMsg||(errMsg=DATA_FROM_PROPERTY.defaultErrorMessage,submitForm(window.location.href,!0));var h3=$("#encash-form .step-3 > .steps");if(h3.parent().find("#error.error-wrap").length>0)return void h3.parent().find("#error.error-wrap").html('<h5 class="top-error">'+errMsg+"</h5>");$("#encash-form .step-3 > .steps").after('<div id="error" class="error-wrap"><h5 class="top-error">'+errMsg+"</h5></div>")}callDncOfferEligibility(data)},error:function(xhr){console.log("error"),$("#encash-form #term-condition-id").prop("checked",!1).parent().removeClass("checked"),$("#encash-form #confirm-button").attr("disabled",!0).removeClass("primary").addClass("secondary").addClass("disabled"),"901"==xhr.status&&(window.location.href="/creditcards/app/user/login/error/invalidSession"),callDncOfferEligibility(data)}})}else $("#encash-form #bookingAmnt").addClass("error"),$("#encash-form #bookingAmnt").next("label[for='bookingAmnt']").removeClass("valid"),$("#encash-form .step-3 #error").remove(),resetEncashSummary()};$("#encash-form #bookingAmnt").change(function(){console.log("encashAmountCheck -1"),encashAmountCheck(),sessionStorage.setItem("encashEligibility","true")}),$("#encash-form #offers").change(function(){var bookingAmt=$("#encash-form #bookingAmnt").val();$("#encash-form #bookingAmnt").removeAttr("readonly"),null!=bookingAmt&&bookingAmt>0&&(console.log("encashAmountCheck -2"),encashAmountCheck())}),$("#emd-form #offers").change(function(){resetEmdBookingAmt();var bookingAmt=$("#emd-form #bookingAmnt").val();$("#emd-form #bookingAmnt").removeAttr("readonly"),null!=bookingAmt&&bookingAmt>0&&emdAmountCheck()}),$("a#referFriend-lnk").on("click",function(e){e.preventDefault(),$("#refer-from").trigger("reset"),$(".refer-page #refer-from label").removeClass("valid error"),$(".refer-page .row-container .form-field-list.relative-list").remove(),$("#refer-from select.fancy").trigger("update"),$("#refer-from input#add-row-submit").removeAttr("disabled").removeClass("secondary"),openModalPopup("referFriend-popup")}),$(".referAfriend-overlay .close").on("click",function(e){e.preventDefault(),refer_rowCount=1,$("#add-row").removeAttr("disabled").removeClass("disabled"),$("#refer-from").find(".error").removeClass("error"),$("#refer-from").trigger("reset"),$(".refer-success-page").css("display","none"),$(".refer-page").css("display","block"),$(".modal-overlay").removeClass("open")}),$(".referAfriend-overlay #btn-ok").on("click",function(e){e.preventDefault(),$("#refer-from").find(".error").removeClass("error"),$("#refer-from").trigger("reset"),$(".refer-success-page").css("display","none"),$(".refer-page").css("display","block"),$(".modal-overlay").removeClass("open")}),$(".login-page form .password").on("input",function(){0!=$("#password").val().length?($(".password-strength").show(),onChangeCreatePassword($("#password").val())):($(".password-strength").hide(),onChangeCreatePassword($("#password").val()))}),$(".login-page form .userIdExists").on("focusout",function(){var $this=$(this),value=$(this).val(),urlNew=$(this).attr("data-map");""!=value&&""!=urlNew?makeAjaxWithLoader({type:"POST",data:{userId:value},url:urlNew,success:function(data){var response;response="string"==typeof data?data:JSON.stringify(data),"AlreadyExist"==response?($this.siblings(".userExists").html(response),$this.removeClass("valid"),$this.addClass("error"),$this.next("label").removeClass("valid")):"NotRegistered"==response?$this.siblings(".userExists").html(""):($this.siblings(".userExists").html(response),$this.removeClass("valid"),$this.addClass("error"),$this.next("label").removeClass("valid"))},error:function(){}}):($this.siblings(".userExists").html(""),$this.removeClass("valid"),$this.next("label").removeClass("valid"),$this.addClass("error"))}),$(".printviewlink").off("click").on("click",function(e){e.preventDefault();var href=$(this).attr("data-href"),loaderHtml='<div class="overlay-loader"></div>',$target=$("body");$target.append(loaderHtml),href&&$.ajax({type:"POST",data:{},url:href,success:function(data){if(data){var is_chrome=function(){return Boolean(window.chrome)
},prtContent=document.getElementById("prinatble");$(".printableDiv").html(data);var WinPrint=window.open("","","left=0,top=0,width=800,height=900,toolbar=0,scrollbars=0,status=0");WinPrint.document.write(prtContent.innerHTML),WinPrint.document.close(),WinPrint.focus(),is_chrome?(WinPrint.print(),setTimeout(function(){WinPrint.close()},200)):(WinPrint.print(),WinPrint.close());var timer=setInterval(function(){if(WinPrint.closed){clearInterval(timer);var $target=$("body");$target.find("div.overlay-loader").remove()}},500)}},error:function(xhr,status,error){"function"==typeof parameters.error&&parameters.error(xhr,status,error),"901"==xhr.status&&(window.location.href="/creditcards/app/user/login/error/invalidSession")}})}),$("#locale-switcher").click(function(e){e.preventDefault();var href=$(this).attr("data-href");makeAjaxWithLoader({url:href,type:"POST",data:"",overlayTarget:$(".main"),success:function(data){data.success&&location.reload()}})});var btAmountBasedOffers=function(amount,isCalc){if(!isCalc){$(".card-number").map(function(){return $(this).val()}).get().join("")}$("#bt-form #amount").removeClass("error"),$("#bt-form #amount").next("label[for='amount']").addClass("valid");var href=$("#bt-form #amount").attr("data-action");href&&$.ajax({url:href,type:"POST",data:{requestedAmount:amount},beforeSend:function(){var loaderHtml='<div class="overlay-loader"></div>';$("body").append(loaderHtml)},success:function(data){var offerArray=($.parseJSON(data),[]);if($.each($.parseJSON(data),function(idx,obj){var offerId=obj.id;offerArray.push(offerId)}),isCalc){var text=DATA_FROM_PROPERTY.selectOfferText+" (<span class='no-of-offers'>"+offerArray.length+"</span>)";$(".bt-calc-dialog .offer_list .selected").html(text),$(".bt-calc-dialog .offer_list ul input").prop("checked",!1).closest("li.option").removeClass("selected-option"),$(".bt-calc-dialog").find(".offer_list ul").removeClass("open"),$(".bt-calc-dialog").find(".offer_list ul.dd-options li").each(function(){-1!=$.inArray($(this).attr("data-offer-id"),offerArray)?$(this).removeClass("offerHide"):$(this).addClass("offerHide")}),0==offerArray.length?$(".bt-calc-dialog .fancy-dd .dd-options").hide():$(".bt-calc-dialog .fancy-dd .dd-options").show()}else{var text=DATA_FROM_PROPERTY.selectOfferText+" (<span class='no-of-offers'>"+offerArray.length+"</span>)";$("#bt-form #offers .selected").html(text),$("#bt-form #offers .dd-options input").prop("checked",!1).closest("li.option").removeClass("selected-option"),$("#bt-form #offers ul").removeClass("open"),$("#bt-form #offers ul.dd-options li").each(function(){-1!=$.inArray($(this).attr("data-offer-id"),offerArray)?($(this).removeClass("offerHide"),$(this).removeClass("selected-option")):($(this).addClass("offerHide"),$(this).removeClass("selected-option"))}),0==offerArray.length?$("#bt-form .fancy-dd .dd-options").hide():$("#bt-form .fancy-dd .dd-options").show()}},complete:function(){$("body").find("div.overlay-loader").remove()},error:function(xhr){isCalc?$(".bt-calc-dialog .offer_list ul").hide():$("#bt-form #offers ul").hide(),"901"==xhr.status&&(window.location.href="/creditcards/app/user/login/error/invalidSession")}})},btAmountBasedOffersNew=function(amount,isCalc){if(!isCalc){$(".card-number").map(function(){return $(this).val()}).get().join("")}$("#bt-form #amount").removeClass("error"),$("#bt-form #amount").next("label[for='amount']").addClass("valid");var href=$("#bt-form #amount").attr("data-action");href&&$.ajax({url:href,type:"POST",data:{requestedAmount:amount},success:function(data){var offerArray=($.parseJSON(data),[]);if($.each($.parseJSON(data),function(idx,obj){var offerId=obj.id;offerArray.push(offerId)}),isCalc){var text=DATA_FROM_PROPERTY.selectOfferText+" (<span class='no-of-offers'>"+offerArray.length+"</span>)";$(".bt-calc-dialog .offer_list .selected").html(text),$(".bt-calc-dialog .offer_list ul input").prop("checked",!1).closest("li.option").removeClass("selected-option"),$(".bt-calc-dialog").find(".offer_list ul").removeClass("open"),$(".bt-calc-dialog").find(".offer_list ul.dd-options li").each(function(){-1!=$.inArray($(this).attr("data-offer-id"),offerArray)?$(this).removeClass("offerHide"):$(this).addClass("offerHide")}),0==offerArray.length?$(".bt-calc-dialog .fancy-dd .dd-options").hide():$(".bt-calc-dialog .fancy-dd .dd-options").show()}else{var text=DATA_FROM_PROPERTY.selectOfferText+" (<span class='no-of-offers'>"+offerArray.length+"</span>)";$("#bt-form #offers .selected").html(text),$("#bt-form #offers .dd-options input").prop("checked",!1).closest("li.option").removeClass("selected-option"),$("#bt-form #offers ul").removeClass("open"),$("#bt-form #offers ul.dd-options li").each(function(){-1!=$.inArray($(this).attr("data-offer-id"),offerArray)?($(this).removeClass("offerHide"),$(this).removeClass("selected-option")):($(this).addClass("offerHide"),$(this).removeClass("selected-option"))}),0==offerArray.length?$("#bt-form .fancy-dd .dd-options").hide():$("#bt-form .fancy-dd .dd-options").show()}},complete:function(){$("body").find("div.overlay-loader").remove()},error:function(xhr){isCalc?$(".bt-calc-dialog .offer_list ul").hide():$("#bt-form #offers ul").hide(),"901"==xhr.status&&(window.location.href="/creditcards/app/user/login/error/invalidSession")}})};$(".view-demos").click(function(){var href=$(this).attr("data-href");if(href){var popupW=550,popupH=500,left=screen.width/2-popupW/2,top=screen.height/2-popupH/2,win=window.open("","My Account","toolbar=no, location=no, directories=no, status=no, menubar=no, scrollbars=no, resizable=no, copyhistory=no, width="+popupW+", height="+popupH+", top="+top+", left="+left);win.document.write("<iframe width="+popupW+" height="+popupH+" src="+href+' frameborder="0" allowfullscreen></iframe>'),win.document.close(),win.focus()}}),$(".mobile-only .primary-links #dashboard").on("click",function(e){e.preventDefault(),"block"==$("nav.navigation").css("display")?$("nav.navigation").hide():$("nav.navigation").show()}),$("a.user-menu").on("click",function(){$(".userDetail").toggle()});var quickLinkDropDown=function(){function init(){$("#quickLink-nav").on("click",function(){$("#quickLink-nav").hasClass("spriteArrowDown")?($("#quickLink-nav").removeClass("spriteArrowDown"),$("#quickLink-nav").addClass("spriteArrowUp")):($("#quickLink-nav").removeClass("spriteArrowUp"),$("#quickLink-nav").addClass("spriteArrowDown")),$("#ddList").toggle()})}return{init:init}}();quickLinkDropDown.init(),$(".openBTCalculator").exists()&&$(".openBTCalculator").click(function(e){return e.preventDefault(),"span"==e.target.tagName.toLowerCase()||"a"==e.target.tagName.toLowerCase()?(dialogify({dataToShowInDialog:$(this).find(".calculatorContent").find(".bt-calculator").clone(),width:"730",dialogClass:"bt-calc-dialog",open:function(){enableCalculator($(".bt-calc-dialog"))}}),!1):void 0});var txnCounter=10;$(document).ready(function(){function displayOfferImage(){var thisObj=$(".ex-offer-wrap .bg-img").find("img"),imgD="d",imgT="t",imgM="m";$("html").hasClass("mobile")?deviceObj.width()<767&&thisObj.attr("src",imgPath(thisObj,imgM)):$("html").hasClass("tablet")?thisObj.attr("src",imgPath(thisObj,imgT)):thisObj.attr("src",imgPath(thisObj,imgD))}function imgPath(thisObj,img){var imgFullPath,imgPathFirstHalf;return imgFullPath=thisObj.attr("src"),imgPathFirstHalf=imgFullPath.lastIndexOf("/"),("d"==imgFullPath[imgPathFirstHalf+1]||"t"==imgFullPath[imgPathFirstHalf+1]||"m"==imgFullPath[imgPathFirstHalf+1])&&(imgFullPath=imgFullPath.substr(0,imgPathFirstHalf+1)+img+imgFullPath.substr(imgPathFirstHalf+2,imgFullPath.length)),imgFullPath}function loadMoreInitSA(){$(".spend-transaction tr.spend-row").each(function(index){index+1>seachCounterSA&&$(this).addClass("hide")}),0==$(".spend-transaction tr.spend-row.hide").length&&$(".spend-transaction .load-moreSA").addClass("hide")}function loadMoreSA(parentEle){var countSA=0;$(parentEle).find(".spend-transaction tr.spend-row").each(function(){$(this).hasClass("hide")&&seachCounterSA>countSA&&($(this).removeClass("hide"),countSA++),0==$(parentEle).find(".spend-transaction tr.spend-row.hide").length&&$(parentEle).find(".spend-transaction .load-moreSA").addClass("hide")})}$(document).delegate("label[for]","click",function(e){return e.preventDefault(),!1});var unReadCount=$(".side-menu").find('input:hidden[name="unreadMailCount"]').val();$(".side-menu").find('li[data-val="My Interactions"]').parent().siblings().append('<sup class="unReadClass">&nbsp'+unReadCount+"</sup>"),$(document).on("click","#anchor-track-submit",function(){var loaderHtml='<div class="overlay-loader"></div>';$("body").append(loaderHtml),$("#tracksr_submit_form").submit(),dncTrackStatusEncash()}),$(document).on("click","#addon-track-submit",function(){var loaderHtml='<div class="overlay-loader"></div>';$("body").append(loaderHtml),$("#tracksr_book_form").submit()}),$(document).on("click","#addon-request-track",function(){$("#tracksr_application_form").submit()});try{$("table").find("td.convert-flexipay").parent().prev().css("border-bottom","0")}catch(e){}if($(document).on("click","#loadMoreTxnhistLinkId",function(e){e.preventDefault();var parent=$(this).parents();loadMoreTxn(parent),viewport.width<768?$("html, body").animate({scrollTop:$(document).offset()},"slow"):$("html, body").animate({scrollTop:$(document).height()},"slow")}),$(document).on("click","#close-alert",function(){$(".alert-box").addClass("hide")}),loadMoreTxnInit(),$("#reissue-replace-form").length>0&&($('input[type="submit"]').attr("disabled",!0),$('input[type="submit"]').addClass("secondary").removeClass("primary"),$(document).on("change","select#reissuereason",function(evt){evt.preventDefault();var $option=$(this.options[this.selectedIndex]),value=$option.val();"Select a reason"!=value?($('input[type="submit"]').attr("disabled",!1),$('input[type="submit"]').addClass("primary").removeClass("secondary"),$(".reissue-manage-section .rmv").removeClass("button-gray disabled")):($('input[type="submit"]').attr("disabled",!0),$('input[type="submit"]').addClass("secondary").removeClass("primary"),$(".reissue-manage-section .rmv").addClass("button-gray disabled"))})),$(document).on("click touchstart",function(e){"quickLink-nav"!=e.target.id&&$("#quickLink-nav").length>0&&"block"==$("#ddList").css("display")&&$("#ddList").css("display","none")}),isiOS&&$(".reissue-replace-list #reissuereason").fancySelect({forceiOS:!0}),$("a#sticky-lnk3").on("click",function(e){e.preventDefault(),$("#sticky-form").trigger("reset"),$("#sticky-form input.button-clickToProceed").removeAttr("disabled",!0).removeClass("secondary"),openModalPopup("sticky-popup")}),$("a#sticky-lnk4").on("click",function(e){e.preventDefault();var href=$(this).attr("href"),pageNm=$('input:hidden[name="sticky-s2s"]').attr("id");href&&makeAjaxWithLoader({url:href,type:"POST",data:{pageId:pageNm},success:function(data){$("div#addoncard-popup").exists()&&$("div#addoncard-popup").css("display","none"),$(".modal-overlay form").css("display","none"),$(".sticky-click2call-success p").html(data),$(".sticky-click2call-success").css("display","block"),openModalPopup("sticky-popup")}})}),$(".sticky-overlay .button-cancel").on("click",function(e){e.preventDefault(),$(".modal-overlay form").css("display","block"),$(".sticky-feedback-success").css("display","none"),$(".sticky-click2call-success").css("display","none"),$(".modal-overlay").removeClass("open")}),$(".sticky-overlay .button-clickToProceed").on("click",function(){$("#sticky-form input.button-clickToProceed").attr("disabled",!0).addClass("secondary");var href=$("#sticky-form").attr("data-href"),radioVal=($("#sticky-form").serialize(),$('form#sticky-form input[type="radio"]:checked').val()),pageNm=$('input:hidden[name="sticky-s2s"]').attr("id");href&&makeAjaxWithLoader({url:href,type:"POST",data:{selectedVal:radioVal,pageId:pageNm},success:function(data){$(".modal-overlay form").css("display","none"),$(".sticky-feedback-success p").html(data),$(".sticky-feedback-success").css("display","block")}})}),isSafari&&!isiOS&&($(".login-page .login-btn-wrap").css("margin-top","20px"),$("p, li, span, div, strong, em").css("text-rendering","auto !important")),$(window).on("resize orientationchange",function(){if($.datepicker._datepickerShowing){var datepicker=$.datepicker._curInst;dpInput=datepicker.input,dpElem=datepicker.dpDiv,dpElem.position({my:"left top",of:dpInput,at:"left bottom"})}}),$(".bt-calculator").length){var minVal=$("#bt-min-amt-lmt").html(),maxVal=$("#bt-max-amt-lmt").html();$(".tooltip-bt-cal #btcalc-min-amt-lmt").html(minVal),$(".tooltip-bt-cal #btcalc-max-amt-lmt").html(maxVal)}$(".bt-calc-container").length&&$(document).scroll(function(){$(".bt-calc-container .ui-widget-overlay")&&($(".bt-calc-container .ui-widget-overlay").css({position:"fixed",top:"0"}),pos=$(".bt-calc-container .ui-dialog").position(),$(".bt-calc-container .ui-dialog").css({position:"fixed",top:pos.y}))}),$(".ex-offer-wrap").exists()&&$(".ex-offer-wrap .bg-img img").length&&displayOfferImage(),$(window).on("resize orientationchange",function(){if($(".ex-offer-wrap .bg-img img").length){var thisObj=$(".ex-offer-wrap .bg-img").find("img");deviceObj.width()>1024?thisObj.attr("src",imgPath(thisObj,"d")):deviceObj.width()>767&&deviceObj.width()<1025&&thisObj.attr("src",imgPath(thisObj,"t"))}}),isiOS||$(document).on("click",function(e){var elemId=$(e.target).parents(".fancy-select-wrap").attr("id");"fancy-modeOfPayment"!=elemId&&$("select#modeofpayment").trigger("blur"),"fancy-merchantCategory"!=elemId&&$("select#merchantCategory").trigger("blur"),"track-bookedofferlist"!=elemId&&$("select#selectByValueOffer").trigger("blur")});try{tab1.length>0&&"advanced"==tab1&&$(".track-service-request #filter-advanced-tab").length>0&&$(".tab-menu.tabcount-3 #filter-advanced").trigger("click")}catch(e){}$(document).on("click touchstart",".bottom-tooltip .lnk-view-transaction a.quickAjax",function(e){var href=$(this).attr("data-href");if(""==href)return!1;e.preventDefault();$(this).attr("data-category");href&&makeAjaxWithLoader({url:href,type:"POST",success:function(data){$(".transactions.transcations-filter").html(data),$("html, body").animate({scrollTop:$(".transactions.transcations-filter").offset().top},700),loadMoreInitSA()}})}),$(document).on("click touchstart",".close-button.spend-close",function(){$(".spend-analyser .transactions-detail").addClass("hide")}),$(document).on("click",".spend-analyser .toggle-tab-menu #sa-graph-view",function(){$("#sa-graph-detail").removeClass("hide"),$("#sa-grid-detail").addClass("hide-content")});var seachCounterSA=10;$(document).on("click",".spend-transaction .load-moreSA",function(e){e.preventDefault();var parentSA=$(this).parents();loadMoreSA(parentSA),isiOS?$("html, body").animate({scrollTop:$(document).offset()},"slow"):$("html, body").animate({scrollTop:$(document).height()},"slow")}),$('#reissue-replace-form input[type="submit"]').click(function(){$("#reissue-replace-form").submit(),$(this).attr("disabled",!0)}),$('#duplicate-stmnt-form input[type="submit"]').click(function(){$("#duplicate-stmnt-form").submit(),$(this).attr("disabled",!0)}),$('#international-usage input[type="submit"]').click(function(){$("#international-usage").submit(),$(this).attr("disabled",!0),$("#disclaimer-li #disclaimer").attr("disabled",!0)}),$("#report-stolen-form").length>0&&($("#report-stolen-form .sbiCardSubmit").attr("disabled",!0),$("#report-stolen-form .sbiCardSubmit").addClass("secondary").removeClass("primary"),$("#report-stolen-form .tataCardSubmit").attr("disabled",!0),$("#report-stolen-form .tataCardSubmit").addClass("secondary").removeClass("primary"),$(document).on("change","select#reportreissuereason",function(evt){evt.preventDefault();var $option=$(this.options[this.selectedIndex]),value=$option.val();"Select a reason"!=value?("block"==$(".not-reissue-card").css("display")?"Select a reason"!=$("select#reportandreissuereason").val()&&($("#report-stolen-form .sbiCardSubmit").attr("disabled",!1),$("#report-stolen-form .sbiCardSubmit").addClass("primary").removeClass("secondary")):($("#report-stolen-form .sbiCardSubmit").attr("disabled",!1),$("#report-stolen-form .sbiCardSubmit").addClass("primary").removeClass("secondary"),$("#report-stolen-form .tataCardSubmit").attr("disabled",!1),$("#report-stolen-form .tataCardSubmit").addClass("primary").removeClass("secondary")),$(".report-manage-section .rmv").removeClass("button-gray disabled")):($("#report-stolen-form .sbiCardSubmit").attr("disabled",!0),$("#report-stolen-form .sbiCardSubmit").addClass("secondary").removeClass("primary"),$("#report-stolen-form .tataCardSubmit").attr("disabled",!0),$("#report-stolen-form .tataCardSubmit").addClass("secondary").removeClass("primary"),$(".report-manage-section .rmv").addClass("button-gray disabled"))}),$(document).on("change","select#reportandreissuereason",function(evt){evt.preventDefault();var $option=$(this.options[this.selectedIndex]),value=$option.val();"Select a reason"!=value&&"Select a reason"!=$("select#reportreissuereason").val()?($("#report-stolen-form .sbiCardSubmit").attr("disabled",!1),$("#report-stolen-form .sbiCardSubmit").addClass("primary").removeClass("secondary")):($("#report-stolen-form .sbiCardSubmit").attr("disabled",!0),$("#report-stolen-form .sbiCardSubmit").addClass("secondary").removeClass("primary"))}),$(document).on("change","#cardToBlock",function(evt){evt.preventDefault()})),$("#reportandreissuereason").on("change",function(){"Select a reason"!=$("#reportandreissuereason").parent().find(".trigger").html()?$("#reportreissuereason").on("change",function(){"Select a reason"!=$("#reportreissuereason").parent().find(".trigger").html()?($("#report-stolen-form .sbiCardSubmit").attr("disabled",!1),$("#report-stolen-form .sbiCardSubmit").addClass("primary").removeClass("secondary")):($("#report-stolen-form .sbiCardSubmit").attr("disabled",!0),$("#report-stolen-form .sbiCardSubmit").addClass("secondary").removeClass("primary"))}):($("#report-stolen-form .sbiCardSubmit").attr("disabled",!0),$("#report-stolen-form .sbiCardSubmit").addClass("secondary").removeClass("primary"))}),$(".report-block-card").exists()&&$("#reportreissuereason").exists()&&($(".fancy-checkbox input.styled-checkbox").parent().addClass("checked"),$(".not-reissue-card").css("display","none"),$(".report-stlm .fancy-checkbox input.reissuecheck").click(function(){1==$(this).prop("checked")?($(".not-reissue-card").css("display","none"),$("#address-prompt").css("display","inline-block"),"Select a reason"!=$("#reportreissuereason").val()&&($("#report-stolen-form .sbiCardSubmit").attr("disabled",!1),$("#report-stolen-form .sbiCardSubmit").addClass("primary").removeClass("secondary"))):0==$(this).prop("checked")&&($(".not-reissue-card").css("display","block"),$("#address-prompt").css("display","none"),$("#report-stolen-form .sbiCardSubmit").attr("disabled",!0),$("#report-stolen-form .sbiCardSubmit").addClass("secondary").removeClass("primary"),$("#reportandreissuereason").siblings(".options").children().removeClass("selected"),$("#reportandreissuereason").siblings(".options").find("li:contains('Select a reason')").addClass("selected"))})),$('#report-stolen-form input[type="submit"]').click(function(){var loaderHtml='<div class="overlay-loader"></div>';$("body").append(loaderHtml),$("#report-stolen-form").submit(),$(this).attr("disabled",!0)}),$('#reissue-replace-form input[type="submit"]').click(function(){var loaderHtml='<div class="overlay-loader"></div>';$("body").append(loaderHtml),$("#reissue-replace-form").submit(),$(this).attr("disabled",!0)}),$('#otp-ivr-form input[type="submit"]').click(function(){$("#otp-ivr-form").submit(),$(this).attr("disabled",!0)}),$('#flexipay-confirm-form input[type="submit"]').click(function(){$("#flexipay-confirm-form").submit(),$(this).attr("disabled",!0),$("#term-condition-id").attr("disabled",!0)});{var offset=500,fadeInTime=500,fadeOutTime=500,scroll_top_duration=700;$(".cd-top")}if($(document).off("scroll").on("scroll",function(){$(document).scrollTop()>offset?$(".cd-top").fadeIn(fadeInTime):$(".cd-top").fadeOut(fadeOutTime)}),$(document).off("click touchstart",".cd-top").on("click touchstart",".cd-top",function(event){event.preventDefault(),navigator.userAgent.match(/IEMobile/i)?$("body,html,document").scrollTop(0):$("body,html").animate({scrollTop:0},scroll_top_duration)}),($("#encash-form").length>0||$("#emd-form").length>0)&&($(document).on("click","#encash-form input.bankNametxtBox, #emd-form input.bankNametxtBox",function(e){e.preventDefault(),$("#encashBankTooltip").hide(),$("#emdBankTooltip").hide()}),$(document).on("mouseover","#encash-form input.bankNametxtBox, #emd-form input.bankNametxtBox",function(){$("#encashBankTooltip").show(),$("#emdBankTooltip").show()})),$(".offers-container ul li .offer-summary-check").on("change",function(){var $currentStatus=$(this).attr("checked");"checked"==$currentStatus?($(this).removeAttr("checked"),$(this).parent("label").removeClass("checked"),$(".case").removeAttr("checked"),$(".case").parent("label").removeClass("checked"),$(".items-list.clearfix").find("div").removeClass("active")):($(this).parent("label").addClass("checked"),$(this).attr("checked","checked"),$(".case").attr("checked","checked"),$(".case").parent("label").addClass("checked"),$(".items-list.clearfix").find("div").addClass("active"))}),$(".offers-container .case").on("change",function(){var $isChecked=$(this).attr("checked");"checked"==$isChecked?($(this).removeAttr("checked"),$(this).parent("label").removeClass("checked")):($(this).attr("checked","checked"),$(this).parent("label").addClass("checked")),$(".case").length==$('input[checked="checked"].case').length?($(".offer-summary-check").attr("checked","checked"),$(".offer-summary-check").parent("label").addClass("checked"),$(".one").addClass("active")):($(".offer-summary-check").removeAttr("checked"),$(".offer-summary-check").parent("label").removeClass("checked"),$(".one").removeClass("active"))}),$("#bt-form #confirm-button").on("click",function(){$("#bt-form").find("#enter-otp-field").find(".error").exists()&&$("#bt-form").find("#enter-otp-field").find("label.valid").remove()}),$("#bt-form #otp").on("blur",function(){""==$("#bt-form #otp").val()?(console.log("Empty"),$("#bt-form").find("#enter-otp-field").find("label.valid").remove()):$("#bt-form").find("#enter-otp-field").find(".field-wrap input").hasClass("valid")?$("#bt-form").find("#enter-otp-field").find(".field-wrap").append('<label for="otp" class="valid"></label>'):$("#bt-form").find("#enter-otp-field").find(".field-wrap input").hasClass("error")&&$("#bt-form").find("#enter-otp-field").find("label.valid").remove()}),$(document).keydown(function(event){115==event.keyCode&&(event.preventDefault(),event.originalEvent.keyCode=0)}),$("#webform-l1-section #webform-subcategory-dissable").css("display","block"),$("#webform-l2-section #webform-writeToUs-dissable").css("display","block"),$(".webform-l1-dropbox .trigger").text("Select category"),$(".webform-l2-dropbox .trigger").text("Select category"),$(".expand-l1-container").css("display","none"),$(".expand-l2-container").css("display","none"),$("#webform-subcategory-enable").on("click",function(){$("#webform-l2-section").css("display","block"),$("#webform-l1-section").css("display","none"),$(".selected-l1").css("display","block"),$("#accordian-l1-tick").css("display","block"),$("#header-l1-span").css("display","none"),$(".expand-l1-container").css("display","block")}),$("#webform-writeToUs-enable").on("click",function(){$("#webform-l2-section").css("display","none"),$("#webform-l1-section").css("display","none"),$(".webform-reply-box").css("display","block"),$("#webform-write-section").css("display","block"),$(".webform-submit-compose").css("display","block"),$("#accordian-l2-tick").css("display","block"),$("#header-l2-span").css("display","none"),$(".expand-l2-container").css("display","block"),$(".selected-l2").css("display","block"),$("#selected-l1-l2").html($(".selected-l1").html()+" / "+$(".selected-l2").html()),$("#level1").val($(".selected-l1").html()),$("#level2").val($(".selected-l2").html()),$("#subject").val($(".selected-l1").html()+"/"+$(".selected-l2").html()),$(".webform-submit-compose").find("#AadhaarNote").html("Submit Your Aadhaar Details"==$("#webform-l2-section").find(".trigger").html()?"Attaching your Aadhar Card copy is optional.":"")}),$(".webform-attach-btn").on("click",function(){$("#webform-attach-file1").val()&&$("#webform-attach-file1").css("display","block"),$("#webform-attach-file2").val()&&$("#webform-attach-file2").css("display","block"),$("#webform-attach-file3").val()&&$("#webform-attach-file3").css("display","block")}),$("#level1-dropbox").on("change",function(){$(".webform-l2-dropbox .options").empty(),$("#level2-dropbox").empty(),$(".selected-l2").empty(),$("#selected-l1-l2").empty(),$("#webform-dynmic-formfield").empty(),$(".webform-dynamic-isMandate").hide(),$("#show-faq-span").hide(),$("#show-selfservice-span").hide(),setAnalyticsMailbox($(this).parent().find(".trigger").html()),$(".webform-l2-dropbox .trigger").text("Select category"),$(".selected-l1").html($(".webform-l1-dropbox .trigger").html()),$(".selectedl1-mobileview").html($(".webform-l1-dropbox .trigger").html()),$("#webform-l1-section #webform-subcategory-enable").css("pointer-events","none"),$("#webform-l1-section #webform-subcategory-enable .button.primary").css("background","#E0E0E0"),$("#webform-l2-section #webform-writeToUs-enable").css("pointer-events","none"),$("#webform-l2-section #webform-writeToUs-enable .button.primary").css("background","#E0E0E0");var loaderHtml='<div class="overlay-loader"></div>';$("body").append(loaderHtml);var href=$(this).attr("data-href"),selectedLevelId=$(this).find("option:selected").attr("level1-id"),isSelectedFAQ=$(this).find("option:selected").attr("isFAQ");$("#show-faq-span a").attr("href",isSelectedFAQ),$("#faq-button").attr("href",isSelectedFAQ),$.ajax({url:href,type:"POST",dataType:"json",data:{level1:selectedLevelId},overlayTarget:$(".main"),success:function(data){var options="",selectOptions="";$(".webform-l2-dropbox .options").empty();for(var i=0;i<data.length;i++)options+='<li data-id="'+data[i].l2CatId+'" isSelfService="'+data[i].l2SelfService+'" data-raw-value="'+data[i].l2SelfService+'">'+data[i].l2CatDesc+"</li>",selectOptions+='<option data-id="'+data[i].l2CatId+'" isSelfService="'+data[i].l2SelfService+'" data-raw-value="'+data[i].l2SelfService+'">'+data[i].l2CatDesc+"</option>";$(".webform-l2-dropbox .options").html(options),$(".webform-l2-dropbox #level2-dropbox").append(selectOptions),$(".webform-l2-dropbox .options").find("li:first-child").addClass("selected"),$("#level2-dropbox option:first-child").attr("selected","selected"),isSelectedFAQ?($("body").find("div.overlay-loader").remove(),$("#webform-l1-section #webform-subcategory-enable").css("pointer-events","none"),openModalPopup("webform-faq-popup"),$("#webform-faq-popup .modal").scrollTop(0),viewport.width<=1024&&($("#webform-faq-popup").css("margin-top","0px"),$("#webform-faq-popup .modal").css("margin-top","0px")),$("#webform-faq-popup").find(".modal-wrap").scrollTop(0),$("#webform-faq-popup #faq-close-button").on("click",function(e){e.preventDefault(),$(".modal-overlay").removeClass("open"),$("#show-faq-span").css("display","block"),$("#webform-l1-section #webform-subcategory-enable").css("pointer-events","auto"),$("#webform-l1-section #webform-subcategory-enable .button.primary").css("background","#0095d9")}),$("#webform-faq-popup #faq-button").on("click",function(e){e.preventDefault(),$("#faq-button").attr("href",isSelectedFAQ),$("#webform-l1-section #webform-subcategory-enable").css("pointer-events","auto"),$("#webform-l1-section #webform-subcategory-enable .button.primary").css("background","#0095d9")})):($("body").find("div.overlay-loader").remove(),$("#webform-l1-section #webform-subcategory-enable").css("pointer-events","auto"),$("#webform-l1-section #webform-subcategory-enable .button.primary").css("background","#0095d9"))},error:function(){}})}),$("#faq-button").on("click",function(event){event.preventDefault();$("#show-faq-span a").attr("href");$("#webform-faq-popup").removeClass("open"),$("#show-faq-span a")[0].click()}),$(".expand-l1-container").on("click",function(){$("#webform-l1-section").css("display","block"),$("#accordian-l1-tick").css("display","none"),$("#webform-l2-section").css("display","none"),$("#header-l1-span").css("display","block"),$("#level1").val(""),$("#level2").val(""),$("#selected-l1-l2").empty(),$("#show-faq-span").hide(),$(".webform-interaction-container .webform-l1-container:nth-child(3) .accordian-tick").hide(),$(".webform-interaction-container .webform-l1-container:nth-child(3) .webform-header-span").show(),$("#webform-write-section").css("display","none"),$(".webform-submit-compose").css("display","none"),$(".webform-file-container").find(".webform-file-error").remove(),$("#interactionText").removeClass("upload-error-webform"),$("#webform-upload-form")[0].reset(),3==$(".webform-file-container").find(".file-upload").length&&$(".webform-attach-btn").removeClass("dissableAttach"),$(".webform-file-container").find(".file-upload").remove()}),$(".expand-l2-container").on("click",function(){$("#webform-l2-section").css("display","block"),$("#accordian-l2-tick").css("display","none"),$("#webform-l1-section").css("display","none"),$("#header-l2-span").css("display","block"),$("#level2").val(""),$("#webform-write-section").css("display","none"),$(".webform-submit-compose").css("display","none")}),$("#level2-dropbox").on("change",function(e){e.stopImmediatePropagation();var loaderHtml='<div class="overlay-loader"></div>';$("body").append(loaderHtml),$("#selected-l1-l2").empty(),$("#webform-dynmic-formfield").empty(),$(".webform-dynamic-isMandate").hide(),$(".webform-reply-box #interactionText").removeClass("upload-error-webform"),$(".webform-file-container").find(".webform-file-error").remove(),$("#interactionText").removeClass("upload-error-webform"),$("#webform-upload-form")[0].reset(),3==$(".webform-file-container").find(".file-upload").length&&$(".webform-attach-btn").removeClass("dissableAttach"),$(".webform-file-container").find(".file-upload").remove(),$("#webform-l2-section .trigger").text($("#webform-l2-section .options .selected").html()),setAnalyticsMailbox($(this).parent().find(".trigger").html()),$(".selected-l2").html($("#webform-l2-section .trigger").html()),$(".selectedl2-mobileview").html($("#webform-l2-section .trigger").html()),$("#webform-l2-section #webform-writeToUs-enable").css("pointer-events","none"),$("#webform-l2-section #webform-writeToUs-enable .button.primary").css("background","#E0E0E0");var isSelfService=$("#webform-l2-section .options .selected").attr("isselfservice");$("#show-selfservice-span a").attr("onclick","submitForm('"+isSelfService+"',true)"),$("#selfservice-span a").attr("onclick","submitForm('"+isSelfService+"',true);setAnalyticsMailbox('Do it yourself')"),$("#self-service-button").attr("onclick","submitForm('"+isSelfService+"',true);setAnalyticsMailbox('Do it yourself')"),isSelfService?($("#webform-l2-section #webform-writeToUs-enable").css("pointer-events","none"),$("#webform-l2-section #webform-writeToUs-enable .button.primary").css("background","#E0E0E0"),openModalPopup("webform-self-service-popup"),$("#webform-self-service-popup .modal").scrollTop(0),viewport.width<=1024&&($("#webform-self-service-popup").css("margin-top","0px"),$("#webform-self-service-popup .modal").css("margin-top","0px")),$("#webform-self-service-popup").find(".modal-wrap").scrollTop(0),$("#webform-self-service-popup #self-service-close-button").on("click",function(e){e.preventDefault(),$(".modal-overlay").removeClass("open"),$("#show-selfservice-span").css("display","block"),$("#webform-l2-section #webform-writeToUs-enable").css("pointer-events","auto"),$("#webform-l2-section #webform-writeToUs-enable .button.primary").css("background","#0095d9")
}),$("#webform-self-service-popup #self-service-faq-button").on("click",function(e){e.preventDefault(),$(".modal-overlay").removeClass("open"),$("#webform-l2-section #webform-writeToUs-enable").css("pointer-events","auto"),$("#webform-l2-section #webform-writeToUs-enable .button.primary").css("background","#0095d9")})):($("#show-selfservice-span").hide(),$("#selfservice-span").hide(),$("#webform-l2-section #webform-writeToUs-enable").css("pointer-events","auto"),$("#webform-l2-section #webform-writeToUs-enable .button.primary").css("background","#0095d9"));var level2Val=$(this).parent().find(".options").find(".selected").attr("data-id");$.ajax({url:"/creditcards/app/webform/WebformComposePageFields",type:"POST",dataType:"json",data:{level2:level2Val},overlayTarget:$(".main"),success:function(data){$("body").find("div.overlay-loader").remove(),$("#selected-l1-l2").html($(".selected-l1").html()+" / "+$(".selected-l2").html());var addDynamicField="",optionalFieldCount=0;if(""==data||null==data)$(".webform-dynamic-isMandate").css("display","none"),$(".webform-reply-container .webform-interaction-text").css({"margin-left":"14px",width:"96%"}),$(".webform-reply-container .webform-file-container").css({width:"98%","margin-left":"0%"}),$(".webform-file-container .composeAttachBtn").css("margin-left","14px"),$("#webform-write-section").find(".webform-reply-box").find("#interactionText").attr("placeholder","Please explain your query/complaint in detail");else{viewport.width<768?($(".webform-reply-container .webform-interaction-text").css({width:"89%","margin-left":"0"}),$(".webform-upload-form .webform-file-container").css({"margin-left":"0",width:"90%"}),$(".webform-upload-form .webform-file-container .upload-block-1, .webform-upload-form .webform-file-container .upload-block-2, .webform-upload-form .webform-file-container .upload-block-3").css({width:"88%",margin:"0 0 2%"}),$(".webform-file-container .composeAttachBtn").css("margin-left","0%")):($(".webform-dynamic-isMandate").css("display","block"),$(".webform-reply-container .webform-interaction-text").css({"margin-left":"15%",width:"80.5%"}),$(".webform-reply-container .webform-file-container").css({width:"82%","margin-left":"12%"}),$(".webform-file-container .composeAttachBtn").css("margin-left","4%"));for(var i=0;i<data.length;i++){if(addDynamicField="","FreeText"==data[i].fieldControl)addDynamicField+='<div id="'+data[i].fieldId+'" class="webform-reply-fieldBox">					          				<label class="webform-dynamic-fieldLabel">'+data[i].fieldLabel+'</label>					          				<div class="field-wrap"><input type="text" isMandate="'+data[i].fieldMandatoryFlag+'" maxlength="'+data[i].fieldDataWidth+'" webformErrorMsg="'+data[i].fieldErrorMsg+'" class="webform-dynamic-fieldInput"/>					          				</div>          								</div>';else if("OnlyText"==data[i].fieldControl)addDynamicField+='<div id="'+data[i].fieldId+'" class="webform-reply-fieldBox">					          				<label class="webform-dynamic-fieldLabel">'+data[i].fieldLabel+'</label>					          				<div class="field-wrap"><input type="text" isMandate="'+data[i].fieldMandatoryFlag+'" maxlength="'+data[i].fieldDataWidth+'" webformErrorMsg="'+data[i].fieldErrorMsg+'" class="webform-dynamic-fieldInput onlyAlphaField"/>					          				</div>          								</div>';else if("FixNumeric"==data[i].fieldControl)addDynamicField+='<div id="'+data[i].fieldId+'" class="webform-reply-fieldBox">          								<label class="webform-dynamic-fieldLabel">'+data[i].fieldLabel+'</label>          								<div class="field-wrap"><input type="number" isMandate="'+data[i].fieldMandatoryFlag+'" oninput="javascript: if (this.value.length > this.maxLength) this.value = this.value.slice(0, this.maxLength);" maxlength="'+data[i].fieldDataWidth+'" webformErrorMsg="'+data[i].fieldErrorMsg+'" class="only-numeric webform-dynamic-fieldInput fixLengthNumeric">          							 </div>';else if("CheckBox"==data[i].fieldControl)addDynamicField+='<div id="'+data[i].fieldId+'" class="webform-reply-fieldBox webform-dynamic-checkboxField">    				<label class="fancy-checkbox">    				<input type="checkbox" isMandate="'+data[i].fieldMandatoryFlag+'" webformErrorMsg="'+data[i].fieldErrorMsg+'" class="webform-dynamic-fieldInput webform-dynamic-checkbox">    			 <span class="check-toggle"></span></label><span class="checkboxLabelText">'+data[i].fieldLabel+"</span></div>";else if("Label"==data[i].fieldControl)addDynamicField+='<div id="'+data[i].fieldId+'" class="webform-dynamic-attachLabel">          								<span>'+data[i].fieldLabel+"</span>          								</div>";else if("Numeric"==data[i].fieldControl)addDynamicField+='<div id="'+data[i].fieldId+'" class="webform-reply-fieldBox">          								<label class="webform-dynamic-fieldLabel">'+data[i].fieldLabel+'</label>          								<div class="field-wrap"><input type="number" isMandate="'+data[i].fieldMandatoryFlag+'" oninput="javascript: if (this.value.length > this.maxLength) this.value = this.value.slice(0, this.maxLength);" maxlength="'+data[i].fieldDataWidth+'" webformErrorMsg="'+data[i].fieldErrorMsg+'" class="only-numeric webform-dynamic-fieldInput">          							 </div>';else if("Calendar"==data[i].fieldControl)addDynamicField+='<div id="'+data[i].fieldId+'" class="webform-reply-fieldBox">          									<div class="datepicker">				          				<label class="webform-dynamic-fieldLabel">'+data[i].fieldLabel+'</label>				          				<div class="field-wrap"><input type="text" isMandate="'+data[i].fieldMandatoryFlag+'" webformErrorMsg="'+data[i].fieldErrorMsg+'" class="date-field webform-dynamic-fieldInput webform-dynamic-datepicker" readonly/>				          				</div></div>									  </div>';else if("Amount"==data[i].fieldControl)addDynamicField+='<div id="'+data[i].fieldId+'" class="webform-reply-fieldBox">						<label class="webform-dynamic-fieldLabel">'+data[i].fieldLabel+'</label>							<div class="field-wrap"><input type="text" isMandate="'+data[i].fieldMandatoryFlag+'" maxlength="'+data[i].fieldDataWidth+'" class="proactiveAmountField webform-dynamic-fieldInput" onKeyPress="return validateProactiveAmountField(this,event);">					 </div>';else if("DropDown"==data[i].fieldControl){var selectOptions="",addDynamicDropdown="";addDynamicDropdown+='<div id="'+data[i].fieldId+'" class="webform-reply-fieldBox">				          				<label class="webform-dynamic-fieldLabel">'+data[i].fieldLabel+'</label>				          				<div class="field-wrap webform-reply-dropbox content-inlineBlock">          									<div class="fancy-select-wrap">          										<select class="fancy dynamic-reply-dropbox"></select>          									</div>          								</div>          								</div>';for(var j=0;j<data[i].fieldControlValue.length;j++)selectOptions+="<option>"+data[i].fieldControlValue[j]+"</option>";$("#webform-dynmic-formfield").append(addDynamicDropdown),$(".dynamic-reply-dropbox").append(selectOptions),$(".dynamic-reply-dropbox").fancySelect()}if($("#webform-dynmic-formfield").append(addDynamicField),$(".date-field.webform-dynamic-fieldInput.webform-dynamic-datepicker.hasDatepicker").datepicker("option","maxDate","0"),$("input.date-field").exists()&&($("input.date-field").attr("type","text").datepicker({dateFormat:"dd-M-yy",changeMonth:!0,changeYear:!0,yearRange:"-100Y:"+(new Date).getFullYear(),onSelect:function(){var validator=$(this).closest("form").validate();validator.element($(this))}}),$(".date-field.webform-dynamic-fieldInput.webform-dynamic-datepicker.hasDatepicker").datepicker("option","maxDate","0")),(void 0!=data[i].fieldToolTip||null!=data[i].fieldToolTip)&&callDynamicTooltip(data[i].fieldToolTip,data[i].fieldId),"Y"!=data[i].fieldMandatoryFlag&&"Calendar"!=data[i].fieldControl){var id="#"+data[i].fieldId;$(id).find(".webform-dynamic-fieldInput").attr("placeholder","(Optional)"),$(id).find(".webform-dynamic-fieldInput").css("text-align","right"),optionalFieldCount++}else if("Y"!=data[i].fieldMandatoryFlag&&"Calendar"==data[i].fieldControl){var id="#"+data[i].fieldId;$(id).find(".webform-dynamic-fieldInput").attr("placeholder","(Optional)"),$(id).find(".webform-dynamic-fieldInput").css("text-align","left")}$(".webform-dynamic-fieldInput").on("focus",function(){$(this).css("text-align","left"),$(this).attr("placeholder","")}),$(".webform-dynamic-fieldInput").on("blur",function(){"Y"!=$(this).attr("ismandate")&&"date-field webform-dynamic-fieldInput webform-dynamic-datepicker hasDatepicker"!=$(this).attr("class")?""==$(this).val()&&($(this).attr("placeholder","(Optional)"),$(this).css("text-align","right")):"Y"!=$(this).attr("ismandate")&&"date-field webform-dynamic-fieldInput webform-dynamic-datepicker hasDatepicker"==$(this).attr("class")&&""==$(this).val()&&($(this).attr("placeholder","(Optional)"),$(this).css("text-align","left"))}),$("#webform-dynmic-formfield .webform-reply-fieldBox").find("input").each(function(){var className=$(this).attr("class"),mobile2=$(window).outerWidth()<768?!0:!1;if(mobile2){var classNameCHK=className.includes("only-numeric"),classNameAmnt=className.includes("proactiveAmountField"),classNameOnlyAlpha=className.includes("onlyAlphaField");classNameCHK&&($(this).attr("type","text"),$(this).attr("oninput","this.value=this.value.replace(/[^0-9]/g,'')")),classNameAmnt&&$(".proactiveAmountField.webform-dynamic-fieldInput").on("input",function(){var val=$(this).val();$(this).val(val.trim());var reg=/\d+\.{1}\d{3,}/;1==reg.test(val)&&$(this).val(val.slice(0,-1)),1==isNaN(val)&&$(this).val(val.slice(0,-1))}),classNameOnlyAlpha&&($(this).attr("type","text"),$(this).attr("oninput","this.value=this.value.replace(/[^a-zA-Z ]/g,'')"))}$(".onlyAlphaField.webform-dynamic-fieldInput").keydown(function(e){if(e.ctrlKey||e.altKey)e.preventDefault();else{var key=e.keyCode?e.keyCode:e.which;(key>=33&&36>=key||38==key||key>=40&&45>=key||key>=47&&64>=key||key>=186&&222>=key||key>=96&&111>=key)&&e.preventDefault()}})})}$(".webform-dynamic-checkboxField .webform-dynamic-checkbox").on("click",function(){$(this).siblings(".errorTxt").remove(),$(this).siblings().css("outline","none")}),optionalFieldCount==$(".webform-dynamic-fieldInput").length?$("#webform-write-section").find(".webform-reply-box").find("#interactionText").attr("placeholder","Please explain your query/complaint in detail"):$("#webform-write-section").find(".webform-reply-box").find("#interactionText").attr("placeholder","If you have any further comments you would like to add")}},error:function(xhr,status,error){console.log("Error webform=="+status+"=="+error)}})}),$("#level2-dropbox").on("keyup",function(){$("#webform-l2-section .trigger").html($("#webform-l2-section .options .selected").html())}),$("#webform-self-service-popup #self-service-button").on("click",function(e){e.preventDefault();var loaderHtml='<div class="overlay-loader"></div>';$("body").append(loaderHtml),$(".overlay-loader").css("z-index","999999")}),$("#webform-writeToUs-enable").on("click",function(){$(".webform-l2-dropbox").find(".options .selected").attr("isselfservice")?$("#selfservice-span").show():$("#selfservice-span").hide()}),$(".composeAttachBtn").click(function(){callAttachFile()}),$(".replyAttachBtn").on("click",function(){callAttachFile()}),$(".webform-file-container").on("click",".removeAttachFile",function(){$(".file-upload").length+1;$(this).closest(".file-upload").next(".webform-file-error").css("display","none"),$(this).closest(".file-upload").next(".webform-file-error").css("visibility","hidden").find(".webform-fileSize-error").css("display","none").siblings(".webform-format-error").css("display","none"),$(this).closest(".file-upload").remove(),$(".webform-attach-btn").removeClass("dissableAttach"),$(".icon.tooltip.webformtooltip").css("display","block");var maxFileSize=parseInt($("#webform-max-file-size").val()),$ele=$("#webform-upload-form");isFileUploadAcceptable($ele,maxFileSize)?ResetWebformFileSizeError():($(".webform-file-container").find(".file-size-error-webform-remove").addClass("file-size-error-webform").removeClass("file-size-error-webform-remove"),$(".webform-file-container").find(".file-size-error-webform").next(".webform-file-error").css("visibility","visible").find(".webform-fileSize-error").css("display","block").siblings(".webform-format-error").css("display","none"),$(this).closest(".file-upload").next(".webform-file-error").css("display","block"))}),$(".webform-file-container").on("change",".webform-file-field",function(){$(".webform-attach-btn").css("background","#0095d9;")}),$(".webform-file-container").on("change","input#webformfield1",function(){var fileValue=$(this).val();$(".upload-block-1 .webform-file-name").val(fileValue),$("#attach-file1").val(fileValue),$(this).closest(".upload-block-1").removeClass("upload-error-webform"),$(this).closest(".upload-block-1").next(".webform-file-error").css("visibility","hidden").find(".webform-fileSize-error").css("display","none").siblings(".webform-format-error").css("display","none");var filename=$("input[id^=webformfield1]").val().split("\\").pop(),filelength=filename.split(".").length;if(filelength>2)$(this).closest(".upload-block-1").addClass("upload-error-webform"),$(".upload-block-1 .webform-file-name").val(""),$(this).closest(".upload-block-1").next(".webform-file-error").css("visibility","visible").find(".webform-fileSize-error").css("display","none").siblings(".webform-format-error").css("display","block"),$(this).closest(".upload-block-1").next(".webform-file-error").css("display","block");else if(this.files[0].size<1e3)$("#webformfield1").closest(".upload-block-1").addClass("upload-error-webform"),$(".upload-block-1 .webform-file-name").val(""),$(this).closest(".upload-block-1").next(".webform-file-error").css("visibility","visible").find(".webform-fileSize-error").css("display","block").siblings(".webform-format-error").css("display","none"),$(this).closest(".upload-block-1").next(".webform-file-error").css("display","block");else if(-1==$.inArray($(this).val().split(".").pop().toLowerCase(),webformAcceptableFileFormats))$(this).closest(".upload-block-1").addClass("upload-error-webform"),$(".upload-block-1 .webform-file-name").val(""),$(this).closest(".upload-block-1").next(".webform-file-error").css("visibility","visible").find(".webform-fileSize-error").css("display","none").siblings(".webform-format-error").css("display","block"),$(this).closest(".upload-block-1").next(".webform-file-error").css("display","block");else{var maxFileSize=parseInt($("#webform-max-file-size").val()),$ele=$(this).closest("form");isFileUploadAcceptable($ele,maxFileSize)||(ResetWebformFileSizeError(),$(this).closest(".upload-block-1").addClass("file-size-error-webform"),$(this).closest(".upload-block-1").next(".webform-file-error").css("visibility","visible").find(".webform-fileSize-error").css("display","block").siblings(".webform-format-error").css("display","none"),$(this).closest(".upload-block-1").next(".webform-file-error").css("display","block"))}}),$(".webform-file-container").on("change","input#webformfield2",function(){var fileValue=$(this).val();$(".upload-block-2 .webform-file-name").val(fileValue),$("#attach_file2").val(fileValue),$(this).closest(".upload-block-2").removeClass("upload-error-webform"),$(this).closest(".upload-block-2").next(".webform-file-error").css("visibility","hidden").find(".webform-fileSize-error").css("display","none").siblings(".webform-format-error").css("display","none");var filename=$("input[id^=webformfield2]").val().split("\\").pop(),filelength=filename.split(".").length;if(filelength>2)$("#webformfield2").closest(".upload-block-2").addClass("upload-error-webform"),$(".upload-block-2 .webform-file-name").val(""),$(this).closest(".upload-block-2").next(".webform-file-error").css("visibility","visible").find(".webform-fileSize-error").css("display","none").siblings(".webform-format-error").css("display","block"),$(this).closest(".upload-block-2").next(".webform-file-error").css("display","block");else if(this.files[0].size<1e3)$("#webformfield2").closest(".upload-block-2").addClass("upload-error-webform"),$(".upload-block-2 .webform-file-name").val(""),$(this).closest(".upload-block-2").next(".webform-file-error").css("visibility","visible").find(".webform-fileSize-error").css("display","block").siblings(".webform-format-error").css("display","none"),$(this).closest(".upload-block-2").next(".webform-file-error").css("display","block");else if(-1==$.inArray($(this).val().split(".").pop().toLowerCase(),webformAcceptableFileFormats))$("#webformfield2").closest(".upload-block-2").addClass("upload-error-webform"),$(".upload-block-2 .webform-file-name").val(""),$(this).closest(".upload-block-2").next(".webform-file-error").css("visibility","visible").find(".webform-fileSize-error").css("display","none").siblings(".webform-format-error").css("display","block"),$(this).closest(".upload-block-2").next(".webform-file-error").css("display","block");else{var maxFileSize=parseInt($("#webform-max-file-size").val()),$ele=$(this).closest("form");isFileUploadAcceptable($ele,maxFileSize)||(ResetWebformFileSizeError(),$("#webformfield2").closest(".upload-block-2").addClass("file-size-error-webform"),$(this).closest(".upload-block-2").next(".webform-file-error").css("visibility","visible").find(".webform-fileSize-error").css("display","block").siblings(".webform-format-error").css("display","none"),$(this).closest(".upload-block-2").next(".webform-file-error").css("display","block"))}}),$(".webform-file-container").on("change","input#webformfield3",function(){var fileValue=$(this).val();$(".upload-block-3 .webform-file-name").val(fileValue),$("#attach_file3").val(fileValue),$(this).closest(".upload-block-3").removeClass("upload-error-webform"),$(this).closest(".upload-block-3").next(".webform-file-error").css("visibility","hidden").find(".webform-fileSize-error").css("display","none").siblings(".webform-format-error").css("display","none");var filename=$("input[id^=webformfield3]").val().split("\\").pop(),filelength=filename.split(".").length;if(filelength>2)$(this).closest(".upload-block-3").addClass("upload-error-webform"),$(".upload-block-3 .webform-file-name").val(""),$(this).closest(".upload-block-3").next(".webform-file-error").css("visibility","visible").find(".webform-fileSize-error").css("display","none").siblings(".webform-format-error").css("display","block"),$(this).closest(".upload-block-3").next(".webform-file-error").css("display","block");else if(this.files[0].size<1e3)$("#webformfield3").closest(".upload-block-3").addClass("upload-error-webform"),$(".upload-block-3 .webform-file-name").val(""),$(this).closest(".upload-block-3").next(".webform-file-error").css("visibility","visible").find(".webform-fileSize-error").css("display","block").siblings(".webform-format-error").css("display","none"),$(this).closest(".upload-block-3").next(".webform-file-error").css("display","block");else if(-1==$.inArray($(this).val().split(".").pop().toLowerCase(),webformAcceptableFileFormats)||filelength>2)$(this).closest(".upload-block-3").addClass("upload-error-webform"),$(".upload-block-3 .webform-file-name").val(""),$(this).closest(".upload-block-3").next(".webform-file-error").css("visibility","visible").find(".webform-fileSize-error").css("display","none").siblings(".webform-format-error").css("display","block"),$(this).closest(".upload-block-3").next(".webform-file-error").css("display","block");else{var maxFileSize=parseInt($("#webform-max-file-size").val()),$ele=$(this).closest("form");isFileUploadAcceptable($ele,maxFileSize)||(ResetWebformFileSizeError(),$(this).closest(".upload-block-3").addClass("file-size-error-webform"),$(this).closest(".upload-block-3").next(".webform-file-error").css("visibility","visible").find(".webform-fileSize-error").css("display","block").siblings(".webform-format-error").css("display","none"),$(this).closest(".upload-block-3").next(".webform-file-error").css("display","block"))}}),$("#advance-block-enable").on("click",function(){$(".advance-search-block").css("display","block");var level1=$('input[name="level1"]').val(),level2=$('input[name="level2"]').val(),escalationLevel=$('input[name="escalationLevel"]').val(),escalationLevelText=$("#inbox-escalation-dropbox option").eq(escalationLevel).text();if(level1&&level2&&escalationLevel){$(".inbox-level1-block").find("ul li").removeClass("selected"),$(".inbox-escalation-block").find("ul li").removeClass("selected"),$("#inbox-level1-dropbox").parent().find(".trigger").html(level1),$(".inbox-level1-block .options li:contains("+level1+")").addClass("selected");var href=$("#inbox-level1-dropbox").attr("data-href"),selectedLevelId=$("#inbox-level1-dropbox option:contains("+level1+")").attr("level1-id");$.ajax({url:href,type:"POST",dataType:"json",data:{level1:selectedLevelId},success:function(data){for(var options="",i=0;i<data.length;i++)options+='<li data-id="'+data[i].l2CatId+'">'+data[i].l2CatDesc+"</li>";$(".inbox-level2-block .options").append(options),$(".inbox-level2-block .options li:contains("+level2+")").addClass("selected")},error:function(){}}),$(".inbox-level2-block").find("ul li").removeClass("selected"),$("#inbox-level2-dropbox").parent().find(".trigger").html(level2),$(".inbox-escalation-dropbox").find("ul li").removeClass("selected"),$("#inbox-escalation-dropbox").parent().find(".trigger").html(escalationLevelText),$(".inbox-escalation-block .options li:contains("+escalationLevelText+")").addClass("selected")}else if(level1&&level2){$(".inbox-level1-block").find("ul li").removeClass("selected"),$("#inbox-level1-dropbox").parent().find(".trigger").html(level1),$(".inbox-level1-block .options li:contains("+level1+")").addClass("selected");var href=$("#inbox-level1-dropbox").attr("data-href"),selectedLevelId=$("#inbox-level1-dropbox option:contains("+level1+")").attr("level1-id");$.ajax({url:href,type:"POST",dataType:"json",data:{level1:selectedLevelId},success:function(data){for(var options="",i=0;i<data.length;i++)options+='<li data-id="'+data[i].l2CatId+'">'+data[i].l2CatDesc+"</li>";$(".inbox-level2-block .options").append(options),$(".inbox-level2-block .options li:contains("+level2+")").addClass("selected")},error:function(){}}),$(".inbox-level2-block").find("ul li").removeClass("selected"),$("#inbox-level2-dropbox").parent().find(".trigger").html(level2)}else if(level1&&escalationLevel){$(".inbox-level1-block").find("ul li").removeClass("selected"),$(".inbox-escalation-block").find("ul li").removeClass("selected"),$("#inbox-level1-dropbox").parent().find(".trigger").html(level1),$(".inbox-level1-block .options li:contains("+level1+")").addClass("selected");var href=$("#inbox-level1-dropbox").attr("data-href"),selectedLevelId=$("#inbox-level1-dropbox option:contains("+level1+")").attr("level1-id");$.ajax({url:href,type:"POST",dataType:"json",data:{level1:selectedLevelId},success:function(data){for(var options="",i=0;i<data.length;i++)options+='<li data-id="'+data[i].l2CatId+'">'+data[i].l2CatDesc+"</li>";$(".inbox-level2-block .options").append(options)},error:function(){}}),$(".inbox-escalation-dropbox").find("ul li").removeClass("selected"),$("#inbox-escalation-dropbox").parent().find(".trigger").html(escalationLevelText),$(".inbox-escalation-block .options li:contains("+escalationLevelText+")").addClass("selected")}else if(level1){$(".inbox-level1-block").find("ul li").removeClass("selected"),$("#inbox-level1-dropbox").parent().find(".trigger").html(level1),$(".inbox-level1-block .options li:contains("+level1+")").addClass("selected");var href=$("#inbox-level1-dropbox").attr("data-href"),selectedLevelId=$("#inbox-level1-dropbox option:contains("+level1+")").attr("level1-id");$.ajax({url:href,type:"POST",dataType:"json",data:{level1:selectedLevelId},success:function(data){for(var options="",i=0;i<data.length;i++)options+='<li data-id="'+data[i].l2CatId+'">'+data[i].l2CatDesc+"</li>";$(".inbox-level2-block .options").append(options)},error:function(){}})}else escalationLevel&&($(".inbox-escalation-block").find("ul li").removeClass("selected"),$("#inbox-escalation-dropbox").parent().find(".trigger").html(escalationLevelText),$(".inbox-escalation-block .options li:contains("+escalationLevelText+")").addClass("selected"))}),$("#webform-inbox-search .go-search-inbox-list").on("click",function(){$("#webform-inbox-search .go-search-inbox-list").css("pointer-events","none");var loaderHtml='<div class="overlay-loader"></div>';$("body").append(loaderHtml)}),$("#webform-advanceBlock-search .advance-submit-btn").on("click",function(){var loaderHtml='<div class="overlay-loader"></div>';$("body").append(loaderHtml)}),$(".close-advance-block").on("click",function(){$(".advance-search-block").css("display","none")}),$(".webform-interaction-reply").exists()){$(".interaction-container").each(function(){"N"==$(this).attr("readflag")&&($(this).find(".interaction-content").css("font-weight","700"),$(this).find(".interaction-date").css("font-weight","700"),$(this).find(".attach-name").css("font-weight","700"))}),$('li[data-val="Inbox"]').addClass("active").closest("ul").closest("li").addClass("active");var tmailBox,interaction="",interactionDetailsJson=$("#interactionDetailsJSON").data("json"),jsonLength=interactionDetailsJson.length,interactionId=$("#interactionId").text().trim(),interactionDetailsJson=$("#interactionDetailsJSON").data("json");$.each(interactionDetailsJson,function(key,data){if(interactionId==data.interactionId&&(tmailBox=data.mailBox),$("#reply-mailBox").html($("#mailBoxId_id_for_escalation").val()),$("#webform-upload-form").find('input:hidden[name="mailBox"]').val($("#mailBox_id_for_escalation").val()),10>key&&null!=data&&!$.isEmptyObject(data)){if(interaction=1>key?"<article class='interaction-container expanded' id='"+data.interactionId+"' readFlag='"+data.markAsRead+"' data-index='"+key+"'>":"<article class='interaction-container' id='"+data.interactionId+"' readFlag='"+data.markAsRead+"' data-index='"+key+"'>",interaction+="<div class='interaction-header'>							<div class='customerName'><span>From : </span>"+data.fromAddress+"</div>							<div class='interaction-date'>"+data.interactionTimeToRespond+"<span></span></div>							</div>							<div class='interaction-content'  >"+data.interactionText+"</div>							<a href='javascript:void(0);' class='show-more-link'>Show More</a>",null!=data.attachment&&void 0!=data.attachment&&""!=data.attachment)for(i=0;i<data.attachment.length;i++)(null!=data.attachment[i].fileName||void 0!=data.attachment[i].fileName)&&(interaction+="<div class='attachment-container' data-id='"+data.attachment[i].attachmentId+"'>									<span class='attach-name' data-fname='"+data.attachment[i].fileName+"' data-ext='"+data.attachment[i].fileExtension+"'>"+data.attachment[i].fileName+"."+data.attachment[i].fileExtension+"</span>									<a href='javascript:void(0);' target='_blank' class='attach-icon'></a>									</div>");interaction+="</article>"}$(".webform-interaction-details").append(interaction),interaction="",$("#interactionId").text().trim()==data.interactionId&&($(":input[name=level1]").val(data.level1),$(":input[name=level2]").val(data.level2))}),10>=jsonLength?$(".load-more-list").hide():$(".load-more-list").show(),$(".attachment-container").on("click",".attach-icon",function(){{var attachment=$(this).closest(".attachment-container").data("id"),fileExt=$(this).siblings(".attach-name").data("ext"),fName=$(this).siblings(".attach-name").data("fname");$(':input[name="synchronizerToken"]').val()}$(this).prop("href","/creditcards/app/webform/downloadEmailAttachmentWebForm?attachmentId="+attachment+"&fileName="+fName+"&fileExtension="+fileExt)}),$(".webform-interaction-details").find(".interaction-container.expanded").each(function(){if(!$(this).hasClass("show-more")){var height=($(this).find(".interaction-content"),$(this).find(".interaction-content").height());height>112?$(this).find(".show-more-link").show():$(this).find(".show-more-link").hide()}}),$(".webform-interaction-details").find(".interaction-container").each(function(){}),$(".interaction-header").on("click",function(e){var latestDiv=$(this).parent().attr("id");if($(this).closest(".interaction-container").hasClass("expanded"))$(this).closest(".interaction-container").removeClass("expanded show-more");else{$(this).closest(".interaction-container").addClass("expanded");var cntnr=$("#"+latestDiv).find(".interaction-content"),height=cntnr.height();if(height>112?$(this).parent().find(".show-more-link").show():$(this).parent().find(".show-more-link").hide(),"N"==$(this).closest(".interaction-container").attr("readflag")){var interactionId=$(this).closest(".interaction-container").attr("id");callMarkAsRead(interactionId)}}var interactionId=$(this).closest(".interaction-container").attr("id");e.stopImmediatePropagation()}),$(".webform-interaction-details").on("click",".interaction-container",function(){if($(this).hasClass("expanded")&&$(this).addClass("expanded"),"N"==$(this).closest(".interaction-container").attr("readflag")){var interactionId=$(this).closest(".interaction-container").attr("id");callMarkAsRead(interactionId)}}),$(".interaction-container").on("click",".show-more-link",function(){$(this).closest(".interaction-container").addClass("expanded show-more")}),$(".interaction-reply").on("click",function(){$(this).hide(),$(".reply-interaction-block").css("display","block"),$(".webform-interaction-container .clickWebformReplyBlock").css("display","none"),$("html, body").animate({scrollTop:$("#interactionText").position().top})}),$(".webform-interaction-reply").find(".discard-btn").on("click",function(){$(".interaction-reply").show(),$(".clickWebformReplyBlock").show(),$(".reply-interaction-block").css("display","none"),$("html, body").animate({scrollTop:$("#interactionId").position().top}),$(".webform-file-container").find(".file-upload").remove(),$(".reply-block-content").val(""),$(".composeAttachBtn").removeClass("dissableAttach"),$(".webform-file-container").find(".webform-file-error").remove()}),$(".clickWebformReplyBlock h3 u").on("click",function(){$(".clickWebformReplyBlock").hide(),$(".reply-interaction-block").show()}),"Y"==$("#replyEscalateStatusFlag").val()?($(".webform-reply-title").find(".button-wrap.interaction-btns").hide(),$(".clickWebformReplyBlock").hide()):"N"==$("#replyEscalateStatusFlag").val()&&($(".webform-reply-title").find(".button-wrap.interaction-btns").show(),$(".clickWebformReplyBlock").show())}if($(".inbox-level1-block .trigger").text("Select Category"),$(".inbox-level2-block .trigger").html("Select Sub-category"),$(".inbox-escalation-block .trigger").html("Select Escalation Level"),$(".webform-inbox-search-header").exists()&&($("#webform-inbox-search input#fromDate").datepicker("option",{minDate:"-2Y",maxDate:"0"}),$("#webform-inbox-search input#toDate").datepicker("option",{minDate:"-2Y",maxDate:"0"})),$("#webform-inbox-search #fromDate").datepicker("option","onSelect",function(dataText){var selectedDate=dataText;$("#webform-inbox-search input#toDate").datepicker("option","minDate",selectedDate)}),$("#webform-inbox-search #toDate").datepicker("option","onSelect",function(dataText){var selectedDate=dataText;$("#webform-inbox-search input#fromDate").datepicker("option","maxDate",selectedDate)}),$("#inbox-level1-dropbox").on("change",function(){$(".advance-box2-col2 .options").empty(),$("#inbox-level2-dropbox option").remove(),$(".inbox-level2-block .trigger").html("Select Sub-category");var href=$(this).attr("data-href"),selectedLevelId=$(this).find("option:selected").attr("level1-id"),selectedLevelDesc=$(this).find("option:selected").text().trim();$("input:hidden[name='level1']").val(selectedLevelDesc),$.ajax({url:href,type:"POST",dataType:"json",data:{level1:selectedLevelId},beforeSend:function(){var loaderHtml='<div class="overlay-loader"></div>';$("body").append(loaderHtml),$("#card-type").removeAttr("class")},complete:function(){$("body").find("div.overlay-loader").remove()},success:function(data){for(var options="",selectOptions="",i=0;i<data.length;i++)console.log("in lopp for L2 - id:"+data[i].l2CatId),options+='<li data-id="'+data[i].l2CatId+'">'+data[i].l2CatDesc+"</li>",selectOptions+='<option data-id="'+data[i].l2CatId+'" isSelfService="'+data[i].l2SelfService+'" data-raw-value="'+data[i].l2SelfService+'">'+data[i].l2CatDesc+"</option>";
$(".inbox-level2-block .options").append(options),$(".inbox-level2-block #inbox-level2-dropbox").append(selectOptions)},error:function(){}})}),$("#inbox-level2-dropbox").on("change",function(){var selectedLevelDesc=$(this).closest(".fancy-select").find("li.selected").text().trim();$("input:hidden[name='level2']").val(selectedLevelDesc),$(".inbox-level2-block .trigger").html($(".inbox-level2-block .options .selected").html())}),$("#inbox-level2-dropbox").on("keyup",function(){$(".inbox-level2-block .trigger").html($(".inbox-level2-block .options .selected").html())}),$("#inbox-escalation-dropbox").on("change",function(){var selectedLevelDesc=$(this).parent().find(".options .selected").attr("data-raw-value");console.log(selectedLevelDesc),$("input:hidden[name='escalationLevel']").val(selectedLevelDesc),$(".inbox-level2-block .trigger").html($(".inbox-level2-block .options .selected").html())}),$("#webform-inbox-container").exists()){$(".inbox-interaction").each(function(){"N"==$(this).attr("readflag")&&($(this).find("#intractn-subject span").css("font-weight","700"),$(this).find("#intractn-threadId").css("font-weight","700"),$(this).find("#intractn-time").css("font-weight","700")),"Y"==$(this).attr("escalationFlag"),0==$(this).find("#intractn-escalateLevel").attr("escalation-level")?$(this).find("#intractn-escalateLevel").css("background-color","white"):1==$(this).find("#intractn-escalateLevel").attr("escalation-level")?$(this).find("#intractn-escalateLevel").css("background-color","#ffff00"):2==$(this).find("#intractn-escalateLevel").attr("escalation-level")?$(this).find("#intractn-escalateLevel").css("background-color","#ffad33"):3==$(this).find("#intractn-escalateLevel").attr("escalation-level")&&$(this).find("#intractn-escalateLevel").css("background-color","red")});var index=0;$(".webform-inbox-content").find(".inbox-interaction").each(function(){10>index?$(this).addClass("showInteraction"):!0,index++}),showLoadMoreBtn()}if($("#load-more-interaction").on("click",function(){var vissibleInteractionCount=$(".webform-inbox-content").find(".showInteraction").length,index=0;$(".webform-inbox-content").find(".inbox-interaction").each(function(){index>=vissibleInteractionCount&&vissibleInteractionCount+10>index?$(this).addClass("showInteraction"):!0,index++}),showLoadMoreBtn()}),$(".advance-reset-btn").on("click",function(){$('input[name="level1"]').val(""),$('input[name="level2"]').val(""),$('input[name="escalationLevel"]').val("");$("#interactionId").val(""),$(".inbox-level1-block .trigger").text("Select Category"),$(".inbox-level1-block").find("ul li").removeClass("selected"),$(".inbox-level2-block").find(".options li").remove(),$(".inbox-level2-block .trigger").html("Select Sub-category"),$(".inbox-level2-block").find("ul li").removeClass("selected"),$(".inbox-escalation-block .trigger").html("Select Escalation Level"),$(".inbox-escalation-block").find("ul li").removeClass("selected")}),$(".webform-reply-box #interactionText").keypress(function(){$(".webform-reply-box #interactionText").hasClass("upload-error-webform")&&$(".webform-reply-box #interactionText").removeClass("upload-error-webform")}),$(".reply-interaction-block .reply-block").keypress(function(){$(".reply-interaction-block .reply-block").hasClass("upload-error-webform")&&$(".reply-interaction-block .reply-block").removeClass("upload-error-webform")}),$(".webform-escalate-form .reply-block").keypress(function(){$(".webform-escalate-form .reply-block").hasClass("upload-error-webform")&&$(".webform-escalate-form .reply-block").removeClass("upload-error-webform")}),$(document).on({mouseenter:function(e){viewport.width>=768&&(1==$(this).attr("escalation-level")?($(this).children(":nth-child(3)").css("visibility","visible"),$(this).children(":nth-child(3)").css("opacity","1"),$(this).children(":nth-child(3)").css("display","block"),$(this).children(":nth-child(3)").css({top:e.pageY})):2==$(this).attr("escalation-level")?($(this).children(":nth-child(2)").css("visibility","visible"),$(this).children(":nth-child(2)").css("opacity","1"),$(this).children(":nth-child(2)").css("display","block"),$(this).children(":nth-child(2)").css({top:e.pageY})):3==$(this).attr("escalation-level")&&($(this).children(":nth-child(1)").css("visibility","visible"),$(this).children(":nth-child(1)").css("opacity","1"),$(this).children(":nth-child(1)").css("display","block"),$(this).children(":nth-child(1)").css({top:e.pageY})))},mouseleave:function(){$(this).children().css("visibility","hidden"),$(this).children().css("opacity","0"),$(this).children().css("display","none")}},".inbox-interaction.showInteraction #intractn-escalateLevel"),$(".webform-spe-form .webform-attach-btn").on("click",function(){var fileCount,fileFieldCount=$(this).closest("form").find(":input[type=file]").length+1,file_format_error_msg="This file type is not valid. It should be a pdf, jpg, tiff, png or gif file only.",file_size_error_msg="The upload exceeds the maximum size limit of 5MB.";if(3>=fileFieldCount)for(fileCount=1;3>=fileCount;fileCount++){var upload_blockClass=".escalate-upload"+fileCount;if(!($(upload_blockClass).length>0)){$(this).siblings(".webform-upload-block").append('<div class="upload-block escalate-upload'+fileCount+'">								<input type="text" name="file-name'+fileCount+'" class="webform-file-name" id="webform-attach-file'+fileCount+'" value="" readonly onclick="reAttachEscalate(this.id);">								<span class="edit-file">X</span>								<input type="file" class="webform-file-field" id="EscalateAttachId-'+fileCount+'" name="Attached-File'+fileCount+'">								</div><div class="webform-file-error" style="display:none;"><div class="webform-format-error">'+file_format_error_msg+'</div><div class="webform-fileSize-error">'+file_size_error_msg+"</div></div>");var attachFieldId="#EscalateAttachId-"+fileCount;$(attachFieldId).click();break}}fileFieldCount>=3&&($(this).addClass("dissableAttach"),$(".icon.tooltip.webformtooltip").css("display","none"))}),$(".webform-spe-form").on("change","input[type=file]",function(){var fileValue=$(this).val();if($(this).closest(".upload-block").removeClass("upload-error-webform"),$(this).siblings(".webform-file-name").val(fileValue),$(this).closest(".upload-block").next(".webform-file-error").css("visibility","hidden").find(".webform-fileSize-error").css("display","none").siblings(".webform-format-error").css("display","none"),-1==$.inArray($(this).val().split(".").pop().toLowerCase(),webformAcceptableFileFormats))$(this).closest(".upload-block").addClass("upload-error-webform"),$(this).closest(".upload-block").find(".webform-file-name").val(""),$(this).closest(".upload-block").next(".webform-file-error").css("visibility","visible").find(".webform-fileSize-error").css("display","none").siblings(".webform-format-error").css("display","block"),$(this).closest(".upload-block").next(".webform-file-error").css("display","block");else{var maxFileSize=parseInt($(this).closest("form").find(':input[name="webform-max-file-size"]').val()),$ele=$(this).closest("form");isFileUploadAcceptable($ele,maxFileSize)||(ResetWebformEscalateFileSizeError(),$(this).closest(".upload-block").addClass("upload-error-webform"),$(this).closest(".upload-block").next(".webform-file-error").css("visibility","visible").find(".webform-fileSize-error").css("display","block").siblings(".webform-format-error").css("display","none"),$(this).closest(".upload-block").next(".webform-file-error").css("display","block"))}}),$(".webform-spe-form").on("click",".edit-file",function(){$(".upload-block").length+1;$(this).closest(".upload-block").next(".webform-file-error").css("display","none"),$(this).closest(".upload-block").next(".webform-file-error").css("visibility","hidden").find(".webform-fileSize-error").css("display","none").siblings(".webform-format-error").css("display","none"),$(this).closest(".upload-block").next(".webform-file-error").remove(),$(this).closest(".upload-block").remove(),$(".webform-attach-btn").removeClass("dissableAttach"),$(".icon.tooltip.webformtooltip").css("display","block");var maxFileSize=parseInt($("#webform-max-file-size").val()),$ele=$("#webform-escalate-form");console.log("removeAttachFile clicked.$ele-"+$ele+" maxFileSize-"+maxFileSize),isFileUploadAcceptable($ele,maxFileSize)?ResetWebformEscalateFileSizeError():(console.log("limit exceeded"),$(".webform-file-container").find(".file-size-error-webform-remove").addClass("file-size-error-webform").removeClass("file-size-error-webform-remove"),$(".webform-file-container").find(".file-size-error-webform").next(".webform-file-error").css("visibility","visible").find(".webform-fileSize-error").css("display","block").siblings(".webform-format-error").css("display","none"),$(this).closest(".upload-block").next(".webform-file-error").css("display","block"))}),$(".webform-interaction-reply .interaction-btns a.interaction-escalate").on("click",function(){showWebformEscalate()}),$(".webform-escalate-container .interaction-reply-btns a.discard-btn").on("click",function(){$(".webform-escalate-container .webform-file-container .webform-upload-block").empty(),$(".webform-spe-form .webform-attach-btn").show(),$("#escalationText").val(""),$(".interaction-container").removeClass("expanded show-more"),$(".interaction-reply").show(),$(".webform-interaction-container.webform-interaction-reply").show(),$(".webform-interaction-container.webform-escalate-container").hide(),$(".webform-file-container").find(".file-upload").remove(),$(".reply-block-content").val(""),$(".composeAttachBtn").removeClass("dissableAttach"),$(".webform-file-container").find(".webform-file-error").remove(),$(".clickWebformReplyBlock").show(),$(".reply-interaction-block").css("display","none")}),$("#shortLinkToWFEscalate").exists()){$(".webform-interaction-container.webform-interaction-reply").hide();var result=$("#shortLinkToWFEscalate").data("json");if(void 0!=result.threadID){var escalationLevel=parseInt(result.escalatedLevel)+1;$("#escalatedMailBox").html(1==escalationLevel?"Reported to "+result.escalatedMailBoxId:"Escalation to "+result.escalatedMailBoxId);var tooltipMessages=[["A request should be escalated to the Nodal Officer if it is not resolved by the Customer Care team within 1 days","A request should be escalated to the Nodal Officer if it is not resolved by the Customer Care team within 1 days"],["A request should be escalated to the Nodal Officer if it is not resolved by the Customer Care team within 1 days","A request should be escalated to the Principal Nodal Officer if it is not resolved by the Nodal Officer within 5 working days"],["A request should be escalated to the Principal Nodal Officer if it is not resolved by the Nodal Officer within 5 working days","A request should be escalated to the Customer Service Head if it is not resolved by the Customer Service Head within 3 working days"],["A request should be escalated to the Customer Service Head if it is not resolved by the Principal Nodal Officer within 3 working days","A request should be escalated to the Customer Service Head if it is not resolved by the Principal Nodal Officer within 2 working days"]];$("#escalationLevel1TooltipMsg").html(tooltipMessages[escalationLevel-1][0]),$("#escalationLevel2TooltipMsg").html(tooltipMessages[escalationLevel-1][1]),$(".accordian-tick").attr("src",$(".accordian-tick").attr("src")+"escalation-"+escalationLevel+".png"),$("#escalatedLevel").html("L"+escalationLevel),$("#escalatedLevel").removeClass("webform-header-span"),$("#escalatedLevel").addClass("webform-header-span-"+escalationLevel),$("#toBeEscalatedMailBox").html("Escalation to "+result.displayMailBox),$("#displayMailBox").val(result.displayMailBox),$("#wfEscThreadId").html(result.threadID),$("#wfEscCustomerName").html(result.customerName),$("#wfEscCustEmailId").html(result.custEmailId),$("#wfEscCustEmailId").prop("href","mailto:"+result.custEmailId),$("#wfEscThreadSubject").html(result.threadSubject),$("#webform-escalate-form").find('input:hidden[name="mailBox"]').val(result.toBeEscalatedMailBox),$("#webform-escalate-form").find('input:hidden[name="mailBoxId"]').val(result.toBeEscalatedMailBoxId)}$(".webform-interaction-container.webform-escalate-container").show()}$(".addOn-dropbox").on("change",function(){$(".editable-contact-detail-container").find("#generate-otp-tab").hide(),$(".editable-contact-detail-container #resend-otp-tab").hide(),$("#timeOutError").hide(),$("#timeOutError").removeClass("otpTimeOutError"),$(".addon-container").css("display","block"),$(".editable-contact-detail-container #otp").val(""),$(".primarycard-container").css("display","none"),$(".headercontPrimaryCard").css("display","none"),$(".addon-edit-container").hide(),$(".primarycard-edit-container").css("display","none"),$(".addon-edit-button").css("display","block"),$(".headercontAddonCard").css("display","block"),$(".headercontAddonCard .edit-button").css("display","block");var href=$(this).attr("data-href"),selectedIndex=$(this)[0].selectedIndex||0;$("input[name=selectedCardIndex]").val(selectedIndex),loadAddOnChange(href,selectedIndex)}),""==$("#enableEditAddon").val()?($(".addonCardDetail-edit-button").css("pointer-events","none"),$(".addonCardDetail-edit-button").css("background","none 0px 0px repeat scroll rgb(224, 224, 224)"),$(".addonCardDetail-edit-button").css("width","58px")):($(".addonCardDetail-edit-button").css("pointer-events","auto"),$(".addonCardDetail-edit-button").css("background","none"),$(".addonCardDetail-edit-button").css("width","initial")),$(".addonCardDetail-edit-button").on("click",function(){localStorage.setItem("addon-edit-flag",!0);var maskedcardno=$("#cardNoWithName").attr("value");localStorage.setItem("addonMaskedCardNo",maskedcardno);var cardNo=$("#selectedCardNum").attr("value");localStorage.setItem("addon-card-no",cardNo)}),$(".headercontAddonCard").on("click",function(){editContactDetail()}),$(".profile-link").on("click",function(){localStorage.setItem("myprofile-details",!0)}),$("#profile-link-quick-link").on("click",function(){localStorage.setItem("myprofile-details",!0)}),$("#profile-link-opt-for-e-stmt-1").on("click",function(){localStorage.setItem("myprofile-details",!0)}),$("#profile-link-opt-for-e-stmt-2").on("click",function(){localStorage.setItem("myprofile-details",!0)}),$("#profile-link-opt-for-e-stmt-3").on("click",function(){localStorage.setItem("myprofile-details",!0)}),$("#profile-link-opt-for-e-stmt-4").on("click",function(){localStorage.setItem("myprofile-details",!0)}),$("#profile-link-ivr-otp").on("click",function(){localStorage.setItem("myprofile-details",!0)}),$("#kyc-email-message .updateEmailId").on("click",function(){localStorage.setItem("myprofile-details",!0)}),changeAddonField();var val=($("#creditlimit-range").val()-$("#creditlimit-range").attr("min"))/($("#creditlimit-range").attr("max")-$("#creditlimit-range").attr("min"));$("#creditlimit-range").css("background-image","-webkit-gradient(linear, left top, right top, color-stop("+val+", #0095d9), color-stop("+val+", #a7a8a8))");{var c=navigator.userAgent.search("Chrome"),f=navigator.userAgent.search("Firefox");navigator.userAgent.search("MSIE 8.0"),navigator.userAgent.search("MSIE 9.0")}c>-1?$("#creditlimit-range[type=range]").css("height","8px"):f>-1?$("#creditlimit-range[type=range]").css("height","4px"):($("#creditlimit-range[type=range]").css("padding","0px"),$("#creditlimit-range[type=range]").css("border","none")),$(".edit-addoncard").on("click",function(e){$(".contains-send").hasClass("hide")&&($(".creditlimit-util-slider-btns.contains-resend, .encryptedOtp").addClass("hide"),$(".creditlimit-util-slider-btns.contains-send").removeClass("hide")),e.preventDefault(),$("#creditLimit").toggle(),$(this).hide(),$("#edit-input-creditlimit").focus(),$("#creditlimit-util-slider").hide(),$(".err-sameCreditLimit").css("display","none"),$(".err-totalRetailLimit").css("display","none"),$(".err-lessCreditLimit").css("display","none"),$(".err-notMultipleOfThousand").css("display","none"),$("#edit-creditlimit-util-slider").show(),$("#hideLimitTxt").hide(),$(".gray-box:nth-child(3)>.col:nth-child(2)").css("border-left","solid 1px #ddd"),$(".gray-box:nth-child(3)>.col:nth-child(1)").css("border-right","none"),$(".gray-box:nth-child(3)>.col:nth-child(2)>.util-slider").css("padding-top","24px"),$("#edit-input-creditlimit").val($("#creditlimit-range").attr("addOnVal"));var addonValue=$("#edit-input-creditlimit").val(),totalValue=($("#creditlimit-range").attr("addonval"),$("#creditlimit-range").attr("max"));$("#creditlimit-rangeValue").val(Math.round(addonValue/totalValue*100)+"%"),$("#creditlimit-rangeValue").html($("#creditlimit-rangeValue").val()),$("#creditlimit-range").val(addonValue);var rangeValue,rangNewPoint,rangeNewPlace,rangeOffset,totalValue=$("#creditlimit-range").attr("max");$("#edit-input-creditlimit").val($("#creditlimit-range").attr("addOnVal")),$("#creditlimit-range").change(function(){var val=($(this).val()-$(this).attr("min"))/($(this).attr("max")-$(this).attr("min"));$(this).css("background-image","-webkit-gradient(linear, left top, right top, color-stop("+val+", #0095d9), color-stop("+val+", #a7a8a8))"),$("#edit-input-creditlimit").val($("#creditlimit-range").val()),rangeValue=$(this),width=rangeValue.width(),rangNewPoint=(rangeValue.val()-rangeValue.attr("min"))/(rangeValue.attr("max")-rangeValue.attr("min")),rangeOffset=-2.8,0>rangNewPoint?rangeNewPlace=0:rangNewPoint>1?rangeNewPlace=width:(rangeNewPlace=width*rangNewPoint+rangeOffset,rangeOffset-=rangNewPoint),rangeValue.next("output").css({left:rangeNewPlace,marginLeft:rangeOffset+"%"}).text(rangeValue.val());var addonValue=$("#edit-input-creditlimit").val();$("#creditlimit-rangeValue").val(Math.round(addonValue/totalValue*100)+"%"),$("#creditlimit-rangeValue").html($("#creditlimit-rangeValue").val())}).trigger("change")}),$("#edit-input-creditlimit").bind("cut copy paste",function(e){e.preventDefault()}),$("#edit-input-creditlimit").on("blur",function(){var tempAddOnVal=$("#edit-input-creditlimit").val(),maxValue=$("#creditlimit-range").attr("max"),addonValue=1e3*Math.ceil(tempAddOnVal/1e3),addonRemainingValue=tempAddOnVal%1e3;0!=addonRemainingValue?($(".err-notMultipleOfThousand").css("display","block"),$(".err-sameCreditLimit").css("display","none"),$(".err-lessCreditLimit").css("display","none"),$(".err-lessCreditLimit").css("display","none"),$(".err-totalRetailLimit").css("display","none")):$(".err-notMultipleOfThousand").css("display","none"),$("#creditlimit-range").val(addonValue),rangeValue=$("#creditlimit-range"),width=rangeValue.width(),rangNewPoint=(rangeValue.val()-rangeValue.attr("min"))/(rangeValue.attr("max")-rangeValue.attr("min")),rangeOffset=-4,0>rangNewPoint?rangeNewPlace=0:rangNewPoint>1?rangeNewPlace=width:(rangeNewPlace=width*rangNewPoint+rangeOffset,rangeOffset-=rangNewPoint),rangeValue.next("output").css({left:rangeNewPlace,marginLeft:rangeOffset+"%"}).text(rangeValue.val()),parseInt($(this).val())>parseInt(maxValue)?($("#creditlimit-rangeValue").val(">100%"),$("#creditlimit-rangeValue").html($("#creditlimit-rangeValue").val()),$("#creditlimit-rangeValue").html($("#creditlimit-rangeValue").val())):($("#creditlimit-rangeValue").val(Math.round(addonValue/maxValue*100)+"%"),$("#creditlimit-rangeValue").html($("#creditlimit-rangeValue").val())),$("#edit-input-creditlimit").val(addonValue);var val=($(this).val()-$("#creditlimit-range").attr("min"))/($("#creditlimit-range").attr("max")-$("#creditlimit-range").attr("min"));$("#creditlimit-range").css("background-image","-webkit-gradient(linear, left top, right top, color-stop("+val+", #0095d9), color-stop("+val+", #a7a8a8))")}),$("#click-address-tab").on("click",function(){$("#quick-contact-tab").css("display","none"),$(".tab-header .edit-button").css("display","none"),isModifyJourney=!1}),$("#click-social-tab").on("click",function(){$("#quick-contact-tab").css("display","none"),$(".tab-header .edit-button").css("display","none")}),$("#ckyc-details-tab").on("click",function(){$("#quick-contact-tab").css("display","none"),$(".tab-header .edit-button").css("display","none")}),$("#click-international-tab").on("click",function(){$("#quick-contact-tab").css("display","none"),$(".tab-header .edit-button").css("display","none")}),$("#click-password-tab").on("click",function(){$("#quick-contact-tab").css("display","none"),$(".tab-header .edit-button").css("display","none")}),"true"==$("#otp-submitted").val()&&($("select.fancy").fancySelect(),$(".tab-content.primarycard-edit-container.show-editable").show()),$("#click-quick-contact-tabItem").on("click",function(){localStorage.setItem("myprofile-details",!0),sessionStorage.removeItem("addressChange")}),$(".contactLnk a").on("click",function(){localStorage.setItem("myprofile-details",!0)}),$(".field-wrap #otp").on("change",function(){if(""==$("#otp").val()||$("#otp").val().length<6)$(this).parent().find("label.valid").remove(),$(this).addClass("error"),$(this).after('<label for="otpNumber" class="error" id="otpNumberErrorClass"> </label>'),$("#submit-contact-details").css("pointer-events","none");else{if($(this).parent().find("label.error").remove(),$(this).removeClass("error"),$('label[for="otpNumber"]').parent().find("label.valid").remove(),$('label[for="otpNumber"]').parent().find("label.error").remove(),$('label[for="otp"]').parent().find("label.valid").remove(),$('label[for="otp"]').parent().find("label.error valid").remove(),$('label[for="otp"]')){var browserurl=location.href,substring="forgotpassword-authotp-page",substring1="register-update-credentials-page",substring2="forgotpassword-set-credentials-page",substring3="register-authotp-page",substring4="register-set-credentials-page",substring5="password-tab",substring6="unlock-set-credentials-page",substringfp="forgotpassword",substringreg="register",substringunl="unlock",substringpwd="password",substringpin="pin",substringExpPwd="expirepassword";-1!==browserurl.indexOf(substring)||-1!==browserurl.indexOf(substring1)||-1!==browserurl.indexOf(substring2)||-1!==browserurl.indexOf(substring3)||-1!==browserurl.indexOf(substring4)||-1!==browserurl.indexOf(substring5)||-1!==browserurl.indexOf(substring6)?(console.log("inside if"),$(this).after('<label for="otp" class="valid" style="width:20px"> </label>')):-1!==browserurl.indexOf(substringfp)||-1!==browserurl.indexOf(substringreg)||-1!==browserurl.indexOf(substringunl)||-1!==browserurl.indexOf(substringpwd)||-1!==browserurl.indexOf(substringpin)||-1!==browserurl.indexOf(substringExpPwd)?(console.log("inside else if"),$(this).after('<label for="otp" class="valid" style="width:20px"> </label>'),-1!==browserurl.indexOf(substringExpPwd)&&($("#otp").css("border","1px solid #cdcbcb"),$("#mandatory-password-authotp-error").css("display","none"),$("#mandatory-password-authotp-error").html(""))):(console.log(111),$(this).after('<label for="otp" class="valid" style="width:20px"> </label>'))}else console.log(2),$(this).after('<label for="otpNumber" class="valid" style="width:20px" id="otpNumberValidClass"> </label>');$("#submit-contact-details").css("pointer-events","auto")}}),$("#resend-otp-tab #otp").on("change",function(){""==$("#otp").val()?($(this).parent().find("label.valid").remove(),$(this).addClass("error"),$(this).after('<label for="otpNumber" class="error"> </label>'),$("#submit-contact-details").css("pointer-events","none")):($(this).parent().find("label.error").remove(),$(this).removeClass("error"),$(this).after('<label for="otpNumber" class="valid" style="width:20px"> </label>'),$("#submit-contact-details").css("pointer-events","auto"))})}),$("#webform-inbox-search .date-field").on("keydown",function(event){8===event.keyCode&&event.preventDefault()}),$(document).ready(function(){$("#request-addon-form #relationship").on("change",function(){var str=$(this).parent().find(".trigger").html().trim(),value=str.substr(str.indexOf(" ")+1);setAnalyticsAddonKyc(value),resetConsentCheckbox()}),$("input[type=radio][name=AddonKycAddrSelection]").change(function(){var selectedAddr=null;if($(this).is(":checked"))if(selectedAddr=$(this).prop("value"),"Yes"==selectedAddr)$(".Addon-kyc-sub-block.Addon-kyc-address-box").remove();else if("No"==selectedAddr){var KycAddrsBlock='<article class="Addon-kyc-sub-block Addon-kyc-address-box">							<label class="Addon-kyc-upload-label align-left" for="Addon-kycadrProof">Address Proof</label>							<div class="Addon-kyc-upload-block">								<input type="text" name="addr-proof" class="Addon-kyc-file-name" value="">								<button type="button" class="Addon-kyc-browse-button Addon-kyc-btn align-right">Browse...</button>								<input type="file" class="Addon-kyc-file-field" id="AddonKycAdrProof" name="ADDRESS_PROOF">									<input name="addr_proof" type="hidden" value="">							</div>							<span class="Addon-kyc-field-error"></span>							<div class="Addon-kyc-file-error">								<span class="Addon-kyc-format-error">This file type is not valid. It should be a pdf, jpg, tiff, png or gif file only.</span>								<span class="Addon-kyc-fileSize-error">The upload exceeds the maximum size limit of 5 MB</span>							</div>							</article>';$(".Addon-kyc-container").prepend(KycAddrsBlock),$(".Addon-kyc-sub-block.Addon-kyc-address-box .Addon-kyc-browse-button").on("click",function(){$(this).siblings(".Addon-kyc-file-field").click()})}$(this).closest(".fancy-radio").siblings("input[name=kycaddon_address_type]").attr("value",selectedAddr),$(".Addon-kyc-file-field").on("change",function(){var kycFieldName=$(this),kycFieldVal=$(this).val();fileFormatValidation(kycFieldName,kycFieldVal)})}),$(".Addon-kyc-browse-button").on("click",function(){$(this).siblings(".Addon-kyc-file-field").click()}),$(".Addon-kyc-file-field").on("change",function(){var kycFieldName=$(this),kycFieldVal=$(this).val();fileFormatValidation(kycFieldName,kycFieldVal)}),$("a.Addon-kyc-supp-link").on("click",function(e){e.preventDefault(),openModalPopup("addonKyc-popup"),$("#addonKyc-popup .modal").css("top","5%"),$("#addonKyc-popup .modal").scrollTop(0),viewport.width<=1024&&($("#addonKyc-popup").css("margin-top","0px"),$("#addonKyc-popup .modal").css("margin-top","0px"));var modalInnerHeight=$("#addonKyc-popup").find(".Addon-kyc-modal").height()-$("#addonKyc-popup").find(".button-wrap").height();modalInnerHeight-=$(window).width()>767?120:60,$("#addonKyc-popup").find(".modal-wrap").css("height",modalInnerHeight),$("#addonKyc-popup").find(".modal-wrap").scrollTop(0)}),$("#addonKyc-popup .button-cancel").on("click",function(e){e.preventDefault(),$(".modal-overlay").removeClass("open")}),$(".main-wrap.add-on-card").exists()&&$(document).keypress(function(e){13==e.which}),$("#addonKyc-submit-button").on("click",function(){var count=0;$(".Addon-kyc-upload-block input[type=file]").each(function(){""==$(this).val()&&3>count&&(count++,$(this).parent().css("border","1px solid red"),$(this).parent().next(".Addon-kyc-field-error").css("display","inline-block"))})}),$("#Addon-kyc-success-msg").show()});var addonKycAcceptableFileFormats=["pdf","jpg","jpeg","tiff","tif","png","gif"];$(document).ready(function(){if($(".side-menu").find('li[data-val="Manage Card Usage"]').exists()&&$(".side-menu").find('li[data-val="Manage Card Usage"]').css("position","inherit"),$(".prime-club-container").exists()){if($("#isExistingMember option[value='No']").prop("selected",!0),$("#isExistingMember").parent().find(".trigger").text("No"),$("#isExistingMember").siblings("ul.options").children("li:nth-child(2)").addClass("selected"),$("#isExistingMember").siblings("ul.options").children("li:first-child").removeClass("selected"),$(".dynamicFields").hide(),$("#emailId").attr("readonly","readonly"),$("#firstName").attr("readonly","readonly"),$("#firstName").on("keydown",function(){return!1}),$("#lastName").attr("readonly","readonly"),$("#lastName").on("keydown",function(){return!1}),$("#mobileNo").attr("readonly","readonly"),$("#mobileNo").on("keydown",function(){return!1}),$("#city").attr("readonly","readonly"),$("#city").on("keydown",function(){return!1}),$("#isExistingMember").on("change",function(){"Yes"==this.value?($(".dynamicFields").show(),$("label[for=emailId]").addClass("dynamicEmailLabel1"),$("label[for=emailId]").removeClass("dynamicEmailLabel2"),$("#emailId").removeAttr("readonly"),$("#emailId").unbind("keydown"),$("#emailId").removeClass("nonEditableField"),$(".prime-club-email-info").show(),$("#membershipTier").removeAttr("disabled"),$("#membershipNumber").removeAttr("disabled")):($(".dynamicFields").hide(),$("label[for=emailId]").addClass("dynamicEmailLabel2"),$("label[for=emailId]").removeClass("dynamicEmailLabel1"),$("#emailId").attr("readonly","readonly"),$("#emailId").val($("#systemEmail").val()),$("#emailId").on("keydown",function(){return!1}),$("#emailId").addClass("nonEditableField"),$(".prime-club-email-info").hide(),$("#membershipTier").attr("disabled","disabled"),$("#membershipNumber").attr("disabled","disabled"))}),$(".prime-club-selectbox.club-vistara-selectBox").on("change",function(){var analyticsValue="Existing Club Vistara Prime_"+this.value;setAnalyticsPrimeCard(analyticsValue)}),$(".prime-club-selectbox.trident-selectBox").on("change",function(){var analyticsValue="Existing Trident_"+this.value;setAnalyticsPrimeCard(analyticsValue)}),""!=$("#state").attr("data-selected")&&null!=$("#state").attr("data-selected")){var hiddenVal=$("#state").attr("data-selected").toUpperCase(),flag=!1,number=0,selectedValue=1;$("#state").siblings("ul.options").children("li:first-child").removeClass("selected"),$("#state option").each(function(){number++,this.value==hiddenVal&&(console.log("matched"),$("#state option[value='"+hiddenVal+"']").prop("selected",!0),$("#state").parent().find(".trigger").text(hiddenVal),flag=!0,selectedValue=number)}),$("#state").siblings("ul.options").children("li:nth-child("+selectedValue+")").addClass("selected"),0==flag&&$("#state option[value='select']").prop("selected",!0)}else $("#state option[value='select']").prop("selected",!0);if(""!=$("#salutation").attr("data-selected")&&null!=$("#salutation").attr("data-selected")){var hiddenVal="";void 0!=$("#salutation").attr("data-selected")&&null!=$("#salutation").attr("data-selected")&&(hiddenVal=$("#salutation").attr("data-selected").toUpperCase()),$("#salutation option").each(function(){this.value==hiddenVal&&($("#salutation option[value='"+hiddenVal+"']").prop("selected",!0),"Mrs"==$("#salutation option:selected").val()||"Ms"==$("#salutation option:selected").val()||"Mrs."==$("#salutation option:selected").val()||"Ms."==$("#salutation option:selected").val()?$("#gender").val("F"):("Mr"==$("#salutation option:selected").val()||"Mr."==$("#salutation option:selected").val())&&$("#gender").val("M"))})}$("#salutation").on("change",function(){$("#gender").val("Mrs"==$("#salutation option:selected").val()||"Ms"==$("#salutation").val()||"Mrs."==$("#salutation").val()||"Ms."==$("#salutation").val()?"F":"Mr"==$("#salutation option:selected").val()||"Mr."==$("#salutation option:selected").val()?"M":"")}),$("#membershipTier").on("change",function(){"CV Gold"==$("#membershipTier").val()||"CV Platinum"==$("#membershipTier").val()?($("#error-textMsg").show(),$(".primeSubmit").attr("disabled","disabled")):($("#error-textMsg").hide(),$(".primeSubmit").removeAttr("disabled"))}),$("#state").on("change",function(){"Select a State"==$("#state").parent().find(".trigger").html().trim()?$("label[for=state]").next().css("border","1px solid red"):$("label[for=state]").next().css("border","")}),$("#salutation").on("change",function(){"Select"==$("#salutation").parent().find(".trigger").html().trim()?$("label[for=salutation]").next().css("border","1px solid red"):$("label[for=salutation]").next().css("border","")}),viewport.width>767&&$("#salutation").on("blur",function(){"Select"==$("#salutation").parent().find(".trigger").html()?($("#lastName").siblings().remove(),$("#lastName").after('<label for="lastName" class="error"> </label>')):($("#lastName").siblings().remove(),$("#lastName").after('<label for="lastName" class="valid"> </label>'))
}),$("#vistaraMemebershipSubscriptionForm").exists()&&$("#membershipTier").on("change",function(){"CV Platinum"==$("#membershipTier").parent().find(".trigger").html()||"CV Gold"==$("#membershipTier").parent().find(".trigger").html()?($("#vistaraMemebershipSubscriptionForm").find("#submit").css("pointer-events","none"),$("#vistaraMemebershipSubscriptionForm").find("#submit").css("background","rgb(224, 224, 224)")):($("#vistaraMemebershipSubscriptionForm").find("#submit").css("pointer-events","auto"),$("#vistaraMemebershipSubscriptionForm").find("#submit").css("background","#0095d9"))}),$(document).on("click","#myProfile-track-submit",function(){var loaderHtml='<div class="overlay-loader"></div>';$("body").append(loaderHtml),$("#myProfile_form").submit()})}}),$(document).ready(function(){if($("#suspicious-transaction-popup").exists()&&($("#suspicious-transaction-popup .addleft1").click(function(){HBlocksetAnalytics("Verify Later"),$(".h-block-popup-overlay").hide(),$("body").removeClass("h-block-stop-scroll")}),$(".h-block-popup-overlay .tooltip").hover(function(){viewport.width>1e3&&$(this).find(".tooltiptext").css("visibility","visible")},function(){$(this).find(".tooltiptext").css("visibility","hidden")}),$("#suspicious-transaction-popup .addleft2").click(function(){var loaderHtml='<div class="overlay-loader"></div>';$("body").append(loaderHtml),$("body").removeClass("h-block-stop-scroll"),$(".overlay-loader").css("z-index","999999"),HBlocksetAnalytics("Verify Now")}),$("body").addClass("h-block-stop-scroll")),$(".hblock-review-transaction").exists()){var hblockTransactions=$(".suspiciousTransactionsData").data("json"),hblockTransactionsArray=JSON.parse(hblockTransactions[0].suspiciousTransactions),hblockCardNo=hblockTransactions[0].suspiciousCardNumber;if($(".hblock-transaction-list").exists()){var htransactionField="";if(null!=hblockTransactions[0]&&void 0!=hblockTransactions[0]&&null!=hblockTransactions[0].suspiciousTransactions&&void 0!=hblockTransactions[0].suspiciousTransactions)for(var i=0;i<hblockTransactionsArray.length;i++){hblockTransactionsArray[i].fraudcontrolflag="Y";var amount=hblockTransactionsArray[i].suspiciousTransAmountSpent.toString(),amounts=[],formattedAmount=0;amount.indexOf(".")>-1?(amount=parseFloat(amount).toFixed(2),amounts=amount.toString().split("."),formattedAmount=parseInt(amounts[0]).toLocaleString("en-IN")+"."+amounts[1]):formattedAmount=parseInt(amount).toLocaleString("en-IN"),htransactionField+="INR"==hblockTransactionsArray[i].currencyDescription?'<div class="text-box8 tooltip"><span class="checkboxt1"><input type="checkbox" name="checkbox" class="text10"> <span class="iconshowh" id="selectedIndex'+i+'"></span> <span class="iconh2" id="notSelectedIndex'+i+'"> </span></span> <span class="text11">'+hblockTransactionsArray[i].suspiciousTransDate+'</span><span class="text12">'+hblockTransactionsArray[i].suspiciousTransDescription+'</span><span class="text13">'+formattedAmount+'</span><span class="tooltiptext"></span></div>':'<div class="text-box8 tooltip"><span class="checkboxt1"><input type="checkbox" name="checkbox" class="text10"> <span class="iconshowh" id="selectedIndex'+i+'"></span> <span class="iconh2" id="notSelectedIndex'+i+'"> </span></span> <span class="text11">'+hblockTransactionsArray[i].suspiciousTransDate+'</span><span class="text12">'+hblockTransactionsArray[i].suspiciousTransDescription+'</span><span class="text13">'+formattedAmount+"<b> ("+hblockTransactionsArray[i].currencyDescription+')</b></span><span class="tooltiptext"></span></div>'}$(".hblock-transaction-list .hblock-transaction-content").after(htransactionField),$(".hblock-transaction-list input").prop("checked",!1),$(".hblock-review-transaction .hblock-transaction-list .iconshowh1,.hblock-review-transaction .hblock-transaction-list .iconshowh").css("background","#fafafa")}$(".iconshowh").click(function(){$(this).next().css("display","block"),$(this).parent().parent().css({"border-right":"6px solid #ff0000"}),$(this).parent().parent().find(".tooltiptext").text("Transactions not done by you");var id=$(this).attr("id"),ind=id.substr(id.length-1);hblockTransactionsArray[ind].fraudcontrolflag="N",$(".hblock-transaction-list input").prop("checked",!1),$(".hblock-review-transaction .hblock-transaction-list .iconshowh1,.hblock-review-transaction .hblock-transaction-list .iconshowh").css("background","#fafafa")}),$(".iconshowh1").click(function(){$(".iconh2").css("display","block"),$(".iconh1").css("display","block"),$(".text-box8").css({"border-right":"6px solid #ff0000"}),$(".text-box8 .tooltiptext").text("Transactions not done by you");for(var i=0;i<hblockTransactionsArray.length;i++)hblockTransactionsArray[i].fraudcontrolflag="N";$(".hblock-transaction-list input").prop("checked",!1),$(".hblock-review-transaction .hblock-transaction-list .iconshowh1,.hblock-review-transaction .hblock-transaction-list .iconshowh").css("background","#fafafa")}),$(".iconh2").click(function(){if($(this).css("display","none"),$(".iconh1").css("display","none"),"Next"==$(".nextConfirm").text().trim()){$(this).parent().parent().css({"border-right":"none"});var id=$(this).attr("id"),ind=id.substr(id.length-1);hblockTransactionsArray[ind].fraudcontrolflag="Y",$(".hblock-transaction-list input").prop("checked",!1),$(".hblock-review-transaction .hblock-transaction-list .iconshowh1,.hblock-review-transaction .hblock-transaction-list .iconshowh").css("background","#fafafa")}else{$(this).parent().parent().css({"border-right":"6px solid #118b01"}),$(this).parent().parent().find(".tooltiptext").text("Transactions done by you");var id=$(this).attr("id"),ind=id.substr(id.length-1);hblockTransactionsArray[ind].fraudcontrolflag="Y",$(".hblock-transaction-list input").prop("checked",!1),$(".hblock-review-transaction .hblock-transaction-list .iconshowh1,.hblock-review-transaction .hblock-transaction-list .iconshowh").css("background","#fafafa")}}),$(".iconh1").click(function(){if($(this).css("display","none"),$(".iconh2").css("display","none"),"Next"==$(".nextConfirm").text().trim()){$(".text-box8").css({"border-right":"none"});for(var i=0;i<hblockTransactionsArray.length;i++)hblockTransactionsArray[i].fraudcontrolflag="Y";$(".hblock-transaction-list input").prop("checked",!1),$(".hblock-review-transaction .hblock-transaction-list .iconshowh1,.hblock-review-transaction .hblock-transaction-list .iconshowh").css("background","#fafafa")}else{$(".text-box8").css({"border-right":"6px solid #118b01"}),$(".text-box8 .tooltiptext").text("Transactions done by you");for(var i=0;i<hblockTransactionsArray.length;i++)hblockTransactionsArray[i].fraudcontrolflag="Y";$(".hblock-transaction-list input").prop("checked",!1),$(".hblock-review-transaction .hblock-transaction-list .iconshowh1,.hblock-review-transaction .hblock-transaction-list .iconshowh").css("background","#fafafa")}}),$(".nextConfirm").click(function(){1==$("#issueCardHBlock").is(":checked")&&$("#setIssueCardHBlock").val($("#issueCardHBlock").is(":checked")),$(".h-block-otp-box").hide(),$(".sus-trans-opt-section").hide(),$(".iconh2").each(function(){if("none"==$(this).css("display")){$(this).parent().parent().css({"border-right":"6px solid #118b01"}),$(this).parent().parent().find(".tooltiptext").text("Transactions done by you");var id=$(this).attr("id"),ind=id.substr(id.length-1);hblockTransactionsArray[ind].fraudcontrolflag="Y",$(".hblock-transaction-list input").prop("checked",!1),$(".hblock-review-transaction .hblock-transaction-list .iconshowh1,.hblock-review-transaction .hblock-transaction-list .iconshowh").css("background","#fafafa")}}),"Next"==$(".nextConfirm").text().trim()?(HBlocksetAnalytics("Review Transaction_Next"),$(".nextConfirm").text("Confirm").addClass("confirmBtn"),$(".confirmBtn").removeClass("nextConfirm")):(HBlocksetAnalytics("Review Transaction_Confirm"),createJsonObject(hblockTransactionsArray,hblockCardNo),confirmCardActivation(hblockTransactionsArray))});var otpError=$("#otpAuthError").val();"true"==otpError&&($("html, body").animate({scrollTop:$(document).height()},"slow"),HBlocksetAnalytics("Review Transaction_Confirm"),createJsonObject(hblockTransactionsArray,hblockCardNo),confirmCardActivation(hblockTransactionsArray));var cardNumStr=JSON.parse($("#verifyJsonValue").val()),cardNumSend=cardNumStr[0].suspiciousCardNumber;$("#sendCardNum").val(cardNumSend),$(".block-card-button").click(function(){var loaderHtml='<div class="overlay-loader"></div>';$("body").append(loaderHtml)}),$(".hblock-transaction-list .tooltip").mouseover(function(){"Confirm"==$(".confirmBtn").text().trim()&&viewport.width>1e3&&$(this).find(".tooltiptext").css("visibility","visible")}),$(".hblock-transaction-list .tooltip").mouseout(function(){$(this).find(".tooltiptext").css("visibility","hidden")})}$("#generate-otp-h-block").click(function(){var urlval=$(this).attr("formaction");$(".validationOtpField").removeClass("myErrorClass"),$(".validationOtpField").removeClass("myValidClass"),$("#hblockOtp").css("border","1px solid #cdcbcb"),$(".error-wrap").find("h5.top-error").hide(),$("#hblockOtp").val("");var passPhrase=randomStringGenerator(10,!0,!1),enchblockCardNo=dataEncryptionAES(hblockCardNo,passPhrase);makeAjaxWithLoader({url:urlval,type:"post",data:{suspiciousCardNum:enchblockCardNo,passPhrase:passPhrase},success:function(data){if(console.log("Data type is ="+typeof data),"string"==typeof data){var responseData=$.parseJSON(data);1==responseData.otpResponse.success?($(".sus-trans-opt-section").show(),$(".block-card-button").val("Activate Card").css("display","block"),$(".h-block-otp-box").hide()):($("body").find("div.overlay-loader").remove(),$(".h-block-otp-box").after("<div class='error-wrap'><h5 class='top-error'>Sorry! You cannot avail this service at the moment. Please try again later or call the SBI Card helpline at 39 02 02 02 (prefix the STD code of your city).</h5></div>"))}else $(".h-block-otp-box").after("<div class='error-wrap'><h5 class='top-error'>Sorry! You cannot avail this service at the moment. Please try again later or call the SBI Card helpline at 39 02 02 02 (prefix the STD code of your city).</h5></div>")},error:function(){removeAjaxLoader()}})})});var hblockTransactions=$(".suspiciousTransactionsData").data("json");if(null!=hblockTransactions&&"undefined"!=typeof hblockTransactions[0])var hblockCardNo=hblockTransactions[0].suspiciousCardNumber;if($(".hblock-review-transaction .downimg1").click(function(){$("#hblockOtp").val(""),$(".block-card-button").val("Block Card").css("display","block"),$(".error-wrap").find("h5.top-error").hide(),$(".reviewTransactionBlock").show(),$(".inbox-box3 .text20").show(),$(".card-activation-block").css("display","none"),$(".selecticon1").attr("src","/creditcards/resources/img/h-flow-one.png"),$(".block-card-trans").addClass("displayNone"),$(".downimg1").addClass("displayNone"),$(".inbox-box4 .text4").text("Block/Activate your Card")}),$("#issueCardHBlock").click(function(){HBlocksetAnalytics("Issue New Card"),$("#setIssueCardHBlock").val($("#issueCardHBlock").is(":checked"))}),$(".verify-other-transaction").click(function(){HBlocksetAnalytics("Verify Transaction on Other Card")}),$("document").ready(function(){$(".msw-login-conatiner.cards_container").exists()&&(""!=$("#mswUserName").val()?($("label[for='mswUserName']").addClass("active"),setTimeout(function(){$("label[for='mswPassword']").addClass("active")},500)):($("label[for='mswUserName']").removeClass("active"),$("label[for='mswPassword']").removeClass("active"))),$(".msw-login-conatiner.cards_container").exists()&&(""!=$(".lotus-input-text").val()?setTimeout(function(){$("label[for='mswOTP']").addClass("active")},500):$("label[for='mswOTP']").removeClass("active")),$(".lotus-success-page").exists()&&(viewport.width>=768?($(".lotus-success-page .lotus-success-msg3").hide(),$(".lotus-success-page .lotus-success-msg2").show()):($(".lotus-success-page .lotus-success-msg2").hide(),$(".lotus-success-page .lotus-success-msg3").show()))}),$(document).ready(function(){$(".webform-dynamic-checkboxField .webform-dynamic-checkbox").on("click",function(){$(this).siblings(".errorTxt").remove(),$(this).siblings().css("outline","none")}),$(".webform-submit-compose .button.primary").on("click",function(){$(".errorTxt").remove(),$(".validTxt").remove();var addHiddenInput="",addHiddenDrop="",addHiddenCheckbox="";$(this).find(".webform-dynamic-fieldInput").css("outline","none"),$(this).find(".webform-dynamic-checkboxField .check-toggle").css("outline","none"),$(".webform-reply-fieldBox").each(function(){if("Y"==$(this).find(".webform-dynamic-fieldInput").attr("isMandate")&&""==$(this).find(".webform-dynamic-fieldInput").val())$(this).append('<span class="errorTxt"></span>'),$(this).find(".webform-dynamic-fieldInput").css("outline","1px solid red");else if($(this).find(".fixLengthNumeric").exists()){var maxlength=$(this).find(".fixLengthNumeric").attr("maxlength");$(this).find(".fixLengthNumeric").val().length!=maxlength&&$(this).find(".fixLengthNumeric").val().length!=maxlength-4?($(this).append('<span class="errorTxt"></span>'),$(this).find(".fixLengthNumeric").css("outline","1px solid red")):($(this).append('<span class="validTxt"></span>'),$("#WebformErrorDiv").css("display","none"),$("#WebformErrorDiv").html(""))}else $(this).find(".webform-dynamic-checkbox").exists()?1!=$(this).find(".webform-dynamic-checkbox").prop("checked")&&($(this).find(".check-toggle").after('<span class="errorTxt"></span>'),$(this).find(".check-toggle").css("outline","1px solid red")):$(this).append('<span class="validTxt"></span>');$(this).find(".webform-dynamic-fieldInput").on("focus",function(){$(this).css("outline","none"),$(this).parent().parent().find(".errorTxt").remove(),$(this).parent().parent().find(".validTxt").remove()}),$(".date-field.webform-dynamic-fieldInput.webform-dynamic-datepicker.hasDatepicker").on("click",function(){$(this).css("outline","none"),$(this).css("text-align","left"),$(this).parent().parent().parent().find(".errorTxt").remove(),$(this).parent().parent().parent().find(".validTxt").remove()}),"fancy dynamic-reply-dropbox fancified"==$(this).find(".field-wrap").find("select").attr("class")?addHiddenDrop+=$(this).find(".webform-dynamic-fieldLabel").html()+":"+$(this).find(".dynamic-reply-dropbox").parent().find(".trigger").text()+",\n":$(this).find(".webform-dynamic-checkbox").exists()?addHiddenCheckbox+=1==$(this).find(".webform-dynamic-checkbox").prop("checked")?$(this).find(".checkboxLabelText").html()+": Yes ,\n":$(this).find(".checkboxLabelText").html()+": No ,\n":addHiddenInput+=$(this).find(".webform-dynamic-fieldLabel").html()+":"+$(this).find(".webform-dynamic-fieldInput").val().trim()+",\n",$(this).find(".errorTxt").length>0&&"undefined"!=$(this).find(".webform-dynamic-fieldInput").attr("webformerrormsg")&&($("#WebformErrorDiv").html($(this).find(".webform-dynamic-fieldInput").attr("webformerrormsg")),$("#WebformErrorDiv").css("display","block"))}),$("#addDynamicVal").val(addHiddenInput+addHiddenDrop+addHiddenCheckbox+"\n"+$("#interactionText").val())})}),$(window).on("load",function(){var loaderHtml='<div class="overlay-loader duplicate"></div>';$("body").append(loaderHtml)}),$(document).ready(function(){$(document).on("click",function(){$(".overlay-loader").eq(1).css("display","none"),$(".overlay-loader").length>1&&$(".overlay-loader.duplicate").css({"z-index":"1000",visibility:"visible"})}),$(document).ajaxComplete(function(){$(".overlay-loader.duplicate").eq(0).css({"z-index":"",visibility:""})}),$("input").on("blur",function(){$("label[for='otp'].error").hasClass("valid")?$("label[for='otpNumber']").addClass("valid"):$("label[for='otpNumber']").removeClass("valid")})}),$(document).ready(function(){$("ul.side-menu li a:contains('Update Aadhaar')").append('<sup class="unReadClass" style="margin-left:0px;">&nbspNew</sup>')}),$(".custom-interaction-box").exists()){$(".webform-reply-container.custom-interaction-container #webform-write-section").show();var additionalInfo="",optionalFieldCount=0,data=$(".proactiveFields").data("json");if(""==data||null==data)$(".webform-dynamic-isMandate").css("display","none"),$(".webform-reply-container .webform-interaction-text").css({"margin-left":"14px",width:"96%"}),$(".webform-reply-container .webform-file-container").css({width:"98%","margin-left":"0%"}),$(".webform-file-container .composeAttachBtn").css("margin-left","14px"),$("#webform-write-section").find(".webform-reply-box").find("#interactionText").attr("placeholder","Please explain your query/complaint in detail");else{viewport.width<768?($(".webform-reply-container .webform-interaction-text").css({width:"89%","margin-left":"0"}),$(".webform-upload-form .webform-file-container").css({"margin-left":"0",width:"90%"}),$(".webform-upload-form .webform-file-container .upload-block-1, .webform-upload-form .webform-file-container .upload-block-2, .webform-upload-form .webform-file-container .upload-block-3").css({width:"88%",margin:"0 0 2%"}),$(".webform-file-container .composeAttachBtn").css("margin-left","0%")):($(".webform-dynamic-isMandate").css("display","block"),$(".webform-reply-container .webform-interaction-text").css({"margin-left":"15%",width:"80.5%"}),$(".webform-reply-container .webform-file-container").css({width:"82%","margin-left":"12%"}),$(".webform-file-container .composeAttachBtn").css("margin-left","4%"));for(var i=0;i<data.length;i++){if(addDynamicField="","FreeText"==data[i].fieldControl)addDynamicField+='<div id="'+data[i].fieldId+'" class="webform-reply-fieldBox">			          				<label class="webform-dynamic-fieldLabel">'+data[i].fieldLabel+'</label>			          				<div class="field-wrap"><input type="text" isMandate="'+data[i].fieldMandatoryFlag+'" maxlength="'+data[i].fieldDataWidth+'" webformErrorMsg="'+data[i].fieldErrorMsg+'" class="webform-dynamic-fieldInput"/>			          				</div>  								</div>';else if("OnlyText"==data[i].fieldControl)addDynamicField+='<div id="'+data[i].fieldId+'" class="webform-reply-fieldBox">			          				<label class="webform-dynamic-fieldLabel">'+data[i].fieldLabel+'</label>			          				<div class="field-wrap"><input type="text" isMandate="'+data[i].fieldMandatoryFlag+'" maxlength="'+data[i].fieldDataWidth+'" webformErrorMsg="'+data[i].fieldErrorMsg+'" class="webform-dynamic-fieldInput onlyAlphaField"/>			          				</div>  								</div>';else if("FixNumeric"==data[i].fieldControl)addDynamicField+='<div id="'+data[i].fieldId+'" class="webform-reply-fieldBox">  								<label class="webform-dynamic-fieldLabel">'+data[i].fieldLabel+'</label>  								<div class="field-wrap"><input type="number" isMandate="'+data[i].fieldMandatoryFlag+'" oninput="javascript: if (this.value.length > this.maxLength) this.value = this.value.slice(0, this.maxLength);" maxlength="'+data[i].fieldDataWidth+'" webformErrorMsg="'+data[i].fieldErrorMsg+'" class="only-numeric webform-dynamic-fieldInput fixLengthNumeric">  							 </div>';else if("CheckBox"==data[i].fieldControl)addDynamicField+='<div id="'+data[i].fieldId+'" class="webform-reply-fieldBox webform-dynamic-checkboxField">				<label class="fancy-checkbox">				<input type="checkbox" isMandate="'+data[i].fieldMandatoryFlag+'" webformErrorMsg="'+data[i].fieldErrorMsg+'" class="webform-dynamic-fieldInput webform-dynamic-checkbox">			 <span class="check-toggle"></span></label><span class="checkboxLabelText">'+data[i].fieldLabel+"</span></div>";else if("Label"==data[i].fieldControl)addDynamicField+='<div id="'+data[i].fieldId+'" class="webform-dynamic-attachLabel">				<span>'+data[i].fieldLabel+"</span>				</div>";else if("Numeric"==data[i].fieldControl)addDynamicField+='<div id="'+data[i].fieldId+'" class="webform-reply-fieldBox">  								<label class="webform-dynamic-fieldLabel">'+data[i].fieldLabel+'</label>  								<div class="field-wrap"><input type="number" isMandate="'+data[i].fieldMandatoryFlag+'" oninput="javascript: if (this.value.length > this.maxLength) this.value = this.value.slice(0, this.maxLength);" maxlength="'+data[i].fieldDataWidth+'" webformErrorMsg="'+data[i].fieldErrorMsg+'" class="only-numeric webform-dynamic-fieldInput">  							 </div>';else if("Calendar"==data[i].fieldControl)addDynamicField+='<div id="'+data[i].fieldId+'" class="webform-reply-fieldBox">  									<div class="datepicker">		          				<label class="webform-dynamic-fieldLabel">'+data[i].fieldLabel+'</label>		          				<div class="field-wrap"><input type="text" isMandate="'+data[i].fieldMandatoryFlag+'" webformErrorMsg="'+data[i].fieldErrorMsg+'" class="date-field webform-dynamic-fieldInput webform-dynamic-datepicker" readonly/>		          				</div></div>							  </div>';else if("Amount"==data[i].fieldControl)addDynamicField+='<div id="'+data[i].fieldId+'" class="webform-reply-fieldBox">				<label class="webform-dynamic-fieldLabel">'+data[i].fieldLabel+'</label>					<div class="field-wrap"><input type="text" isMandate="'+data[i].fieldMandatoryFlag+'" maxlength="'+data[i].fieldDataWidth+'" class="proactiveAmountField webform-dynamic-fieldInput" onKeyPress="return validateProactiveAmountField(this,event);">			 </div>';else if("DropDown"==data[i].fieldControl){var options="",selectOptions="",addDynamicDropdown="";addDynamicDropdown+='<div id="'+data[i].fieldId+'" class="webform-reply-fieldBox">		          				<label class="webform-dynamic-fieldLabel">'+data[i].fieldLabel+'</label>		          				<div class="field-wrap webform-reply-dropbox content-inlineBlock">  									<div class="fancy-select-wrap">  										<select class="fancy dynamic-reply-dropbox"></select>  									</div>  								</div>  								</div>';for(var j=0;j<data[i].fieldControlValue.length;j++)selectOptions+="<option>"+data[i].fieldControlValue[j]+"</option>";$("#webform-dynmic-formfield").append(addDynamicDropdown),$(".dynamic-reply-dropbox").append(selectOptions),$(".dynamic-reply-dropbox").fancySelect()}if($("#webform-dynmic-formfield").append(addDynamicField),$(".date-field.webform-dynamic-fieldInput.webform-dynamic-datepicker.hasDatepicker").datepicker("option","maxDate","0"),$("input.date-field").exists()&&($("input.date-field").attr("type","text").datepicker({dateFormat:"dd-M-yy",changeMonth:!0,changeYear:!0,yearRange:"-100Y:"+(new Date).getFullYear(),onSelect:function(){var validator=$(this).closest("form").validate();validator.element($(this))}}),$(".date-field.webform-dynamic-fieldInput.webform-dynamic-datepicker.hasDatepicker").datepicker("option","maxDate","0")),(void 0!=data[i].fieldToolTip||null!=data[i].fieldToolTip)&&callDynamicTooltip(data[i].fieldToolTip,data[i].fieldId),"Y"!=data[i].fieldMandatoryFlag&&"Calendar"!=data[i].fieldControl){var id="#"+data[i].fieldId;$(id).find(".webform-dynamic-fieldInput").attr("placeholder","(Optional)"),$(id).find(".webform-dynamic-fieldInput").css("text-align","right"),optionalFieldCount++}else if("Y"!=data[i].fieldMandatoryFlag&&"Calendar"==data[i].fieldControl){var id="#"+data[i].fieldId;$(id).find(".webform-dynamic-fieldInput").attr("placeholder","(Optional)"),$(id).find(".webform-dynamic-fieldInput").css("text-align","left")}$(".webform-dynamic-fieldInput").on("focus",function(){$(this).css("text-align","left"),$(this).attr("placeholder","")}),$(".webform-dynamic-fieldInput").on("blur",function(){"Y"!=$(this).attr("ismandate")&&"date-field webform-dynamic-fieldInput webform-dynamic-datepicker hasDatepicker"!=$(this).attr("class")?""==$(this).val()&&($(this).attr("placeholder","(Optional)"),$(this).css("text-align","right")):"Y"!=$(this).attr("ismandate")&&"date-field webform-dynamic-fieldInput webform-dynamic-datepicker hasDatepicker"==$(this).attr("class")&&""==$(this).val()&&($(this).attr("placeholder","(Optional)"),$(this).css("text-align","left"))}),$("#webform-dynmic-formfield .webform-reply-fieldBox").find("input").each(function(){var className=$(this).attr("class"),mobile2=$(window).outerWidth()<768?!0:!1;if(mobile2){var classNameCHK=className.includes("only-numeric"),classNameAmnt=className.includes("proactiveAmountField"),classNameOnlyAlpha=className.includes("onlyAlphaField");classNameCHK&&($(this).attr("type","text"),$(this).attr("oninput","this.value=this.value.replace(/[^0-9]/g,'')")),classNameAmnt&&$(".proactiveAmountField.webform-dynamic-fieldInput").on("input",function(){var val=$(this).val();$(this).val(val.trim());var reg=/\d+\.{1}\d{3,}/;1==reg.test(val)&&$(this).val(val.slice(0,-1)),1==isNaN(val)&&$(this).val(val.slice(0,-1))}),classNameOnlyAlpha&&($(this).attr("type","text"),$(this).attr("oninput","this.value=this.value.replace(/[^a-zA-Z ]/g,'')"))}$(".onlyAlphaField.webform-dynamic-fieldInput").keydown(function(e){if(e.ctrlKey||e.altKey)e.preventDefault();else{var key=e.keyCode?e.keyCode:e.which;(key>=33&&36>=key||38==key||key>=40&&45>=key||key>=47&&64>=key||key>=186&&222>=key||key>=96&&111>=key)&&e.preventDefault()}})})}optionalFieldCount==$(".webform-dynamic-fieldInput").length?$("#webform-write-section").find(".webform-reply-box").find("#interactionText").attr("placeholder","Please explain your query/complaint in detail"):$("#webform-write-section").find(".webform-reply-box").find("#interactionText").attr("placeholder","If you have any further comments you would like to add")}}$(document).ready(function(){if($(".validate-form.preloginAadharRegForm").exists()){$("#card-number-single").css("width","190px");var base64String=$("#captchaStr").val();$("img.captcha").attr("src","data:image/jpeg;base64,"+base64String)}$(".refresh_captcha img").on("click",function(){$("#captcha_input_chars").val(""),$(".captcha_wrapper").find("label").remove(),$("#captcha_input_chars").removeClass("error"),console.log("inside click");var href=$("#captchaHref").val();$.ajax({type:"POST",url:href,beforeSend:function(){var loaderHtml='<div class="overlay-loader"></div>';$("body").append(loaderHtml)},complete:function(){$("body").find("div.overlay-loader").remove()},success:function(data){var base64String=data.Captcha;null!=base64String&&($("div.captcha").css("background-image","url('data:image/png;base64,"+base64String+"')"),$("img.captcha").attr("src","data:image/jpeg;base64,"+base64String))},error:function(){alert("Sorry! Due to a technical error, Captcha could not be generated.")}})}),"failure"==$("#aadhar-captcha-status").val()?($("#captcha_input_chars").addClass("error"),$("input#captcha_input_chars").after('<label for="aadhar-input-text" class="error"> </label>'),$(".captcha_wrapper").find("label").css("display","inline-block")):"success"==$("#aadhar-captcha-status").val()&&($("#captcha_input_chars").removeClass("error"),$("input#captcha_input_chars").after('<label for="aadhar-input-text" class="valid"> </label>'),$(".captcha_wrapper").find("label").css("display","inline-block")),$(".prelogin-aadhar-register-container #card-auth-form #preloginAadharRegBtn").on("click",function(){var loaderHtml='<div class="overlay-loader"></div>';if($("body").append(loaderHtml),$(".captcha_wrapper").find("label").remove(),1==$(".prelogin-aadhar-register-container #card-auth-form").valid()){if(""==$("#captcha_input_chars").val())return $("#captcha_input_chars").addClass("error"),$("input#captcha_input_chars").after('<label for="aadhar-input-text" class="error"> </label>'),$(".captcha_wrapper").find("label").css("display","inline-block"),$("body").find("div.overlay-loader").remove(),!1;$("#captcha_input_chars").removeClass("error"),$("input#captcha_input_chars").after('<label for="aadhar-input-text" class="valid"> </label>'),$(".captcha_wrapper").find("label").css("display","inline-block"),submitAadharForm()}else if(0==$(".prelogin-aadhar-register-container #card-auth-form").valid())return""!=$("#captcha_input_chars").val()?($("#captcha_input_chars").removeClass("error"),$("input#captcha_input_chars").after('<label for="aadhar-input-text" class="valid"> </label>'),$(".captcha_wrapper").find("label").css("display","inline-block"),$("body").find("div.overlay-loader").remove(),!1):($("#captcha_input_chars").addClass("error"),$("input#captcha_input_chars").after('<label for="aadhar-input-text" class="error"> </label>'),$(".captcha_wrapper").find("label").css("display","inline-block"),$("body").find("div.overlay-loader").remove(),!1)})}),$(document).ready(function(){$(".multicardmaster").exists()&&(console.log("main1"),$(".login-page").css("height","auto"))}),$(window).on("load",function(){$(".multicardmaster").exists()&&(console.log("main2"),$(".login-page").css("height","auto"))}),$(".multicardmaster").exists()&&(console.log("main3"),$(".login-page").css("height","auto"));var tempBranchList,filteredBranchList=[];$(document).ready(function(){$("input[type=radio][name=encashSelectionMode]").on("change",function(){if($(this).is(":checked")){var selectedVal=$(this).prop("value");$("#encash-form #disbursementMode").val(selectedVal),"Cheque"==selectedVal?(""!=$("#encash-form #bookingAmnt").val()&&encashAmountCheck(),enableChequeField()):"NEFT"==selectedVal&&(enableNeftField(),""!=$("#encash-form #bookingAmnt").val()&&encashAmountCheck())}}),$("input[type=radio][name=emdSelectionMode]").on("change",function(){if($(this).is(":checked")){var selectedVal=$(this).prop("value");$("#emd-form #disbursementMode").val(selectedVal),"Cheque"==selectedVal?(""!=$("#emd-form #bookingAmnt").val()&&emdAmountCheck(),enableChequeField()):"NEFT"==selectedVal&&(enableNeftField(),""!=$("#emd-form #bookingAmnt").val()&&emdAmountCheck())}}),$(".neft-input-box.neftAccntField").keypress(function(e){return 8!=e.which&&0!=e.which&&(e.which<48||e.which>57)?!1:void 0}),$("#maskedEncashAccNo").on("blur",function(){$(this).parent().find("label").remove(),isNaN($("#maskedEncashAccNo").val())||$("#encashAccNo").val($("#maskedEncashAccNo").val());for(var maskedAcntNo="",i=0;i<$(this).val().length;i++)maskedAcntNo+="X";$("#maskedEncashAccNo").val(maskedAcntNo),""!=$(this).val()?($(this).parent().find("label.error").remove(),$(this).parent().parent().addClass("width-95-emd-emi"),$(this).removeClass("error").css("border-color","#cdcbcb;").after('<label for="encashAccNo" class="valid"></label>')):($(this).parent().find("label.valid").remove(),$(this).css("border-color","red").after('<label for="encashAccNo" class="error"></label>'),$(this).parent().parent().addClass("width-95-emd-emi")),""!=$("#encashConfirmAccNo").val()&&($("#encashConfirmAccNo").parent().find("label").remove(),$("#encashConfirmAccNo").val()!=$("#encashAccNo").val()?($("#encashConfirmAccNo").css("border-color","red"),$("#encashConfirmAccNo").addClass("error"),$("#encashConfirmAccNo").after('<label for="encashAccNo" class="error"></label>'),$("#encashConfirmAccNo").parent().parent().addClass("width-95-emd-emi"),resetNeftChequeFeild()):($("#encashConfirmAccNo").css("border-color","#cdcbcb"),$("#encashConfirmAccNo").removeClass("error"),$("#encashConfirmAccNo").after('<label for="encashAccNo" class="valid"></label>'),$("#encashConfirmAccNo").parent().parent().addClass("width-95-emd-emi"),resetNeftChequeFeild()))}),$("#maskedEncashAccNo").bind("cut copy paste",function(e){e.preventDefault()}),$("#maskedEncashAccNo").on("focus",function(){var start=this.selectionStart,end=this.selectionEnd;""!=$(this).val()&&($(this).val($("#encashAccNo").val()),this.value=this.value.toLowerCase(),this.setSelectionRange(start,end))}),$("#neft-beneficiaryAcnt").on("change",function(){$(".neft-input-box").each(function(){$(this).css("border-color","#cdcbcb"),$(this).removeClass("error"),$(this).parent().find("label").remove()}),resetNeftChequeFeild();var selectedIFSC=$(this).find("option:selected").attr("data-ifsc"),selectedBankName=$(this).find("option:selected").attr("data-bankname"),selectedFullBankName=$(this).find("option:selected").attr("data-fullbankname");$("#beneficiaryBankName").val(selectedFullBankName);var selectedAcctNo=$(this).parent().find(".trigger").html();$("#neft-ifsc-field").val(selectedIFSC),$("#neft-bankDetail-field").val(selectedBankName),$("#CBRBankName").val("data-bankname"),isNaN(selectedAcctNo)||$("#encashAccNo").val(selectedAcctNo);for(var maskedAcntNo="",i=0;i<selectedAcctNo.length;i++)maskedAcntNo+="X";
$("#maskedEncashAccNo").val(maskedAcntNo),$("#encashConfirmAccNo").val(selectedAcctNo)}),$(".neft-input-box").on("change",function(){resetNeftChequeFeild(),$(this).parent().find("label").remove(),""==$(this).val()?($(this).css("border-color","red"),$(this).addClass("error"),$(this).after('<label class="error"></label>')):($(this).removeClass("error"),$(this).css("border-color","#cdcbcb"),$(this).after('<label class="valid"></label>'))}),$("#neft-ifsc-field").on("blur",function(){$(this).parent().find("label").remove(),selected_value=$(this).val(),""!=$(this).val()?$.ajax({url:"/creditcards/app/benefits/getIFSCDetailsForNEFT",data:{IFSCCode:selected_value},beforeSend:function(){var loaderHtml='<div class="overlay-loader"></div>';$("body").append(loaderHtml)},complete:function(){$("body").find("div.overlay-loader").remove()},type:"POST",success:function(data){var data=JSON.parse(data);"Success"==data.IFSCStatus?($("#neft-ifsc-field").removeClass("error"),$("#neft-ifsc-field").css("border-color","#cdcbcb"),$("#neft-ifsc-field").after('<label class="valid"></label>'),$("#neft-ifsc-field").parent().parent().addClass("width-95-emd-emi"),$("#neft-bankDetail-field").val(data.branchesForNEFT[0].bankName+", "+data.branchesForNEFT[0].branch+", "+data.branchesForNEFT[0].address),$("#beneficiaryBankName").val(data.branchesForNEFT[0].bankName),$("#CBRBankName").val(data.branchesForNEFT[0].bankName)):($("#neft-ifsc-field").css("border-color","red"),$("#neft-ifsc-field").addClass("error"),$("#neft-ifsc-field").after('<label class="error"></label>'),$("#neft-bankDetail-field").val(""),$("#neft-ifsc-field").parent().parent().addClass("width-95-emd-emi"))},error:function(){}}):($("#neft-ifsc-field").css("border-color","red"),$("#neft-ifsc-field").addClass("error"),$("#neft-ifsc-field").after('<label class="error"></label>'),$("#neft-bankDetail-field").val(""),$("#neft-ifsc-field").parent().parent().addClass("width-95-emd-emi"))}),$("#neft-ifsc-field").on("keypress",function(event){var regex=new RegExp("^[a-zA-Z0-9]+$"),key=String.fromCharCode(event.charCode?event.charCode:event.which);return regex.test(key)?void 0:(event.preventDefault(),!1)}),$(".neft-link-text").on("click",function(){$("#neft-searchPopup").removeClass("hide"),$("#neft-bankDetailPopup").addClass("hide"),$("#neftCityDetail").attr("disabled","disabled"),$("#neftBranchHint").attr("disabled","disabled"),$("#neft-confirmBtn").css("pointer-events","none"),$("#neftPopupFields .request-boxes1 input").each(function(){$(this).val(""),$(this).removeClass("valid"),$(this).removeClass("error"),$(this).parent().find("label").remove()}),$(".neft-input-box.neftIfscCode").val(""),$(".neft-input-box.neftIfscCode").parent().find("label").remove(),$(".neft-input-box.neftIfscCode").removeClass("error").removeClass("valid").css("border-color","#cdcbcb"),$("#neft-bankDetail-field").val("");var availableTags=[],autoSelectVal="";openModalPopup("neft-ifsc-popup");var selected_value=$("#disbursementMode").val();$.ajax({url:"/creditcards/app/benefits/getBankNamesForNEFT",data:{modeofPayment:selected_value},type:"POST",success:function(data){data=JSON.parse(data);for(var i=0;i<data.bankname.length;i++)availableTags.push(data.bankname[i])},error:function(){}}),$("#neftBankName").on("focus",function(){$(this).autocomplete({minLength:0,source:availableTags,delay:100,autoFocus:!1,select:function(event,ui){autoSelectVal=ui.item.value},appendTo:"#neftbankNameList",response:function(){}}).autocomplete("widget"),$("#neftbankNameList").css("display","block")}),isiOS&&(viewport.width<768?$("body").css("position","fixed"):$("body").css("position","static"))});var availableCityTags=[];$("#neftBankName").on("blur",function(){if($("#neftCityDetail").siblings(".placeholder").removeClass("placeholder-active"),$("#neftBranchHint").siblings(".placeholder").removeClass("placeholder-active"),$("#neftCityDetail").siblings(".placeholder").removeClass("placeholder-value-inactive"),$("#neftBranchHint").siblings(".placeholder").removeClass("placeholder-value-inactive"),$("#neftCityDetail").removeClass("name-input-filled"),$("#neftBranchHint").removeClass("name-input-filled"),$("#neft-srchBtn").addClass("IFSC-gray-btn"),""==$(this).val())$("#neftCityDetail").val("").attr("disabled","disabled").parent().find("label").remove(),$("#neftBranchHint").val("").attr("disabled","disabled").parent().find("label").remove();else{var selected_value=$("#neftBankName").val();$("#CBRBankName").val(selected_value),$.ajax({url:"/creditcards/app/benefits/getCitiesForBankNameForNEFT",data:{bankName:selected_value},cache:!0,beforeSend:function(){var loaderHtml='<div class="overlay-loader"></div>';$("body").append(loaderHtml),$(".overlay-loader").css("z-index","999999")},complete:function(){$(".overlay-loader").css("z-index","999"),$("body").find("div.overlay-loader").remove(),$("#neftCityDetail").removeAttr("readonly")},type:"POST",success:function(data){if(availableCityTags=[],$(".neftCitySearchList").empty(),$("#neftCityDetail,#neftBranchHint").val("").parent().find("label").remove(),$("#neftCityDetail").removeAttr("disabled"),data){data=JSON.parse(data);for(var i=0;i<data.cityName.length;i++)availableCityTags[i]=data.cityName[i]}else $(".overlay-loader").css("z-index","999"),$("body").find("div.overlay-loader").remove(),$("#neftCityDetail").removeAttr("readonly")},error:function(){}})}}),$("#neftCityDetail").on("focus",function(){var autoSelectVal="";$(this).autocomplete({minLength:3,source:availableCityTags,delay:100,autoFocus:!1,select:function(event,ui){autoSelectVal=ui.item.value},appendTo:"#neftCityList",response:function(){}}).autocomplete("widget"),$("#neftCityList").css("display","block")}),$("#neft-srchBtn").on("click",function(){$(".modal.neft-ifsc-modal .content .form-field-list .request-boxes1 .field-wrap label").remove();var neftFlag=3;if(3==neftFlag&&$("#neftBranchHint").val().length>=3){var loaderHtml='<div class="overlay-loader"></div>';$("body").append(loaderHtml),$(".overlay-loader").css("z-index","999999999"),$("#neftBranchHint").parent().find("label").remove(),$("#neftBranchHint").after('<label class="valid"></label>'),filteredBranchList=[];var selected_city=$("#neftCityDetail").val().toUpperCase(),selected_bank=$("#neftBankName").val().toUpperCase();$.ajax({url:"/creditcards/app/benefits/getBranchListForNEFT",data:{bankName:selected_bank,cityName:selected_city},type:"POST",success:function(data){if(data){filteredBranchList=[],data=JSON.parse(data);var neftFilteredBranchList="";if($("#neftBranchHint").val().length>=3){var fieldVal=$("#neftBranchHint").val().toUpperCase();tempBranchList=data.branchesForNEFT,filteredBranchList=tempBranchList.getByType(fieldVal),$("#listLength").html(filteredBranchList.length+" results found"),$(".hidenListCount").val(filteredBranchList.length);for(var k=0;k<filteredBranchList.length;k++){neftFilteredBranchList+='<div class="IFSC-list-outer-box" onclick="setBankDetails('+k+')">															<div class="IFSC-list-inner-padding" id="IFSC-list-inner-padding'+k+'">															<div class="IFSC-Radio-button" style="min-width:14px; margin-right: 19px;"><span class="IFSC-Radio-button-checked" id="IFSC-Bank-Detail-radio-'+k+'"></span></div>															<div class="IFSC-flex-wrap-mobile">       														<div class="IFSC-list-column-1"><div class="IFSC-title">Bank Name</div><div class="IFSC-sub-title">'+filteredBranchList[k].bankName+'</div></div>          													<div class="IFSC-list-column-2"><div class="IFSC-title">Branch</div><div class="IFSC-sub-title">'+filteredBranchList[k].branch+'</div></div>          													<div class="IFSC-list-column-3"><div class="IFSC-title">IFSC</div><div class="IFSC-sub-title">'+filteredBranchList[k].ifsccode+'</div></div>          													<div class="IFSC-list-column-4"><div class="IFSC-title">Address</div><div class="IFSC-sub-title">'+filteredBranchList[k].address+"</div></div>											</div>          													</div>										</div>"}}$("#IFSC-searchList").html(neftFilteredBranchList),0==filteredBranchList.length?($("#IFSC-result-block").css("display","flex"),$("#IFSC-search-block").css("display","none"),$(".IFSC-list-button-block").css("display","flex"),$(".IFSC-search-button-block").css("display","none"),$("body").find("div.overlay-loader").remove(),$("#dynamicSerachList").addClass("hide"),$("#filteredErrMsg").html("No records found."),$("#neft-searchPopup").addClass("hide"),$("#neft-bankDetailPopup").removeClass("hide"),$(".neft-bankdetails-popup.kyc-modal").css("top","20%"),0!=$("#dynamicSerachList").find(".branchListTbl").length&&callDisplayFilteredList()):($("#IFSC-result-block").css("display","flex"),$("#IFSC-search-block").css("display","none"),$(".IFSC-list-button-block").css("display","flex"),$(".IFSC-search-button-block").css("display","none"),$("body").find("div.overlay-loader").remove(),$("#dynamicSerachList").removeClass("hide"),$("#filteredErrMsg").html(""),$("#neft-searchPopup").addClass("hide"),$("#neft-bankDetailPopup").removeClass("hide"),$(".neft-bankdetails-popup.kyc-modal").css("top","20%"),0!=$("#dynamicSerachList").find(".branchListTbl").length&&callDisplayFilteredList(),$("#IFSC-searchList").animate({scrollTop:0},"fast"))}else $("#IFSC-result-block").css("display","flex"),$("#IFSC-search-block").css("display","none"),$(".IFSC-list-button-block").css("display","flex"),$(".IFSC-search-button-block").css("display","none"),$("body").find("div.overlay-loader").remove(),$("#filteredErrMsg").html("No records found."),$("#neft-searchPopup").addClass("hide"),$("#neft-bankDetailPopup").removeClass("hide"),$(".neft-bankdetails-popup.kyc-modal").css("top","20%")},error:function(){}})}else $("#neftBranchHint").parent().find("label").remove(),$("#neftBranchHint").after('<label class="error"></label>')}),$("#neftBankName").on("blur",function(){$(this).parent().find("label").remove(),""!=$(this).val()||$(this).after('<label class="error"></label>');var keyEvent=$.Event("keydown");return keyEvent.keyCode=$.ui.keyCode.ENTER,$(this).trigger(keyEvent),!1}),$("#neftBranchHint").on("blur",function(){$(this).parent().find("label").remove(),$(this).val().length>=3||$(this).after('<label class="error"></label>')}),$("#neftCityDetail").on("blur",function(){$(this).parent().find("label").remove(),""==$(this).val()?($(this).after('<label class="error"></label>'),$("#neftBranchHint").val("").attr("disabled","disabled").parent().find("label").remove()):$("#neftBranchHint").removeAttr("disabled");var keyEvent=$.Event("keydown");return keyEvent.keyCode=$.ui.keyCode.ENTER,$(this).trigger(keyEvent),!1}),$(".close-neft-popup").on("click",function(){$("#neft-confirmBtn").css("pointer-events","none"),$("body").css("position","static"),$(".modal-overlay").removeClass("open"),$("#dynamicSerachList").empty(),$("#neftCityDetail").attr("disabled","disabled"),$("#neftBranchHint").attr("disabled","disabled"),$(".neft-input-box.neftIfscCode").val(""),$(".neft-input-box.neftIfscCode").parent().find("label").remove(),$(".neft-input-box.neftIfscCode").removeClass("error").removeClass("valid").css("border-color","#cdcbcb"),$("#neft-bankDetail-field").val("")}),$(".reset-box1 #reset-search-fields").on("click",function(){$("#neftPopupFields .request-boxes1 .field-wrap").find("label").remove(),$("#neftPopupFields .request-boxes1 input").each(function(){$(this).val(""),$(this).removeClass("error")}),$("#neft-ifsc-field").val(""),$("#neft-bankDetail-field").val(""),$("#neftCityDetail").attr("disabled","disabled"),$("#neftBranchHint").attr("disabled","disabled")}),$("#load-more-bankDetails").on("click",function(){if(100==$(".showListNeft").length&&$(".branchListTbl").length>100)$("#filteredErrMsg").html("Too many records found! Please refine your search."),$("#dynamicSerachList").addClass("hide"),$(".load-more-list.bank-detail-load").hide(),$("#listLength").css("display","none");else{$("#dynamicSerachList").removeClass("hide");var vissibleInteractionCount=$("#dynamicSerachList").find(".showListNeft").length,index=0;$("#dynamicSerachList").find(".branchListTbl").each(function(){index>=vissibleInteractionCount&&vissibleInteractionCount+10>index?$(this).addClass("showListNeft"):!0,index++}),viewport.width<768?$("#listLength").css("display","block"):$("#listLength").css("display","none"),showNeftLoadBtn()}}),$("#back-search-fields").on("click",function(){$("#neft-confirmBtn").css("pointer-events","none"),$("#neftPopupFields .request-boxes1 input").each(function(){$(this).val(""),$(this).removeClass("valid"),$(this).removeClass("error"),$(this).parent().find("label").remove()}),$("#neft-searchPopup").removeClass("hide"),$("#neft-bankDetailPopup").addClass("hide"),$("#dynamicSerachList").empty(),$("#neft-ifsc-field").val(""),$("#neft-bankDetail-field").val(""),$("#neftCityDetail").attr("disabled","disabled"),$("#neftBranchHint").attr("disabled","disabled")}),$("#neft-confirmBtn").on("click",function(){$("body").css("position","static"),$(".modal-overlay").removeClass("open"),$("#dynamicSerachList").empty()}),$("#encashAccNo").on("blur",function(){$(this).parent().find("label").remove(),""==$(this).val()?($(this).css("border-color","red"),$(this).addClass("error"),$(this).after('<label for="encashAccNo" class="error"></label>'),$(this).parent().parent().addClass("width-95-emd-emi"),resetNeftChequeFeild()):""!=$(this).val()&&($(this).css("border-color","#cdcbcb"),$(this).removeClass("error"),$(this).after('<label for="encashAccNo" class="valid"></label>'),$(this).parent().parent().addClass("width-95-emd-emi"),resetNeftChequeFeild())}),$("#encashConfirmAccNo").on("blur",function(){$(this).parent().find("label").remove(),""==$(this).val()?($(this).css("border-color","red"),$(this).addClass("error"),$(this).after('<label for="encashAccNo" class="error"></label>'),$(this).parent().parent().addClass("width-95-emd-emi"),resetNeftChequeFeild()):""!=$(this).val()&&($(this).val()!=$("#encashAccNo").val()?($(this).css("border-color","red"),$(this).addClass("error"),$(this).after('<label for="encashAccNo" class="error"></label>'),$(this).parent().parent().addClass("width-95-emd-emi"),resetNeftChequeFeild()):($(this).css("border-color","#cdcbcb"),$(this).removeClass("error"),$(this).after('<label for="encashAccNo" class="valid"></label>'),$(this).parent().parent().addClass("width-95-emd-emi"),resetNeftChequeFeild()))}),$("#neftInputFields").find("input").each(function(){var className=$(this).attr("class"),mobile2=$(window).outerWidth()<768?!0:!1;if(mobile2){var classNameCHK=className.includes("neftAccntField"),classAplphaNumCHK=className.includes("neftIfscCode");classNameCHK&&($(this).attr("type","text"),$(this).attr("oninput","this.value=this.value.replace(/[^0-9]/g,'')")),classAplphaNumCHK&&($(this).attr("type","text"),$(this).attr("oninput","this.value=this.value.replace(/^[a-zA-Z0-9]+$,'')"))}}),$("#encash-form #term-condition-id").click(function(){var countNeft=0,countCheque=0;"NEFT"==$("#encash-form #disbursementMode").val()?($("#encash-form #neftInputFields .neft-input-box").each(function(){""==$(this).val()&&countNeft++}),this.checked&&0==countNeft&&!$("#encash-form #neftInputFields input.error").exists()&&$.trim($("#processingFee").val()).length>0&&!$("#encash-form #neftInputFields #error").exists()&&6==$("#encash-form #otp").val().length&&$("#encashAccNo").val().length>0&&$("#encashConfirmAccNo").val().length>0&&$("#neft-ifsc-field").val().length>0?(console.log("inside NEFT Not condition"),$("#encash-form #confirm-button").removeClass("disabled").removeAttr("disabled").addClass("primary").removeClass("secondary")):(console.log("inside NEFT "),$("#encash-form #confirm-button").addClass("disabled").attr("disabled","disabled").removeClass("primary").addClass("secondary"))):"Cheque"==$("#encash-form #disbursementMode").val()&&($("#encash-form #checkInputFields input").each(function(){""==$(this).val()&&countCheque++}),this.checked&&0==countCheque&&!$("#encash-form #checkInputFields input.error").exists()&&$.trim($("#processingFee").val()).length>0&&!$("#encash-form #checkInputFields #error").exists()&&6==$("#encash-form #otp").val().length&&$("#encashBankName").val().length>0?(console.log("inside Disvursement condition"),$("#encash-form #confirm-button").removeClass("disabled").removeAttr("disabled").addClass("primary").removeClass("secondary")):(console.log("inside Disvursement condition"),$("#encash-form #confirm-button").addClass("disabled").attr("disabled","disabled").removeClass("primary").addClass("secondary")))}),$("#emd-form #term-condition-id").click(function(){var countNeft=0,countCheque=0;"NEFT"==$("#emd-form #disbursementMode").val()?($("#emd-form #neftInputFields .neft-input-box").each(function(){""==$(this).val()&&countNeft++}),this.checked&&0==countNeft&&!$("#emd-form #neftInputFields input.error").exists()&&$.trim($("#processingFee").val()).length>0&&!$("#emd-form #neftInputFields #error").exists()&&6==$("#emd-form #otp").val().length&&$("#encashAccNo").val().length>0&&$("#encashConfirmAccNo").val().length>0&&$("#neft-ifsc-field").val().length>0?$("#emd-form #confirm-button").removeClass("disabled").removeAttr("disabled").addClass("primary").removeClass("secondary"):$("#emd-form #confirm-button").addClass("disabled").attr("disabled","disabled").removeClass("primary").addClass("secondary")):"Cheque"==$("#emd-form #disbursementMode").val()&&($("#emd-form #checkInputFields input").each(function(){""==$(this).val()&&countCheque++}),this.checked&&0==countCheque&&!$("#emd-form #checkInputFields input.error").exists()&&$.trim($("#processingFee").val()).length>0&&!$("#emd-form #checkInputFields #error").exists()&&6==$("#emd-form #otp").val().length&&$("#emdBankName").val().length>0?$("#emd-form #confirm-button").removeClass("disabled").removeAttr("disabled").addClass("primary").removeClass("secondary"):$("#emd-form #confirm-button").addClass("disabled").attr("disabled","disabled").removeClass("primary").addClass("secondary"))})}),Array.prototype.getByType=function(fieldVal){for(var tempArrList=[],i=0,j=0;j<tempBranchList.length;j++){var objBranchList=tempBranchList[j],branchLocationList=objBranchList.branchLocationConcatinated;branchLocationList.indexOf(fieldVal)>=0&&(tempArrList[i]=objBranchList,i++)}return tempArrList};var num_of_uploads_current=1,add_more_upload=function(e){var $this=$(e),element_string='<div class="upload-row added-more">								<div class="main-upload-button" id="cli-upload-addmore'+(num_of_uploads_current+1)+'">									<div class="upload-file-name">									</div>									<div class="the-button">										<input type="file" class="cli-file-new" id="file'+(num_of_uploads_current+1)+'" name="">										<label class="cli-file-add" for="file'+(num_of_uploads_current+1)+'">Browse</label>										<input type="hidden" id="adhoccli_doc_'+(num_of_uploads_current+1)+'" name=""/>									</div>								</div>								<div class="upload-icons">								<span class="icon tooltip new cli-icon"><span class="tip-content cli-tip-content">A minimum of 1 document needs to be submitted as proof to apply for a Credit Limit Increase.</span></span>								<span class="cli-field-error" id="cli-removeFile'+(num_of_uploads_current+1)+'Error">								</span>								</div>							</div>';$this.closest(".add-more-button").before(element_string),$("#file"+(num_of_uploads_current+1)).trigger("click"),num_of_uploads_current++,3==num_of_uploads_current&&$(".add-more-button").hide(),$(".cli-file-new").on("click",function(){var id=$(this).attr("id");$("#"+id).blur()})};$(document).ready(function(){$(".cli-container").exists()&&($("#cli-l2-section").css("display","none"),$("#cli-l1-section").css("display","block"),$("#cli-docupload-section").css("display","none"),$(".cli-l1-dropbox .trigger").text("Select category"),$(".cli-expand-l1-container").css("display","none"),$(".cli-expand-l2-container").css("display","none"),$(".expand-l1-container").css("display","none"),$(".expand-l2-container").css("display","none"),$("#cli-level1-dropbox").on("change",function(){null!=$("#cli-level1-dropbox").val()&&$("#cli-l1-section .fancy-select div.trigger").css("color","#333333"),""!=$("#income").val()&&null!=$("#cli-level1-dropbox").val()?($("#cli-subcategory-enable .button").removeAttr("disabled"),$("#cli-subcategory-enable .button").removeClass("disabled")):($("#cli-subcategory-enable .button").attr("disabled","disabled"),$("#cli-subcategory-enable .button").addClass("disabled"))}),$("section#cli-l1-section input[type=text]").on("keyup",function(){""!=$("#income").val()&&null!=$("#cli-level1-dropbox").val()?($("#cli-subcategory-enable .button").removeAttr("disabled"),$("#cli-subcategory-enable .button").removeClass("disabled")):($("#cli-subcategory-enable .button").attr("disabled","disabled"),$("#cli-subcategory-enable .button").addClass("disabled"))}),$(".income-box").find("input").each(function(){var className=$(this).attr("class"),mobile2=$(window).outerWidth()<768?!0:!1;if(mobile2){var classNameCHK=className.includes("only-numeric");classNameCHK&&($(this).attr("type","text"),$(this).attr("oninput","this.value=this.value.replace(/[^0-9]/g,'')"))}}),$(".declaration-check input").on("change",function(){$(".declaration-check input").is(":checked")?($("#cli-docupload-enable .button").removeAttr("disabled"),$("#cli-docupload-enable .button").removeClass("disabled")):($("#cli-docupload-enable .button").attr("disabled","disabled"),$("#cli-docupload-enable .button").addClass("disabled"))}),$(".cli-expand-l1-container").on("click",function(){$("#validation-file3").hide(),$("#validation-file2").hide(),$("#validation-file1").hide(),$(".validation-message1").hide(),$("#income").removeAttr("disabled"),$(".cli-field-error").css("display","none"),$(".cli-l2-dropbox .fancy-select-wrap div.trigger").css("color","#666"),$("#cli-upload-button").closest(".main-upload-button").removeClass("v-error"),$("input[type=button]").removeClass("disabled"),$("input[type=button]").removeAttr("disabled"),$("#cli-l1-section").css("display","block"),$("#accordian-l1-tick").css("display","none"),$("#cli-l2-section").css("display","none"),$("#cli-docupload-section").css("display","none"),$("#header-l1-span").css("display","block"),$(".selected-l1").empty(),$(".selected-l2").empty(),$("#cli-upload-form #employment").val(""),$("#cli-upload-form #salary").val(""),$("#accordian-l2-tick").css("display","none"),$("#header-l2-span").css("display","block"),$(".cli-expand-l1-container").css("display","none"),$(".cli-expand-l2-container").css("display","none"),$(".cli-l2-dropbox .options").html(""),$(".cli-l2-dropbox #cli-level2-dropbox").html('<option selected disabled value="" id="docType">Document Type</option>'),$(".cli-l2-dropbox .trigger").html("Document Type"),$(".declaration-check input").attr("checked",!1),$(".declaration-check label.fancy-checkbox").removeClass("checked"),$("#cli-docupload-enable .button").attr("disabled","disabled"),$("#cli-docupload-enable .button").addClass("disabled"),$(".main-upload-doc input#file2").closest(".upload-row").remove(),$(".main-upload-doc input#file3").closest(".upload-row").remove(),$(".main-upload-button .upload-file-name").html(""),$("#file1").val(""),$("#file1").prop("disabled",!0),$(".validation-message").hide(),$(".main-upload-doc input#file1").closest(".main-upload-button").removeClass("v-error"),$(".main-upload-doc div.add-more-button").is(":hidden")&&($(".add-more-button").show(),num_of_uploads_current=1)}),$(".cli-expand-l2-container").on("click",function(){$("#validation-file3").hide(),$("#validation-file2").hide(),$("#validation-file1").hide(),$(".validation-message1").hide(),$("#cli-removeFile1Error").css("display","none"),$(".cli-l2-dropbox .fancy-select-wrap div.trigger").css("color","#666"),$("#cli-upload-button").closest(".main-upload-button").removeClass("v-error"),$("#cli-l2-section").css("display","block"),$("#accordian-l2-tick").css("display","none"),$("#cli-l1-section").css("display","none"),$("#header-l2-span").css("display","block"),$(".selected-l2").empty(),$("#cli-docupload-section").css("display","none"),$(".cli-expand-l2-container").css("display","none"),$(".declaration-check input").attr("checked",!1),$(".declaration-check label.fancy-checkbox").removeClass("checked"),$("#cli-docupload-enable .button").attr("disabled","disabled"),$("#cli-docupload-enable .button").addClass("disabled"),$(".cli-l2-dropbox .trigger").html("Document Type"),$(".main-upload-doc input#file2").closest(".upload-row").remove(),$(".main-upload-doc input#file3").closest(".upload-row").remove(),$(".main-upload-button .upload-file-name").html(""),$("#file1").val(""),$("#file1").prop("disabled",!0),$(".main-upload-doc input#file1").closest(".main-upload-button").removeClass("v-error"),$(".validation-message").hide(),$(".main-upload-doc div.add-more-button").is(":hidden")&&($(".add-more-button").show(),num_of_uploads_current=1)}),$("#cli-level2-dropbox").on("change",function(){$("#cli-removeFile1Error").css("display","none"),null==$("#cli-level2-dropbox").val()?$(".cli-l2-dropbox .fancy-select").css("border","1px solid red"):($(".cli-l2-dropbox .fancy-select-wrap div.trigger").css("color","#333333"),$("#file1").prop("disabled",!1),$(".cli-field-error").css("display","none"),$(".cli-l2-dropbox .fancy-select").css("border","1px solid #ccc"),$(".main-upload-doc input#file2").closest(".upload-row").remove(),$(".main-upload-doc input#file3").closest(".upload-row").remove(),$(".main-upload-button .upload-file-name").html(""),$(".main-upload-button .upload-file-name .cli-input-file").html(""),$("#file1").val(""),$(".validation-message").hide(),$(".validation-message1").hide(),$(".main-upload-doc input#file1").closest(".main-upload-button").removeClass("v-error"),$(".main-upload-doc div.add-more-button").is(":hidden")&&($(".add-more-button").show(),num_of_uploads_current=1))}),$(".main-upload-doc").on("change","input#file1",function(e){var fileName=$("#file1").val();""==fileName||null==fileName?$("#file1").removeAttr("name"):$("#file1").attr("name","Adhoc_CLI_Doc_1");var input=$(this),fileName=e.target.value.split("\\").pop();if(input.closest(".main-upload-button").css("background","#fff").find(".upload-file-name").html('<div class="cli-input-file">'+fileName+"</div>").append('<span id="cli-removeFile1">&times;</span>'),input.closest(".upload-row").hasClass("added-more")?input.closest(".upload-row").show():$(".add-more-button").css({"pointer-events":"auto"}).find("span").css({color:"#0095d9","text-decoration-color":"#0095d9"}),-1==$.inArray($(this).val().split(".").pop().toLowerCase(),webformAcceptableFileFormats))""==!$(this).val()?($("#cli-removeFile1Error").css("display","inline-block"),$("#validation-file1").show(),$("#validation-file2").hide(),$("#validation-file3").hide(),$(".validation-message1").hide(),$(this).closest("#cli-upload-button").addClass("v-error"),$("#validation-file1").html("Sorry! <br> <br> Please upload a document in valid format to submit your application.")):($(this).closest(".main-upload-button").removeClass("v-error"),$(".validation-message1").hide(),$("#cli-removeFile1Error").css("display","none"),$("#cli-removeFile1").remove());else{$("#cli-removeFile1Error").css("display","none"),$("#validation-file1").hide(),$(".validation-message1").hide(),$(this).closest("#cli-upload-button").removeClass("v-error");var maxFileSize=parseInt($("#adhoccli-max-file-size").val()),$ele=$(this).closest("form");isFileUploadAcceptable($ele,maxFileSize)||($("#validation-file1").show(),$("#validation-file2").hide(),$("#validation-file3").hide(),$("#cli-removeFile1Error").css("display","inline-block"),$(this).closest("#cli-upload-button").addClass("v-error"),$("#validation-file1").html("Sorry<br><br>The file total upload size should not exceed 1 MB."))}$("#cli-removeFile1").on("click",function(){$("#file1").removeAttr("name"),document.getElementById("file1").value=null,$("#file1").closest(".main-upload-button").css("background","#fff").find(".upload-file-name").html(""),$("#validation-file1").hide(),$("#cli-upload-addmore2").hasClass("v-error")||$("#cli-upload-addmore3").hasClass("v-error")?($("#validation-file1").show(),$("#validation-file2").hide(),$("#validation-file3").hide()):($("#validation-file3").hide(),$("#validation-file2").hide(),$("#validation-file1").hide());var val=$(this).attr("id");$("#"+val+"Error").css("display","none"),$("#file1").closest(".main-upload-button").removeClass("v-error"),$(".add-more-button").css({"pointer-events":"none"}).find("span").css({color:"#333","text-decoration-color":""})})}),$(".main-upload-doc").on("change","input#file2",function(e){var fileName=$("#file2").val();""==fileName||null==fileName?$("#file2").removeAttr("name"):$("#file2").attr("name","Adhoc_CLI_Doc_2");var input=$(this),fileName=e.target.value.split("\\").pop();if(input.closest(".main-upload-button").css("background","#fff").find(".upload-file-name").html('<div class="cli-input-file">'+fileName+"</div>").append('<span id="cli-removeFile2">&times;</span>'),input.closest(".upload-row").hasClass("added-more")?input.closest(".upload-row").show():$(".add-more-button").css({"pointer-events":"auto"}).find("span").css({color:"#0095d9","text-decoration-color":"#0095d9"}),$("#adhoccli_doc_2").val(fileName),$(this).closest(".main-upload-button").removeClass("v-error"),$("#cli-removeFile2Error").css("display","none"),-1==$.inArray($(this).val().split(".").pop().toLowerCase(),webformAcceptableFileFormats))""==!$(this).val()?($("#cli-removeFile2Error").css("display","inline-block"),$("#validation-file2").show(),$("#validation-file1").hide(),$("#validation-file3").hide(),$(".validation-message1").hide(),$(this).closest(".main-upload-button").addClass("v-error"),$("#validation-file2").html("Sorry! <br> <br> Please upload a document in valid format to submit your application.")):($(this).closest(".main-upload-button").removeClass("v-error"),$(".validation-message2").hide(),$("#cli-removeFile2Error").css("display","none"),$("#cli-removeFile2").remove());else{$("#validation-file2").hide(),$(".validation-message1").hide();var maxFileSize=parseInt($("#adhoccli-max-file-size").val()),$ele=$(this).closest("form");isFileUploadAcceptable($ele,maxFileSize)||($("#validation-file2").show(),$("#validation-file1").hide(),$("#validation-file3").hide(),$("#cli-removeFile2Error").css("display","inline-block"),$(this).closest(".main-upload-button").addClass("v-error"),$("#validation-file2").html("Sorry<br><br>The file total upload size should not exceed 1 MB."))}$("#cli-removeFile2").on("click",function(){$("#file2").removeAttr("name"),document.getElementById("file2").value=null,$("#file2").closest(".main-upload-button").css("background","#fff").find(".upload-file-name").html(""),$("#validation-file2").hide(),$("#cli-upload-button").hasClass("v-error")||$("#cli-upload-addmore3").hasClass("v-error")?($("#validation-file2").show(),$("#validation-file3").hide(),$("#validation-file1").hide()):($("#validation-file3").hide(),$("#validation-file2").hide(),$("#validation-file1").hide()),$("#cli-removeFile2Error").css("display","none"),$("#file2").closest(".main-upload-button").removeClass("v-error")})}),$(".main-upload-doc").on("change","input#file3",function(e){var fileName=$("#file3").val();""==fileName||null==fileName?$("#file3").removeAttr("name"):$("#file3").attr("name","Adhoc_CLI_Doc_3");var input=$(this),fileName=e.target.value.split("\\").pop();if(input.closest(".main-upload-button").css("background","#fff").find(".upload-file-name").html('<div class="cli-input-file">'+fileName+"</div>").append('<span id="cli-removeFile3">&times;</span>'),input.closest(".upload-row").hasClass("added-more")?input.closest(".upload-row").show():$(".add-more-button").css({"pointer-events":"auto"}).find("span").css({color:"#0095d9","text-decoration-color":"#0095d9"}),$("#adhoccli_doc_3").val(fileName),$(this).closest(".main-upload-button").removeClass("v-error"),$("#cli-removeFile3Error").css("display","none"),-1==$.inArray($(this).val().split(".").pop().toLowerCase(),webformAcceptableFileFormats))""==!$(this).val()?($("#cli-removeFile3Error").css("display","inline-block"),$("#validation-file3").show(),$("#validation-file1").hide(),$("#validation-file2").hide(),$(".validation-message1").hide(),$(this).closest(".main-upload-button").addClass("v-error"),$("#validation-file3").html("Sorry! <br> <br> Please upload a document in valid format to submit your application.")):($(this).closest(".main-upload-button").removeClass("v-error"),$(".validation-message3").hide(),$("#cli-removeFile3Error").css("display","none"),$("#cli-removeFile3").remove());
else{$("#validation-file3").hide(),$(".validation-message1").hide();var maxFileSize=parseInt($("#adhoccli-max-file-size").val()),$ele=$(this).closest("form");isFileUploadAcceptable($ele,maxFileSize)||($("#validation-file3").show(),$("#validation-file1").hide(),$("#validation-file2").hide(),$("#cli-removeFile3Error").css("display","inline-block"),$(this).closest(".main-upload-button").addClass("v-error"),$("#validation-file3").html("Sorry<br><br>The file total upload size should not exceed 1 MB."))}$("#cli-removeFile3").on("click",function(){$("#file3").removeAttr("name"),document.getElementById("file3").value=null,$("#file3").closest(".main-upload-button").css("background","#fff").find(".upload-file-name").html(""),$("#validation-file3").hide(),$("#cli-upload-button").hasClass("v-error")||$("#cli-upload-addmore2").hasClass("v-error")?($("#validation-file3").show(),$("#validation-file2").hide(),$("#validation-file1").hide()):($("#validation-file3").hide(),$("#validation-file2").hide(),$("#validation-file1").hide());var val=$(this).attr("id");$("#"+val+"Error").css("display","none"),$("#file3").closest(".main-upload-button").removeClass("v-error")})}),$("#cli-subcategory-enable .button").on("click",function(){$("#cli-subcategory-enable .button").addClass("disabled"),$("#income").prop("disabled","true")})),isiOS&&768>viewport&&$(".monthly-income .income-box input").css("padding-top","10px"),$(".cli-file-upload").on("click",function(){$("#file3").removeAttr("name"),$("#file2").removeAttr("name"),$("#file1").removeAttr("name"),$("#file1").click()})}),$("#click-quick-contact-tabItem-corporate").on("click",function(){localStorage.setItem("myprofile-details",!0)}),$(".headercontAddonCardCorporate").on("click",function(){editContactDetail()}),$(document).ready(function(){function inrFormat(val){var x=val;x=x.toString();var afterPoint="";x.indexOf(".")>0&&(afterPoint=x.substring(x.indexOf("."),x.length)),x=Math.floor(x),x=x.toString();var lastThree=x.substring(x.length-3),otherNumbers=x.substring(0,x.length-3);""!=otherNumbers&&(lastThree=","+lastThree);var res=otherNumbers.replace(/\B(?=(\d{2})+(?!\d))/g,",")+lastThree+afterPoint;return res}$("#duplicate-statement-download , #duplicate-statement-mode").hide(),$("#card-holder-details-main").exists()?$(".kcpCommonHeaderTitle").css("background","#d8ecf3"):$(".kcpCommonHeaderTitle").css("background","none");var entityField=[],entityList=$(".select-entity-input").data("json");if(" "!=entityList&&null!=entityList&&void 0!=entityList&&"0"!=entityList)for(var i=0;i<entityList.Entities.length;i++)entityField[i]=entityList.Entities[i].promoCode+"-"+entityList.Entities[i].promoName;$("#entity").on("focus",function(){$(this).autocomplete({source:entityField,select:function(event,ui){var postSelectedEntity=($("#selectedEntity").html(ui.item.value),$("#selectedEntity").text());$("#full_selectedEntity").val(postSelectedEntity);var arr=postSelectedEntity.split("-");$("#selectedEntity").html(arr[0]);var href=$(".entityRedirect").attr("href"),postSelectedEntityID=$("#selectedEntity").text();makeAjaxWithLoader({url:href,type:"POST",data:{entityId:postSelectedEntityID},success:function(data){data.success&&data.reload&&submitForm(data.redirectURL,!0)},error:function(){}})}}).autocomplete("widget").addClass("progressive_bar")}),$("form#creditLimitUpdateForm").on("submit",function(){var inputCreditLimit=$("#edit-input-creditlimit-dashboard").val();if(""==inputCreditLimit||null==inputCreditLimit||void 0==inputCreditLimit||"0"==inputCreditLimit)$(".err-sameCreditLimit").css("display","block");else{$("#updatedCreditLimitWithComma").val(inputCreditLimit);var inputCreditLimitSave=inputCreditLimit.split(",").join("");$("#updatedCreditLimit").val(inputCreditLimitSave)}return!0}),$("#edit-userDashboard").on("click",function(e){e.preventDefault(),$("#edit-creditlimit-dashboard").css("display","block"),$("#edit-userDashboard").css("display","none"),$(".credit-limit-edit-slider").css("display","none"),$(".userDashboardCreditLimit .currentCreditLimit").css("display","inline-block")}),$("#cancel-dashboard-creditLimit").on("click",function(e){e.preventDefault(),$("#edit-userDashboard").css("display","block"),$(".credit-limit-edit-slider").css("display","block"),$("#edit-creditlimit-dashboard").css("display","none"),$(".userDashboardCreditLimit .currentCreditLimit").css("display","none")}),String.prototype.replaceAll=function(search,replacement){var target=this;return target.replace(new RegExp(search,"g"),replacement)};var checkMobileDevice=$(window).outerWidth()<768?!0:!1;checkMobileDevice&&$("input#edit-input-creditlimit-dashboard").on("input",function(){{var start=this.selectionStart,end=this.selectionEnd;new RegExp("^[0-9]+$")}this.value=this.value.replace(/[^0-9]/g,""),this.setSelectionRange(start,end)}),$("input#edit-input-creditlimit-dashboard").focusout(function(){var input=$(this).val().replaceAll(",","");if(input.length<1)$(this).val("");else{input=input.replace(/[^0-9]+/g,"");var formatted=inrFormat(input);if(console.log(formatted),formatted.indexOf(".")>0){var split=formatted.split(".");formatted=split[0]+"."+split[1].substring(0,2)}$(this).val(0==formatted?"":formatted)}}),$("#account-search").find("div.fancy-select").css({"float":"left"});var inputPlaceholder=$("#search-query").attr("placeholder");$("#search-query").click(function(){inputPlaceholder=$("#search-query").attr("placeholder"),setPlaceholderValue(inputPlaceholder)}),$("#search-type").change(function(){$("#search-query").val(""),$("#search-query").prop("placeholder",$(this).val()),inputPlaceholder=$("#search-query").attr("placeholder"),setPlaceholderValue(inputPlaceholder)}),$("#accountSearchForm #submitAccountSearch").on("click",function(){var searchCriteria=$("#accountSearchForm #account-search .options .selected").text();$("#accountSearchForm #searchCriteria").val("Card Number"==searchCriteria?"cardNumber":"employeeId");var withSpace_searchString=$("#accountSearchForm #account-search .search-box-input").val();$("#accountSearchForm #withSpace_searchString").val(withSpace_searchString);var searchString=$("#accountSearchForm #account-search .search-box-input").val(),getSearchString=searchString.replace(/\s/g,"");$("#accountSearchForm #searchString").val(getSearchString);var selectedRelationship=$("#entity").val(),arr=selectedRelationship.split("-");$("#selectedEntityId").val(arr[0]),$("#accountSearchForm").submit()});{var accountSearchValue=(document.referrer," "),accountSearchHeading="",searchResultList=$(".search-result").data("json"),search=$(".sidebar .block ul.side-menu li.active a").text();$(".sidebar .block ul.side-menu li.active a").attr("data-href"),$("#accountSearchForm").attr("action"),search.trim()}if(""!=searchResultList&&"0"!=searchResultList&&null!=searchResultList&&void 0!=searchResultList){var data=searchResultList.accountSearchData;if(0!=data.length&&null!=data.length&&void 0!=data.length){for(var i=0;i<data.length;i++)$(".accountSearchResultWrapper #accountsearch_Icon").css("display","none"),$(".accountSearchResultWrapper #accountSearch_errorHandle").css("display","none"),accountSearchHeading+="<th>"+data[i].fieldColumnName,accountSearchValue+="<td>"+data[i].fieldColumnValue;$(".accountSearchResultWrapper .accountSearchHeading").append(accountSearchHeading),$(".accountSearchResultWrapper .accountSearchValue").append(accountSearchValue)}}$("#goToDashboard").on("click",function(){var accountSearchAction="${ctxPath}/b2b/accountsearch/",accountSearchURL=$("#goToDashboard").attr("href");$("#accountSearchForm").attr("action",accountSearchAction+accountSearchURL),$("#accountSearchForm").submit()});var reset_searchString=$("#accountSearchForm #reset_searchString").val(),searchStringWithSpace=$("#accountSearchForm #withSpace_searchString").val(),searchCriteria=$("#reset_searchCriteria").val();"employeeId"==searchCriteria?($("#accountSearchForm .fancy-select .trigger").text("Employee ID"),$("#accountSearchForm .fancy-select .options li").removeClass("selected"),$("#accountSearchForm .fancy-select .options li:contains('Employee ID')").addClass("selected"),$("#search-query").prop("placeholder","Enter your Employee ID"),$(".search-box-input").removeClass("cardNumberField").addClass("employeeIDField"),$("#accountSearchForm #account-search .search-box-input").val(reset_searchString)):($("#accountSearchForm .fancy-select .trigger").text("Card Number"),$("#accountSearchForm .fancy-select .options li").removeClass("selected"),$("#accountSearchForm .fancy-select .options li:contains('Card Number')").addClass("selected"),$("#search-query").prop("placeholder","Enter your 16 digit Card Number"),$(".search-box-input").removeClass("employeeIDField").addClass("cardNumberField"),null!=searchStringWithSpace&&""!=searchStringWithSpace&&$("#accountSearchForm #account-search .search-box-input").val(searchStringWithSpace))}),$("document").ready(function(){$(".confrm-reissue-cancel-submit").hide(),$("#priority-reissue-btn").on("click",function(){$("#priority-content-details").hide(),$("#reissue-content-details").show(),$(".confrm-reissue-cancel-submit").show()}),$("#priority-cancel-btn").on("click",function(){$("#priority-content-details").hide(),$("#cancellation-details").show(),$(".confrm-reissue-cancel-submit").show()}),"true"==$("#membershipCancelStatus").val()?$("#priority-cancel-btn").show():$("#priority-cancel-btn").hide(),$("#priority-reissue-btn").css("true"==$("#membershipReissueStatus").val()?{"pointer-events":"auto","background-color":" #0095d9",color:"#fff"}:{"pointer-events":"none","background-color":" #e0e0e0",color:"#666"}),$("#priority-reissue-btn").on("click",function(){$("#cancel-reissue-token").val("reissuance")}),$("#priority-cancel-btn").on("click",function(){$("#cancel-reissue-token").val("cancellation")}),$(".priority-pass-content-vistrabx1 #terms").on("change",function(){$("#prioritypass-subscription-btn").css($(this).parent().hasClass("checked")?{"pointer-events":"auto","background-color":" #0095d9",color:"#fff"}:{"pointer-events":"none","background-color":" #e0e0e0",color:"#666"})});var isSucessMsgVisible=$(".priority-regSuccess").is(":visible");if($(".priority-regSuccess").exists()&&isSucessMsgVisible?$(".success-boximg").show():$(".success-boximg").hide(),$("#priority-reissue-submit").on("click",function(){var loaderHtml='<div class="overlay-loader"></div>';$("body").append(loaderHtml)}),$(".membership-validity-link").on("click",function(e){e.preventDefault(),openModalPopup("membership-subs-popup"),$("#membership-subs-popup .modal").css("top","5%"),$("#membership-subs-popup .modal").scrollTop(0),viewport.width<=1024&&($("#membership-subs-popup").css("margin-top","0px"),$("#membership-subs-popup .modal").css("margin-top","0px"));var modalInnerHeight=$("#membership-subs-popup").find(".membership-subs-modal").height()-$("#membership-subs-popup").find(".button-wrap").height();modalInnerHeight-=$(window).width()>767?120:60,$("#membership-subs-popup").find(".modal-wrap").css("height",modalInnerHeight),$("#membership-subs-popup").find(".modal-wrap").scrollTop(0)}),$("#membership-subs-popup .button-cancel").on("click",function(e){e.preventDefault(),$(".modal-overlay").removeClass("open")}),$(".login-section.kcp-login-section").exists()){var m=document.createElement("meta");m.name="robots",m.content="noindex,nofollow",list=document.getElementsByTagName("title"),document.head.insertBefore(m,list[0])}$(".dashboard-post.kcp-global-overview").exists()&&setAnalyticsCorporateCard("b2b_user_GroupOverview","b2b_user_GroupOverview"),$(".dashboard-post.kcp-relationship-overview").exists()&&setAnalyticsCorporateCard("b2b_user_EntityOverview","b2b_user_EntityOverview"),$(".mobile-menu.mobile-only #dashboard").on("click",function(){$(".alert-list-container").removeClass("active")})}),$(window).on("load",function(){$(".block ul.kyc-side-menu li:not(.active) a span.mkcp-webform").parent().css("background","#d8ecf3"),$(".block ul.kyc-side-menu li:not(.active) a span.gkcp-webform").parent().css("background","#d8ecf3"),$(".block ul.kyc-side-menu li:not(.active) a span.kcp-entity-overview").parent().css("background","#d8ecf3"),$(".block ul.kyc-side-menu li:not(.active) a span.kcp-account-search").parent().css("background","#d8ecf3"),$(".block ul.kyc-side-menu li:not(.active) a span.gkcp-group-overview").parent().css("background","#d8ecf3"),$(".block ul.kyc-side-menu li:not(.active) a span.kcp-corp-eapply").parent().css("background","#d8ecf3"),$(".block ul.kyc-side-menu li a").hover(function(){!$(this).parent().hasClass("active")&&($(this).find("span").hasClass("mkcp-webform")||$(this).find("span").hasClass("gkcp-webform")||$(this).find("span").hasClass("kcp-entity-overview")||$(this).find("span").hasClass("kcp-corp-eapply")||$(this).find("span").hasClass("kcp-account-search")||$(this).find("span").hasClass("gkcp-group-overview"))&&($(this).css("background","#2e2e2e"),$(this).css("color","#fff"))},function(){!$(this).parent().hasClass("active")&&($(this).find("span").hasClass("mkcp-webform")||$(this).find("span").hasClass("gkcp-webform")||$(this).find("span").hasClass("kcp-entity-overview")||$(this).find("span").hasClass("kcp-corp-eapply")||$(this).find("span").hasClass("kcp-account-search")||$(this).find("span").hasClass("gkcp-group-overview"))&&($(this).css("background","#d8ecf3"),$(this).css("color","#000"))}),console.log("spa_journey"),window.location.href.endsWith("corpeapp")&&(console.log("inrequest"),$("li").children("ul").parent().addClass("active"),$("li").children("ul").parent().children("a").css("background","#2e2e2e"),$("li ul li:nth-child(1)").addClass("active"),$("li ul li:nth-child(1) a").css("background","#3f3f3f")),console.log(window.location.href),window.location.href.endsWith("trackcorpapp")&&($("li").children("ul").parent().addClass("active"),$("li").children("ul").parent().children("a").css("background","#2e2e2e"),$("li ul li:nth-child(2)").addClass("active"),$("li ul li:nth-child(2) a").css("background","#3f3f3f")),$(".block ul.kyc-side-menu li").children("ul").parent().click(function(){($(".block ul.kyc-side-menu li a").find("span").hasClass("mkcp-webform")||$(".block ul.kyc-side-menu li a").find("span").hasClass("gkcp-webform")||$(".block ul.kyc-side-menu li a").find("span").hasClass("kcp-entity-overview")||$(".block ul.kyc-side-menu li a").find("span").hasClass("kcp-account-search")||$(".block ul.kyc-side-menu li a").find("span").hasClass("gkcp-group-overview"))&&($(".block ul.kyc-side-menu li:not(:last-child)").css("background","#d8ecf3"),$(".block ul.kyc-side-menu li:not(:last-child)").css("color","#000"))})}),$(document).ready(function(){function showLoadMoreProducts(){var totalInboxList=$(".tile").length,visibleInboxLength=$(".showInteraction").length;totalInboxList>visibleInboxLength?$(".load-more-wrapper").show():$(".load-more-wrapper").hide()}if($(".insurance-products").exists()){var insuranceField="",insurance_ProductsList=$(".insuranceProductsList").data("json"),productVendorNames={SBIG:"SBI General Insurance",RS:"Royal Sundaram General Insurance",CPP:"CPP Group India",SBIL:"SBI Life Insurance"};if(null!=insurance_ProductsList||void 0!=insurance_ProductsList||""!=insurance_ProductsList){if(0!=insurance_ProductsList.productDetails.productList.length||null!=insurance_ProductsList.productDetails.productList||void 0!=insurance_ProductsList.productDetails.productList){for(var i=0;i<insurance_ProductsList.productDetails.productList.length;i++){var productDescription=insurance_ProductsList.productDetails.productList[i].productDescription,productDescriptionLength=productDescription.length;productDescriptionLength>=143&&(productDescription=productDescription.substr(0,143)+"..."),insuranceField+=void 0==productVendorNames[insurance_ProductsList.productDetails.productList[i].productVendorCode]?'<div class="tile"><span class="productIcon" style="background-position:'+insurance_ProductsList.productDetails.productList[i].productImageBlackIconCoordinates+';"></span><span class="productIconHover" style="background-position:'+insurance_ProductsList.productDetails.productList[i].productImageBlueIconCoordinates+';"></span><div class="productNameText">'+insurance_ProductsList.productDetails.productList[i].productName+'</div><div class="field-value" style="height: 38px"></div><p id="descriptionText" class="productDescriptionText">'+productDescription+'</p><a href="#" target="_blank" class="learnMore">'+insurance_ProductsList.productDetails.productList[i].productLinkText+'<img class="linkArrow" src="/creditcards/resources/img/insurance-learnMore.jpg" /></a></div>':"SBI Life Sampoorn Cancer Suraksha"==insurance_ProductsList.productDetails.productList[i].productName.trim()?'<div class="tile"><span class="productIcon" style="background-position:'+insurance_ProductsList.productDetails.productList[i].productImageBlackIconCoordinates+';"></span><span class="productIconHover" style="background-position:'+insurance_ProductsList.productDetails.productList[i].productImageBlueIconCoordinates+';"></span><div class="productNameText">'+insurance_ProductsList.productDetails.productList[i].productName+'</div><div class="field-value" style="height: 15px"></div><p id="descriptionText" class="productDescriptionText">'+productDescription+'</p><a href="#" target="_blank" class="learnMore">'+insurance_ProductsList.productDetails.productList[i].productLinkText+'<img class="linkArrow" src="/creditcards/resources/img/insurance-learnMore.jpg" /></a></div>':"Accident Shield Insurance"==insurance_ProductsList.productDetails.productList[i].productName.trim()?'<div class="tile"><span class="productIcon" style="background-position:'+insurance_ProductsList.productDetails.productList[i].productImageBlackIconCoordinates+';"></span><span class="productIconHover" style="background-position:'+insurance_ProductsList.productDetails.productList[i].productImageBlueIconCoordinates+';"></span><div class="productNameText">Accident Shield <br/>Insurance</div><div class="field-value">'+productVendorNames[insurance_ProductsList.productDetails.productList[i].productVendorCode]+'</div><p id="descriptionText" class="productDescriptionText">'+productDescription+'</p><a href="#" target="_blank" class="learnMore">'+insurance_ProductsList.productDetails.productList[i].productLinkText+'<img class="linkArrow" src="/creditcards/resources/img/insurance-learnMore.jpg" /></a></div>':'<div class="tile"><span class="productIcon" style="background-position:'+insurance_ProductsList.productDetails.productList[i].productImageBlackIconCoordinates+';"></span><span class="productIconHover" style="background-position:'+insurance_ProductsList.productDetails.productList[i].productImageBlueIconCoordinates+';"></span><div class="productNameText">'+insurance_ProductsList.productDetails.productList[i].productName+'</div><div class="field-value">'+productVendorNames[insurance_ProductsList.productDetails.productList[i].productVendorCode]+'</div><p id="descriptionText" class="productDescriptionText">'+productDescription+'</p><a href="#" target="_blank" class="learnMore">'+insurance_ProductsList.productDetails.productList[i].productLinkText+'<img class="linkArrow" src="/creditcards/resources/img/insurance-learnMore.jpg" /></a></div>'}$(".insurance-products-listWrapper").append(insuranceField);var index=0;$(".insurance-products-listWrapper").find(".tile").each(function(){4>index?$(this).addClass("showInteraction"):!0,index++}),showLoadMoreProducts()}0==insurance_ProductsList.productDetails.productList.length&&$(".productListEmpty").css("display","block")}$("#load-more-products").on("click",function(){var vissibleInteractionCount=$(".insurance-products-listWrapper").find(".showInteraction").length,index=0;$(".insurance-products-listWrapper").find(".tile").each(function(){index>=vissibleInteractionCount&&vissibleInteractionCount+2>index?$(this).addClass("showInteraction"):!0,index++}),showLoadMoreProducts()}),$(".tile").mouseover(function(){$(this).find(".productIconHover").css("display","block"),$(this).find(".productIcon").css("display","none")}),$(".tile").mouseout(function(){$(this).find(".productIconHover").css("display","none"),$(this).find(".productIcon").css("display","block")})}$(".tile").children("a.learnMore").on("click touchend",function(e){if(e.preventDefault(),openModalPopup("insuranceDisclaimer"),viewport.width<=1024&&($(".insurance-disclaimer-popup").css("margin-top","0px"),$(".insurance-disclaimer-popup .modal").css("margin-top","0px"),$(".insurance-disclaimer-popup .modal").css("margin-left","0px"),$(".insurance-disclaimer-popup .modal").scrollTop(0)),$("a.insurance-button-clickToProceed").length>0){var url=$(this).attr("href"),target=$(this).attr("target");$("a.insurance-button-clickToProceed").attr("href",url),""!=target&&"undefined"!=target&&$("a.insurance-button-clickToProceed").attr("target",target)}var currentProduct=$(this).parent().children(".productNameText").text(),currentProductLink=$(this).parent().children(".learnMore").text(),insuranceProduct=currentProduct+":"+currentProductLink;$("#omnitureCodeForProceed").val(currentProduct+":"+currentProductLink),setAnalyticsInsurance(insuranceProduct),$("#productName").val(currentProduct);for(var selectedProduct=$("#productName").val(),i=0;i<insurance_ProductsList.productDetails.productList.length;i++)insurance_ProductsList.productDetails.productList[i].productName==selectedProduct&&($("#productName").val(insurance_ProductsList.productDetails.productList[i].productName),$("#productCode").val(insurance_ProductsList.productDetails.productList[i].productCode),$("#productCodeParameterName").val(insurance_ProductsList.productDetails.productList[i].productCodeParameterName),$("#productVendorCode").val(insurance_ProductsList.productDetails.productList[i].productVendorCode),$("#productLink").val(insurance_ProductsList.productDetails.productList[i].productLink),$("#integrationRegFlag").val(insurance_ProductsList.productDetails.productList[i].productIntegrationReqFLag),categoryName=$("#categoryHeading").text(),$("#categoryName").val(categoryName))}),$(document).delegate("#insuranceDisclaimer .close-boxpop","click",function(e){e.preventDefault(),closeModalPopup($(this))}),$(".insurance-disclaimer-popup .insurance-button-cancel").on("click",function(e){e.preventDefault(),$(".modal-overlay").removeClass("open"),$("a.insurance-button-clickToProceed").attr("href","javascript:void(0);"),$("a.insurance-button-clickToProceed").removeAttr("target")}),$(".insurance-disclaimer-popup .insurance-button-clickToProceed").on("click",function(e){$(".modal-overlay").removeClass("open");var proceedButtonText=$(this).val(),insuranceProduct=$("#omnitureCodeForProceed").val()+":"+proceedButtonText;setAnalyticsInsurance(insuranceProduct);var flag=$("#integrationRegFlag").val();if("false"==flag){var url=$("#productLink").val()+"?"+$("#productCodeParameterName").val()+"="+$("#productCode").val();window.open(url,"_blank"),e.preventDefault(),e.stopPropagation()}else $("#insuranceForm").submit(),e.preventDefault(),e.stopPropagation()}),$(".icon.insuranceIcon").parent().parent().find(".child-node").find("li a").on("click",function(){var insuranceTab=$(this).parent().attr("data-val");setAnalyticsInsurance(insuranceTab)})});var questionDetails=[];$(".top-nav").is(":visible")&&null===sessionStorage.getItem("eligibleFeed")&&getFeedbcakData(),$(document).ready(function(){$("#logoutButtonId").click(function(){var isEligible=sessionStorage.getItem("eligibleFeed");if("failure"!==isEligible){$("#logout-content").addClass("open");var jsonData=JSON.parse(sessionStorage.getItem("resQuestionDetails"));questionDetails.push({questionnaireID:jsonData.questionnaireID,channelName:jsonData.channelName,firstQuestion:jsonData.firstQuestion,modeOfSubmission:"web",shortCode:"abcdef"}),$("#first-question").html(),$("#first-question").html("<span>1</span>"+jsonData.firstQuestion)}else{if(alertLogoutUser(),deleteTokenOnLogout(),null!=logoutForm&&"undefined"!=logoutForm){var formLogout=$("#myprofilelogoutFormId");formLogout.submit()}else logoutForm.submit();setAnalyticsPost("Log out"),sessionStorage.clear()}})}),$(".logout-link").parent().click(function(){var isEligible=sessionStorage.getItem("eligibleFeed");if("failure"!==isEligible){$("#logout-content-popup").addClass("open");var jsonData=JSON.parse(sessionStorage.getItem("resQuestionDetails"));questionDetails.push({questionnaireID:jsonData.questionnaireID,channelName:jsonData.channelName,firstQuestion:jsonData.firstQuestion,modeOfSubmission:"web",shortCode:"abcdef"}),$("#first-question-mobile").html(),$("#first-question-mobile").html("<span>1</span>"+jsonData.firstQuestion)}else alertLogoutUser(),deleteTokenOnLogout(),logoutForm.submit(),setAnalyticsPost("Log out"),sessionStorage.clear()}),$(document).ready(function(){function fkey(e){e=e||window.event,wasPressed||"F5"===e.code&&(window.location.href=document.URL.includes("/app")?"creditcards/app/user/loggedout":"creditcards/b2b/user/loggedout",wasPressed=!0)}if($("#spaContainer").exists()){var loaderHtml='<div class="overlay-loader"></div>';$("body").append(loaderHtml),$(".kcpCommonHeaderTitle").css("padding","0"),$("#contactUsId").exists()&&$("#contactUsId").click(function(e){console.log("contact us clicked"),e.preventDefault(),setAnalyticsPost("Contact Us")}),document.onkeydown=fkey,document.onkeypress=fkey,document.onkeyup=fkey;var wasPressed=!1,contentURI=$("input#spamodule").val(),pagelink=contentURI;$.ajax({url:"/creditcards/resources/js/jquery-3.6.1.min.js",dataType:"script",timeout:5e3}).done(function(){var $jnew=jQuery.noConflict(!0);$jnew.ajax({url:pagelink,type:"GET",dataType:"html",cache:!0,success:function(data){console.log("jquery-3.6.1.min.js in success"),$jnew("#spaContainer").html(data),$(window).on("load",function(){$("body").find("div.overlay-loader").remove(),console.log("window is loaded")})},error:function(xhr,status,error){console.log("jquery-3.6.1.min.js error function"),console.log("Status is ---->",status),console.log("error is ---->",error),"901"==xhr.status&&(window.location.href="/creditcards/app/page/error"),$("body").find("div.overlay-loader").remove()},complete:function(){$("body").find("div.overlay-loader").remove()}})}).fail(function(xhr,status,error){console.log("jquery-3.6.1.min.js fail function"),console.log("xhr="+xhr.status),console.log("status="+status),console.log("error="+error),window.location.href="/creditcards/app/page/error"})}}),$(document).ready(function(){$("#spa-error-container").exists()&&($(".kcpCommonHeaderTitle.themeHeight").hide(),$(".clearfix.card-holder-top-header").hide())}),$(document).ready(function(){$("#stars li").bind("click",function(){function validationReview(){(checkboxValid||textboxValid)===!1?$(".review-submit").attr("disabled","disabled"):$(".review-submit").removeAttr("disabled")}function optionalInput(dataArray){for(var ind=0;ind<dataArray.length;ind++)$("input:checkbox[name="+dataArray[ind]+"]").bind("change",function(){$(this).is(":checked")===!0?(checkboxValid=!0,validationReview()):(checkboxValid=!1,validationReview()),$(this).is(":checked")?("Others"===$(this).val()||"Other"===$(this).val()||"Others "===$(this).val())&&$('<textarea  maxlength="500" class="optional-ans"></textarea> <span class="textArea-detail" id="optional-text-limit">Upto 500 bytes</span>').insertAfter($(this).parent("label")):($(this).parent("label").next("textarea").remove(),$("#optional-text-limit").remove())})}sample_rating=$(this).attr("data-value"),byteConv(),console.log("User has rated"+sample_rating);var checkBoxes_R5=[],checkBoxes_R4=[],checkBoxes_R3=[],checkBoxes_R2=[],checkBoxes_R1=[],queHtml="",rating_details_data=sessionStorage.getItem("rating_details");if(0!==rating_details_data.lenght||void 0!==rating_details_data||null!==rating_details_data){{var rating_details=JSON.parse(rating_details_data);rating_details_data.length}if(1==sample_rating)for(var i=0;i<rating_details.R1.length;i++){ques=rating_details.R1[i].questionText;var qNo=i+2;if("textbox"==rating_details.R1[i].questionType)queHtml+='<div class="question-eading"> <span>'+qNo+"</span>"+ques+"</div>",queHtml+='<input type="hidden" value="N" name="isRatingQuestion" >',queHtml+='<input type="hidden" value="'+ques+'" name="qstn_set_'+i+'" >',queHtml+='<textarea maxlength="500"  name="input_set_'+i+'"></textarea>',queHtml+='<span class="textArea-detail">Upto 500 bytes</span>';else if("multi-select"==rating_details.R1[i].questionType){queHtml+='<div class="question-eading"> <span>'+qNo+"</span>"+ques+"</div>",queHtml+='<input type="hidden" value="N" name="isRatingQuestion" >',queHtml+='<input type="hidden" value="'+ques+'" name="qstn_set_'+i+'" >';for(var j=0;j<rating_details.R1[i].optionText.length;j++)queHtml+='<label><input class="input_set_'+i+'"  name="input_set_'+i+'" type="checkbox" value="'+rating_details.R1[i].optionText[j]+'"><span>'+rating_details.R1[i].optionText[j]+"</span></label>",checkBoxes_R1.push("input_set_"+j)}}else if(2==sample_rating)for(var i=0;i<rating_details.R2.length;i++){ques=rating_details.R2[i].questionText;var qNo=i+2;if("textbox"==rating_details.R2[i].questionType)queHtml+='<div class="question-eading"> <span>'+qNo+"</span>"+ques+"</div>",queHtml+='<input type="hidden" value="N" name="isRatingQuestion" >',queHtml+='<input type="hidden" value="'+ques+'" name="qstn_set_'+i+'" >',queHtml+='<textarea  maxlength="500" name="input_set_'+i+'"></textarea>',queHtml+='<span class="textArea-detail">Upto 500 bytes</span>';else if("multi-select"==rating_details.R2[i].questionType){queHtml+='<div class="question-eading"><span>'+qNo+"</span>"+ques+"</div>",queHtml+='<input type="hidden" value="N" name="isRatingQuestion" >',queHtml+='<input type="hidden" value="'+ques+'" name="qstn_set_'+i+'" >';for(var j=0;j<rating_details.R2[i].optionText.length;j++)queHtml+='<label><input name="input_set_'+i+'" type="checkbox" value="'+rating_details.R2[i].optionText[j]+'"><span>'+rating_details.R2[i].optionText[j]+"</span></label>",checkBoxes_R2.push("input_set_"+j)}}else if(3==sample_rating)for(var i=0;i<rating_details.R3.length;i++){ques=rating_details.R3[i].questionText;var qNo=i+2;if("textbox"==rating_details.R3[i].questionType)queHtml+='<div class="question-eading"><span>'+qNo+"</span>"+ques+"</div>",queHtml+='<input type="hidden" value="N" name="isRatingQuestion" >',queHtml+='<input type="hidden" value="'+ques+'" name="qstn_set_'+i+'" >',queHtml+='<textarea  maxlength="500" name="input_set_'+i+'"></textarea>',queHtml+='<span class="textArea-detail">Upto 500 bytes</span>';else if("multi-select"==rating_details.R3[i].questionType){queHtml+='<div class="question-eading"><span>'+qNo+"</span>"+ques+"</div>",queHtml+='<input type="hidden" value="N" name="isRatingQuestion" >',queHtml+='<input type="hidden" value="'+ques+'" name="qstn_set_'+i+'" >';for(var j=0;j<rating_details.R3[i].optionText.length;j++)queHtml+='<label><input name="input_set_'+i+'" type="checkbox" value="'+rating_details.R3[i].optionText[j]+'"><span>'+rating_details.R3[i].optionText[j]+"</span></label>",checkBoxes_R3.push("input_set_"+j)}}else if(4==sample_rating)for(var i=0;i<rating_details.R4.length;i++){ques=rating_details.R4[i].questionText;var qNo=i+2;if("textbox"==rating_details.R4[i].questionType)queHtml+='<div class="question-eading"><span>'+qNo+"</span>"+ques+"</div>",queHtml+='<input type="hidden" value="N" name="isRatingQuestion" >',queHtml+='<input type="hidden" value="'+ques+'" name="qstn_set_'+i+'" >',queHtml+='<textarea  maxlength="500" name="input_set_'+i+'"></textarea>',queHtml+='<span class="textArea-detail">Upto 500 bytes</span>';else if("multi-select"==rating_details.R4[i].questionType){queHtml+='<div class="question-eading"><span>'+qNo+"</span>"+ques+"</div>",queHtml+='<input type="hidden" value="N" name="isRatingQuestion" >',queHtml+='<input type="hidden" value="'+ques+'" name="qstn_set_'+i+'" >';for(var j=0;j<rating_details.R4[i].optionText.length;j++)queHtml+='<label><input name="input_set_'+i+'" id="input_set_'+j+'" type="checkbox" value="'+rating_details.R4[i].optionText[j]+'"><span>'+rating_details.R4[i].optionText[j]+"</span></label>",checkBoxes_R4.push("input_set_"+j)
}}else if(5==sample_rating)for(var i=0;i<rating_details.R5.length;i++){ques=rating_details.R5[i].questionText;var qNo=i+2;if("textbox"==rating_details.R5[i].questionType)queHtml+='<div class="question-eading"> <span>'+qNo+"</span>"+ques+"</div>",queHtml+='<input type="hidden" value="N" name="isRatingQuestion" >',queHtml+='<input type="hidden" value="'+ques+'" name="qstn_set_'+i+'" >',queHtml+='<textarea  maxlength="500" name="input_set_'+i+'"></textarea>',queHtml+='<span class="textArea-detail">Upto 500 bytes</span>';else if("multi-select"==rating_details.R5[i].questionType){queHtml+='<div class="question-eading"><span>'+qNo+"</span>"+ques+"</div>",queHtml+='<input type="hidden" value="N" name="isRatingQuestion" >',queHtml+='<input type="hidden" value="'+ques+'" name="qstn_set_'+i+'" >';for(var j=0;j<rating_details.R5[i].optionText.length;j++)queHtml+='<label><input name="input_set_'+i+'" type="checkbox" value="'+rating_details.R5[i].optionText[j]+'"><span>'+rating_details.R5[i].optionText[j]+"</span></label>",checkBoxes_R5.push("input_set_"+j)}}$(".question-content").html(queHtml)}var checkboxValid=!1,textboxValid=!1;return $(".question-content textarea").each(function(){$(this).bind("keyup",function(){var value=$(this).val();value.length>0&&null!=value?(textboxValid=!0,validationReview()):(textboxValid=!1,validationReview())})}),optionalInput(checkBoxes_R5),optionalInput(checkBoxes_R4),optionalInput(checkBoxes_R3),optionalInput(checkBoxes_R2),optionalInput(checkBoxes_R1),sample_rating}),$(".review-submit").click(function(event){event.preventDefault(),feedArray=[];for(var rating_details_data=sessionStorage.getItem("rating_details"),rating_details=JSON.parse(rating_details_data),rated="R"+sample_rating,i=0;i<rating_details[rated].length;i++)if("multi-select"===rating_details[rated][i].questionType){var selectedAns=$("input[name='input_set_"+i+"']:checked").map(function(){return $(this).val()}).get(),optionalAns=$("input[name='input_set_"+i+"']:checked").parent("label").next("textarea");0!==optionalAns.length&&selectedAns.push(optionalAns.val());var ans={};ans.questionText=rating_details[rated][i].questionText,ans.answer=selectedAns,ans.isRatingQuestion="N",feedArray.push(ans)}else if("textbox"===rating_details[rated][i].questionType){var selectedAns=[];selectedAns.push($("textarea[name='input_set_"+i+"']").val());var ans={};ans.questionText=rating_details[rated][i].questionText,ans.answer=selectedAns,ans.isRatingQuestion="N",feedArray.push(ans)}ratePoint=[],ratePoint.push(sample_rating.toString());for(var answerList={questionnaireID:questionDetails[0].questionnaireID,channelName:questionDetails[0].channelName,feedback:[{questionText:questionDetails[0].firstQuestion,answer:ratePoint,isRatingQuestion:"Y"}]},i=0;i<feedArray.length;i++)answerList.feedback.push(feedArray[i]);console.log(answerList),console.log(JSON.stringify(answerList));var url="/creditcards/app/feedback/user-feedback-response";$.ajax({type:"POST",url:url,contentType:"application/json",data:JSON.stringify(answerList),beforeSend:function(){var loaderHtml='<div class="overlay-loader csat-lay"></div>';$("body").append(loaderHtml)},complete:function(){$("body").find("div.overlay-loader").remove()},success:function(data){var response=JSON.parse(data)[0].status;"false"===response?($(".submit-feedback").prepend('<div class="err-span" style="color:red;">Something went wrong while taking feedback! Close dialog to log out.<div>'),autologout()):($("#open-modal-content").css("display","none"),$("#open-modal-content").removeClass("open"),$("#open-modal-content-popup").css("display","none"),$("#open-modal-content-popup").removeClass("open"),$(".csat-expanded-content").css("display","none"),viewport.width<768?($("#Thank-you-content-mobilepopup").addClass("open"),$("#Thank-you-content").removeClass("open")):($("#Thank-you-content").addClass("open"),$("#Thank-you-content-mobilepopup").removeClass("open")),sessionStorage.removeItem("rating_details"),autologout())},error:function(){alert("Something went wrong!")}})}),$("#modal-cancel-button").click(function(){$("#open-modal-content").removeClass("open"),$("#open-modal-content-popup").removeClass("open"),$(".csat-expanded-content").css("display","none")}),$(".csat-expanded-content").css("display","none"),$(".star").click(function(){console.log("expanded-content star"),$(".csat-expanded-content").css("display","block")}),$("#stars li").on("mouseover",function(){var onStar=parseInt($(this).data("value"),10);$(this).parent().children("li.star").each(function(e){onStar>e?$(this).addClass("hover"):$(this).removeClass("hover")})}).on("mouseout",function(){$(this).parent().children("li.star").each(function(){$(this).removeClass("hover")})}),$("#stars li").on("click",function(){var onStar=parseInt($(this).data("value"),10),stars=$(this).parent().children("li.star");for(i=0;i<stars.length;i++)$(stars[i]).removeClass("selected");for(i=0;onStar>i;i++)$(stars[i]).addClass("selected");var ratingValue=parseInt($("#stars li.selected").last().data("value"),10),msg="";msg=1==ratingValue?"Poor":2==ratingValue?"Bad":3==ratingValue?"Average":4==ratingValue?"Good":"Excellent",responseMessage(msg)});$("#otherButton-csat").click(function(){var otherSectionDiv='<div><textarea  maxlength="500"></textarea></div>';$("#other-option-section").append(otherSectionDiv)})}),$("document").ready(function(){$(".disclaimer-popup-open.billdesk-pay-btn").on("click",function(){$(".top-error.paymntUtilityErrMsg").hide()})}),jQuery.ajaxPrefilter(function(s){s.crossDomain&&(s.async=!1,s.url=!1,s.contents.script=!1)}),$(document).ready(function(){if($(".validate-form.preloginInstaCardForm").exists()){$("#card-number-single").css("width","190px");var base64String=$("#captchaStr").val();$("img.captcha").attr("src","data:image/jpeg;base64,"+base64String)}$(".refresh_captcha img").on("click",function(){$("#captcha_input_chars").val(""),$(".captcha_wrapper").find("label").remove(),$("#captcha_input_chars").removeClass("error"),console.log("inside click");var href=$("#captchaHref").val();$.ajax({type:"POST",url:href,beforeSend:function(){var loaderHtml='<div class="overlay-loader"></div>';$("body").append(loaderHtml)},complete:function(){$("body").find("div.overlay-loader").remove()},success:function(data){var base64String=data.Captcha;null!=base64String&&($("div.captcha").css("background-image","url('data:image/png;base64,"+base64String+"')"),$("img.captcha").attr("src","data:image/jpeg;base64,"+base64String))},error:function(){alert("Sorry! Due to a technical error, Captcha could not be generated.")}})}),"failure"==$("#instacard-captcha-status").val()?($("#captcha_input_chars").addClass("error"),$("input#captcha_input_chars").after('<label for="instacard-input-text" class="error"> </label>'),$(".captcha_wrapper").find("label").css("display","inline-block")):"success"==$("#instacard-captcha-status").val()&&($("#captcha_input_chars").removeClass("error"),$("input#captcha_input_chars").after('<label for="instacard-input-text" class="valid"> </label>'),$(".captcha_wrapper").find("label").css("display","inline-block")),$(".prelogin-instacard-register-container #card-auth-form #preloginInstaCardBtn").on("click",function(){var loaderHtml='<div class="overlay-loader"></div>';if($("body").append(loaderHtml),$(".captcha_wrapper").find("label").remove(),1==$(".prelogin-instacard-register-container #card-auth-form").valid()){if(""==$("#captcha_input_chars").val())return $("#captcha_input_chars").addClass("error"),$("input#captcha_input_chars").after('<label for="instacard-input-text" class="error"> </label>'),$(".captcha_wrapper").find("label").css("display","inline-block"),$("body").find("div.overlay-loader").remove(),!1;$("#captcha_input_chars").removeClass("error"),$("input#captcha_input_chars").after('<label for="instacard-input-text" class="valid"> </label>'),$(".captcha_wrapper").find("label").css("display","inline-block"),submitAadharForm()}else if(0==$(".prelogin-instacard-register-container #card-auth-form").valid())return""!=$("#captcha_input_chars").val()?($("#captcha_input_chars").removeClass("error"),$("input#captcha_input_chars").after('<label for="instacard-input-text" class="valid"> </label>'),$(".captcha_wrapper").find("label").css("display","inline-block"),$("body").find("div.overlay-loader").remove(),!1):($("#captcha_input_chars").addClass("error"),$("input#captcha_input_chars").after('<label for="instacard-input-text" class="error"> </label>'),$(".captcha_wrapper").find("label").css("display","inline-block"),$("body").find("div.overlay-loader").remove(),!1)})});var getAlertDataCounter=0,newAlertCount=0,alertDropdownCount=parseInt($("#alert_dropdown_limit").val()),alertRetryLimit=parseInt($("#alert_retry_count").val()),alertPopUpContainer="";$(document).ready(function(){if($(".alertButton-clickToProceed").on("click",function(){localStorage.setItem("myprofile-details",!0)}),$("#login-submit-button").on("click",function(){sessionStorage.removeItem("AANData"),sessionStorage.removeItem("AANCtaTokens"),sessionStorage.removeItem("AANCtaTokenList"),sessionStorage.removeItem("updateViewAllAlertsFlag"),sessionStorage.removeItem("updateAlertsLinkFlag"),sessionStorage.removeItem("unreadFlagCount"),sessionStorage.setItem("balloonEnableFlag",!1),sessionStorage.setItem("AANPopupEnableFlag",!0)}),$(".login-submit-alerts").on("click",function(){sessionStorage.removeItem("AANData"),sessionStorage.removeItem("AANCtaTokens"),sessionStorage.removeItem("AANCtaTokenList"),sessionStorage.removeItem("updateViewAllAlertsFlag"),sessionStorage.removeItem("updateAlertsLinkFlag"),sessionStorage.removeItem("unreadFlagCount"),sessionStorage.setItem("balloonEnableFlag",!1),sessionStorage.setItem("AANPopupEnableFlag",!0)}),$(".section-wrapper.clearfix.login-section").exists()&&(sessionStorage.removeItem("AANData"),sessionStorage.removeItem("AANCtaTokens"),sessionStorage.removeItem("AANCtaTokenList"),sessionStorage.removeItem("updateViewAllAlertsFlag"),sessionStorage.removeItem("updateAlertsLinkFlag"),sessionStorage.removeItem("unreadFlagCount"),sessionStorage.removeItem("balloonEnableFlag")),$(".dashbaord-balloon-Container span").on("click",function(){$(".dashbaord-balloon-Container").hide()}),$("#alertSpaContainer").exists()){$(".mobile-menu.mobile-only .icon.dashboard").after("Dashboard"),$(".alert-cta-block a").css("padding","8px 0 !important"),$(".alert-list-container .icon").css("background","url(../img/sprite.png) no-repeat !important"),$("#contactUsId").exists()&&$("#contactUsId").click(function(e){e.preventDefault(),setAnalyticsPost("Contact Us")}),$(".logout-link").parent().click(function(){var isEligible=sessionStorage.getItem("eligibleFeed");if("failure"!==isEligible){$("#logout-content").addClass("open");var jsonData=JSON.parse(sessionStorage.getItem("resQuestionDetails"));questionDetails.push({questionnaireID:jsonData.questionnaireID,channelName:jsonData.channelName,firstQuestion:jsonData.firstQuestion,modeOfSubmission:"web",shortCode:"abcdef"}),$("#first-question").html(),$("#first-question").html("<span>1</span>"+jsonData.firstQuestion)}else alertLogoutUser(),deleteTokenOnLogout(),logoutForm.submit(),logoutSubmit(),setAnalyticsPost("Log out"),sessionStorage.removeItem("jwt")}),$(".icon.dashboard").exists()&&viewport.width>768&&($(".icon.dashboard").parent().removeAttr("onclick"),$(".icon.dashboard").parent().on("click",function(){$(this).attr("href","javascript:void(0)"),submitForm("/creditcards/app/dashboard",!0),setAnalyticsPost("My Dashboard")})),$(".icon.Offers").exists()&&($(".icon.Offers").parent().removeAttr("onclick"),$(".icon.Offers").parent().on("click",function(){$(this).attr("href","javascript:void(0)"),$(this).removeAttr("data-href"),submitForm("/creditcards/app/offers/summary",!0),setAnalyticsPost("Offers")})),"true"==$(".checkAANEligibilty").val()?($(".primary-links li").css("width","32%"),$(".primary-links .alert-list-menu").show(),$(".alert-list-menu").css("visibility","visible")):($(".alert-list-menu").css("visibility","hidden"),$(".primary-links li").css("width","49%"),$(".primary-links .alert-list-menu").hide());var contentURI=$("input#alert-spamodule").val(),pagelink=contentURI;$.ajax({url:pagelink,type:"GET",dataType:"html",cache:!1,beforeSend:function(){var loaderHtml='<div class="sbi-overlay-loader" style="display:block;"></div>';$("#alertSpaContainer").html(loaderHtml)},success:function(data){function checkContainer(){$(".newAlertList .alert-row").is(":visible")?"true"==sessionStorage.getItem("updateViewAllAlertsFlag")&&($(".newAlertList .alert-row").each(function(index){if(index>=alertDropdownCount){var alertsId=$(this).find(".alert-container").attr("id"),alertDesc=$(this).find(".alert-container").find(".alert-data").find(".alert-desc").find(".alert-desc-text").html(),ctaType="VIEW",repeatCount=($(this).find(".alert-container").attr("channel"),parseInt($(this).attr("repeatcount"))+1),alertDisplayType=$(this).find(".alert-container").attr("alert-displayType"),alertOrgId=$(this).find(".alert-container").attr("alert-orgID");sessionStorage.setItem("AANCtaTokens",JSON.stringify({alert_id:alertsId,alert_desc:alertDesc,alertCTALabel:null,alert_activity_type:ctaType,repeatabilityCounter:repeatCount,channel:channel,displayType:alertDisplayType,orgId:alertOrgId})),null==sessionStorage.getItem("AANCtaTokenList")?sessionStorage.setItem("AANCtaTokenList",sessionStorage.getItem("AANCtaTokens")):sessionStorage.setItem("AANCtaTokenList",sessionStorage.getItem("AANCtaTokenList")+","+sessionStorage.getItem("AANCtaTokens"))}}),updateViewAllData()):setTimeout(checkContainer,50)}$("#alertSpaContainer").append(data),checkContainer()},error:function(xhr){"901"==xhr.status&&(window.location.href="/creditcards/app/user/login/error/invalidSession")},complete:function(){$("#alertSpaContainer .sbi-overlay-loader").remove()}}),$.ajaxSetup({cache:!0})}"true"==$(".checkAANEligibilty").val()?($(".primary-links li").css("width","32%"),$(".primary-links .alert-list-menu").show(),$(".alert-list-menu").css("visibility","visible"),0==$(".aan-dasboard-alertLoad").length||""!=sessionStorage.getItem("AANData")&&null!=sessionStorage.getItem("AANData")&&void 0!=sessionStorage.getItem("AANData")?displayAlertList():(sessionStorage.setItem("updateViewAllAlertsFlag",!0),sessionStorage.setItem("updateAlertsLinkFlag",!0),getAlertData())):($(".alert-list-menu").css("visibility","hidden"),$(".primary-links li").css("width","49%"),$(".primary-links .alert-list-menu").hide()),$("body").click(function(e){$(e.target).closest(".dashbaord-balloon-Container").length?($(".alert-list-container").show(),$(".alert-list-container").addClass("active")):$(".dashbaord-balloon-Container").is(":visible")?($(".alert-list-container").hide(),$(".alert-list-container").removeClass("active")):$(e.target).closest(".dashbaord-balloon-Container").length||$(e.target).closest(".alert-list-container").length||($(".alert-list-container").hide(),$(".alert-list-container").removeClass("active"))}),$(".alert-list-menu").on("click",function(event){$(".dashbaord-balloon-Container").hide(),($("#new-alert-block .alert-container").length>0||$("#earlier-alert-block .alert-container").length>0)&&$(".alert-list-container").toggleClass("active"),$("#new-alert-block .alert-container").length>0?$("#new-alert-block h3").show():$("#new-alert-block h3").hide(),$("#earlier-alert-block .alert-container").length>0?$("#earlier-alert-block h3").show():$("#earlier-alert-block h3").hide(),$("#new-alert-block .alert-container").length>0||$("#earlier-alert-block .alert-container").length>0?$("#view-all-alert h4").show():$("#view-all-alert h4").hide(),$("#alert-content").hasClass("active")?$(".alert-list-container").css("display","block"):$(".alert-list-container").css("display","none"),"true"==sessionStorage.getItem("updateAlertsLinkFlag")&&($("#new-alert-block .alert-container").each(function(){var alertsId=$(this).attr("id"),alertDesc=$(this).find(".alertTxtContainer").find(".alert-desc").attr("alert-data-desc"),ctaType="VIEW",alertChannel=$(this).attr("channel"),repeatCount=parseInt($(this).attr("repeatcount"))+1,alertDisplayType=$(this).attr("alert-displayType"),alertOrgId=$(this).attr("alert-orgID");sessionStorage.setItem("AANCtaTokens",JSON.stringify({alert_id:alertsId,alert_desc:alertDesc,alertCTALabel:null,alert_activity_type:ctaType,repeatabilityCounter:repeatCount,channel:alertChannel,displayType:alertDisplayType,orgId:alertOrgId})),null==sessionStorage.getItem("AANCtaTokenList")?sessionStorage.setItem("AANCtaTokenList",sessionStorage.getItem("AANCtaTokens")):sessionStorage.setItem("AANCtaTokenList",sessionStorage.getItem("AANCtaTokenList")+","+sessionStorage.getItem("AANCtaTokens"))}),updateMyAlertLinkData()),event.stopPropagation()}),$("body").click(function(){$(".alert-list-container").removeClass("active")}),$(".alert-container").on("click",function(){var alertId=$(this).parent().attr("id");setAnalyticsIconClick(alertId)}),$("#balloon-knwMore-btn").on("click",function(){$(".alert-list-container").show(),$(".dashbaord-balloon-Container").hide(),$("#new-alert-block .alert-container").length>0?$("#new-alert-block h3").show():$("#new-alert-block h3").hide(),$("#earlier-alert-block .alert-container").length>0?$("#earlier-alert-block h3").show():$("#earlier-alert-block h3").hide(),"true"==sessionStorage.getItem("updateAlertsLinkFlag")&&($("#new-alert-block .alert-container").each(function(){var alertsId=$(this).attr("id"),alertDesc=$(this).find(".alertTxtContainer").find(".alert-desc").attr("alert-data-desc"),ctaType="VIEW",alertChannel=$(this).attr("channel"),repeatCount=parseInt($(this).attr("repeatcount"))+1,alertDisplayType=$(this).attr("alert-displayType"),alertOrgId=$(this).attr("alert-orgID");sessionStorage.setItem("AANCtaTokens",JSON.stringify({alert_id:alertsId,alert_desc:alertDesc,alertCTALabel:null,alert_activity_type:ctaType,repeatabilityCounter:repeatCount,channel:alertChannel,displayType:alertDisplayType,orgId:alertOrgId})),null==sessionStorage.getItem("AANCtaTokenList")?sessionStorage.setItem("AANCtaTokenList",sessionStorage.getItem("AANCtaTokens")):sessionStorage.setItem("AANCtaTokenList",sessionStorage.getItem("AANCtaTokenList")+","+sessionStorage.getItem("AANCtaTokens"))}),updateMyAlertLinkData())}),$(".alertButton-clickToProceed").on("click",function(){localStorage.setItem("myprofile-details",!0)}),$(".icon.dashboard").parent().on("click",function(){viewport.width>768&&"Y"==$("#getAlertDataFlag").val()&&(sessionStorage.removeItem("AANData"),sessionStorage.removeItem("newAlertCount"),sessionStorage.removeItem("updateAlertsLinkFlag"),sessionStorage.removeItem("updateViewAllAlertsFlag"),sessionStorage.removeItem("unreadFlagCount"),$(".alert-unreadcount").html(""),$(".alert-unreadcount").css("background","none"))}),$("#Maybe-button-content").click(function(){alertLogoutUser(),deleteTokenOnLogout(),setAnalyticsPost("Log out"),sessionStorage.removeItem("jwt"),sessionStorage.clear(),logoutForm.submit(),logoutSubmit()}),$(".Maybe-button-content").click(function(){alertLogoutUser(),deleteTokenOnLogout(),setAnalyticsPost("Log out"),sessionStorage.removeItem("jwt"),sessionStorage.clear(),logoutForm.submit(),logoutSubmit()}),$(".logout-popup-x-csat").click(function(){alertLogoutUser(),deleteTokenOnLogout(),setAnalyticsPost("Log out"),sessionStorage.removeItem("jwt"),sessionStorage.clear(),logoutForm.submit(),logoutSubmit()}),""!=sessionStorage.getItem("AANCtaTokenList")&&"undefined"!=sessionStorage.getItem("AANCtaTokenList")&&null!=sessionStorage.getItem("AANCtaTokenList")&&alertLogoutUser()}),text_truncate=function(str,length,ending){return null==length&&(length=100),null==ending&&(ending="..."),str.length>length?str.substring(0,length-ending.length)+ending:str},$(document).ready(function(){$(".modal-overlay.aan-popup-class .button-wrap a").on("click",function(){$(".aan-popup-class").removeClass("open")}),"true"!=sessionStorage.getItem("AANMultiAccCall")||"true"!=$(".checkAANEligibilty").val()||0!=$(".aan-dasboard-alertLoad").length||""!=sessionStorage.getItem("AANData")&&null!=sessionStorage.getItem("AANData")&&void 0!=sessionStorage.getItem("AANData")||0==$(".main").length||getAlertData()}),$(document).ready(function(){$("#proact-uid-otp-submit").bind("copy paste cut",function(e){e.preventDefault()}),$("#pro-new-password").bind("copy paste cut",function(e){e.preventDefault()}),$("#pro-confirm-password").bind("copy paste cut",function(e){e.preventDefault()}),$("#pro-new-password").change(function(){$("#pro-confirm-password").val(""),isPasswordsMatch=!1,$("#pro-conf-pwd-matched").length&&$("#pro-conf-pwd-matched").remove(),proActSetNewCredFormCheck()}),error?$("#proactUidSubmitButton").length&&($("#proactUidSubmitButton").prop("disabled",!0),$("#proactUidSubmitButton").removeClass("submit-button-active"),$("#proactUidSubmitButton").addClass("submit-button-inactive")):($("#proactUidSubmitButton").prop("disabled",!1),$("#proactUidSubmitButton").removeClass("submit-button-inactive"),$("#proactUidSubmitButton").addClass("submit-button-active")),$("#congratulationsModal").exists()&&($("body").css("overflow","hidden"),$(".sbi-eregs-footer").hide()),$("input#pro-new-cred-set-uname").focus(function(){$("#pro-new-set-uname-placeholder").removeClass("new-cred-set-uname-placeholder"),$("#pro-new-set-uname-placeholder").addClass("new-cred-set-uname-placeholder-clicked")}),$("input#pro-new-cred-set-uname").blur(function(){var uname=$("#pro-new-cred-set-uname").val();(null==uname||""==uname)&&($("#pro-new-set-uname-placeholder").removeClass("new-cred-set-uname-placeholder-clicked"),$("#pro-new-set-uname-placeholder").addClass("new-cred-set-uname-placeholder"))}),$("input#password").focus(function(){$("#pro-set-new-pwd-placeholder").removeClass("new-cred-set-pwd-placeholder"),$("#pro-set-new-pwd-placeholder").addClass("new-cred-set-pwd-placeholder-clicked")}),$("input#password").blur(function(){var pwd=$("#password").val();(null==pwd||""==pwd)&&($("#pro-set-new-pwd-placeholder").removeClass("new-cred-set-pwd-placeholder-clicked"),$("#pro-set-new-pwd-placeholder").addClass("new-cred-set-pwd-placeholder"))}),$("input#pro-confirm-password").focus(function(){$("#pro-cred-conf-pwd-placeholder").removeClass("new-cred-set-pwd-placeholder"),$("#pro-cred-conf-pwd-placeholder").addClass("new-cred-set-pwd-placeholder-active")}),$("input#pro-confirm-password").blur(function(){var confPwd=$("#pro-confirm-password").val();(null==confPwd||""==confPwd)&&($("#pro-cred-conf-pwd-placeholder").removeClass("new-cred-set-pwd-placeholder-active"),$("#pro-cred-conf-pwd-placeholder").addClass("new-cred-set-pwd-placeholder"))})});var isUserNameValid=!1,isPasswordStrong=!1,isPasswordsMatch=!1;$("#pro-new-password").keyup(function(){}),$("#password").keyup(function(){$("#new-cred-pwd-strength-status").html(checkStrength($("#password").val()))}),$(document).ready(function(){$("#allow-us-mob").click(function(){$("#first-time-hide").slideToggle(),$(".chevron-foot").toggleClass("show")})}),$(document).ready(function(){$("#retail-form").exists()&&(console.log("a"),0==$("#retail-form .optn").prop("checked")&&(console.log("b"),$(".submit_button input#claim-reward").attr("disabled",!0),$(".submit_button input#claim-reward").addClass("secondary").removeClass("primary"))),$("#retail-form input.optn").change(function(){console.log("c"),1==$(this).prop("checked")?(console.log("d"),$(".submit_button input#claim-reward").attr("disabled",!1),$(".submit_button input#claim-reward").addClass("primary").removeClass("secondary")):0==$(this).prop("checked")&&(console.log("e"),$(".submit_button input#claim-reward").attr("disabled",!0),$(".submit_button input#claim-reward").addClass("secondary").removeClass("primary"))})}),$(document).ready(function(){$(document).delegate("#mob-kyc-modal-link","click",function(){openModalPopup("quick-contact-popup"),$(".quick-contact-section .modal-wrap").scrollTop(0)}),$(document).delegate(".button-cancel","click",function(){$("#quick-contact-popup").removeClass("open")})}),$(document).ready(function(){function getOnboarded(){disableTabForDigiOnb(),console.log("TAB Disabled now ---"),$("#digi-onb-error-ribbon").removeClass("show"),$("#digi-onb-error-ribbon-message").html(""),$("#digi-onb-welcome-error-display").removeClass("show"),$("#onb-welcome-error-msg").html(""),$("#onboardWelcomeFooter").removeClass("adjustPadding"),"true"===lhsJourneyCheck||lhsJourneyCheck===!0?addDigiOnbLoaderBody():addDigiOnbLoaderModalBody(),$("#onboarded-button").attr("disabled",!0),$("button#onboarded-button").css("background-color","#dadada");const url="/creditcards/app/digitalOnboarding/displayOnboardingSteps";localStorage.setItem("dbUpdateCount",!0),$.ajax({url:url,beforeSend:function(){console.log("before send"),console.log("after send")},complete:function(){"true"===lhsJourneyCheck||lhsJourneyCheck===!0?$("body").find("div.digital-onb-loader").remove():$(".modal-body").find("div.digital-onb-loader").remove()},success:function(data){if(data.success===!0&&"service failure"!==data.eligibilityString){if(manageCardUsageSwitchDetailsString=data.manageCardUsageSwitchDetails,null!=manageCardUsageSwitchDetailsString&&""!=manageCardUsageSwitchDetailsString&&"null"!==manageCardUsageSwitchDetailsString)if(manageCardUsageSwitchDetailsString.indexOf("not")>-1)$("#step-international-usage .sets.set-1,#step-international-usage .sets.set-2,#step-international-usage .sets.set-3").remove(),$("#step-international-usage .sets.set-0").css("z-index","9").addClass("active"),$("#step-international-usage .sets.set-0 .do-step-body").removeClass("hidden"),$("#MCU-noCards").text(manageCardUsageSwitchDetailsString);else{manageCardUsageSwitchDetailsJSONobj=JSON.parse(manageCardUsageSwitchDetailsString);var getCardUsageDetailsResponseObj=manageCardUsageSwitchDetailsJSONobj.getCardUsageDetailsResponse;null==getCardUsageDetailsResponseObj||"null"==getCardUsageDetailsResponseObj?($("#step-international-usage .sets.set-1,#step-international-usage .sets.set-2,#step-international-usage .sets.set-3").remove(),$("#step-international-usage .sets.set-0").css("z-index","9").addClass("active"),$("#step-international-usage .sets.set-0 .do-step-body").removeClass("hidden"),$("#MCU-noCards").text("Sorry! You cannot avail this service at the moment. Please try again later.")):showInitialSwitchDetails()}localStorage.setItem("firstTimeOnboard",data.digitalOnboardingFirstTimeUser),sessionStorage.setItem("onboardingStats",data.eligibilityString),null!==data.eligebleDaysToGenOtp&&void 0!==data.eligebleDaysToGenOtp&&($("#eligebleDaysToGenOtp").val(data.eligebleDaysToGenOtp),$("#mobile-changes-last-4-days .section-col-5 p").html(data.mobileChangeWithinLast4daysMsg)),landUserStep(),displayCardFueature(data);var cardFeatureDisplay=$("#cardFeatureAvailable").val(),landStep=$("#landStep").val();if("N"==cardFeatureDisplay&&"View Card Feature"==landStep)"true"===lhsJourney||lhsJourney===!0?($("#welcome").addClass("opened"),$("#onboardWelcomeMsg").html("Sorry! due to technical error we are unable to proceed . Please try again after sometime."),$("#onboarded-button").text("Ok"),$("#onboarded-button").attr("disabled",!1),$("button#onboarded-button").css("background-color","#26c5ff"),$("button#onboarded-button").css("font-size","14px"),$("#onboardWelcomeFooter").hide()):($("#onboarded-button").text("Skip to Dashboard"),$("#onboarded-button").attr("disabled",!1),$("button#onboarded-button").css("background-color","#26c5ff"),$("button#onboarded-button").css("font-size","14px"),$("#digi-onb-welcome-error-display").addClass("show"),$("#onb-welcome-error-msg").html("Sorry! due to technical error we are unable to proceed . Please try again after sometime."),$("#onboardWelcomeFooter").addClass("adjustPadding"));else if($("#welcome").removeClass("opened"),viewport.width<768){var onboardedStaus=sessionStorage.getItem("onboardingStats"),onboardedStausJSON=JSON.parse(onboardedStaus);if("Manage Pin"==landStep)$("#setps-container-parent").scrollTop(250);else if("E-Statement Subscription"==landStep){var isManagePinStepMissing=!1;onboardedStausJSON.outputFacts.forEach(function(e){"step-generate-pin"==e.stepId&&"NA"==e.stepStatusFlag&&(isManagePinStepMissing=!0)}),$("#setps-container-parent").scrollTop(isManagePinStepMissing?250:350)}else if("International Usage Activation"==landStep){var isManagePinStepMissing=!1,isEstatementStepMissing=!1;onboardedStausJSON.outputFacts.forEach(function(e){"step-generate-pin"==e.stepId&&"NA"==e.stepStatusFlag&&(isManagePinStepMissing=!0),"step-estate-sub"==e.stepId&&"NA"==e.stepStatusFlag&&(isEstatementStepMissing=!0)}),$("#setps-container-parent").scrollTop(isManagePinStepMissing?isEstatementStepMissing?250:350:isEstatementStepMissing?350:450)}else if("View Card Feature"==landStep){var isManagePinStepMissing=!1,isEstatementStepMissing=!1,isIntlUsgStepMissing=!1;onboardedStausJSON.outputFacts.forEach(function(e){"step-generate-pin"==e.stepId&&"NA"==e.stepStatusFlag&&(isManagePinStepMissing=!0),"step-estate-sub"==e.stepId&&"NA"==e.stepStatusFlag&&(isEstatementStepMissing=!0),"step-international-usage"==e.stepId&&"NA"==e.stepStatusFlag&&(isIntlUsgStepMissing=!0)}),$("#setps-container-parent").scrollTop(isManagePinStepMissing?isEstatementStepMissing?isIntlUsgStepMissing?250:350:isIntlUsgStepMissing?350:450:isEstatementStepMissing?isIntlUsgStepMissing?350:450:isIntlUsgStepMissing?450:550)}}}else"001"==data.errorCode||"002"==data.errorCode?($("#doConfimation").addClass("opened"),$("#welcome").removeClass("opened"),$("#finish-onboarding-done").click(function(){if("offer"===data.displayPage)if(""!=$("#noOffer").val()){$("#doConfimation").removeClass("opened"),$("#offer-screen").addClass("opened");$("#mobOnbSkipNow").hide(),$("#mobOnbSkipToDash").show()}else submitDigiOnbForm("/creditcards/app/dashboard",!1),setAnalyticsPost("My Dashboard");else submitDigiOnbForm("/creditcards/app/dashboard",!1),setAnalyticsPost("My Dashboard")})):"true"===lhsJourney||lhsJourney===!0?($("#welcome").addClass("opened"),$("#onboardWelcomeMsg").html("Sorry! due to technical error we are unable to proceed . Please try again after sometime."),$("#onboarded-button").text("Ok"),$("#onboarded-button").attr("disabled",!1),$("button#onboarded-button").css("background-color","#26c5ff"),$("button#onboarded-button").css("font-size","14px"),$("#onboardWelcomeFooter").hide()):($("#onboarded-button").text("Skip to Dashboard"),$("#onboarded-button").attr("disabled",!1),$("button#onboarded-button").css("background-color","#26c5ff"),$("button#onboarded-button").css("font-size","14px"),$("#digi-onb-welcome-error-display").addClass("show"),$("#onb-welcome-error-msg").html("Sorry! due to technical error we are unable to proceed . Please try again after sometime."),$("#onboardWelcomeFooter").addClass("adjustPadding"))},failure:function(data){console.log("Faliure Data ====>",data)}})}if($(".side-menu").find('li a:contains("Manage Your Card")').append('<sup class="lhsMenu-highlighter">New</sup>'),$(".side-menu").find('li a:contains("Get New Card")').append('<sup class="lhsMenu-highlighter">New</sup>'),"digitalOnboarding"==$("#check-dropL1-flag").val()){$(".webform-l2-dropbox .options").find("li:first-child").removeClass("selected"),$("#level2-dropbox option:first-child").removeAttr("selected"),$(".field-wrap.webform-l1-dropbox.content-inlineBlock .fancy-select .options li").removeClass("selected"),$(".field-wrap.webform-l1-dropbox.content-inlineBlock .fancy-select .options:contains('Manage Your Card')").addClass("selected"),$("#webform-subcategory-enable").css("pointer-events","auto"),$("#webform-subcategory-enable a").css("background","rgb(0, 149, 217)"),$(".field-wrap.webform-l1-dropbox.content-inlineBlock .fancy-select .trigger").html("Manage Your Card"),$(".selected-l1").html("Manage Your Card");var href=$("#level1-dropbox").attr("data-href"),selectedLevelId=$("#level1-dropbox option:contains('Manage Your Card')").attr("level1-id"),isSelectedFAQ=$("#level1-dropbox option:contains('Manage Your Card')").attr("isFAQ");$("#show-faq-span a").attr("href",isSelectedFAQ),$("#faq-button").attr("href",isSelectedFAQ),$.ajax({url:href,type:"POST",dataType:"json",data:{level1:selectedLevelId},overlayTarget:$(".main"),success:function(data){var options="",selectOptions="";
$(".webform-l2-dropbox .options").empty();for(var i=0;i<data.length;i++)options+='<li data-id="'+data[i].l2CatId+'" isSelfService="'+data[i].l2SelfService+'" data-raw-value="'+data[i].l2SelfService+'">'+data[i].l2CatDesc+"</li>",selectOptions+='<option data-id="'+data[i].l2CatId+'" isSelfService="'+data[i].l2SelfService+'" data-raw-value="'+data[i].l2SelfService+'">'+data[i].l2CatDesc+"</option>";$(".webform-l2-dropbox .options").html(options),$(".webform-l2-dropbox #level2-dropbox").append(selectOptions),$(".webform-l2-dropbox .options").find("li:first-child").addClass("selected"),$("#level2-dropbox option:first-child").attr("selected","selected"),isSelectedFAQ?($("body").find("div.digital-onb-loader").remove(),$("#webform-l1-section #webform-subcategory-enable").css("pointer-events","none"),openModalPopup("webform-faq-popup"),$("#webform-faq-popup .modal").scrollTop(0),viewport.width<=1024&&($("#webform-faq-popup").css("margin-top","0px"),$("#webform-faq-popup .modal").css("margin-top","0px")),$("#webform-faq-popup").find(".modal-wrap").scrollTop(0),$("#webform-faq-popup #faq-close-button").on("click",function(e){e.preventDefault(),$(".modal-overlay").removeClass("open"),$("#show-faq-span").css("display","block"),$("#webform-l1-section #webform-subcategory-enable").css("pointer-events","auto"),$("#webform-l1-section #webform-subcategory-enable .button.primary").css("background","#0095d9")}),$("#webform-faq-popup #faq-button").on("click",function(e){e.preventDefault(),$("#faq-button").attr("href",isSelectedFAQ),$("#webform-l1-section #webform-subcategory-enable").css("pointer-events","auto"),$("#webform-l1-section #webform-subcategory-enable .button.primary").css("background","#0095d9")})):($("body").find("div.digital-onb-loader").remove(),$("#webform-l1-section #webform-subcategory-enable").css("pointer-events","auto"),$("#webform-l1-section #webform-subcategory-enable .button.primary").css("background","#0095d9"))},error:function(){}})}var lhsJourneyCheck=$("#lhsMenuJourney").val();$("#setps-container-parent").addClass("opened"),$('div[dismis-modal="setps-container-parent"]').click(function(){$("body").removeClass("onboarding-journey-actived")});var lhsJourney=$("#lhsMenuJourney").val();console.log("klssdhfslkd =========>"+lhsJourney),"true"===lhsJourney||lhsJourney===!0?(getOnboarded(),localStorage.setItem("dbUpdateCount",!1)):$("#welcome").addClass("opened"),$("#onboarded-button").click(function(){"Skip to Dashboard"==$("#onboarded-button").text()||"Ok"==$("#onboarded-button").text()?(submitDigiOnbForm("/creditcards/app/dashboard",!0),$("#welcome").removeClass("opened")):getOnboarded(),console.log("button clicked")}),$("#body-not-activated-set2 .do-button-group.space-top.vertical-sm .do-button.next-button.primary").on("click",function(){setAnalyticsDigitalOnboard("Card_Activation_ChangeStep_Next")}),$("#body-activated-set2 .do-button-group.space-top.vertical-sm .do-button.next-button.primary").on("click",function(){setAnalyticsDigitalOnboard("Card_Activation_ChangeStep_Next")}),$("#body-pin-generated #not-reset-buttons .do-button primary.next-button").on("click",function(){setAnalyticsDigitalOnboard("Card_ManagePIN_next")}),$("#mobile-changes-last-4-days .do-button-group.space-top.vertical-sm .do-button.primary.next-button").on("click",function(){setAnalyticsDigitalOnboard("Card_ManagePIN_next")}),$("#step-estate-sub .sets.set-1 #body-before-subscription .do-button.next-button.primary").on("click",function(){setAnalyticsDigitalOnboard("E-Statement Subscribed_Next")}),$("#step-estate-sub .sets.set-3 #body-after-subscription-set3 .do-button-group.space-top.vertical-sm .do-button.next-button.primary").on("click",function(){setAnalyticsDigitalOnboard("E-Statement Subscribed_Next")}),$("#step-estate-sub .sets.set-3 #body-after-update-email-set3 .do-button-group.space-top.vertical-sm .do-button.next-button.primary").on("click",function(){setAnalyticsDigitalOnboard("E-Statement Subscribed_Next")}),$("#step-estate-sub .sets.set-7 #body-before-subscription-set3 .do-button-group.space-top.vertical-sm .do-button.next-button.primary").on("click",function(){setAnalyticsDigitalOnboard("E-Statement Subscribed_Next")}),-1!=window.location.href.indexOf("enachCancellation")&&(j=0,$(".webform-l1-dropbox ul li").siblings().each(function(){-1!=$(this).html().indexOf("NACH Mandate Cancellation/Hold")?$(this).click():!1}),$("#webform-subcategory-enable").css("pointer-events","auto"),$("#webform-subcategory-enable").click())});var hiddenStepCount=0,updateOnFinalSetpData=new onboardingData;updateOnFinalSetpData.cardActivationSrNumber="",updateOnFinalSetpData.estatmentSrNumber="",updateOnFinalSetpData.internationalUsageSrNumber="";var creditLimit=$("#digi-onb-retail-cred-limit").val();$("#cancelManagePin").on("click",function(){$("#generateOtp").removeClass("opened"),$("#step2-pin-button").removeAttr("disabled"),$("#resendOTP").css("pointer-events",""),$("#cancelManagePin").css("margin-top","40px"),$("#resendOTP").css("color","#00b1f2"),$("#cancelManagePin").css("margin-bottom","0")}),$("#resendOTP").on("click",function(){$("#onboard-otp-input").val(""),$.ajax({url:"/creditcards/app/digitalOnboarding/resend-otp-manage-pin",type:"GET",beforeSend:function(){$("#enter-card-detail-step-error").removeClass("show"),$("#onb-error-otp").html(""),addDigiOnbLoaderModalBody(),$("#digi-onboard-otp-exceed").html("")},complete:function(){$(".modal-body").find("div.digital-onb-loader").remove()},success:function(data){var responseData=$.parseJSON(data);$("#enter-card-detail-step-error").addClass("show"),$("#onb-error-otp").html(responseData.otpResponse.message),responseData.otpResponse.success===!0||"true"===responseData.otpResponse.success,responseData.otpResponse.resendEnabled?($("#onboard-otp-input").prop("disabled",!1),$("#onboard-otp-input").css("cursor","auto"),$("#cancelManagePin").css("margin-top","40px")):($("#onboard-otp-input").prop("disabled",!0),$("#onboard-otp-input").css("cursor","not-allowed"),$("#resendOTP").css("pointer-events","none"),$("#resendOTP").css("color","#8a8a96"),$("#cancelManagePin").css("margin-bottom","7%"))},err:function(data){console.log("err OTP ===>"+data)}})}),$("input#digi-onboard-new-pin").on("keyup",function(){const newPinEl=document.querySelector("#new-pin-input > input"),confirmPinEl=document.querySelector("#confirm-pin-input > input");$("#digi-onboard-new-pin").val();$("#digi-onb-conf-pin").val(""),document.querySelector("#step2-pin-button").disabled=!0,$("#confirm-pin-input").siblings(".digiOnbPinMismatch").html(""),$("#digi-ob-pin-matched").length?$("#digi-ob-pin-matched").remove():$("#digi-ob-pin-mismatch").length&&$("#digi-ob-pin-mismatch").remove(),$("#digi-onb-conf-pin-title").hasClass("placeholder-clicked")&&($("#digi-onb-conf-pin-title").removeClass("placeholder-clicked"),$("#digi-onb-conf-pin-title").addClass("placeholder")),4==newPinEl.value.length?confirmPinEl.focus():newPinEl.value.length>4&&(newPinEl.value=newPinEl.value.slice(0,4))}),$("input#digi-onb-conf-pin").on("keyup",function(){$("#digi-onb-conf-pin").val();const confirmPinEl=document.querySelector("#confirm-pin-input > input");4==confirmPinEl.value.length?confirmPinEl.blur():confirmPinEl.value.length>4?confirmPinEl.value=confirmPinEl.value.slice(0,4):0==confirmPinEl.value.length&&($("#digi-ob-pin-mismatch").remove(),$("#confirm-pin-input").siblings(".digiOnbPinMismatch").html(""))}),$("#digi-onb-conf-pin").on("blur",function(){$("#digi-ob-pin-matched").remove(),$("#digi-ob-pin-mismatch").remove(),$("#confirm-pin-input").siblings(".digiOnbPinMismatch").html("");var pin=$("#digi-onboard-new-pin").val(),confPin=$("#digi-onb-conf-pin").val();if(""!=confPin&&null!=confPin)if(pin!=confPin){$("#digi-ob-pin-matched").remove(),document.querySelector("#step2-pin-button").disabled=!0;var confPinErrorValidation='<label id="digi-ob-pin-mismatch" for="confirm-pin-input" class="digi-onb-label-error"></label>';$("#digi-ob-pin-mismatch").length||$("#digi-onb-conf-pin").after(confPinErrorValidation),$("#confirm-pin-input").siblings(".digiOnbPinMismatch").html("The PIN doesn't match")}else if(pin==confPin&&""!=pin&&4==pin.length&&4==confPin.length){var confPinValid='<label id="digi-ob-pin-matched" for="confirm-pin-input" class="digi-onb-label-valid"></label>';$("#digi-ob-pin-matched").length||$("#digi-onb-conf-pin").after(confPinValid),document.querySelector("#step2-pin-button").disabled=!1,$("#digi-ob-pin-mismatch").remove(),$("#confirm-pin-input").siblings(".digiOnbPinMismatch").html(""),$("#manage-pin-skip-step").css("pointer-events","auto"),$("#manage-pin-skip-step").css("color","#00b1f2")}}),$("input#digi-onb-new-pin-reset").on("keyup",function(){{var newPinEl=document.querySelector("#new-pin-reset > input"),confirmPinEl=document.querySelector("#confirm-pin-reset > input");$("#digi-onb-new-pin-reset").val()}$("#digi-onb-confirm-pin-reset").val(""),document.querySelector("#step2-pin-button-reset").disabled=!0,$("#confirm-pin-reset").siblings(".digiOnbPinMismatch").html(""),$("#digi-ob-reset-pin-matched").length?$("#digi-ob-reset-pin-matched").remove():$("#digi-ob-reset-pin-mismatch").length&&$("#digi-ob-reset-pin-mismatch").remove(),$("#digi-onb-conf-reset-pin-title").hasClass("placeholder-clicked")&&($("#digi-onb-conf-reset-pin-title").removeClass("placeholder-clicked"),$("#digi-onb-conf-reset-pin-title").addClass("placeholder")),4==newPinEl.value.length?confirmPinEl.focus():newPinEl.value.length>4&&(newPinEl.value=newPinEl.value.slice(0,4))}),$("input#digi-onb-confirm-pin-reset").on("keyup",function(){$("#digi-onb-confirm-pin-reset").val();const confirmPinEl=document.querySelector("#confirm-pin-reset > input");4==confirmPinEl.value.length?confirmPinEl.blur():confirmPinEl.value.length>4?confirmPinEl.value=confirmPinEl.value.slice(0,4):0==confirmPinEl.value.length&&($("#digi-ob-reset-pin-mismatch").remove(),$("#confirm-pin-reset").siblings(".digiOnbPinMismatch").html(""))}),$("#digi-onb-confirm-pin-reset").on("blur",function(){$("#digi-ob-reset-pin-matched").remove(),$("#digi-ob-reset-pin-mismatch").remove(),$("#confirm-pin-reset").siblings(".digiOnbPinMismatch").html("");var resetPin=$("#digi-onb-new-pin-reset").val(),confResetPin=$("#digi-onb-confirm-pin-reset").val();if(""!=confResetPin&&null!=confResetPin)if(resetPin!=confResetPin){$("#digi-ob-reset-pin-matched").remove(),document.querySelector("#step2-pin-button-reset").disabled=!0;var confResetPinErrorValidation='<label id="digi-ob-reset-pin-mismatch" for="digi-onb-confirm-pin-reset" class="digi-onb-label-error"></label>';$("#digi-ob-reset-pin-mismatch").length||$("#digi-onb-confirm-pin-reset").after(confResetPinErrorValidation),$("#confirm-pin-reset").siblings(".digiOnbPinMismatch").html("The PIN doesn't match")}else if(resetPin==confResetPin&&""!=resetPin&&4==resetPin.length&&4==confResetPin.length){var confPinValid='<label id="digi-ob-reset-pin-matched" for="digi-onb-confirm-pin-reset" class="digi-onb-label-valid"></label>';$("#digi-ob-reset-pin-matched").length||$("#digi-onb-confirm-pin-reset").after(confPinValid),document.querySelector("#step2-pin-button-reset").disabled=!1,$("#digi-ob-reset-pin-mismatch").remove(),$("#confirm-pin-reset").siblings(".digiOnbPinMismatch").html("")}}),$(".do-body-container").length>0?$("body").addClass("onboarding-journey-actived"):$("body").removeClass("onboarding-journey-actived"),function(){function onBoradingModalEngnine(){var closeBtn=$(".dismis-modal"),triggerButton=$(".modal-toggle");closeBtn.click(function(){_this=$(this);var getModalformDom=$("#"+_this.attr("dismis-modal"));getModalformDom.hasClass("opened")&&getModalformDom.removeClass("opened")}),triggerButton.click(function(){_this=$(this);var getModalformDom=$("#"+_this.attr("modal-target"));getModalformDom.hasClass("opened")?getModalformDom.removeClass("opened"):getModalformDom.addClass("opened")})}onBoradingModalEngnine()}(),window.addEventListener("keyup",function(e){27==e.keyCode&&$("#welcome").removeClass("opened")}),$("#finish-buttons").click(function(){$("#digi-onb-error-ribbon").removeClass("show"),$("#digi-onb-error-ribbon-message").html("");var onboardedStaus=sessionStorage.getItem("onboardingStats"),onboardedStausJSON=JSON.parse(onboardedStaus),submitOnbaording={action:"",cardInfoStepStatus:""};onboardedStausJSON.outputFacts.forEach(function(e){"step-card-activation"===e.stepId?updateOnFinalSetpData.cardActivationStepStatus=e.stepStatusFlag:"step-generate-pin"===e.stepId?updateOnFinalSetpData.managePinStepStatus=e.stepStatusFlag:"step-estate-sub"===e.stepId?updateOnFinalSetpData.estatementStepStatus=e.stepStatusFlag:"step-international-usage"===e.stepId?updateOnFinalSetpData.internationUsageActivationStepStatus=e.stepStatusFlag:"step-do-confirmation"===e.stepId&&(updateOnFinalSetpData.cardInfoStepStatus=e.stepStatusFlag,submitOnbaording.cardInfoStepStatus=e.stepStatusFlag)});var uRl="/creditcards/app/digitalOnboarding/updateAllDigitalOnboardingStepStatus";1==!onboardedStausJSON.segmentationRule.updateOnEveryStep?$.ajax({url:uRl,type:"POST",data:updateOnFinalSetpData,beforeSend:function(){$("#digi-onb-error-ribbon").removeClass("show"),$("#digi-onb-error-ribbon-message").html(""),addDigiOnbLoaderBody()},complete:function(){$("body").find("div.digital-onb-loader").remove()},success:function(data){localStorage.removeItem("firstTimeOnboard"),localStorage.setItem("firstTimeOnboard",!1),null!==data.updateResponseString&&void 0!==data.updateResponseString?($("#doConfimation").addClass("opened"),localStorage.setItem("dbUpdateCount",!1),submitOnbaording.action="submitAcknowlegment",submitDigitalonboarding(submitOnbaording)):($("#digi-onb-error-ribbon").addClass("show"),$("#digi-onb-error-ribbon-message").html(data.errorMsg),$("#setps-container-parent").scrollTop(0))},error:function(data){console.log("Faliure Data ====>",data)}}):(submitOnbaording.action="submitAcknowlegment",submitDigitalonboarding(submitOnbaording))}),$("#help-link").click(function(){$("#digi-onb-error-ribbon").removeClass("show"),$("#digi-onb-error-ribbon-message").html("");var onboardedStaus=sessionStorage.getItem("onboardingStats"),onboardedStausJSON=JSON.parse(onboardedStaus),submitOnbaording={action:"callBack",cardInfoStepStatus:""};onboardedStausJSON.outputFacts.forEach(function(e){"step-card-activation"===e.stepId&&(console.log(e.stepStatusFlag),submitOnbaording.cardInfoStepStatus=e.stepStatusFlag)});var submitUrl="/creditcards/app/digitalOnboarding/submitOnboarding";$.ajax({url:submitUrl,type:"POST",data:submitOnbaording,success:function(data){data.success!==!0&&"true"!==data.success||"webform"!==data.displayPage?($("#digi-onb-error-ribbon").addClass("show"),$("#digi-onb-error-ribbon-message").html(data.errorMsg),$("#setps-container-parent").scrollTop(0)):(submitDigiOnbForm("/creditcards/app/webform/webform-interaction/digitalOnboarding",!0),setAnalyticsPost("Mailbox"))},error:function(data){console.log("Error =====>"+data)}})}),$(".exit-onboarding").click(function(){$("#skipOnboarding").removeClass("opened"),submitDigiOnbForm("/creditcards/app/dashboard",!0)}),$(".skip-to-dash").click(function(){submitDigiOnbForm("/creditcards/app/dashboard",!0),setAnalyticsPost("My Dashboard")}),$("input#digi-onboard-new-pin").focus(function(){$("#digi-onb-new-pin-title").removeClass("placeholder"),$("#digi-onb-new-pin-title").addClass("placeholder-clicked")}),$("input#digi-onboard-new-pin").blur(function(){var pin=$("#digi-onboard-new-pin").val();(null==pin||""==pin)&&($("#digi-onb-new-pin-title").removeClass("placeholder-clicked"),$("#digi-onb-new-pin-title").addClass("placeholder"))}),$("input#digi-onb-conf-pin").focus(function(){$("#digi-onb-conf-pin-title").removeClass("placeholder"),$("#digi-onb-conf-pin-title").addClass("placeholder-clicked")}),$("input#digi-onb-conf-pin").blur(function(){var confPin=$("#digi-onb-conf-pin").val();(null==confPin||""==confPin)&&($("#digi-onb-conf-pin-title").removeClass("placeholder-clicked"),$("#digi-onb-conf-pin-title").addClass("placeholder"))}),$("input#digi-onb-new-pin-reset").focus(function(){$("#digi-onb-reset-pin-title").removeClass("placeholder"),$("#digi-onb-reset-pin-title").addClass("placeholder-clicked")}),$("input#digi-onb-new-pin-reset").blur(function(){var pin=$("#digi-onb-new-pin-reset").val();(null==pin||""==pin)&&($("#digi-onb-reset-pin-title").removeClass("placeholder-clicked"),$("#digi-onb-reset-pin-title").addClass("placeholder"))}),$("input#digi-onb-confirm-pin-reset").focus(function(){$("#digi-onb-conf-reset-pin-title").removeClass("placeholder"),$("#digi-onb-conf-reset-pin-title").addClass("placeholder-clicked")}),$("input#digi-onb-confirm-pin-reset").blur(function(){var confPin=$("#digi-onb-confirm-pin-reset").val();(null==confPin||""==confPin)&&($("#digi-onb-conf-reset-pin-title").removeClass("placeholder-clicked"),$("#digi-onb-conf-reset-pin-title").addClass("placeholder"))}),$(document).ready(function(){$(".quickContactEditButton").on("click",function(){$("#edit-addon-emailAddress").parent().find("label.error").remove(),$("#edit-addon-mobileNumber").parent().find("label.error").remove(),$("#edit-addon-mobileNumber").removeClass("error"),$("#edit-addon-emailAddress").removeClass("error")}),$(document).delegate(".email-edit-button","click",function(){$(".verifyNote").css("display","none"),$("#changedFieldName").val("email"),$("#contact-update-form").removeAttr("action"),$("#contact-update-form").attr("action","/creditcards/app/myprofile/update-quick-contact"),$("#otp").val(""),$(".tab-content .form-field-list li").css("margin-bottom","0px");var isVisibleVerifyButton=$("#isVisibleVerifyButton").val(),isEmailVerifyElligible=$("#isEmailVerifyElligible").val(),emailField=$("#primary-EmailId").val(),cardType=$("#addon-cardType").val();"N"==isVisibleVerifyButton&&"true"==isEmailVerifyElligible&&""!=emailField&&"P"==cardType?$(".validate-btn").show():$(".validate-btn").hide(),$(".fancy.addOn-dropbox.fancified").parent().find(".trigger").css("pointer-events","none"),$("#MOB-edit-content p").html(""),$(".addon-container").css("display","none"),$("#unmasked-primary-emailId").css("display","none"),$("#edit-addon-mobileNumber").val()!=$("#primary-MobileNumber").val()&&($("#MOB-edit-content p").html("You will loose any change done in Mobile Number if you click on Continue."),$(".mob-edit-contBtn").attr("id","mob-edit-cont-email"),$("#MOB-edit-row .button-cancel").attr("id","mob-edit-close-email"),openModalPopup("MOB-edit-popup"));var isMobUpdateEligible=$("#isMobUpdateEligible").val(),isMobUpdateEligibleCovid=$("#isMobUpdateEligibleCovid").val();console.log("isMobUpdateEligibleCovid"+isMobUpdateEligibleCovid),console.log("isMobUpdateEligible"+isMobUpdateEligible);var cardType=$("#addon-cardType").val();if("false"==isMobUpdateEligible&&"P"==cardType){if(console.log("Inside email if condition"),$(".mobile-number-expanded-body").hide(),$(".mobile-number-main-container").show(),$(".email-id-expanded-body").hide(),$(".email-id-main-container").show(),$(".addon-emailId").show(),$(".email-edit-button").hide(),$(".mobile-edit-button").show(),$("#isMobUpdateEligibleChk").css("display","none"),$("#isEmailUpdateEligibleChk").css("display","block"),$(".primary-card-edit-main-containter .otp-list.generate-otp-tab").hide(),"true"==isMobUpdateEligibleCovid){var href="/creditcards/myprofile/mob-activity-recording";$.ajax({url:href,type:"POST",data:{changedFieldName:$("#changedFieldName").val()},success:function(){},error:function(){}})}$(".validate-btn").css(viewport.width<768?{"padding-top":"0px",right:"60%",left:"8px",top:"8px"}:{"padding-top":"0px","padding-right":"90px"})}else if("P"!=cardType&&$("#isEmailUpdateEligibleChk").empty(),console.log("inside else"),$("#changedFieldName").val("email"),$("#isEmailUpdateEligibleChk").css("display","none"),""==$("#isEmailUpdateEligibleChk").html()){if(console.log("inside empty"),$(".addon-edit-container").css("display","block"),$(".addon-container").css("display","none"),$("#edit-addon-mobileNumber").val()!=$("#primary-MobileNumber").val()){var changedMobile=$("#edit-addon-mobileNumber").val();$(".mobile-number-expanded-body").val(changedMobile),$(".mobile-number-expanded-body").show(),$(".email-id-main-container").show(),$(".email-edit-button").show(),$(".mobile-edit-button").hide(),$(".primary-otp-msg").html("If your current registered mobile no. is operational, Generate OTP to update your mobile number. The One Time Password (OTP) will be sent on your registered mobile number, and will be valid for either 10-min or one successful usage."),$(".addon-otp-msg").html("Generate OTP to change mobile number for add-on card. The OTP will be sent to the primary cardholder&#39;s registered mobile number. The OTP will be valid for 10 minutes or one successful usage.")}else $(".mobile-number-expanded-body").hide(),$(".mobile-number-main-container").show(),$(".email-id-expanded-body").show(),$(".email-id-main-container").hide(),$(".email-edit-button").hide(),$(".mobile-edit-button").show(),$(".validate-btn").css(viewport.width<768?{"padding-top":"0px",left:"63%",top:"-24px"}:{"padding-top":"10px","padding-right":"28%"}),$(".primary-otp-msg").html("If your current registered mobile no. is operational, Generate OTP to update your email ID. The One Time Password (OTP) will be sent on your registered mobile number, and will be valid for either 10-min or one successful usage."),$(".addon-otp-msg").html("Generate OTP to change email ID for add-on card. The OTP will be sent to the primary cardholder&#39;s registered mobile number. The OTP will be valid for 10 minutes or one successful usage.");$(".primary-card-edit-main-containter .otp-list.resend-otp-quick").hide(),$(".primary-card-edit-main-containter .otp-list.generate-otp-tab").show(),"email"==$("#changedFieldName").val()&&($("#otp-invalid").parent().hide(),$("#mob-otp-Attempt-Exceeded").parent().hide(),$("#resendOtp-exceed").parent().hide(),$("#resendOtp-exceed").html("")),mobEditContactDetail()}else console.log("inside outer else email"),$(".editable-contact-detail-container.email-id-border.email-id-expanded-body").show(),$(".tab-content.hide-editable.email-id-main-container").hide(),$("#edit-addon-mobileNumber").attr("disabled","disabled"),$(".generate-otp-tab").hide(),$(".mobile-number-expanded-body").hide(),$(".mobile-number-main-container").show(),$("#edit-addon-emailAddress").parent().find(".tooltip").hide(),$("#resend-otp-tab").hide()}),$(document).delegate(".primary-card-edit-main-containter #generate-otp-email-edit","click",function(){$(".primary-card-edit-main-containter .generate-otp-tab").hide(),$("#contact-update-form .resend-otp-quick").show()}),$(document).delegate(".validate-btn","click",function(){if($(".verifyNote").css("display","none"),$("#contact-update-form").removeAttr("action"),$("#contact-update-form").attr("action","/creditcards/app/myprofile/verify-email-address"),$(".fancy.addOn-dropbox.fancified").parent().find(".trigger").css("pointer-events","none"),$("#MOB-edit-content p").html(""),$("#otp").val(""),$("#isEmailUpdateEligibleChk").css("display","none"),$("#isMobUpdateEligibleChk").css("display","none"),$(".addon-container").css("display","block"),$(".addon-emailId").css("display","none"),$("#unmasked-primary-emailId").css("display","block"),viewport.width<768?$(".tab-content .form-field-list li").css("margin-bottom","5px"):$(".tab-content .form-field-list li").css("margin-bottom","10px"),$("#edit-addon-emailAddress").val()!=$("#primary-EmailId").val()&&($("#MOB-edit-content p").html("You will loose any change done in E-mail ID if you click on Continue."),$(".mob-edit-contBtn").attr("id","mob-validate-cont-email"),$("#MOB-edit-row .button-cancel").attr("id","mob-validate-close-email"),openModalPopup("MOB-edit-popup")),$("#edit-addon-mobileNumber").val()!=$("#primary-MobileNumber").val()&&($("#MOB-edit-content p").html("You will loose any change done in Mobile Number if you click on Continue."),$(".mob-edit-contBtn").attr("id","mob-validate-cont-email"),$("#MOB-edit-row .button-cancel").attr("id","mob-validate-close-email"),openModalPopup("MOB-edit-popup")),$("#changedFieldName").val("verify_email"),$(".addon-edit-container").css("display","block"),$(".addon-container").css("display","none"),$(".addon-emailId").hide(),$("#edit-addon-emailAddress").val()!=$("#primary-EmailId").val()){var changedEmail=$("#edit-addon-emailAddress").val();$(".email-id-expanded-body").val(changedEmail),$(".email-id-expanded-body").show(),$("#unmasked-primary-emailId").hide(),$(".email-edit-button").hide(),$(".validate-btn").show(),$(".addon-emailId").show(),$(".primary-otp-msg").html("If your current registered mobile no. is operational, Generate OTP to update your email ID. The One Time Password (OTP) will be sent on your registered mobile number, and will be valid for either 10-min or one successful usage."),$(".addon-otp-msg").html("Generate OTP to change email ID for add-on card. The OTP will be sent to the primary cardholder&#39;s registered mobile number. The OTP will be valid for 10 minutes or one successful usage.")}else $(".email-id-expanded-body").hide(),$(".email-id-main-container").show(),$("#unmasked-primary-emailId").show(),$(".email-edit-button").show(),$(".validate-btn").hide(),$(".addon-emailId").hide(),$(".primary-otp-msg").html("If your current registered mobile no. is operational, Generate OTP to verify your email ID. The One Time Password (OTP) will be sent on your registered mobile number, and will be valid for either 10-min or one successful usage.");if($("#edit-addon-mobileNumber").val()!=$("#primary-MobileNumber").val()){var changedMobile=$("#edit-addon-mobileNumber").val();$(".mobile-number-expanded-body").val(changedMobile),$(".mobile-number-expanded-body").show(),$("#unmasked-primary-emailId").hide(),$(".mobile-edit-button").hide(),$(".validate-btn").show(),$(".addon-emailId").show(),$(".primary-otp-msg").html("If your current registered mobile no. is operational, Generate OTP to update your mobile number. The One Time Password (OTP) will be sent on your registered mobile number, and will be valid for either 10-min or one successful usage."),$(".addon-otp-msg").html("Generate OTP to change mobile number for add-on card. The OTP will be sent to the primary cardholder&#39;s registered mobile number. The OTP will be valid for 10 minutes or one successful usage.")}else $(".mobile-number-expanded-body").hide(),$(".mobile-number-main-container").show(),$("#unmasked-primary-emailId").show(),$(".mobile-edit-button").show(),$(".validate-btn").hide(),$(".addon-emailId").hide(),$(".primary-otp-msg").html("If your current registered mobile no. is operational, Generate OTP to verify your email ID. The One Time Password (OTP) will be sent on your registered mobile number, and will be valid for either 10-min or one successful usage.");$(".primary-card-edit-main-containter .otp-list.resend-otp-quick").hide(),$(".primary-card-edit-main-containter .otp-list.generate-otp-tab").show(),"verify_email"==$("#changedFieldName").val()&&($("#otp-invalid").parent().hide(),$("#mob-otp-Attempt-Exceeded").parent().hide(),$("#resendOtp-exceed").parent().hide(),$("#resendOtp-exceed").html("")),mobEditContactDetail()}),$(document).delegate(".mobile-edit-button","click",function(){$(".verifyNote").css("display","none"),$("#changedFieldName").val("mobile"),$("#contact-update-form").removeAttr("action"),$("#contact-update-form").attr("action","/creditcards/app/myprofile/update-quick-contact"),$(".fancy.addOn-dropbox.fancified").parent().find(".trigger").css("pointer-events","none"),$("#MOB-edit-content p").html(""),$("#otp").val(""),$(".tab-content .form-field-list li").css("margin-bottom","0px");var isVisibleVerifyButton=$("#isVisibleVerifyButton").val(),isEmailVerifyElligible=$("#isEmailVerifyElligible").val(),emailField=$("#primary-EmailId").val(),cardType=$("#addon-cardType").val();"N"==isVisibleVerifyButton&&"true"==isEmailVerifyElligible&&""!=emailField&&"P"==cardType?$(".validate-btn").show():$(".validate-btn").hide(),$(".addon-emailId").show(),$("#unmasked-primary-emailId").css("display","none");{var emailFieldCheck=$("#primary-EmailId").val();$("#edit-addon-emailAddress").val()}$("#edit-addon-emailAddress").val()!=emailFieldCheck&&($("#MOB-edit-content p").html("You will loose any change done in E-mail ID if you click on Continue."),$(".mob-edit-contBtn").attr("id","mob-edit-cont-mobile"),$("#MOB-edit-row .button-cancel").attr("id","mob-edit-close-mobile"),$(".addon-emailId").show(),openModalPopup("MOB-edit-popup"));var isMobUpdateEligible=$("#isMobUpdateEligible").val(),isMobUpdateEligibleCovid=$("#isMobUpdateEligibleCovid").val();console.log("isMobUpdateEligibleCovid"+isMobUpdateEligibleCovid),console.log("isMobUpdateEligible"+isMobUpdateEligible);var cardType=$("#addon-cardType").val();if("false"==isMobUpdateEligible&&"P"==cardType){if(console.log("inside if"),$(".email-id-expanded-body").hide(),$(".email-id-main-container").show(),$(".mobile-number-expanded-body").hide(),$(".mobile-number-main-container").show(),$(".email-edit-button").show(),$(".mobile-edit-button").hide(),$("#isEmailUpdateEligibleChk").css("display","none"),$("#isMobUpdateEligibleChk").css("display","block"),$(".primary-card-edit-main-containter .otp-list.generate-otp-tab").hide(),"true"==isMobUpdateEligibleCovid){var href="/creditcards/myprofile/mob-activity-recording";$.ajax({url:href,type:"POST",data:{changedFieldName:$("#changedFieldName").val()},success:function(){},error:function(){}})}$(".validate-btn").css(viewport.width<768?{"padding-top":"0px",left:"60%",top:"8px"}:{"padding-top":"0px","padding-right":"10px"})}else if("P"!=cardType&&$("#isMobUpdateEligibleChk").empty(),console.log("inside else"),$("#isMobUpdateEligibleChk").css("display","none"),$("#changedFieldName").val("mobile"),""==$("#isMobUpdateEligibleChk").html()){if(console.log("inside empty"),$(".addon-edit-container").css("display","block"),$("#MOB-editContainer-mobile").show(),$("#isMobUpdateEligibleChk").hide(),$(".addon-container").css("display","none"),$("#edit-addon-emailAddress").val()!=$("#primary-EmailId").val()){var changedEmail=$("#edit-addon-emailAddress").val();$(".email-id-expanded-body").val(changedEmail),$(".email-id-expanded-body").show(),$(".email-edit-button").hide(),$(".mobile-edit-button").show(),$(".validate-btn").css(viewport.width<768?{"padding-top":"0px",left:"63%",top:"-24px"}:{"padding-top":"10px","padding-right":"28%"}),$(".primary-otp-msg").html("If your current registered mobile no. is operational, Generate OTP to update your email ID. The One Time Password (OTP) will be sent on your registered mobile number, and will be valid for either 10-min or one successful usage."),$(".addon-otp-msg").html("Generate OTP to change email ID for add-on card. The OTP will be sent to the primary cardholder&#39;s registered mobile number. The OTP will be valid for 10 minutes or one successful usage.")}else $(".email-id-expanded-body").hide(),$(".email-id-main-container").show(),$(".mobile-number-expanded-body").show(),$(".mobile-number-main-container").hide(),$(".email-edit-button").show(),$(".mobile-edit-button").hide(),$(".validate-btn").css(viewport.width<768?{"padding-top":"0px",left:"80px",top:"8px"}:{"padding-top":"0px","padding-right":"10px"}),$(".primary-otp-msg").html("If your current registered mobile no. is operational, Generate OTP to update your mobile number. The One Time Password (OTP) will be sent on your registered mobile number, and will be valid for either 10-min or one successful usage."),$(".addon-otp-msg").html("Generate OTP to change mobile number for add-on card. The OTP will be sent to the primary cardholder&#39;s registered mobile number. The OTP will be valid for 10 minutes or one successful usage.");$("#edit-addon-mobileNumber").removeAttr("disabled"),$(".primary-card-edit-main-containter .otp-list.resend-otp-quick").hide(),$(".primary-card-edit-main-containter .otp-list.generate-otp-tab").show(),"P"==$("#addon-cardType").val()?($(".tooltip.tooltip-w140.tooltip-primary-mobile").show(),$(".tooltip.tooltip-w140.tooltip-addon-mobile").hide()):($(".tooltip.tooltip-w140.tooltip-primary-mobile").hide(),$(".tooltip.tooltip-w140.tooltip-addon-mobile").show()),"mobile"==$("#changedFieldName").val()&&($("#otp-invalid").parent().hide(),$("#mob-otp-Attempt-Exceeded").parent().hide(),$("#resendOtp-exceed").parent().hide(),$("#resendOtp-exceed").html("")),mobEditContactDetail()
}else console.log("inside outer else"),$(".editable-contact-detail-container.mobile-number-border.mobile-number-expanded-body").show(),$(".tab-content.hide-editable.mobile-number-main-container").hide(),$("#edit-addon-mobileNumber").attr("disabled","disabled"),$(".generate-otp-tab").hide(),$(".email-id-main-container").show(),$(".email-id-expanded-body").hide(),$("#edit-addon-mobileNumber").parent().find(".tooltip").hide(),$("#resend-otp-tab").hide()}),$("#MOB-edit-popup").length>0&&($(document).delegate("#mob-edit-cont-email","click",function(){$(".mobile-edit-button").show(),$(".email-edit-button").hide(),$(".validate-btn").css(viewport.width<768?{"padding-top":"0px",left:"63%",top:"-24px"}:{"padding-top":"10px","padding-right":"28%"});var MOBTempMobile=$("#primary-MobileNumber").val();$("#edit-addon-mobileNumber").val(MOBTempMobile),""==$("#isEmailUpdateEligibleChk").html()?($(".addon-edit-container").css("display","block"),$(".addon-container").css("display","none"),$(".email-id-expanded-body").show(),$(".email-id-main-container").hide(),$(".mobile-number-expanded-body").hide(),$(".mobile-number-main-container").show(),$("#changedFieldName").val("email"),$(".primary-card-edit-main-containter .otp-list.resend-otp-quick").hide(),$(".primary-card-edit-main-containter .otp-list.generate-otp-tab").show(),mobEditContactDetail(),$(".primary-otp-msg").html("If your current registered mobile no. is operational, Generate OTP to update your email ID. The One Time Password (OTP) will be sent on your registered mobile number, and will be valid for either 10-min or one successful usage."),$(".addon-otp-msg").html("Generate OTP to change email ID for add-on card. The OTP will be sent to the primary cardholder&#39;s registered mobile number. The OTP will be valid for 10 minutes or one successful usage.")):($(".editable-contact-detail-container.email-id-border.email-id-expanded-body").show(),$(".tab-content.hide-editable.email-id-main-container").hide(),$("#edit-addon-mobileNumber").attr("disabled","disabled"),$(".generate-otp-tab").hide(),$(".mobile-number-expanded-body").hide(),$(".mobile-number-main-container").show(),$("#edit-addon-emailAddress").parent().find(".tooltip").hide(),$("#resend-otp-tab").hide()),$("#MOB-edit-popup").removeClass("open")}),$(document).delegate("#mob-validate-cont-email","click",function(){$(".mobile-edit-button").show(),$(".email-edit-button").show(),$(".validate-btn").hide();var MOBTempEmailID=$("#primary-EmailId").val(),MOBTempMobile=$("#primary-MobileNumber").val();$("#edit-addon-emailAddress").val(MOBTempEmailID),$("#edit-addon-mobileNumber").val(MOBTempMobile),""==$("#isEmailUpdateEligibleChk").html()?($(".addon-edit-container").css("display","block"),$(".addon-container").css("display","none"),$("#changedFieldName").val("verify_email"),$(".email-id-expanded-body").hide(),$(".email-id-main-container").show(),$(".addon-emailId").hide(),$("#unmasked-primary-emailId").show(),$(".mobile-number-expanded-body").hide(),$(".mobile-number-main-container").show(),$(".primary-card-edit-main-containter .otp-list.resend-otp-quick").hide(),$(".primary-card-edit-main-containter .otp-list.generate-otp-tab").show(),$(".primary-otp-msg").html("If your current registered mobile no. is operational, Generate OTP to verify your email ID. The One Time Password (OTP) will be sent on your registered mobile number, and will be valid for either 10-min or one successful usage."),mobEditContactDetail()):($(".editable-contact-detail-container.email-id-border.email-id-expanded-body").hide(),$(".tab-content.hide-editable.email-id-main-container").show(),$("#edit-addon-mobileNumber").attr("disabled","disabled"),$(".generate-otp-tab").hide(),$(".mobile-number-expanded-body").hide(),$(".mobile-number-main-container").show(),$("#edit-addon-emailAddress").parent().find(".tooltip").hide(),$("#resend-otp-tab").hide()),$("#MOB-edit-popup").removeClass("open")}),$(document).delegate("#mob-edit-cont-mobile","click",function(){$(".email-edit-button").show(),$(".mobile-edit-button").hide(),$(".validate-btn").css(viewport.width<768?{"padding-top":"0px",left:"80px",top:"8px"}:{"padding-top":"0px","padding-right":"10px"});var MOBTempEmailID=$("#primary-EmailId").val();$("#edit-addon-emailAddress").val(MOBTempEmailID),$("#changedFieldName").val("mobile"),$(".primary-card-edit-main-containter .otp-list.resend-otp-quick").hide(),""==$("#isMobUpdateEligibleChk").html()?($(".addon-edit-container").css("display","block"),$("#MOB-editContainer-mobile").show(),$("#isMobUpdateEligibleChk").hide(),$(".addon-container").css("display","none"),$(".email-id-expanded-body").hide(),$(".mobile-number-expanded-body").show(),$(".mobile-number-main-container").hide(),$(".email-id-main-container").show(),$("#edit-addon-mobileNumber").removeAttr("disabled"),$(".primary-card-edit-main-containter .otp-list.generate-otp-tab").show(),"P"==$("#addon-cardType").val()?($(".tooltip.tooltip-w140.tooltip-primary-mobile").show(),$(".tooltip.tooltip-w140.tooltip-addon-mobile").hide()):($(".tooltip.tooltip-w140.tooltip-primary-mobile").hide(),$(".tooltip.tooltip-w140.tooltip-addon-mobile").show()),mobEditContactDetail(),$(".primary-otp-msg").html("If your current registered mobile no. is operational, Generate OTP to update your mobile number. The One Time Password (OTP) will be sent on your registered mobile number, and will be valid for either 10-min or one successful usage."),$(".addon-otp-msg").html("Generate OTP to change mobile number for add-on card. The OTP will be sent to the primary cardholder&#39;s registered mobile number. The OTP will be valid for 10 minutes or one successful usage.")):($(".editable-contact-detail-container.mobile-number-border.mobile-number-expanded-body").show(),$(".tab-content.hide-editable.mobile-number-main-container").hide(),$("#edit-addon-mobileNumber").attr("disabled","disabled"),$(".generate-otp-tab").hide(),$(".email-id-main-container").show(),$(".email-id-expanded-body").hide(),$("#edit-addon-mobileNumber").parent().find(".tooltip").hide()),$("#MOB-edit-popup").removeClass("open")}),$(document).delegate("#mob-edit-close-email","click",function(){$("#MOB-edit-popup").removeClass("open");var changedMobile=$("#edit-addon-mobileNumber").val();$(".mobile-number-expanded-body").val(changedMobile),$(".mobile-number-expanded-body").show(),$(".email-id-main-container").show(),$(".email-id-expanded-body").hide(),$(".email-edit-button").show(),$(".mobile-edit-button").hide();var isVisibleVerifyButton=$("#isVisibleVerifyButton").val(),isEmailVerifyElligible=$("#isEmailVerifyElligible").val(),emailField=$("#primary-EmailId").val(),cardType=$("#addon-cardType").val();"N"==isVisibleVerifyButton&&"true"==isEmailVerifyElligible&&""!=emailField&&"P"==cardType?$(".validate-btn").show():$(".validate-btn").hide(),$(".tab-content .form-field-list li").css("margin-bottom","0px")}),$(document).delegate("#mob-validate-close-email","click",function(){if($("#MOB-edit-popup").removeClass("open"),$("#edit-addon-emailAddress").val()!=$("#primary-EmailId").val()){var changedEmail=$("#edit-addon-emailAddress").val();$(".email-id-expanded-body").val(changedEmail),$(".email-id-expanded-body").show(),$(".mobile-number-expanded-body").hide(),$(".mobile-number-main-container").show(),$(".mobile-edit-button").show(),$(".email-edit-button").hide(),$(".tab-content .form-field-list li").css("margin-bottom","0px"),$(".primary-otp-msg").html("If your current registered mobile no. is operational, Generate OTP to update your email ID. The One Time Password (OTP) will be sent on your registered mobile number, and will be valid for either 10-min or one successful usage."),$(".addon-otp-msg").html("Generate OTP to change email ID for add-on card. The OTP will be sent to the primary cardholder&#39;s registered mobile number. The OTP will be valid for 10 minutes or one successful usage.");var isVisibleVerifyButton=$("#isVisibleVerifyButton").val(),isEmailVerifyElligible=$("#isEmailVerifyElligible").val(),emailField=$("#primary-EmailId").val(),cardType=$("#addon-cardType").val();"N"==isVisibleVerifyButton&&"true"==isEmailVerifyElligible&&""!=emailField&&"P"==cardType?$(".validate-btn").show():$(".validate-btn").hide()}else $(".email-id-expanded-body").hide(),$(".email-id-main-container").show();if($("#edit-addon-mobileNumber").val()!=$("#primary-MobileNumber").val()){var changedMobile=$("#edit-addon-mobileNumber").val();$(".mobile-number-expanded-body").val(changedMobile),$(".mobile-number-expanded-body").show(),$(".mobile-number-main-container").hide(),$(".email-id-main-container").show(),$(".email-id-expanded-body").hide(),$(".email-edit-button").show(),$(".mobile-edit-button").hide(),$(".addon-emailId").show(),$("#unmasked-primary-emailId").css("display","none"),$(".tab-content .form-field-list li").css("margin-bottom","0px"),$(".primary-otp-msg").html("If your current registered mobile no. is operational, Generate OTP to update your mobile number. The One Time Password (OTP) will be sent on your registered mobile number, and will be valid for either 10-min or one successful usage."),$(".addon-otp-msg").html("Generate OTP to change mobile number for add-on card. The OTP will be sent to the primary cardholder&#39;s registered mobile number. The OTP will be valid for 10 minutes or one successful usage.");var isVisibleVerifyButton=$("#isVisibleVerifyButton").val(),isEmailVerifyElligible=$("#isEmailVerifyElligible").val(),emailField=$("#primary-EmailId").val(),cardType=$("#addon-cardType").val();"N"==isVisibleVerifyButton&&"true"==isEmailVerifyElligible&&""!=emailField&&"P"==cardType?$(".validate-btn").show():$(".validate-btn").hide()}else $(".mobile-number-expanded-body").hide(),$(".mobile-number-main-container").show()}),$(document).delegate("#mob-edit-close-mobile","click",function(){$("#MOB-edit-popup").removeClass("open");var changedEmail=$("#edit-addon-emailAddress").val();$(".email-id-expanded-body").val(changedEmail),$(".email-id-expanded-body").show(),$(".mobile-number-expanded-body").hide(),$(".mobile-number-main-container").show(),$(".mobile-edit-button").show(),$(".email-edit-button").hide(),$(".tab-content .form-field-list li").css("margin-bottom","0px");var isVisibleVerifyButton=$("#isVisibleVerifyButton").val(),isEmailVerifyElligible=$("#isEmailVerifyElligible").val(),emailField=$("#primary-EmailId").val(),cardType=$("#addon-cardType").val();"N"==isVisibleVerifyButton&&"true"==isEmailVerifyElligible&&""!=emailField&&"P"==cardType?$(".validate-btn").show():$(".validate-btn").hide()})),$(document).delegate("#generate-otp-email-edit","click",function(){$("#otp").attr("autocomplete","off"),0==emailResendFlag&&0==mobileResendFlag&&0==verifyResendFlag?$("#resend-otp-id").addClass("disabled").attr("href","#").css("background","none 0px 0px repeat scroll rgb(224, 224, 224)"):$("#resend-otp-id").removeClass("disabled").attr("href","#").css("background","none"),1==emailResendFlag&&0==mobileResendFlag&&1==verifyResendFlag?""!=$("#resendOtp-exceed").html()&&$("#resendOtp-exceed").parent().show():0==emailResendFlag&&1==mobileResendFlag&&1==verifyResendFlag?""!=$("#resendOtp-exceed").html()&&$("#resendOtp-exceed").parent().show():1==emailResendFlag&&1==mobileResendFlag&&0==verifyResendFlag&&""!=$("#resendOtp-exceed").html()&&$("#resendOtp-exceed").parent().show();var ajaxUrl=$(this).attr("formaction"),selfparent=$(this).parents(".tab-item"),changedFieldName=($(selfparent).attr("id"),$("#changedFieldName").val());(1==$("#contact-update-form input#edit-addon-emailAddress").valid()||1==$("#mobile-number-update-form input#edit-addon-mobileNumber").valid())&&makeAjaxWithLoader({url:ajaxUrl,data:{changedFieldName:changedFieldName},type:"get",success:function(data){$(selfparent).find("#generate-otp-button").attr("formaction","#"),data.success?($(".mobile-number-expanded-body .generate-otp-tab").hide(),$(".mobile-number-expanded-body .resend-otp-quick").show(),$(selfparent).find("#intl-number-update-form").length>0&&applyValidationOnInter()):($(".tab-header.quick-contact-page-header").show(),$("#timeOutError").show(),$(".fancy.addOn-dropbox.fancified").parent().find(".trigger").css("pointer-events","none"),$("#timeOutError").addClass("otpTimeOutError"),$("#timeOutError").html(data.message),$(selfparent).find("#otp-send-response").html(data.message))},error:function(xhr,status,error){console.log(status),console.log(error)}})}),$("#edit-addon-emailAddress").on("keypress",function(){$("#edit-addon-emailAddress").parent().find("label.error").css("display","none")}),$("#edit-addon-mobileNumber").on("keypress",function(){$("#edit-addon-mobileNumber").parent().find("label.error").css("display","none")}),$("#campaign-form #confirm-campaign-button").on("click",function(){localStorage.setItem("myprofile-details",!0)})}),viewport.width>768&&($(".email-edit-button").css("cursor","pointer"),$(".mobile-edit-button").css("cursor","pointer")),$(document).ready(function(){$(".validate-form #cvv-number").on("change",function(){$("#cvv-number").parent().find("label").remove(),$("#cvv-number").css("border-color","none")}),$("#card-number-single").on("blur",function(){var thisVal=$("#card-number-single").val(),charlength=thisVal.length,firstChar=thisVal.charAt(0),secondChar=thisVal.charAt(1);if(-1===thisVal.indexOf("-"))if(3==firstChar&&5!=secondChar&&15==charlength){{var formattedCardNumber=thisVal.replace(/(\d{4})(\d{6})(\d{5})/,"$1-$2-$3");parseInt(formattedCardNumber)}$(this).val(formattedCardNumber),17==formattedCardNumber.length?formatAndVerifyAmex(formattedCardNumber):setStyleError()}else if(3==firstChar&&5==secondChar){if(16>charlength)return void setStyleError();if(charlength>16&&19>charlength)return void setStyleError();{var formattedCardNumber=thisVal.replace(/(\d{4})(\d{4})(\d{4})(\d{4})/,"$1-$2-$3-$4");parseInt(formattedCardNumber)}$(this).val(formattedCardNumber),19==formattedCardNumber.length?formatAndVerifyNonAmex(formattedCardNumber):setStyleError()}else if(16==charlength&&3!=firstChar){{var formattedCardNumber=thisVal.replace(/(\d{4})(\d{4})(\d{4})(\d{4})/,"$1-$2-$3-$4");parseInt(formattedCardNumber)}$(this).val(formattedCardNumber),19==formattedCardNumber.length?formatAndVerifyNonAmex(formattedCardNumber):setStyleError()}else setStyleError()})}),$(document).ready(function(){function fkey(e){e=e||window.event,wasPressed||"F5"===e.code&&(window.location.href=document.URL.includes("/app")?"creditcards/app/user/loggedout":"creditcards/b2b/user/loggedout",wasPressed=!0)}if($("#aurumSpaContainer").exists()){console.log("Aurum SPA container exists-->>"),document.onkeydown=fkey,document.onkeypress=fkey,document.onkeyup=fkey;var wasPressed=!1,contentURI=$("input#aurumSpaModuleURL").val(),pagelink=contentURI;$.ajax({url:"/creditcards/resources/js/jquery-3.6.1.min.js",dataType:"script",timeout:2e3}).done(function(){var $jnew=jQuery.noConflict(!0);$jnew.ajax({url:pagelink,type:"GET",dataType:"html",cache:!0,beforeSend:function(){var loaderHtml='<div class="overlay-loader"></div>';$("body").append(loaderHtml)},complete:function(){$("body").find("div.overlay-loader").remove()},success:function(data){console.log("Aurum SPA load success"),data&&($jnew("#aurumSpaContainer").html(data),$("body").find("div.overlay-loader").remove())},error:function(xhr){console.log("entered in Aurum SPA load error section"),$("body").find("div.overlay-loader").remove(),"901"==xhr.status&&(window.location.href="/creditcards/app/page/error")}})}).fail(function(){console.log("complete faliure of Aurum SPA load"),$("body").find("div.overlay-loader").remove(),window.location.href="/creditcards/app/page/error"})}}),$(function(){function tab(){var $inputs=$(".aurum-login-template-container textarea,.aurum-login-template-container input"),currIndex=parseInt($(lastFocus).attr("tabIndex")),highestIndex=-1,selected=!1;$inputs.each(function(){var index=parseInt($(this).attr("tabIndex"));index>highestIndex&&(highestIndex=index),index===currIndex+1&&($(this).focus(),selected=!0)}),selected||currIndex!==highestIndex||$inputs.each(function(){var index=parseInt($(this).attr("tabIndex"));1===index&&$(this).focus()})}function backspace(){var orig=$(lastFocus).val(),updated=orig.substring(0,selStart-1)+orig.substring(selEnd,orig.length);$(lastFocus).val(updated),selEnd=--selStart,$(lastFocus).focus(),lastFocus.selectionStart=selStart,lastFocus.selectionEnd=selEnd}function sendChar(char){var orig=$(lastFocus).val(),updated=orig.substring(0,selStart)+char+orig.substring(selEnd,orig.lenght);$(lastFocus).val(updated),selEnd=++selStart,$(lastFocus).focus(),lastFocus.selectionStart=selStart,lastFocus.selectionEnd=selEnd}function openKeyboard(){$(".aurum-login-template-container #aurum-virtual-keyboard").show();var vkeyboard=document.getElementById("aurum-virtual-keyboard");dragElement(vkeyboard),toggleCounter+=1,document.getElementById("sp-username").focus()}function closeKeyboard(){$(".aurum-login-template-container #aurum-virtual-keyboard").hide(),toggleCounter=0,document.getElementById("sp-password").focus()}{var $caps=$("#aurum-virtual-keyboard .capslock");$("#aurum-virtual-keyboard .char")}$caps.click(function(){$caps.hasClass("on")?($(".aurum-login-template-container .char,.aurum-login-template-container .capslock").each(function(){$(this).text($(this).text().toLowerCase()),$(".aurum-login-template-container #one").text(";"),$(".aurum-login-template-container #two").text("`"),$(".aurum-login-template-container #three").text("'"),$(".aurum-login-template-container #four").text("["),$(".aurum-login-template-container #five").text("]"),$(".aurum-login-template-container #six").text(","),$(".aurum-login-template-container #seven").text("."),$(".aurum-login-template-container #eight").text("/"),$(".aurum-login-template-container #nine").text("-"),$(".aurum-login-template-container #ten").text("="),$(".aurum-login-template-container #eleven").html("&#92;").text()}),$caps.removeClass("on")):($(".aurum-login-template-container .char,.aurum-login-template-container .capslock").each(function(){$(this).text($(this).text().toUpperCase()),$(".aurum-login-template-container #one").text(":"),$(".aurum-login-template-container #two").text("~"),$(".aurum-login-template-container #three").html("&#34;").text(),$(".aurum-login-template-container #four").text("{"),$(".aurum-login-template-container #five").text("}"),$(".aurum-login-template-container #six").text("<"),$(".aurum-login-template-container #seven").text(">"),$(".aurum-login-template-container #eight").text("?"),$(".aurum-login-template-container #nine").text("_"),$(".aurum-login-template-container #ten").text("+"),$(".aurum-login-template-container #eleven").text("|")}),$caps.addClass("on"))}),$(".aurum-login-template-container li").click(function(){var t=this;$(this).addClass("touch"),setTimeout(function(){$(t).removeClass("touch")},100)});var lastFocus;$(".aurum-login-template-container textarea,.aurum-login-template-container input").on("focus",function(){$(".aurum-login-template-container textarea,.aurum-login-template-container input").removeClass("focus"),$(this).addClass("focus")});var toggleCounter=0;$(".aurum-login-template-container #sp-username").on("focus",function(){0!==toggleCounter&&($(".aurum-login-template-container #sp-username").blur(),$(".aurum-login-template-container #aurum-virtual-keyboard").focus())}),$(".aurum-login-template-container #sp-password").on("focus",function(){0!==toggleCounter&&($(".aurum-login-template-container #sp-password").blur(),$(".aurum-login-template-container #aurum-virtual-keyboard").focus())}),$(".aurum-login-template-container textarea,.aurum-login-template-container input").on("blur",function(){lastFocus=this,selStart=this.selectionStart,selEnd=this.selectionEnd}),$(".aurum-login-template-container .char").click(function(){var char=$(this).text();sendChar(char)}),$(".aurum-login-template-container .return").click(function(){sendChar("\n")}),$(".aurum-login-template-container .space").click(function(){sendChar(" ")}),$(".aurum-login-template-container .backspace").click(function(){backspace()}),$(".aurum-login-template-container .tab").click(function(){tab()}),$(".aurum-login-template-container #sp-keyboard-label #virtual-keyboard-check").click(function(){var isChecked=$(".aurum-login-template-container input#virtual-keyboard-check[type=checkbox]").prop("checked");isChecked?openKeyboard():closeKeyboard()}),$(".aurum-login-template-container .closeKeyboard").click(function(){closeKeyboard(),$(".aurum-login-template-container input#virtual-keyboard-check[type=checkbox]").prop("checked",!1)}),$(".aurum-login-template-container #login-form #sp-username").blur(function(){$("label.valid").css("display","none!important"),$("label.error").css("display","none!important")}),$(".aurum-login-template-container #login-form #sp-password").blur(function(){$("label.valid").css("display","none!important"),$("label.error").css("display","none!important")})}),$(".aurum-login-template-container").on("keydown",function(event){13===event.keyCode&&(event.preventDefault(),document.getElementById("aurum-login-submit-button").click())}),$("#aurum-login-submit-button").on("click",function(){$(".aurum-login-template-container #aurum-virtual-keyboard").hide();var passphrase=$(".aurum-login-template-container #passphase").val(),userName=$(".aurum-login-template-container #sp-username").val(),password=$(".aurum-login-template-container #sp-password").val();if(console.log("passphrase",passphrase),console.log("userName",userName),console.log("password",password),userName&&password){var loaderHtml='<div class="overlay-loader-aurum"></div>';if($("body").append(loaderHtml),passphrase){var salt=CryptoJS.lib.WordArray.random(16),iv=CryptoJS.lib.WordArray.random(16),key=CryptoJS.PBKDF2(passphrase,salt,{keySize:4,iterations:100});if(userName&&password)var encryptedPassword=CryptoJS.AES.encrypt(password,key,{iv:iv,mode:CryptoJS.mode.CBC,padding:CryptoJS.pad.Pkcs7}),passwordPassed=salt+iv+encryptedPassword;passwordPassed?$(".aurum-login-template-container #sp-password").val(passwordPassed):console.log("UserNamePassed and passwordPassed  --> null")}$(".aurum-login-template-container #aurum-login-form").submit()}}),$(document).ready(function(){$("#aurum-login-error").exists()&&(viewport.width>768?$(".aurum-login-template-container .sp-section").css("padding","67px 125px 100px"):$(".aurum-login-template-container .sp-section").css("margin-top","0px"),$("html,body").animate({scrollTop:0},"fast"))}),$("#aurum-login-error").exists()&&(viewport.width>768?$(".aurum-login-template-container .sp-section").css("padding","67px 125px 100px"):$(".aurum-login-template-container .sp-section").css("margin-top","0px"),$("html,body").animate({scrollTop:0},"fast")),$(".disclaimer-popup-open.eNach-gotoDash-btn").on("click",function(){var loaderHtml='<div class="overlay-loader"></div>';$(".modal-overlay").append(loaderHtml);var eNachPaymentType="",pageRedirectionFlagValue="";eNachPaymentType=document.getElementById("enachRadio").checked?"TAD":"MAD",pageRedirectionFlagValue=1==$("#pageRedirectionFlag").val()||"true"==$("#pageRedirectionFlag").val()?"ENCASH":"ENACH",console.log(eNachPaymentType,"The payment Type is-------");var href="/creditcards/app/requests/nachRegistration?paymentDebitType="+eNachPaymentType+"@"+pageRedirectionFlagValue;console.log(href,"The HREF is"),$.ajax({url:href,type:"GET",success:function(data){var processDiv="";if(console.log("data==success1234==>"+data),null!=data&&""!=data)var processDiv='<form id = "payNetForm" action="'+data[0].nachRegistrationURL+'" method="POST" name="payNetForm" style="margin-bottom:0px;"><input type="hidden" name="msg" id="msg" value="'+data[0].message+'"/><a href="#" id="enachProceed" class="button primary button-clickToProceed" onClick="payNetForm.submit();setAnalyticsPost(\'Proceed\');closeModalPopup($(this));">Proceed</a><a href="javascript:void(0);" class="button primary button-cancel" onClick="setAnalyticsPost(\'Cancel\');closeModalPopup($(this));">Cancel</a></form>';0==$(".button-clickToProceed").length&&($("#appendPayNowForm").append(processDiv),document.getElementById("enachProceed").addEventListener("click",function(){console.log(msg.value,"Value of message after reset");var myobj=document.getElementById("payNetForm");myobj.remove(),console.log("Logout before Ajax run"),$.ajax({url:"/creditcards/j_spring_security_logout",type:"GET",success:function(){console.log("Logout Ajax run")}})})),$(".modal-overlay").find("div.overlay-loader").remove(),$(".button-clickToProceed").css("margin-right","5px"),viewport.width>=1024?$("#appendPayNowForm").parents().find(".open").children(".modal").css("margin-top","-267.5px"):viewport.width<767&&$("#appendPayNowForm").parents().find(".open").children(".modal").css("margin-top","0px")},error:function(){console.log("Enter inside failure block")}})}),$(document).ready(function(){$(".multicardmaster").exists()&&(console.log("main1"),$(".login-page").css("height","auto"))}),$(window).on("load",function(){$(".multicardmaster").exists()&&(console.log("main2"),$(".login-page").css("height","auto"))}),$(".multicardmaster").exists()&&(console.log("main3"),$(".login-page").css("height","auto")),$("#encash-form #generate-otp-button").click(function(e){console.log("entering genrate OTP"),e.preventDefault(),makeAjaxWithLoader({url:$(this).attr("formaction"),type:"POST",success:function(data){data.success&&($("#enter-otp-field").show(),$("#generate-otp-field").hide(),$("#encash-form #otp").val("").removeClass("error").siblings("label.error").remove(),$("#encash-form #term-condition-id").prop("checked",!1).closest(".checked").removeClass("checked"),$("#encash-form #confirm-button").prop("disabled",!0).addClass("disabled").addClass("secondary").removeClass("primary"),console.log(data.message)),callDncOTPgenEncash(data)}})}),$("#encash-form #confirm-button").on("click",function(){console.log("Clickng Confirm button"),$("#encash-form #term-condition-id").prop("disabled",!1),$("#encash-form #term-condition-id").removeAttr("disabled"),$("#encash-form").find("#enter-otp-field").find(".error").exists()&&(console.log("Clickng Confirm button error"),$("#encash-form").find("#enter-otp-field").find("label.valid").remove())}),$("#encash-form #otp").on("blur",function(){$("#encash-form #term-condition-id").prop("disabled",!1),$("#encash-form #term-condition-id").removeAttr("disabled"),""==$("#encash-form #otp").val()?(console.log("Empty modi rico"),$("#encash-form").find("#enter-otp-field").find("label.valid").remove()):(console.log("Clickng Confirm button valid"),$("#encash-form").find("#enter-otp-field").find(".field-wrap input").hasClass("valid")?($("#encash-form").find("#enter-otp-field").find("label.error").remove(),$("#encash-form #confirm-button").prop("disabled",!0).addClass("disabled").addClass("secondary").removeClass("primary"),$("#encash-form #confirm-button").attr("disabled","disabled"),console.log("property: "+$("#encash-form #confirm-button").prop("disabled"))):$("#encash-form").find("#enter-otp-field").find(".field-wrap input").hasClass("error")&&($("#encash-form").find("#enter-otp-field").find("label.valid").remove(),$("#encash-form #confirm-button").prop("disabled",!0).addClass("disabled").addClass("secondary").removeClass("primary"),$("#encash-form #confirm-button").attr("disabled","disabled")))}),$("#emd-form #generate-otp-button").click(function(e){console.log("entering genrate OTP"),e.preventDefault(),makeAjaxWithLoader({url:$(this).attr("formaction"),type:"POST",success:function(data){console.log(data),data.success&&($("#enter-otp-field").show(),$("#generate-otp-field").hide(),$("#emd-form #otp").val("").removeClass("error").siblings("label.error").remove(),$("#emd-form #term-condition-id").prop("checked",!1).closest(".checked").removeClass("checked"),$("#emd-form #confirm-button").prop("disabled",!0).addClass("disabled").addClass("secondary").removeClass("primary"),console.log(data.message))}})}),$("#emd-form #confirm-button").on("click",function(){console.log("Clickng Confirm button"),$("#emd-form #term-condition-id").prop("disabled",!1),$("#emd-form #term-condition-id").removeAttr("disabled"),$("#emd-form").find("#enter-otp-field").find(".error").exists()&&(console.log("Clickng Confirm button error"),$("#emd-form").find("#enter-otp-field").find("label.valid").remove())}),$("#emd-form #otp").on("blur",function(){$("#emd-form #term-condition-id").prop("disabled",!1),$("#emd-form #term-condition-id").removeAttr("disabled"),""==$("#emd-form #otp").val()?(console.log("Empty"),$("#emd-form").find("#enter-otp-field").find("label.valid").remove()):(console.log("Clickng Confirm button valid"),$("#emd-form").find("#enter-otp-field").find(".field-wrap input").hasClass("valid")?($("#emd-form").find("#enter-otp-field").find(".field-wrap").append('<label for="otp" class="valid"></label>'),$("#emd-form").find("#enter-otp-field").find("label").addClass("valid"),$("#emd-form").find("#enter-otp-field").find("label.error").remove(),$("#emd-form #confirm-button").prop("disabled",!0).addClass("disabled").addClass("secondary").removeClass("primary"),$("#emd-form #confirm-button").attr("disabled","disabled"),console.log("property: "+$("#emd-form #confirm-button").prop("disabled"))):$("#emd-form").find("#enter-otp-field").find(".field-wrap input").hasClass("error")&&($("#emd-form").find("#enter-otp-field").find("label.valid").remove(),$("#emd-form #confirm-button").prop("disabled",!0).addClass("disabled").addClass("secondary").removeClass("primary"),$("#emd-form #confirm-button").attr("disabled","disabled"),console.log("property: "+$("#emd-form #confirm-button").prop("disabled"))))}),$("#emd-form #otp, #encash-form #otp").on("change",function(){$("#confirm-button").prop("disabled",!0),$("#confirm-button").attr("disabled","disabled")});var manageCardInitialLoadFlag=!1,flagList=[],switchesActivatedCounter=0;$(".DT_ATM #DT_ATM, .DT_POS #DT_POS, .DT_ECOM #DT_ECOM, .DT_POSContactLess #DT_POSContactLess, .IT_ATM #IT_ATM, .IT_POS #IT_POS, .IT_ECOM #IT_ECOM, .IT_POSContactLess #IT_POSContactLess").change(function(){switchName=$(this).attr("id"),$(this).is(":checked")?flagList.splice(0,0,switchName):flagList=removeFlagFromFlagList(flagList,switchName),console.log(flagList),""!=flagList?($(".MCU-confirm-otp").removeClass("hide"),$(".MCU-confirm").addClass("hide")):($(".MCU-confirm").removeClass("hide"),$(".MCU-confirm-otp").addClass("hide"))}),$(".MCU-confirm-otp").click(function(){$("#digi-onb-error-ribbon").css("display","none !important"),$.ajax({url:"/creditcards/app/digitalOnboarding/generate-otp-manage-card",type:"POST",beforeSend:function(){$("#generateOtpMCU").addClass("opened"),$("#generateOtpMCU #MCU-enter-card-detail-step-error").css("display","none"),addDigiOnbLoaderModalBody()},complete:function(){$("#generateOtpMCU #onboard-otp-input").val(""),$("#generateOtpMCU #onboard-otp-input").focus(),$(document).find("div.digital-onb-loader").remove()},success:function(response){"000"==response.errorCode?($(document).find("div.digital-onb-loader").remove(),$("#generateOtpMCU #onboard-otp-input").removeProp("readonly"),$("#generateOtpMCU #onboard-otp-input").css("cursor","auto"),$(".MCU-resendOTP").removeClass("disable-resend-OTP")):"005"==response.errorCode?($("#MCU-enter-card-detail-step-error span").text(response.message),$("#MCU-enter-card-detail-step-error").css("display","block"),$("#MCU-enter-card-detail-step-error").css("background-color","#f74747"),$(".MCU-resendOTP").removeClass("disable-resend-OTP")):1==response.errorCode?($("#MCU-enter-card-detail-step-error span").text(response.message),$("#MCU-enter-card-detail-step-error").css("display","block"),$(document).find("div.digital-onb-loader").remove(),$(".MCU-resendOTP").addClass("disable-resend-OTP")):($("#generateOtpMCU").removeClass("opened"),$("#digi-onb-error-ribbon").css("display","block"),$("#digi-onb-error-ribbon-message").text(response.message),$(".MCU-resendOTP").addClass("disable-resend-OTP"))},error:function(){$(document).find("div.digital-onb-loader").remove(),$("#generateOtpMCU #MCU-enter-card-detail-step-error").css("display","block"),$("#generateOtpMCU #MCU-enter-card-detail-step-error span").html("Sorry! You cannot avail this service at the moment. Please try again later.")
}})}),$(".MCU-cancelOTPpopup").click(function(){$("#generateOtpMCU.opened").removeClass("opened"),$("html, body").animate({scrollTop:0},1e3)}),$(".MCU-resendOTP").click(function(){$("#digi-onb-error-ribbon").css("display","none !important"),$.ajax({url:"/creditcards/app/digitalOnboarding/re-generate-otp-manage-card",type:"POST",beforeSend:function(){$("#generateOtpMCU").addClass("opened"),$("#generateOtpMCU #MCU-enter-card-detail-step-error").css("display","none"),addDigiOnbLoaderModalBody()},complete:function(){$("#generateOtpMCU #onboard-otp-input").val(""),$("#generateOtpMCU #onboard-otp-input").focus(),$(document).find("div.digital-onb-loader").remove()},success:function(response){"000"==response.errorCode?$(document).find("div.digital-onb-loader").remove():($("#MCU-enter-card-detail-step-error span").text(response.message),$("#MCU-enter-card-detail-step-error").css("display","block"),$("#MCU-enter-card-detail-step-error").css("background-color","#f74747"),$(".MCU-resendOTP").removeClass("disable-resend-OTP"),("507"==response.errorCode||1==response.errorCode)&&$(".MCU-resendOTP").addClass("disable-resend-OTP"))},error:function(){$(document).find("div.digital-onb-loader").remove(),$("#generateOtpMCU #MCU-enter-card-detail-step-error").css("display","block"),$("#generateOtpMCU #MCU-enter-card-detail-step-error span").html("Sorry! You cannot avail this service at the moment. Please try again later.")}})}),$("#generateOtpMCU #onboard-otp-input").on("cut copy paste",function(e){e.preventDefault()}),$(".MCU-confirm, .MCU-skip").click(function(){changeStep("step-do-confirmation"),$("#step-international-usage").removeClass("done")}),$(document).ready(function(){var FraudLoginOTPServicesResponse=$("#FraudLoginOTPServicesResponse").val();""!=FraudLoginOTPServicesResponse&&null!=FraudLoginOTPServicesResponse&&void 0!=FraudLoginOTPServicesResponse&&FraudLoginOTPServicesResponse.indexOf("OTP_Flooding")>-1&&($("#resend-fraud-otp").addClass("disable-resend-OTP"),$("#fraud-otp-resend-not-allowed").text(FraudLoginOTPServicesResponse.substring(14)),$("#fraud-otp-resend-not-allowed").removeClass("no-display"))}),$("#validate-card-button").on("click",function(){var passphrase=document.getElementById("card-auth-passphase").value,cvv=document.getElementById("cvv-number").value,card1=document.getElementById("card-number-1").value,card2=document.getElementById("card-number-2").value,card3=document.getElementById("card-number-3").value,card4=document.getElementById("card-number-4").value,card5=document.getElementById("card-number-single").value,dob=document.getElementById("dob").value;if($("#card-auth-passphase").val()){var salt=CryptoJS.lib.WordArray.random(16),iv=CryptoJS.lib.WordArray.random(16),key=CryptoJS.PBKDF2(passphrase,salt,{keySize:4,iterations:100}),encryptedcvv=CryptoJS.AES.encrypt(cvv,key,{iv:iv,mode:CryptoJS.mode.CBC,padding:CryptoJS.pad.Pkcs7}),encryptedcard1=CryptoJS.AES.encrypt(card1,key,{iv:iv,mode:CryptoJS.mode.CBC,padding:CryptoJS.pad.Pkcs7}),encryptedcard2=CryptoJS.AES.encrypt(card2,key,{iv:iv,mode:CryptoJS.mode.CBC,padding:CryptoJS.pad.Pkcs7}),encryptedcard3=CryptoJS.AES.encrypt(card3,key,{iv:iv,mode:CryptoJS.mode.CBC,padding:CryptoJS.pad.Pkcs7}),encryptedcard4=CryptoJS.AES.encrypt(card4,key,{iv:iv,mode:CryptoJS.mode.CBC,padding:CryptoJS.pad.Pkcs7}),encryptedcard5=CryptoJS.AES.encrypt(card5,key,{iv:iv,mode:CryptoJS.mode.CBC,padding:CryptoJS.pad.Pkcs7}),encrypteddob=CryptoJS.AES.encrypt(dob,key,{iv:iv,mode:CryptoJS.mode.CBC,padding:CryptoJS.pad.Pkcs7}),saltText=salt+iv,cvvpassed=saltText+encryptedcvv,card1passed=saltText+encryptedcard1,card2passed=saltText+encryptedcard2,card3passed=saltText+encryptedcard3,card4passed=saltText+encryptedcard4,card5passed=saltText+encryptedcard5,dobpassed=saltText+encrypteddob;card1.length<4||card2.length<4||card3.length<4||cvv.length<3||!$("#dob").val()||$("#card-number-1").hasClass("error")||$("#card-number-2").hasClass("error")||$("#card-number-3").hasClass("error")||$("#card-number-4").hasClass("error")||$("#cvv-number").hasClass("error")||$("#dob").hasClass("error")?($("#cvv-number").val(cvv),$("#card-number-1").val(card1),$("#card-number-2").val(card2),$("#card-number-3").val(card3),$("#card-number-4").val(card4),$("#card-number-single").val(card5),$("#dob").val(dob)):($("#cvv-number").val(cvvpassed),$("#card-number-1").val(card1passed),$("#card-number-2").val(card2passed),$("#card-number-3").val(card3passed),$("#card-number-4").val(card4passed),$("#card-number-single").val(card5passed),$("#dob").val(dobpassed)),document.getElementById("card-auth-form").submit()}}),$("#pwd-gen-otp").click(function(){var mob="+91-"+$("#mobileNumber").val(),email=$("#emailID").val(),isValid=($("#password-update-form #currentPassword").val().length>0||$("#password-update-form label[for=currentPassword]").hasClass("valid"))&&$("#password-update-form label[for=confirmPassword]").hasClass("valid"),currentPassword=dataEncryptionAES($("#currentPassword").val()),newPassword=dataEncryptionAES($("#password").val()),confirmPassword=dataEncryptionAES($("#confirmPassword").val());isValid&&$.ajax({url:"/creditcards/app/myprofile/generate-otp-pwd-change",type:"POST",data:{currentPassword:currentPassword,newPassword:newPassword,confirmPassword:confirmPassword},beforeSend:function(){$("#password-error").html(""),$("#password-error").css("color","black");var loaderHtml='<div class="overlay-loader"></div>';$("body").append(loaderHtml)},complete:function(){$("body").find("div.overlay-loader").remove()},success:function(response){response=JSON.parse(response),response.success?($("#currentPassword, #confirmPassword, #password").prop("readonly","true"),$("#encryptedOtp, #pwd-otp-resend").parent().parent().removeClass("hide"),$("#pwd-gen-otp").parent().parent().addClass("hide"),$(".light-green-block").attr("style","display:none"),$("#password-error").html("* Please enter the One Time Password (OTP) that has been sent on your Registered mobile number "+mob+" and Email ID : "+email+". If you have not received the OTP, click Resend OTP.").css("color","#0095d9")):($(".light-green-block").html(" "+response.message),$(".light-green-block").css("color","red"),$(".light-green-block").attr("style","display:block"))},error:function(){$("body").find("div.overlay-loader").remove()}})}),$("#pwd-otp-resend").click(function(){var mob="+91-"+$("#mobileNumber").val(),email=$("#emailID").val(),regenHref="/creditcards/app/myprofile/regenerate-otp-pwd-change";$.ajax({url:regenHref,type:"POST",beforeSend:function(){$("#password-error").html(""),$("#password-error").css("color","black");var loaderHtml='<div class="overlay-loader"></div>';$("body").append(loaderHtml)},complete:function(){$("body").find("div.overlay-loader").remove()},success:function(response){console.log(response),response=JSON.parse(response);var mesg=response.message;$("#password-error").html(mesg.indexOf("OTP is sent")>-1?"* Please enter the One Time Password (OTP) that has been resent on your Registered mobile number "+mob+" and Email ID : "+email+". If you have not received the OTP, click Resend OTP.":"* "+response.message),response.success&&response.resendEnabled?$("#password-error").css("color","#0095d9"):($("#password-error").css("color","red"),$("#pwd-otp-resend").addClass("disable-resend-OTP"))},error:function(){$("body").find("div.overlay-loader").remove()}})}),$("#password-update-form").validate({onkeyup:!1,rules:{currentPassword:{required:!0,minlength:8},newPassword:{required:!0,strongPassword:!0,minlength:12},confirmPassword:{required:!0,strongPassword:!0,equalTo:"#password"},encryptedOtp:{required:!0,minlength:6}},messages:{currentPassword:{strongPassword:" ",required:" ",minlength:" "},newPassword:{required:" ",strongPassword:" ",minlength:" "},confirmPassword:{required:" ",strongPassword:" ",equalTo:" "},encryptedOtp:{required:" ",minlength:" "}},errorPlacement:function($error,$element){0==$("#password").val().length&&"newPassword"==$element.attr("name")||0==$("#confirmPassword").val().length&&"confirmPassword"==$element.attr("name")||0==$("#password").val().length&&"password"==$element.attr("name")||0==$("#currentPassword").val().length&&"currentPassword"==$element.attr("name")||$error.insertAfter($element)},success:function(){validClass="valid"},highlight:function(element,errorClass,validClass){console.log("highlight isPasswordStrong",isPasswordStrong,$("#encryptedOtp").val().length<5,"encryptedOtp"==$(element).attr("name")),1==isPasswordStrong?"confirmPassword"==$(element).attr("name")?1==isPasswordsMatch?($(element).addClass(validClass).removeClass(errorClass),$(element).next("label").addClass(validClass)):0==$("#password-update-form #confirmPassword").val().length?($(element).removeClass(errorClass),$(element).next("label").removeClass(errorClass)):($(element).addClass(errorClass).removeClass(validClass),$(element).next("label").addClass(errorClass)):"currentPassword"==$(element).attr("name")?0==$("#password-update-form #currentPassword").val().length&&($(element).removeClass(errorClass),$(element).next("label").removeClass(errorClass)):$("#encryptedOtp").val().length<6&&"encryptedOtp"==$(element).attr("name")?$(element).addClass(errorClass).removeClass(validClass):($(element).addClass(validClass).removeClass(errorClass),$(element).next("label").addClass(validClass)):0==$("#password").val().length&&"newPassword"==$(element).attr("name")||(0==$("#confirmPassword").val().length&&"confirmPassword"==$(element).attr("name")?($(element).removeClass(errorClass),$(element).next("label").removeClass(errorClass)):0==$("#password").val().length&&"password"==$(element).attr("name")?($(element).removeClass(errorClass),$(element).next("label").removeClass(errorClass)):0==$("#currentPassword").val().length&&"currentPassword"==$(element).attr("name")?($(element).removeClass(errorClass),$(element).next("label").removeClass(errorClass)):($(element).addClass(errorClass).removeClass(validClass),$(element).next("label").addClass(errorClass)))},unhighlight:function(element,errorClass,validClass){if(console.log("unhighlight isPasswordStrong",isPasswordStrong),1==isPasswordStrong)$(element).removeClass(errorClass).addClass(validClass),$(element).next("label").addClass(validClass);else{var browserurl=location.href,substring1="contact-details-page";-1!==browserurl.indexOf(substring1)&&"currentPassword"!=$(element).attr("name")&&"newPassword"!=$(element).attr("name")?($(element).removeClass(errorClass).addClass(validClass),$(element).next("label").addClass(validClass)):-1!==browserurl.indexOf(substring1)&&"currentPassword"==$(element).attr("name")&&($(element).removeClass(errorClass),$(element).next("label").removeClass(errorClass))}},submitHandler:function(){var encryptedOTP=$("#encryptedOtp").val(),encryptedCurrentPassword=$("#currentPassword").val(),encryptedNewPassword=$("#password").val(),encryptedConfirmPassword=$("#confirmPassword").val();encryptedCurrentPassword=dataEncryptionAES(encryptedCurrentPassword),encryptedNewPassword=dataEncryptionAES(encryptedNewPassword),encryptedConfirmPassword=dataEncryptionAES(encryptedConfirmPassword),encryptedOTP=dataEncryptionAES(encryptedOTP),$("#password-error").html(""),$("#password-error").css("color","black");var loaderHtml='<div class="overlay-loader"></div>';$("body").append(loaderHtml),$.ajax({url:$("#password-update-form").attr("action"),type:"POST",data:{currentPassword:encryptedCurrentPassword,newPassword:encryptedNewPassword,confirmPassword:encryptedConfirmPassword,encryptedOtp:encryptedOTP},complete:function(){$("body").find("div.overlay-loader").remove()},success:function(data){var responseData=$.parseJSON(data);if(responseData.success){var dataRedirectTo=$("#password-update-form").attr("data-redirectto");$("#change-pass-popup").find(".close-button").attr("data-location",dataRedirectTo),$("#change-pass-popup").find(".modal-title").text(responseData.message),openModalPopup("change-pass-popup")}else if(responseData.locked){var dataRedirectTo=$("#password-update-form").attr("data-redirectto");window.location.href=dataRedirectTo}else $("#password-error").html("* "+responseData.message),$("#password-error").css("color","red"),$("#encryptedOtp").val(""),$("#encryptedOtp, #encryptedOtp + label").removeClass("valid error")},error:function(){$("body").find("div.overlay-loader").remove()}})}}),$(document).ready(function(){$("#password-update-form #password").keyup(function(){console.log("Inside password-update-form password"),checkStrength($("#password-update-form #password").val())}),$("#password-update-form #currentPassword, #password-update-form #confirmPassword").keyup(function(){var isValid=($("#password-update-form #currentPassword").hasClass("valid")||$("#password-update-form #currentPassword").val().length>7)&&$("#password-update-form #confirmPassword").val()==$("#password-update-form #password").val()&&($("#password-update-form #password").hasClass("valid")||$("#password-update-form #confirmPassword").hasClass("valid"))&&1==isPasswordStrong;console.log("inside  password-update-form password isValid"+isValid),$("#password-update-form #currentPassword").val().length>7?$('label[for="currentPassword"]').parent().find("label.valid").remove():($('label[for="currentPassword"]').parent().find("label.error").remove(),isValid=!1),isValid?$("#pwd-gen-otp").removeAttr("disabled"):$("#pwd-gen-otp").prop("disabled","disabled")}),$("#password-update-form input[type=submit]").parent().parent().hasClass("hide")||$("#currentPassword, #currentPassword, #currentPassword").prop("readonly","true")}),$("#otp-cli-generate").click(function(){var submitAllowed=adhocCliSubmitHandler();submitAllowed&&$.ajax({url:"/creditcards/benefits/send-otp-credit-limit-change",type:"POST",data:{cliType:"Adhoc"},beforeSend:function(){var loaderHtml='<div class="overlay-loader"></div>';$("body").append(loaderHtml),$(".otp-clip-regen .error-section, .validation-message1, .error-block-msg").addClass("hide"),$(".error-section-parent .error-section-generic, .error-section-parent .error-section-flooding").addClass("hide")},complete:function(){$("body").find("div.overlay-loader").remove()},success:function(data){var mesg=data.message;data.success||data.alreadyExisting?($(".upload-submit.hide").removeClass("hide"),$(".upload-submit.otp-cli-otp-gen").addClass("hide")):mesg.indexOf("Maximum OTP delivery attempts reached")>-1?$(".error-section-parent .error-section-flooding.hide").removeClass("hide"):$(".error-section-parent .error-section-generic.hide").removeClass("hide")},error:function(){$("body").find("div.overlay-loader").remove(),$(".error-section-parent .error-section-generic.hide").removeClass("hide")}})}),$("#otp-cli-regenerate").click(function(){$.ajax({url:"/creditcards/benefits/resend-otp-credit-limit-change",type:"POST",data:{cliType:"Adhoc"},beforeSend:function(){var loaderHtml='<div class="overlay-loader"></div>';$("body").append(loaderHtml),$(".validation-message1").css("display","none"),$(".error-section, .error-block-msg, .separator, .otp-cli-otp-regen #otp-msg").addClass("hide")},complete:function(){$("body").find("div.overlay-loader").remove()},success:function(data){if(data.resendEnabled)$(".otp-cli-otp-regen #otp-msg").removeClass("hide");else{$(".otp-cli-otp-regen #submit-button").prop("disable",!0).addClass("button-grey"),$("#otp-cli-regenerate").addClass("disable-a"),$(".separator").removeClass("hide");var mesg=data.message;mesg.indexOf("Maximum OTP delivery attempts reached")>-1?$(".otp-cli-otp-regen .error-section.otp-flooding.hide").removeClass("hide"):$(".otp-cli-otp-regen .error-section.resend-otp-exhaust.hide").removeClass("hide")}},error:function(){$("body").find("div.overlay-loader").remove(),$(".otp-cli-otp-regen .error-section-generic.hide, .separator").removeClass("hide")}})}),$("#otp-clip-generate").click(function(){$.ajax({url:"/creditcards/benefits/send-otp-credit-limit-change",type:"POST",data:{cliType:"CLIP"},beforeSend:function(){var loaderHtml='<div class="overlay-loader"></div>';$("body").append(loaderHtml),$(".otp-clip-regen .error-section, .separator").addClass("hide"),$(".error-section-parent .error-section-generic, .error-section-parent .error-section-flooding").addClass("hide")},complete:function(){$("body").find("div.overlay-loader").remove()},success:function(data){var mesg=data.message;data.success||data.alreadyExisting?($("#term-condition-id").parent().css("pointer-events","none"),$(".otp-clip-regen.hide").removeClass("hide"),$(".otp-clip-gen").addClass("hide")):mesg.indexOf("Maximum OTP delivery attempts reached")>-1?$(".error-section-flooding.hide").removeClass("hide"):$(".error-section-generic.hide").removeClass("hide")},error:function(){$("body").find("div.overlay-loader").remove(),$(".error-section-parent .error-section-generic.hide").removeClass("hide")}})}),$("#otp-clip-regenerate").click(function(){$.ajax({url:"/creditcards/benefits/resend-otp-credit-limit-change",type:"POST",data:{cliType:"CLIP"},beforeSend:function(){var loaderHtml='<div class="overlay-loader"></div>';$("body").append(loaderHtml),$(".error-section, .error-block-msg, .otp-clip-regen #otp-msg").addClass("hide")},complete:function(){$("body").find("div.overlay-loader").remove()},success:function(data){if(data.resendEnabled)$(".otp-clip-regen #otp-msg").removeClass("hide");else{$(".otp-clip-regen #submit-button").prop("disable",!0).addClass("button-grey"),$("#otp-clip-regenerate").addClass("disable-a"),$(".separator").removeClass("hide");var mesg=data.message;mesg.indexOf("Maximum OTP delivery attempts reached")>-1?$(".otp-clip-regen .error-section.otp-flooding.hide").removeClass("hide"):$(".otp-clip-regen .error-section.resend-otp-exhaust.hide").removeClass("hide")}},error:function(){$("body").find("div.overlay-loader").remove(),$(".otp-clip-regen .error-section-generic.hide, .separator").removeClass("hide")}})}),$(document).ready(function(){$("#credit-limit-inc").exists()&&$("#credit-limit-inc #term-condition-id").prop("checked",!0).parent().addClass("checked"),$("#credit-limit-inc #term-condition-id").change(function(){1==$(this).prop("checked")?$("#otp-clip-generate").addClass("primary").removeClass("secondary").attr("disabled",!1):0==$(this).prop("checked")&&$("#otp-clip-generate").addClass("secondary").removeClass("primary").attr("disabled",!0)})}),$(".otp-clip-regen #submit-button").click(function(){var encryptedOtp=$("#otp-clip-field").val();if($(".otp-clip-regen #otp-msg").addClass("hide"),""==encryptedOtp)return void $(".otp-clip-regen .error-block-msg").removeClass("hide");var passphraseCLI=randomStringGenerator(10,!0,!1);encryptedOtp=dataEncryptionAES(encryptedOtp),$.ajax({url:"/creditcards/benefits/auth-otp-adhoc-clip",type:"POST",data:{encryptedOtp:encryptedOtp,passphraseCLI:passphraseCLI,cliType:"CLIP"},beforeSend:function(){$(".separator").addClass("hide");var loaderHtml='<div class="overlay-loader"></div>';$("body").append(loaderHtml),$("#otp-clip-field").val(""),$(".otp-clip-regen .error-section, .otp-clip-regen .error-block-msg").addClass("hide")},complete:function(){},success:function(data){$("body").find("div.overlay-loader").remove(),setAnalyticsForm("Submit");var decryptedData=dataDecryptionAES(data,passphraseCLI);if(data=JSON.parse(decryptedData),"000"==data.statusCode){var loaderHtml='<div class="overlay-loader"></div>';$("body").append(loaderHtml),document.getElementById("credit-limit-inc").submit()}else data.success||"002"!=data.statusCode?$(".otp-clip-regen .error-block-msg.hide, .separator").removeClass("hide"):($(".otp-clip-regen .error-section.otp-submit-exhaust.hide, .separator").removeClass("hide"),$(".otp-clip-regen #submit-button").addClass("gray-btn disable-submit"),$("#rico-cli-ErrBlk").show(),$("#rico-cli-ErrBlk .top-error").html(data.message),$("#otp-clip-field").addClass("disabled"),$("#otp-clip-field").css("pointer-events","none"),$("#otp-clip-regenerate").addClass("disabled"),$("#otp-clip-regenerate").css("pointer-events","none"))},error:function(){$("body").find("div.overlay-loader").remove(),$(".otp-clip-regen .error-section-generic.hide, .separator").removeClass("hide")}})}),$(".otp-cli-otp-regen #submit-button").click(function(){$(".otp-cli-otp-regen #otp-msg").addClass("hide");var submitAllowed=adhocCliSubmitHandler();if(submitAllowed){var encryptedOtp=$("#otp-cli-otp-field").val();encryptedOtp=dataEncryptionAES(encryptedOtp);var passphraseCLI=randomStringGenerator(10,!0,!1);$.ajax({url:"/creditcards/benefits/auth-otp-adhoc-clip",type:"POST",data:{encryptedOtp:encryptedOtp,passphraseCLI:passphraseCLI,cliType:"Adhoc"},beforeSend:function(){var loaderHtml='<div class="overlay-loader"></div>';$("body").append(loaderHtml),$(".validation-message1").css("display","none"),$(".otp-cli-otp-regen .error-section, .otp-cli-otp-regen .error-block-msg, .separator").addClass("hide")},complete:function(){$("body").find("div.overlay-loader").remove()},success:function(data){var decryptedData=dataDecryptionAES(data,passphraseCLI);if(data=JSON.parse(decryptedData),"000"==data.statusCode){var loaderHtml='<div class="overlay-loader"></div>';$("body").append(loaderHtml),document.getElementById("cli-upload-form").submit()}else data.succes||"002"!=data.statusCode?$(".otp-cli-otp-regen .error-block-msg.hide, .separator").removeClass("hide"):($(".otp-cli-otp-regen .error-section.otp-submit-exhaust.hide, .separator").removeClass("hide"),$(".otp-cli-otp-regen #submit-button").addClass("gray-btn disable-submit"))},error:function(){$("body").find("div.overlay-loader").remove(),$(".otp-cli-otp-regen .error-section-generic.hide, .separator").removeClass("hide")}})}}),$(".password-icon img").click(function(){$("#card_no").toggleClass("otpEncrypt");document.getElementById("card_no");$("#card_no").hasClass("otpEncrypt")?$(".password-icon img").attr("src","/creditcards/resources/img/eye-closed.svg"):$(".password-icon img").attr("src","/creditcards/resources/img/open-eye.svg")});var isClicked=!1;if($("#card_no").click(function(){isClicked?"#card_no".removeClass("otpEncrypt"):($("#card_no").addClass("otpEncrypt"),isClicked=!0)}),$("#generateOTPAddon").click(function(){if(updateCreditLimit()){var regenHref="/creditcards/app/myaccount/send-otp-addoncard-credit-limit-change";$.ajax({url:regenHref,type:"POST",beforeSend:function(){$(".addon-error-msg").css("display","none"),$(".err-genOtpMessages").hide().text("");var loaderHtml='<div class="overlay-loader"></div>';$("body").append(loaderHtml)},complete:function(){$("body").find("div.overlay-loader").remove()},success:function(response){response.success||response.alreadyExisting?($("#OTPBlock").show(),$(".creditlimit-util-slider-btns.contains-send").hide(),$("#edit-creditlimit-util-slider").css("pointer-events","none")):$(".err-genOtpMessages").show().text(response.message.indexOf("Maximum OTP delivery attempts reached")>-1?"Maximum OTP delivery attempts reached. Please try after 15 minutes.":"Sorry! You cannot avail this service at the moment. Please try again later.")},error:function(){$("body").find("div.overlay-loader").remove(),$(".err-genOtpMessages").hide().text("Sorry! You cannot avail this service at the moment. Please try again later.")}})}}),$("#regenerateOTPAddon").click(function(){var regenHref="/creditcards/app/myaccount/resend-otp-addoncard-credit-limit-change";$.ajax({url:regenHref,type:"POST",beforeSend:function(){$(".addon-error-msg").css("display","none"),$("#reinstAuthErrBlk").hide(),$("body").append('<div class="overlay-loader"></div>')},complete:function(){$("body").find("div.overlay-loader").remove()},success:function(response){console.log(response),$(".addon-error-msg").text(response.message.indexOf("OTP is sent to your")>-1?"One Time Password (OTP) has been resent to your registered mobile number and E-mail ID.":response.message),$(".addon-error-msg").css("display","inline-block"),response.resendEnabled||$("#regenerateOTPAddon").addClass("disable-a")},error:function(){$("body").find("div.overlay-loader").remove()}})}),$("#save-edit-creditLimit").click(function(){var otp=$("#encryptedOtp").val();if(otp.length<6)return void $("#reinstAuthErrBlk").show();var encOtp=dataEncryptionAES(otp);$("#encryptedOtp").val(encOtp);var encCardNum=$(".update-addon-card-spend-limit #cardNumber").val();encCardNum=dataEncryptionAES(encCardNum),$(".update-addon-card-spend-limit #cardNumber").val(encCardNum);var loaderHtml='<div class="overlay-loader"></div>';$("body").append(loaderHtml),$(".addon-error-msg").css("display","none"),$("#reinstAuthErrBlk").hide(),updateAddonCardSpendLimit.submit(),$("#encryptedOtp").val(otp)}),$(".button-cancel-creditlimit").on("click",function(e){e.preventDefault(),$(".edit-addoncard").css("display","block"),$("#creditlimit-util-slider").css("display","block"),$("#edit-creditlimit-util-slider").css("display","none"),$("#hideLimitTxt").show(),$("#OTPBlock").css("display","none"),$(".creditlimit-util-slider-btns.contains-send").show(),$("#edit-creditlimit-util-slider").css("pointer-events","auto")}),$(document).ready(function(){var otpAuthSuccess=$("#otpAuthSuccess").val();"true"!=otpAuthSuccess&&void 0!=otpAuthSuccess&&""!=otpAuthSuccess&&($(".right-link.edit-creditlimit.hide-editable").click(),$("#edit-creditlimit-util-slider").css("pointer-events","none"),$(".creditlimit-util-slider-btns.contains-send").hide(),$("#OTPBlock").show(),$("#reinstAuthErrBlk").show());var otpAuthResponse=$("#otpAuthResponse").val();otpAuthResponse&&(otpAuthResponse=JSON.parse(dataDecryptionAES(otpAuthResponse)),console.log(otpAuthResponse),1==otpAuthResponse.otpResponse.invalidAttemptsOver&&($("#save-edit-creditLimit").prop("style","color: #666!important;font-weight: 600;background-color: #dadada !important;font-family: 'Open Sans';text-decoration: none!important;pointer-events: none!important;"),$(".addon-error-msg.cli-otp-message").text(otpAuthResponse.otpResponse.message).show(),$("#regenerateOTPAddon").addClass("disable-a"),$("#reinstAuthErrBlk").hide()))}),$(document).ready(function(){var otpAuthErrorhblock=$(".hblock-review-transaction #otpAuthErrorhblock").val();"true"==otpAuthErrorhblock&&($(".nextConfirm").click(),$(".confirmBtn").exists()&&$(".confirmBtn").click(),$(".sus-trans-opt-section").show(),$(".block-card-button").val("Activate Card").css("display","block"),$(".h-block-otp-box").hide())}),$(".my-account.encash").exists()&&window.analytics){if("false"==sessionStorage.getItem("c2bOtpVerify")){sessionStorage.removeItem("c2bOtpVerify");var a={session_id:$("#encash-form #encashAnalyticsSessionId").val(),journey_name:$("#encash-form #encashJourneyName").val(),journey_id:$("#encash-form #encashJourneyId").val(),inbound_channel:"Website",source_page_url:window.location.href,status:"Success",error_code:"",error_description:" ",customer_ip_address:$("#encash-form #encashFromIpAddress").val(),page_name:"C2B Landing Page",referer:$("#encash-form #encashReferer").val()?$("#encash-form #encashReferer").val():window.location.href};analytics.track("C2B_otp_verification",{session_id:$("#encash-form #encashAnalyticsSessionId").val(),journey_name:$("#encash-form #encashJourneyName").val(),journey_id:$("#encash-form #encashJourneyId").val(),inbound_channel:"Website",source_page_url:window.location.href,status:"Success",error_code:"",error_description:" ",customer_ip_address:$("#encash-form #encashFromIpAddress").val(),page_name:"C2B Landing Page",referer:$("#encash-form #encashReferer").val()?$("#encash-form #encashReferer").val():window.location.href}),analytics.track("C2B_login",{session_id:$("#encash-form #encashAnalyticsSessionId").val(),journey_name:$("#encash-form #encashJourneyName").val(),journey_id:$("#encash-form #encashJourneyId").val(),inbound_channel:"Website",account_no:$("#encash-form #encashRegisteredAccountNumber").val(),source_page_url:window.location.href,customer_ip_address:$("#encash-form #encashFromIpAddress").val(),page_name:"Encash Booking",referer:$("#encash-form #encashReferer").val()?$("#encash-form #encashReferer").val():window.location.href})}var a={session_id:$("#encash-form #encashAnalyticsSessionId").val(),journey_name:$("#encash-form #encashJourneyName").val(),journey_id:$("#encash-form #encashJourneyId").val(),outbound_channel:$("#encash-form #encashOutboundChannelName").val(),inbound_channel:"Website",account_no:$("#encash-form #encashRegisteredAccountNumber").val(),source_page_url:window.location.href,customer_ip_address:$("#encash-form #encashFromIpAddress").val(),page_name:"Encash Booking",referer:$("#encash-form #encashReferer").val()?$("#encash-form #encashReferer").val():window.location.href};analytics.track("journey_landing_page",{session_id:$("#encash-form #encashAnalyticsSessionId").val(),journey_name:$("#encash-form #encashJourneyName").val(),journey_id:$("#encash-form #encashJourneyId").val(),outbound_channel:$("#encash-form #encashOutboundChannelName").val(),inbound_channel:"Website",account_no:$("#encash-form #encashRegisteredAccountNumber").val(),source_page_url:window.location.href,customer_ip_address:$("#encash-form #encashFromIpAddress").val(),page_name:"Encash Booking",referer:$("#encash-form #encashReferer").val()?$("#encash-form #encashReferer").val():window.location.href})}if($("#encash-outbound-success").exists()&&window.analytics){var b={session_id:$(".main-wrap #encashAnalyticsSessionId").val(),journey_name:$(".main-wrap #encashJourneyName").val(),journey_id:$(".main-wrap #encashJourneyId").val(),inbound_channel:"Website",account_no:$(".main-wrap #encashRegisteredAccountNumber").val(),source_page_url:window.location.href,evar1:$("#tracksr_submit_form #srNumber").val(),status:"success",error_code:"",error_description:"",customer_ip_address:$(".main-wrap #encashFromIpAddress").val(),page_name:"Encash Booking",referer:$(".main-wrap #encashReferer").val()?$(".main-wrap #encashReferer").val():window.location.href};analytics.track("final_form_submit",{session_id:$(".main-wrap #encashAnalyticsSessionId").val(),journey_name:$(".main-wrap #encashJourneyName").val(),journey_id:$(".main-wrap #encashJourneyId").val(),inbound_channel:"Website",account_no:$(".main-wrap #encashRegisteredAccountNumber").val(),source_page_url:window.location.href,evar1:$("#tracksr_submit_form #srNumber").val(),status:"success",error_code:"",error_description:"",customer_ip_address:$(".main-wrap #encashFromIpAddress").val(),page_name:"Encash Booking",referer:$(".main-wrap #encashReferer").val()?$(".main-wrap #encashReferer").val():window.location.href});var a={session_id:$(".main-wrap #encashAnalyticsSessionId").val(),journey_name:$(".main-wrap #encashJourneyName").val(),journey_id:$(".main-wrap #encashJourneyId").val(),inbound_channel:"Website",account_no:$(".main-wrap #encashRegisteredAccountNumber").val(),source_page_url:window.location.href,evar1:$("#tracksr_submit_form #srNumber").val(),status:"success",error_code:"",error_description:"",customer_ip_address:$(".main-wrap #encashFromIpAddress").val(),page_name:"Encash Confirmation",referer:$(".main-wrap #encashReferer").val()?$(".main-wrap #encashReferer").val():window.location.href};analytics.track("confirmation_screen",{session_id:$(".main-wrap #encashAnalyticsSessionId").val(),journey_name:$(".main-wrap #encashJourneyName").val(),journey_id:$(".main-wrap #encashJourneyId").val(),inbound_channel:"Website",account_no:$(".main-wrap #encashRegisteredAccountNumber").val(),source_page_url:window.location.href,evar1:$("#tracksr_submit_form #srNumber").val(),status:"success",error_code:"",error_description:"",customer_ip_address:$(".main-wrap #encashFromIpAddress").val(),page_name:"Encash Confirmation",referer:$(".main-wrap #encashReferer").val()?$(".main-wrap #encashReferer").val():window.location.href})}if($("#encash-outbound-failure").exists()&&window.analytics){var a={session_id:$(".main-wrap #encashAnalyticsSessionId").val(),journey_name:$(".main-wrap #encashJourneyName").val(),journey_id:$(".main-wrap #encashJourneyId").val(),inbound_channel:"Website",account_no:$(".main-wrap #encashRegisteredAccountNumber").val(),source_page_url:window.location.href,evar1:"",status:"Failure",error_code:"",error_description:$("#encashError").val(),customer_ip_address:$(".main-wrap #encashFromIpAddress").val(),page_name:"Encash Booking",referer:$(".main-wrap #encashReferer").val()?$(".main-wrap #encashReferer").val():window.location.href};
analytics.track("final_form_submit",{session_id:$(".main-wrap #encashAnalyticsSessionId").val(),journey_name:$(".main-wrap #encashJourneyName").val(),journey_id:$(".main-wrap #encashJourneyId").val(),inbound_channel:"Website",account_no:$(".main-wrap #encashRegisteredAccountNumber").val(),source_page_url:window.location.href,evar1:"",status:"Failure",error_code:"",error_description:$("#encashError").val(),customer_ip_address:$(".main-wrap #encashFromIpAddress").val(),page_name:"Encash Booking",referer:$(".main-wrap #encashReferer").val()?$(".main-wrap #encashReferer").val():window.location.href})}if(null!=$("#otp-msg-failure #otpAuthFail").val()&&"false"==sessionStorage.getItem("c2bOtpVerify")&&window.analytics){sessionStorage.removeItem("c2bOtpVerify");var a={session_id:$("#campaign-form #analyticsSessionId").val(),journey_name:$("#campaign-form #featureName").val(),journey_id:$("#campaign-form #journeyId").val(),inbound_channel:"Website",source_page_url:window.location.href,status:"failure",error_code:"",error_description:$("#otp-msg-failure #otpAuthFail").val(),customer_ip_address:$("#campaign-form #fromIpAddress").val(),page_name:"C2B Landing Page",referer:$("#campaign-form #referer").val()?$("#campaign-form #referer").val():window.location.href};analytics.track("C2B_otp_verification",{session_id:$("#campaign-form #analyticsSessionId").val(),journey_name:$("#campaign-form #featureName").val(),journey_id:$("#campaign-form #journeyId").val(),inbound_channel:"Website",source_page_url:window.location.href,status:"failure",error_code:"",error_description:$("#otp-msg-failure #otpAuthFail").val(),customer_ip_address:$("#campaign-form #fromIpAddress").val(),page_name:"C2B Landing Page",referer:$("#campaign-form #referer").val()?$("#campaign-form #referer").val():window.location.href})}$(document).ready(function(){var chkInlineVal=$("#isInline").val();(1==chkInlineVal||"true"==chkInlineVal)&&(console.log("this is encash inline!",chkInlineVal),$(".inline-vbg").html("Encash Inline"))}),$(document).ready(function(){$(".recur-tr-primary-radio").on("click",function(){var selectedCard=$(this).parent().parent().parent().find(".recur-tr-cardInfo").html(),selectedCardFormatted=selectedCard.replaceAll("-","");$("#addon-recur-key").removeAttr("name"),$("#recurtrSelecledCard").val(selectedCardFormatted),$(".recur-tr-form-ul .recur-tr-radio-box .field-wrap").css("display","none"),viewport.width<767&&$(".rt-tnc").css("margin-top","0px"),enableProceedBtn()}),$("#recur-tr-addon-card-list").parent().find(".trigger").html("Select Card"),$("#recur-tr-addon-card-list").on("change",function(){var selectedCard=$(this).parent().find(".trigger").html(),selectedCardFormatted=selectedCard.replaceAll("-","");$("#recurtrSelecledCard").val(selectedCardFormatted),enableProceedBtn()}),$(".recur-tr-addon-radio").on("click",function(){if($("#addon-recur-key").attr("name","selectedAddonCardNumber"),console.log($("#addon-recur-key").val()),$("#addonsize").val()<2){var selectedCard=$(this).parent().parent().parent().find(".add-on").html();console.log(selectedCard);var selectedCardFormatted=selectedCard.replaceAll("-","");$("#recurtrSelecledCard").val(selectedCardFormatted),enableProceedBtn(),console.log("inside if condition")}else $("#recurtrSelecledCard").val(""),$("#recur-tr-addon-card-list").parent().find(".trigger").html("Select Card"),$(".sihub-pay-btn").css({background:"#e0e0e0","pointer-events":"none",color:"#666"});viewport.width<767&&$(".rt-tnc").css("margin-top","20px"),$(".recur-tr-form-ul .recur-tr-radio-box .field-wrap").css("display","block")}),$("#recurtrSelecledPCard").exists()&&enableProceedBtn()}),$(document).ready(function(){$(".recur-tr-primary-radio").on("click",function(){var selectedCard=$(this).parent().parent().parent().find(".recur-tr-cardInfo").html(),selectedCardFormatted=selectedCard.replaceAll("-","");$("#addon-recur-key").removeAttr("name"),$("#recurtrSelecledCard").val(selectedCardFormatted),$(".recur-tr-form-ul .recur-tr-radio-box .field-wrap").css("display","none"),viewport.width<767&&$(".rt-tnc").css("margin-top","0px"),enableProceedBtn()}),$("#recur-tr-addon-card-list").parent().find(".trigger").html("Select Card"),$("#recur-tr-addon-card-list").on("change",function(){var selectedCard=$(this).parent().find(".trigger").html(),selectedCardFormatted=selectedCard.replaceAll("-","");$("#recurtrSelecledCard").val(selectedCardFormatted),enableProceedBtn()}),$(".recur-tr-addon-radio").on("click",function(){if($("#addon-recur-key").attr("name","selectedAddonCardNumber"),console.log($("#addon-recur-key").val()),$("#addonsize").val()<2){var selectedCard=$(this).parent().parent().parent().find(".add-on").html();console.log(selectedCard);var selectedCardFormatted=selectedCard.replaceAll("-","");$("#recurtrSelecledCard").val(selectedCardFormatted),enableProceedBtn(),console.log("inside if condition")}else $("#recurtrSelecledCard").val(""),$("#recur-tr-addon-card-list").parent().find(".trigger").html("Select Card"),$(".sihub-pay-btn").css({background:"#e0e0e0","pointer-events":"none",color:"#666"});viewport.width<767&&$(".rt-tnc").css("margin-top","20px"),$(".recur-tr-form-ul .recur-tr-radio-box .field-wrap").css("display","block")}),$("#recurtrSelecledPCard").exists()&&enableProceedBtn()}),$(document).ready(function(){function getStateAndCity(pincode){for(i=0;i<states.length;i++)if(-1!=states[i].indexOf(pincode)){$(".addOnSconnect #state").val(states[i].substring(8));break}for(i=0;i<city.length;i++)if(-1!=city[i].indexOf(pincode)){$(".addOnSconnect #city").val(city[i].substring(8));break}}var pincodes=null!=sessionStorage.getItem("pincodes")?sessionStorage.getItem("pincodes").split(","):[],states=null!=sessionStorage.getItem("state")?sessionStorage.getItem("state").split(","):[],city=null!=sessionStorage.getItem("city")?sessionStorage.getItem("city").split(","):[];sessionStorage.removeItem("pincodes"),sessionStorage.removeItem("state"),sessionStorage.removeItem("city"),$(".addOnSconnect #nameAsPerKYC").on("blur",validName);var pincodeList=[];for(i=0;i<pincodes.length;i++)pincodeList.push(pincodes[i].substring(11,17));var pincodeSelected=!1;$(".addOnSconnect #pincode").autocomplete({minLength:0,source:pincodeList,delay:100,autoFocus:!0,select:function(event,ui){autoSelectVal=ui.item.value,getStateAndCity(autoSelectVal),pincodeSelected=!0,$(".addOnSconnect label[for=pincode]").addClass("valid").removeClass("error"),$(".addOnSconnect #pincode").removeClass("error")},response:function(){}}).autocomplete("widget").addClass("pincodeSearchList"),$(".addOnSconnect #pincode").focus(function(){pincodeSelected=!1}).blur(function(){""==$(".addOnSconnect #pincode").val()?pincodeSelected=!1:(0==pincodeSelected||$(".addOnSconnect #pincode").val().length<6)&&($(".addOnSconnect #pincode").val(""),$(".addOnSconnect label[for=pincode]").addClass("error").removeClass("valid"),$(".addOnSconnect #pincode").addClass("error"),$(".addOnSconnect #state, .addOnSconnect #city").val(""))}),$(".addOnSconnect #mobileNumber").on("keyup blur",function(){mobileNumberFormatValidation()}),$(".addOnSconnect .select-selected").click(function(){this.nextElementSibling.classList.toggle("select-hide"),this.classList.toggle("select-arrow-active")}),$(".addOnSconnect .date-drop-block .select-items div").click(function(){$("#appointmentDate").val($(this).text()),$(".date-drop-block .select-arrow-active").text($(this).text()),$(this).parent().parent().find(".select-selected").toggleClass("select-arrow-active"),$(this).parent().toggleClass("select-hide"),$(".addOnSconnect .date-drop-block .select-selected").removeClass("errorClass")}),$(".addOnSconnect .time-drop-block .select-items div").click(function(){$("#appointmentTime").val($(this).text()),$(".time-drop-block .select-arrow-active").text($(this).text()),$(this).parent().parent().find(".select-selected").toggleClass("select-arrow-active"),$(this).parent().toggleClass("select-hide"),$(".addOnSconnect .time-drop-block .select-selected").removeClass("errorClass")}),$(".addOnSconnect .addon-relationship .options li").click(function(){"SIS DTR".indexOf($(this).attr("data-raw-value"))>-1?($(".addOnSconnect .addon-gender .options li")[0].click(),$(".addOnSconnect .addon-gender .trigger").addClass("no-touch")):"BRO SON".indexOf($(this).attr("data-raw-value"))>-1?($(".addOnSconnect .addon-gender .options li")[1].click(),$(".addOnSconnect .addon-gender .trigger").addClass("no-touch")):$(".addOnSconnect .addon-gender .trigger").removeClass("no-touch")}),$(".addOnSconnect .addon-gender .trigger").addClass("no-touch")}),$(".addOnSconnect #request-addon-form").validate({onkeyup:!1,rules:{name:{required:{depends:function(){return $(this).val($(this).val().trim().toUpperCase()),!0}},minlength:3,addonnameval:!1},dob:"required",relationship:"required",gender:"required",mobileNumber:{required:!0,minlength:10},nameAsPerKYC:{required:!0,minlength:3},nameOnAddOnCard:{required:!0,minlength:1},email:{required:!0,maxlength:40}},errorPlacement:function($error,$element){$("label[for="+$element.attr("name")+"]").remove(),"appointmentDate appointmentTime".indexOf($element.attr("name"))<=-1&&$error.insertAfter($element)},success:function(){validClass="valid"},highlight:function(element,errorClass,validClass){console.log("highlight case"),"appointmentDate appointmentTime".indexOf($(element).attr("name"))>-1&&validDateAndTime(),"nameAsPerKYC".indexOf($(element).attr("id"))>-1?validName(element,errorClass,validClass):"mobileNumber".indexOf($(element).attr("id"))>-1?mobileNumberFormatValidation(element,errorClass,validClass):"addonEmailValidation".indexOf($(element).attr("id"))>-1?addonEmailIdFormatValidation(element,errorClass,validClass):"nameOnAddOnCard".indexOf($(element).attr("id"))>-1?validateNameOnAddonCard(element,errorClass,validClass):$(element).addClass(errorClass).removeClass(validClass)},unhighlight:function(element,errorClass,validClass){"appointmentDate appointmentTime".indexOf($(element).attr("name"))>-1&&validDateAndTime(),"nameAsPerKYC".indexOf($(element).attr("id"))>-1?validName(element,errorClass,validClass):"mobileNumber".indexOf($(element).attr("id"))>-1?mobileNumberFormatValidation(element,errorClass,validClass):"addonEmailValidation".indexOf($(element).attr("id"))>-1?addonEmailIdFormatValidation(element,errorClass,validClass):"nameOnAddOnCard".indexOf($(element).attr("id"))>-1?validateNameOnAddonCard(element,errorClass,validClass):($(element).removeClass(errorClass).addClass(validClass),$(element).next("label").addClass(validClass))},submitHandler:function(form){validateName()&&!$("#mobileNumber").hasClass("error")&&form.submit()}}),$(".modal #new-pin-input222 #password").on("input",function(){console.log("c2b/c2s journey"),0!=$("#password").val().length?$(".modal .password-strength").css("display","block"):$(".modal .password-strength").css("display","none"),onChangeCreatePassword($("#password").val())}),$(window).width()>768&&$(".accordion").click(function(){console.log("FAQ is clicked"),$(this).toggleClass("active1"),$(this).next(".panel").toggleClass("autoHeight")}),$(window).width()<767&&$(".accordion").click(function(){var myClass=$(this).attr("class").split(" ")[1];"active1"==myClass?$(".accordion").removeClass("active1"):($(".accordion").next(".panel").removeClass("autoHeight"),$(".accordion").next(".panel").removeClass("noheight"),$(".accordion").removeClass("active1"),$(this).toggleClass("active1")),$(this).next(".panel").toggleClass("autoHeight"),$(this).next(".panel").toggleClass("noheight")}),$("#pro-new-password").on("input",function(){0!=$("#pro-new-password").val().length?($(".password-strength").css("display","block"),onChangeCreatePassword($("#pro-new-password").val())):($(".password-strength").css("display","none"),onChangeCreatePassword($("#pro-new-password").val()))}),$("#prouser-register #password").on("input",function(){onChangeCreatePassword($("#password").val())}),$(".btn-popup-close, #current-forgot-pass").on("click",function(){$("#current-forgot-pass").removeClass("open")}),$("#mandatory-password-update-form #password").on("input",function(){0!=$("#password").val().length?($(".password-strength").css("display","block"),onChangeCreatePassword($("#password").val())):($(".password-strength").css("display","none"),onChangeCreatePassword($("#password").val())),isPasswordsMatch=!1,$("#proPwdMismatchMessage").html(""),enabledDisabledConfirmButton()}),$("#authOtp").on("click",function(){var otpVal=$("#otp").val(),passphrase=document.getElementById("card-auth-passphase").value;if($("#mandatory-password-authotp-error").css("display","none"),$("#mandatory-password-authresendotp-error").css("display","none"),$("#mandatory-password-authresendotp-error").html(""),otpVal){var encryptedOtp=dataEncryptionAES(otpVal,passphrase);$.ajax({url:"./expiredpassword-authotp",type:"POST",data:{encryptedOtp:encryptedOtp,passphrase:document.querySelector("#card-auth-passphase").value},beforeSend:function(){$("#password-error").html(""),$("#password-error").css("color","black");var loaderHtml='<div class="overlay-loader"></div>';$("body").append(loaderHtml)},complete:function(){$("body").find("div.overlay-loader").remove()},success:function(response){$("body").find("div.overlay-loader").remove(),res=decryptResponse(response,passphrase),console.log("%c 23938 response------","color:red",res),0==res.statusCode?($("#mandatory-password-authotp-error").css("display","none"),$("#mandatory-password-authotp-error").removeClass("hide-section"),$("#encryptedOtp").val(encryptedOtp),$("#mandatory-pass-otp-auth-form").attr("action","./expirepassword-save-credentials"),$("#mandatory-pass-otp-auth-form").submit(),$("#otp").css("border","1px solid #cdcbcb")):2==res.statusCode?($("#mandatory-pass-otp-auth-form").attr("action","./reached-max-otp-validation"),$("#mandatory-pass-otp-auth-form").submit()):4==res.statusCode?($("#mandatory-password-authotp-error").css("color","red"),$("#otp").val(""),$("#mandatory-password-authotp-error").show().empty().text(res.message),$('label[for="otp"]').parent().find("label.valid").remove(),$("#otp").css("border","1px solid red")):1==res.statusCode||2==res.statusCode?($("#mandatory-password-authotp-error").empty().text(res.message),$("#otp").val(""),$('label[for="otp"]').parent().find("label.valid").remove(),$("#otp").css("border","1px solid red")):($("#mandatory-password-authotp-error").empty().text(res.message),$('label[for="otp"]').parent().find("label.valid").remove(),$("#otp").css("border","1px solid red"),$("#otp").after('<label for="otp" class="error" style="width:20px"> </label>'))},error:function(error){error=decryptResponse(response,passphrase),console.log("pass auth errror",error),$("body").find("div.overlay-loader").remove()}})}}),$("#mandatory-pwd-authotp-resendotp").on("click",function(){$("#otp").val(""),$("#mandatory-password-authotp-error").css("display","none"),$("#mandatory-password-authotp-error").empty(),$.ajax({url:"./expired-password-resendotp",type:"POST",beforeSend:function(){$("#password-error").html(""),$("#password-error").css("color","black");var loaderHtml='<div class="overlay-loader"></div>';$("body").append(loaderHtml)},complete:function(){$("body").find("div.overlay-loader").remove()},success:function(response){if($("body").find("div.overlay-loader").remove(),1==response.success){$("#mandatory-pwd-authotp-resendotp").attr("style","display: block;");var msg=response.message,substring="You have exhausted";if(-1!==msg.indexOf(substring)){$("#mandatory-pwd-authotp-resendotp").attr("style","pointer-events: none;");var exceedOTPmsg="You have clicked 'Resend OTP' five times. Please enter the OTP you have received or restart the process and generate a new OTP to change your password.";$("#mandatory-password-authresendotp-error").show().empty().text(exceedOTPmsg)}else $("#mandatory-password-authresendotp-error").show().empty().text(msg)}},error:function(){$("body").find("div.overlay-loader").remove()}})}),$("#mandatory-password-update-form #currentPassword").keyup(function(){var currentPwdValue=$("#mandatory-password-update-form #currentPassword").val();currentPwdValue.length>7?enabledDisabledConfirmButton():($(".button-continue").css("pointer-events","none"),$(".button-continue").addClass("secondary").removeClass("primary").attr("disabled",!0))}),$("#prouser-register #password").on("focus",function(){$(".password-strength-proactive").css("display","block")}),$("#prouser-register #password").on("blur",function(){0==$("#password").val().length&&$(".password-strength-proactive").css("display","none")}),$("#mandatory-password-update-form #currentPassword").blur(function(){var currentPwdValue=$("#mandatory-password-update-form #currentPassword").val();if(currentPwdValue.length>7||0==currentPwdValue.length)$('label[for="mandatory-pwd-change-conf-pwd"]').parent().find("label.valid").remove(),$('label[for="mandatory-pwd-change-conf-pwd"]').parent().find("label.error").remove(),$("#mandatory-password-update-form #currentPassword").attr("style","border: 1px solid #cdcbcb;"),$("#pro-uname-existance-error").remove();else{var unameErrorValidation='<label id="pro-uname-existance-error" for="mandatory-pwd-change-conf-pwd" class="error" style="padding: 0px;"></label>';$("#mandatory-password-update-form #currentPassword").after(unameErrorValidation),$("#mandatory-password-update-form #currentPassword").attr("style","border: 1px solid red;")}}),$(".custom-start-button").click(function(){$("#logout-content").removeClass("open"),$(window).width()<768?($("#open-modal-content-popup").addClass("open"),$("#open-modal-content").removeClass("open")):($("#open-modal-content").addClass("open"),$("#open-modal-content-popup").removeClass("open"),$("body").css("overflow","hidden"))});var fileUploadField=document.querySelector("#applicant_photo"),errorMessage=document.querySelector("#doc_upload_error"),maxFileSize=document.querySelector("#file_size_limit"),documentValid=!1;$("input#enterOtp").on("keyup",function(){var otp=$("#request-addon-form #enterOtp").val();6==otp.length?($("#request-addon-form .verify-filed-label-block").css("background-color","#0095d9"),$("#request-addon-form .verify-filed-label-block").css("color","#ffffff"),$("#request-addon-form .verify-filed-label-block").css("pointer-events","visible")):($("#request-addon-form .verify-filed-label-block").css("background-color","#E5E4E4"),$("#request-addon-form .verify-filed-label-block").css("pointer-events","none"))}),$("input#mobileNumber").on("keyup change",function(){$(".file-upload-field").prop("disabled",!0)}),$(".file-upload-field").prop("disabled",!0);var isVerifyBtnClicked=!1;$(".addon-verify-otp-button").click(function(){isVerifyBtnClicked?$(".file-upload-field").prop("disabled",!0):(isVerifyBtnClicked=!0,$(".file-upload-field").prop("disabled",!1))}),fileUploadField.addEventListener("change",function(){validateApplicantPhoto(this.files[0])});var digiFieldModifyFlag=!1;$(document).ready(function(){});var retryAttempCount=0,retryGenerateOtp=!1,resendOTPCount=0;$("#request-addon-form #enterOtp").on("blur",onChangeAddonOtpField),$(function(){function shuffle(toShuffle){if(toShuffle&&toShuffle.length){var target=$(toShuffle[0]).prev(),operation="after";for(target&&0!=target.length||(target=$(toShuffle[0]).parent(),operation="prepend");toShuffle.length;){var buf=new Uint8Array(1),random=toShuffle.splice(Math.floor(crypto.getRandomValues(buf)*toShuffle.length),1)[0];target[operation](random)}}}var $write,shift=!1,capslock=!1,isChecked=!1,isCheckedCard=!1,isCheckedMob=!1,$current=null;$(document).delegate(".virutal-keys","focus",function(){$current=$(this)}),$("input#virtual").change(function(){$(this).is(":checked")?(isChecked=!0,$("#keyboard").addClass("active"),$("#login-form input").attr("readonly","readonly"),""==$("#userid").val()||void 0==$("#userid").val()?$("#userid").click():$("#password").click()):(isChecked=!1,$("#keyboard").removeClass("active"),$("#login-form input").removeAttr("readonly","readonly"))}),$("input#virtual-key-card").change(function(){$(this).is(":checked")?(isCheckedCard=!0,$("#keyboard").addClass("numericKeyboardActive"),$("#login-form-card input[type=password], #login-form-card input#cardNum").attr("readonly","readonly"),(""==$("#login-form-card #cardNum").val()||void 0==$("#login-form-card #cardNum").val())&&$("#login-form-card #cardNum").click()):(isCheckedCard=!1,$("#keyboard").removeClass("numericKeyboardActive"),$("#login-form-card input[type=password]").removeAttr("readonly","readonly"),$("#card-otp-section").hasClass("hidden-card-details")&&$("#login-form-card input[type=text]").removeAttr("readonly","readonly"))}),$("input#virtual-key-mob").change(function(){$(this).is(":checked")?(isCheckedMob=!0,$("#keyboard").addClass("numericKeyboardActive"),$("#login-form-mob input, #login-form-mob input#moblogin").attr("readonly","readonly"),(""==$("#login-form-mob #moblogin").val()||void 0==$("#login-form-mob #moblogin").val())&&$("#login-form-mob #moblogin").click()):(isCheckedMob=!1,$("#keyboard").removeClass("numericKeyboardActive"),$("#login-form-mob input[type=password], #login-form-mob input#mob-primaryCard").removeAttr("readonly","readonly"),$("#mob-otp-section").hasClass("hidden-mob-details")&&$("#login-form-mob input[type=text]").removeAttr("readonly","readonly"))}),$(document).delegate("input#moblogin, input#mob-otp, input#mob-pin, input#mob-primaryCard","click",function(){$write=$(this)}),$(document).delegate("input#password, input#userid, input#cardNum, input#card-otp","click",function(){$write=$(this),"cardNum"!=$write.prop("id")||$("#login-form-card #card-otp-section").hasClass("hidden-card-details")||$("#login-form-card #card-otp").click()}),$(document).delegate("input#password_password","click",function(){$write=$(this).siblings("input#password"),$write=$(this)}),resetPosition=function(){return{getCaret:function(el){if(el.selectionStart)return el.selectionStart;if(document.selection){el.focus();var r=document.selection.createRange();if(null==r)return 0;var re=el.createTextRange(),rc=re.duplicate();return re.moveToBookmark(r.getBookmark()),rc.setEndPoint("EndToStart",re),rc.text.length}return 0},resetCursor:function(txtElement,currentPos){if(txtElement.setSelectionRange)txtElement.focus(),txtElement.setSelectionRange(currentPos,currentPos);else if(txtElement.createTextRange){var range=txtElement.createTextRange();range.moveStart("character",currentPos),range.select()}}}},backspace=function(){var currentPos=resetPosition().getCaret($current[0]),text=$current.val(),backSpace=text.substr(0,currentPos-1)+text.substr(currentPos,text.length);$current.val(backSpace),resetPosition().resetCursor($current[0],currentPos-1)},clearAll=function(){$current.val("").focus()},$("#keyboard li").click(function(){if(0!=isChecked){var $this=$(this),character=$this.html();if($this.hasClass("left-shift")||$this.hasClass("right-shift"))return $(".letter").toggleClass("uppercase"),$(".symbol span").toggle(),shift=shift===!0?!1:!0,capslock=!1,!1;if($this.hasClass("capslock"))return $(".letter").toggleClass("uppercase"),capslock=!0,!1;if($this.hasClass("backspace"))return void backspace();if($this.hasClass("clear"))return void clearAll();$this.hasClass("symbol")&&(character=$("span:visible",$this).html()),$this.hasClass("spcl")&&$this.hasClass("symbol")&&(character=$("span:visible",$this).html().replace(/&amp;/g,"&")),$this.hasClass("space")&&(character=" "),$this.hasClass("tab")&&(character="	"),$this.hasClass("return")&&(character="\n"),$this.hasClass("uppercase")&&(character=character.toUpperCase()),shift===!0&&($(".symbol span").toggle(),capslock===!1&&$(".letter").toggleClass("uppercase"),shift=!1),$write.val().length!=$write.attr("maxlength")&&$write.val($write.val()+character).focus()}}),$("#keyboard li.number").click(function(){if(0!=isCheckedCard&&$("#keyboard").hasClass("numericKeyboardActive")){var $this=$(this),character=$this.html();if($this.hasClass("left-shift")||$this.hasClass("right-shift"))return $(".letter").toggleClass("uppercase"),$(".symbol span").toggle(),shift=shift===!0?!1:!0,capslock=!1,!1;if($this.hasClass("capslock"))return $(".letter").toggleClass("uppercase"),capslock=!0,!1;if($this.hasClass("backspace"))return"-"==$("#cardNum").val().charAt($("#cardNum").val().length-1)&&backspace(),void backspace();if($this.hasClass("clear"))return void clearAll();$this.hasClass("symbol")&&(character=$("span:visible",$this).html()),$this.hasClass("spcl")&&$this.hasClass("symbol")&&(character=$("span:visible",$this).html().replace(/&amp;/g,"&")),$this.hasClass("space")&&(character=" "),$this.hasClass("tab")&&(character="	"),$this.hasClass("return")&&(character="\n"),$this.hasClass("uppercase")&&(character=character.toUpperCase()),shift===!0&&($(".symbol span").toggle(),capslock===!1&&$(".letter").toggleClass("uppercase"),shift=!1),$write.val().length!=$write.attr("maxlength")&&($write.val($write.val()+character).focus(),$("#login-form-card #cardNum").trigger("keyup"))}}),$("#keyboard li.mobnumber").click(function(){if(0!=isCheckedMob&&$("#keyboard").hasClass("numericKeyboardActive")){var $this=$(this),character=$this.html();if($this.hasClass("left-shift")||$this.hasClass("right-shift"))return $(".letter").toggleClass("uppercase"),$(".symbol span").toggle(),shift=shift===!0?!1:!0,capslock=!1,!1;if($this.hasClass("capslock"))return $(".letter").toggleClass("uppercase"),capslock=!0,!1;if($this.hasClass("backspace"))return backspace(),void $("#login-form-mob #moblogin").trigger("keyup");if($this.hasClass("clear"))return clearAll(),void $("#login-form-mob #moblogin").trigger("keyup");$this.hasClass("symbol")&&(character=$("span:visible",$this).html()),$this.hasClass("spcl")&&$this.hasClass("symbol")&&(character=$("span:visible",$this).html().replace(/&amp;/g,"&")),$this.hasClass("space")&&(character=" "),$this.hasClass("tab")&&(character="	"),$this.hasClass("return")&&(character="\n"),$this.hasClass("uppercase")&&(character=character.toUpperCase()),shift===!0&&($(".symbol span").toggle(),capslock===!1&&$(".letter").toggleClass("uppercase"),shift=!1),$write.val().length!=$write.attr("maxlength")&&($write.val($write.val()+character).focus(),$("#login-form-mob #moblogin").trigger("keyup"))}}),shuffle($("#keyboard .letter")),shuffle($("#keyboard .symbol:lt(10)")),shuffle($("#keyboard .symbol:gt(10)"))}),$(window).on("load",function(){userId?(post_login_common(),"dashboard"==journey&&(s.events="event6"),"undefined"!=typeof linkname&&(("balance-transfer"==linkname||"balance-transfer-emi"==linkname||"balance-transfer-success"==linkname||"balance-transfer-emi-success"==linkname||"encash"==linkname||"encash-success"==linkname||"foreclosures"==linkname||"foreclosure-success"==linkname||"easy-money-draft-success"==linkname||"easy-money-draft"==linkname||"track-booked-offers-success"==linkname||"track-booked-offers"==linkname||"flexipay"==linkname||"flexipay-success"==linkname||"MANAGE_CLIP"==linkname||"MANAGE_CLIP_SUCCESS"==linkname)&&(s.linkTrackVars="events,prop4,prop5,prop6,prop14,eVar1,eVar5,prop1,eVar16",s.linkTrackEvents="event10,event11,event28,event30",s.eVar5=analyticsObj.sitename+":"+section+":"+journey_link.replace(/\s+/g,"").toLowerCase(),s.eVar16=journey_link.replace(/\s+/g,"").toLowerCase()+"form"),("balance-transfer"==linkname||"balance-transfer-emi"==linkname||"encash"==linkname||"foreclosures"==linkname||"easy-money-draft"==linkname||"track-booked-offers"==linkname||"flexipay"==linkname||"MANAGE_CLIP"==linkname)&&(s.events="event28,event10"),("balance-transfer-success"==linkname||"balance-transfer-emi-success"==linkname||"encash-success"==linkname||"foreclosure-success"==linkname||"easy-money-draft-success"==linkname||"track-booked-offers-success"==linkname||"flexipay-success"==linkname||"MANAGE_CLIP_SUCCESS"==linkname)&&(s.events="event30,event11"),"add-on-card"==linkname&&(s.eVar16=journey_link.replace(/\s+/g,"").toLowerCase()+"form",s.events="event28,event8"),"add-on-card-success"==linkname&&(s.eVar16=journey_link.replace(/\s+/g,"").toLowerCase()+"form",s.events="event30,event9")),post_login()):pre_login()}),$(document).ready(function(){$("body").on("click",".field-wrap .forget-password",function(){var $text=$(".reset-password.forget-password").text();trk_event_set("None"),""!=$text&&setAnalytics(analyticsObj.login_loginintent,$text,"login"),window.location.href="/creditcards/app/user/forgotpassword-page"}),$("body").on("click",".field-wrap .first-time-user",function(){var $text1=$(".reset-password.first-time-user").text();trk_event_set("None"),""!=$text1&&setAnalytics(analyticsObj.login_loginintent,$text1,"login"),window.location.href="/creditcards/app/user/register-page"}),$("body").on("click",".field-wrap .unlock-account",function(){var $text2=$(".reset-password.first-time-user").text();trk_event_set("None"),""!=$text2&&setAnalytics(analyticsObj.login_loginintent,$text2,"login"),window.location.href="/creditcards/app/user/unlock-page"})}),css_browser_selector(navigator.userAgent);var BrowserDetect={init:function(){this.browser=this.searchString(this.dataBrowser)||"",this.version=this.searchVersion(navigator.userAgent)||this.searchVersion(navigator.appVersion)||"",this.OS=this.searchString(this.dataOS)||""},searchString:function(data){for(var i=0;i<data.length;i++){var dataString=data[i].string,dataProp=data[i].prop;if(this.versionSearchString=data[i].versionSearch||data[i].identity,dataString){if(-1!=dataString.indexOf(data[i].subString))return data[i].identity}else if(dataProp)return data[i].identity}},searchVersion:function(dataString){var index=dataString.indexOf(this.versionSearchString);if(-1!=index)return parseFloat(dataString.substring(index+this.versionSearchString.length+1))},dataBrowser:[{string:navigator.userAgent,subString:"Chrome",identity:"Chrome"},{string:navigator.userAgent,subString:"OmniWeb",versionSearch:"OmniWeb/",identity:"OmniWeb"},{string:navigator.vendor,subString:"Apple",identity:"Safari",versionSearch:"Version"},{prop:window.opera,identity:"Opera"},{string:navigator.vendor,subString:"iCab",identity:"iCab"},{string:navigator.vendor,subString:"KDE",identity:"Konqueror"},{string:navigator.userAgent,subString:"Navigator",identity:"Navigator"},{string:navigator.userAgent,subString:"Firefox",identity:"Firefox"},{string:navigator.vendor,subString:"Camino",identity:"Camino"},{string:navigator.userAgent,subString:"Netscape",identity:"Netscape"},{string:navigator.userAgent,subString:"MSIE",identity:"Explorer",versionSearch:"MSIE"},{string:navigator.userAgent,subString:"Gecko",identity:"Mozilla",versionSearch:"rv"},{string:navigator.userAgent,subString:"Mozilla",identity:"Netscape",versionSearch:"Mozilla"}],dataOS:[{string:navigator.platform,subString:"Win",identity:"Windows"},{string:navigator.platform,subString:"Mac",identity:"Mac"},{string:navigator.userAgent,subString:"iPhone",identity:"iPhone/iPod"},{string:navigator.userAgent,subString:"iPad",identity:"iPad"}]};BrowserDetect.init(),$(document).ready(function(){function webkit_version(){var version=0,regexp=/AppleWebKit\/([\d.]+)/,result=regexp.exec(navigator.userAgent);return result&&(version=parseFloat(result[1])),version}-1==BrowserDetect.browser.toLowerCase().indexOf("safari")&&-1==BrowserDetect.browser.toLowerCase().indexOf("chrome")&&-1==BrowserDetect.browser.toLowerCase().indexOf("explorer")&&-1==BrowserDetect.browser.toLowerCase().indexOf("firefox")&&-1==BrowserDetect.browser.toLowerCase().indexOf("mozilla")?(openModalPopup("browser-test"),$("#browser-test").length>0&&$(document).on("keydown",function(event){9==event.keyCode&&event.preventDefault()})):(-1!=BrowserDetect.browser.toLowerCase().indexOf("chrome")&&BrowserDetect.version<26||-1!=BrowserDetect.browser.toLowerCase().indexOf("explorer")&&BrowserDetect.version<9||-1!=BrowserDetect.browser.toLowerCase().indexOf("safari")&&BrowserDetect.version<5||-1!=BrowserDetect.browser.toLowerCase().indexOf("firefox")&&BrowserDetect.version<18)&&(openModalPopup("browser-test"),$("#browser-test").length>0&&$(document).on("keydown",function(event){9==event.keyCode&&event.preventDefault()
}));var webkit_version=webkit_version();533>webkit_version&&0!=webkit_version&&(openModalPopup("browser-test"),$("#browser-test").length>0&&$(document).on("keydown",function(event){9==event.keyCode&&event.preventDefault()})),$("#browser-test .button-cancel, #browser-test .link-forward").click(function(){$(".modal-overlay").removeClass("open")})});var ifSubmitted=sessionStorage.getItem("ifSubmitted"),type=sessionStorage.getItem("type"),loaderHtml="";$(window).on("load",function(){loaderHtml='<div class="overlay-loader"></div>';var attemptOver=$("#attemptOver").val();if("true"===attemptOver&&($("#micro-submit-otp").addClass("add-disable"),$("#micro-submit-otp .blue-btn").addClass("disable-btn"),$(".view-mobile #otp").attr("disabled",!0),$("#showEnterOtp .resend-otp").css("cursor","not-allowed"),$(".resend-otp #micro-resend-otp").css("pointer-events","none"),$(".resend-otp #micro-resend-otp").css("color","gray")),"true"===ifSubmitted&&"mobile"===type?$("#showEnterOtp").css("display","block"):$("#showEnterOtp").css("display","none"),"card"===type){$("#selectCardMethod").addClass("active"),$("#selectMobileMethod").removeClass("active"),$("#microport-card-login").css("display","block"),$("#microport-mobile-login").css("display","none");var panCard=$("#microport-card-login #pan").val(),cardNumber=$("#microport-card-login #card_no").val();(panCard||cardNumber)&&($(".input-field #micro-pan-label").addClass("active"),$(".input-field #micro-card-label").addClass("active"),$(".input-field #micro-otp-label").addClass("active"),$("#microCardSubmitBtn").removeClass("add-disable"),$("#microCardSubmitBtn .blue-btn").removeClass("disable-btn"))}else if("mobile"===type){$("#selectMobileMethod").addClass("active"),$("#selectCardMethod").removeClass("active"),$("#microport-card-login").css("display","none"),$("#microport-mobile-login").css("display","block"),$(".view-mobile #genOtpBtnMicroPort").css("display","none"),$("#showEnterOtp #microOtpMsg").css("display","none");var mobileNumber=$("#micro_mobile_no").val(),otp=$("#showEnterOtp #otp").val();(mobileNumber||otp)&&($(".input-field #micro-otp-label").addClass("active"),$(".input-field #micro-pan-label").addClass("active"),$(".input-field #micro-card-label").addClass("active"))}sessionStorage.removeItem("type"),sessionStorage.removeItem("ifSubmitted")});var inputOtp=document.getElementById("otp");(null!=inputOtp||void 0!=inputOtp)&&inputOtp.addEventListener("keyup",function(event){13===event.keyCode&&(event.preventDefault(),document.getElementById("microMobileSubmitBtn").click())});var inputPan=document.getElementById("pan");(null!=inputPan||void 0!=inputPan)&&inputPan.addEventListener("keyup",function(event){13===event.keyCode&&(event.preventDefault(),document.getElementById("microCardSubmitBtnEnter").click())});var inputMobile=document.getElementById("micro_mobile_no");(null!=inputMobile||void 0!=inputMobile)&&inputMobile.addEventListener("keyup",function(event){13===event.keyCode&&(event.preventDefault(),console.log("Enter pressed"),genOtpMicroPort())}),$("#genOtpBtnMicroPortEnter").click(function(){console.log("button clicked"),genOtpMicroPort()}),$("#showEnterOtp #otp").focus(function(){$(".input-field #micro-otp-label").addClass("active")}),$("#showEnterOtp #otp").bind("cut copy paste",function(e){e.preventDefault()}),$("#microport-card-login #pan").focus(function(){$(".input-field #micro-pan-label").addClass("active")}),$("#microport-card-login #card_no").focus(function(){$(".input-field #micro-card-label").addClass("active")}),$("#microport-mobile-login #micro_mobile_no").blur(function(){var data=$("#microport-mobile-login #micro_mobile_no").val();data=data.substring(data.lastIndexOf("-")+1).trim(),data&&!data.match(/[3-9][0-9]+/)?($(".view-mobile #micro-mob-tick").css("display","none"),$("#microport-mobile-login #micro_mobile_no").addClass("invalid"),$(".view-mobile #micro-mob-cross").css("display","block"),$("#microport-mobile-login #micro-mob-err").html("Incorrect mobile number!"),$("#microport-mobile-login #micro-mob-err").css("display","block")):(!data||data.length<10)&&($(".view-mobile #micro-mob-tick").css("display","none"),$("#microport-mobile-login #micro_mobile_no").addClass("invalid"),$(".view-mobile #micro-mob-cross").css("display","block"),$("#microport-mobile-login #micro-mob-err").html("Incorrect mobile number!"),$("#microport-mobile-login #micro-mob-err").css("display","block"))}),$("#showEnterOtp #otp").blur(function(){var data=$("#showEnterOtp #otp").val();data||$(".input-field #micro-otp-label").removeClass("active")}),$("#microport-card-login #pan").blur(function(){console.log("PAN");var data=$("#microport-card-login #pan").val();data||$(".input-field #micro-pan-label").removeClass("active")}),$("#microport-card-login #card_no").blur(function(){var data=$("#microport-card-login #card_no").val();data||$(".input-field #micro-card-label").removeClass("active")});var cardNumberIP_Prev=0;$("#microport-card-login #card_no").on("keyup",function(e){resetMicroCardFieldStyle();var cardNumberIP=$("#microport-card-login #card_no").val().trim(),firstDigit=cardNumberIP.charAt(0),secondDigit=cardNumberIP.charAt(1),kc=e.which||e.keyCode,diffLength=(String.fromCharCode(kc),cardNumberIP_Prev.length-cardNumberIP.length),formatSpd=/[ `!@#$%^&*()_+\-=\[\]{};':"\\|,.<>\/?~]/,formatSp=/[ `!@#$%^&*()_+\=\[\]{};':"\\|,.<>\/?~]/,formatAl=/^[A-Za-z]+$/;formatSp.test(cardNumberIP)||formatAl.test(cardNumberIP)?(cardNumberIP="",$("#microport-card-login #card_no").val(""),e.preventDefault()):(cardNumberIP.length>=16&&!formatSpd.test(cardNumberIP)&&(cardNumberIP=3==firstDigit&&5!=secondDigit?cardNumberIP.substring(0,15):3==firstDigit&&5==secondDigit?cardNumberIP.substring(0,16):cardNumberIP.substring(0,16),$("#microport-card-login #card_no").val(cardNumberIP)),3==firstDigit&&5!=secondDigit&&1!=diffLength&&2!=diffLength&&35!=kc&&36!=kc&&37!=kc&&39!=kc?(isAmexCard=!0,$("#microport-card-login #card_no").attr("maxlength","17"),console.log("Amex"),formatAndVerifyAmexMicro(cardNumberIP)):3==firstDigit&&5==secondDigit&&1!=diffLength&&2!=diffLength&&35!=kc&&36!=kc&&37!=kc&&39!=kc?(isAmexCard=!1,$("#microport-card-login #card_no").attr("maxlength","19"),formatAndVerifyNonAmexMicro(cardNumberIP),console.log("Rupay JCB")):3!=firstDigit&&1!=diffLength&&2!=diffLength&&35!=kc&&36!=kc&&37!=kc&&39!=kc?(isAmexCard=!1,$("#microport-card-login #card_no").attr("maxlength","19"),formatAndVerifyNonAmexMicro(cardNumberIP)):3!=firstDigit?formatNonAmexWhileDelete(cardNumberIP):3==firstDigit&&5!=secondDigit?formatAmexWhileDelete(cardNumberIP):3==firstDigit&&5==secondDigit&&formatNonAmexWhileDelete(cardNumberIP),cardDetSubValidity()),cardNumberIP_Prev=$("#microport-card-login #card_no").val()});var creditCardValidateMicro=window.creditCardValidateMicro=function(value){if(/[^0-9 \-]+/.test(value))return!1;var n,cDigit,nCheck=0,nDigit=0,bEven=!1;if(value=value.replace(/\D/g,""),value.length<13||value.length>19)return!1;for(n=value.length-1;n>=0;n--)cDigit=value.charAt(n),nDigit=parseInt(cDigit,10),bEven&&(nDigit*=2)>9&&(nDigit-=9),nCheck+=nDigit,bEven=!bEven;return nCheck%10===0};$("#microport-card-login #pan").on("keyup blur",function(e){console.log("Inside PAN Validation");var panCard=$("#microport-card-login #pan").val(),fourthChar=$("#microport-card-login #pan").val().charAt(3);panCard=panCard.toUpperCase(),$("#microport-card-login #pan").val(panCard);var format=/[ `!@#$%^&*()_+\-=\[\]{};':"\\|,.<>\/?~]/;format.test(panCard)?($("#microport-card-login #pan").val(""),e.preventDefault()):panCard.length<=10?(!panCard.match(/([A-Za-z]{5}[0-9]{4}[A-Za-z]{1})/)||"P"!==fourthChar&&"p"!==fourthChar?($("#microport-card-login #pan").removeClass("valid"),$("#microport-card-login #pan").addClass("invalid"),$("#microport-card-login #micro-pan-tick").css("display","none"),$("#microport-card-login #micro-pan-cross").css("display","block"),$("#microport-card-login #micro-pan-err").css("display","block"),$("#microport-card-login #micro-pan-err").html("Invalid PAN!")):($("#microport-card-login #pan").removeClass("invalid"),$("#microport-card-login #pan").addClass("valid"),$("#microport-card-login #micro-pan-tick").css("display","block"),$("#microport-card-login #micro-pan-cross").css("display","none"),$("#microport-card-login #micro-pan-err").css("display","none"),$("#microport-card-login #micro-pan-err").html("")),cardDetSubValidity()):panCard.length>10&&(panCard=panCard.slice(0,10),$("#microport-card-login #pan").val(panCard))}),$("#microport-card-login #card_no").on("blur",function(){var thisVal=$("#microport-card-login #card_no").val(),charlength=thisVal.length,firstChar=parseInt(thisVal.charAt(0)),secondChar=parseInt(thisVal.charAt(1));if(3==firstChar&&5!==secondChar&&15==charlength){var formattedCardNumber=thisVal.replace(/(\d{4})(\d{6})(\d{5})/,"$1-$2-$3");$(this).val(formattedCardNumber),17==formattedCardNumber.length?formatAndVerifyAmexMicro(formattedCardNumber):setMicroCardStyleError()}else if(3===firstChar&&5===secondChar){var formattedCardNumber=thisVal.replace(/(\d{4})(\d{4})(\d{4})(\d{4})/,"$1-$2-$3-$4");$(this).val(formattedCardNumber),19===formattedCardNumber.length?formatAndVerifyNonAmexMicro(formattedCardNumber):setMicroCardStyleError()}else if(16==charlength&&3!=firstChar){var formattedCardNumber=thisVal.replace(/(\d{4})(\d{4})(\d{4})(\d{4})/,"$1-$2-$3-$4");$(this).val(formattedCardNumber),19==formattedCardNumber.length?formatAndVerifyNonAmexMicro(formattedCardNumber):setMicroCardStyleError()}else setMicroCardStyleError();cardDetSubValidity()}),$("#microport-mobile-login #micro_mobile_no").on("keydown",function(e){8==e.keyCode&&$("#micro_mobile_no").is(":focus")&&$("#micro_mobile_no").val().length<5&&e.preventDefault()}),$("#microport-card-login #micro-card-label").on("click",function(){$(".input-field #micro-card-label").addClass("active"),$("#microport-card-login #card_no").focus()}),$("#microport-card-login #micro-pan-label").on("click",function(){$(".input-field #micro-pan-label").addClass("active"),$("#microport-card-login #pan").focus()}),$(document).ready(function(){var invalidErrTxt=$("#micro-submit-error span").html(),errorTxt=$("#micro-submit-ajaxerror #micro-ajaxerror").html();""==invalidErrTxt||null==invalidErrTxt||"null"==invalidErrTxt||""==errorTxt||null==errorTxt||"null"==errorTxt?(console.log("success text"),$("#microCardSubmitBtn").addClass("add-disable"),$("#microCardSubmitBtnEnter").addClass("disable-btn")):(console.log("failure text"),$("#microCardSubmitBtn").removeClass("add-disable"),$("#microCardSubmitBtnEnter").removeClass("disable-btn"))});var ifSubmitted=sessionStorage.getItem("ifSubmitted"),type=sessionStorage.getItem("type"),loaderHtml="",endSessionExist="",endSessionExistMob="";$(window).on("load",function(){loaderHtml='<div class="overlay-loader"></div>';var attemptOver=$("#attemptOver").val();"true"===attemptOver&&($("#login-mob-submit").addClass("add-disable"),$("#login-mob-submit .blue-btn").addClass("disable-btn"),$(".view-mobile-login #otp").attr("disabled",!0),$("#mob-otp-section .resend-otp").css("cursor","not-allowed"),$(".resend-otp #login-mob-resend-otp").css("pointer-events","none"),$(".resend-otp #login-mob-resend-otp").css("color","gray")),sessionStorage.removeItem("type"),sessionStorage.removeItem("ifSubmitted")});var resendOTPCountMob=0,creditCardValidateMicro=window.creditCardValidateMicro=function(value){if(/[^0-9 \-]+/.test(value))return!1;var n,cDigit,nCheck=0,nDigit=0,bEven=!1;if(value=value.replace(/\D/g,""),value.length<13||value.length>19)return!1;for(n=value.length-1;n>=0;n--)cDigit=value.charAt(n),nDigit=parseInt(cDigit,10),bEven&&(nDigit*=2)>9&&(nDigit-=9),nCheck+=nDigit,bEven=!bEven;return nCheck%10===0},creditCardValidateRetail=window.creditCardValidateRetail=function(value){if(/[^0-9 \-]+/.test(value))return!1;var n,cDigit,nCheck=0,nDigit=0,bEven=!1;if(value=value.replace(/\D/g,""),value.length<13||value.length>19)return!1;for(n=value.length-1;n>=0;n--)cDigit=value.charAt(n),nDigit=parseInt(cDigit,10),bEven&&(nDigit*=2)>9&&(nDigit-=9),nCheck+=nDigit,bEven=!bEven;return nCheck%10===0},cardNumberIP_Prev=0,isValidCard=!1;$("#card-login #card_no").on("keydown",function(e){var kc=e.which||e.keyCode;return"189"==kc?void e.preventDefault():void 0}),$("#mobile-login #moblogin").keydown(function(){var oldvalue=$(this).val(),field=this;setTimeout(function(){0!==field.value.indexOf("+91-")&&$(field).val(oldvalue)},1)}),$("#card-login #login-card-label").on("click",function(){$(".input-field #login-card-label").addClass("active"),$("#card-login #card_no").focus()});var resendOTPCount=0,status_code="",dobotpFlag=!1;$(document).ready(function(){var loginPaynetJourneyFlag=$("#loginPaynetJourneyFlag").val();1==loginPaynetJourneyFlag||"true"==loginPaynetJourneyFlag?$("#ImageAboveFooterOnLoginPage").addClass("img-illustrator-mob-none-paynet"):$("#ImageAboveFooterOnLoginPage").removeClass("img-illustrator-mob-none-paynet");var payneSbiCardFAQFlag=$("#payneSbiCardFAQFlag").val();"false"==payneSbiCardFAQFlag||0==payneSbiCardFAQFlag?$(".login-page .ft-paynet-header").addClass("tata-ft-paynet-header"):$(".login-page .ft-paynet-header").removeClass("tata-ft-paynet-header");var captchaBase64String=$("#captchaSrcOnload").val();$("#mobile-captcha-show-img, #user-captcha-show-img, #card-captcha-show-img").attr("src","data:image/jpeg;base64,"+captchaBase64String),status_code=$("#status_code").val();var fetch_mobNumber=$("#fetch_mobNumber").val(),fetch_primaryCardNumber=$("#fetch_primaryCardNumber").val(),fetch_cardNumber=$("#fetch-cardNumber").val(),fetch_cardDob=$("#fetch-card-dob").val();fetch_cardNumber=fetch_cardNumber?decryptCardNumber(fetch_cardNumber):"",$("#card-login #card-dob").val(fetch_cardDob);var loginStrategy=$("#loginStrategy").val(),passwordValue=$("#password_received").val();endSessionExistMob=window.location.href.indexOf("endSessionMob=true")>-1,endSessionExist=window.location.href.indexOf("endSession=true")>-1,(endSessionExistMob||endSessionExist)&&($("#login-submit-ajaxerror").css("display","block"),$("#login-submit-ajaxerror #login-ajaxerror").empty(),$("#login-submit-ajaxerror #login-ajaxerror").append("Page was left idle for some time. Please try login again")),passwordValue?($("#user-login #password").val(""),$("#user-login #encryped_password").val(""),$("#user-login #encryped_password").val(encryptData(passwordValue)),$("#user-login #password").val("XXXXXXXXXXXXXXXX"),"110"==status_code||"102"==status_code?($("#user-login #user_id").css("pointer-events","none"),$("#user-login #user_id").prop("readonly",!0),$("#user-login #login-user-label").addClass("active"),$("#user-login #user_id").addClass("valid"),$("#user-login #password").css("pointer-events","none"),$("#user-login #password").prop("readonly",!0),$("#user-login #login-password-label").addClass("active"),$("#user-login #password").addClass("valid"),$("#user-login #userid-login-password-section").css("display","block"),$("#user-login #userid-login-captcha-cross").css("display","none"),$("#user-login #userid_captcha_code_error").css("display","none"),$("#user-login #userid-login-captcha-section").css("display","none"),$(".view-user-login #userid-login-proceed-button-section").css("display","none"),$(".view-user-login #userid-generate-otp-button-section").css("display","none"),$("#user-login #userid-login-select-image-section").css("display","none"),$("#user-login #UserTillGenOtpVirtualKeybd").css("display","none"),$(".view-user-login #userid-otp-section").css("display","block"),$("#user-login #userid-otp").val(""),$(".input-field #login-userid-otp-label").removeClass("active"),$("#user-login #userid-otp").addClass("invalid"),$("#user-login #login-userid-otp-cross").css("display","block")):"103"==status_code?resetUserPassSection():("005"==status_code,resetUserPassSection())):resetUserPassSection(),fetch_mobNumber?"017"==status_code||"018"==status_code||"019"==status_code||"016"==status_code?$("#mobile-login #moblogin").val("+91-"+fetch_mobNumber):"005"===status_code&&($("#mob-otp-section").css("display","none"),$("#mob-multi-section").addClass("hidden-mob-details"),$("#mobile-login #proceedMobLoginBtn").css("display","block"),$(".view-mobile-login #moblogin").val("+91-"),$(".view-mobile-login #pin").val("")):resetMobileSection(),fetch_primaryCardNumber&&("017"==status_code||"018"==status_code||"019"==status_code)&&$("#mob-multi-section #mob-primaryCard").val(fetch_primaryCardNumber),fetch_primaryCardNumber?("017"==status_code||"018"==status_code||"019"==status_code)&&($("#mobile-login #mob-otp-section").css("display","block"),$("#mobile-login #mobile-pin-section").css("display","block"),$("#mobile-login #mob-multi-section").removeClass("hidden-mob-details"),$(".view-mobile-login #corporateVerbiageSection").css("display","none"),$("#mobile-login #moblogin").css("pointer-events","none"),$("#mobile-login #mob-primaryCard").css("pointer-events","none"),$("#mobile-login #pin").css("pointer-events","none"),$(".input-field #login-primaryCard-label").addClass("active"),$(".input-field #login-pin-label").addClass("active"),$("#mobile-login #moblogin").addClass("valid"),$("#mobile-login #mob-primaryCard").addClass("valid"),$("#mobile-login #pin").addClass("valid"),$("#mobile-login #mobile-login-captcha-section").css("display","none"),$("#mobile-login #proceedMobLoginBtn").css("display","none"),$("#mobile-login #proceedMultiAccountMobLoginBtn").css("display","none"),$("#mobile-login #generate-otp-multi-mobile").css("display","none"),$("#mobile-login #mobile-login-select-image-section").css("display","none"),$("#mobile-login #mobileVirtualKeyboardTillGenOTP").css("display","none"),$(".input-field #login-otp-label").removeClass("active"),$("#mobile-login #otp").addClass("invalid"),$("#mobile-login #login-otp-cross").css("display","block")):("017"==status_code||"018"==status_code||"019"==status_code)&&($("#mobile-login #mob-otp-section").css("display","block"),$("#mobile-login #mobile-pin-section").css("display","block"),$(".view-mobile-login #proceedMobLoginBtn").css("display","none"),$(".view-mobile-login #corporateVerbiageSection").css("display","none"),$("#mobile-login #moblogin").css("pointer-events","none"),$("#mobile-login #pin").css("pointer-events","none"),$(".input-field #login-pin-label").addClass("active"),$("#mobile-login #moblogin").addClass("valid"),$("#mobile-login #pin").addClass("valid"),$("#mobile-login #mobile-login-captcha-section").css("display","none"),$("#mobile-login #proceedMobLoginBtn").css("display","none"),$("#mobile-login #proceedMultiAccountMobLoginBtn").css("display","none"),$("#mobile-login #generate-otp-multi-mobile").css("display","none"),$("#mobile-login #mobile-login-select-image-section").css("display","none"),$("#mobile-login #mobileVirtualKeyboardTillGenOTP").css("display","none"),$(".input-field #login-otp-label").removeClass("active"),$("#mobile-login #otp").addClass("invalid"),$("#mobile-login #login-otp-cross").css("display","block")),"016"==status_code&&(resetMobileSection(),$(".view-mobile-login #moblogin").val("+91-"),$(".view-mobile-login #pin").val(""),$(".view-mobile-login #proceedMobLoginBtn").css("pointer-events","none"),$("#moblogin").css("pointer-events","auto")),fetch_cardNumber?"010"==status_code||"011"==status_code||"012"==status_code?formatCardNumber(fetch_cardNumber):("005"===status_code||"007"===status_code||"014"===status_code)&&resetCardSection():resetCardSection(),"010"==status_code||"011"==status_code||"012"==status_code?($("#card-login #login-card-label").addClass("active"),$("#card-login #card-dob-section").css("display","block"),$("#card-login #card-otp-section").css("display","block"),$(".view-card-login #loginCardSubmitBtn").css("display","none"),$(".input-field #login-dob-label").addClass("active"),$("#card-login #card_no").addClass("valid"),$("#card-login #card-dob").addClass("valid"),$("#card-login #login-dob-cross").css("display","none"),$("#card_no, #card-dob").css("pointer-events","none"),$("#card-login #login-calendar").css("pointer-events","none"),$("#card-login #card-login-proceed-button-section").css("display","none"),$("#card-login #cardVirtualKeyboardTillGenOTP").css("display","none"),$("#card-login #card-login-captcha-section").css("display","none"),$("#card-login #card-login-select-image-section").css("display","none"),$(".input-field #login-card-otp-label").removeClass("active"),$("#card-login #card-otp").addClass("invalid"),$("#card-login #login-card-otp-cross").css("display","block")):"014"==status_code&&resetCardSection(),"LOGIN_STRATEGY_CARD_AND_DOB"==loginStrategy?($("#selectCardSection").addClass("active"),$("#selectUserSection").removeClass("active"),$("#selectMobileSection").removeClass("active"),$("#card-login").css("display","block"),$("#mobile-login").css("display","none"),$("#user-login").css("display","none")):"LOGIN_STRATEGY_USER_AND_PWD"==loginStrategy?($("#selectUserSection").addClass("active"),$("#selectMobileSection").removeClass("active"),$("#selectCardSection").removeClass("active"),$("#user-login").css("display","block"),$("#card-login").css("display","none"),$("#mobile-login").css("display","none")):endSessionExist?($("#selectCardSection").addClass("active"),$("#selectUserSection").removeClass("active"),$("#selectMobileSection").removeClass("active"),$("#card-login").css("display","block"),$("#mobile-login").css("display","none"),$("#user-login").css("display","none")):($("#selectMobileSection").addClass("active"),$("#selectCardSection").removeClass("active"),$("#selectUserSection").removeClass("active"),$("#card-login").css("display","none"),$("#user-login").css("display","none"),$("#mobile-login").css("display","block")),$("#mobile-login #pin").focus(function(){validateImageCheckboxcheckedOrNot("mobilelogin")}),$("#mobile-login #pin").on("keyup",function(){var data=$("#mobile-login #pin").val();data.length>0&&(4===data.length?($("#mobile-login #login-pin-cross").css("display","none"),$("#mobile-login #pin").removeClass("invalid")):($("#mobile-login #login-pin-cross").css("display","block"),$("#mobile-login #pin").removeClass("invalid")))}),$("#mobile-login #pin").bind("cut copy paste",function(e){e.preventDefault()}),$("#mob-otp-section #otp").focus(function(){var data=$("#mob-otp-section #otp").val();$(".input-field #login-otp-label").addClass("active"),$("#mobile-login #otp").removeClass("invalid"),$("#mobile-login #login-otp-cross").css("display","none"),data.length>0&&(6===data.length?$("#mobile-login #login-otp-cross").css("display","none"):$("#mobile-login #login-otp-cross").css("display","block"))}),$("#mob-otp-section #otp").on("keyup",function(){var data=$("#mob-otp-section #otp").val();data.length>0?6===data.length?($("#mobile-login #login-otp-cross").css("display","none"),$("#mobile-login #otp").addClass("valid")):($("#mobile-login #login-otp-cross").css("display","block"),$("#mobile-login #otp").removeClass("valid")):$("#mobile-login #otp").removeClass("valid")}),$("#mob-otp-section #otp").bind("cut copy paste",function(e){e.preventDefault()}),$("#user-login #password").bind("cut copy paste",function(e){e.preventDefault()}),$("#user-login #user_id").focus(function(){$(".input-field #login-user-label").addClass("active")}),$("#user-login #password").focus(function(){validateImageCheckboxcheckedOrNot("userlogin")}),$("#mobile-login #mobile_captcha_input").focus(function(){$(".input-field #login-mobile-captcha-label").addClass("active")}),$("#user-login #captcha_input").focus(function(){$(".input-field #login-user-captcha-label").addClass("active")}),$("#user-login #userid-otp").focus(function(){$(".input-field #login-userid-otp-label").addClass("active")}),$("#card-login #card_captcha_input").focus(function(){$(".input-field #login-card-captcha-label").addClass("active")}),$("#userid-otp-section #userid-otp").focus(function(){var userOtp=$("#userid-otp-section #userid-otp").val();$(".input-field #login-userid-otp-label").addClass("active"),$("#user-login #userid-otp").removeClass("invalid"),$("#user-login #login-userid-otp-cross").css("display","none"),userOtp.length>0&&(6===userOtp.length?$("#user-login #login-userid-otp-cross").css("display","none"):$("#user-login #login-userid-otp-cross").css("display","block"))}),$("#userid-otp-section #userid-otp").on("keyup",function(){var userOtp=$("#userid-otp-section #userid-otp").val();userOtp.length>0?6===userOtp.length?($("#user-login #login-userid-otp-cross").css("display","none"),$("#user-login #userid-otp").addClass("valid")):($("#user-login #login-userid-otp-cross").css("display","block"),$("#user-login #userid-otp").removeClass("valid")):$("#user-login #userid-otp").removeClass("valid")}),$("#userid-otp-section #userid-otp").blur(function(){var userOtp=$("#userid-otp-section #userid-otp").val();userOtp?userOtp.length<6&&($("#user-login #userid-otp").addClass("invalid"),$("#user-login #login-userid-otp-cross").css("display","block")):($(".input-field #login-otp-label").removeClass("active"),$("#user-login #userid-otp").addClass("invalid"),$("#user-login #login-userid-otp-cross").css("display","block"))}),$("#userid-otp-section #userid-otp").bind("cut copy paste",function(e){e.preventDefault()}),$("#card-login #card_no").focus(function(){removeErrorcardNum(),$(".input-field #login-card-label").addClass("active"),$(".view-card-login #card_no").removeClass("invalid")}),$("#card-login #card-dob").focus(function(){$("#card-login #card-dob").removeClass("invalid"),$("#card-login #card_calendar_error").css("display","none"),$("#card-login #login-dob-cross").css("display","none")}),$("#card-otp-section #card-otp").focus(function(){var data=$("#card-otp-section #card-otp").val();$(".input-field #login-card-otp-label").addClass("active"),$("#card-login #card-otp").removeClass("invalid"),$("#card-login #login-card-otp-cross").css("display","none"),data.length>0&&(6===data.length?$("#card-login #login-card-otp-cross").css("display","none"):$("#card-login #login-card-otp-cross").css("display","block"))}),$("#card-otp-section #card-otp").on("keyup",function(){var data=$("#card-otp-section #card-otp").val();data.length>0&&(6===data.length?($("#card-login #login-card-otp-cross").css("display","none"),$("#card-login #card-otp").addClass("valid")):($("#card-login #login-card-otp-cross").css("display","block"),$("#card-login #card-otp").removeClass("valid")))}),$("#card-otp-section #card-otp").bind("cut copy paste",function(e){e.preventDefault()}),$("#mob-multi-section #mob-primaryCard").focus(function(){var data=$("#mob-multi-section #mob-primaryCard").val();$(".input-field #login-primaryCard-label").addClass("active"),$("#mobile-login #mob-primaryCard").removeClass("invalid"),$("#mobile-login #login-primarycard-cross").css("display","none"),$("#mobile-login #login-primarycard-err").css("display","none"),data.length>0&&(4===data.length?$("#mobile-login #login-primarycard-cross").css("display","none"):$("#mobile-login #login-primarycard-cross").css("display","block"))}),$("#mob-multi-section #mob-primaryCard").on("keyup",function(){var data=$("#mob-multi-section #mob-primaryCard").val();data.length>0&&(4===data.length?($("#mobile-login #login-primarycard-cross").css("display","none"),$("#mobile-login #mob-primaryCard").addClass("valid")):($("#mobile-login #login-primarycard-cross").css("display","block"),$("#mobile-login #mob-primaryCard").removeClass("valid")))}),$("#mobile-login #moblogin").focus(function(){$("#mobile-login #moblogin").removeClass("invalid"),$(".view-mobile-login #login-mob-cross").css("display","none"),$("#mobile-login #login-mob-err").css("display","none")}),$("#mobile-login #moblogin").blur(function(){var data=$("#mobile-login #moblogin").val();data=data.substring(data.lastIndexOf("-")+1).trim(),data.length>0&&!data.match(/^[6-9][0-9]{9}$/)?($("#mobile-login #moblogin").addClass("invalid"),$(".view-mobile-login #login-mob-cross").css("display","block"),$("#mobile-login #login-mob-err").html("Incorrect mobile number!"),$("#mobile-login #login-mob-err").css("display","block")):data.length>0&&data.match(/^[6-9][0-9]{9}$/)&&($("#mobile-login #moblogin").removeClass("invalid"),$(".view-mobile-login #login-mob-cross").css("display","none"),$("#mobile-login #login-mob-err").css("display","none"),data.length>9&&$("#mobile-login #moblogin").addClass("valid"))}),$("#mobile-login #pin").blur(function(){var data=$("#mobile-login #pin").val();$("#mobileSelectImageId").is(":visible")?document.getElementById("auth_img_txt_mobile").checked&&(data?data.length<4?$("#mobile-login #pin").addClass("invalid"):4===data.length&&($("#mobile-login #login-pin-cross").css("display","none"),$("#mobile-login #pin").removeClass("invalid"),$("#mobile-login #pin").addClass("valid")):($(".input-field #login-pin-label").removeClass("active"),$("#mobile-login #pin").addClass("invalid"))):data?data.length<4?($("#mobile-login #pin").addClass("invalid"),$("#mobile-login #login-pin-cross").css("display","block")):4===data.length&&($("#mobile-login #login-pin-cross").css("display","none"),$("#mobile-login #pin").removeClass("invalid"),$("#mobile-login #pin").addClass("valid")):($(".input-field #login-pin-label").removeClass("active"),$("#mobile-login #pin").addClass("invalid"),$("#mobile-login #login-pin-cross").css("display","block"))}),$("#mob-otp-section #otp").blur(function(){var data=$("#mob-otp-section #otp").val();data?data.length<6?($("#mobile-login #otp").addClass("invalid"),$("#mobile-login #login-otp-cross").css("display","block")):6===data.length&&($("#mobile-login #otp").removeClass("invalid"),$("#mobile-login #login-otp-cross").css("display","none"),$("#mobile-login #otp").addClass("valid")):($(".input-field #login-otp-label").removeClass("active"),$("#mobile-login #otp").addClass("invalid"),$("#mobile-login #login-otp-cross").css("display","block"))}),$("#card-otp-section #card-otp").blur(function(){var data=$("#card-otp-section #card-otp").val();data?data.length<6?($("#card-login #card-otp").addClass("invalid"),$("#card-login #login-card-otp-cross").css("display","block")):6===data.length&&($("#card-login #card-otp").removeClass("invalid"),$("#card-login #login-card-otp-cross").css("display","none"),$("#card-login #card-otp").addClass("valid")):($(".input-field #login-card-otp-label").removeClass("active"),$("#card-login #card-otp").addClass("invalid"),$("#card-login #login-card-otp-cross").css("display","block"))}),$("#card-login #card-dob").blur(function(){var dob=$("#card-login #card-dob").val();dob&&($(".input-field #login-dob-label").addClass("active"),$("#card-login #card-dob").removeClass("invalid"),$("#card-login #card_calendar_error").css("display","none"),$("#card-login #login-dob-cross").css("display","none"))}),$("#card-login #card_captcha_input").blur(function(){var data=$("#card-login #card_captcha_input").val();data?$("#card-login #card_captcha_input").addClass("valid"):($(".input-field #login-card-captcha-label").removeClass("active"),$("#card-login #card_captcha_input").removeClass("valid"))}),$("#user-login #user_id").blur(function(){var data=$("#user-login #user_id").val();data?$("#user-login #user_id").addClass("valid"):($(".input-field #login-user-label").removeClass("active"),$("#user-login #user_id").removeClass("valid"))}),$("#user-login #password").blur(function(){var data=$("#user-login #password").val();data?$("#user-login #password").addClass("valid"):($(".input-field #login-password-label").removeClass("active"),$("#user-login #password").removeClass("valid"))}),$("#user-login #captcha_input").blur(function(){var data=$("#user-login #captcha_input").val();data?$("#user-login #captcha_input").addClass("valid"):($(".input-field #login-user-captcha-label").removeClass("active"),$("#user-login #captcha_input").removeClass("valid"))}),$("#user-login #userid-otp").blur(function(){var data=$("#user-login #userid-otp").val();data?$("#user-login #userid-otp").addClass("valid"):($(".input-field #login-userid-otp-label").removeClass("active"),$("#user-login #userid-otp").removeClass("valid"))}),$("#mobile-login #mobile_captcha_input").blur(function(){var data=$("#mobile-login #mobile_captcha_input").val();
data?$("#mobile-login #mobile_captcha_input").addClass("valid"):($(".input-field #login-mobile-captcha-label").removeClass("active"),$("#mobile-login #mobile_captcha_input").removeClass("valid"))}),$("#mob-multi-section #mob-primaryCard").blur(function(){var data=$("#mob-multi-section #mob-primaryCard").val();data?data.length<4?($("#mobile-login #mob-primaryCard").addClass("invalid"),$("#mobile-login #login-primarycard-cross").css("display","block"),$("#mobile-login #login-primarycard-err").html("Invalid card number!"),$("#mobile-login #login-primarycard-err").css("display","block")):4===data.length&&$("#mobile-login #mob-primaryCard").addClass("valid"):($(".input-field #login-primaryCard-label").removeClass("active"),$("#mobile-login #mob-primaryCard").addClass("invalid"),$("#mobile-login #login-primarycard-cross").css("display","block"),$("#mobile-login #login-primarycard-err").html("Invalid card number!"),$("#mobile-login #login-primarycard-err").css("display","block"))}),$("#card-login #card_no").on("keyup",function(e){var cardNumberIP=$("#card-login #card_no").val().trim(),firstDigit=cardNumberIP.charAt(0),secondDigit=cardNumberIP.charAt(1),kc=e.which||e.keyCode;("8"==kc||"46"==kc)&&($("#card-login #card_no").removeClass("valid"),$(".view-card-login #card_no").removeClass("invalid"),$("#card-login #login-card-err").css("display","none"),$("#card-login #login-card-cross").css("display","none"));var diffLength=(String.fromCharCode(kc),cardNumberIP_Prev.length-cardNumberIP.length),formatSpd=/[ `!@#$%^&*()_+\-=\[\]{};':"\\|,.<>\/?~]/,formatSp=/[ `!@#$%^&*()_+\=\[\]{};':"\\|,.<>\/?~]/,formatAl=/^[A-Za-z]+$/;formatSp.test(cardNumberIP)||formatAl.test(cardNumberIP)?(cardNumberIP="",$("#card-login #card_no").val(""),e.preventDefault()):(15!=cardNumberIP.length&&16!=cardNumberIP.length||formatSpd.test(cardNumberIP)?cardNumberIP.length>16&&!formatSpd.test(cardNumberIP)&&(cardNumberIP=3==firstDigit&&7==secondDigit?cardNumberIP.slice(0,15):cardNumberIP.slice(0,16),$("#card-login #card_no").val(cardNumberIP)):(formatCardNum(),cardNumberIP=$("#card-login #card_no").val()),3==firstDigit&&7==secondDigit&&1!=diffLength&&2!=diffLength&&35!=kc&&36!=kc&&37!=kc&&39!=kc?($("#card-login #card_no").attr("maxlength","17"),formatAndVerifyAmexLogin(cardNumberIP),cardNumberIP.length<17&&$("#card-login #login-card-cross").css("display","block")):(3!=firstDigit||3==firstDigit&&7!=secondDigit)&&1!=diffLength&&2!=diffLength&&35!=kc&&36!=kc&&37!=kc&&39!=kc?($("#card-login #card_no").attr("maxlength","19"),formatAndVerifyNonAmexLogin(cardNumberIP),cardNumberIP.length<19&&$("#card-login #login-card-cross").css("display","block")):3!=firstDigit||3==firstDigit&&7!=secondDigit?(formatNonAmexWhileDeleteLogin(cardNumberIP),cardNumberIP.length<19&&$("#card-login #login-card-cross").css("display","block")):3==firstDigit&&7==secondDigit&&(formatAmexWhileDeleteLogin(cardNumberIP),cardNumberIP.length<17&&$("#card-login #login-card-cross").css("display","block")),cardSubValidity()),cardNumberIP_Prev=$("#card-login #card_no").val()}),$("#card-login #card_no").on("blur",function(){$("#card-login #card_no").hasClass("invalid")||$("#card-login #card_no").css("border-buttom","1px solid #9e9e9e");var cardNumberIP=$("#card-login #card_no").val().trim(),firstDigit=cardNumberIP.charAt(0),secondDigit=cardNumberIP.charAt(1),len=cardNumberIP.length;0===len&&$("#card-login #login-card-label").removeClass("active"),-1==cardNumberIP.indexOf("-")&&(3==firstDigit&&7==secondDigit&&cardNumberIP.length>15?cardNumberIP=cardNumberIP.slice(0,15):cardNumberIP.length>16&&(cardNumberIP=cardNumberIP.slice(0,16)),$("#card-login #card_no").val(cardNumberIP)),cardNumberIP&&(formatCardNum(),validateCardNumbersNew(cardNumberIP)),cardSubValidity()}),jQuery.fn.ForceNumericOnly=function(){return this.each(function(){$(this).keydown(function(e){var key=e.charCode||e.keyCode||0;return 8==key||9==key||13==key||46==key||110==key||190==key||key>=35&&40>=key||key>=48&&57>=key||key>=96&&105>=key})})},$(".view-mobile-login #moblogin,#pin,#otp,#card-otp,#userid-otp").ForceNumericOnly(),$(".view-mobile-login #mobile-login input#pin,.view-mobile-login #mob-otp-section input#otp,.view-card-login #card-otp-section input#card-otp, .view-user-login #userid-otp-section input#userid-otp").focus(function(){$("#virtualkeyboard").is(":visible")?($(".keyboard .char,.keyboard .space,.keyboard .capslock").addClass("disabled"),$(".keyboard .numbers .mob").removeClass("disabled")):($(".keyboard .char,.keyboard .space,.keyboard .capslock").removeClass("disabled"),$(".keyboard .numbers .mob").removeClass("disabled"))}),document.addEventListener("keydown",function(e){var kc=e.which||e.keyCode;"13"==kc&&(e.preventDefault(),$("#selectMobileSection").hasClass("active")?(mobileCaptchaSectionHidden="block"==$("#mobile-login #mobile-login-captcha-section").css("display"),pinSectionHidden="none"==$("#mobile-pin-section").css("display"),otpSectionHidden="none"==$("#mob-otp-section").css("display"),multiSectionHidden=$("#mob-multi-section").hasClass("hidden-mob-details"),otpSectionHidden&&multiSectionHidden&&pinSectionHidden?mobileCaptchaSectionHidden?$("#mobile-login #loginGenOtpMob").hasClass("disable-btn")||($("#loginGenOtpMob").click(),$("#mobile-login #moblogin").blur()):$("#mobile-login #loginGenOtpMob").hasClass("disable-btn")||($("#loginGenOtpMob").click(),$("#mobile-login #moblogin").blur()):otpSectionHidden&&pinSectionHidden&&!multiSectionHidden?$("#mobile-login #proceedMultiAccountMobBtn").hasClass("disable-btn")||($("#proceedMultiAccountMobBtn").click(),$("#mobile-login #mob-primaryCard").blur()):otpSectionHidden&&!pinSectionHidden?$("#mobile-login #loginMultiSubmitBtn").hasClass("disable-btn")||($("#loginMultiSubmitBtn").click(),$("#mobile-login #pin").blur()):(!otpSectionHidden&&!multiSectionHidden||!otpSectionHidden&&multiSectionHidden)&&($("#mobile-login #loginMobileSubmitBtn").hasClass("disable-btn")||$("#loginMobileSubmitBtn").click())):$("#selectUserSection").hasClass("active")?(userCaptchaSectionHidden="none"==$("#user-login #userid-login-captcha-section").css("display"),userPasswordSectionHidden="none"==$("#user-login #userid-login-password-section").css("display"),userOtpSectionHidden="none"==$("#user-login #userid-otp-section").css("display"),userOtpSectionHidden&&userPasswordSectionHidden?userCaptchaSectionHidden?$("#user-login #loginProceedBtnUser").hasClass("disable-btn")||($("#loginProceedBtnUser").click(),$("#user-login #user_id").blur()):$("#user-login #loginProceedBtnUser").hasClass("disable-btn")||($("#loginProceedBtnUser").click(),$("#user-login #user_id").blur()):userOtpSectionHidden&&!userPasswordSectionHidden?$("#user-login #loginGenOtpBtnUser").hasClass("disable-btn")||($("#loginGenOtpBtnUser").click(),$("#user-login #password").blur()):userOtpSectionHidden||userPasswordSectionHidden||$("#user-login #loginUserSubmitBtnEnter").hasClass("disable-btn")||$("#loginUserSubmitBtnEnter").click()):$("#selectCardSection").hasClass("active")&&(cardCaptchaSectionHidden="none"==$("#card-login #card-login-captcha-section").css("display"),cardDOBSectionHidden="none"==$("#card-login #card-dob-section").css("display"),cardOtpSectionHidden="none"==$("#card-login #card-otp-section").css("display"),cardOtpSectionHidden&&cardDOBSectionHidden?cardCaptchaSectionHidden?$("#card-login #loginProceedBtnCard").hasClass("disable-btn")||($("#loginProceedBtnCard").click(),$("#card-login #card_no").blur()):$("#card-login #loginProceedBtnCard").hasClass("disable-btn")||($("#loginProceedBtnCard").click(),$("#card-login #card_no").blur()):cardOtpSectionHidden&&!cardDOBSectionHidden?$("#card-login #loginGenOtpCard").hasClass("disable-btn")||($("#loginGenOtpCard").click(),$("#card-login #card_no").blur()):cardOtpSectionHidden||cardDOBSectionHidden||$("#card-login #loginCardSubmitBtnEnter").hasClass("disable-btn")||$("#loginCardSubmitBtnEnter").click()))}),$("#login-calendar").click(function(){$("#card-login .datepicker input#card-dob").click()}),$("#dummy-login-calendar").click(function(){validateImageCheckboxcheckedOrNot("cardlogin")});var date=new Date,currentyear=date.getFullYear();document.getElementById("year").innerHTML=currentyear,$("#cancelFraudLoginButton, #fraudCloseButton").on("click",function(){$("#fraud-otp").css("border",".8px solid #ddd"),event.preventDefault(),AddOverlayLoader(),window.location.href=document.URL.indexOf("/app")>0?"/creditcards/app/user/loggedout":"/creditcards/b2b/user/loggedout"}),$("body").on("click",".info-text .forget-password",function(){var $text=$(".login-reset-password.forget-password").text();trk_event_set("None"),""!=$text&&setAnalytics(analyticsObj.login_loginintent,$text,"login"),window.location.href="/creditcards/app/user/forgotpassword-page"}),$("body").on("click",".info-text .first-time-user",function(){var $text1=$(".login-reset-password.first-time-user").text();trk_event_set("None"),""!=$text1&&setAnalytics(analyticsObj.login_loginintent,$text1,"login"),window.location.href="/creditcards/app/user/register-page"}),$("body").on("click",".info-text .unlock-account",function(){var $text2=$(".login-reset-password.first-time-user").text();trk_event_set("None"),""!=$text2&&setAnalytics(analyticsObj.login_loginintent,$text2,"login"),window.location.href="/creditcards/app/user/unlock-page"})}),dragElement(document.getElementById("virtualkeyboard")),$(function(){function tab(){var $inputs=$("textarea,input"),currIndex=parseInt($(lastFocus).attr("tabIndex")),highestIndex=-1,selected=!1;$inputs.each(function(){var index=parseInt($(this).attr("tabIndex"));index>highestIndex&&(highestIndex=index),index===currIndex+1&&($(this).focus(),selected=!0)}),selected||currIndex!==highestIndex||$inputs.each(function(){var index=parseInt($(this).attr("tabIndex"));1===index&&$(this).focus()})}function backspace(){var orig=$(lastFocus).val(),updated=orig.substring(0,selStart-1)+orig.substring(selEnd,orig.length);$(lastFocus).val(updated),selEnd=--selStart,$(lastFocus).focus(),lastFocus.selectionStart=selStart,lastFocus.selectionEnd=selEnd}function sendChar(char){var orig=$(lastFocus).val(),updated=orig.substring(0,selStart)+char+orig.substring(selEnd,orig.length);$(lastFocus)[0].maxLength>0?updated.length<=$(lastFocus)[0].maxLength&&$(lastFocus).val(updated):$(lastFocus).val(updated),selEnd=++selStart,$(lastFocus).focus(),lastFocus.selectionStart=selStart,lastFocus.selectionEnd=selEnd}function openKeyboard(){$("#virtualkeyboard").show(),document.onkeydown=function(){return!1}}function closeKeyboard(){$("#virtualkeyboard").hide(),document.onkeydown=function(){return!0}}{var $caps=$(".capslock");$(".char")}$caps.click(function(){$caps.hasClass("on")?($(".char,.capslock").each(function(){$(this).text($(this).text().toLowerCase()),$("#one").text(";"),$("#two").text("`"),$("#three").text("'"),$("#four").text("["),$("#five").text("]"),$("#six").text(","),$("#seven").text("."),$("#eight").text("/"),$("#nine").text("-"),$("#ten").text("="),$("#eleven").html("&#92;").text()}),$caps.removeClass("on")):($(".char,.capslock").each(function(){$(this).text($(this).text().toUpperCase()),$("#one").text(":"),$("#two").text("~"),$("#three").html("&#34;").text(),$("#four").text("{"),$("#five").text("}"),$("#six").text("<"),$("#seven").text(">"),$("#eight").text("?"),$("#nine").text("_"),$("#ten").text("+"),$("#eleven").text("|")}),$caps.addClass("on"))}),$("li").click(function(){var t=this;$(this).addClass("touch"),setTimeout(function(){$(t).removeClass("touch")},100)});var lastFocus;$("textarea,input").on("focus",function(){$("textarea,input").removeClass("focus"),$(this).addClass("focus")}),$("textarea,input").on("blur",function(){lastFocus=this,selStart=this.selectionStart,selEnd=this.selectionEnd}),$(".char").click(function(){var char=$(this).text();sendChar(char)}),$(".return").click(function(){sendChar("\n")}),$(".space").click(function(){sendChar(" ")}),$(".backspace").click(function(){backspace()}),$(".tab").click(function(){tab()}),$(".virtualkey.card .switch-div .switch input, .virtualkey.user .switch-div .switch input, .virtualkey.mob .switch-div .switch input").click(function(){var isChecked=$(this).prop("checked");isChecked?openKeyboard():closeKeyboard()}),$(".closeKeyboard").click(function(){closeKeyboard(),$(".switch-div .switch input[type=checkbox]").prop("checked",!1)}),$(".login-tabs li").click(function(){closeKeyboard(),$(".switch-div .switch input[type=checkbox]").prop("checked",!1)}),$("#virtualkeyboard .keyboard li, #virtualkeyboard .keyboard .numbers li.mob, #virtualkeyboard .keyboard .numbers li.card").click(function(){if($("#selectMobileSection").hasClass("active")){if(mobileCaptchaSectionHidden="block"==$("#mobile-login #mobile-login-captcha-section").css("display"),pinSectionHidden="none"==$("#mobile-pin-section").css("display"),otpSectionHidden="none"==$("#mob-otp-section").css("display"),multiSectionHidden=$("#mob-multi-section").hasClass("hidden-mob-details"),otpSectionHidden&&multiSectionHidden&&pinSectionHidden)checkMobileLoginBtn(mobileCaptchaSectionHidden?"mobile":"captcha");else if(otpSectionHidden&&pinSectionHidden&&!multiSectionHidden)checkMobileLoginBtn("primaryCard");else if(otpSectionHidden&&!pinSectionHidden){var cardPIN=$("#mobile-login #pin").val();$("#mobile-login #mobile_pin_error").is(":visible")?($("#mobile-login #pin").val(""),$(".input-field #login-pin-label").removeClass("active"),cardPIN=null):cardPIN&&(cardPIN.match(/^([0-9]){1,4}$/)?cardPIN.length>0&&(4===cardPIN.length?($("#mobile-login #login-pin-cross").css("display","none"),$("#mobile-login #pin").removeClass("invalid")):($("#mobile-login #login-pin-cross").css("display","block"),$("#mobile-login #pin").removeClass("invalid"))):($("#mobile-login #pin").val(""),$(".input-field #login-pin-label").removeClass("active"))),checkMobileLoginBtn("pin")}else if(!otpSectionHidden&&!multiSectionHidden||!otpSectionHidden&&multiSectionHidden){var mobOTP=$("#mob-otp-section #otp").val();mobOTP&&6===mobOTP.length?($("#login-mob-submit").removeClass("add-disable"),$("#login-mob-submit .blue-btn").removeClass("disable-btn")):($("#login-mob-submit").addClass("add-disable"),$("#login-mob-submit .blue-btn").addClass("disable-btn"))}}else if($("#selectUserSection").hasClass("active")){if(userCaptchaSectionHidden="none"==$("#user-login #userid-login-captcha-section").css("display"),userPasswordSectionHidden="none"==$("#user-login #userid-login-password-section").css("display"),userOtpSectionHidden="none"==$("#user-login #userid-otp-section").css("display"),userOtpSectionHidden&&userPasswordSectionHidden)checkUserLoginBtn(userCaptchaSectionHidden?"userid":"captcha");else if(userOtpSectionHidden&&!userPasswordSectionHidden)$("#user-login #userid_password_error").is(":visible")&&($("#user-login #password").val(""),$(".input-field #login-password-label").removeClass("active")),checkUserLoginBtn("password");else if(!userOtpSectionHidden&&!userPasswordSectionHidden){var userid=$("#user-login #user_id").val(),password=$("#user-login #password").val(),otp=$("#user-login #userid-otp").val();userid&&password&&6===otp.length?($("#loginUserSubmitBtn").removeClass("add-disable"),$("#loginUserSubmitBtn .blue-btn").removeClass("disable-btn")):($("#loginUserSubmitBtn").addClass("add-disable"),$("#loginUserSubmitBtn .blue-btn").addClass("disable-btn"))}}else if($("#selectCardSection").hasClass("active"))if(cardCaptchaSectionHidden="none"==$("#card-login #card-login-captcha-section").css("display"),cardDOBSectionHidden="none"==$("#card-login #card-dob-section").css("display"),dummyCardDOBSectionHidden="none"==$("#card-login #dummy-card-dob-section").css("display"),cardOtpSectionHidden="none"==$("#card-login #card-otp-section").css("display"),cardOtpSectionHidden&&cardDOBSectionHidden&&dummyCardDOBSectionHidden)checkCardLoginBtn(cardCaptchaSectionHidden?"cardNumber":"captcha");else if(cardOtpSectionHidden&&!cardDOBSectionHidden)$("#card-login #card-dob").val(""),$("#card-login #login-dob-label").removeClass("active");else if(cardOtpSectionHidden&&!dummyCardDOBSectionHidden)$("#card-login #dummy-card-dob").val(""),$("#card-login #dummy-login-dob-label").removeClass("active");else if(!cardOtpSectionHidden&&!cardDOBSectionHidden){var dob=$("#card-login #card-dob").val(),cardOtp=$("#card-login #card-otp").val();dob&&6===cardOtp.length?($("#login-card-submit").removeClass("add-disable"),$("#login-card-submit .blue-btn").removeClass("disable-btn")):($("#login-card-submit").addClass("add-disable"),$("#login-card-submit .blue-btn").addClass("disable-btn"))}})}),$(document).ready(function(){$("#card-login .datepicker input#card-dob").datepicker({dateFormat:"dd-M-yy",changeMonth:!0,changeYear:!0,maxDate:"-18Y",beforeShow:function(el){$(this).data("previous",$(el).val())},onSelect:function(newText){$(this).data("previous")!=newText&&($(".input-field #login-dob-label").addClass("active"),$("#card-login #card-dob").removeClass("invalid"),$("#card-login #card-dob").addClass("valid"),$("#card-login #login-dob-cross").css("display","none"),cardSubValidity())},yearRange:"1900:"+((new Date).getFullYear()-18)}).click(function(){$(this).blur().focus()}),document.getElementById("keyboard")&&document.getElementById("keyboard").focus()});var userResendOTPCount=0;$("a.crossDomain.antiphsing-paynet-disclaimer").on("click",function(e){e.preventDefault(),$("div#disclaimer").css("display","block");var href=$(this).attr("href");$("#disclaimer").attr("data-href",href),openModalPopup("disclaimer")}),$("#disclaimer .button-ok.antiphishing-button-ok").on("click",function(e){e.preventDefault();var url=$(this).parents("div.modal-overlay").attr("data-href");window.open(url,"_blank"),closeModalPopup($(this))}),$("#disclaimer.modal-overlay.open").on("click",function(e){e.preventDefault(),$("#disclaimer.modal-overlay").removeClass("open"),closeModalPopup($(this))}),$("#disclaimer .button-cancel.antiphishing-button-cancel").on("click",function(e){e.preventDefault(),closeModalPopup($(this))}),$("#disclaimer .close-button.antiphishing-close-button").on("click",function(e){e.preventDefault(),closeModalPopup($(this))}),$(document).ready(function(){$(".tab-item").click(function(){$("input[type=radio]").is(":checked")&&($("#first_step_next_button_id").removeClass("gray-btn"),$("#first_step_next_button_id").css("pointer-events","auto"))});var retryAttemptCount=$("#retryAttemptCount").val();retryAttemptCount>=3&&($("#checkTryAgainBtnId").addClass("gray-btn"),$("#checkTryAgainBtnId").css("pointer-events","none"),$("#tryAgainWarning").css("display","block")),$("#tryAgainWarning").is(":visible")?($("#service-error-button-section").removeClass("fsb-mt-40"),$("#service-error-button-section").addClass("fsb-mt-20")):$("#service-error-button-section").addClass("fsb-mt-40")}),$('input[type="checkbox"]').click(function(){$("#auth_img_txt").is(":checked")?$("#genrate_otp_btn").removeClass("gray-btn"):$("#genrate_otp_btn").addClass("gray-btn")}),$("#userImageText").on("keyup",function(event){var imageText=$("#userImageText").val();imageText&&imageText.match(/^([A-Za-z0-9&,-\s]){1,20}$/)?($("#proceed_second_step").removeClass("gray-btn"),$("#proceed_second_step").css("pointer-events","auto")):($("#proceed_second_step").addClass("gray-btn"),$("#proceed_second_step").css("pointer-events","none")),(8==event.which||46==event.which)&&(""!=$("#userImageText").val()&&imageText.match(/^([A-Za-z0-9&,-\s]){1,20}$/)?($("#proceed_second_step").removeClass("gray-btn"),$("#proceed_second_step").css("pointer-events","auto")):($("#proceed_second_step").addClass("gray-btn"),$("#proceed_second_step").css("pointer-events","none")))}),$("#userImageText").on("keypress",function(event){var regex=new RegExp(/^([A-Za-z0-9&,-\s]){1,20}$/),key=String.fromCharCode(event.charCode?event.charCode:event.which);return regex.test(key)?void 0:(event.preventDefault(),!1)}),$("#userImageText").bind("cut copy paste",function(event){event.preventDefault()}),$("#userImageText").focus(function(){var imageText=$("#userImageText").val();imageText||$("#userImageText").attr("placeholder","")}),$("#userImageText").blur(function(){var imageText=$("#userImageText").val();imageText||$("#userImageText").attr("placeholder","Enter text hereâ€¦")}),$("#authImageSelectedConfirmBtn").click(function(){$("#loginAuthImageSelectedFormSubmit").submit()});
